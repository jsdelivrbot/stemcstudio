{"version":3,"file":"index.js","sources":["../module/py-to-ts/transpiler.js","../module/py-to-ts/SourceMap.js","../module/py-to-ts/utils.js","../module/py-to-ts/toStringLiteralJS.js","../module/py-to-ts/asserts.js"],"sourcesContent":["import { assert } from './asserts';\nimport { Attribute } from 'typhon-lang';\nimport { Add, Sub, Mult, Div, BitOr, BitXor, BitAnd, LShift, RShift, FloorDiv, Mod } from 'typhon-lang';\nimport { Eq, NotEq, Gt, GtE, Lt, LtE, In, NotIn, Is, IsNot } from 'typhon-lang';\nimport { Name } from 'typhon-lang';\nimport { Module } from 'typhon-lang';\nimport { parse, SourceKind } from 'typhon-lang';\nimport { astFromParse } from 'typhon-lang';\nimport { semanticsOfModule } from 'typhon-lang';\nimport { toStringLiteralJS } from './toStringLiteralJS';\nimport { DEF_LOCAL } from 'typhon-lang';\nimport { isClassNameByConvention, isMethod } from './utils';\nimport { CodeWriter } from 'code-writer';\nimport { Position, positionComparator } from 'code-writer';\nimport { RBTree } from 'generic-rbtree';\nimport { SourceMap } from './SourceMap';\n/**\n * Provides enhanced scope information beyond the SymbolTableScope.\n */\nvar PrinterUnit = (function () {\n    /**\n     * Stuff that changes on entry/exit of code blocks. must be saved and restored\n     * when returning to a block.\n     * Corresponds to the body of a module, class, or function.\n     */\n    function PrinterUnit(name, ste) {\n        /**\n         * Used to determine whether a local variable has been declared.\n         */\n        this.declared = {};\n        assert(typeof name === 'string');\n        assert(typeof ste === 'object');\n        this.name = name;\n        this.ste = ste;\n        this.private_ = null;\n        this.beginLine = 0;\n        this.lineno = 0;\n        this.linenoSet = false;\n        this.localnames = [];\n        this.blocknum = 0;\n        this.blocks = [];\n        this.curblock = 0;\n        this.scopename = null;\n        this.prefixCode = '';\n        this.varDeclsCode = '';\n        this.switchCode = '';\n        this.suffixCode = '';\n        // stack of where to go on a break\n        this.breakBlocks = [];\n        // stack of where to go on a continue\n        this.continueBlocks = [];\n        this.exceptBlocks = [];\n        this.finallyBlocks = [];\n    }\n    PrinterUnit.prototype.activateScope = function () {\n        // Do nothing yet.\n    };\n    PrinterUnit.prototype.deactivateScope = function () {\n        // Do nothing yet.\n    };\n    return PrinterUnit;\n}());\nvar Printer = (function () {\n    /**\n     *\n     * @param st The symbol table obtained from semantic analysis.\n     * @param flags Not being used yet. May become options.\n     * @param sourceText The original source code, provided for annotating the generated code and source mapping.\n     */\n    function Printer(st, flags, sourceText, beginLine, beginColumn, trace) {\n        this.beginLine = beginLine;\n        this.beginColumn = beginColumn;\n        /**\n         * Used to provide a unique number for generated symbol names.\n         */\n        this.gensymCount = 0;\n        // this.fileName = fileName;\n        this.st = st;\n        this.flags = flags;\n        this.interactive = false;\n        this.nestlevel = 0;\n        this.u = null;\n        this.stack = [];\n        this.result = [];\n        // this.gensymcount = 0;\n        this.allUnits = [];\n        this.source = sourceText ? sourceText.split(\"\\n\") : false;\n        this.writer = new CodeWriter(beginLine, beginColumn, {}, trace);\n    }\n    /**\n     * This is the entry point for this visitor.\n     */\n    Printer.prototype.transpileModule = function (module) {\n        // Traversing the AST sends commands to the writer.\n        this.enterScope(\"<module>\", module, this.beginLine, this.beginColumn);\n        this.module(module);\n        this.exitScope();\n        // Now return the captured events as a transpiled module.\n        return this.writer.snapshot();\n    };\n    /**\n     * Looks up the SymbolTableScope.\n     * Pushes a new PrinterUnit onto the stack.\n     * Returns a string identifying the scope.\n     * @param name The name that will be assigned to the PrinterUnit.\n     * @param key A scope object in the AST from sematic analysis. Provides the mapping to the SymbolTableScope.\n     */\n    Printer.prototype.enterScope = function (name, key, beginLine, beginColumn) {\n        var u = new PrinterUnit(name, this.st.getStsForAst(key));\n        u.beginLine = beginLine;\n        u.beginColumn = beginColumn;\n        if (this.u && this.u.private_) {\n            u.private_ = this.u.private_;\n        }\n        this.stack.push(this.u);\n        this.allUnits.push(u);\n        var scopeName = this.gensym('scope');\n        u.scopename = scopeName;\n        this.u = u;\n        this.u.activateScope();\n        this.nestlevel++;\n        return scopeName;\n    };\n    Printer.prototype.exitScope = function () {\n        if (this.u) {\n            this.u.deactivateScope();\n        }\n        this.nestlevel--;\n        if (this.stack.length - 1 >= 0) {\n            this.u = this.stack.pop();\n        }\n        else {\n            this.u = null;\n        }\n        if (this.u) {\n            this.u.activateScope();\n        }\n    };\n    /**\n     * Generates a unique symbol name for the provided namespace.\n     */\n    Printer.prototype.gensym = function (namespace) {\n        var symbolName = namespace || '';\n        symbolName = '$' + symbolName;\n        symbolName += this.gensymCount++;\n        return symbolName;\n    };\n    // Everything below here is an implementation of the Visitor\n    Printer.prototype.assign = function (assign) {\n        this.writer.beginStatement();\n        // TODO: Declaration.\n        // TODO: How to deal with multiple target?\n        for (var _i = 0, _a = assign.targets; _i < _a.length; _i++) {\n            var target = _a[_i];\n            if (target instanceof Name) {\n                var flags = this.u.ste.symFlags[target.id.value];\n                if (flags && DEF_LOCAL) {\n                    if (this.u.declared[target.id.value]) {\n                        // The variable has already been declared.\n                    }\n                    else {\n                        // We use let for now because we would need to look ahead for more assignments.\n                        // The smenatic analysis could count the number of assignments in the current scope?\n                        this.writer.write(\"let \", null);\n                        this.u.declared[target.id.value] = true;\n                    }\n                }\n            }\n            target.accept(this);\n        }\n        this.writer.assign(\"=\", assign.eqRange);\n        assign.value.accept(this);\n        this.writer.endStatement();\n    };\n    Printer.prototype.attribute = function (attribute) {\n        attribute.value.accept(this);\n        this.writer.write(\".\", null);\n        this.writer.str(attribute.attr.value, attribute.attr.range);\n    };\n    Printer.prototype.binOp = function (be) {\n        be.lhs.accept(this);\n        var op = be.op;\n        var opRange = be.opRange;\n        switch (op) {\n            case Add: {\n                this.writer.binOp(\"+\", opRange);\n                break;\n            }\n            case Sub: {\n                this.writer.binOp(\"-\", opRange);\n                break;\n            }\n            case Mult: {\n                this.writer.binOp(\"*\", opRange);\n                break;\n            }\n            case Div: {\n                this.writer.binOp(\"/\", opRange);\n                break;\n            }\n            case BitOr: {\n                this.writer.binOp(\"|\", opRange);\n                break;\n            }\n            case BitXor: {\n                this.writer.binOp(\"^\", opRange);\n                break;\n            }\n            case BitAnd: {\n                this.writer.binOp(\"&\", opRange);\n                break;\n            }\n            case LShift: {\n                this.writer.binOp(\"<<\", opRange);\n                break;\n            }\n            case RShift: {\n                this.writer.binOp(\">>\", opRange);\n                break;\n            }\n            case Mod: {\n                this.writer.binOp(\"%\", opRange);\n                break;\n            }\n            case FloorDiv: {\n                // TODO: What is the best way to handle FloorDiv.\n                // This doesn't actually exist in TypeScript.\n                this.writer.binOp(\"//\", opRange);\n                break;\n            }\n            default: {\n                throw new Error(\"Unexpected binary operator \" + op + \": \" + typeof op);\n            }\n        }\n        be.rhs.accept(this);\n    };\n    Printer.prototype.callExpression = function (ce) {\n        if (ce.func instanceof Name) {\n            if (isClassNameByConvention(ce.func)) {\n                this.writer.write(\"new \", null);\n            }\n        }\n        else if (ce.func instanceof Attribute) {\n            if (isClassNameByConvention(ce.func)) {\n                this.writer.write(\"new \", null);\n            }\n        }\n        else {\n            throw new Error(\"Call.func must be a Name \" + ce.func);\n        }\n        ce.func.accept(this);\n        this.writer.openParen();\n        for (var i = 0; i < ce.args.length; i++) {\n            if (i > 0) {\n                this.writer.comma(null, null);\n            }\n            var arg = ce.args[i];\n            arg.accept(this);\n        }\n        for (var i = 0; i < ce.keywords.length; ++i) {\n            if (i > 0) {\n                this.writer.comma(null, null);\n            }\n            ce.keywords[i].value.accept(this);\n        }\n        if (ce.starargs) {\n            ce.starargs.accept(this);\n        }\n        if (ce.kwargs) {\n            ce.kwargs.accept(this);\n        }\n        this.writer.closeParen();\n    };\n    Printer.prototype.classDef = function (cd) {\n        this.writer.write(\"class\", null);\n        this.writer.space();\n        this.writer.name(cd.name.value, cd.name.range);\n        // this.writer.openParen();\n        // this.writer.closeParen();\n        this.writer.beginBlock();\n        /*\n        this.writer.write(\"constructor\");\n        this.writer.openParen();\n        this.writer.closeParen();\n        this.writer.beginBlock();\n        this.writer.endBlock();\n        */\n        for (var _i = 0, _a = cd.body; _i < _a.length; _i++) {\n            var stmt = _a[_i];\n            stmt.accept(this);\n        }\n        this.writer.endBlock();\n    };\n    Printer.prototype.compareExpression = function (ce) {\n        ce.left.accept(this);\n        for (var _i = 0, _a = ce.ops; _i < _a.length; _i++) {\n            var op = _a[_i];\n            switch (op) {\n                case Eq: {\n                    this.writer.write(\"===\", null);\n                    break;\n                }\n                case NotEq: {\n                    this.writer.write(\"!==\", null);\n                    break;\n                }\n                case Lt: {\n                    this.writer.write(\"<\", null);\n                    break;\n                }\n                case LtE: {\n                    this.writer.write(\"<=\", null);\n                    break;\n                }\n                case Gt: {\n                    this.writer.write(\">\", null);\n                    break;\n                }\n                case GtE: {\n                    this.writer.write(\">=\", null);\n                    break;\n                }\n                case Is: {\n                    this.writer.write(\"===\", null);\n                    break;\n                }\n                case IsNot: {\n                    this.writer.write(\"!==\", null);\n                    break;\n                }\n                case In: {\n                    this.writer.write(\" in \", null);\n                    break;\n                }\n                case NotIn: {\n                    this.writer.write(\" not in \", null);\n                    break;\n                }\n                default: {\n                    throw new Error(\"Unexpected comparison expression operator: \" + op);\n                }\n            }\n        }\n        for (var _b = 0, _c = ce.comparators; _b < _c.length; _b++) {\n            var comparator = _c[_b];\n            comparator.accept(this);\n        }\n    };\n    Printer.prototype.dict = function (dict) {\n        var keys = dict.keys;\n        var values = dict.values;\n        var N = keys.length;\n        this.writer.beginObject();\n        for (var i = 0; i < N; i++) {\n            if (i > 0) {\n                this.writer.comma(null, null);\n            }\n            keys[i].accept(this);\n            this.writer.write(\":\", null);\n            values[i].accept(this);\n        }\n        this.writer.endObject();\n    };\n    Printer.prototype.expressionStatement = function (s) {\n        this.writer.beginStatement();\n        s.value.accept(this);\n        this.writer.endStatement();\n    };\n    Printer.prototype.functionDef = function (functionDef) {\n        var isClassMethod = isMethod(functionDef);\n        if (!isClassMethod) {\n            this.writer.write(\"function \", null);\n        }\n        this.writer.name(functionDef.name.value, functionDef.name.range);\n        this.writer.openParen();\n        for (var i = 0; i < functionDef.args.args.length; i++) {\n            var arg = functionDef.args.args[i];\n            if (i === 0) {\n                if (arg.id.value === 'self') {\n                    // Ignore.\n                }\n                else {\n                    arg.accept(this);\n                }\n            }\n            else {\n                arg.accept(this);\n            }\n        }\n        this.writer.closeParen();\n        this.writer.beginBlock();\n        for (var _i = 0, _a = functionDef.body; _i < _a.length; _i++) {\n            var stmt = _a[_i];\n            stmt.accept(this);\n        }\n        this.writer.endBlock();\n    };\n    Printer.prototype.ifStatement = function (i) {\n        this.writer.write(\"if\", null);\n        this.writer.openParen();\n        i.test.accept(this);\n        this.writer.closeParen();\n        this.writer.beginBlock();\n        for (var _i = 0, _a = i.consequent; _i < _a.length; _i++) {\n            var con = _a[_i];\n            con.accept(this);\n        }\n        this.writer.endBlock();\n    };\n    Printer.prototype.importFrom = function (importFrom) {\n        this.writer.beginStatement();\n        this.writer.write(\"import\", null);\n        this.writer.space();\n        this.writer.beginBlock();\n        for (var i = 0; i < importFrom.names.length; i++) {\n            if (i > 0) {\n                this.writer.comma(null, null);\n            }\n            var alias = importFrom.names[i];\n            this.writer.name(alias.name.value, alias.name.range);\n            if (alias.asname) {\n                this.writer.space();\n                this.writer.write(\"as\", null);\n                this.writer.space();\n                this.writer.write(alias.asname, null);\n            }\n        }\n        this.writer.endBlock();\n        this.writer.space();\n        this.writer.write(\"from\", null);\n        this.writer.space();\n        this.writer.str(toStringLiteralJS(importFrom.module.value), importFrom.module.range);\n        this.writer.endStatement();\n    };\n    Printer.prototype.list = function (list) {\n        var elements = list.elts;\n        var N = elements.length;\n        this.writer.write('[', null);\n        for (var i = 0; i < N; i++) {\n            if (i > 0) {\n                this.writer.comma(null, null);\n            }\n            elements[i].accept(this);\n        }\n        this.writer.write(']', null);\n    };\n    Printer.prototype.module = function (m) {\n        for (var _i = 0, _a = m.body; _i < _a.length; _i++) {\n            var stmt = _a[_i];\n            stmt.accept(this);\n        }\n    };\n    Printer.prototype.name = function (name) {\n        // TODO: Since 'True' and 'False' are reserved words in Python,\n        // syntactic analysis (parsing) should be sufficient to identify\n        // this name as a boolean expression - avoiding this overhead.\n        var value = name.id.value;\n        var range = name.id.range;\n        switch (value) {\n            case 'True': {\n                this.writer.name('true', range);\n                break;\n            }\n            case 'False': {\n                this.writer.name('false', range);\n                break;\n            }\n            default: {\n                this.writer.name(value, range);\n            }\n        }\n    };\n    Printer.prototype.num = function (num) {\n        var value = num.n.value;\n        var range = num.n.range;\n        this.writer.num(value.toString(), range);\n    };\n    Printer.prototype.print = function (print) {\n        this.writer.name(\"console\", null);\n        this.writer.write(\".\", null);\n        this.writer.name(\"log\", null);\n        this.writer.openParen();\n        for (var _i = 0, _a = print.values; _i < _a.length; _i++) {\n            var value = _a[_i];\n            value.accept(this);\n        }\n        this.writer.closeParen();\n    };\n    Printer.prototype.returnStatement = function (rs) {\n        this.writer.beginStatement();\n        this.writer.write(\"return\", null);\n        this.writer.write(\" \", null);\n        rs.value.accept(this);\n        this.writer.endStatement();\n    };\n    Printer.prototype.str = function (str) {\n        var s = str.s;\n        // const begin = str.begin;\n        // const end = str.end;\n        this.writer.str(toStringLiteralJS(s.value), s.range);\n    };\n    return Printer;\n}());\nexport function transpileModule(sourceText, trace) {\n    if (trace === void 0) { trace = false; }\n    var cst = parse(sourceText, SourceKind.File);\n    if (typeof cst === 'object') {\n        var stmts = astFromParse(cst);\n        var mod = new Module(stmts);\n        var symbolTable = semanticsOfModule(mod);\n        var printer = new Printer(symbolTable, 0, sourceText, 1, 0, trace);\n        var textAndMappings = printer.transpileModule(mod);\n        var code = textAndMappings.text;\n        var sourceMap = mappingTreeToSourceMap(textAndMappings.tree, trace);\n        return { code: code, sourceMap: sourceMap };\n    }\n    else {\n        throw new Error(\"Error parsing source for file.\");\n    }\n}\nvar NIL_VALUE = new Position(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\nvar HI_KEY = new Position(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\nvar LO_KEY = new Position(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER);\nfunction mappingTreeToSourceMap(mappingTree, trace) {\n    var sourceToTarget = new RBTree(LO_KEY, HI_KEY, NIL_VALUE, positionComparator);\n    var targetToSource = new RBTree(LO_KEY, HI_KEY, NIL_VALUE, positionComparator);\n    if (mappingTree) {\n        for (var _i = 0, _a = mappingTree.mappings(); _i < _a.length; _i++) {\n            var mapping = _a[_i];\n            var source = mapping.source;\n            var target = mapping.target;\n            // Convert to immutable values for targets.\n            var tBegin = new Position(target.begin.line, target.begin.column);\n            var tEnd = new Position(target.end.line, target.end.column);\n            if (trace) {\n                console.log(source.begin + \" => \" + tBegin);\n                console.log(source.end + \" => \" + tEnd);\n            }\n            sourceToTarget.insert(source.begin, tBegin);\n            sourceToTarget.insert(source.end, tEnd);\n            targetToSource.insert(tBegin, source.begin);\n            targetToSource.insert(tEnd, source.end);\n        }\n    }\n    return new SourceMap(sourceToTarget, targetToSource);\n}\n","import { Position } from 'code-writer';\nvar SourceMap = (function () {\n    function SourceMap(sourceToTarget, targetToSource) {\n        this.sourceToTarget = sourceToTarget;\n        this.targetToSource = targetToSource;\n        // Do nothing yet.\n    }\n    SourceMap.prototype.getTargetPosition = function (sourcePos) {\n        var nodeL = this.sourceToTarget.glb(sourcePos);\n        var nodeU = this.sourceToTarget.lub(sourcePos);\n        if (nodeL) {\n            if (nodeU) {\n                return interpolate(sourcePos.line, sourcePos.column, nodeL.key, nodeL.value);\n            }\n            else {\n                return null;\n            }\n        }\n        else {\n            return null;\n        }\n    };\n    SourceMap.prototype.getSourcePosition = function (targetPos) {\n        var nodeL = this.targetToSource.glb(targetPos);\n        if (nodeL) {\n            return interpolate(targetPos.line, targetPos.column, nodeL.key, nodeL.value);\n        }\n        else {\n            return null;\n        }\n    };\n    return SourceMap;\n}());\nexport { SourceMap };\nfunction interpolate(sourceLine, sourceColumn, sourceBegin, targetBegin) {\n    var lineOffset = sourceLine - sourceBegin.line;\n    var columnOffset = sourceColumn - sourceBegin.column;\n    var targetLine = targetBegin.line + lineOffset;\n    var targetColumn = targetBegin.column + columnOffset;\n    return new Position(targetLine, targetColumn);\n}\n","import { RangeAnnotated } from 'typhon-lang';\n/**\n * Determines whether the name or attribute should be considered to be a class.\n * This is a heuristic test based upon the JavaScript convention for class names.\n * In future we may be able to use type information.\n */\nexport function isClassNameByConvention(name) {\n    var id = name.id;\n    if (id instanceof RangeAnnotated && typeof id.value === 'string') {\n        // console.lg(`name => ${JSON.stringify(name, null, 2)}`);\n        var N = id.value.length;\n        if (N > 0) {\n            var firstChar = id.value[0];\n            return firstChar.toUpperCase() === firstChar;\n        }\n        else {\n            return false;\n        }\n    }\n    else {\n        return false;\n    }\n}\nexport function isMethod(functionDef) {\n    for (var i = 0; i < functionDef.args.args.length; i++) {\n        if (i === 0) {\n            var arg = functionDef.args.args[i];\n            if (arg.id.value === 'self') {\n                return true;\n            }\n        }\n        else {\n            return false;\n        }\n    }\n    return false;\n}\n","/**\n * FIXME: Argument should be declared as string but not allowed by TypeScript compiler.\n * May be a bug when comparing to 0x7f below.\n */\n/**\n * FIXME: Argument should be declared as string but not allowed by TypeScript compiler.\n * May be a bug when comparing to 0x7f below.\n */ export function toStringLiteralJS(value) {\n    // single is preferred\n    var quote = \"'\";\n    if (value.indexOf(\"'\") !== -1 && value.indexOf('\"') === -1) {\n        quote = '\"';\n    }\n    var len = value.length;\n    var ret = quote;\n    for (var i = 0; i < len; ++i) {\n        var c = value.charAt(i);\n        if (c === quote || c === '\\\\')\n            ret += '\\\\' + c;\n        else if (c === '\\t')\n            ret += '\\\\t';\n        else if (c === '\\n')\n            ret += '\\\\n';\n        else if (c === '\\r')\n            ret += '\\\\r';\n        else if (c < ' ' || c >= 0x7f) {\n            var ashex = c.charCodeAt(0).toString(16);\n            if (ashex.length < 2)\n                ashex = \"0\" + ashex;\n            ret += \"\\\\x\" + ashex;\n        }\n        else\n            ret += c;\n    }\n    ret += quote;\n    return ret;\n}\n","/**\n * We're looking for something that is truthy, not just true.\n */\n/**\n * We're looking for something that is truthy, not just true.\n */ export function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function fail(message) {\n    assert(false, message);\n}\n"],"names":["Position","RBTree","positionComparator","semanticsOfModule","Module","astFromParse","parse","SourceKind","NotIn","In","IsNot","Is","GtE","Gt","LtE","Lt","NotEq","Eq","Attribute","Name","FloorDiv","Mod","RShift","LShift","BitAnd","BitXor","BitOr","Div","Mult","Sub","Add","DEF_LOCAL","CodeWriter","RangeAnnotated"],"mappings":"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"}