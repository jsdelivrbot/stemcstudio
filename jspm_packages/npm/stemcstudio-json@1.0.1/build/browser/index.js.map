{"version":3,"file":"index.js","sources":["../module/lib/core/parse.js"],"sourcesContent":["/*\n    http://www.JSON.org/json_parse.js\n    2008-09-18\n\n    Public Domain.\n\n    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n\n    This file creates a json_parse function.\n\n        json_parse(text, reviver)\n            This method parses a JSON text to produce an object or array.\n            It can throw a SyntaxError exception.\n\n            The optional reviver parameter is a function that can filter and\n            transform the results. It receives each of the keys and values,\n            and its return value is used instead of the original value.\n            If it returns what it received, then the structure is not modified.\n            If it returns undefined then the member is deleted.\n\n            Example:\n\n            // Parse the text. Values that look like ISO date strings will\n            // be converted to Date objects.\n\n            myData = json_parse(text, function (key, value) {\n                var a;\n                if (typeof value === 'string') {\n                    a =\n/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\n                    if (a) {\n                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\n                            +a[5], +a[6]));\n                    }\n                }\n                return value;\n            });\n\n    This is a reference implementation. You are free to copy, modify, or\n    redistribute.\n\n    This code should be minified before deployment.\n    See http://javascript.crockford.com/jsmin.html\n\n    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\n    NOT CONTROL.\n*/\n// This is a function that can parse a JSON text, producing a JavaScript\n// data structure. It is a simple, recursive descent parser. It does not use\n// eval or regular expressions, so it can be used as a model for implementing\n// a JSON parser in other languages.\n// We are defining the function inside of another function to avoid creating\n// global variables.\n/**\n * The index of the current character.\n */\nvar at;\n/**\n * The current character.\n */\nvar ch;\n/**\n * Lookup table\n */\nvar escapee = {\n    '\"': '\"',\n    '\\\\': '\\\\',\n    '/': '/',\n    b: '\\b',\n    f: '\\f',\n    n: '\\n',\n    r: '\\r',\n    t: '\\t'\n};\n/**\n * Module-level variable whose sole purpose is to provide the text property for the error function.\n */\nvar text;\nvar error = function error(m) {\n    // Call error when something is wrong.\n    throw {\n        name: 'SyntaxError',\n        message: m,\n        at: at,\n        text: text\n    };\n};\n/**\n * Returns the character at the current position and advances the current position.\n * @param c The character that is expected to be the current character. May be omitted.\n */\nvar next = function next(c) {\n    // If a c parameter is provided, verify that it matches the current character.\n    if (c && c !== ch) {\n        error(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\n    }\n    // Get the next character. When there are no more characters,\n    // return the empty string.\n    ch = text.charAt(at);\n    at += 1;\n    return ch;\n};\nvar number = function number() {\n    // Parse a number value.\n    var n;\n    var string = '';\n    if (ch === '-') {\n        string = '-';\n        next('-');\n    }\n    while (ch >= '0' && ch <= '9') {\n        string += ch;\n        next();\n    }\n    if (ch === '.') {\n        string += '.';\n        while (next() && ch >= '0' && ch <= '9') {\n            string += ch;\n        }\n    }\n    if (ch === 'e' || ch === 'E') {\n        string += ch;\n        ch = next();\n        if (ch === '-' || ch === '+') {\n            string += ch;\n            next();\n        }\n        while (ch >= '0' && ch <= '9') {\n            string += ch;\n            next();\n        }\n    }\n    n = +string;\n    if (isNaN(n)) {\n        error(\"Bad number\");\n    }\n    else {\n        return n;\n    }\n};\nvar string = function () {\n    // Parse a string value.\n    var hex, i, string = '', uffff;\n    // When parsing for string values, we must look for \" and \\ characters.\n    if (ch === '\"') {\n        while (next()) {\n            if (ch === '\"') {\n                next();\n                return string;\n            }\n            else if (ch === '\\\\') {\n                ch = next();\n                if (ch === 'u') {\n                    uffff = 0;\n                    for (i = 0; i < 4; i += 1) {\n                        hex = parseInt(next(), 16);\n                        if (!isFinite(hex)) {\n                            break;\n                        }\n                        uffff = uffff * 16 + hex;\n                    }\n                    string += String.fromCharCode(uffff);\n                }\n                else if (typeof escapee[ch] === 'string') {\n                    string += escapee[ch];\n                }\n                else {\n                    break;\n                }\n            }\n            else {\n                string += ch;\n            }\n        }\n    }\n    error(\"Bad string\");\n};\nvar white = function skipWhitespace() {\n    // Skip whitespace.\n    while (ch && ch <= ' ') {\n        ch = next();\n    }\n};\nvar word = function word() {\n    // true, false, or null.\n    switch (ch) {\n        case 't':\n            next('t');\n            next('r');\n            next('u');\n            next('e');\n            return true;\n        case 'f':\n            next('f');\n            next('a');\n            next('l');\n            next('s');\n            next('e');\n            return false;\n        case 'n':\n            next('n');\n            next('u');\n            next('l');\n            next('l');\n            return null;\n    }\n    error(\"Unexpected '\" + ch + \"'\");\n};\n// const value;  // Place holder for the value function.\nvar array = function () {\n    // Parse an array value.\n    var array = [];\n    if (ch === '[') {\n        ch = next('[');\n        white();\n        if (ch === ']') {\n            next(']');\n            return array; // empty array\n        }\n        while (ch) {\n            array.push(value());\n            white();\n            if (ch === ']') {\n                next(']');\n                return array;\n            }\n            next(',');\n            white();\n        }\n    }\n    error(\"Bad array\");\n};\nvar object = function () {\n    // Parse an object value.\n    var key, object = {};\n    if (ch === '{') {\n        ch = next('{');\n        white();\n        if (ch === '}') {\n            next('}');\n            return object; // empty object\n        }\n        while (ch) {\n            key = string();\n            white();\n            next(':');\n            if (Object.hasOwnProperty.call(object, key)) {\n                error('Duplicate key \"' + key + '\"');\n            }\n            object[key] = value();\n            white();\n            if (ch === '}') {\n                next('}');\n                return object;\n            }\n            next(',');\n            white();\n        }\n    }\n    error(\"Bad object\");\n};\nvar value = function value() {\n    // Parse a JSON value. It could be an object, an array, a string, a number,\n    // or a word.\n    white();\n    switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n            return string();\n        case '-':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n    }\n};\n// Return the json_parse function. It will have access to all of the above\n// functions and variables.\nexport function parse(source, reviver) {\n    var result;\n    text = source;\n    at = 0;\n    ch = ' ';\n    result = value();\n    white();\n    if (ch) {\n        error(\"Syntax error\");\n    }\n    // If there is a reviver function, we recursively walk the new structure,\n    // passing each name/value pair to the reviver function for possible\n    // transformation, starting with a temporary root object that holds the result\n    // in an empty key. If there is not a reviver function, we simply return the\n    // result.\n    return typeof reviver === 'function' ? function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && typeof value === 'object') {\n            for (k in value) {\n                if (Object.hasOwnProperty.call(value, k)) {\n                    v = walk(value, k);\n                    if (v !== undefined) {\n                        value[k] = v;\n                    }\n                    else {\n                        delete value[k];\n                    }\n                }\n            }\n        }\n        return reviver.call(holder, key, value);\n    }({ '': result }, '') : result;\n}\n"],"names":[],"mappings":"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"}