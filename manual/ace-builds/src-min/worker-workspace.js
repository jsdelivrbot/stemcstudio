"no use strict";(function(e){if(typeof e.window!="undefined"&&e.document)return;e.console=function(){var e=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:e})},e.console.error=e.console.warn=e.console.log=e.console.trace=e.console,e.window=e,e.ace=e,e.onerror=function(e,t,n,r,i){console.error("Worker "+(i?i.stack:e))},e.normalizeModule=function(t,n){if(n.indexOf("!")!==-1){var r=n.split("!");return e.normalizeModule(t,r[0])+"!"+e.normalizeModule(t,r[1])}if(n.charAt(0)=="."){var i=t.split("/").slice(0,-1).join("/");n=(i?i+"/":"")+n;while(n.indexOf(".")!==-1&&s!=n){var s=n;n=n.replace(/^\.\//,"").replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},e.require=function(t,n){n||(n=t,t=null);if(!n.charAt)throw new Error("worker.js require() accepts only (parentId, id) as arguments");n=e.normalizeModule(t,n);var r=e.require.modules[n];if(r)return r.initialized||(r.initialized=!0,r.exports=r.factory().exports),r.exports;var i=n.split("/");if(!e.require.tlns)return console.log("unable to load "+n);i[0]=e.require.tlns[i[0]]||i[0];var s=i.join("/")+".js";return e.require.id=n,importScripts(s),e.require(t,n)},e.require.modules={},e.require.tlns={},e.define=function(t,n,r){arguments.length==2?(r=n,typeof t!="string"&&(n=t,t=e.require.id)):arguments.length==1&&(r=t,n=[],t=e.require.id),n.length||(n=["require","exports","module"]);if(t.indexOf("text!")===0)return;var i=function(n){return e.require(t,n)};e.require.modules[t]={exports:{},factory:function(){var e=this,t=r.apply(this,n.map(function(t){switch(t){case"require":return i;case"exports":return e.exports;case"module":return e;default:return i(t)}}));return t&&(e.exports=t),e}}},e.define.amd={},e.initBaseUrls=function(t){require.tlns=t},e.initSender=function(){var n=e.require("ace/lib/event_emitter").EventEmitter,r=e.require("ace/lib/oop"),i=function(){};return function(){r.implement(this,n),this.callback=function(e,t){postMessage({type:"call",id:t,data:e})},this.emit=function(e,t){postMessage({type:"event",name:e,data:t})}}.call(i.prototype),new i};var t=e.main=null,n=e.sender=null;e.onmessage=function(r){var i=r.data;if(i.command){if(!t[i.command])throw new Error("Unknown command:"+i.command);t[i.command].apply(t,i.args)}else if(i.init){initBaseUrls(i.tlns),require("ace/lib/es5-shim"),n=e.sender=initSender();var s=require(i.module)[i.classname];t=e.main=new s(n)}else i.event&&n&&n._signal(i.event,i.data)}})(this),define("ace/workspace/workspace_protocol",["require","exports","module"],function(e,t,n){t.EVENT_NAME_COMPLETIONS="completions"}),define("ace/workspace/typescriptServices",["require","exports","module","fs","path","module","os"],function(e,t,n){var r;(function(e){e.DiagnosticCode={error_TS_0_1:"error TS{0}: {1}",warning_TS_0_1:"warning TS{0}: {1}",Unrecognized_escape_sequence:"Unrecognized escape sequence.",Unexpected_character_0:"Unexpected character {0}.",Missing_close_quote_character:"Missing close quote character.",Identifier_expected:"Identifier expected.",_0_keyword_expected:"'{0}' keyword expected.",_0_expected:"'{0}' expected.",Identifier_expected_0_is_a_keyword:"Identifier expected; '{0}' is a keyword.",Automatic_semicolon_insertion_not_allowed:"Automatic semicolon insertion not allowed.",Unexpected_token_0_expected:"Unexpected token; '{0}' expected.",Trailing_separator_not_allowed:"Trailing separator not allowed.",AsteriskSlash_expected:"'*/' expected.",public_or_private_modifier_must_precede_static:"'public' or 'private' modifier must precede 'static'.",Unexpected_token:"Unexpected token.",Catch_clause_parameter_cannot_have_a_type_annotation:"Catch clause parameter cannot have a type annotation.",Rest_parameter_must_be_last_in_list:"Rest parameter must be last in list.",Parameter_cannot_have_question_mark_and_initializer:"Parameter cannot have question mark and initializer.",Required_parameter_cannot_follow_optional_parameter:"Required parameter cannot follow optional parameter.",Index_signatures_cannot_have_rest_parameters:"Index signatures cannot have rest parameters.",Index_signature_parameter_cannot_have_accessibility_modifiers:"Index signature parameter cannot have accessibility modifiers.",Index_signature_parameter_cannot_have_a_question_mark:"Index signature parameter cannot have a question mark.",Index_signature_parameter_cannot_have_an_initializer:"Index signature parameter cannot have an initializer.",Index_signature_must_have_a_type_annotation:"Index signature must have a type annotation.",Index_signature_parameter_must_have_a_type_annotation:"Index signature parameter must have a type annotation.",Index_signature_parameter_type_must_be_string_or_number:"Index signature parameter type must be 'string' or 'number'.",extends_clause_already_seen:"'extends' clause already seen.",extends_clause_must_precede_implements_clause:"'extends' clause must precede 'implements' clause.",Classes_can_only_extend_a_single_class:"Classes can only extend a single class.",implements_clause_already_seen:"'implements' clause already seen.",Accessibility_modifier_already_seen:"Accessibility modifier already seen.",_0_modifier_must_precede_1_modifier:"'{0}' modifier must precede '{1}' modifier.",_0_modifier_already_seen:"'{0}' modifier already seen.",_0_modifier_cannot_appear_on_a_class_element:"'{0}' modifier cannot appear on a class element.",Interface_declaration_cannot_have_implements_clause:"Interface declaration cannot have 'implements' clause.",super_invocation_cannot_have_type_arguments:"'super' invocation cannot have type arguments.",Only_ambient_modules_can_use_quoted_names:"Only ambient modules can use quoted names.",Statements_are_not_allowed_in_ambient_contexts:"Statements are not allowed in ambient contexts.",Implementations_are_not_allowed_in_ambient_contexts:"Implementations are not allowed in ambient contexts.",declare_modifier_not_allowed_for_code_already_in_an_ambient_context:"'declare' modifier not allowed for code already in an ambient context.",Initializers_are_not_allowed_in_ambient_contexts:"Initializers are not allowed in ambient contexts.",Parameter_property_declarations_can_only_be_used_in_a_non_ambient_constructor_declaration:"Parameter property declarations can only be used in a non-ambient constructor declaration.",Function_implementation_expected:"Function implementation expected.",Constructor_implementation_expected:"Constructor implementation expected.",Function_overload_name_must_be_0:"Function overload name must be '{0}'.",_0_modifier_cannot_appear_on_a_module_element:"'{0}' modifier cannot appear on a module element.",declare_modifier_cannot_appear_on_an_interface_declaration:"'declare' modifier cannot appear on an interface declaration.",declare_modifier_required_for_top_level_element:"'declare' modifier required for top level element.",Rest_parameter_cannot_be_optional:"Rest parameter cannot be optional.",Rest_parameter_cannot_have_an_initializer:"Rest parameter cannot have an initializer.",set_accessor_must_have_one_and_only_one_parameter:"'set' accessor must have one and only one parameter.",set_accessor_parameter_cannot_be_optional:"'set' accessor parameter cannot be optional.",set_accessor_parameter_cannot_have_an_initializer:"'set' accessor parameter cannot have an initializer.",set_accessor_cannot_have_rest_parameter:"'set' accessor cannot have rest parameter.",get_accessor_cannot_have_parameters:"'get' accessor cannot have parameters.",Modifiers_cannot_appear_here:"Modifiers cannot appear here.",Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher:"Accessors are only available when targeting ECMAScript 5 and higher.",Class_name_cannot_be_0:"Class name cannot be '{0}'.",Interface_name_cannot_be_0:"Interface name cannot be '{0}'.",Enum_name_cannot_be_0:"Enum name cannot be '{0}'.",Module_name_cannot_be_0:"Module name cannot be '{0}'.",Enum_member_must_have_initializer:"Enum member must have initializer.",Export_assignment_cannot_be_used_in_internal_modules:"Export assignment cannot be used in internal modules.",Export_assignment_not_allowed_in_module_with_exported_element:"Export assignment not allowed in module with exported element.",Module_cannot_have_multiple_export_assignments:"Module cannot have multiple export assignments.",Ambient_enum_elements_can_only_have_integer_literal_initializers:"Ambient enum elements can only have integer literal initializers.",module_class_interface_enum_import_or_statement:"module, class, interface, enum, import or statement",constructor_function_accessor_or_variable:"constructor, function, accessor or variable",statement:"statement",case_or_default_clause:"case or default clause",identifier:"identifier",call_construct_index_property_or_function_signature:"call, construct, index, property or function signature",expression:"expression",type_name:"type name",property_or_accessor:"property or accessor",parameter:"parameter",type:"type",type_parameter:"type parameter",declare_modifier_not_allowed_on_import_declaration:"'declare' modifier not allowed on import declaration.",Function_overload_must_be_static:"Function overload must be static.",Function_overload_must_not_be_static:"Function overload must not be static.",Parameter_property_declarations_cannot_be_used_in_a_constructor_overload:"Parameter property declarations cannot be used in a constructor overload.",Invalid_reference_directive_syntax:"Invalid 'reference' directive syntax.",Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher:"Octal literals are not available when targeting ECMAScript 5 and higher.",Accessors_are_not_allowed_in_ambient_contexts:"Accessors are not allowed in ambient contexts.",_0_modifier_cannot_appear_on_a_constructor_declaration:"'{0}' modifier cannot appear on a constructor declaration.",_0_modifier_cannot_appear_on_a_parameter:"'{0}' modifier cannot appear on a parameter.",Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:"Only a single variable declaration is allowed in a 'for...in' statement.",Type_parameters_cannot_appear_on_a_constructor_declaration:"Type parameters cannot appear on a constructor declaration.",Type_annotation_cannot_appear_on_a_constructor_declaration:"Type annotation cannot appear on a constructor declaration.",Duplicate_identifier_0:"Duplicate identifier '{0}'.",The_name_0_does_not_exist_in_the_current_scope:"The name '{0}' does not exist in the current scope.",The_name_0_does_not_refer_to_a_value:"The name '{0}' does not refer to a value.",super_can_only_be_used_inside_a_class_instance_method:"'super' can only be used inside a class instance method.",The_left_hand_side_of_an_assignment_expression_must_be_a_variable_property_or_indexer:"The left-hand side of an assignment expression must be a variable, property or indexer.",Value_of_type_0_is_not_callable_Did_you_mean_to_include_new:"Value of type '{0}' is not callable. Did you mean to include 'new'?",Value_of_type_0_is_not_callable:"Value of type '{0}' is not callable.",Value_of_type_0_is_not_newable:"Value of type '{0}' is not newable.",Value_of_type_0_is_not_indexable_by_type_1:"Value of type '{0}' is not indexable by type '{1}'.",Operator_0_cannot_be_applied_to_types_1_and_2:"Operator '{0}' cannot be applied to types '{1}' and '{2}'.",Operator_0_cannot_be_applied_to_types_1_and_2_3:"Operator '{0}' cannot be applied to types '{1}' and '{2}': {3}",Cannot_convert_0_to_1:"Cannot convert '{0}' to '{1}'.",Cannot_convert_0_to_1_NL_2:"Cannot convert '{0}' to '{1}':{NL}{2}",Expected_var_class_interface_or_module:"Expected var, class, interface, or module.",Operator_0_cannot_be_applied_to_type_1:"Operator '{0}' cannot be applied to type '{1}'.",Getter_0_already_declared:"Getter '{0}' already declared.",Setter_0_already_declared:"Setter '{0}' already declared.",Exported_class_0_extends_private_class_1:"Exported class '{0}' extends private class '{1}'.",Exported_class_0_implements_private_interface_1:"Exported class '{0}' implements private interface '{1}'.",Exported_interface_0_extends_private_interface_1:"Exported interface '{0}' extends private interface '{1}'.",Exported_class_0_extends_class_from_inaccessible_module_1:"Exported class '{0}' extends class from inaccessible module {1}.",Exported_class_0_implements_interface_from_inaccessible_module_1:"Exported class '{0}' implements interface from inaccessible module {1}.",Exported_interface_0_extends_interface_from_inaccessible_module_1:"Exported interface '{0}' extends interface from inaccessible module {1}.",Public_static_property_0_of_exported_class_has_or_is_using_private_type_1:"Public static property '{0}' of exported class has or is using private type '{1}'.",Public_property_0_of_exported_class_has_or_is_using_private_type_1:"Public property '{0}' of exported class has or is using private type '{1}'.",Property_0_of_exported_interface_has_or_is_using_private_type_1:"Property '{0}' of exported interface has or is using private type '{1}'.",Exported_variable_0_has_or_is_using_private_type_1:"Exported variable '{0}' has or is using private type '{1}'.",Public_static_property_0_of_exported_class_is_using_inaccessible_module_1:"Public static property '{0}' of exported class is using inaccessible module {1}.",Public_property_0_of_exported_class_is_using_inaccessible_module_1:"Public property '{0}' of exported class is using inaccessible module {1}.",Property_0_of_exported_interface_is_using_inaccessible_module_1:"Property '{0}' of exported interface is using inaccessible module {1}.",Exported_variable_0_is_using_inaccessible_module_1:"Exported variable '{0}' is using inaccessible module {1}.",Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_type_1:"Parameter '{0}' of constructor from exported class has or is using private type '{1}'.",Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_type_1:"Parameter '{0}' of public static property setter from exported class has or is using private type '{1}'.",Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_type_1:"Parameter '{0}' of public property setter from exported class has or is using private type '{1}'.",Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_type_1:"Parameter '{0}' of constructor signature from exported interface has or is using private type '{1}'.",Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_type_1:"Parameter '{0}' of call signature from exported interface has or is using private type '{1}'.",Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_type_1:"Parameter '{0}' of public static method from exported class has or is using private type '{1}'.",Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_type_1:"Parameter '{0}' of public method from exported class has or is using private type '{1}'.",Parameter_0_of_method_from_exported_interface_has_or_is_using_private_type_1:"Parameter '{0}' of method from exported interface has or is using private type '{1}'.",Parameter_0_of_exported_function_has_or_is_using_private_type_1:"Parameter '{0}' of exported function has or is using private type '{1}'.",Parameter_0_of_constructor_from_exported_class_is_using_inaccessible_module_1:"Parameter '{0}' of constructor from exported class is using inaccessible module {1}.",Parameter_0_of_public_static_property_setter_from_exported_class_is_using_inaccessible_module_1:"Parameter '{0}' of public static property setter from exported class is using inaccessible module {1}.",Parameter_0_of_public_property_setter_from_exported_class_is_using_inaccessible_module_1:"Parameter '{0}' of public property setter from exported class is using inaccessible module {1}.",Parameter_0_of_constructor_signature_from_exported_interface_is_using_inaccessible_module_1:"Parameter '{0}' of constructor signature from exported interface is using inaccessible module {1}.",Parameter_0_of_call_signature_from_exported_interface_is_using_inaccessible_module_1:"Parameter '{0}' of call signature from exported interface is using inaccessible module {1}",Parameter_0_of_public_static_method_from_exported_class_is_using_inaccessible_module_1:"Parameter '{0}' of public static method from exported class is using inaccessible module {1}.",Parameter_0_of_public_method_from_exported_class_is_using_inaccessible_module_1:"Parameter '{0}' of public method from exported class is using inaccessible module {1}.",Parameter_0_of_method_from_exported_interface_is_using_inaccessible_module_1:"Parameter '{0}' of method from exported interface is using inaccessible module {1}.",Parameter_0_of_exported_function_is_using_inaccessible_module_1:"Parameter '{0}' of exported function is using inaccessible module {1}.",Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_type_0:"Return type of public static property getter from exported class has or is using private type '{0}'.",Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_type_0:"Return type of public property getter from exported class has or is using private type '{0}'.",Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_type_0:"Return type of constructor signature from exported interface has or is using private type '{0}'.",Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_type_0:"Return type of call signature from exported interface has or is using private type '{0}'.",Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_type_0:"Return type of index signature from exported interface has or is using private type '{0}'.",Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_type_0:"Return type of public static method from exported class has or is using private type '{0}'.",Return_type_of_public_method_from_exported_class_has_or_is_using_private_type_0:"Return type of public method from exported class has or is using private type '{0}'.",Return_type_of_method_from_exported_interface_has_or_is_using_private_type_0:"Return type of method from exported interface has or is using private type '{0}'.",Return_type_of_exported_function_has_or_is_using_private_type_0:"Return type of exported function has or is using private type '{0}'.",Return_type_of_public_static_property_getter_from_exported_class_is_using_inaccessible_module_0:"Return type of public static property getter from exported class is using inaccessible module {0}.",Return_type_of_public_property_getter_from_exported_class_is_using_inaccessible_module_0:"Return type of public property getter from exported class is using inaccessible module {0}.",Return_type_of_constructor_signature_from_exported_interface_is_using_inaccessible_module_0:"Return type of constructor signature from exported interface is using inaccessible module {0}.",Return_type_of_call_signature_from_exported_interface_is_using_inaccessible_module_0:"Return type of call signature from exported interface is using inaccessible module {0}.",Return_type_of_index_signature_from_exported_interface_is_using_inaccessible_module_0:"Return type of index signature from exported interface is using inaccessible module {0}.",Return_type_of_public_static_method_from_exported_class_is_using_inaccessible_module_0:"Return type of public static method from exported class is using inaccessible module {0}.",Return_type_of_public_method_from_exported_class_is_using_inaccessible_module_0:"Return type of public method from exported class is using inaccessible module {0}.",Return_type_of_method_from_exported_interface_is_using_inaccessible_module_0:"Return type of method from exported interface is using inaccessible module {0}.",Return_type_of_exported_function_is_using_inaccessible_module_0:"Return type of exported function is using inaccessible module {0}.",new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead:"'new T[]' cannot be used to create an array. Use 'new Array<T>()' instead.",A_parameter_list_must_follow_a_generic_type_argument_list_expected:"A parameter list must follow a generic type argument list. '(' expected.",Multiple_constructor_implementations_are_not_allowed:"Multiple constructor implementations are not allowed.",Unable_to_resolve_external_module_0:"Unable to resolve external module '{0}'.",Module_cannot_be_aliased_to_a_non_module_type:"Module cannot be aliased to a non-module type.",A_class_may_only_extend_another_class:"A class may only extend another class.",A_class_may_only_implement_another_class_or_interface:"A class may only implement another class or interface.",An_interface_may_only_extend_another_class_or_interface:"An interface may only extend another class or interface.",Unable_to_resolve_type:"Unable to resolve type.",Unable_to_resolve_type_of_0:"Unable to resolve type of '{0}'.",Unable_to_resolve_type_parameter_constraint:"Unable to resolve type parameter constraint.",Type_parameter_constraint_cannot_be_a_primitive_type:"Type parameter constraint cannot be a primitive type.",Supplied_parameters_do_not_match_any_signature_of_call_target:"Supplied parameters do not match any signature of call target.",Supplied_parameters_do_not_match_any_signature_of_call_target_NL_0:"Supplied parameters do not match any signature of call target:{NL}{0}",Invalid_new_expression:"Invalid 'new' expression.",Call_signatures_used_in_a_new_expression_must_have_a_void_return_type:"Call signatures used in a 'new' expression must have a 'void' return type.",Could_not_select_overload_for_new_expression:"Could not select overload for 'new' expression.",Type_0_does_not_satisfy_the_constraint_1_for_type_parameter_2:"Type '{0}' does not satisfy the constraint '{1}' for type parameter '{2}'.",Could_not_select_overload_for_call_expression:"Could not select overload for 'call' expression.",Cannot_invoke_an_expression_whose_type_lacks_a_call_signature:"Cannot invoke an expression whose type lacks a call signature.",Calls_to_super_are_only_valid_inside_a_class:"Calls to 'super' are only valid inside a class.",Generic_type_0_requires_1_type_argument_s:"Generic type '{0}' requires {1} type argument(s).",Type_of_array_literal_cannot_be_determined_Best_common_type_could_not_be_found_for_array_elements:"Type of array literal cannot be determined. Best common type could not be found for array elements.",Could_not_find_enclosing_symbol_for_dotted_name_0:"Could not find enclosing symbol for dotted name '{0}'.",The_property_0_does_not_exist_on_value_of_type_1:"The property '{0}' does not exist on value of type '{1}'.",Could_not_find_symbol_0:"Could not find symbol '{0}'.",get_and_set_accessor_must_have_the_same_type:"'get' and 'set' accessor must have the same type.",this_cannot_be_referenced_in_current_location:"'this' cannot be referenced in current location.",Static_members_cannot_reference_class_type_parameters:"Static members cannot reference class type parameters.",Class_0_is_recursively_referenced_as_a_base_type_of_itself:"Class '{0}' is recursively referenced as a base type of itself.",Interface_0_is_recursively_referenced_as_a_base_type_of_itself:"Interface '{0}' is recursively referenced as a base type of itself.",super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class:"'super' property access is permitted only in a constructor, member function, or member accessor of a derived class.",super_cannot_be_referenced_in_non_derived_classes:"'super' cannot be referenced in non-derived classes.",A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties:"A 'super' call must be the first statement in the constructor when a class contains initialized properties or has parameter properties.",Constructors_for_derived_classes_must_contain_a_super_call:"Constructors for derived classes must contain a 'super' call.",Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors:"Super calls are not permitted outside constructors or in nested functions inside constructors.",_0_1_is_inaccessible:"'{0}.{1}' is inaccessible.",this_cannot_be_referenced_within_module_bodies:"'this' cannot be referenced within module bodies.",Invalid_expression_types_not_known_to_support_the_addition_operator:"Invalid '+' expression - types not known to support the addition operator.",The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:"The right-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type.",The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:"The left-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type.",The_type_of_a_unary_arithmetic_operation_operand_must_be_of_type_any_number_or_an_enum_type:"The type of a unary arithmetic operation operand must be of type 'any', 'number' or an enum type.",Variable_declarations_of_a_for_statement_cannot_use_a_type_annotation:"Variable declarations of a 'for' statement cannot use a type annotation.",Variable_declarations_of_a_for_statement_must_be_of_types_string_or_any:"Variable declarations of a 'for' statement must be of types 'string' or 'any'.",The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter:"The right-hand side of a 'for...in' statement must be of type 'any', an object type or a type parameter.",The_left_hand_side_of_an_in_expression_must_be_of_types_any_string_or_number:"The left-hand side of an 'in' expression must be of types 'any', 'string' or 'number'.",The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:"The right-hand side of an 'in' expression must be of type 'any', an object type or a type parameter.",The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:"The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter.",The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type:"The right-hand side of an 'instanceof' expression must be of type 'any' or of a type assignable to the 'Function' interface type.",Setters_cannot_return_a_value:"Setters cannot return a value.",Tried_to_query_type_of_uninitialized_module_0:"Tried to query type of uninitialized module '{0}'.",Tried_to_set_variable_type_to_uninitialized_module_type_0:"Tried to set variable type to uninitialized module type '{0}'.",Type_0_does_not_have_type_parameters:"Type '{0}' does not have type parameters.",Getters_must_return_a_value:"Getters must return a value.",Getter_and_setter_accessors_do_not_agree_in_visibility:"Getter and setter accessors do not agree in visibility.",Invalid_left_hand_side_of_assignment_expression:"Invalid left-hand side of assignment expression.",Function_declared_a_non_void_return_type_but_has_no_return_expression:"Function declared a non-void return type, but has no return expression.",Cannot_resolve_return_type_reference:"Cannot resolve return type reference.",Constructors_cannot_have_a_return_type_of_void:"Constructors cannot have a return type of 'void'.",Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2:"Subsequent variable declarations must have the same type.  Variable '{0}' must be of type '{1}', but here has type '{2}'.",All_symbols_within_a_with_block_will_be_resolved_to_any:"All symbols within a with block will be resolved to 'any'.",Import_declarations_in_an_internal_module_cannot_reference_an_external_module:"Import declarations in an internal module cannot reference an external module.",Class_0_declares_interface_1_but_does_not_implement_it_NL_2:"Class {0} declares interface {1} but does not implement it:{NL}{2}",Class_0_declares_class_1_as_an_interface_but_does_not_implement_it_NL_2:"Class {0} declares class {1} as an interface but does not implement it:{NL}{2}",The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_property_or_indexer:"The operand of an increment or decrement operator must be a variable, property or indexer.",this_cannot_be_referenced_in_static_initializers_in_a_class_body:"'this' cannot be referenced in static initializers in a class body.",Class_0_cannot_extend_class_1_NL_2:"Class '{0}' cannot extend class '{1}':{NL}{2}",Interface_0_cannot_extend_class_1_NL_2:"Interface '{0}' cannot extend class '{1}':{NL}{2}",Interface_0_cannot_extend_interface_1_NL_2:"Interface '{0}' cannot extend interface '{1}':{NL}{2}",Duplicate_overload_signature_for_0:"Duplicate overload signature for '{0}'.",Duplicate_constructor_overload_signature:"Duplicate constructor overload signature.",Duplicate_overload_call_signature:"Duplicate overload call signature.",Duplicate_overload_construct_signature:"Duplicate overload construct signature.",Overload_signature_is_not_compatible_with_function_definition:"Overload signature is not compatible with function definition.",Overload_signature_is_not_compatible_with_function_definition_NL_0:"Overload signature is not compatible with function definition:{NL}{0}",Overload_signatures_must_all_be_public_or_private:"Overload signatures must all be public or private.",Overload_signatures_must_all_be_exported_or_not_exported:"Overload signatures must all be exported or not exported.",Overload_signatures_must_all_be_ambient_or_non_ambient:"Overload signatures must all be ambient or non-ambient.",Overload_signatures_must_all_be_optional_or_required:"Overload signatures must all be optional or required.",Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature:"Specialized overload signature is not assignable to any non-specialized signature.",this_cannot_be_referenced_in_constructor_arguments:"'this' cannot be referenced in constructor arguments.",Instance_member_cannot_be_accessed_off_a_class:"Instance member cannot be accessed off a class.",Untyped_function_calls_may_not_accept_type_arguments:"Untyped function calls may not accept type arguments.",Non_generic_functions_may_not_accept_type_arguments:"Non-generic functions may not accept type arguments.",A_generic_type_may_not_reference_itself_with_a_wrapped_form_of_its_own_type_parameters:"A generic type may not reference itself with a wrapped form of its own type parameters.",Rest_parameters_must_be_array_types:"Rest parameters must be array types.",Overload_signature_implementation_cannot_use_specialized_type:"Overload signature implementation cannot use specialized type.",Export_assignments_may_only_be_used_at_the_top_level_of_external_modules:"Export assignments may only be used at the top-level of external modules.",Export_assignments_may_only_be_made_with_variables_functions_classes_interfaces_enums_and_internal_modules:"Export assignments may only be made with variables, functions, classes, interfaces, enums and internal modules.",Only_public_methods_of_the_base_class_are_accessible_via_the_super_keyword:"Only public methods of the base class are accessible via the 'super' keyword.",Numeric_indexer_type_0_must_be_assignable_to_string_indexer_type_1:"Numeric indexer type '{0}' must be assignable to string indexer type '{1}'.",Numeric_indexer_type_0_must_be_assignable_to_string_indexer_type_1_NL_2:"Numeric indexer type '{0}' must be assignable to string indexer type '{1}':{NL}{2}",All_numerically_named_properties_must_be_assignable_to_numeric_indexer_type_0:"All numerically named properties must be assignable to numeric indexer type '{0}'.",All_numerically_named_properties_must_be_assignable_to_numeric_indexer_type_0_NL_1:"All numerically named properties must be assignable to numeric indexer type '{0}':{NL}{1}",All_named_properties_must_be_assignable_to_string_indexer_type_0:"All named properties must be assignable to string indexer type '{0}'.",All_named_properties_must_be_assignable_to_string_indexer_type_0_NL_1:"All named properties must be assignable to string indexer type '{0}':{NL}{1}",Generic_type_references_must_include_all_type_arguments:"Generic type references must include all type arguments.",Default_arguments_are_only_allowed_in_implementation:"Default arguments are only allowed in implementation.",Overloads_cannot_differ_only_by_return_type:"Overloads cannot differ only by return type.",Function_expression_declared_a_non_void_return_type_but_has_no_return_expression:"Function expression declared a non-void return type, but has no return expression.",Import_declaration_referencing_identifier_from_internal_module_can_only_be_made_with_variables_functions_classes_interfaces_enums_and_internal_modules:"Import declaration referencing identifier from internal module can only be made with variables, functions, classes, interfaces, enums and internal modules.",Could_not_find_symbol_0_in_module_1:"Could not find symbol '{0}' in module '{1}'.",Unable_to_resolve_module_reference_0:"Unable to resolve module reference '{0}'.",Could_not_find_module_0_in_module_1:"Could not find module '{0}' in module '{1}'.",Exported_import_declaration_0_is_assigned_value_with_type_that_has_or_is_using_private_type_1:"Exported import declaration '{0}' is assigned value with type that has or is using private type '{1}'.",Exported_import_declaration_0_is_assigned_value_with_type_that_is_using_inaccessible_module_1:"Exported import declaration '{0}' is assigned value with type that is using inaccessible module '{1}'.",Exported_import_declaration_0_is_assigned_type_that_has_or_is_using_private_type_1:"Exported import declaration '{0}' is assigned type that has or is using private type '{1}'.",Exported_import_declaration_0_is_assigned_type_that_is_using_inaccessible_module_1:"Exported import declaration '{0}' is assigned type that is using inaccessible module '{1}'.",Exported_import_declaration_0_is_assigned_container_that_is_or_is_using_inaccessible_module_1:"Exported import declaration '{0}' is assigned container that is or is using inaccessible module '{1}'.",Type_name_0_in_extends_clause_does_not_reference_constructor_function_for_1:"Type name '{0}' in extends clause does not reference constructor function for '{1}'.",Internal_module_reference_0_in_import_declaration_does_not_reference_module_instance_for_1:"Internal module reference '{0}' in import declaration does not reference module instance for '{1}'.",Module_0_cannot_merge_with_previous_declaration_of_1_in_a_different_file_2:"Module '{0}' cannot merge with previous declaration of '{1}' in a different file '{2}'.",Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3:"Interface '{0}' cannot simultaneously extend types '{1}' and '{2}':{NL}{3}",Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it:"Initializer of parameter '{0}' cannot reference identifier '{1}' declared after it.",Ambient_external_module_declaration_cannot_be_reopened:"Ambient external module declaration cannot be reopened.",All_declarations_of_merged_declaration_0_must_be_exported_or_not_exported:"All declarations of merged declaration '{0}' must be exported or not exported.",super_cannot_be_referenced_in_constructor_arguments:"'super' cannot be referenced in constructor arguments.",Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class:"Return type of constructor signature must be assignable to the instance type of the class.",Ambient_external_module_declaration_must_be_defined_in_global_context:"Ambient external module declaration must be defined in global context.",Ambient_external_module_declaration_cannot_specify_relative_module_name:"Ambient external module declaration cannot specify relative module name.",Import_declaration_in_an_ambient_external_module_declaration_cannot_reference_external_module_through_relative_external_module_name:"Import declaration in an ambient external module declaration cannot reference external module through relative external module name.",Could_not_find_the_best_common_type_of_types_of_all_return_statement_expressions:"Could not find the best common type of types of all return statement expressions.",Import_declaration_cannot_refer_to_external_module_reference_when_noResolve_option_is_set:"Import declaration cannot refer to external module reference when --noResolve option is set.",Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference:"Duplicate identifier '_this'. Compiler uses variable declaration '_this' to capture 'this' reference.",continue_statement_can_only_be_used_within_an_enclosing_iteration_statement:"'continue' statement can only be used within an enclosing iteration statement.",break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:"'break' statement can only be used within an enclosing iteration or switch statement.",Jump_target_not_found:"Jump target not found.",Jump_target_cannot_cross_function_boundary:"Jump target cannot cross function boundary.",Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:"Duplicate identifier '_super'. Compiler uses '_super' to capture base class reference.",Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference:"Expression resolves to variable declaration '_this' that compiler uses to capture 'this' reference.",Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference:"Expression resolves to '_super' that compiler uses to capture base class reference.",TypeParameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_type_1:"TypeParameter '{0}' of constructor signature from exported interface has or is using private type '{1}'.",TypeParameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_type_1:"TypeParameter '{0}' of call signature from exported interface has or is using private type '{1}'.",TypeParameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_type_1:"TypeParameter '{0}' of public static method from exported class has or is using private type '{1}'.",TypeParameter_0_of_public_method_from_exported_class_has_or_is_using_private_type_1:"TypeParameter '{0}' of public method from exported class has or is using private type '{1}'.",TypeParameter_0_of_method_from_exported_interface_has_or_is_using_private_type_1:"TypeParameter '{0}' of method from exported interface has or is using private type '{1}'.",TypeParameter_0_of_exported_function_has_or_is_using_private_type_1:"TypeParameter '{0}' of exported function has or is using private type '{1}'.",TypeParameter_0_of_constructor_signature_from_exported_interface_is_using_inaccessible_module_1:"TypeParameter '{0}' of constructor signature from exported interface is using inaccessible module {1}.",TypeParameter_0_of_call_signature_from_exported_interface_is_using_inaccessible_module_1:"TypeParameter '{0}' of call signature from exported interface is using inaccessible module {1}",TypeParameter_0_of_public_static_method_from_exported_class_is_using_inaccessible_module_1:"TypeParameter '{0}' of public static method from exported class is using inaccessible module {1}.",TypeParameter_0_of_public_method_from_exported_class_is_using_inaccessible_module_1:"TypeParameter '{0}' of public method from exported class is using inaccessible module {1}.",TypeParameter_0_of_method_from_exported_interface_is_using_inaccessible_module_1:"TypeParameter '{0}' of method from exported interface is using inaccessible module {1}.",TypeParameter_0_of_exported_function_is_using_inaccessible_module_1:"TypeParameter '{0}' of exported function is using inaccessible module {1}.",TypeParameter_0_of_exported_class_has_or_is_using_private_type_1:"TypeParameter '{0}' of exported class has or is using private type '{1}'.",TypeParameter_0_of_exported_interface_has_or_is_using_private_type_1:"TypeParameter '{0}' of exported interface has or is using private type '{1}'.",TypeParameter_0_of_exported_class_is_using_inaccessible_module_1:"TypeParameter '{0}' of exported class is using inaccessible module {1}.",TypeParameter_0_of_exported_interface_is_using_inaccessible_module_1:"TypeParameter '{0}' of exported interface is using inaccessible module {1}.",Duplicate_identifier_i_Compiler_uses_i_to_initialize_rest_parameter:"Duplicate identifier '_i'. Compiler uses '_i' to initialize rest parameter.",Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters:"Duplicate identifier 'arguments'. Compiler uses 'arguments' to initialize rest parameters.",Type_of_conditional_0_must_be_identical_to_1_or_2:"Type of conditional '{0}' must be identical to '{1}' or '{2}'.",Type_of_conditional_0_must_be_identical_to_1_2_or_3:"Type of conditional '{0}' must be identical to '{1}', '{2}' or '{3}'.",Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_an_external_module:"Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of an external module.",Constraint_of_a_type_parameter_cannot_reference_any_type_parameter_from_the_same_type_parameter_list:"Constraint of a type parameter cannot reference any type parameter from the same type parameter list.",Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor:"Initializer of instance member variable '{0}' cannot reference identifier '{1}' declared in the constructor.",Parameter_0_cannot_be_referenced_in_its_initializer:"Parameter '{0}' cannot be referenced in its initializer.",Duplicate_string_index_signature:"Duplicate string index signature.",Duplicate_number_index_signature:"Duplicate number index signature.",All_declarations_of_an_interface_must_have_identical_type_parameters:"All declarations of an interface must have identical type parameters.",Expression_resolves_to_variable_declaration_i_that_compiler_uses_to_initialize_rest_parameter:"Expression resolves to variable declaration '_i' that compiler uses to initialize rest parameter.",Type_0_is_missing_property_1_from_type_2:"Type '{0}' is missing property '{1}' from type '{2}'.",Types_of_property_0_of_types_1_and_2_are_incompatible:"Types of property '{0}' of types '{1}' and '{2}' are incompatible.",Types_of_property_0_of_types_1_and_2_are_incompatible_NL_3:"Types of property '{0}' of types '{1}' and '{2}' are incompatible:{NL}{3}",Property_0_defined_as_private_in_type_1_is_defined_as_public_in_type_2:"Property '{0}' defined as private in type '{1}' is defined as public in type '{2}'.",Property_0_defined_as_public_in_type_1_is_defined_as_private_in_type_2:"Property '{0}' defined as public in type '{1}' is defined as private in type '{2}'.",Types_0_and_1_define_property_2_as_private:"Types '{0}' and '{1}' define property '{2}' as private.",Call_signatures_of_types_0_and_1_are_incompatible:"Call signatures of types '{0}' and '{1}' are incompatible.",Call_signatures_of_types_0_and_1_are_incompatible_NL_2:"Call signatures of types '{0}' and '{1}' are incompatible:{NL}{2}",Type_0_requires_a_call_signature_but_type_1_lacks_one:"Type '{0}' requires a call signature, but type '{1}' lacks one.",Construct_signatures_of_types_0_and_1_are_incompatible:"Construct signatures of types '{0}' and '{1}' are incompatible.",Construct_signatures_of_types_0_and_1_are_incompatible_NL_2:"Construct signatures of types '{0}' and '{1}' are incompatible:{NL}{2}",Type_0_requires_a_construct_signature_but_type_1_lacks_one:"Type '{0}' requires a construct signature, but type '{1}' lacks one.",Index_signatures_of_types_0_and_1_are_incompatible:"Index signatures of types '{0}' and '{1}' are incompatible.",Index_signatures_of_types_0_and_1_are_incompatible_NL_2:"Index signatures of types '{0}' and '{1}' are incompatible:{NL}{2}",Call_signature_expects_0_or_fewer_parameters:"Call signature expects {0} or fewer parameters.",Could_not_apply_type_0_to_argument_1_which_is_of_type_2:"Could not apply type '{0}' to argument {1} which is of type '{2}'.",Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function:"Class '{0}' defines instance member accessor '{1}', but extended class '{2}' defines it as instance member function.",Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:"Class '{0}' defines instance member property '{1}', but extended class '{2}' defines it as instance member function.",Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:"Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member accessor.",Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:"Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member property.",Types_of_static_property_0_of_class_1_and_class_2_are_incompatible:"Types of static property '{0}' of class '{1}' and class '{2}' are incompatible.",Types_of_static_property_0_of_class_1_and_class_2_are_incompatible_NL_3:"Types of static property '{0}' of class '{1}' and class '{2}' are incompatible:{NL}{3}",Type_reference_cannot_refer_to_container_0:"Type reference cannot refer to container '{0}'.",Type_reference_must_refer_to_type:"Type reference must refer to type.",In_enums_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_the_first_enum_element:"In enums with multiple declarations only one declaration can omit an initializer for the first enum element.",_0_overload_s:" (+ {0} overload(s))",Variable_declaration_cannot_have_the_same_name_as_an_import_declaration:"Variable declaration cannot have the same name as an import declaration.",Signature_expected_0_type_arguments_got_1_instead:"Signature expected {0} type arguments, got {1} instead.",Property_0_defined_as_optional_in_type_1_but_is_required_in_type_2:"Property '{0}' defined as optional in type '{1}', but is required in type '{2}'.",Types_0_and_1_originating_in_infinitely_expanding_type_reference_do_not_refer_to_same_named_type:"Types '{0}' and '{1}' originating in infinitely expanding type reference do not refer to same named type.",Types_0_and_1_originating_in_infinitely_expanding_type_reference_have_incompatible_type_arguments:"Types '{0}' and '{1}' originating in infinitely expanding type reference have incompatible type arguments.",Types_0_and_1_originating_in_infinitely_expanding_type_reference_have_incompatible_type_arguments_NL_2:"Types '{0}' and '{1}' originating in infinitely expanding type reference have incompatible type arguments:{NL}{2}",Named_properties_0_of_types_1_and_2_are_not_identical:"Named properties '{0}' of types '{1}' and '{2}' are not identical.",Types_of_string_indexer_of_types_0_and_1_are_not_identical:"Types of string indexer of types '{0}' and '{1}' are not identical.",Types_of_number_indexer_of_types_0_and_1_are_not_identical:"Types of number indexer of types '{0}' and '{1}' are not identical.",Type_of_number_indexer_in_type_0_is_not_assignable_to_string_indexer_type_in_type_1_NL_2:"Type of number indexer in type '{0}' is not assignable to string indexer type in type '{1}'.{NL}{2}",Type_of_property_0_in_type_1_is_not_assignable_to_string_indexer_type_in_type_2_NL_3:"Type of property '{0}' in type '{1}' is not assignable to string indexer type in type '{2}'.{NL}{3}",Type_of_property_0_in_type_1_is_not_assignable_to_number_indexer_type_in_type_2_NL_3:"Type of property '{0}' in type '{1}' is not assignable to number indexer type in type '{2}'.{NL}{3}",Static_property_0_defined_as_private_in_type_1_is_defined_as_public_in_type_2:"Static property '{0}' defined as private in type '{1}' is defined as public in type '{2}'.",Static_property_0_defined_as_public_in_type_1_is_defined_as_private_in_type_2:"Static property '{0}' defined as public in type '{1}' is defined as private in type '{2}'.",Types_0_and_1_define_static_property_2_as_private:"Types '{0}' and '{1}' define static property '{2}' as private.",Current_host_does_not_support_0_option:"Current host does not support '{0}' option.",ECMAScript_target_version_0_not_supported_Specify_a_valid_target_version_1_default_or_2:"ECMAScript target version '{0}' not supported.  Specify a valid target version: '{1}' (default), or '{2}'",Module_code_generation_0_not_supported:"Module code generation '{0}' not supported.",Could_not_find_file_0:"Could not find file: '{0}'.",A_file_cannot_have_a_reference_to_itself:"A file cannot have a reference to itself.",Cannot_resolve_referenced_file_0:"Cannot resolve referenced file: '{0}'.",Cannot_find_the_common_subdirectory_path_for_the_input_files:"Cannot find the common subdirectory path for the input files.",Emit_Error_0:"Emit Error: {0}.",Cannot_read_file_0_1:"Cannot read file '{0}': {1}",Unsupported_file_encoding:"Unsupported file encoding.",Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1:"Locale must be of the form <language> or <language>-<territory>. For example '{0}' or '{1}'.",Unsupported_locale_0:"Unsupported locale: '{0}'.",Execution_Failed_NL:"Execution Failed.{NL}",Invalid_call_to_up:"Invalid call to 'up'",Invalid_call_to_down:"Invalid call to 'down'",Base64_value_0_finished_with_a_continuation_bit:"Base64 value '{0}' finished with a continuation bit.",Unknown_option_0:"Unknown option '{0}'",Expected_0_arguments_to_message_got_1_instead:"Expected {0} arguments to message, got {1} instead.",Expected_the_message_0_to_have_1_arguments_but_it_had_2:"Expected the message '{0}' to have {1} arguments, but it had {2}",Could_not_delete_file_0:"Could not delete file '{0}'",Could_not_create_directory_0:"Could not create directory '{0}'",Error_while_executing_file_0:"Error while executing file '{0}': ",Cannot_compile_external_modules_unless_the_module_flag_is_provided:"Cannot compile external modules unless the '--module' flag is provided.",Option_mapRoot_cannot_be_specified_without_specifying_sourcemap_option:"Option mapRoot cannot be specified without specifying sourcemap option.",Option_sourceRoot_cannot_be_specified_without_specifying_sourcemap_option:"Option sourceRoot cannot be specified without specifying sourcemap option.",Options_mapRoot_and_sourceRoot_cannot_be_specified_without_specifying_sourcemap_option:"Options mapRoot and sourceRoot cannot be specified without specifying sourcemap option.",Option_0_specified_without_1:"Option '{0}' specified without '{1}'",codepage_option_not_supported_on_current_platform:"'codepage' option not supported on current platform.",Concatenate_and_emit_output_to_single_file:"Concatenate and emit output to single file.",Generates_corresponding_0_file:"Generates corresponding {0} file.",Specifies_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations:"Specifies the location where debugger should locate map files instead of generated locations.",Specifies_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations:"Specifies the location where debugger should locate TypeScript files instead of source locations.",Watch_input_files:"Watch input files.",Redirect_output_structure_to_the_directory:"Redirect output structure to the directory.",Do_not_emit_comments_to_output:"Do not emit comments to output.",Skip_resolution_and_preprocessing:"Skip resolution and preprocessing.",Specify_ECMAScript_target_version_0_default_or_1:"Specify ECMAScript target version: '{0}' (default), or '{1}'",Specify_module_code_generation_0_or_1:"Specify module code generation: '{0}' or '{1}'",Print_this_message:"Print this message.",Print_the_compiler_s_version_0:"Print the compiler's version: {0}",Allow_use_of_deprecated_0_keyword_when_referencing_an_external_module:"Allow use of deprecated '{0}' keyword when referencing an external module.",Specify_locale_for_errors_and_messages_For_example_0_or_1:"Specify locale for errors and messages. For example '{0}' or '{1}'",Syntax_0:"Syntax:   {0}",options:"options",file1:"file",Examples:"Examples:",Options:"Options:",Insert_command_line_options_and_files_from_a_file:"Insert command line options and files from a file.",Version_0:"Version {0}",Use_the_0_flag_to_see_options:"Use the '{0}' flag to see options.",NL_Recompiling_0:"{NL}Recompiling ({0}):",STRING:"STRING",KIND:"KIND",file2:"FILE",VERSION:"VERSION",LOCATION:"LOCATION",DIRECTORY:"DIRECTORY",NUMBER:"NUMBER",Specify_the_codepage_to_use_when_opening_source_files:"Specify the codepage to use when opening source files.",Additional_locations:"Additional locations:",This_version_of_the_Javascript_runtime_does_not_support_the_0_function:"This version of the Javascript runtime does not support the '{0}' function.",Unknown_rule:"Unknown rule.",Invalid_line_number_0:"Invalid line number ({0})",Warn_on_expressions_and_declarations_with_an_implied_any_type:"Warn on expressions and declarations with an implied 'any' type.",Variable_0_implicitly_has_an_any_type:"Variable '{0}' implicitly has an 'any' type.",Parameter_0_of_1_implicitly_has_an_any_type:"Parameter '{0}' of '{1}' implicitly has an 'any' type.",Parameter_0_of_function_type_implicitly_has_an_any_type:"Parameter '{0}' of function type implicitly has an 'any' type.",Member_0_of_object_type_implicitly_has_an_any_type:"Member '{0}' of object type implicitly has an 'any' type.",new_expression_which_lacks_a_constructor_signature_implicitly_has_an_any_type:"'new' expression, which lacks a constructor signature, implicitly has an 'any' type.",_0_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:"'{0}', which lacks return-type annotation, implicitly has an 'any' return type.",Function_expression_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:"Function expression, which lacks return-type annotation, implicitly has an 'any' return type.",Parameter_0_of_lambda_function_implicitly_has_an_any_type:"Parameter '{0}' of lambda function implicitly has an 'any' type.",Constructor_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:"Constructor signature, which lacks return-type annotation, implicitly has an 'any' return type.",Lambda_Function_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:"Lambda Function, which lacks return-type annotation, implicitly has an 'any' return type.",Array_Literal_implicitly_has_an_any_type_from_widening:"Array Literal implicitly has an 'any' type from widening.",_0_which_lacks_get_accessor_and_parameter_type_annotation_on_set_accessor_implicitly_has_an_any_type:"'{0}', which lacks 'get' accessor and parameter type annotation on 'set' accessor, implicitly has an 'any' type.",Index_signature_of_object_type_implicitly_has_an_any_type:"Index signature of object type implicitly has an 'any' type.",Object_literal_s_property_0_implicitly_has_an_any_type_from_widening:"Object literal's property '{0}' implicitly has an 'any' type from widening."}})(r||(r={}));var r;(function(e){var t=function(){function t(){}return t.isArray=function(e){return Object.prototype.toString.apply(e,[])==="[object Array]"},t.sequenceEquals=function(e,t,n){if(e===t)return!0;if(e===null||t===null)return!1;if(e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(!n(e[r],t[r]))return!1;return!0},t.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},t.groupBy=function(e,t){var n={};for(var r=0,i=e.length;r<i;r++){var s=e[r],o=t(s),u=n[o]||[];u.push(s),n[o]=u}return n},t.distinct=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];for(var o=0;o<n.length;o++)if(t(n[o],s))break;o===n.length&&n.push(s)}return n},t.min=function(e,t){var n=t(e[0]);for(var r=1;r<e.length;r++){var i=t(e[r]);i<n&&(n=i)}return n},t.max=function(e,t){var n=t(e[0]);for(var r=1;r<e.length;r++){var i=t(e[r]);i>n&&(n=i)}return n},t.last=function(t){if(t.length===0)throw e.Errors.argumentOutOfRange("array");return t[t.length-1]},t.lastOrDefault=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(t(r,n))return r}return null},t.firstOrDefault=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n))return i}return null},t.first=function(t,n){for(var r=0,i=t.length;r<i;r++){var s=t[r];if(!n||n(s,r))return s}throw e.Errors.invalidOperation()},t.sum=function(e,t){var n=0;for(var r=0,i=e.length;r<i;r++)n+=t(e[r]);return n},t.select=function(e,t){var n=new Array(e.length);for(var r=0;r<e.length;r++)n[r]=t(e[r]);return n},t.where=function(e,t){var n=new Array;for(var r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},t.any=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return!0;return!1},t.all=function(e,t){for(var n=0,r=e.length;n<r;n++)if(!t(e[n]))return!1;return!0},t.binarySearch=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+(r-n>>1),s=e[i];if(s===t)return i;s>t?r=i-1:n=i+1}return~n},t.createArray=function(e,t){var n=new Array(e);for(var r=0;r<e;r++)n[r]=t;return n},t.grow=function(e,t,n){var r=t-e.length;for(var i=0;i<r;i++)e.push(n)},t.copy=function(e,t,n,r,i){for(var s=0;s<i;s++)n[r+s]=e[t+s]},t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n]))return n;return-1},t}();e.ArrayUtilities=t})(r||(r={}));var r;(function(e){(function(t){function s(e){if(n.length===0)return new i(e);var t=n.pop();return t.isReleased=!1,t.allowUndefinedValues=e,t}var n=[],r;(function(e){e[e.MaxBitsPerEncodedNumber=30]="MaxBitsPerEncodedNumber",e[e.BitsPerEncodedBiStateValue=1]="BitsPerEncodedBiStateValue",e[e.BitsPerEncodedTriStateValue=2]="BitsPerEncodedTriStateValue",e[e.BiStateEncodedTrue=1]="BiStateEncodedTrue",e[e.BiStateClearBitsMask=1]="BiStateClearBitsMask",e[e.TriStateEncodedFalse=1]="TriStateEncodedFalse",e[e.TriStateEncodedTrue=2]="TriStateEncodedTrue",e[e.TriStateClearBitsMask=3]="TriStateClearBitsMask"})(r||(r={}));var i=function(){function t(e){this.allowUndefinedValues=e,this.isReleased=!1,this.bits=[]}return t.prototype.computeTriStateArrayIndex=function(e){var t=15;return e/t>>>0},t.prototype.computeBiStateArrayIndex=function(e){var t=30;return e/t>>>0},t.prototype.computeTriStateEncodedValueIndex=function(e){var t=15;return e%t*2},t.prototype.computeBiStateEncodedValueIndex=function(e){var t=30;return e%t*1},t.prototype.valueAt=function(t){e.Debug.assert(!this.isReleased,"Should not use a released bitvector");if(this.allowUndefinedValues){var n=this.computeTriStateArrayIndex(t),r=this.bits[n];if(r===undefined)return undefined;var i=this.computeTriStateEncodedValueIndex(t);return r&2<<i?!0:r&1<<i?!1:undefined}var n=this.computeBiStateArrayIndex(t),r=this.bits[n];if(r===undefined)return!1;var i=this.computeBiStateEncodedValueIndex(t);return r&1<<i?!0:!1},t.prototype.setValueAt=function(t,n){e.Debug.assert(!this.isReleased,"Should not use a released bitvector");if(this.allowUndefinedValues){e.Debug.assert(n===!0||n===!1||n===undefined,"value must only be true, false or undefined.");var r=this.computeTriStateArrayIndex(t),i=this.bits[r];if(i===undefined){if(n===undefined)return;i=0}var s=this.computeTriStateEncodedValueIndex(t),o=~(3<<s);i&=o,n===!0?i|=2<<s:n===!1&&(i|=1<<s),this.bits[r]=i}else{e.Debug.assert(n===!0||n===!1,"value must only be true or false.");var r=this.computeBiStateArrayIndex(t),i=this.bits[r];if(i===undefined){if(n===!1)return;i=0}var s=this.computeBiStateEncodedValueIndex(t);i&=~(1<<s),n&&(i|=1<<s),this.bits[r]=i}},t.prototype.release=function(){e.Debug.assert(!this.isReleased,"Should not use a released bitvector"),this.isReleased=!0,this.bits.length=0,n.push(this)},t}();t.getBitVector=s})(e.BitVector||(e.BitVector={}));var t=e.BitVector})(r||(r={}));var r;(function(e){(function(t){function i(e){if(n.length===0)return new r(e);var t=n.pop();return t.isReleased=!1,t.allowUndefinedValues=e,t}var n=[],r=function(){function t(e){this.allowUndefinedValues=e,this.isReleased=!1,this.vectors=[]}return t.prototype.valueAt=function(t,n){e.Debug.assert(!this.isReleased,"Should not use a released bitvector");var r=this.vectors[t];return r?r.valueAt(n):this.allowUndefinedValues?undefined:!1},t.prototype.setValueAt=function(t,n,r){e.Debug.assert(!this.isReleased,"Should not use a released bitvector");var i=this.vectors[t];if(!i){if(r===undefined)return;i=e.BitVector.getBitVector(this.allowUndefinedValues),this.vectors[t]=i}i.setValueAt(n,r)},t.prototype.release=function(){e.Debug.assert(!this.isReleased,"Should not use a released bitvector"),this.isReleased=!0;for(var t in this.vectors)if(this.vectors.hasOwnProperty(t)){var r=this.vectors[t];r.release()}this.vectors.length=0,n.push(this)},t}();t.getBitMatrix=i})(e.BitMatrix||(e.BitMatrix={}));var t=e.BitMatrix})(r||(r={}));var r;(function(e){(function(e){e[e.Max31BitInteger=1073741823]="Max31BitInteger",e[e.Min31BitInteger=-1073741824]="Min31BitInteger"})(e.Constants||(e.Constants={}));var t=e.Constants})(r||(r={}));var r;(function(e){(function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Aggressive=2]="Aggressive",e[e.VeryAggressive=3]="VeryAggressive"})(e.AssertionLevel||(e.AssertionLevel={}));var t=e.AssertionLevel,n=function(){function e(){}return e.shouldAssert=function(e){return this.currentAssertionLevel>=e},e.assert=function(e,t,n){typeof t=="undefined"&&(t=""),typeof n=="undefined"&&(n=null);if(!e){var r="";throw n&&(r="\r\nVerbose Debug Information:"+n()),new Error("Debug Failure. False expression: "+t+r)}},e.fail=function(t){e.assert(!1,t)},e.currentAssertionLevel=0,e}();e.Debug=n})(r||(r={}));var i=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},r;(function(e){function r(){return e.Environment?e.Environment.newLine:"\r\n"}function s(e){var t=-1,n=/\{(\d+)\}/g,r;while(r=n.exec(e)){var i=parseInt(r[1]);!isNaN(i)&&i>t&&(t=i)}return t}function o(t){var n=e.diagnosticInformationMap[t];return e.Debug.assert(n),n}function u(t,n){e.LocalizedDiagnosticMessages;var r=e.LocalizedDiagnosticMessages?e.LocalizedDiagnosticMessages[t]:t;e.Debug.assert(r!==undefined&&r!==null);var i=n?n.length:0,o=1+s(t);if(o!==i)throw new Error(u(e.DiagnosticCode.Expected_0_arguments_to_message_got_1_instead,[o,i]));var a=1+s(r);if(a!==o)throw new Error(u(e.DiagnosticCode.Expected_the_message_0_to_have_1_arguments_but_it_had_2,[r,o,a]));return r=r.replace(/{(\d+)}/g,function(e,t){return typeof n[t]!="undefined"?n[t]:e}),r=r.replace(/{(NL)}/g,function(t){return e.newLine()}),r}function a(t,n){var r=o(t),i=u(t,n),s;return r.category===1?s=u(e.DiagnosticCode.error_TS_0_1,[r.code,i]):r.category===0?s=u(e.DiagnosticCode.warning_TS_0_1,[r.code,i]):s=i,s}e.LocalizedDiagnosticMessages=null;var t=function(){function e(e,t,n,r){this._fileName=e,this._lineMap=t,this._start=n,this._length=r}return e.prototype.fileName=function(){return this._fileName},e.prototype.lineMap=function(){return this._lineMap},e.prototype.line=function(){return this._lineMap?this._lineMap.getLineNumberFromPosition(this.start()):0},e.prototype.character=function(){return this._lineMap?this._lineMap.getLineAndCharacterFromPosition(this.start()).character():0},e.prototype.start=function(){return this._start},e.prototype.length=function(){return this._length},e.equals=function(e,t){return e._fileName===t._fileName&&e._start===t._start&&e._length===t._length},e}();e.Location=t;var n=function(n){function r(e,t,r,i,s,o,u){typeof o=="undefined"&&(o=null),typeof u=="undefined"&&(u=null),n.call(this,e,t,r,i),this._diagnosticKey=s,this._arguments=o&&o.length>0?o:null,this._additionalLocations=u&&u.length>0?u:null}return i(r,n),r.prototype.toJSON=function(e){var t={};t.start=this.start(),t.length=this.length(),t.diagnosticCode=this._diagnosticKey;var n=this.arguments();return n&&n.length>0&&(t.arguments=n),t},r.prototype.diagnosticKey=function(){return this._diagnosticKey},r.prototype.arguments=function(){return this._arguments},r.prototype.text=function(){return e.getLocalizedText(this._diagnosticKey,this._arguments)},r.prototype.message=function(){return e.getDiagnosticMessage(this._diagnosticKey,this._arguments)},r.prototype.additionalLocations=function(){return this._additionalLocations||[]},r.equals=function(n,r){return t.equals(n,r)&&n._diagnosticKey===r._diagnosticKey&&e.ArrayUtilities.sequenceEquals(n._arguments,r._arguments,function(e,t){return e===t})},r.prototype.info=function(){return o(this.diagnosticKey())},r}(t);e.Diagnostic=n,e.newLine=r,e.getLocalizedText=u,e.getDiagnosticMessage=a})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.argument=function(e,t){return new Error("Invalid argument: "+e+". "+t)},e.argumentOutOfRange=function(e){return new Error("Argument out of range: "+e)},e.argumentNull=function(e){return new Error("Argument null: "+e)},e.abstract=function(){return new Error("Operation not implemented properly by subclass.")},e.notYetImplemented=function(){return new Error("Not yet implemented.")},e.invalidOperation=function(e){return new Error("Invalid operation: "+e)},e}();e.Errors=t})(r||(r={}));var r;(function(e){var t=function(){function t(){}return t.computeFnv1aCharArrayHashCode=function(n,r,i){var s=t.FNV_BASE,o=r+i;for(var u=r;u<o;u++)s=e.IntegerUtilities.integerMultiplyLow32Bits(s^n[u],t.FNV_PRIME);return s},t.computeSimple31BitCharArrayHashCode=function(e,t,n){var r=0;for(var i=0;i<n;i++){var s=e[t+i];r=((r<<5)-r|0)+s|0}return r&2147483647},t.computeSimple31BitStringHashCode=function(e){var t=0,n=0,r=e.length;for(var i=0;i<r;i++){var s=e.charCodeAt(n+i);t=((t<<5)-t|0)+s|0}return t&2147483647},t.computeMurmur2StringHashCode=function(t,n){var r=1540483477,i=24,s=t.length,o=Math.abs(n^s),u=0;while(s>=2){var a=t.charCodeAt(u),f=t.charCodeAt(u+1),l=Math.abs(a|f<<16);l=e.IntegerUtilities.integerMultiplyLow32Bits(l,r),l^=l>>i,l=e.IntegerUtilities.integerMultiplyLow32Bits(l,r),o=e.IntegerUtilities.integerMultiplyLow32Bits(o,r),o^=l,u+=2,s-=2}return s===1&&(o^=t.charCodeAt(u),o=e.IntegerUtilities.integerMultiplyLow32Bits(o,r)),o^=o>>13,o=e.IntegerUtilities.integerMultiplyLow32Bits(o,r),o^=o>>15,o},t.getPrime=function(n){for(var r=0;r<t.primes.length;r++){var i=t.primes[r];if(i>=n)return i}throw e.Errors.notYetImplemented()},t.expandPrime=function(e){var n=e<<1;return n>2146435069&&2146435069>e?2146435069:t.getPrime(n)},t.combine=function(e,t){return(t<<5)+t+e&2147483647},t.FNV_BASE=2166136261,t.FNV_PRIME=16777619,t.primes=[3,7,11,17,23,29,37,47,59,71,89,107,131,163,197,239,293,353,431,521,631,761,919,1103,1327,1597,1931,2333,2801,3371,4049,4861,5839,7013,8419,10103,12143,14591,17519,21023,25229,30293,36353,43627,52361,62851,75431,90523,108631,130363,156437,187751,225307,270371,324449,389357,467237,560689,672827,807403,968897,1162687,1395263,1674319,2009191,2411033,2893249,3471899,4166287,4999559,5999471,7199369],t}();e.Hash=t})(r||(r={}));var r;(function(e){(function(t){function i(e,n){return typeof e=="undefined"&&(e=t.DefaultHashTableCapacity),typeof n=="undefined"&&(n=null),new r(e,n)}function o(e){return e.__hash===undefined&&(e.__hash=s,s++),e.__hash}t.DefaultHashTableCapacity=1024;var n=function(){function e(e,t,n,r){this.Key=e,this.Value=t,this.HashCode=n,this.Next=r}return e}(),r=function(){function t(t,n){this.hash=n,this.count=0;var r=e.Hash.getPrime(t);this.entries=e.ArrayUtilities.createArray(r,null)}return t.prototype.set=function(e,t){this.addOrSet(e,t,!1)},t.prototype.add=function(e,t){this.addOrSet(e,t,!0)},t.prototype.containsKey=function(e){var t=this.computeHashCode(e),n=this.findEntry(e,t);return n!==null},t.prototype.get=function(e){var t=this.computeHashCode(e),n=this.findEntry(e,t);return n===null?null:n.Value},t.prototype.computeHashCode=function(t){var n=this.hash===null?t.hashCode:this.hash(t);return n&=2147483647,e.Debug.assert(n>=0),n},t.prototype.addOrSet=function(t,n,r){var i=this.computeHashCode(t),s=this.findEntry(t,i);if(s!==null){if(r)throw e.Errors.argument("key","Key was already in table.");s.Key=t,s.Value=n;return}return this.addEntry(t,n,i)},t.prototype.findEntry=function(e,t){for(var n=this.entries[t%this.entries.length];n!==null;n=n.Next)if(n.HashCode===t&&e===n.Key)return n;return null},t.prototype.addEntry=function(e,t,r){var i=r%this.entries.length,s=new n(e,t,r,this.entries[i]);return this.entries[i]=s,this.count>=this.entries.length/2&&this.grow(),this.count++,s.Key},t.prototype.grow=function(){var t=e.Hash.expandPrime(this.entries.length),n=this.entries,r=e.ArrayUtilities.createArray(t,null);this.entries=r;for(var i=0;i<n.length;i++){var s=n[i];while(s!==null){var o=s.HashCode%t,u=s.Next;s.Next=r[o],r[o]=s,s=u}}},t}();t.HashTable=r,t.createHashTable=i;var s=1;t.identityHashCode=o})(e.Collections||(e.Collections={}));var t=e.Collections})(r||(r={}));var r;(function(t){t.nodeMakeDirectoryTime=0,t.nodeCreateBufferTime=0,t.nodeWriteFileSyncTime=0,function(e){e[e.None=0]="None",e[e.Utf8=1]="Utf8",e[e.Utf16BigEndian=2]="Utf16BigEndian",e[e.Utf16LittleEndian=3]="Utf16LittleEndian"}(t.ByteOrderMark||(t.ByteOrderMark={}));var r=t.ByteOrderMark,i=function(){function e(e,t){this.contents=e,this.byteOrderMark=t}return e}();t.FileInformation=i,t.Environment=function(){function r(){function s(){return r.length>0?r.pop():new ActiveXObject("ADODB.Stream")}function o(e){r.push(e)}try{var e=new ActiveXObject("Scripting.FileSystemObject")}catch(n){return null}var r=[],u=[];for(var a=0;a<WScript.Arguments.length;a++)u[a]=WScript.Arguments.Item(a);return{newLine:"\r\n",currentDirectory:function(){return WScript.CreateObject("WScript.Shell").CurrentDirectory},supportsCodePage:function(){return WScript.ReadFile},readFile:function(e,n){try{if(n!==null&&this.supportsCodePage())try{var r=WScript.ReadFile(e,n);return new i(r,0)}catch(u){}var a=s();a.Open(),a.Type=2,a.Charset="x-ansi",a.LoadFromFile(e);var f=a.ReadText(2);a.Position=0;var l=0;f.charCodeAt(0)===254&&f.charCodeAt(1)===255?(a.Charset="unicode",l=2):f.charCodeAt(0)===255&&f.charCodeAt(1)===254?(a.Charset="unicode",l=3):f.charCodeAt(0)===239&&f.charCodeAt(1)===187?(a.Charset="utf-8",l=1):a.Charset="utf-8";var r=a.ReadText(-1);return a.Close(),o(a),new i(r,l)}catch(c){var h;throw c.number===-2147024809?h=t.getDiagnosticMessage(t.DiagnosticCode.Unsupported_file_encoding,null):h=t.getDiagnosticMessage(t.DiagnosticCode.Cannot_read_file_0_1,[e,c.message]),new Error(h)}},writeFile:function(e,t,n){var r=s();r.Charset="utf-8",r.Open(),r.WriteText(t,0),n?r.Position=0:r.Position=3;var i=s();i.Type=1,i.Open(),r.CopyTo(i),i.Flush(),i.SaveToFile(e,2),i.Close(),r.Flush(),r.Close()},fileExists:function(t){return e.FileExists(t)},deleteFile:function(t){e.FileExists(t)&&e.DeleteFile(t,!0)},directoryExists:function(t){return e.FolderExists(t)},listFiles:function(t,n,r){function i(e,t){var s=[],o;if(r.recursive){o=new Enumerator(e.subfolders);for(;!o.atEnd();o.moveNext())s=s.concat(i(o.item(),t+"\\"+o.item().Name))}o=new Enumerator(e.files);for(;!o.atEnd();o.moveNext())(!n||o.item().Name.match(n))&&s.push(t+"\\"+o.item().Name);return s}r=r||{};var s=e.GetFolder(t),o=[];return i(s,t)},arguments:u,standardOut:WScript.StdOut}}function s(){var n=e("fs"),r=e("path"),s=e("module"),o=e("os");return{newLine:o.EOL,currentDirectory:function(){return process.cwd()},supportsCodePage:function(){return!1},readFile:function(e,r){if(r!==null)throw new Error(t.getDiagnosticMessage(t.DiagnosticCode.codepage_option_not_supported_on_current_platform,null));var s=n.readFileSync(e);switch(s[0]){case 254:if(s[1]===255){var o=0;while(o+1<s.length){var u=s[o];s[o]=s[o+1],s[o+1]=u,o+=2}return new i(s.toString("ucs2",2),2)}break;case 255:if(s[1]===254)return new i(s.toString("ucs2",2),3);break;case 239:if(s[1]===187)return new i(s.toString("utf8",3),1)}return new i(s.toString("utf8",0),0)},writeFile:function(e,i,s){function o(e){var t=n.statSync(e);if(t.isFile())throw'"'+e+"\" exists but isn't a directory.";if(t.isDirectory())return;o(r.dirname(e)),n.mkdirSync(e,509)}var u=(new Date).getTime();o(r.dirname(e)),t.nodeMakeDirectoryTime+=(new Date).getTime()-u,s&&(i="\ufeff"+i);var u=(new Date).getTime(),a=4096,f=n.openSync(e,"w");try{for(var l=0;l<i.length;l+=a){var c=(new Date).getTime(),h=new Buffer(i.substr(l,a),"utf8");t.nodeCreateBufferTime+=(new Date).getTime()-c,n.writeSync(f,h,0,h.length,null)}}finally{n.closeSync(f)}t.nodeWriteFileSyncTime+=(new Date).getTime()-u},fileExists:function(e){return n.existsSync(e)},deleteFile:function(e){try{n.unlinkSync(e)}catch(t){}},directoryExists:function(e){return n.existsSync(e)&&n.statSync(e).isDirectory()},listFiles:function(t,r,i){function s(e){var t=[],o=n.readdirSync(e);for(var u=0;u<o.length;u++){var a=n.statSync(e+"\\"+o[u]);i.recursive&&a.isDirectory()?t=t.concat(s(e+"\\"+o[u])):a.isFile()&&(!r||o[u].match(r))&&t.push(e+"\\"+o[u])}return t}return i=i||{},s(t)},arguments:process.argv.slice(2),standardOut:{Write:function(e){process.stdout.write(e)},WriteLine:function(e){process.stdout.write(e+"\n")},Close:function(){}}}}function o(){var e={supportsCodePage:function(){return!1},readFile:function(e,t){return new i("",0)},writeFile:function(e,t,n){},deleteFile:function(e){},fileExists:function(e){return!1},directoryExists:function(e){return!1},listFiles:function(t,n,r){var i=[];return i},arguments:[],standardOut:{Write:function(e){console.log(e)},WriteLine:function(e){console.log(e+"\n")},Close:function(){}},currentDirectory:function(){return""},newLine:"\n"};return e}if(typeof WScript!="undefined"&&typeof ActiveXObject=="function")return r();if(typeof n=="undefined"||!n.exports)return o();try{return s()}catch(u){return o()}}()})(r||(r={}));var r;(function(e){(function(e){function t(e,t){return e/t>>0}function n(e,t){var n=e&65535,r=e>>>16,i=t&65535,s=t>>>16,o=((e&4294901760)*t>>>0)+((e&65535)*t>>>0)>>>0;return o}function r(e,t){var n=e&65535,r=e>>>16,i=t&65535,s=t>>>16,o=r*s+((n*i>>>17)+n*s>>>15);return o}function i(e){return/^[0-9]+$/.test(e)}function s(e){return/^0(x|X)[0-9a-fA-F]+$/.test(e)}e.integerDivide=t,e.integerMultiplyLow32Bits=n,e.integerMultiplyHigh32Bits=r,e.isInteger=i,e.isHexInteger=s})(e.IntegerUtilities||(e.IntegerUtilities={}));var t=e.IntegerUtilities})(r||(r={}));var r;(function(e){var t=function(){function t(e,t){this._computeLineStarts=e,this.length=t,this._lineStarts=null}return t.prototype.toJSON=function(e){return{lineStarts:this.lineStarts(),length:this.length}},t.prototype.equals=function(t){return this.length===t.length&&e.ArrayUtilities.sequenceEquals(this.lineStarts(),t.lineStarts(),function(e,t){return e===t})},t.prototype.lineStarts=function(){return this._lineStarts===null&&(this._lineStarts=this._computeLineStarts()),this._lineStarts},t.prototype.lineCount=function(){return this.lineStarts().length},t.prototype.getPosition=function(e,t){return this.lineStarts()[e]+t},t.prototype.getLineNumberFromPosition=function(t){if(t<0||t>this.length)throw e.Errors.argumentOutOfRange("position");if(t===this.length)return this.lineCount()-1;var n=e.ArrayUtilities.binarySearch(this.lineStarts(),t);return n<0&&(n=~n-1),n},t.prototype.getLineStartPosition=function(e){return this.lineStarts()[e]},t.prototype.fillLineAndCharacterFromPosition=function(t,n){if(t<0||t>this.length)throw e.Errors.argumentOutOfRange("position");var r=this.getLineNumberFromPosition(t);n.line=r,n.character=t-this.lineStarts()[r]},t.prototype.getLineAndCharacterFromPosition=function(t){if(t<0||t>this.length)throw e.Errors.argumentOutOfRange("position");var n=this.getLineNumberFromPosition(t);return new e.LineAndCharacter(n,t-this.lineStarts()[n])},t.empty=new t(function(){return[0]},0),t}();e.LineMap=t})(r||(r={}));var r;(function(e){var t=function(){function t(t,n){this._line=0,this._character=0;if(t<0)throw e.Errors.argumentOutOfRange("line");if(n<0)throw e.Errors.argumentOutOfRange("character");this._line=t,this._character=n}return t.prototype.line=function(){return this._line},t.prototype.character=function(){return this._character},t}();e.LineAndCharacter=t})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.max=function(e,t){return e>=t?e:t},e.min=function(e,t){return e<=t?e:t},e}();e.MathPrototype=t})(r||(r={}));var r;(function(e){(function(t){t.DefaultStringTableCapacity=256;var n=function(){function e(e,t,n){this.Text=e,this.HashCode=t,this.Next=n}return e}(),r=function(){function t(t){this.count=0;var n=e.Hash.getPrime(t);this.entries=e.ArrayUtilities.createArray(n,null)}return t.prototype.addCharArray=function(t,n,r){var i=e.Hash.computeSimple31BitCharArrayHashCode(t,n,r)&2147483647,s=this.findCharArrayEntry(t,n,r,i);if(s!==null)return s.Text;var o=t.slice(n,n+r);return this.addEntry(e.StringUtilities.fromCharCodeArray(o),i)},t.prototype.findCharArrayEntry=function(e,n,r,i){for(var s=this.entries[i%this.entries.length];s!==null;s=s.Next)if(s.HashCode===i&&t.textCharArrayEquals(s.Text,e,n,r))return s;return null},t.prototype.addEntry=function(e,t){var r=t%this.entries.length,i=new n(e,t,this.entries[r]);return this.entries[r]=i,this.count===this.entries.length&&this.grow(),this.count++,i.Text},t.prototype.grow=function(){var t=e.Hash.expandPrime(this.entries.length),n=this.entries,r=e.ArrayUtilities.createArray(t,null);this.entries=r;for(var i=0;i<n.length;i++){var s=n[i];while(s!==null){var o=s.HashCode%t,u=s.Next;s.Next=r[o],r[o]=s,s=u}}},t.textCharArrayEquals=function(e,t,n,r){if(e.length!==r)return!1;var i=n;for(var s=0;s<r;s++){if(e.charCodeAt(s)!==t[i])return!1;i++}return!0},t}();t.StringTable=r,t.DefaultStringTable=new r(t.DefaultStringTableCapacity)})(e.Collections||(e.Collections={}));var t=e.Collections})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.isString=function(e){return Object.prototype.toString.apply(e,[])==="[object String]"},e.fromCharCodeArray=function(e){return String.fromCharCode.apply(null,e)},e.endsWith=function(e,t){return e.substring(e.length-t.length,e.length)===t},e.startsWith=function(e,t){return e.substr(0,t.length)===t},e.copyTo=function(e,t,n,r,i){for(var s=0;s<i;s++)n[r+s]=e.charCodeAt(t+s)},e.repeat=function(e,t){return Array(t+1).join(e)},e.stringEquals=function(e,t){return e===t},e}();e.StringUtilities=t})(r||(r={}));var s=Function("return this").call(null),r;(function(e){var t;(function(e){e.now,e.resolution,typeof WScript!="undefined"&&typeof s.WScript.InitializeProjection!="undefined"?(s.WScript.InitializeProjection(),e.now=function(){return TestUtilities.QueryPerformanceCounter()},e.resolution=TestUtilities.QueryPerformanceFrequency()):(e.now=function(){return Date.now()},e.resolution=1e3)})(t||(t={}));var n=function(){function e(){this.time=0}return e.prototype.start=function(){this.time=0,this.startTime=t.now()},e.prototype.end=function(){this.time=t.now()-this.startTime},e}();e.Timer=n})(r||(r={}));var r;(function(e){(function(e){e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Message=2]="Message",e[e.NoPrefix=3]="NoPrefix"})(e.DiagnosticCategory||(e.DiagnosticCategory={}));var t=e.DiagnosticCategory})(r||(r={}));var r;(function(e){e.diagnosticInformationMap={"error TS{0}: {1}":{code:0,category:3},"warning TS{0}: {1}":{code:1,category:3},"Unrecognized escape sequence.":{code:1e3,category:1},"Unexpected character {0}.":{code:1001,category:1},"Missing close quote character.":{code:1002,category:1},"Identifier expected.":{code:1003,category:1},"'{0}' keyword expected.":{code:1004,category:1},"'{0}' expected.":{code:1005,category:1},"Identifier expected; '{0}' is a keyword.":{code:1006,category:1},"Automatic semicolon insertion not allowed.":{code:1007,category:1},"Unexpected token; '{0}' expected.":{code:1008,category:1},"Trailing separator not allowed.":{code:1009,category:1},"'*/' expected.":{code:1010,category:1},"'public' or 'private' modifier must precede 'static'.":{code:1011,category:1},"Unexpected token.":{code:1012,category:1},"Catch clause parameter cannot have a type annotation.":{code:1013,category:1},"Rest parameter must be last in list.":{code:1014,category:1},"Parameter cannot have question mark and initializer.":{code:1015,category:1},"Required parameter cannot follow optional parameter.":{code:1016,category:1},"Index signatures cannot have rest parameters.":{code:1017,category:1},"Index signature parameter cannot have accessibility modifiers.":{code:1018,category:1},"Index signature parameter cannot have a question mark.":{code:1019,category:1},"Index signature parameter cannot have an initializer.":{code:1020,category:1},"Index signature must have a type annotation.":{code:1021,category:1},"Index signature parameter must have a type annotation.":{code:1022,category:1},"Index signature parameter type must be 'string' or 'number'.":{code:1023,category:1},"'extends' clause already seen.":{code:1024,category:1},"'extends' clause must precede 'implements' clause.":{code:1025,category:1},"Classes can only extend a single class.":{code:1026,category:1},"'implements' clause already seen.":{code:1027,category:1},"Accessibility modifier already seen.":{code:1028,category:1},"'{0}' modifier must precede '{1}' modifier.":{code:1029,category:1},"'{0}' modifier already seen.":{code:1030,category:1},"'{0}' modifier cannot appear on a class element.":{code:1031,category:1},"Interface declaration cannot have 'implements' clause.":{code:1032,category:1},"'super' invocation cannot have type arguments.":{code:1034,category:1},"Only ambient modules can use quoted names.":{code:1035,category:1},"Statements are not allowed in ambient contexts.":{code:1036,category:1},"Implementations are not allowed in ambient contexts.":{code:1037,category:1},"'declare' modifier not allowed for code already in an ambient context.":{code:1038,category:1},"Initializers are not allowed in ambient contexts.":{code:1039,category:1},"Parameter property declarations can only be used in a non-ambient constructor declaration.":{code:1040,category:1},"Function implementation expected.":{code:1041,category:1},"Constructor implementation expected.":{code:1042,category:1},"Function overload name must be '{0}'.":{code:1043,category:1},"'{0}' modifier cannot appear on a module element.":{code:1044,category:1},"'declare' modifier cannot appear on an interface declaration.":{code:1045,category:1},"'declare' modifier required for top level element.":{code:1046,category:1},"Rest parameter cannot be optional.":{code:1047,category:1},"Rest parameter cannot have an initializer.":{code:1048,category:1},"'set' accessor must have one and only one parameter.":{code:1049,category:1},"'set' accessor parameter cannot be optional.":{code:1051,category:1},"'set' accessor parameter cannot have an initializer.":{code:1052,category:1},"'set' accessor cannot have rest parameter.":{code:1053,category:1},"'get' accessor cannot have parameters.":{code:1054,category:1},"Modifiers cannot appear here.":{code:1055,category:1},"Accessors are only available when targeting ECMAScript 5 and higher.":{code:1056,category:1},"Class name cannot be '{0}'.":{code:1057,category:1},"Interface name cannot be '{0}'.":{code:1058,category:1},"Enum name cannot be '{0}'.":{code:1059,category:1},"Module name cannot be '{0}'.":{code:1060,category:1},"Enum member must have initializer.":{code:1061,category:1},"Export assignment cannot be used in internal modules.":{code:1063,category:1},"Export assignment not allowed in module with exported element.":{code:1064,category:1},"Module cannot have multiple export assignments.":{code:1065,category:1},"Ambient enum elements can only have integer literal initializers.":{code:1066,category:1},"module, class, interface, enum, import or statement":{code:1067,category:3},"constructor, function, accessor or variable":{code:1068,category:3},statement:{code:1069,category:3},"case or default clause":{code:1070,category:3},identifier:{code:1071,category:3},"call, construct, index, property or function signature":{code:1072,category:3},expression:{code:1073,category:3},"type name":{code:1074,category:3},"property or accessor":{code:1075,category:3},parameter:{code:1076,category:3},type:{code:1077,category:3},"type parameter":{code:1078,category:3},"'declare' modifier not allowed on import declaration.":{code:1079,category:1},"Function overload must be static.":{code:1080,category:1},"Function overload must not be static.":{code:1081,category:1},"Parameter property declarations cannot be used in a constructor overload.":{code:1083,category:1},"Invalid 'reference' directive syntax.":{code:1084,category:1},"Octal literals are not available when targeting ECMAScript 5 and higher.":{code:1085,category:1},"Accessors are not allowed in ambient contexts.":{code:1086,category:1},"'{0}' modifier cannot appear on a constructor declaration.":{code:1089,category:1},"'{0}' modifier cannot appear on a parameter.":{code:1090,category:1},"Only a single variable declaration is allowed in a 'for...in' statement.":{code:1091,category:1},"Type parameters cannot appear on a constructor declaration.":{code:1091,category:1},"Type annotation cannot appear on a constructor declaration.":{code:1092,category:1},"Duplicate identifier '{0}'.":{code:2e3,category:1},"The name '{0}' does not exist in the current scope.":{code:2001,category:1},"The name '{0}' does not refer to a value.":{code:2002,category:1},"'super' can only be used inside a class instance method.":{code:2003,category:1},"The left-hand side of an assignment expression must be a variable, property or indexer.":{code:2004,category:1},"Value of type '{0}' is not callable. Did you mean to include 'new'?":{code:2161,category:1},"Value of type '{0}' is not callable.":{code:2006,category:1},"Value of type '{0}' is not newable.":{code:2007,category:1},"Value of type '{0}' is not indexable by type '{1}'.":{code:2008,category:1},"Operator '{0}' cannot be applied to types '{1}' and '{2}'.":{code:2009,category:1},"Operator '{0}' cannot be applied to types '{1}' and '{2}': {3}":{code:2010,category:1},"Cannot convert '{0}' to '{1}'.":{code:2011,category:1},"Cannot convert '{0}' to '{1}':{NL}{2}":{code:2012,category:1},"Expected var, class, interface, or module.":{code:2013,category:1},"Operator '{0}' cannot be applied to type '{1}'.":{code:2014,category:1},"Getter '{0}' already declared.":{code:2015,category:1},"Setter '{0}' already declared.":{code:2016,category:1},"Exported class '{0}' extends private class '{1}'.":{code:2018,category:1},"Exported class '{0}' implements private interface '{1}'.":{code:2019,category:1},"Exported interface '{0}' extends private interface '{1}'.":{code:2020,category:1},"Exported class '{0}' extends class from inaccessible module {1}.":{code:2021,category:1},"Exported class '{0}' implements interface from inaccessible module {1}.":{code:2022,category:1},"Exported interface '{0}' extends interface from inaccessible module {1}.":{code:2023,category:1},"Public static property '{0}' of exported class has or is using private type '{1}'.":{code:2024,category:1},"Public property '{0}' of exported class has or is using private type '{1}'.":{code:2025,category:1},"Property '{0}' of exported interface has or is using private type '{1}'.":{code:2026,category:1},"Exported variable '{0}' has or is using private type '{1}'.":{code:2027,category:1},"Public static property '{0}' of exported class is using inaccessible module {1}.":{code:2028,category:1},"Public property '{0}' of exported class is using inaccessible module {1}.":{code:2029,category:1},"Property '{0}' of exported interface is using inaccessible module {1}.":{code:2030,category:1},"Exported variable '{0}' is using inaccessible module {1}.":{code:2031,category:1},"Parameter '{0}' of constructor from exported class has or is using private type '{1}'.":{code:2032,category:1},"Parameter '{0}' of public static property setter from exported class has or is using private type '{1}'.":{code:2033,category:1},"Parameter '{0}' of public property setter from exported class has or is using private type '{1}'.":{code:2034,category:1},"Parameter '{0}' of constructor signature from exported interface has or is using private type '{1}'.":{code:2035,category:1},"Parameter '{0}' of call signature from exported interface has or is using private type '{1}'.":{code:2036,category:1},"Parameter '{0}' of public static method from exported class has or is using private type '{1}'.":{code:2037,category:1},"Parameter '{0}' of public method from exported class has or is using private type '{1}'.":{code:2038,category:1},"Parameter '{0}' of method from exported interface has or is using private type '{1}'.":{code:2039,category:1},"Parameter '{0}' of exported function has or is using private type '{1}'.":{code:2040,category:1},"Parameter '{0}' of constructor from exported class is using inaccessible module {1}.":{code:2041,category:1},"Parameter '{0}' of public static property setter from exported class is using inaccessible module {1}.":{code:2042,category:1},"Parameter '{0}' of public property setter from exported class is using inaccessible module {1}.":{code:2043,category:1},"Parameter '{0}' of constructor signature from exported interface is using inaccessible module {1}.":{code:2044,category:1},"Parameter '{0}' of call signature from exported interface is using inaccessible module {1}":{code:2045,category:1},"Parameter '{0}' of public static method from exported class is using inaccessible module {1}.":{code:2046,category:1},"Parameter '{0}' of public method from exported class is using inaccessible module {1}.":{code:2047,category:1},"Parameter '{0}' of method from exported interface is using inaccessible module {1}.":{code:2048,category:1},"Parameter '{0}' of exported function is using inaccessible module {1}.":{code:2049,category:1},"Return type of public static property getter from exported class has or is using private type '{0}'.":{code:2050,category:1},"Return type of public property getter from exported class has or is using private type '{0}'.":{code:2051,category:1},"Return type of constructor signature from exported interface has or is using private type '{0}'.":{code:2052,category:1},"Return type of call signature from exported interface has or is using private type '{0}'.":{code:2053,category:1},"Return type of index signature from exported interface has or is using private type '{0}'.":{code:2054,category:1},"Return type of public static method from exported class has or is using private type '{0}'.":{code:2055,category:1},"Return type of public method from exported class has or is using private type '{0}'.":{code:2056,category:1},"Return type of method from exported interface has or is using private type '{0}'.":{code:2057,category:1},"Return type of exported function has or is using private type '{0}'.":{code:2058,category:1},"Return type of public static property getter from exported class is using inaccessible module {0}.":{code:2059,category:1},"Return type of public property getter from exported class is using inaccessible module {0}.":{code:2060,category:1},"Return type of constructor signature from exported interface is using inaccessible module {0}.":{code:2061,category:1},"Return type of call signature from exported interface is using inaccessible module {0}.":{code:2062,category:1},"Return type of index signature from exported interface is using inaccessible module {0}.":{code:2063,category:1},"Return type of public static method from exported class is using inaccessible module {0}.":{code:2064,category:1},"Return type of public method from exported class is using inaccessible module {0}.":{code:2065,category:1},"Return type of method from exported interface is using inaccessible module {0}.":{code:2066,category:1},"Return type of exported function is using inaccessible module {0}.":{code:2067,category:1},"'new T[]' cannot be used to create an array. Use 'new Array<T>()' instead.":{code:2068,category:1},"A parameter list must follow a generic type argument list. '(' expected.":{code:2069,category:1},"Multiple constructor implementations are not allowed.":{code:2070,category:1},"Unable to resolve external module '{0}'.":{code:2071,category:1},"Module cannot be aliased to a non-module type.":{code:2072,category:1},"A class may only extend another class.":{code:2073,category:1},"A class may only implement another class or interface.":{code:2074,category:1},"An interface may only extend another class or interface.":{code:2075,category:1},"Unable to resolve type.":{code:2077,category:1},"Unable to resolve type of '{0}'.":{code:2078,category:1},"Unable to resolve type parameter constraint.":{code:2079,category:1},"Type parameter constraint cannot be a primitive type.":{code:2080,category:1},"Supplied parameters do not match any signature of call target.":{code:2081,category:1},"Supplied parameters do not match any signature of call target:{NL}{0}":{code:2082,category:1},"Invalid 'new' expression.":{code:2083,category:1},"Call signatures used in a 'new' expression must have a 'void' return type.":{code:2084,category:1},"Could not select overload for 'new' expression.":{code:2085,category:1},"Type '{0}' does not satisfy the constraint '{1}' for type parameter '{2}'.":{code:2086,category:1},"Could not select overload for 'call' expression.":{code:2087,category:1},"Cannot invoke an expression whose type lacks a call signature.":{code:2088,category:1},"Calls to 'super' are only valid inside a class.":{code:2089,category:1},"Generic type '{0}' requires {1} type argument(s).":{code:2090,category:1},"Type of array literal cannot be determined. Best common type could not be found for array elements.":{code:2092,category:1},"Could not find enclosing symbol for dotted name '{0}'.":{code:2093,category:1},"The property '{0}' does not exist on value of type '{1}'.":{code:2094,category:1},"Could not find symbol '{0}'.":{code:2095,category:1},"'get' and 'set' accessor must have the same type.":{code:2096,category:1},"'this' cannot be referenced in current location.":{code:2097,category:1},"Static members cannot reference class type parameters.":{code:2099,category:1},"Class '{0}' is recursively referenced as a base type of itself.":{code:2100,category:1},"Interface '{0}' is recursively referenced as a base type of itself.":{code:2101,category:1},"'super' property access is permitted only in a constructor, member function, or member accessor of a derived class.":{code:2102,category:1},"'super' cannot be referenced in non-derived classes.":{code:2103,category:1},"A 'super' call must be the first statement in the constructor when a class contains initialized properties or has parameter properties.":{code:2104,category:1},"Constructors for derived classes must contain a 'super' call.":{code:2105,category:1},"Super calls are not permitted outside constructors or in nested functions inside constructors.":{code:2106,category:1},"'{0}.{1}' is inaccessible.":{code:2107,category:1},"'this' cannot be referenced within module bodies.":{code:2108,category:1},"Invalid '+' expression - types not known to support the addition operator.":{code:2111,category:1},"The right-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type.":{code:2112,category:1},"The left-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type.":{code:2113,category:1},"The type of a unary arithmetic operation operand must be of type 'any', 'number' or an enum type.":{code:2114,category:1},"Variable declarations of a 'for' statement cannot use a type annotation.":{code:2115,category:1},"Variable declarations of a 'for' statement must be of types 'string' or 'any'.":{code:2116,category:1},"The right-hand side of a 'for...in' statement must be of type 'any', an object type or a type parameter.":{code:2117,category:1},"The left-hand side of an 'in' expression must be of types 'any', 'string' or 'number'.":{code:2118,category:1},"The right-hand side of an 'in' expression must be of type 'any', an object type or a type parameter.":{code:2119,category:1},"The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter.":{code:2120,category:1},"The right-hand side of an 'instanceof' expression must be of type 'any' or of a type assignable to the 'Function' interface type.":{code:2121,category:1},"Setters cannot return a value.":{code:2122,category:1},"Tried to query type of uninitialized module '{0}'.":{code:2123,category:1},"Tried to set variable type to uninitialized module type '{0}'.":{code:2124,category:1},"Type '{0}' does not have type parameters.":{code:2125,category:1},"Getters must return a value.":{code:2126,category:1},"Getter and setter accessors do not agree in visibility.":{code:2127,category:1},"Invalid left-hand side of assignment expression.":{code:2130,category:1},"Function declared a non-void return type, but has no return expression.":{code:2131,category:1},"Cannot resolve return type reference.":{code:2132,category:1},"Constructors cannot have a return type of 'void'.":{code:2133,category:1},"Subsequent variable declarations must have the same type.  Variable '{0}' must be of type '{1}', but here has type '{2}'.":{code:2134,category:1},"All symbols within a with block will be resolved to 'any'.":{code:2135,category:1},"Import declarations in an internal module cannot reference an external module.":{code:2136,category:1},"Class {0} declares interface {1} but does not implement it:{NL}{2}":{code:2137,category:1},"Class {0} declares class {1} as an interface but does not implement it:{NL}{2}":{code:2138,category:1},"The operand of an increment or decrement operator must be a variable, property or indexer.":{code:2139,category:1},"'this' cannot be referenced in static initializers in a class body.":{code:2140,category:1},"Class '{0}' cannot extend class '{1}':{NL}{2}":{code:2141,category:1},"Interface '{0}' cannot extend class '{1}':{NL}{2}":{code:2142,category:1},"Interface '{0}' cannot extend interface '{1}':{NL}{2}":{code:2143,category:1},"Duplicate overload signature for '{0}'.":{code:2144,category:1},"Duplicate constructor overload signature.":{code:2145,category:1},"Duplicate overload call signature.":{code:2146,category:1},"Duplicate overload construct signature.":{code:2147,category:1},"Overload signature is not compatible with function definition.":{code:2148,category:1},"Overload signature is not compatible with function definition:{NL}{0}":{code:2149,category:1},"Overload signatures must all be public or private.":{code:2150,category:1},"Overload signatures must all be exported or not exported.":{code:2151,category:1},"Overload signatures must all be ambient or non-ambient.":{code:2152,category:1},"Overload signatures must all be optional or required.":{code:2153,category:1},"Specialized overload signature is not assignable to any non-specialized signature.":{code:2154,category:1},"'this' cannot be referenced in constructor arguments.":{code:2155,category:1},"Instance member cannot be accessed off a class.":{code:2157,category:1},"Untyped function calls may not accept type arguments.":{code:2158,category:1},"Non-generic functions may not accept type arguments.":{code:2159,category:1},"A generic type may not reference itself with a wrapped form of its own type parameters.":{code:2160,category:1},"Rest parameters must be array types.":{code:2162,category:1},"Overload signature implementation cannot use specialized type.":{code:2163,category:1},"Export assignments may only be used at the top-level of external modules.":{code:2164,category:1},"Export assignments may only be made with variables, functions, classes, interfaces, enums and internal modules.":{code:2165,category:1},"Only public methods of the base class are accessible via the 'super' keyword.":{code:2166,category:1},"Numeric indexer type '{0}' must be assignable to string indexer type '{1}'.":{code:2167,category:1},"Numeric indexer type '{0}' must be assignable to string indexer type '{1}':{NL}{2}":{code:2168,category:1},"All numerically named properties must be assignable to numeric indexer type '{0}'.":{code:2169,category:1},"All numerically named properties must be assignable to numeric indexer type '{0}':{NL}{1}":{code:2170,category:1},"All named properties must be assignable to string indexer type '{0}'.":{code:2171,category:1},"All named properties must be assignable to string indexer type '{0}':{NL}{1}":{code:2172,category:1},"Generic type references must include all type arguments.":{code:2173,category:1},"Default arguments are only allowed in implementation.":{code:2174,category:1},"Overloads cannot differ only by return type.":{code:2175,category:1},"Function expression declared a non-void return type, but has no return expression.":{code:2176,category:1},"Import declaration referencing identifier from internal module can only be made with variables, functions, classes, interfaces, enums and internal modules.":{code:2177,category:1},"Could not find symbol '{0}' in module '{1}'.":{code:2178,category:1},"Unable to resolve module reference '{0}'.":{code:2179,category:1},"Could not find module '{0}' in module '{1}'.":{code:2180,category:1},"Exported import declaration '{0}' is assigned value with type that has or is using private type '{1}'.":{code:2181,category:1},"Exported import declaration '{0}' is assigned value with type that is using inaccessible module '{1}'.":{code:2182,category:1},"Exported import declaration '{0}' is assigned type that has or is using private type '{1}'.":{code:2183,category:1},"Exported import declaration '{0}' is assigned type that is using inaccessible module '{1}'.":{code:2184,category:1},"Exported import declaration '{0}' is assigned container that is or is using inaccessible module '{1}'.":{code:2185,category:1},"Type name '{0}' in extends clause does not reference constructor function for '{1}'.":{code:2186,category:1},"Internal module reference '{0}' in import declaration does not reference module instance for '{1}'.":{code:2187,category:1},"Module '{0}' cannot merge with previous declaration of '{1}' in a different file '{2}'.":{code:2188,category:1},"Interface '{0}' cannot simultaneously extend types '{1}' and '{2}':{NL}{3}":{code:2189,category:1},"Initializer of parameter '{0}' cannot reference identifier '{1}' declared after it.":{code:2190,category:1},"Ambient external module declaration cannot be reopened.":{code:2191,category:1},"All declarations of merged declaration '{0}' must be exported or not exported.":{code:2192,category:1},"'super' cannot be referenced in constructor arguments.":{code:2193,category:1},"Return type of constructor signature must be assignable to the instance type of the class.":{code:2194,category:1},"Ambient external module declaration must be defined in global context.":{code:2195,category:1},"Ambient external module declaration cannot specify relative module name.":{code:2196,category:1},"Import declaration in an ambient external module declaration cannot reference external module through relative external module name.":{code:2197,category:1},"Could not find the best common type of types of all return statement expressions.":{code:2198,category:1},"Import declaration cannot refer to external module reference when --noResolve option is set.":{code:2199,category:1},"Duplicate identifier '_this'. Compiler uses variable declaration '_this' to capture 'this' reference.":{code:2200,category:1},"'continue' statement can only be used within an enclosing iteration statement.":{code:2201,category:1},"'break' statement can only be used within an enclosing iteration or switch statement.":{code:2202,category:1},"Jump target not found.":{code:2203,category:1},"Jump target cannot cross function boundary.":{code:2204,category:1},"Duplicate identifier '_super'. Compiler uses '_super' to capture base class reference.":{code:2205,category:1},"Expression resolves to variable declaration '_this' that compiler uses to capture 'this' reference.":{code:2206,category:1},"Expression resolves to '_super' that compiler uses to capture base class reference.":{code:2207,category:1},"TypeParameter '{0}' of constructor signature from exported interface has or is using private type '{1}'.":{code:2208,category:1},"TypeParameter '{0}' of call signature from exported interface has or is using private type '{1}'.":{code:2209,category:1},"TypeParameter '{0}' of public static method from exported class has or is using private type '{1}'.":{code:2210,category:1},"TypeParameter '{0}' of public method from exported class has or is using private type '{1}'.":{code:2211,category:1},"TypeParameter '{0}' of method from exported interface has or is using private type '{1}'.":{code:2212,category:1},"TypeParameter '{0}' of exported function has or is using private type '{1}'.":{code:2213,category:1},"TypeParameter '{0}' of constructor signature from exported interface is using inaccessible module {1}.":{code:2214,category:1},"TypeParameter '{0}' of call signature from exported interface is using inaccessible module {1}":{code:2215,category:1},"TypeParameter '{0}' of public static method from exported class is using inaccessible module {1}.":{code:2216,category:1},"TypeParameter '{0}' of public method from exported class is using inaccessible module {1}.":{code:2217,category:1},"TypeParameter '{0}' of method from exported interface is using inaccessible module {1}.":{code:2218,category:1},"TypeParameter '{0}' of exported function is using inaccessible module {1}.":{code:2219,category:1},"TypeParameter '{0}' of exported class has or is using private type '{1}'.":{code:2220,category:1},"TypeParameter '{0}' of exported interface has or is using private type '{1}'.":{code:2221,category:1},"TypeParameter '{0}' of exported class is using inaccessible module {1}.":{code:2222,category:1},"TypeParameter '{0}' of exported interface is using inaccessible module {1}.":{code:2223,category:1},"Duplicate identifier '_i'. Compiler uses '_i' to initialize rest parameter.":{code:2224,category:1},"Duplicate identifier 'arguments'. Compiler uses 'arguments' to initialize rest parameters.":{code:2225,category:1},"Type of conditional '{0}' must be identical to '{1}' or '{2}'.":{code:2226,category:1},"Type of conditional '{0}' must be identical to '{1}', '{2}' or '{3}'.":{code:2227,category:1},"Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of an external module.":{code:2228,category:1},"Constraint of a type parameter cannot reference any type parameter from the same type parameter list.":{code:2229,category:1},"Initializer of instance member variable '{0}' cannot reference identifier '{1}' declared in the constructor.":{code:2230,category:1},"Parameter '{0}' cannot be referenced in its initializer.":{code:2231,category:1},"Duplicate string index signature.":{code:2232,category:1},"Duplicate number index signature.":{code:2233,category:1},"All declarations of an interface must have identical type parameters.":{code:2234,category:1},"Expression resolves to variable declaration '_i' that compiler uses to initialize rest parameter.":{code:2235,category:1},"Type '{0}' is missing property '{1}' from type '{2}'.":{code:4e3,category:3},"Types of property '{0}' of types '{1}' and '{2}' are incompatible.":{code:4001,category:3},"Types of property '{0}' of types '{1}' and '{2}' are incompatible:{NL}{3}":{code:4002,category:3},"Property '{0}' defined as private in type '{1}' is defined as public in type '{2}'.":{code:4003,category:3},"Property '{0}' defined as public in type '{1}' is defined as private in type '{2}'.":{code:4004,category:3},"Types '{0}' and '{1}' define property '{2}' as private.":{code:4005,category:3},"Call signatures of types '{0}' and '{1}' are incompatible.":{code:4006,category:3},"Call signatures of types '{0}' and '{1}' are incompatible:{NL}{2}":{code:4007,category:3},"Type '{0}' requires a call signature, but type '{1}' lacks one.":{code:4008,category:3},"Construct signatures of types '{0}' and '{1}' are incompatible.":{code:4009,category:3},"Construct signatures of types '{0}' and '{1}' are incompatible:{NL}{2}":{code:4010,category:3},"Type '{0}' requires a construct signature, but type '{1}' lacks one.":{code:4011,category:3},"Index signatures of types '{0}' and '{1}' are incompatible.":{code:4012,category:3},"Index signatures of types '{0}' and '{1}' are incompatible:{NL}{2}":{code:4013,category:3},"Call signature expects {0} or fewer parameters.":{code:4014,category:3},"Could not apply type '{0}' to argument {1} which is of type '{2}'.":{code:4015,category:3},"Class '{0}' defines instance member accessor '{1}', but extended class '{2}' defines it as instance member function.":{code:4016,category:3},"Class '{0}' defines instance member property '{1}', but extended class '{2}' defines it as instance member function.":{code:4017,category:3},"Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member accessor.":{code:4018,category:3},"Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member property.":{code:4019,category:3},"Types of static property '{0}' of class '{1}' and class '{2}' are incompatible.":{code:4020,category:3},"Types of static property '{0}' of class '{1}' and class '{2}' are incompatible:{NL}{3}":{code:4021,category:3},"Type reference cannot refer to container '{0}'.":{code:4022,category:1},"Type reference must refer to type.":{code:4023,category:1},"In enums with multiple declarations only one declaration can omit an initializer for the first enum element.":{code:4024,category:1}," (+ {0} overload(s))":{code:4025,category:2},"Variable declaration cannot have the same name as an import declaration.":{code:4026,category:1},"Signature expected {0} type arguments, got {1} instead.":{code:4027,category:1},"Property '{0}' defined as optional in type '{1}', but is required in type '{2}'.":{code:4028,category:3},"Types '{0}' and '{1}' originating in infinitely expanding type reference do not refer to same named type.":{code:4029,category:3},"Types '{0}' and '{1}' originating in infinitely expanding type reference have incompatible type arguments.":{code:4030,category:3},"Types '{0}' and '{1}' originating in infinitely expanding type reference have incompatible type arguments:{NL}{2}":{code:4031,category:3},"Named properties '{0}' of types '{1}' and '{2}' are not identical.":{code:4032,category:3},"Types of string indexer of types '{0}' and '{1}' are not identical.":{code:4033,category:3},"Types of number indexer of types '{0}' and '{1}' are not identical.":{code:4034,category:3},"Type of number indexer in type '{0}' is not assignable to string indexer type in type '{1}'.{NL}{2}":{code:4035,category:3},"Type of property '{0}' in type '{1}' is not assignable to string indexer type in type '{2}'.{NL}{3}":{code:4036,category:3},"Type of property '{0}' in type '{1}' is not assignable to number indexer type in type '{2}'.{NL}{3}":{code:4037,category:3},"Static property '{0}' defined as private in type '{1}' is defined as public in type '{2}'.":{code:4038,category:3},"Static property '{0}' defined as public in type '{1}' is defined as private in type '{2}'.":{code:4039,category:3},"Types '{0}' and '{1}' define static property '{2}' as private.":{code:4040,category:3},"Current host does not support '{0}' option.":{code:5001,category:1},"ECMAScript target version '{0}' not supported.  Specify a valid target version: '{1}' (default), or '{2}'":{code:5002,category:1},"Module code generation '{0}' not supported.":{code:5003,category:1},"Could not find file: '{0}'.":{code:5004,category:1},"A file cannot have a reference to itself.":{code:5006,category:1},"Cannot resolve referenced file: '{0}'.":{code:5007,category:1},"Cannot find the common subdirectory path for the input files.":{code:5009,category:1},"Emit Error: {0}.":{code:5011,category:1},"Cannot read file '{0}': {1}":{code:5012,category:1},"Unsupported file encoding.":{code:5013,category:3},"Locale must be of the form <language> or <language>-<territory>. For example '{0}' or '{1}'.":{code:5014,category:1},"Unsupported locale: '{0}'.":{code:5015,category:1},"Execution Failed.{NL}":{code:5016,category:1},"Invalid call to 'up'":{code:5019,category:1},"Invalid call to 'down'":{code:5020,category:1},"Base64 value '{0}' finished with a continuation bit.":{code:5021,category:1},"Unknown option '{0}'":{code:5023,category:1},"Expected {0} arguments to message, got {1} instead.":{code:5024,category:1},"Expected the message '{0}' to have {1} arguments, but it had {2}":{code:5025,category:1},"Could not delete file '{0}'":{code:5034,category:1},"Could not create directory '{0}'":{code:5035,category:1},"Error while executing file '{0}': ":{code:5036,category:1},"Cannot compile external modules unless the '--module' flag is provided.":{code:5037,category:1},"Option mapRoot cannot be specified without specifying sourcemap option.":{code:5038,category:1},"Option sourceRoot cannot be specified without specifying sourcemap option.":{code:5039,category:1},"Options mapRoot and sourceRoot cannot be specified without specifying sourcemap option.":{code:5040,category:1},"Option '{0}' specified without '{1}'":{code:5041,category:1},"'codepage' option not supported on current platform.":{code:5042,category:1},"Concatenate and emit output to single file.":{code:6001,category:2},"Generates corresponding {0} file.":{code:6002,category:2},"Specifies the location where debugger should locate map files instead of generated locations.":{code:6003,category:2},"Specifies the location where debugger should locate TypeScript files instead of source locations.":{code:6004,category:2},"Watch input files.":{code:6005,category:2},"Redirect output structure to the directory.":{code:6006,category:2},"Do not emit comments to output.":{code:6009,category:2},"Skip resolution and preprocessing.":{code:6010,category:2},"Specify ECMAScript target version: '{0}' (default), or '{1}'":{code:6015,category:2},"Specify module code generation: '{0}' or '{1}'":{code:6016,category:2},"Print this message.":{code:6017,category:2},"Print the compiler's version: {0}":{code:6019,category:2},"Allow use of deprecated '{0}' keyword when referencing an external module.":{code:6021,category:2},"Specify locale for errors and messages. For example '{0}' or '{1}'":{code:6022,category:2},"Syntax:   {0}":{code:6023,category:2},options:{code:6024,category:2},file1:{code:6025,category:2},"Examples:":{code:6026,category:2},"Options:":{code:6027,category:2},"Insert command line options and files from a file.":{code:6030,category:2},"Version {0}":{code:6029,category:2},"Use the '{0}' flag to see options.":{code:6031,category:2},"{NL}Recompiling ({0}):":{code:6032,category:2},STRING:{code:6033,category:2},KIND:{code:6034,category:2},file2:{code:6035,category:2},VERSION:{code:6036,category:2},LOCATION:{code:6037,category:2},DIRECTORY:{code:6038,category:2},NUMBER:{code:6039,category:2},"Specify the codepage to use when opening source files.":{code:6040,category:2},"Additional locations:":{code:6041,category:2},"This version of the Javascript runtime does not support the '{0}' function.":{code:7e3,category:1},"Unknown rule.":{code:7002,category:1},"Invalid line number ({0})":{code:7003,category:1},"Warn on expressions and declarations with an implied 'any' type.":{code:7004,category:2},"Variable '{0}' implicitly has an 'any' type.":{code:7005,category:1},"Parameter '{0}' of '{1}' implicitly has an 'any' type.":{code:7006,category:1},"Parameter '{0}' of function type implicitly has an 'any' type.":{code:7007,category:1},"Member '{0}' of object type implicitly has an 'any' type.":{code:7008,category:1},"'new' expression, which lacks a constructor signature, implicitly has an 'any' type.":{code:7009,category:1},"'{0}', which lacks return-type annotation, implicitly has an 'any' return type.":{code:7010,category:1},"Function expression, which lacks return-type annotation, implicitly has an 'any' return type.":{code:7011,category:1},"Parameter '{0}' of lambda function implicitly has an 'any' type.":{code:7012,category:1},"Constructor signature, which lacks return-type annotation, implicitly has an 'any' return type.":{code:7013,category:1},"Lambda Function, which lacks return-type annotation, implicitly has an 'any' return type.":{code:7014,category:1},"Array Literal implicitly has an 'any' type from widening.":{code:7015,category:1},"'{0}', which lacks 'get' accessor and parameter type annotation on 'set' accessor, implicitly has an 'any' type.":{code:7016,category:1},"Index signature of object type implicitly has an 'any' type.":{code:7017,category:1},"Object literal's property '{0}' implicitly has an 'any' type from widening.":{code:7018,category:1}}})(r||(r={}));var r;(function(e){(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._7=55]="_7",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.E=69]="E",e[e.F=70]="F",e[e.X=88]="X",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(e.CharacterCodes||(e.CharacterCodes={}));var t=e.CharacterCodes})(r||(r={}));var r;(function(e){(function(t){function r(e){return new n(e)}var n=function(){function t(e){this.text=e,this._lineStartPositions=null}return t.prototype.getText=function(e,t){return this.text.substring(e,t)},t.prototype.getLength=function(){return this.text.length},t.prototype.getLineStartPositions=function(){return this._lineStartPositions||(this._lineStartPositions=e.TextUtilities.parseLineStarts(this.text)),this._lineStartPositions},t.prototype.getTextChangeRangeSinceVersion=function(t){throw e.Errors.notYetImplemented()},t}();t.fromString=r})(e.ScriptSnapshot||(e.ScriptSnapshot={}));var t=e.ScriptSnapshot})(r||(r={}));var r;(function(e){(function(t){function n(t){return new e.LineMap(function(){return e.TextUtilities.parseLineStarts({charCodeAt:function(e){return t.charCodeAt(e)},length:t.length()})},t.length())}function r(t){return new e.LineMap(function(){return t.getLineStartPositions()},t.getLength())}function i(t){return new e.LineMap(function(){return e.TextUtilities.parseLineStarts(t)},t.length)}t.fromSimpleText=n,t.fromScriptSnapshot=r,t.fromString=i})(e.LineMap1||(e.LineMap1={}));var t=e.LineMap1})(r||(r={}));var r;(function(e){(function(t){function n(t,n,r){var i=t.charCodeAt(n);i===10?n>0&&t.charCodeAt(n-1)===13?(r.startPosition=n-1,r.length=2):(r.startPosition=n,r.length=1):e.TextUtilities.isAnyLineBreakCharacter(i)?(r.startPosition=n,r.length=1):(r.startPosition=n+1,r.length=0)}function f(e){return new a(e)}var r=function(){function e(e,t){this.startPosition=e,this.length=t}return e}(),s=function(){function t(t,n,r,i){this._text=null,this._textSpan=null;if(t===null)throw e.Errors.argumentNull("text");e.Debug.assert(r>=0),e.Debug.assert(i>=0),this._text=t,this._textSpan=n,this._lineBreakLength=r,this._lineNumber=i}return t.prototype.start=function(){return this._textSpan.start()},t.prototype.end=function(){return this._textSpan.end()},t.prototype.endIncludingLineBreak=function(){return this.end()+this._lineBreakLength},t.prototype.extent=function(){return this._textSpan},t.prototype.extentIncludingLineBreak=function(){return e.TextSpan.fromBounds(this.start(),this.endIncludingLineBreak())},t.prototype.toString=function(){return this._text.toString(this._textSpan)},t.prototype.lineNumber=function(){return this._lineNumber},t}(),o=function(){function t(){this.linebreakInfo=new r(0,0),this.lastLineFoundForPosition=null}return t.prototype.length=function(){throw e.Errors.abstract()},t.prototype.charCodeAt=function(t){throw e.Errors.abstract()},t.prototype.checkSubSpan=function(t){if(t.start()<0||t.start()>this.length()||t.end()>this.length())throw e.Errors.argumentOutOfRange("span")},t.prototype.toString=function(t){throw typeof t=="undefined"&&(t=null),e.Errors.abstract()},t.prototype.subText=function(e){return this.checkSubSpan(e),new u(this,e)},t.prototype.substr=function(t,n,r){throw e.Errors.abstract()},t.prototype.copyTo=function(t,n,r,i){throw e.Errors.abstract()},t.prototype.lineCount=function(){return this._lineStarts().length},t.prototype.lines=function(){var e=[],t=this.lineCount();for(var n=0;n<t;++n)e[n]=this.getLineFromLineNumber(n);return e},t.prototype.lineMap=function(){var t=this;return new e.LineMap(function(){return t._lineStarts()},this.length())},t.prototype._lineStarts=function(){throw e.Errors.abstract()},t.prototype.getLineFromLineNumber=function(t){var r=this._lineStarts();if(t<0||t>=r.length)throw e.Errors.argumentOutOfRange("lineNumber");var i=r[t];return t===r.length-1?new s(this,new e.TextSpan(i,this.length()-i),0,t):(n(this,r[t+1]-1,this.linebreakInfo),new s(this,new e.TextSpan(i,this.linebreakInfo.startPosition-i),this.linebreakInfo.length,t))},t.prototype.getLineFromPosition=function(e){var t=this.lastLineFoundForPosition;if(t!==null&&t.start()<=e&&t.endIncludingLineBreak()>e)return t;var n=this.getLineNumberFromPosition(e),r=this.getLineFromLineNumber(n);return this.lastLineFoundForPosition=r,r},t.prototype.getLineNumberFromPosition=function(t){if(t<0||t>this.length())throw e.Errors.argumentOutOfRange("position");if(t===this.length())return this.lineCount()-1;var n=e.ArrayUtilities.binarySearch(this._lineStarts(),t);return n<0&&(n=~n-1),n},t.prototype.getLinePosition=function(t){if(t<0||t>this.length())throw e.Errors.argumentOutOfRange("position");var n=this.getLineNumberFromPosition(t);return new e.LineAndCharacter(n,t-this._lineStarts()[n])},t}(),u=function(t){function n(n,r){t.call(this),this._lazyLineStarts=null;if(n===null)throw e.Errors.argumentNull("text");if(r.start()<0||r.start()>=n.length()||r.end()<0||r.end()>n.length())throw e.Errors.argument("span");this.text=n,this.span=r}return i(n,t),n.prototype.length=function(){return this.span.length()},n.prototype.charCodeAt=function(t){if(t<0||t>this.length())throw e.Errors.argumentOutOfRange("position");return this.text.charCodeAt(this.span.start()+t)},n.prototype.subText=function(e){return this.checkSubSpan(e),new n(this.text,this.getCompositeSpan(e.start(),e.length()))},n.prototype.copyTo=function(e,t,n,r){var i=this.getCompositeSpan(e,r);this.text.copyTo(i.start(),t,n,i.length())},n.prototype.substr=function(e,t,n){var r=this.span.start()+e;return this.text.substr(r,t,n)},n.prototype.getCompositeSpan=function(t,n){var r=e.MathPrototype.min(this.text.length(),this.span.start()+t),i=e.MathPrototype.min(this.text.length(),r+n);return new e.TextSpan(r,i-r)},n.prototype._lineStarts=function(){var t=this;return this._lazyLineStarts||(this._lazyLineStarts=e.TextUtilities.parseLineStarts({charCodeAt:function(e){return t.charCodeAt(e)},length:this.length()})),this._lazyLineStarts},n}(o),a=function(t){function n(n){t.call(this),this.source=null,this._lazyLineStarts=null;if(n===null)throw e.Errors.argumentNull("data");this.source=n}return i(n,t),n.prototype.length=function(){return this.source.length},n.prototype.charCodeAt=function(t){if(t<0||t>=this.source.length)throw e.Errors.argumentOutOfRange("position");return this.source.charCodeAt(t)},n.prototype.substr=function(e,t,n){return this.source.substr(e,t)},n.prototype.toString=function(t){return typeof t=="undefined"&&(t=null),t===null&&(t=new e.TextSpan(0,this.length())),this.checkSubSpan(t),t.start()===0&&t.length()===this.length()?this.source:this.source.substr(t.start(),t.length())},n.prototype.copyTo=function(t,n,r,i){e.StringUtilities.copyTo(this.source,t,n,r,i)},n.prototype._lineStarts=function(){return this._lazyLineStarts===null&&(this._lazyLineStarts=e.TextUtilities.parseLineStarts(this.source)),this._lazyLineStarts},n}(o);t.createText=f})(e.TextFactory||(e.TextFactory={}));var t=e.TextFactory})(r||(r={}));var r;(function(e){(function(t){function s(e){return new r(e)}function o(e){return new i(e)}var n=function(){function t(t,n){this.text=null,this.span=null;if(t===null)throw e.Errors.argumentNull("text");if(n.start()<0||n.start()>=t.length()||n.end()<0||n.end()>t.length())throw e.Errors.argument("span");this.text=t,this.span=n}return t.prototype.checkSubSpan=function(t){if(t.start()<0||t.start()>this.length()||t.end()>this.length())throw e.Errors.argumentOutOfRange("span")},t.prototype.checkSubPosition=function(t){if(t<0||t>=this.length())throw e.Errors.argumentOutOfRange("position")},t.prototype.length=function(){return this.span.length()},t.prototype.subText=function(e){return this.checkSubSpan(e),new t(this.text,this.getCompositeSpan(e.start(),e.length()))},t.prototype.copyTo=function(e,t,n,r){var i=this.getCompositeSpan(e,r);this.text.copyTo(i.start(),t,n,i.length())},t.prototype.substr=function(e,t,n){var r=this.getCompositeSpan(e,t);return this.text.substr(r.start(),r.length(),n)},t.prototype.getCompositeSpan=function(t,n){var r=e.MathPrototype.min(this.text.length(),this.span.start()+t),i=e.MathPrototype.min(this.text.length(),r+n);return new e.TextSpan(r,i-r)},t.prototype.charCodeAt=function(e){return this.checkSubPosition(e),this.text.charCodeAt(this.span.start()+e)},t.prototype.lineMap=function(){return e.LineMap1.fromSimpleText(this)},t}(),r=function(){function t(e){this.value=e,this._lineMap=null}return t.prototype.length=function(){return this.value.length},t.prototype.copyTo=function(t,n,r,i){e.StringUtilities.copyTo(this.value,t,n,r,i)},t.prototype.substr=function(n,r,i){if(i){var s=r<=t.charArray.length?t.charArray:e.ArrayUtilities.createArray(r,0);return this.copyTo(n,s,0,r),e.Collections.DefaultStringTable.addCharArray(s,0,r)}return this.value.substr(n,r)},t.prototype.subText=function(e){return new n(this,e)},t.prototype.charCodeAt=function(e){return this.value.charCodeAt(e)},t.prototype.lineMap=function(){return this._lineMap||(this._lineMap=e.LineMap1.fromString(this.value)),this._lineMap},t.charArray=e.ArrayUtilities.createArray(1024,0),t}(),i=function(){function t(e){this.scriptSnapshot=e}return t.prototype.charCodeAt=function(e){return this.scriptSnapshot.getText(e,e+1).charCodeAt(0)},t.prototype.length=function(){return this.scriptSnapshot.getLength()},t.prototype.copyTo=function(t,n,r,i){var s=this.scriptSnapshot.getText(t,t+i);e.StringUtilities.copyTo(s,0,n,r,i)},t.prototype.substr=function(e,t,n){return this.scriptSnapshot.getText(e,e+t)},t.prototype.subText=function(e){return new n(this,e)},t.prototype.lineMap=function(){var t=this;return new e.LineMap(function(){return t.scriptSnapshot.getLineStartPositions()},this.length())},t}();t.fromString=s,t.fromScriptSnapshot=o})(e.SimpleText||(e.SimpleText={}));var t=e.SimpleText})(r||(r={}));var r;(function(e){(function(e){function t(t){var n=t.length;if(0===n){var r=new Array;return r.push(0),r}var i=0,s=0,o=new Array,u=0;while(s<n){var a=t.charCodeAt(s),f;if(a>13&&a<=127){s++;continue}a===13&&s+1<n&&t.charCodeAt(s+1)===10?f=2:a===10?f=1:f=e.getLengthOfLineBreak(t,s),0===f?s++:(o.push(i),s+=f,i=s,u++)}return o.push(i),o}function n(e,t,n){if(n===13){var r=t+1;return r<e.length&&10===e.charCodeAt(r)?2:1}return i(n)?1:0}function r(e,t){var r=e.charCodeAt(t);return r>13&&r<=127?0:n(e,t,r)}function i(e){return e===10||e===13||e===133||e===8232||e===8233}e.parseLineStarts=t,e.getLengthOfLineBreakSlow=n,e.getLengthOfLineBreak=r,e.isAnyLineBreakCharacter=i})(e.TextUtilities||(e.TextUtilities={}));var t=e.TextUtilities})(r||(r={}));var r;(function(e){var t=function(){function t(t,n){t<0&&e.Errors.argument("start"),n<0&&e.Errors.argument("length"),this._start=t,this._length=n}return t.prototype.start=function(){return this._start},t.prototype.length=function(){return this._length},t.prototype.end=function(){return this._start+this._length},t.prototype.isEmpty=function(){return this._length===0},t.prototype.containsPosition=function(e){return e>=this._start&&e<this.end()},t.prototype.containsTextSpan=function(e){return e._start>=this._start&&e.end()<=this.end()},t.prototype.overlapsWith=function(t){var n=e.MathPrototype.max(this._start,t._start),r=e.MathPrototype.min(this.end(),t.end());return n<r},t.prototype.overlap=function(n){var r=e.MathPrototype.max(this._start,n._start),i=e.MathPrototype.min(this.end(),n.end());return r<i?t.fromBounds(r,i):null},t.prototype.intersectsWithTextSpan=function(e){return e._start<=this.end()&&e.end()>=this._start},t.prototype.intersectsWith=function(e,t){var n=e+t;return e<=this.end()&&n>=this._start},t.prototype.intersectsWithPosition=function(e){return e<=this.end()&&e>=this._start},t.prototype.intersection=function(n){var r=e.MathPrototype.max(this._start,n._start),i=e.MathPrototype.min(this.end(),n.end());return r<=i?t.fromBounds(r,i):null},t.fromBounds=function(n,r){return e.Debug.assert(n>=0),e.Debug.assert(r-n>=0),new t(n,r-n)},t}();e.TextSpan=t})(r||(r={}));var r;(function(e){var t=function(){function t(t,n){if(n<0)throw e.Errors.argumentOutOfRange("newLength");this._span=t,this._newLength=n}return t.prototype.span=function(){return this._span},t.prototype.newLength=function(){return this._newLength},t.prototype.newSpan=function(){return new e.TextSpan(this.span().start(),this.newLength())},t.prototype.isUnchanged=function(){return this.span().isEmpty()&&this.newLength()===0},t.collapseChangesFromSingleVersion=function(n){var r=0,i=1073741823,s=0;for(var o=0;o<n.length;o++){var u=n[o];r+=u.newLength()-u.span().length(),u.span().start()<i&&(i=u.span().start()),u.span().end()>s&&(s=u.span().end())}if(i>s)return null;var a=e.TextSpan.fromBounds(i,s),f=a.length()+r;return new t(a,f)},t.collapseChangesAcrossMultipleVersions=function(n){if(n.length===0)return t.unchanged;if(n.length===1)return n[0];var r=n[0],i=r.span().start(),s=r.span().end(),o=i+r.newLength();for(var u=1;u<n.length;u++){var a=n[u],f=i,l=s,c=o,h=a.span().start(),p=a.span().end(),d=h+a.newLength();i=e.MathPrototype.min(f,h),s=e.MathPrototype.max(l,l+(p-c)),o=e.MathPrototype.max(d,d+(c-p))}return new t(e.TextSpan.fromBounds(i,s),o-i)},t.unchanged=new t(new e.TextSpan(0,0),0),t}();e.TextChangeRange=t})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.isDecimalDigit=function(e){return e>=48&&e<=57},e.isOctalDigit=function(e){return e>=48&&e<=55},e.isHexDigit=function(t){return e.isDecimalDigit(t)||t>=65&&t<=70||t>=97&&t<=102},e.hexValue=function(t){return e.isDecimalDigit(t)?t-48:t>=65&&t<=70?t-65+10:t-97+10},e.isWhitespace=function(e){switch(e){case 32:case 160:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8203:case 8239:case 12288:case 9:case 11:case 12:case 65279:return!0}return!1},e.isLineTerminator=function(e){switch(e){case 13:case 10:case 8233:case 8232:return!0}return!1},e}();e.CharacterInfo=t})(r||(r={}));var r;(function(e){(function(e){e[e.TriviaNewLineMask=1]="TriviaNewLineMask",e[e.TriviaCommentMask=2]="TriviaCommentMask",e[e.TriviaFullWidthShift=2]="TriviaFullWidthShift",e[e.NodeDataComputed=1]="NodeDataComputed",e[e.NodeIncrementallyUnusableMask=2]="NodeIncrementallyUnusableMask",e[e.NodeParsedInStrictModeMask=4]="NodeParsedInStrictModeMask",e[e.NodeFullWidthShift=3]="NodeFullWidthShift",e[e.IsVariableWidthKeyword=1<<31]="IsVariableWidthKeyword"})(e.SyntaxConstants||(e.SyntaxConstants={}));var t=e.SyntaxConstants})(r||(r={}));var o=function(){function e(e,t,n,r){this.useTabs=e,this.spacesPerTab=t,this.indentSpaces=n,this.newLineCharacter=r}return e.defaultOptions=new e(!1,4,4,"\r\n"),e}(),r;(function(e){(function(t){function n(e,t,n){return r(e,t,n)+e.width()}function r(e,t,n){var r=t.firstTokenInLineContainingToken(e),i=[],u=e;while(u!==r)u=t.previousToken(u),u===r?(i.push(u.trailingTrivia().fullText()),i.push(u.text())):i.push(u.fullText());return s(r,i),o(i,n)}function i(e,t,n){var r=t.firstTokenInLineContainingToken(e),i=[];return s(r,i),o(i,n)}function s(t,n){var r=t.leadingTrivia();for(var i=r.count()-1;i>=0;i--){var s=r.syntaxTriviaAt(i);if(s.kind()===5)break;if(s.kind()===6){var o=e.Syntax.splitMultiLineCommentTriviaIntoMultipleLines(s);n.push(e.ArrayUtilities.last(o));if(o.length>0)break}n.push(s.fullText())}}function o(e,t){var n=0;for(var r=e.length-1;r>=0;r--){var i=e[r];n=a(i,i.length,n,t)}return n}function u(e,t,n){return a(e,t,0,n)}function a(e,t,n,r){var i=n,s=r.spacesPerTab;for(var o=0;o<t;o++){var u=e.charCodeAt(o);u===9?i+=s-i%s:i++}return i}function f(t,n){var r=0,i=e.MathPrototype.max(0,t);return n.useTabs&&(r=Math.floor(t/n.spacesPerTab),i-=r*n.spacesPerTab),e.StringUtilities.repeat("	",r)+e.StringUtilities.repeat(" ",i)}function l(t,n){return e.Syntax.whitespace(this.indentationString(t,n))}function c(t){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(!e.CharacterInfo.isWhitespace(r))return n}return t.length}t.columnForEndOfToken=n,t.columnForStartOfToken=r,t.columnForStartOfFirstTokenInLineContainingToken=i,t.columnForPositionInString=u,t.indentationString=f,t.indentationTrivia=l,t.firstNonWhitespacePosition=c})(e.Indentation||(e.Indentation={}));var t=e.Indentation})(r||(r={}));var r;(function(e){(function(e){e[e.EcmaScript3=0]="EcmaScript3",e[e.EcmaScript5=1]="EcmaScript5"})(e.LanguageVersion||(e.LanguageVersion={}));var t=e.LanguageVersion})(r||(r={}));var r;(function(e){var t=function(){function e(e,t){this._languageVersion=e,this._allowAutomaticSemicolonInsertion=t}return e.prototype.toJSON=function(e){return{allowAutomaticSemicolonInsertion:this._allowAutomaticSemicolonInsertion}},e.prototype.languageVersion=function(){return this._languageVersion},e.prototype.allowAutomaticSemicolonInsertion=function(){return this._allowAutomaticSemicolonInsertion},e}();e.ParseOptions=t})(r||(r={}));var r;(function(e){var t=function(){function t(e,t,n){this._parent=e,this._element=t,this._fullStart=n}return t.create=function(t,n,i){if(n===null)return null;if(n.isNode())return new r(t,n,i);if(n.isToken())return new s(t,n,i);if(n.isList())return new o(t,n,i);if(n.isSeparatedList())return new u(t,n,i);throw e.Errors.invalidOperation()},t.prototype.parent=function(){return this._parent},t.prototype.parentElement=function(){return this._parent&&this._parent._element},t.prototype.element=function(){return this._element},t.prototype.kind=function(){return this.element().kind()},t.prototype.childIndex=function(t){return e.Syntax.childIndex(this.element(),t)},t.prototype.childCount=function(){return this.element().childCount()},t.prototype.childAt=function(n){var r=e.Syntax.childOffsetAt(this.element(),n);return t.create(this,this.element().childAt(n),this.fullStart()+r)},t.prototype.childStart=function(t){var n=e.Syntax.childOffset(this.element(),t);return this.fullStart()+n+t.leadingTriviaWidth()},t.prototype.childEnd=function(t){var n=e.Syntax.childOffset(this.element(),t);return this.fullStart()+n+t.leadingTriviaWidth()+t.width()},t.prototype.childStartAt=function(t){var n=e.Syntax.childOffsetAt(this.element(),t),r=this.element().childAt(t);return this.fullStart()+n+r.leadingTriviaWidth()},t.prototype.childEndAt=function(t){var n=e.Syntax.childOffsetAt(this.element(),t),r=this.element().childAt(t);return this.fullStart()+n+r.leadingTriviaWidth()+r.width()},t.prototype.getPositionedChild=function(n){var r=e.Syntax.childOffset(this.element(),n);return t.create(this,n,this.fullStart()+r)},t.prototype.fullStart=function(){return this._fullStart},t.prototype.fullEnd=function(){return this.fullStart()+this.element().fullWidth()},t.prototype.fullWidth=function(){return this.element().fullWidth()},t.prototype.start=function(){return this.fullStart()+this.element().leadingTriviaWidth()},t.prototype.end=function(){return this.fullStart()+this.element().leadingTriviaWidth()+this.element().width()},t.prototype.root=function(){var e=this;while(e.parent()!==null)e=e.parent();return e},t.prototype.containingNode=function(){var e=this.parent();while(e!==null&&!e.element().isNode())e=e.parent();return e},t}();e.PositionedElement=t;var n=function(e){function t(t,n,r){e.call(this,t,n,r)}return i(t,e),t.prototype.nodeOrToken=function(){return this.element()},t}(t);e.PositionedNodeOrToken=n;var r=function(e){function t(t,n,r){e.call(this,t,n,r)}return i(t,e),t.prototype.node=function(){return this.element()},t}(n);e.PositionedNode=r;var s=function(e){function t(t,n,r){e.call(this,t,n,r)}return i(t,e),t.prototype.token=function(){return this.element()},t.prototype.previousToken=function(e){typeof e=="undefined"&&(e=!1);var t=this.token().leadingTrivia();if(e&&t&&t.hasSkippedToken()){var n=this.start();for(var r=t.count()-1;r>=0;r--){var i=t.syntaxTriviaAt(r);if(i.isSkippedToken())return new a(this,i.skippedToken(),n-i.fullWidth());n-=i.fullWidth()}}var s=this.fullStart();return s===0?null:this.root().node().findToken(s-1,e)},t.prototype.nextToken=function(e){typeof e=="undefined"&&(e=!1);if(this.token().tokenKind===10)return null;var t=this.token().trailingTrivia();if(e&&t&&t.hasSkippedToken()){var n=this.end();for(var r=0,i=t.count();r<i;r++){var s=t.syntaxTriviaAt(r);if(s.isSkippedToken())return new a(this,s.skippedToken(),n);n+=s.fullWidth()}}return this.root().node().findToken(this.fullEnd(),e)},t}(n);e.PositionedToken=s;var o=function(e){function t(t,n,r){e.call(this,t,n,r)}return i(t,e),t.prototype.list=function(){return this.element()},t}(t);e.PositionedList=o;var u=function(e){function t(t,n,r){e.call(this,t,n,r)}return i(t,e),t.prototype.list=function(){return this.element()},t}(t);e.PositionedSeparatedList=u;var a=function(t){function n(e,n,r){t.call(this,e.parent(),n,r),this._parentToken=e}return i(n,t),n.prototype.parentToken=function(){return this._parentToken},n.prototype.previousToken=function(t){typeof t=="undefined"&&(t=!1);var n=this.fullStart();if(t){var r;if(n>=this.parentToken().end())return r=e.Syntax.findSkippedTokenInTrailingTriviaList(this.parentToken(),n-1),r?r:this.parentToken();r=e.Syntax.findSkippedTokenInLeadingTriviaList(this.parentToken(),n-1);if(r)return r}var n=this.parentToken().fullStart();return n===0?null:this.root().node().findToken(n-1,t)},n.prototype.nextToken=function(t){typeof t=="undefined"&&(t=!1);if(this.token().tokenKind===10)return null;if(t){var n=this.end(),r;if(n<=this.parentToken().start())return r=e.Syntax.findSkippedTokenInLeadingTriviaList(this.parentToken(),n),r?r:this.parentToken();r=e.Syntax.findSkippedTokenInTrailingTriviaList(this.parentToken(),n);if(r)return r}return this.root().node().findToken(this.parentToken().fullEnd(),t)},n}(s);e.PositionedSkippedToken=a})(r||(r={}));var r;(function(e){(function(e){e[e.None=0]="None",e[e.List=1]="List",e[e.SeparatedList=2]="SeparatedList",e[e.TriviaList=3]="TriviaList",e[e.WhitespaceTrivia=4]="WhitespaceTrivia",e[e.NewLineTrivia=5]="NewLineTrivia",e[e.MultiLineCommentTrivia=6]="MultiLineCommentTrivia",e[e.SingleLineCommentTrivia=7]="SingleLineCommentTrivia",e[e.SkippedTokenTrivia=8]="SkippedTokenTrivia",e[e.ErrorToken=9]="ErrorToken",e[e.EndOfFileToken=10]="EndOfFileToken",e[e.IdentifierName=11]="IdentifierName",e[e.RegularExpressionLiteral=12]="RegularExpressionLiteral",e[e.NumericLiteral=13]="NumericLiteral",e[e.StringLiteral=14]="StringLiteral",e[e.BreakKeyword=15]="BreakKeyword",e[e.CaseKeyword=16]="CaseKeyword",e[e.CatchKeyword=17]="CatchKeyword",e[e.ContinueKeyword=18]="ContinueKeyword",e[e.DebuggerKeyword=19]="DebuggerKeyword",e[e.DefaultKeyword=20]="DefaultKeyword",e[e.DeleteKeyword=21]="DeleteKeyword",e[e.DoKeyword=22]="DoKeyword",e[e.ElseKeyword=23]="ElseKeyword",e[e.FalseKeyword=24]="FalseKeyword",e[e.FinallyKeyword=25]="FinallyKeyword",e[e.ForKeyword=26]="ForKeyword",e[e.FunctionKeyword=27]="FunctionKeyword",e[e.IfKeyword=28]="IfKeyword",e[e.InKeyword=29]="InKeyword",e[e.InstanceOfKeyword=30]="InstanceOfKeyword",e[e.NewKeyword=31]="NewKeyword",e[e.NullKeyword=32]="NullKeyword",e[e.ReturnKeyword=33]="ReturnKeyword",e[e.SwitchKeyword=34]="SwitchKeyword",e[e.ThisKeyword=35]="ThisKeyword",e[e.ThrowKeyword=36]="ThrowKeyword",e[e.TrueKeyword=37]="TrueKeyword",e[e.TryKeyword=38]="TryKeyword",e[e.TypeOfKeyword=39]="TypeOfKeyword",e[e.VarKeyword=40]="VarKeyword",e[e.VoidKeyword=41]="VoidKeyword",e[e.WhileKeyword=42]="WhileKeyword",e[e.WithKeyword=43]="WithKeyword",e[e.ClassKeyword=44]="ClassKeyword",e[e.ConstKeyword=45]="ConstKeyword",e[e.EnumKeyword=46]="EnumKeyword",e[e.ExportKeyword=47]="ExportKeyword",e[e.ExtendsKeyword=48]="ExtendsKeyword",e[e.ImportKeyword=49]="ImportKeyword",e[e.SuperKeyword=50]="SuperKeyword",e[e.ImplementsKeyword=51]="ImplementsKeyword",e[e.InterfaceKeyword=52]="InterfaceKeyword",e[e.LetKeyword=53]="LetKeyword",e[e.PackageKeyword=54]="PackageKeyword",e[e.PrivateKeyword=55]="PrivateKeyword",e[e.ProtectedKeyword=56]="ProtectedKeyword",e[e.PublicKeyword=57]="PublicKeyword",e[e.StaticKeyword=58]="StaticKeyword",e[e.YieldKeyword=59]="YieldKeyword",e[e.AnyKeyword=60]="AnyKeyword",e[e.BooleanKeyword=61]="BooleanKeyword",e[e.ConstructorKeyword=62]="ConstructorKeyword",e[e.DeclareKeyword=63]="DeclareKeyword",e[e.GetKeyword=64]="GetKeyword",e[e.ModuleKeyword=65]="ModuleKeyword",e[e.RequireKeyword=66]="RequireKeyword",e[e.NumberKeyword=67]="NumberKeyword",e[e.SetKeyword=68]="SetKeyword",e[e.StringKeyword=69]="StringKeyword",e[e.OpenBraceToken=70]="OpenBraceToken",e[e.CloseBraceToken=71]="CloseBraceToken",e[e.OpenParenToken=72]="OpenParenToken",e[e.CloseParenToken=73]="CloseParenToken",e[e.OpenBracketToken=74]="OpenBracketToken",e[e.CloseBracketToken=75]="CloseBracketToken",e[e.DotToken=76]="DotToken",e[e.DotDotDotToken=77]="DotDotDotToken",e[e.SemicolonToken=78]="SemicolonToken",e[e.CommaToken=79]="CommaToken",e[e.LessThanToken=80]="LessThanToken",e[e.GreaterThanToken=81]="GreaterThanToken",e[e.LessThanEqualsToken=82]="LessThanEqualsToken",e[e.GreaterThanEqualsToken=83]="GreaterThanEqualsToken",e[e.EqualsEqualsToken=84]="EqualsEqualsToken",e[e.EqualsGreaterThanToken=85]="EqualsGreaterThanToken",e[e.ExclamationEqualsToken=86]="ExclamationEqualsToken",e[e.EqualsEqualsEqualsToken=87]="EqualsEqualsEqualsToken",e[e.ExclamationEqualsEqualsToken=88]="ExclamationEqualsEqualsToken",e[e.PlusToken=89]="PlusToken",e[e.MinusToken=90]="MinusToken",e[e.AsteriskToken=91]="AsteriskToken",e[e.PercentToken=92]="PercentToken",e[e.PlusPlusToken=93]="PlusPlusToken",e[e.MinusMinusToken=94]="MinusMinusToken",e[e.LessThanLessThanToken=95]="LessThanLessThanToken",e[e.GreaterThanGreaterThanToken=96]="GreaterThanGreaterThanToken",e[e.GreaterThanGreaterThanGreaterThanToken=97]="GreaterThanGreaterThanGreaterThanToken",e[e.AmpersandToken=98]="AmpersandToken",e[e.BarToken=99]="BarToken",e[e.CaretToken=100]="CaretToken",e[e.ExclamationToken=101]="ExclamationToken",e[e.TildeToken=102]="TildeToken",e[e.AmpersandAmpersandToken=103]="AmpersandAmpersandToken",e[e.BarBarToken=104]="BarBarToken",e[e.QuestionToken=105]="QuestionToken",e[e.ColonToken=106]="ColonToken",e[e.EqualsToken=107]="EqualsToken",e[e.PlusEqualsToken=108]="PlusEqualsToken",e[e.MinusEqualsToken=109]="MinusEqualsToken",e[e.AsteriskEqualsToken=110]="AsteriskEqualsToken",e[e.PercentEqualsToken=111]="PercentEqualsToken",e[e.LessThanLessThanEqualsToken=112]="LessThanLessThanEqualsToken",e[e.GreaterThanGreaterThanEqualsToken=113]="GreaterThanGreaterThanEqualsToken",e[e.GreaterThanGreaterThanGreaterThanEqualsToken=114]="GreaterThanGreaterThanGreaterThanEqualsToken",e[e.AmpersandEqualsToken=115]="AmpersandEqualsToken",e[e.BarEqualsToken=116]="BarEqualsToken",e[e.CaretEqualsToken=117]="CaretEqualsToken",e[e.SlashToken=118]="SlashToken",e[e.SlashEqualsToken=119]="SlashEqualsToken",e[e.SourceUnit=120]="SourceUnit",e[e.QualifiedName=121]="QualifiedName",e[e.ObjectType=122]="ObjectType",e[e.FunctionType=123]="FunctionType",e[e.ArrayType=124]="ArrayType",e[e.ConstructorType=125]="ConstructorType",e[e.GenericType=126]="GenericType",e[e.TypeQuery=127]="TypeQuery",e[e.InterfaceDeclaration=128]="InterfaceDeclaration",e[e.FunctionDeclaration=129]="FunctionDeclaration",e[e.ModuleDeclaration=130]="ModuleDeclaration",e[e.ClassDeclaration=131]="ClassDeclaration",e[e.EnumDeclaration=132]="EnumDeclaration",e[e.ImportDeclaration=133]="ImportDeclaration",e[e.ExportAssignment=134]="ExportAssignment",e[e.MemberFunctionDeclaration=135]="MemberFunctionDeclaration",e[e.MemberVariableDeclaration=136]="MemberVariableDeclaration",e[e.ConstructorDeclaration=137]="ConstructorDeclaration",e[e.IndexMemberDeclaration=138]="IndexMemberDeclaration",e[e.GetAccessor=139]="GetAccessor",e[e.SetAccessor=140]="SetAccessor",e[e.PropertySignature=141]="PropertySignature",e[e.CallSignature=142]="CallSignature",e[e.ConstructSignature=143]="ConstructSignature",e[e.IndexSignature=144]="IndexSignature",e[e.MethodSignature=145]="MethodSignature",e[e.Block=146]="Block",e[e.IfStatement=147]="IfStatement",e[e.VariableStatement=148]="VariableStatement",e[e.ExpressionStatement=149]="ExpressionStatement",e[e.ReturnStatement=150]="ReturnStatement",e[e.SwitchStatement=151]="SwitchStatement",e[e.BreakStatement=152]="BreakStatement",e[e.ContinueStatement=153]="ContinueStatement",e[e.ForStatement=154]="ForStatement",e[e.ForInStatement=155]="ForInStatement",e[e.EmptyStatement=156]="EmptyStatement",e[e.ThrowStatement=157]="ThrowStatement",e[e.WhileStatement=158]="WhileStatement",e[e.TryStatement=159]="TryStatement",e[e.LabeledStatement=160]="LabeledStatement",e[e.DoStatement=161]="DoStatement",e[e.DebuggerStatement=162]="DebuggerStatement",e[e.WithStatement=163]="WithStatement",e[e.PlusExpression=164]="PlusExpression",e[e.NegateExpression=165]="NegateExpression",e[e.BitwiseNotExpression=166]="BitwiseNotExpression",e[e.LogicalNotExpression=167]="LogicalNotExpression",e[e.PreIncrementExpression=168]="PreIncrementExpression",e[e.PreDecrementExpression=169]="PreDecrementExpression",e[e.DeleteExpression=170]="DeleteExpression",e[e.TypeOfExpression=171]="TypeOfExpression",e[e.VoidExpression=172]="VoidExpression",e[e.CommaExpression=173]="CommaExpression",e[e.AssignmentExpression=174]="AssignmentExpression",e[e.AddAssignmentExpression=175]="AddAssignmentExpression",e[e.SubtractAssignmentExpression=176]="SubtractAssignmentExpression",e[e.MultiplyAssignmentExpression=177]="MultiplyAssignmentExpression",e[e.DivideAssignmentExpression=178]="DivideAssignmentExpression",e[e.ModuloAssignmentExpression=179]="ModuloAssignmentExpression",e[e.AndAssignmentExpression=180]="AndAssignmentExpression",e[e.ExclusiveOrAssignmentExpression=181]="ExclusiveOrAssignmentExpression",e[e.OrAssignmentExpression=182]="OrAssignmentExpression",e[e.LeftShiftAssignmentExpression=183]="LeftShiftAssignmentExpression",e[e.SignedRightShiftAssignmentExpression=184]="SignedRightShiftAssignmentExpression",e[e.UnsignedRightShiftAssignmentExpression=185]="UnsignedRightShiftAssignmentExpression",e[e.ConditionalExpression=186]="ConditionalExpression",e[e.LogicalOrExpression=187]="LogicalOrExpression",e[e.LogicalAndExpression=188]="LogicalAndExpression",e[e.BitwiseOrExpression=189]="BitwiseOrExpression",e[e.BitwiseExclusiveOrExpression=190]="BitwiseExclusiveOrExpression",e[e.BitwiseAndExpression=191]="BitwiseAndExpression",e[e.EqualsWithTypeConversionExpression=192]="EqualsWithTypeConversionExpression",e[e.NotEqualsWithTypeConversionExpression=193]="NotEqualsWithTypeConversionExpression",e[e.EqualsExpression=194]="EqualsExpression",e[e.NotEqualsExpression=195]="NotEqualsExpression",e[e.LessThanExpression=196]="LessThanExpression",e[e.GreaterThanExpression=197]="GreaterThanExpression",e[e.LessThanOrEqualExpression=198]="LessThanOrEqualExpression",e[e.GreaterThanOrEqualExpression=199]="GreaterThanOrEqualExpression",e[e.InstanceOfExpression=200]="InstanceOfExpression",e[e.InExpression=201]="InExpression",e[e.LeftShiftExpression=202]="LeftShiftExpression",e[e.SignedRightShiftExpression=203]="SignedRightShiftExpression",e[e.UnsignedRightShiftExpression=204]="UnsignedRightShiftExpression",e[e.MultiplyExpression=205]="MultiplyExpression",e[e.DivideExpression=206]="DivideExpression",e[e.ModuloExpression=207]="ModuloExpression",e[e.AddExpression=208]="AddExpression",e[e.SubtractExpression=209]="SubtractExpression",e[e.PostIncrementExpression=210]="PostIncrementExpression",e[e.PostDecrementExpression=211]="PostDecrementExpression",e[e.MemberAccessExpression=212]="MemberAccessExpression",e[e.InvocationExpression=213]="InvocationExpression",e[e.ArrayLiteralExpression=214]="ArrayLiteralExpression",e[e.ObjectLiteralExpression=215]="ObjectLiteralExpression",e[e.ObjectCreationExpression=216]="ObjectCreationExpression",e[e.ParenthesizedExpression=217]="ParenthesizedExpression",e[e.ParenthesizedArrowFunctionExpression=218]="ParenthesizedArrowFunctionExpression",e[e.SimpleArrowFunctionExpression=219]="SimpleArrowFunctionExpression",e[e.CastExpression=220]="CastExpression",e[e.ElementAccessExpression=221]="ElementAccessExpression",e[e.FunctionExpression=222]="FunctionExpression",e[e.OmittedExpression=223]="OmittedExpression",e[e.VariableDeclaration=224]="VariableDeclaration",e[e.VariableDeclarator=225]="VariableDeclarator",e[e.ArgumentList=226]="ArgumentList",e[e.ParameterList=227]="ParameterList",e[e.TypeArgumentList=228]="TypeArgumentList",e[e.TypeParameterList=229]="TypeParameterList",e[e.ExtendsHeritageClause=230]="ExtendsHeritageClause",e[e.ImplementsHeritageClause=231]="ImplementsHeritageClause",e[e.EqualsValueClause=232]="EqualsValueClause",e[e.CaseSwitchClause=233]="CaseSwitchClause",e[e.DefaultSwitchClause=234]="DefaultSwitchClause",e[e.ElseClause=235]="ElseClause",e[e.CatchClause=236]="CatchClause",e[e.FinallyClause=237]="FinallyClause",e[e.TypeParameter=238]="TypeParameter",e[e.Constraint=239]="Constraint",e[e.SimplePropertyAssignment=240]="SimplePropertyAssignment",e[e.FunctionPropertyAssignment=241]="FunctionPropertyAssignment",e[e.Parameter=242]="Parameter",e[e.EnumElement=243]="EnumElement",e[e.TypeAnnotation=244]="TypeAnnotation",e[e.ExternalModuleReference=245]="ExternalModuleReference",e[e.ModuleNameModuleReference=246]="ModuleNameModuleReference",e[e.Last=e.ModuleNameModuleReference]="Last",e[e.FirstStandardKeyword=e.BreakKeyword]="FirstStandardKeyword",e[e.LastStandardKeyword=e.WithKeyword]="LastStandardKeyword",e[e.FirstFutureReservedKeyword=e.ClassKeyword]="FirstFutureReservedKeyword",e[e.LastFutureReservedKeyword=e.SuperKeyword]="LastFutureReservedKeyword",e[e.FirstFutureReservedStrictKeyword=e.ImplementsKeyword]="FirstFutureReservedStrictKeyword",e[e.LastFutureReservedStrictKeyword=e.YieldKeyword]="LastFutureReservedStrictKeyword",e[e.FirstTypeScriptKeyword=e.AnyKeyword]="FirstTypeScriptKeyword",e[e.LastTypeScriptKeyword=e.StringKeyword]="LastTypeScriptKeyword",e[e.FirstKeyword=e.FirstStandardKeyword]="FirstKeyword",e[e.LastKeyword=e.LastTypeScriptKeyword]="LastKeyword",e[e.FirstToken=e.ErrorToken]="FirstToken",e[e.LastToken=e.SlashEqualsToken]="LastToken",e[e.FirstPunctuation=e.OpenBraceToken]="FirstPunctuation",e[e.LastPunctuation=e.SlashEqualsToken]="LastPunctuation",e[e.FirstFixedWidth=e.FirstKeyword]="FirstFixedWidth",e[e.LastFixedWidth=e.LastPunctuation]="LastFixedWidth",e[e.FirstTrivia=e.WhitespaceTrivia]="FirstTrivia",e[e.LastTrivia=e.SkippedTokenTrivia]="LastTrivia"})(e.SyntaxKind||(e.SyntaxKind={}));var t=e.SyntaxKind})(r||(r={}));var r;(function(e){(function(e){function i(e){return t.hasOwnProperty(e)?t[e]:0}function s(e){var t=n[e];return t!==undefined?t:null}function o(e){return e>=9&&e<=119}function u(e){return e>=15&&e<=69}function a(e){return e>=15&&e<=43}function f(e){return e>=44&&e<=50}function l(e){return e>=51&&e<=59}function c(e){return e>=70&&e<=119}function h(e){return d(e)!==0}function p(e){return m(e)!==0}function d(e){switch(e){case 89:return 164;case 90:return 165;case 102:return 166;case 101:return 167;case 93:return 168;case 94:return 169;default:return 0}}function v(e){switch(e){case 93:return 210;case 94:return 211;default:return 0}}function m(e){switch(e){case 91:return 205;case 118:return 206;case 92:return 207;case 89:return 208;case 90:return 209;case 95:return 202;case 96:return 203;case 97:return 204;case 80:return 196;case 81:return 197;case 82:return 198;case 83:return 199;case 30:return 200;case 29:return 201;case 84:return 192;case 86:return 193;case 87:return 194;case 88:return 195;case 98:return 191;case 100:return 190;case 99:return 189;case 103:return 188;case 104:return 187;case 116:return 182;case 115:return 180;case 117:return 181;case 112:return 183;case 113:return 184;case 114:return 185;case 108:return 175;case 109:return 176;case 110:return 177;case 119:return 178;case 111:return 179;case 107:return 174;case 79:return 173;default:return 0}}function g(e){switch(e){case 205:return 91;case 206:return 118;case 207:return 92;case 208:return 89;case 209:return 90;case 202:return 95;case 203:return 96;case 204:return 97;case 196:return 80;case 197:return 81;case 198:return 82;case 199:return 83;case 200:return 30;case 201:return 29;case 192:return 84;case 193:return 86;case 194:return 87;case 195:return 88;case 191:return 98;case 190:return 100;case 189:return 99;case 188:return 103;case 187:return 104;case 182:return 116;case 180:return 115;case 181:return 117;case 183:return 112;case 184:return 113;case 185:return 114;case 175:return 108;case 176:return 109;case 177:return 110;case 178:return 119;case 179:return 111;case 174:return 107;case 173:return 79;default:return 0}}function y(e){switch(e){case 118:case 119:return!0;default:return!1}}function b(e){switch(e){case 118:case 119:case 12:return!0;default:return!1}}var t={any:60,"boolean":61,"break":15,"case":16,"catch":17,"class":44,"continue":18,"const":45,constructor:62,"debugger":19,declare:63,"default":20,"delete":21,"do":22,"else":23,"enum":46,"export":47,"extends":48,"false":24,"finally":25,"for":26,"function":27,get:64,"if":28,"implements":51,"import":49,"in":29,"instanceof":30,"interface":52,let:53,module:65,"new":31,"null":32,number:67,"package":54,"private":55,"protected":56,"public":57,require:66,"return":33,set:68,"static":58,string:69,"super":50,"switch":34,"this":35,"throw":36,"true":37,"try":38,"typeof":39,"var":40,"void":41,"while":42,"with":43,yield:59,"{":70,"}":71,"(":72,")":73,"[":74,"]":75,".":76,"...":77,";":78,",":79,"<":80,">":81,"<=":82,">=":83,"==":84,"=>":85,"!=":86,"===":87,"!==":88,"+":89,"-":90,"*":91,"%":92,"++":93,"--":94,"<<":95,">>":96,">>>":97,"&":98,"|":99,"^":100,"!":101,"~":102,"&&":103,"||":104,"?":105,":":106,"=":107,"+=":108,"-=":109,"*=":110,"%=":111,"<<=":112,">>=":113,">>>=":114,"&=":115,"|=":116,"^=":117,"/":118,"/=":119},n=new Array;for(var r in t)t.hasOwnProperty(r)&&(n[t[r]]=r);n[62]="constructor",e.getTokenKind=i,e.getText=s,e.isTokenKind=o,e.isAnyKeyword=u,e.isStandardKeyword=a,e.isFutureReservedKeyword=f,e.isFutureReservedStrictKeyword=l,e.isAnyPunctuation=c,e.isPrefixUnaryExpressionOperatorToken=h,e.isBinaryExpressionOperatorToken=p,e.getPrefixUnaryExpressionFromOperatorToken=d,e.getPostfixUnaryExpressionFromOperatorToken=v,e.getBinaryExpressionFromOperatorToken=m,e.getOperatorTokenFromBinaryExpression=g,e.isAnyDivideToken=y,e.isAnyDivideOrRegularExpressionToken=b})(e.SyntaxFacts||(e.SyntaxFacts={}));var t=e.SyntaxFacts})(r||(r={}));var r;(function(e){var t=e.ArrayUtilities.createArray(127,!1),n=e.ArrayUtilities.createArray(127,!1),r=e.ArrayUtilities.createArray(127,!1),i=e.ArrayUtilities.createArray(127,!1);for(var s=0;s<127;s++)s>=97&&s<=122?(n[s]=!0,r[s]=!0):s>=65&&s<=90||s===95||s===36?(n[s]=!0,r[s]=!0):s>=48&&s<=57&&(r[s]=!0,i[s]=!0);i[46]=!0;for(var o=15;o<=69;o++){var u=e.SyntaxFacts.getText(o);t[u.charCodeAt(0)]=!0}var a=function(){function s(t,n,r,i){typeof i=="undefined"&&(i=e.ArrayUtilities.createArray(2048,0)),this.slidingWindow=new e.SlidingWindow(this,i,0,n.length()),this.fileName=t,this.text=n,this._languageVersion=r}return s.prototype.languageVersion=function(){return this._languageVersion},s.prototype.fetchMoreItems=function(t,n,r,i,s){var o=this.text.length()-n,u=e.MathPrototype.min(o,s);return this.text.copyTo(n,r,i,u),u},s.prototype.currentCharCode=function(){return this.slidingWindow.currentItem(null)},s.prototype.absoluteIndex=function(){return this.slidingWindow.absoluteIndex()},s.prototype.setAbsoluteIndex=function(e){this.slidingWindow.setAbsoluteIndex(e)},s.prototype.scan=function(t,n){var r=t.length,i=this.slidingWindow.absoluteIndex(),s=this.scanTriviaInfo(t,!1),o=this.slidingWindow.absoluteIndex(),u=this.scanSyntaxToken(t,n),a=this.slidingWindow.absoluteIndex(),f=this.scanTriviaInfo(t,!0),l=this.slidingWindow.absoluteIndex(),c=(u&-2147483648)!==0,h=u&2147483647,p=this.createToken(i,s,o,h,a,l,f,c);return r!==t.length?e.Syntax.realizeToken(p):p},s.prototype.createToken=function(t,n,r,i,s,o,u,a){if(!a&&i>=15){if(n===0){if(u===0)return new e.Syntax.FixedWidthTokenWithNoTrivia(i);var f=this.text.substr(t,o-t,!1);return new e.Syntax.FixedWidthTokenWithTrailingTrivia(f,i,u)}if(u===0){var f=this.text.substr(t,o-t,!1);return new e.Syntax.FixedWidthTokenWithLeadingTrivia(f,i,n)}var f=this.text.substr(t,o-t,!1);return new e.Syntax.FixedWidthTokenWithLeadingAndTrailingTrivia(f,i,n,u)}var l=s-r,f=this.text.substr(t,o-t,!1);return n===0?u===0?new e.Syntax.VariableWidthTokenWithNoTrivia(f,i):new e.Syntax.VariableWidthTokenWithTrailingTrivia(f,i,u):u===0?new e.Syntax.VariableWidthTokenWithLeadingTrivia(f,i,n):new e.Syntax.VariableWidthTokenWithLeadingAndTrailingTrivia(f,i,n,u)},s.scanTrivia=function(t,n,r,i){var o=new s(null,t.subText(new e.TextSpan(n,r)),1,s.triviaWindow);return o.scanTrivia(t,n,i)},s.prototype.scanTrivia=function(t,n,r){var i=new Array;for(;;){if(!this.slidingWindow.isAtEndOfSource()){var s=this.currentCharCode();switch(s){case 32:case 160:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8203:case 8239:case 12288:case 9:case 11:case 12:case 65279:i.push(this.scanWhitespaceTrivia(t,n));continue;case 47:var o=this.slidingWindow.peekItemN(1);if(o===47){i.push(this.scanSingleLineCommentTrivia(t,n));continue}if(o===42){i.push(this.scanMultiLineCommentTrivia(t,n));continue}throw e.Errors.invalidOperation();case 13:case 10:case 8233:case 8232:i.push(this.scanLineTerminatorSequenceTrivia(s));if(!r)continue;break;default:throw e.Errors.invalidOperation()}}return e.Syntax.triviaList(i)}},s.prototype.scanTriviaInfo=function(e,t){var n=0,r=0;for(;;){var i=this.currentCharCode();switch(i){case 32:case 160:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8203:case 8239:case 12288:case 9:case 11:case 12:case 65279:this.slidingWindow.moveToNextItem(),n++;continue;case 47:var s=this.slidingWindow.peekItemN(1);if(s===47){r|=2,n+=this.scanSingleLineCommentTriviaLength();continue}if(s===42){r|=2,n+=this.scanMultiLineCommentTriviaLength(e);continue}break;case 13:case 10:case 8233:case 8232:r|=1,n+=this.scanLineTerminatorSequenceLength(i);if(!t)continue}return n<<2|r}},s.prototype.isNewLineCharacter=function(e){switch(e){case 13:case 10:case 8233:case 8232:return!0;default:return!1}},s.prototype.scanWhitespaceTrivia=function(t,n){var r=this.absoluteIndex(),i=0;for(;;){var s=this.currentCharCode();switch(s){case 32:case 160:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8203:case 8239:case 12288:case 9:case 11:case 12:case 65279:this.slidingWindow.moveToNextItem(),i++;continue}break}return e.Syntax.deferredTrivia(4,t,n+r,i)},s.prototype.scanSingleLineCommentTrivia=function(t,n){var r=this.slidingWindow.absoluteIndex(),i=this.scanSingleLineCommentTriviaLength();return e.Syntax.deferredTrivia(7,t,n+r,i)},s.prototype.scanSingleLineCommentTriviaLength=function(){this.slidingWindow.moveToNextItem(),this.slidingWindow.moveToNextItem();var e=2;for(;;){if(this.slidingWindow.isAtEndOfSource()||this.isNewLineCharacter(this.currentCharCode()))return e;this.slidingWindow.moveToNextItem(),e++}},s.prototype.scanMultiLineCommentTrivia=function(t,n){var r=this.absoluteIndex(),i=this.scanMultiLineCommentTriviaLength(null);return e.Syntax.deferredTrivia(6,t,n+r,i)},s.prototype.scanMultiLineCommentTriviaLength=function(t){this.slidingWindow.moveToNextItem(),this.slidingWindow.moveToNextItem();var n=2;for(;;){if(this.slidingWindow.isAtEndOfSource())return t!==null&&t.push(new e.Diagnostic(this.fileName,this.text.lineMap(),this.slidingWindow.absoluteIndex(),0,e.DiagnosticCode.AsteriskSlash_expected,null)),n;var r=this.currentCharCode();if(r===42&&this.slidingWindow.peekItemN(1)===47)return this.slidingWindow.moveToNextItem(),this.slidingWindow.moveToNextItem(),n+=2,n;this.slidingWindow.moveToNextItem(),n++}},s.prototype.scanLineTerminatorSequenceTrivia=function(t){var n=this.slidingWindow.getAndPinAbsoluteIndex(),r=this.scanLineTerminatorSequenceLength(t),i=this.substring(n,n+r,!1);return this.slidingWindow.releaseAndUnpinAbsoluteIndex(n),e.Syntax.trivia(5,i)},s.prototype.scanLineTerminatorSequenceLength=function(e){return this.slidingWindow.moveToNextItem(),e===13&&this.currentCharCode()===10?(this.slidingWindow.moveToNextItem(),2):1},s.prototype.scanSyntaxToken=function(e,t){if(this.slidingWindow.isAtEndOfSource())return 10;var r=this.currentCharCode();switch(r){case 34:case 39:return this.scanStringLiteral(e);case 47:return this.scanSlashToken(t);case 46:return this.scanDotToken(e);case 45:return this.scanMinusToken();case 33:return this.scanExclamationToken();case 61:return this.scanEqualsToken();case 124:return this.scanBarToken();case 42:return this.scanAsteriskToken();case 43:return this.scanPlusToken();case 37:return this.scanPercentToken();case 38:return this.scanAmpersandToken();case 94:return this.scanCaretToken();case 60:return this.scanLessThanToken();case 62:return this.advanceAndSetTokenKind(81);case 44:return this.advanceAndSetTokenKind(79);case 58:return this.advanceAndSetTokenKind(106);case 59:return this.advanceAndSetTokenKind(78);case 126:return this.advanceAndSetTokenKind(102);case 40:return this.advanceAndSetTokenKind(72);case 41:return this.advanceAndSetTokenKind(73);case 123:return this.advanceAndSetTokenKind(70);case 125:return this.advanceAndSetTokenKind(71);case 91:return this.advanceAndSetTokenKind(74);case 93:return this.advanceAndSetTokenKind(75);case 63:return this.advanceAndSetTokenKind(105)}if(i[r])return this.scanNumericLiteral(e);if(n[r]){var s=this.tryFastScanIdentifierOrKeyword(r);if(s!==0)return s}return this.isIdentifierStart(this.peekCharOrUnicodeEscape())?this.slowScanIdentifierOrKeyword(e):this.scanDefaultCharacter(r,e)},s.prototype.isIdentifierStart=function(t){return n[t]?!0:t>127&&e.Unicode.isIdentifierStart(t,this._languageVersion)},s.prototype.isIdentifierPart=function(t){return r[t]?!0:t>127&&e.Unicode.isIdentifierPart(t,this._languageVersion)},s.prototype.tryFastScanIdentifierOrKeyword=function(n){var i=this.slidingWindow,s=i.window,o=i.currentRelativeItemIndex,u=i.windowCount,a=o,f=0;while(a<u){f=s[a];if(!r[f])break;a++}if(a===u)return 0;if(f===92||f>127)return 0;var l,c=a-o;return t[n]?l=e.ScannerUtilities.identifierKind(s,o,c):l=11,i.setAbsoluteIndex(i.absoluteIndex()+c),l},s.prototype.slowScanIdentifierOrKeyword=function(t){var n=this.slidingWindow.absoluteIndex(),r=!1;do{var i=this.scanCharOrUnicodeEscape(t);r=r||i}while(this.isIdentifierPart(this.peekCharOrUnicodeEscape()));var s=this.slidingWindow.absoluteIndex()-n,o=this.text.substr(n,s,!1),u=e.Syntax.massageEscapes(o),a=e.SyntaxFacts.getTokenKind(u);return a>=15&&a<=69?r?a|-2147483648:a:11},s.prototype.scanNumericLiteral=function(e){return this.isHexNumericLiteral()?this.scanHexNumericLiteral():this.isOctalNumericLiteral()?this.scanOctalNumericLiteral(e):this.scanDecimalNumericLiteral(),13},s.prototype.isOctalNumericLiteral=function(){return this.currentCharCode()===48&&e.CharacterInfo.isOctalDigit(this.slidingWindow.peekItemN(1))},s.prototype.scanOctalNumericLiteral=function(t){var n=this.absoluteIndex();while(e.CharacterInfo.isOctalDigit(this.currentCharCode()))this.slidingWindow.moveToNextItem();this.languageVersion()>=1&&t.push(new e.Diagnostic(this.fileName,this.text.lineMap(),n,this.absoluteIndex()-n,e.DiagnosticCode.Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher,null))},s.prototype.scanDecimalDigits=function(){while(e.CharacterInfo.isDecimalDigit(this.currentCharCode()))this.slidingWindow.moveToNextItem()},s.prototype.scanDecimalNumericLiteral=function(){this.scanDecimalDigits(),this.currentCharCode()===46&&this.slidingWindow.moveToNextItem(),this.scanDecimalDigits();var t=this.currentCharCode();if(t===101||t===69){var n=this.slidingWindow.peekItemN(1);if(e.CharacterInfo.isDecimalDigit(n))this.slidingWindow.moveToNextItem(),this.scanDecimalDigits();else if(n===45||n===43){var r=this.slidingWindow.peekItemN(2);e.CharacterInfo.isDecimalDigit(r)&&(this.slidingWindow.moveToNextItem(),this.slidingWindow.moveToNextItem(),this.scanDecimalDigits())}}},s.prototype.scanHexNumericLiteral=function(){this.slidingWindow.moveToNextItem(),this.slidingWindow.moveToNextItem();while(e.CharacterInfo.isHexDigit(this.currentCharCode()))this.slidingWindow.moveToNextItem()},s.prototype.isHexNumericLiteral=function(){if(this.currentCharCode()===48){var t=this.slidingWindow.peekItemN(1);if(t===120||t===88)return t=this.slidingWindow.peekItemN(2),e.CharacterInfo.isHexDigit(t)}return!1},s.prototype.advanceAndSetTokenKind=function(e){return this.slidingWindow.moveToNextItem(),e},s.prototype.scanLessThanToken=function(){return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),82):this.currentCharCode()===60?(this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),112):95):80},s.prototype.scanBarToken=function(){return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),116):this.currentCharCode()===124?(this.slidingWindow.moveToNextItem(),104):99},s.prototype.scanCaretToken=function(){return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),117):100},s.prototype.scanAmpersandToken=function(){this.slidingWindow.moveToNextItem();var e=this.currentCharCode();return e===61?(this.slidingWindow.moveToNextItem(),115):this.currentCharCode()===38?(this.slidingWindow.moveToNextItem(),103):98},s.prototype.scanPercentToken=function(){return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),111):92},s.prototype.scanMinusToken=function(){this.slidingWindow.moveToNextItem();var e=this.currentCharCode();return e===61?(this.slidingWindow.moveToNextItem(),109):e===45?(this.slidingWindow.moveToNextItem(),94):90},s.prototype.scanPlusToken=function(){this.slidingWindow.moveToNextItem();var e=this.currentCharCode();return e===61?(this.slidingWindow.moveToNextItem(),108):e===43?(this.slidingWindow.moveToNextItem(),93):89},s.prototype.scanAsteriskToken=function(){return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),110):91},s.prototype.scanEqualsToken=function(){this.slidingWindow.moveToNextItem();var e=this.currentCharCode();return e===61?(this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),87):84):e===62?(this.slidingWindow.moveToNextItem(),85):107},s.prototype.isDotPrefixedNumericLiteral=function(){if(this.currentCharCode()===46){var t=this.slidingWindow.peekItemN(1);return e.CharacterInfo.isDecimalDigit(t)}return!1},s.prototype.scanDotToken=function(e){return this.isDotPrefixedNumericLiteral()?this.scanNumericLiteral(e):(this.slidingWindow.moveToNextItem(),this.currentCharCode()===46&&this.slidingWindow.peekItemN(1)===46?(this.slidingWindow.moveToNextItem(),this.slidingWindow.moveToNextItem(),77):76)},s.prototype.scanSlashToken=function(e){if(e){var t=this.tryScanRegularExpressionToken();if(t!==0)return t}return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),119):118},s.prototype.tryScanRegularExpressionToken=function(){var e=this.slidingWindow.getAndPinAbsoluteIndex();this.slidingWindow.moveToNextItem();var t=!1,n=!1;for(;;){var i=this.currentCharCode();if(this.isNewLineCharacter(i)||this.slidingWindow.isAtEndOfSource())return this.slidingWindow.rewindToPinnedIndex(e),this.slidingWindow.releaseAndUnpinAbsoluteIndex(e),0;this.slidingWindow.moveToNextItem();if(t){t=!1;continue}switch(i){case 92:t=!0;continue;case 91:n=!0;continue;case 93:n=!1;continue;case 47:if(n)continue;break;default:continue}break}while(r[this.currentCharCode()])this.slidingWindow.moveToNextItem();return this.slidingWindow.releaseAndUnpinAbsoluteIndex(e),12},s.prototype.scanExclamationToken=function(){return this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),this.currentCharCode()===61?(this.slidingWindow.moveToNextItem(),88):86):101},s.prototype.scanDefaultCharacter=function(t,n){var r=this.slidingWindow.absoluteIndex();this.slidingWindow.moveToNextItem();var i=String.fromCharCode(t),s=this.getErrorMessageText(i);return n.push(new e.Diagnostic(this.fileName,this.text.lineMap(),r,1,e.DiagnosticCode.Unexpected_character_0,[s])),9},s.prototype.getErrorMessageText=function(e){return e==="\\"?'"\\"':JSON.stringify(e)},s.prototype.skipEscapeSequence=function(e){var t=this.slidingWindow.getAndPinAbsoluteIndex();this.slidingWindow.moveToNextItem();var n=this.currentCharCode();this.slidingWindow.moveToNextItem();switch(n){case 120:case 117:this.slidingWindow.rewindToPinnedIndex(t);var r=this.scanUnicodeOrHexEscape(e);break;case 13:this.currentCharCode()===10&&this.slidingWindow.moveToNextItem();break;default:}this.slidingWindow.releaseAndUnpinAbsoluteIndex(t)},s.prototype.scanStringLiteral=function(t){var n=this.currentCharCode();this.slidingWindow.moveToNextItem();for(;;){var r=this.currentCharCode();if(r===92)this.skipEscapeSequence(t);else{if(r===n){this.slidingWindow.moveToNextItem();break}if(this.isNewLineCharacter(r)||this.slidingWindow.isAtEndOfSource()){t.push(new e.Diagnostic(this.fileName,this.text.lineMap(),e.MathPrototype.min(this.slidingWindow.absoluteIndex(),this.text.length()),1,e.DiagnosticCode.Missing_close_quote_character,null));break}this.slidingWindow.moveToNextItem()}}return 14},s.prototype.isUnicodeEscape=function(e){if(e===92){var t=this.slidingWindow.peekItemN(1);if(t===117)return!0}return!1},s.prototype.peekCharOrUnicodeEscape=function(){var e=this.currentCharCode();return this.isUnicodeEscape(e)?this.peekUnicodeOrHexEscape():e},s.prototype.peekUnicodeOrHexEscape=function(){var e=this.slidingWindow.getAndPinAbsoluteIndex(),t=this.scanUnicodeOrHexEscape(null);return this.slidingWindow.rewindToPinnedIndex(e),this.slidingWindow.releaseAndUnpinAbsoluteIndex(e),t},s.prototype.scanCharOrUnicodeEscape=function(e){var t=this.currentCharCode();if(t===92){var n=this.slidingWindow.peekItemN(1);if(n===117)return this.scanUnicodeOrHexEscape(e),!0}return this.slidingWindow.moveToNextItem(),!1},s.prototype.scanUnicodeOrHexEscape=function(t){var n=this.slidingWindow.absoluteIndex(),r=this.currentCharCode();this.slidingWindow.moveToNextItem(),r=this.currentCharCode();var i=0;this.slidingWindow.moveToNextItem();var s=r===117?4:2;for(var o=0;o<s;o++){var u=this.currentCharCode();if(!e.CharacterInfo.isHexDigit(u)){if(t!==null){var a=this.slidingWindow.absoluteIndex(),f=this.createIllegalEscapeDiagnostic(n,a);t.push(f)}break}i=(i<<4)+e.CharacterInfo.hexValue(u),this.slidingWindow.moveToNextItem()}return i},s.prototype.substring=function(t,n,r){var i=n-t,s=t-this.slidingWindow.windowAbsoluteStartIndex;return r?e.Collections.DefaultStringTable.addCharArray(this.slidingWindow.window,s,i):e.StringUtilities.fromCharCodeArray(this.slidingWindow.window.slice(s,s+i))},s.prototype.createIllegalEscapeDiagnostic=function(t,n){return new e.Diagnostic(this.fileName,this.text.lineMap(),t,n-t,e.DiagnosticCode.Unrecognized_escape_sequence,null)},s.isValidIdentifier=function(t,n){var r=new s(null,t,n,s.triviaWindow),i=new Array,o=r.scan(i,!1);return i.length===0&&e.SyntaxFacts.isIdentifierNameOrAnyKeyword(o)&&o.width()===t.length()},s.triviaWindow=e.ArrayUtilities.createArray(2048,0),s}();e.Scanner=a})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.identifierKind=function(e,t,n){switch(n){case 2:switch(e[t]){case 100:return e[t+1]===111?22:11;case 105:switch(e[t+1]){case 102:return 28;case 110:return 29;default:return 11};default:return 11};case 3:switch(e[t]){case 102:return e[t+1]===111&&e[t+2]===114?26:11;case 110:return e[t+1]===101&&e[t+2]===119?31:11;case 116:return e[t+1]===114&&e[t+2]===121?38:11;case 118:return e[t+1]===97&&e[t+2]===114?40:11;case 108:return e[t+1]===101&&e[t+2]===116?53:11;case 97:return e[t+1]===110&&e[t+2]===121?60:11;case 103:return e[t+1]===101&&e[t+2]===116?64:11;case 115:return e[t+1]===101&&e[t+2]===116?68:11;default:return 11};case 4:switch(e[t]){case 99:return e[t+1]===97&&e[t+2]===115&&e[t+3]===101?16:11;case 101:switch(e[t+1]){case 108:return e[t+2]===115&&e[t+3]===101?23:11;case 110:return e[t+2]===117&&e[t+3]===109?46:11;default:return 11};case 110:return e[t+1]===117&&e[t+2]===108&&e[t+3]===108?32:11;case 116:switch(e[t+1]){case 104:return e[t+2]===105&&e[t+3]===115?35:11;case 114:return e[t+2]===117&&e[t+3]===101?37:11;default:return 11};case 118:return e[t+1]===111&&e[t+2]===105&&e[t+3]===100?41:11;case 119:return e[t+1]===105&&e[t+2]===116&&e[t+3]===104?43:11;default:return 11};case 5:switch(e[t]){case 98:return e[t+1]===114&&e[t+2]===101&&e[t+3]===97&&e[t+4]===107?15:11;case 99:switch(e[t+1]){case 97:return e[t+2]===116&&e[t+3]===99&&e[t+4]===104?17:11;case 108:return e[t+2]===97&&e[t+3]===115&&e[t+4]===115?44:11;case 111:return e[t+2]===110&&e[t+3]===115&&e[t+4]===116?45:11;default:return 11};case 102:return e[t+1]===97&&e[t+2]===108&&e[t+3]===115&&e[t+4]===101?24:11;case 116:return e[t+1]===104&&e[t+2]===114&&e[t+3]===111&&e[t+4]===119?36:11;case 119:return e[t+1]===104&&e[t+2]===105&&e[t+3]===108&&e[t+4]===101?42:11;case 115:return e[t+1]===117&&e[t+2]===112&&e[t+3]===101&&e[t+4]===114?50:11;case 121:return e[t+1]===105&&e[t+2]===101&&e[t+3]===108&&e[t+4]===100?59:11;default:return 11};case 6:switch(e[t]){case 100:return e[t+1]===101&&e[t+2]===108&&e[t+3]===101&&e[t+4]===116&&e[t+5]===101?21:11;case 114:return e[t+1]===101&&e[t+2]===116&&e[t+3]===117&&e[t+4]===114&&e[t+5]===110?33:11;case 115:switch(e[t+1]){case 119:return e[t+2]===105&&e[t+3]===116&&e[t+4]===99&&e[t+5]===104?34:11;case 116:switch(e[t+2]){case 97:return e[t+3]===116&&e[t+4]===105&&e[t+5]===99?58:11;case 114:return e[t+3]===105&&e[t+4]===110&&e[t+5]===103?69:11;default:return 11};default:return 11};case 116:return e[t+1]===121&&e[t+2]===112&&e[t+3]===101&&e[t+4]===111&&e[t+5]===102?39:11;case 101:return e[t+1]===120&&e[t+2]===112&&e[t+3]===111&&e[t+4]===114&&e[t+5]===116?47:11;case 105:return e[t+1]===109&&e[t+2]===112&&e[t+3]===111&&e[t+4]===114&&e[t+5]===116?49:11;case 112:return e[t+1]===117&&e[t+2]===98&&e[t+3]===108&&e[t+4]===105&&e[t+5]===99?57:11;case 109:return e[t+1]===111&&e[t+2]===100&&e[t+3]===117&&e[t+4]===108&&e[t+5]===101?65:11;case 110:return e[t+1]===117&&e[t+2]===109&&e[t+3]===98&&e[t+4]===101&&e[t+5]===114?67:11;default:return 11};case 7:switch(e[t]){case 100:switch(e[t+1]){case 101:switch(e[t+2]){case 102:return e[t+3]===97&&e[t+4]===117&&e[t+5]===108&&e[t+6]===116?20:11;case 99:return e[t+3]===108&&e[t+4]===97&&e[t+5]===114&&e[t+6]===101?63:11;default:return 11};default:return 11};case 102:return e[t+1]===105&&e[t+2]===110&&e[t+3]===97&&e[t+4]===108&&e[t+5]===108&&e[t+6]===121?25:11;case 101:return e[t+1]===120&&e[t+2]===116&&e[t+3]===101&&e[t+4]===110&&e[t+5]===100&&e[t+6]===115?48:11;case 112:switch(e[t+1]){case 97:return e[t+2]===99&&e[t+3]===107&&e[t+4]===97&&e[t+5]===103&&e[t+6]===101?54:11;case 114:return e[t+2]===105&&e[t+3]===118&&e[t+4]===97&&e[t+5]===116&&e[t+6]===101?55:11;default:return 11};case 98:return e[t+1]===111&&e[t+2]===111&&e[t+3]===108&&e[t+4]===101&&e[t+5]===97&&e[t+6]===110?61:11;case 114:return e[t+1]===101&&e[t+2]===113&&e[t+3]===117&&e[t+4]===105&&e[t+5]===114&&e[t+6]===101?66:11;default:return 11};case 8:switch(e[t]){case 99:return e[t+1]===111&&e[t+2]===110&&e[t+3]===116&&e[t+4]===105&&e[t+5]===110&&e[t+6]===117&&e[t+7]===101?18:11;case 100:return e[t+1]===101&&e[t+2]===98&&e[t+3]===117&&e[t+4]===103&&e[t+5]===103&&e[t+6]===101&&e[t+7]===114?19:11;case 102:return e[t+1]===117&&e[t+2]===110&&e[t+3]===99&&e[t+4]===116&&e[t+5]===105&&e[t+6]===111&&e[t+7]===110?27:11;default:return 11};case 9:switch(e[t]){case 105:return e[t+1]===110&&e[t+2]===116&&e[t+3]===101&&e[t+4]===114&&e[t+5]===102&&e[t+6]===97&&e[t+7]===99&&e[t+8]===101?52:11;case 112:return e[t+1]===114&&e[t+2]===111&&e[t+3]===116&&e[t+4]===101&&e[t+5]===99&&e[t+6]===116&&e[t+7]===101&&e[t+8]===100?56:11;default:return 11};case 10:switch(e[t]){case 105:switch(e[t+1]){case 110:return e[t+2]===115&&e[t+3]===116&&e[t+4]===97&&e[t+5]===110&&e[t+6]===99&&e[t+7]===101&&e[t+8]===111&&e[t+9]===102?30:11;case 109:return e[t+2]===112&&e[t+3]===108&&e[t+4]===101&&e[t+5]===109&&e[t+6]===101&&e[t+7]===110&&e[t+8]===116&&e[t+9]===115?51:11;default:return 11};default:return 11};case 11:return e[t]===99&&e[t+1]===111&&e[t+2]===110&&e[t+3]===115&&e[t+4]===116&&e[t+5]===114&&e[t+6]===117&&e[t+7]===99&&e[t+8]===116&&e[t+9]===111&&e[t+10]===114?62:11;default:return 11}},e}();e.ScannerUtilities=t})(r||(r={}));var r;(function(e){(function(t){function s(e){return o(e,!1)}function o(e,n){if(e===undefined||e===null||e.length===0)return t.emptySeparatedList;if(n)for(var s=0;s<e.length;s++){var o=e[s];s%2===1}return e.length===1?new r(e[0]):new i(e)}var n=function(){function n(){}return n.prototype.kind=function(){return 2},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!1},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!0},n.prototype.toJSON=function(e){return[]},n.prototype.childCount=function(){return 0},n.prototype.nonSeparatorCount=function(){return 0},n.prototype.separatorCount=function(){return 0},n.prototype.toArray=function(){return[]},n.prototype.toNonSeparatorArray=function(){return[]},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.nonSeparatorAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.separatorAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.collectTextElements=function(e){},n.prototype.firstToken=function(){return null},n.prototype.lastToken=function(){return null},n.prototype.fullWidth=function(){return 0},n.prototype.fullText=function(){return""},n.prototype.width=function(){return 0},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return!1},n.prototype.findTokenInternal=function(t,n,r){throw e.Errors.invalidOperation()},n.prototype.insertChildrenInto=function(e,t){},n.prototype.leadingTrivia=function(){return t.emptyTriviaList},n.prototype.trailingTrivia=function(){return t.emptyTriviaList},n.prototype.leadingTriviaWidth=function(){return 0},n.prototype.trailingTriviaWidth=function(){return 0},n}();t.emptySeparatedList=new n;var r=function(){function t(e){this.item=e}return t.prototype.toJSON=function(e){return[this.item]},t.prototype.kind=function(){return 2},t.prototype.isNode=function(){return!1},t.prototype.isToken=function(){return!1},t.prototype.isList=function(){return!1},t.prototype.isSeparatedList=function(){return!0},t.prototype.childCount=function(){return 1},t.prototype.nonSeparatorCount=function(){return 1},t.prototype.separatorCount=function(){return 0},t.prototype.toArray=function(){return[this.item]},t.prototype.toNonSeparatorArray=function(){return[this.item]},t.prototype.childAt=function(t){if(t!==0)throw e.Errors.argumentOutOfRange("index");return this.item},t.prototype.nonSeparatorAt=function(t){if(t!==0)throw e.Errors.argumentOutOfRange("index");return this.item},t.prototype.separatorAt=function(t){throw e.Errors.argumentOutOfRange("index")},t.prototype.collectTextElements=function(e){this.item.collectTextElements(e)},t.prototype.firstToken=function(){return this.item.firstToken()},t.prototype.lastToken=function(){return this.item.lastToken()},t.prototype.fullWidth=function(){return this.item.fullWidth()},t.prototype.width=function(){return this.item.width()},t.prototype.fullText=function(){return this.item.fullText()},t.prototype.leadingTrivia=function(){return this.item.leadingTrivia()},t.prototype.trailingTrivia=function(){return this.item.trailingTrivia()},t.prototype.leadingTriviaWidth=function(){return this.item.leadingTriviaWidth()},t.prototype.trailingTriviaWidth=function(){return this.item.trailingTriviaWidth()},t.prototype.isTypeScriptSpecific=function(){return this.item.isTypeScriptSpecific()},t.prototype.isIncrementallyUnusable=function(){return this.item.isIncrementallyUnusable()},t.prototype.findTokenInternal=function(t,n,r){return this.item.findTokenInternal(new e.PositionedSeparatedList(t,this,r),n,r)},t.prototype.insertChildrenInto=function(e,t){e.splice(t,0,this.item)},t}(),i=function(){function t(e){this._data=0,this.elements=e}return t.prototype.kind=function(){return 2},t.prototype.isToken=function(){return!1},t.prototype.isNode=function(){return!1},t.prototype.isList=function(){return!1},t.prototype.isSeparatedList=function(){return!0},t.prototype.toJSON=function(e){return this.elements},t.prototype.childCount=function(){return this.elements.length},t.prototype.nonSeparatorCount=function(){return e.IntegerUtilities.integerDivide(this.elements.length+1,2)},t.prototype.separatorCount=function(){return e.IntegerUtilities.integerDivide(this.elements.length,2)},t.prototype.toArray=function(){return this.elements.slice(0)},t.prototype.toNonSeparatorArray=function(){var e=[];for(var t=0,n=this.nonSeparatorCount();t<n;t++)e.push(this.nonSeparatorAt(t));return e},t.prototype.childAt=function(t){if(t<0||t>=this.elements.length)throw e.Errors.argumentOutOfRange("index");return this.elements[t]},t.prototype.nonSeparatorAt=function(t){var n=t*2;if(n<0||n>=this.elements.length)throw e.Errors.argumentOutOfRange("index");return this.elements[n]},t.prototype.separatorAt=function(t){var n=t*2+1;if(n<0||n>=this.elements.length)throw e.Errors.argumentOutOfRange("index");return this.elements[n]},t.prototype.firstToken=function(){var e;for(var t=0,n=this.elements.length;t<n;t++)if(t%2===0){var r=this.elements[t];e=r.firstToken();if(e!==null)return e}else{e=this.elements[t];if(e.width()>0)return e}return null},t.prototype.lastToken=function(){var e;for(var t=this.elements.length-1;t>=0;t--)if(t%2===0){var n=this.elements[t];e=n.lastToken();if(e!==null)return e}else{e=this.elements[t];if(e.width()>0)return e}return null},t.prototype.fullText=function(){var e=[];return this.collectTextElements(e),e.join("")},t.prototype.isTypeScriptSpecific=function(){for(var e=0,t=this.nonSeparatorCount();e<t;e++)if(this.nonSeparatorAt(e).isTypeScriptSpecific())return!0;return!1},t.prototype.isIncrementallyUnusable=function(){return(this.data()&2)!==0},t.prototype.fullWidth=function(){return this.data()>>>3},t.prototype.width=function(){var e=this.fullWidth();return e-this.leadingTriviaWidth()-this.trailingTriviaWidth()},t.prototype.leadingTrivia=function(){return this.firstToken().leadingTrivia()},t.prototype.trailingTrivia=function(){return this.lastToken().trailingTrivia()},t.prototype.leadingTriviaWidth=function(){return this.firstToken().leadingTriviaWidth()},t.prototype.trailingTriviaWidth=function(){return this.lastToken().trailingTriviaWidth()},t.prototype.computeData=function(){var e=0,t=!1;for(var n=0,r=this.elements.length;n<r;n++){var i=this.elements[n],s=i.fullWidth();e+=s,t=t||i.isIncrementallyUnusable()}return e<<3|(t?2:0)|1},t.prototype.data=function(){return(this._data&1)===0&&(this._data=this.computeData()),this._data},t.prototype.findTokenInternal=function(t,n,r){t=new e.PositionedSeparatedList(t,this,r);for(var i=0,s=this.elements.length;i<s;i++){var o=this.elements[i],u=o.fullWidth();if(n<u)return o.findTokenInternal(t,n,r);n-=u,r+=u}throw e.Errors.invalidOperation()},t.prototype.collectTextElements=function(e){for(var t=0,n=this.elements.length;t<n;t++){var r=this.elements[t];r.collectTextElements(e)}},t.prototype.insertChildrenInto=function(e,t){t===0?e.unshift.apply(e,this.elements):e.splice.apply(e,[t,0].concat(this.elements))},t}();t.separatedList=s})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){var t=function(){function t(e,t,n,r){typeof r=="undefined"&&(r=-1),this.source=e,this.window=t,this.defaultValue=n,this.sourceLength=r,this.windowCount=0,this.windowAbsoluteStartIndex=0,this.currentRelativeItemIndex=0,this._pinCount=0,this.firstPinnedAbsoluteIndex=-1}return t.prototype.windowAbsoluteEndIndex=function(){return this.windowAbsoluteStartIndex+this.windowCount},t.prototype.addMoreItemsToWindow=function(e){if(this.sourceLength>=0&&this.absoluteIndex()>=this.sourceLength)return!1;this.windowCount>=this.window.length&&this.tryShiftOrGrowWindow();var t=this.window.length-this.windowCount,n=this.source.fetchMoreItems(e,this.windowAbsoluteEndIndex(),this.window,this.windowCount,t);return this.windowCount+=n,n>0},t.prototype.tryShiftOrGrowWindow=function(){var t=this.currentRelativeItemIndex>this.window.length>>>1,n=this.firstPinnedAbsoluteIndex===-1||this.firstPinnedAbsoluteIndex>this.windowAbsoluteStartIndex;if(t&&n){var r=this.firstPinnedAbsoluteIndex===-1?this.currentRelativeItemIndex:this.firstPinnedAbsoluteIndex-this.windowAbsoluteStartIndex,i=this.windowCount-r;i>0&&e.ArrayUtilities.copy(this.window,r,this.window,0,i),this.windowAbsoluteStartIndex+=r,this.windowCount-=r,this.currentRelativeItemIndex-=r}else e.ArrayUtilities.grow(this.window,this.window.length*2,this.defaultValue)},t.prototype.absoluteIndex=function(){return this.windowAbsoluteStartIndex+this.currentRelativeItemIndex},t.prototype.isAtEndOfSource=function(){return this.absoluteIndex()>=this.sourceLength},t.prototype.getAndPinAbsoluteIndex=function(){var e=this.absoluteIndex(),t=this._pinCount++;return t===0&&(this.firstPinnedAbsoluteIndex=e),e},t.prototype.releaseAndUnpinAbsoluteIndex=function(e){this._pinCount--,this._pinCount===0&&(this.firstPinnedAbsoluteIndex=-1)},t.prototype.rewindToPinnedIndex=function(e){var t=e-this.windowAbsoluteStartIndex;this.currentRelativeItemIndex=t},t.prototype.currentItem=function(e){return this.currentRelativeItemIndex>=this.windowCount&&!this.addMoreItemsToWindow(e)?this.defaultValue:this.window[this.currentRelativeItemIndex]},t.prototype.peekItemN=function(e){while(this.currentRelativeItemIndex+e>=this.windowCount)if(!this.addMoreItemsToWindow(null))return this.defaultValue;return this.window[this.currentRelativeItemIndex+e]},t.prototype.moveToNextItem=function(){this.currentRelativeItemIndex++},t.prototype.disgardAllItemsFromCurrentIndexOnwards=function(){this.windowCount=this.currentRelativeItemIndex},t.prototype.setAbsoluteIndex=function(e){if(this.absoluteIndex()===e)return;this._pinCount>0,e>=this.windowAbsoluteStartIndex&&e<this.windowAbsoluteEndIndex()?this.currentRelativeItemIndex=e-this.windowAbsoluteStartIndex:(this.windowAbsoluteStartIndex=e,this.windowCount=0,this.currentRelativeItemIndex=0)},t.prototype.pinCount=function(){return this._pinCount},t}();e.SlidingWindow=t})(r||(r={}));var r;(function(e){(function(t){function n(){return t.normalModeFactory.sourceUnit(t.emptyList,t.token(10,{text:""}))}function r(e){var t=e.token();if(e!==null&&e.kind()===11){var n=e.containingNode(),r=n.node();if(r.kind()===121&&r.right===t)return n;if(r.kind()===212&&r.name===t)return n}return e}function i(e){if(e!==null){var n=t.getStandaloneExpression(e),r=n.containingNode();if(r!==null)switch(r.kind()){case 246:return!0;case 121:return!0;default:return s(e)}}return!1}function s(e){var n=t.getStandaloneExpression(e),r=n.containingNode(),i=r.node(),s=n.nodeOrToken();if(i!==null)switch(i.kind()){case 124:return i.type===s;case 220:return i.type===s;case 244:case 230:case 231:case 228:return!0}return!1}function o(t,n){var r=0;for(var i=0,s=t.childCount();i<s;i++){var o=t.childAt(i);if(o===n)return r;o!==null&&(r+=o.fullWidth())}throw e.Errors.invalidOperation()}function u(e,t){var n=0;for(var r=0;r<t;r++){var i=e.childAt(r);i!==null&&(n+=i.fullWidth())}return n}function a(t,n){for(var r=0,i=t.childCount();r<i;r++){var s=t.childAt(r);if(s===n)return r}throw e.Errors.invalidOperation()}function f(e,t){return e===null?t===null:e.structuralEquals(t)}function l(e,t){return e===t?!0:e===null||t===null?!1:e.isToken()?t.isToken()?c(e,t):!1:t.isNode()?f(e,t):!1}function c(e,n){return e===n?!0:e===null||n===null?!1:e.kind()===n.kind()&&e.width()===n.width()&&e.fullWidth()===n.fullWidth()&&e.text()===n.text()&&t.triviaListStructuralEquals(e.leadingTrivia(),n.leadingTrivia())&&t.triviaListStructuralEquals(e.trailingTrivia(),n.trailingTrivia())}function h(e,n){if(e.count()!==n.count())return!1;for(var r=0,i=e.count();r<i;r++)if(!t.triviaStructuralEquals(e.syntaxTriviaAt(r),n.syntaxTriviaAt(r)))return!1;return!0}function p(e,t){return e.kind()===t.kind()&&e.fullWidth()===t.fullWidth()&&e.fullText()===t.fullText()}function d(e,n){if(e.childCount()!==n.childCount())return!1;for(var r=0,i=e.childCount();r<i;r++){var s=e.childAt(r),o=n.childAt(r);if(!t.nodeOrTokenStructuralEquals(s,o))return!1}return!0}function v(e,n){if(e.childCount()!==n.childCount())return!1;for(var r=0,i=e.childCount();r<i;r++){var s=e.childAt(r),o=n.childAt(r);if(!t.nodeOrTokenStructuralEquals(s,o))return!1}return!0}function m(t,n){if(t===n)return!0;if(t===null||n===null)return!1;if(n.kind()!==n.kind())return!1;if(t.isToken())return c(t,n);if(t.isNode())return f(t,n);if(t.isList())return d(t,n);if(t.isSeparatedList())return v(t,n);throw e.Errors.invalidOperation()}function g(e,n){return typeof n=="undefined"&&(n=null),t.identifier(e)}function y(){return t.token(37)}function b(){return t.token(24)}function w(e){return t.token(13,{text:e})}function E(e){return t.token(14,{text:e})}function S(e){return e.kind()===213&&e.expression.kind()===50}function x(e){return e.kind()===149&&S(e.expression)}function T(e){return e.kind()===212&&e.expression.kind()===50}function N(e){return e.kind()===213&&T(e.expression)}function C(e,n,r){return t.normalModeFactory.binaryExpression(174,e,n,r)}function k(e){for(var t=0;t<e.childCount();t++){var n=e.childAt(t);if(n!==null&&n.isToken()){var r=n;if(r.hasSkippedToken()||r.width()===0&&r.kind()!==10)return!0}}return!1}function L(e){if(e&&e.kind()===14){var t=e.text();return t.length<2||t.charCodeAt(t.length-1)!==t.charCodeAt(0)}return!1}function A(e){if(e&&e.kind()===6){var t=e.fullText();return t.length<4||t.substring(t.length-2)!=="*/"}return!1}function O(e,t,n){if(e&&e.isComment()&&n>t){var r=t+e.fullWidth();if(n<r)return!0;if(n===r)return e.kind()===7||A(e)}return!1}function M(e,t){var n=e.findToken(t),r=n.fullStart(),i=null,s=null;n.kind()===10?n.token().hasLeadingTrivia()?i=n.token().leadingTrivia():(n=n.previousToken(),n&&n&&n.token().hasTrailingTrivia()&&(i=n.token().trailingTrivia(),r=n.end())):t<=r+n.token().leadingTriviaWidth()?i=n.token().leadingTrivia():t>=r+n.token().width()&&(i=n.token().trailingTrivia(),r=n.end());if(i)for(var o=0,u=i.count();o<u;o++){var a=i.syntaxTriviaAt(o);if(t<=r)break;if(t<=r+a.fullWidth()&&a.isComment()){s=a;break}r+=a.fullWidth()}return s&&O(s,r,t)}function _(e,t){var n=e.findToken(t);if(n){if(n.kind()===10)return n=n.previousToken(),n&&n.token().trailingTriviaWidth()===0&&L(n.token());if(t>n.start())return t<n.end()&&(n.kind()===14||n.kind()===12)||t<=n.end()&&L(n.token())}return!1}function D(t,n,r){var i=null,s;r?(i=t.token().leadingTrivia(),s=t.fullStart()):(i=t.token().trailingTrivia(),s=t.end());if(i&&i.hasSkippedToken())for(var o=0,u=i.count();o<u;o++){var a=i.syntaxTriviaAt(o),f=a.fullWidth();if(a.isSkippedToken()&&n>=s&&n<=s+f)return new e.PositionedSkippedToken(t,a.skippedToken(),s);s+=f}return null}function P(t,n,r){var i=null,s;r?(i=t.token().leadingTrivia(),s=t.fullStart()+i.fullWidth()):(i=t.token().trailingTrivia(),s=t.fullEnd());if(i&&i.hasSkippedToken())for(var o=i.count()-1;o>=0;o--){var u=i.syntaxTriviaAt(o),a=u.fullWidth();if(u.isSkippedToken()&&n>=s)return new e.PositionedSkippedToken(t,u.skippedToken(),s-a);s-=a}return null}function H(e,t){return D(e,t,!0)}function B(e,t){return D(e,t,!1)}function j(e,t){var n=t<e.start();return D(e,t,n)}function F(e,t){var n=t<e.start();return P(e,t,n)}function I(e,t){while(e&&e.parent()){if(e.parent().kind()===t)return e.parent();e=e.parent()}return null}function q(e,n){return t.getAncestorOfKind(e,n)!==null}function R(t){if(t)switch(t.kind()){case 164:case 165:return t=t.operand,t.isToken()&&e.IntegerUtilities.isInteger(t.text());case 13:var n=t.text();return e.IntegerUtilities.isInteger(n)||e.IntegerUtilities.isHexInteger(n)}return!1}t.emptySourceUnit=n,t.getStandaloneExpression=r,t.isInModuleOrTypeContext=i,t.isInTypeOnlyContext=s,t.childOffset=o,t.childOffsetAt=u,t.childIndex=a,t.nodeStructuralEquals=f,t.nodeOrTokenStructuralEquals=l,t.tokenStructuralEquals=c,t.triviaListStructuralEquals=h,t.triviaStructuralEquals=p,t.listStructuralEquals=d,t.separatedListStructuralEquals=v,t.elementStructuralEquals=m,t.identifierName=g,t.trueExpression=y,t.falseExpression=b,t.numericLiteralExpression=w,t.stringLiteralExpression=E,t.isSuperInvocationExpression=S,t.isSuperInvocationExpressionStatement=x,t.isSuperMemberAccessExpression=T,t.isSuperMemberAccessInvocationExpression=N,t.assignmentExpression=C,t.nodeHasSkippedOrMissingTokens=k,t.isUnterminatedStringLiteral=L,t.isUnterminatedMultilineCommentTrivia=A,t.isEntirelyInsideCommentTrivia=O,t.isEntirelyInsideComment=M,t.isEntirelyInStringOrRegularExpressionLiteral=_,t.findSkippedTokenInLeadingTriviaList=H,t.findSkippedTokenInTrailingTriviaList=B,t.findSkippedTokenInPositionedToken=j,t.findSkippedTokenOnLeft=F,t.getAncestorOfKind=I,t.hasAncestorOfKind=q,t.isIntegerLiteral=R})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){(function(t){var n=function(){function t(){}return t.prototype.sourceUnit=function(t,n){return new e.SourceUnitSyntax(t,n,!1)},t.prototype.externalModuleReference=function(t,n,r,i){return new e.ExternalModuleReferenceSyntax(t,n,r,i,!1)},t.prototype.moduleNameModuleReference=function(t){return new e.ModuleNameModuleReferenceSyntax(t,!1)},t.prototype.importDeclaration=function(t,n,r,i,s,o){return new e.ImportDeclarationSyntax(t,n,r,i,s,o,!1)},t.prototype.exportAssignment=function(t,n,r,i){return new e.ExportAssignmentSyntax(t,n,r,i,!1)},t.prototype.classDeclaration=function(t,n,r,i,s,o,u,a){return new e.ClassDeclarationSyntax(t,n,r,i,s,o,u,a,!1)},t.prototype.interfaceDeclaration=function(t,n,r,i,s,o){return new e.InterfaceDeclarationSyntax(t,n,r,i,s,o,!1)},t.prototype.heritageClause=function(t,n,r){return new e.HeritageClauseSyntax(t,n,r,!1)},t.prototype.moduleDeclaration=function(t,n,r,i,s,o,u){return new e.ModuleDeclarationSyntax(t,n,r,i,s,o,u,!1)},t.prototype.functionDeclaration=function(t,n,r,i,s,o){return new e.FunctionDeclarationSyntax(t,n,r,i,s,o,!1)},t.prototype.variableStatement=function(t,n,r){return new e.VariableStatementSyntax(t,n,r,!1)},t.prototype.variableDeclaration=function(t,n){return new e.VariableDeclarationSyntax(t,n,!1)},t.prototype.variableDeclarator=function(t,n,r){return new e.VariableDeclaratorSyntax(t,n,r,!1)},t.prototype.equalsValueClause=function(t,n){return new e.EqualsValueClauseSyntax(t,n,!1)},t.prototype.prefixUnaryExpression=function(t,n,r){return new e.PrefixUnaryExpressionSyntax(t,n,r,!1)},t.prototype.arrayLiteralExpression=function(t,n,r){return new e.ArrayLiteralExpressionSyntax(t,n,r,!1)},t.prototype.omittedExpression=function(){return new e.OmittedExpressionSyntax(!1)},t.prototype.parenthesizedExpression=function(t,n,r){return new e.ParenthesizedExpressionSyntax(t,n,r,!1)},t.prototype.simpleArrowFunctionExpression=function(t,n,r,i){return new e.SimpleArrowFunctionExpressionSyntax(t,n,r,i,!1)},t.prototype.parenthesizedArrowFunctionExpression=function(t,n,r,i){return new e.ParenthesizedArrowFunctionExpressionSyntax(t,n,r,i,!1)},t.prototype.qualifiedName=function(t,n,r){return new e.QualifiedNameSyntax(t,n,r,!1)},t.prototype.typeArgumentList=function(t,n,r){return new e.TypeArgumentListSyntax(t,n,r,!1)},t.prototype.constructorType=function(t,n,r,i,s){return new e.ConstructorTypeSyntax(t,n,r,i,s,!1)},t.prototype.functionType=function(t,n,r,i){return new e.FunctionTypeSyntax(t,n,r,i,!1)},t.prototype.objectType=function(t,n,r){return new e.ObjectTypeSyntax(t,n,r,!1)},t.prototype.arrayType=function(t,n,r){return new e.ArrayTypeSyntax(t,n,r,!1)},t.prototype.genericType=function(t,n){return new e.GenericTypeSyntax(t,n,!1)},t.prototype.typeQuery=function(t,n){return new e.TypeQuerySyntax(t,n,!1)},t.prototype.typeAnnotation=function(t,n){return new e.TypeAnnotationSyntax(t,n,!1)},t.prototype.block=function(t,n,r){return new e.BlockSyntax(t,n,r,!1)},t.prototype.parameter=function(t,n,r,i,s,o){return new e.ParameterSyntax(t,n,r,i,s,o,!1)},t.prototype.memberAccessExpression=function(t,n,r){return new e.MemberAccessExpressionSyntax(t,n,r,!1)},t.prototype.postfixUnaryExpression=function(t,n,r){return new e.PostfixUnaryExpressionSyntax(t,n,r,!1)},t.prototype.elementAccessExpression=function(t,n,r,i){return new e.ElementAccessExpressionSyntax(t,n,r,i,!1)},t.prototype.invocationExpression=function(t,n){return new e.InvocationExpressionSyntax(t,n,!1)},t.prototype.argumentList=function(t,n,r,i){return new e.ArgumentListSyntax(t,n,r,i,!1)},t.prototype.binaryExpression=function(t,n,r,i){return new e.BinaryExpressionSyntax(t,n,r,i,!1)},t.prototype.conditionalExpression=function(t,n,r,i,s){return new e.ConditionalExpressionSyntax(t,n,r,i,s,!1)},t.prototype.constructSignature=function(t,n){return new e.ConstructSignatureSyntax(t,n,!1)},t.prototype.methodSignature=function(t,n,r){return new e.MethodSignatureSyntax(t,n,r,!1)},t.prototype.indexSignature=function(t,n,r,i){return new e.IndexSignatureSyntax(t,n,r,i,!1)},t.prototype.propertySignature=function(t,n,r){return new e.PropertySignatureSyntax(t,n,r,!1)},t.prototype.callSignature=function(t,n,r){return new e.CallSignatureSyntax(t,n,r,!1)},t.prototype.parameterList=function(t,n,r){return new e.ParameterListSyntax(t,n,r,!1)},t.prototype.typeParameterList=function(t,n,r){return new e.TypeParameterListSyntax(t,n,r,!1)},t.prototype.typeParameter=function(t,n){return new e.TypeParameterSyntax(t,n,!1)},t.prototype.constraint=function(t,n){return new e.ConstraintSyntax(t,n,!1)},t.prototype.elseClause=function(t,n){return new e.ElseClauseSyntax(t,n,!1)},t.prototype.ifStatement=function(t,n,r,i,s,o){return new e.IfStatementSyntax(t,n,r,i,s,o,!1)},t.prototype.expressionStatement=function(t,n){return new e.ExpressionStatementSyntax(t,n,!1)},t.prototype.constructorDeclaration=function(t,n,r,i,s){return new e.ConstructorDeclarationSyntax(t,n,r,i,s,!1)},t.prototype.memberFunctionDeclaration=function(t,n,r,i,s){return new e.MemberFunctionDeclarationSyntax(t,n,r,i,s,!1)},t.prototype.getAccessor=function(t,n,r,i,s,o){return new e.GetAccessorSyntax(t,n,r,i,s,o,!1)},t.prototype.setAccessor=function(t,n,r,i,s){return new e.SetAccessorSyntax(t,n,r,i,s,!1)},t.prototype.memberVariableDeclaration=function(t,n,r){return new e.MemberVariableDeclarationSyntax(t,n,r,!1)},t.prototype.indexMemberDeclaration=function(t,n,r){return new e.IndexMemberDeclarationSyntax(t,n,r,!1)},t.prototype.throwStatement=function(t,n,r){return new e.ThrowStatementSyntax(t,n,r,!1)},t.prototype.returnStatement=function(t,n,r){return new e.ReturnStatementSyntax(t,n,r,!1)},t.prototype.objectCreationExpression=function(t,n,r){return new e.ObjectCreationExpressionSyntax(t,n,r,!1)},t.prototype.switchStatement=function(t,n,r,i,s,o,u){return new e.SwitchStatementSyntax(t,n,r,i,s,o,u,!1)},t.prototype.caseSwitchClause=function(t,n,r,i){return new e.CaseSwitchClauseSyntax(t,n,r,i,!1)},t.prototype.defaultSwitchClause=function(t,n,r){return new e.DefaultSwitchClauseSyntax(t,n,r,!1)},t.prototype.breakStatement=function(t,n,r){return new e.BreakStatementSyntax(t,n,r,!1)},t.prototype.continueStatement=function(t,n,r){return new e.ContinueStatementSyntax(t,n,r,!1)},t.prototype.forStatement=function(t,n,r,i,s,o,u,a,f,l){return new e.ForStatementSyntax(t,n,r,i,s,o,u,a,f,l,!1)},t.prototype.forInStatement=function(t,n,r,i,s,o,u,a){return new e.ForInStatementSyntax(t,n,r,i,s,o,u,a,!1)},t.prototype.whileStatement=function(t,n,r,i,s){return new e.WhileStatementSyntax(t,n,r,i,s,!1)},t.prototype.withStatement=function(t,n,r,i,s){return new e.WithStatementSyntax(t,n,r,i,s,!1)},t.prototype.enumDeclaration=function(t,n,r,i,s,o){return new e.EnumDeclarationSyntax(t,n,r,i,s,o,!1)},t.prototype.enumElement=function(t,n){return new e.EnumElementSyntax(t,n,!1)},t.prototype.castExpression=function(t,n,r,i){return new e.CastExpressionSyntax(t,n,r,i,!1)},t.prototype.objectLiteralExpression=function(t,n,r){return new e.ObjectLiteralExpressionSyntax(t,n,r,!1)},t.prototype.simplePropertyAssignment=function(t,n,r){return new e.SimplePropertyAssignmentSyntax(t,n,r,!1)},t.prototype.functionPropertyAssignment=function(t,n,r){return new e.FunctionPropertyAssignmentSyntax(t,n,r,!1)},t.prototype.functionExpression=function(t,n,r,i){return new e.FunctionExpressionSyntax(t,n,r,i,!1)},t.prototype.emptyStatement=function(t){return new e.EmptyStatementSyntax(t,!1)},t.prototype.tryStatement=function(t,n,r,i){return new e.TryStatementSyntax(t,n,r,i,!1)},t.prototype.catchClause=function(t,n,r,i,s,o){return new e.CatchClauseSyntax(t,n,r,i,s,o,!1)},t.prototype.finallyClause=function(t,n){return new e.FinallyClauseSyntax(t,n,!1)},t.prototype.labeledStatement=function(t,n,r){return new e.LabeledStatementSyntax(t,n,r,!1)},t.prototype.doStatement=function(t,n,r,i,s,o,u){return new e.DoStatementSyntax(t,n,r,i,s,o,u,!1)},t.prototype.typeOfExpression=function(t,n){return new e.TypeOfExpressionSyntax(t,n,!1)},t.prototype.deleteExpression=function(t,n){return new e.DeleteExpressionSyntax(t,n,!1)},t.prototype.voidExpression=function(t,n){return new e.VoidExpressionSyntax(t,n,!1)},t.prototype.debuggerStatement=function(t,n){return new e.DebuggerStatementSyntax(t,n,!1)},t}();t.NormalModeFactory=n;var r=function(){function t(){}return t.prototype.sourceUnit=function(t,n){return new e.SourceUnitSyntax(t,n,!0)},t.prototype.externalModuleReference=function(t,n,r,i){return new e.ExternalModuleReferenceSyntax(t,n,r,i,!0)},t.prototype.moduleNameModuleReference=function(t){return new e.ModuleNameModuleReferenceSyntax(t,!0)},t.prototype.importDeclaration=function(t,n,r,i,s,o){return new e.ImportDeclarationSyntax(t,n,r,i,s,o,!0)},t.prototype.exportAssignment=function(t,n,r,i){return new e.ExportAssignmentSyntax(t,n,r,i,!0)},t.prototype.classDeclaration=function(t,n,r,i,s,o,u,a){return new e.ClassDeclarationSyntax(t,n,r,i,s,o,u,a,!0)},t.prototype.interfaceDeclaration=function(t,n,r,i,s,o){return new e.InterfaceDeclarationSyntax(t,n,r,i,s,o,!0)},t.prototype.heritageClause=function(t,n,r){return new e.HeritageClauseSyntax(t,n,r,!0)},t.prototype.moduleDeclaration=function(t,n,r,i,s,o,u){return new e.ModuleDeclarationSyntax(t,n,r,i,s,o,u,!0)},t.prototype.functionDeclaration=function(t,n,r,i,s,o){return new e.FunctionDeclarationSyntax(t,n,r,i,s,o,!0)},t.prototype.variableStatement=function(t,n,r){return new e.VariableStatementSyntax(t,n,r,!0)},t.prototype.variableDeclaration=function(t,n){return new e.VariableDeclarationSyntax(t,n,!0)},t.prototype.variableDeclarator=function(t,n,r){return new e.VariableDeclaratorSyntax(t,n,r,!0)},t.prototype.equalsValueClause=function(t,n){return new e.EqualsValueClauseSyntax(t,n,!0)},t.prototype.prefixUnaryExpression=function(t,n,r){return new e.PrefixUnaryExpressionSyntax(t,n,r,!0)},t.prototype.arrayLiteralExpression=function(t,n,r){return new e.ArrayLiteralExpressionSyntax(t,n,r,!0)},t.prototype.omittedExpression=function(){return new e.OmittedExpressionSyntax(!0)},t.prototype.parenthesizedExpression=function(t,n,r){return new e.ParenthesizedExpressionSyntax(t,n,r,!0)},t.prototype.simpleArrowFunctionExpression=function(t,n,r,i){return new e.SimpleArrowFunctionExpressionSyntax(t,n,r,i,!0)},t.prototype.parenthesizedArrowFunctionExpression=function(t,n,r,i){return new e.ParenthesizedArrowFunctionExpressionSyntax(t,n,r,i,!0)},t.prototype.qualifiedName=function(t,n,r){return new e.QualifiedNameSyntax(t,n,r,!0)},t.prototype.typeArgumentList=function(t,n,r){return new e.TypeArgumentListSyntax(t,n,r,!0)},t.prototype.constructorType=function(t,n,r,i,s){return new e.ConstructorTypeSyntax(t,n,r,i,s,!0)},t.prototype.functionType=function(t,n,r,i){return new e.FunctionTypeSyntax(t,n,r,i,!0)},t.prototype.objectType=function(t,n,r){return new e.ObjectTypeSyntax(t,n,r,!0)},t.prototype.arrayType=function(t,n,r){return new e.ArrayTypeSyntax(t,n,r,!0)},t.prototype.genericType=function(t,n){return new e.GenericTypeSyntax(t,n,!0)},t.prototype.typeQuery=function(t,n){return new e.TypeQuerySyntax(t,n,!0)},t.prototype.typeAnnotation=function(t,n){return new e.TypeAnnotationSyntax(t,n,!0)},t.prototype.block=function(t,n,r){return new e.BlockSyntax(t,n,r,!0)},t.prototype.parameter=function(t,n,r,i,s,o){return new e.ParameterSyntax(t,n,r,i,s,o,!0)},t.prototype.memberAccessExpression=function(t,n,r){return new e.MemberAccessExpressionSyntax(t,n,r,!0)},t.prototype.postfixUnaryExpression=function(t,n,r){return new e.PostfixUnaryExpressionSyntax(t,n,r,!0)},t.prototype.elementAccessExpression=function(t,n,r,i){return new e.ElementAccessExpressionSyntax(t,n,r,i,!0)},t.prototype.invocationExpression=function(t,n){return new e.InvocationExpressionSyntax(t,n,!0)},t.prototype.argumentList=function(t,n,r,i){return new e.ArgumentListSyntax(t,n,r,i,!0)},t.prototype.binaryExpression=function(t,n,r,i){return new e.BinaryExpressionSyntax(t,n,r,i,!0)},t.prototype.conditionalExpression=function(t,n,r,i,s){return new e.ConditionalExpressionSyntax(t,n,r,i,s,!0)},t.prototype.constructSignature=function(t,n){return new e.ConstructSignatureSyntax(t,n,!0)},t.prototype.methodSignature=function(t,n,r){return new e.MethodSignatureSyntax(t,n,r,!0)},t.prototype.indexSignature=function(t,n,r,i){return new e.IndexSignatureSyntax(t,n,r,i,!0)},t.prototype.propertySignature=function(t,n,r){return new e.PropertySignatureSyntax(t,n,r,!0)},t.prototype.callSignature=function(t,n,r){return new e.CallSignatureSyntax(t,n,r,!0)},t.prototype.parameterList=function(t,n,r){return new e.ParameterListSyntax(t,n,r,!0)},t.prototype.typeParameterList=function(t,n,r){return new e.TypeParameterListSyntax(t,n,r,!0)},t.prototype.typeParameter=function(t,n){return new e.TypeParameterSyntax(t,n,!0)},t.prototype.constraint=function(t,n){return new e.ConstraintSyntax(t,n,!0)},t.prototype.elseClause=function(t,n){return new e.ElseClauseSyntax(t,n,!0)},t.prototype.ifStatement=function(t,n,r,i,s,o){return new e.IfStatementSyntax(t,n,r,i,s,o,!0)},t.prototype.expressionStatement=function(t,n){return new e.ExpressionStatementSyntax(t,n,!0)},t.prototype.constructorDeclaration=function(t,n,r,i,s){return new e.ConstructorDeclarationSyntax(t,n,r,i,s,!0)},t.prototype.memberFunctionDeclaration=function(t,n,r,i,s){return new e.MemberFunctionDeclarationSyntax(t,n,r,i,s,!0)},t.prototype.getAccessor=function(t,n,r,i,s,o){return new e.GetAccessorSyntax(t,n,r,i,s,o,!0)},t.prototype.setAccessor=function(t,n,r,i,s){return new e.SetAccessorSyntax(t,n,r,i,s,!0)},t.prototype.memberVariableDeclaration=function(t,n,r){return new e.MemberVariableDeclarationSyntax(t,n,r,!0)},t.prototype.indexMemberDeclaration=function(t,n,r){return new e.IndexMemberDeclarationSyntax(t,n,r,!0)},t.prototype.throwStatement=function(t,n,r){return new e.ThrowStatementSyntax(t,n,r,!0)},t.prototype.returnStatement=function(t,n,r){return new e.ReturnStatementSyntax(t,n,r,!0)},t.prototype.objectCreationExpression=function(t,n,r){return new e.ObjectCreationExpressionSyntax(t,n,r,!0)},t.prototype.switchStatement=function(t,n,r,i,s,o,u){return new e.SwitchStatementSyntax(t,n,r,i,s,o,u,!0)},t.prototype.caseSwitchClause=function(t,n,r,i){return new e.CaseSwitchClauseSyntax(t,n,r,i,!0)},t.prototype.defaultSwitchClause=function(t,n,r){return new e.DefaultSwitchClauseSyntax(t,n,r,!0)},t.prototype.breakStatement=function(t,n,r){return new e.BreakStatementSyntax(t,n,r,!0)},t.prototype.continueStatement=function(t,n,r){return new e.ContinueStatementSyntax(t,n,r,!0)},t.prototype.forStatement=function(t,n,r,i,s,o,u,a,f,l){return new e.ForStatementSyntax(t,n,r,i,s,o,u,a,f,l,!0)},t.prototype.forInStatement=function(t,n,r,i,s,o,u,a){return new e.ForInStatementSyntax(t,n,r,i,s,o,u,a,!0)},t.prototype.whileStatement=function(t,n,r,i,s){return new e.WhileStatementSyntax(t,n,r,i,s,!0)},t.prototype.withStatement=function(t,n,r,i,s){return new e.WithStatementSyntax(t,n,r,i,s,!0)},t.prototype.enumDeclaration=function(t,n,r,i,s,o){return new e.EnumDeclarationSyntax(t,n,r,i,s,o,!0)},t.prototype.enumElement=function(t,n){return new e.EnumElementSyntax(t,n,!0)},t.prototype.castExpression=function(t,n,r,i){return new e.CastExpressionSyntax(t,n,r,i,!0)},t.prototype.objectLiteralExpression=function(t,n,r){return new e.ObjectLiteralExpressionSyntax(t,n,r,!0)},t.prototype.simplePropertyAssignment=function(t,n,r){return new e.SimplePropertyAssignmentSyntax(t,n,r,!0)},t.prototype.functionPropertyAssignment=function(t,n,r){return new e.FunctionPropertyAssignmentSyntax(t,n,r,!0)},t.prototype.functionExpression=function(t,n,r,i){return new e.FunctionExpressionSyntax(t,n,r,i,!0)},t.prototype.emptyStatement=function(t){return new e.EmptyStatementSyntax(t,!0)},t.prototype.tryStatement=function(t,n,r,i){return new e.TryStatementSyntax(t,n,r,i,!0)},t.prototype.catchClause=function(t,n,r,i,s,o){return new e.CatchClauseSyntax(t,n,r,i,s,o,!0)},t.prototype.finallyClause=function(t,n){return new e.FinallyClauseSyntax(t,n,!0)},t.prototype.labeledStatement=function(t,n,r){return new e.LabeledStatementSyntax(t,n,r,!0)},t.prototype.doStatement=function(t,n,r,i,s,o,u){return new e.DoStatementSyntax(t,n,r,i,s,o,u,!0)},t.prototype.typeOfExpression=function(t,n){return new e.TypeOfExpressionSyntax(t,n,!0)},t.prototype.deleteExpression=function(t,n){return new e.DeleteExpressionSyntax(t,n,!0)},t.prototype.voidExpression=function(t,n){return new e.VoidExpressionSyntax(t,n,!0)},t.prototype.debuggerStatement=function(t,n){return new e.DebuggerStatementSyntax(t,n,!0)},t}();t.StrictModeFactory=r,t.normalModeFactory=new n,t.strictModeFactory=new r})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){(function(e){function t(e){if(e.kind()===149){var t=e,n=t.expression;if(n.kind()===14)return!0}return!1}function n(e){var t=e,n=t.expression,r=n.text();return r==='"use strict"'||r==="'use strict'"}function r(t){var n=t.tokenKind;return n===11||e.isAnyKeyword(n)}e.isDirectivePrologueElement=t,e.isUseStrictDirective=n,e.isIdentifierNameOrAnyKeyword=r})(e.SyntaxFacts||(e.SyntaxFacts={}));var t=e.SyntaxFacts})(r||(r={}));var r;(function(e){(function(t){function s(e){if(e===undefined||e===null||e.length===0)return t.emptyList;if(e.length===1){var n=e[0];return new r(n)}return new i(e)}var n=function(){function n(){}return n.prototype.kind=function(){return 1},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!1},n.prototype.isList=function(){return!0},n.prototype.isSeparatedList=function(){return!1},n.prototype.toJSON=function(e){return[]},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.toArray=function(){return[]},n.prototype.collectTextElements=function(e){},n.prototype.firstToken=function(){return null},n.prototype.lastToken=function(){return null},n.prototype.fullWidth=function(){return 0},n.prototype.width=function(){return 0},n.prototype.leadingTrivia=function(){return t.emptyTriviaList},n.prototype.trailingTrivia=function(){return t.emptyTriviaList},n.prototype.leadingTriviaWidth=function(){return 0},n.prototype.trailingTriviaWidth=function(){return 0},n.prototype.fullText=function(){return""},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return!1},n.prototype.findTokenInternal=function(t,n,r){throw e.Errors.invalidOperation()},n.prototype.insertChildrenInto=function(e,t){},n}();t.EmptySyntaxList=n,t.emptyList=new n;var r=function(){function t(e){this.item=e}return t.prototype.kind=function(){return 1},t.prototype.isToken=function(){return!1},t.prototype.isNode=function(){return!1},t.prototype.isList=function(){return!0},t.prototype.isSeparatedList=function(){return!1},t.prototype.toJSON=function(e){return[this.item]},t.prototype.childCount=function(){return 1},t.prototype.childAt=function(t){if(t!==0)throw e.Errors.argumentOutOfRange("index");return this.item},t.prototype.toArray=function(){return[this.item]},t.prototype.collectTextElements=function(e){this.item.collectTextElements(e)},t.prototype.firstToken=function(){return this.item.firstToken()},t.prototype.lastToken=function(){return this.item.lastToken()},t.prototype.fullWidth=function(){return this.item.fullWidth()},t.prototype.width=function(){return this.item.width()},t.prototype.leadingTrivia=function(){return this.item.leadingTrivia()},t.prototype.trailingTrivia=function(){return this.item.trailingTrivia()},t.prototype.leadingTriviaWidth=function(){return this.item.leadingTriviaWidth()},t.prototype.trailingTriviaWidth=function(){return this.item.trailingTriviaWidth()},t.prototype.fullText=function(){return this.item.fullText()},t.prototype.isTypeScriptSpecific=function(){return this.item.isTypeScriptSpecific()},t.prototype.isIncrementallyUnusable=function(){return this.item.isIncrementallyUnusable()},t.prototype.findTokenInternal=function(t,n,r){return this.item.findTokenInternal(new e.PositionedList(t,this,r),n,r)},t.prototype.insertChildrenInto=function(e,t){e.splice(t,0,this.item)},t}(),i=function(){function t(e){this._data=0,this.nodeOrTokens=e}return t.prototype.kind=function(){return 1},t.prototype.isNode=function(){return!1},t.prototype.isToken=function(){return!1},t.prototype.isList=function(){return!0},t.prototype.isSeparatedList=function(){return!1},t.prototype.toJSON=function(e){return this.nodeOrTokens},t.prototype.childCount=function(){return this.nodeOrTokens.length},t.prototype.childAt=function(t){if(t<0||t>=this.nodeOrTokens.length)throw e.Errors.argumentOutOfRange("index");return this.nodeOrTokens[t]},t.prototype.toArray=function(){return this.nodeOrTokens.slice(0)},t.prototype.collectTextElements=function(e){for(var t=0,n=this.nodeOrTokens.length;t<n;t++){var r=this.nodeOrTokens[t];r.collectTextElements(e)}},t.prototype.firstToken=function(){for(var e=0,t=this.nodeOrTokens.length;e<t;e++){var n=this.nodeOrTokens[e].firstToken();if(n!==null)return n}return null},t.prototype.lastToken=function(){for(var e=this.nodeOrTokens.length-1;e>=0;e--){var t=this.nodeOrTokens[e].lastToken();if(t!==null)return t}return null},t.prototype.fullText=function(){var e=new Array;return this.collectTextElements(e),e.join("")},t.prototype.isTypeScriptSpecific=function(){for(var e=0,t=this.nodeOrTokens.length;e<t;e++)if(this.nodeOrTokens[e].isTypeScriptSpecific())return!0;return!1},t.prototype.isIncrementallyUnusable=function(){return(this.data()&2)!==0},t.prototype.fullWidth=function(){return this.data()>>>3},t.prototype.width=function(){var e=this.fullWidth();return e-this.leadingTriviaWidth()-this.trailingTriviaWidth()},t.prototype.leadingTrivia=function(){return this.firstToken().leadingTrivia()},t.prototype.trailingTrivia=function(){return this.lastToken().trailingTrivia()},t.prototype.leadingTriviaWidth=function(){return this.firstToken().leadingTriviaWidth()},t.prototype.trailingTriviaWidth=function(){return this.lastToken().trailingTriviaWidth()},t.prototype.computeData=function(){var e=0,t=!1;for(var n=0,r=this.nodeOrTokens.length;n<r;n++){var i=this.nodeOrTokens[n];e+=i.fullWidth(),t=t||i.isIncrementallyUnusable()}return e<<3|(t?2:0)|1},t.prototype.data=function(){return(this._data&1)===0&&(this._data=this.computeData()),this._data},t.prototype.findTokenInternal=function(t,n,r){t=new e.PositionedList(t,this,r);for(var i=0,s=this.nodeOrTokens.length;i<s;i++){var o=this.nodeOrTokens[i],u=o.fullWidth();if(n<u)return o.findTokenInternal(t,n,r);n-=u,r+=u}throw e.Errors.invalidOperation()},t.prototype.insertChildrenInto=function(e,t){t===0?e.unshift.apply(e,this.nodeOrTokens):e.splice.apply(e,[t,0].concat(this.nodeOrTokens))},t}();t.list=s})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){var t=function(){function t(e){this._data=e?4:0}return t.prototype.isNode=function(){return!0},t.prototype.isToken=function(){return!1},t.prototype.isList=function(){return!1},t.prototype.isSeparatedList=function(){return!1},t.prototype.kind=function(){throw e.Errors.abstract()},t.prototype.childCount=function(){throw e.Errors.abstract()},t.prototype.childAt=function(t){throw e.Errors.abstract()},t.prototype.firstToken=function(){for(var e=0,t=this.childCount();e<t;e++){var n=this.childAt(e);if(n!==null)if(n.fullWidth()>0||n.kind()===10)return n.firstToken()}return null},t.prototype.lastToken=function(){for(var e=this.childCount()-1;e>=0;e--){var t=this.childAt(e);if(t!==null)if(t.fullWidth()>0||t.kind()===10)return t.lastToken()}return null},t.prototype.insertChildrenInto=function(t,n){for(var r=this.childCount()-1;r>=0;r--){var i=this.childAt(r);if(i!==null)if(i.isNode()||i.isToken())t.splice(n,0,i);else if(i.isList())i.insertChildrenInto(t,n);else{if(!i.isSeparatedList())throw e.Errors.invalidOperation();i.insertChildrenInto(t,n)}}},t.prototype.leadingTrivia=function(){var t=this.firstToken();return t?t.leadingTrivia():e.Syntax.emptyTriviaList},t.prototype.trailingTrivia=function(){var t=this.lastToken();return t?t.trailingTrivia():e.Syntax.emptyTriviaList},t.prototype.toJSON=function(t){var n={kind:e.SyntaxKind[this.kind()],fullWidth:this.fullWidth()};this.isIncrementallyUnusable()&&(n.isIncrementallyUnusable=!0),this.parsedInStrictMode()&&(n.parsedInStrictMode=!0);var r=this;for(var i=0,s=this.childCount();i<s;i++){var o=this.childAt(i);if(o)for(var u in this)if(o===r[u]){n[u]=o;break}}return n},t.prototype.accept=function(t){throw e.Errors.abstract()},t.prototype.fullText=function(){var e=[];return this.collectTextElements(e),e.join("")},t.prototype.collectTextElements=function(e){for(var t=0,n=this.childCount();t<n;t++){var r=this.childAt(t);r!==null&&r.collectTextElements(e)}},t.prototype.replaceToken=function(t,n){return t===n?this:this.accept(new e.SyntaxTokenReplacer(t,n))},t.prototype.withLeadingTrivia=function(e){return this.replaceToken(this.firstToken(),this.firstToken().withLeadingTrivia(e))},t.prototype.withTrailingTrivia=function(e){return this.replaceToken(this.lastToken(),this.lastToken().withTrailingTrivia(e))},t.prototype.hasLeadingTrivia=function(){return this.lastToken().hasLeadingTrivia()},t.prototype.hasTrailingTrivia=function(){return this.lastToken().hasTrailingTrivia()},t.prototype.isTypeScriptSpecific=function(){return!1},t.prototype.isIncrementallyUnusable=function(){return(this.data()&2)!==0},t.prototype.parsedInStrictMode=function(){return(this.data()&4)!==0},t.prototype.fullWidth=function(){return this.data()>>>3},t.prototype.computeData=function(){var e=this.childCount(),t=0,n=0,r=(this._data&2)!==0||e===0;for(var i=0,s=e;i<s;i++){var o=this.childAt(i);o!==null&&(n=o.fullWidth(),t+=n,r||(r=o.isIncrementallyUnusable()))}return t<<3|(r?2:0)|1},t.prototype.data=function(){return(this._data&1)===0&&(this._data|=this.computeData()),this._data},t.prototype.findToken=function(t,n){typeof n=="undefined"&&(n=!1);var r=this.tryGetEndOfFileAt(t);if(r!==null)return r;if(t<0||t>=this.fullWidth())throw e.Errors.argumentOutOfRange("position");var i=this.findTokenInternal(null,t,0);return n?e.Syntax.findSkippedTokenInPositionedToken(i,t)||i:i},t.prototype.tryGetEndOfFileAt=function(t){if(this.kind()===120&&t===this.fullWidth()){var n=this;return new e.PositionedToken(new e.PositionedNode(null,n,0),n.endOfFileToken,n.moduleElements.fullWidth())}return null},t.prototype.findTokenInternal=function(t,n,r){t=new e.PositionedNode(t,this,r);for(var i=0,s=this.childCount();i<s;i++){var o=this.childAt(i);if(o!==null){var u=o.fullWidth();if(n<u)return o.findTokenInternal(t,n,r);n-=u,r+=u}}throw e.Errors.invalidOperation()},t.prototype.findTokenOnLeft=function(t,n){typeof n=="undefined"&&(n=!1);var r=this.findToken(t,!1),i=r.start();return n&&(r=e.Syntax.findSkippedTokenOnLeft(r,t)||r),t>i?r:r.fullStart()===0?null:r.previousToken(n)},t.prototype.findCompleteTokenOnLeft=function(t,n){typeof n=="undefined"&&(n=!1);var r=this.findToken(t,!1);return n&&(r=e.Syntax.findSkippedTokenOnLeft(r,t)||r),r.token().width()>0&&t>=r.end()?r:r.previousToken(n)},t.prototype.isModuleElement=function(){return!1},t.prototype.isClassElement=function(){return!1},t.prototype.isTypeMember=function(){return!1},t.prototype.isStatement=function(){return!1},t.prototype.isExpression=function(){return!1},t.prototype.isSwitchClause=function(){return!1},t.prototype.structuralEquals=function(t){if(this===t)return!0;if(t===null)return!1;if(this.kind()!==t.kind())return!1;for(var n=0,r=this.childCount();n<r;n++){var i=this.childAt(n),s=t.childAt(n);if(!e.Syntax.elementStructuralEquals(i,s))return!1}return!0},t.prototype.width=function(){return this.fullWidth()-this.leadingTriviaWidth()-this.trailingTriviaWidth()},t.prototype.leadingTriviaWidth=function(){var e=this.firstToken();return e===null?0:e.leadingTriviaWidth()},t.prototype.trailingTriviaWidth=function(){var e=this.lastToken();return e===null?0:e.trailingTriviaWidth()},t}();e.SyntaxNode=t})(r||(r={}));var r;(function(e){var t=function(t){function n(e,n,r){t.call(this,r),this.moduleElements=e,this.endOfFileToken=n}return i(n,t),n.prototype.accept=function(e){return e.visitSourceUnit(this)},n.prototype.kind=function(){return 120},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.moduleElements;case 1:return this.endOfFileToken;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.moduleElements===e&&this.endOfFileToken===t?this:new n(e,t,this.parsedInStrictMode())},n.create=function(t){return new n(e.Syntax.emptyList,t,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModuleElements=function(e){return this.update(e,this.endOfFileToken)},n.prototype.withModuleElement=function(t){return this.withModuleElements(e.Syntax.list([t]))},n.prototype.withEndOfFileToken=function(e){return this.update(this.moduleElements,e)},n.prototype.isTypeScriptSpecific=function(){return this.moduleElements.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.SourceUnitSyntax=t;var n=function(t){function n(e,n,r,i,s){t.call(this,s),this.requireKeyword=e,this.openParenToken=n,this.stringLiteral=r,this.closeParenToken=i}return i(n,t),n.prototype.accept=function(e){return e.visitExternalModuleReference(this)},n.prototype.kind=function(){return 245},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.requireKeyword;case 1:return this.openParenToken;case 2:return this.stringLiteral;case 3:return this.closeParenToken;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleReference=function(){return!0},n.prototype.update=function(e,t,r,i){return this.requireKeyword===e&&this.openParenToken===t&&this.stringLiteral===r&&this.closeParenToken===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(66),e.Syntax.token(72),t,e.Syntax.token(73),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withRequireKeyword=function(e){return this.update(e,this.openParenToken,this.stringLiteral,this.closeParenToken)},n.prototype.withOpenParenToken=function(e){return this.update(this.requireKeyword,e,this.stringLiteral,this.closeParenToken)},n.prototype.withStringLiteral=function(e){return this.update(this.requireKeyword,this.openParenToken,e,this.closeParenToken)},n.prototype.withCloseParenToken=function(e){return this.update(this.requireKeyword,this.openParenToken,this.stringLiteral,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ExternalModuleReferenceSyntax=n;var r=function(t){function n(e,n){t.call(this,n),this.moduleName=e}return i(n,t),n.prototype.accept=function(e){return e.visitModuleNameModuleReference(this)},n.prototype.kind=function(){return 246},n.prototype.childCount=function(){return 1},n.prototype.childAt=function(t){switch(t){case 0:return this.moduleName;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleReference=function(){return!0},n.prototype.update=function(e){return this.moduleName===e?this:new n(e,this.parsedInStrictMode())},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModuleName=function(e){return this.update(e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ModuleNameModuleReferenceSyntax=r;var s=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.modifiers=e,this.importKeyword=n,this.identifier=r,this.equalsToken=i,this.moduleReference=s,this.semicolonToken=o}return i(n,t),n.prototype.accept=function(e){return e.visitImportDeclaration(this)},n.prototype.kind=function(){return 133},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.importKeyword;case 2:return this.identifier;case 3:return this.equalsToken;case 4:return this.moduleReference;case 5:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o){return this.modifiers===e&&this.importKeyword===t&&this.identifier===r&&this.equalsToken===i&&this.moduleReference===s&&this.semicolonToken===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(t,r,i,s,o){return new n(e.Syntax.emptyList,t,r,i,s,o,!1)},n.create1=function(t,r){return new n(e.Syntax.emptyList,e.Syntax.token(49),t,e.Syntax.token(107),r,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.importKeyword,this.identifier,this.equalsToken,this.moduleReference,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withImportKeyword=function(e){return this.update(this.modifiers,e,this.identifier,this.equalsToken,this.moduleReference,this.semicolonToken)},n.prototype.withIdentifier=function(e){return this.update(this.modifiers,this.importKeyword,e,this.equalsToken,this.moduleReference,this.semicolonToken)},n.prototype.withEqualsToken=function(e){return this.update(this.modifiers,this.importKeyword,this.identifier,e,this.moduleReference,this.semicolonToken)},n.prototype.withModuleReference=function(e){return this.update(this.modifiers,this.importKeyword,this.identifier,this.equalsToken,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.importKeyword,this.identifier,this.equalsToken,this.moduleReference,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ImportDeclarationSyntax=s;var o=function(t){function n(e,n,r,i,s){t.call(this,s),this.exportKeyword=e,this.equalsToken=n,this.identifier=r,this.semicolonToken=i}return i(n,t),n.prototype.accept=function(e){return e.visitExportAssignment(this)},n.prototype.kind=function(){return 134},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.exportKeyword;case 1:return this.equalsToken;case 2:return this.identifier;case 3:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i){return this.exportKeyword===e&&this.equalsToken===t&&this.identifier===r&&this.semicolonToken===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(47),e.Syntax.token(107),t,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withExportKeyword=function(e){return this.update(e,this.equalsToken,this.identifier,this.semicolonToken)},n.prototype.withEqualsToken=function(e){return this.update(this.exportKeyword,e,this.identifier,this.semicolonToken)},n.prototype.withIdentifier=function(e){return this.update(this.exportKeyword,this.equalsToken,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.exportKeyword,this.equalsToken,this.identifier,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ExportAssignmentSyntax=o;var u=function(t){function n(e,n,r,i,s,o,u,a,f){t.call(this,f),this.modifiers=e,this.classKeyword=n,this.identifier=r,this.typeParameterList=i,this.heritageClauses=s,this.openBraceToken=o,this.classElements=u,this.closeBraceToken=a}return i(n,t),n.prototype.accept=function(e){return e.visitClassDeclaration(this)},n.prototype.kind=function(){return 131},n.prototype.childCount=function(){return 8},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.classKeyword;case 2:return this.identifier;case 3:return this.typeParameterList;case 4:return this.heritageClauses;case 5:return this.openBraceToken;case 6:return this.classElements;case 7:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o,u,a){return this.modifiers===e&&this.classKeyword===t&&this.identifier===r&&this.typeParameterList===i&&this.heritageClauses===s&&this.openBraceToken===o&&this.classElements===u&&this.closeBraceToken===a?this:new n(e,t,r,i,s,o,u,a,this.parsedInStrictMode())},n.create=function(t,r,i,s){return new n(e.Syntax.emptyList,t,r,null,e.Syntax.emptyList,i,e.Syntax.emptyList,s,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,e.Syntax.token(44),t,null,e.Syntax.emptyList,e.Syntax.token(70),e.Syntax.emptyList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.classKeyword,this.identifier,this.typeParameterList,this.heritageClauses,this.openBraceToken,this.classElements,this.closeBraceToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withClassKeyword=function(e){return this.update(this.modifiers,e,this.identifier,this.typeParameterList,this.heritageClauses,this.openBraceToken,this.classElements,this.closeBraceToken)},n.prototype.withIdentifier=function(e){return this.update(this.modifiers,this.classKeyword,e,this.typeParameterList,this.heritageClauses,this.openBraceToken,this.classElements,this.closeBraceToken)},n.prototype.withTypeParameterList=function(e){return this.update(this.modifiers,this.classKeyword,this.identifier,e,this.heritageClauses,this.openBraceToken,this.classElements,this.closeBraceToken)},n.prototype.withHeritageClauses=function(e){return this.update(this.modifiers,this.classKeyword,this.identifier,this.typeParameterList,e,this.openBraceToken,this.classElements,this.closeBraceToken)},n.prototype.withHeritageClause=function(t){return this.withHeritageClauses(e.Syntax.list([t]))},n.prototype.withOpenBraceToken=function(e){return this.update(this.modifiers,this.classKeyword,this.identifier,this.typeParameterList,this.heritageClauses,e,this.classElements,this.closeBraceToken)},n.prototype.withClassElements=function(e){return this.update(this.modifiers,this.classKeyword,this.identifier,this.typeParameterList,this.heritageClauses,this.openBraceToken,e,this.closeBraceToken)},n.prototype.withClassElement=function(t){return this.withClassElements(e.Syntax.list([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.modifiers,this.classKeyword,this.identifier,this.typeParameterList,this.heritageClauses,this.openBraceToken,this.classElements,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ClassDeclarationSyntax=u;var a=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.modifiers=e,this.interfaceKeyword=n,this.identifier=r,this.typeParameterList=i,this.heritageClauses=s,this.body=o}return i(n,t),n.prototype.accept=function(e){return e.visitInterfaceDeclaration(this)},n.prototype.kind=function(){return 128},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.interfaceKeyword;case 2:return this.identifier;case 3:return this.typeParameterList;case 4:return this.heritageClauses;case 5:return this.body;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o){return this.modifiers===e&&this.interfaceKeyword===t&&this.identifier===r&&this.typeParameterList===i&&this.heritageClauses===s&&this.body===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(t,r,i){return new n(e.Syntax.emptyList,t,r,null,e.Syntax.emptyList,i,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,e.Syntax.token(52),t,null,e.Syntax.emptyList,C.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.interfaceKeyword,this.identifier,this.typeParameterList,this.heritageClauses,this.body)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withInterfaceKeyword=function(e){return this.update(this.modifiers,e,this.identifier,this.typeParameterList,this.heritageClauses,this.body)},n.prototype.withIdentifier=function(e){return this.update(this.modifiers,this.interfaceKeyword,e,this.typeParameterList,this.heritageClauses,this.body)},n.prototype.withTypeParameterList=function(e){return this.update(this.modifiers,this.interfaceKeyword,this.identifier,e,this.heritageClauses,this.body)},n.prototype.withHeritageClauses=function(e){return this.update(this.modifiers,this.interfaceKeyword,this.identifier,this.typeParameterList,e,this.body)},n.prototype.withHeritageClause=function(t){return this.withHeritageClauses(e.Syntax.list([t]))},n.prototype.withBody=function(e){return this.update(this.modifiers,this.interfaceKeyword,this.identifier,this.typeParameterList,this.heritageClauses,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.InterfaceDeclarationSyntax=a;var f=function(t){function n(e,n,r,i){t.call(this,i),this.extendsOrImplementsKeyword=n,this.typeNames=r,this._kind=e}return i(n,t),n.prototype.accept=function(e){return e.visitHeritageClause(this)},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.extendsOrImplementsKeyword;case 1:return this.typeNames;default:throw e.Errors.invalidOperation()}},n.prototype.kind=function(){return this._kind},n.prototype.update=function(e,t,r){return this._kind===e&&this.extendsOrImplementsKeyword===t&&this.typeNames===r?this:new n(e,t,r,this.parsedInStrictMode())},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withKind=function(e){return this.update(e,this.extendsOrImplementsKeyword,this.typeNames)},n.prototype.withExtendsOrImplementsKeyword=function(e){return this.update(this._kind,e,this.typeNames)},n.prototype.withTypeNames=function(e){return this.update(this._kind,this.extendsOrImplementsKeyword,e)},n.prototype.withTypeName=function(t){return this.withTypeNames(e.Syntax.separatedList([t]))},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.HeritageClauseSyntax=f;var l=function(t){function n(e,n,r,i,s,o,u,a){t.call(this,a),this.modifiers=e,this.moduleKeyword=n,this.name=r,this.stringLiteral=i,this.openBraceToken=s,this.moduleElements=o,this.closeBraceToken=u}return i(n,t),n.prototype.accept=function(e){return e.visitModuleDeclaration(this)},n.prototype.kind=function(){return 130},n.prototype.childCount=function(){return 7},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.moduleKeyword;case 2:return this.name;case 3:return this.stringLiteral;case 4:return this.openBraceToken;case 5:return this.moduleElements;case 6:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o,u){return this.modifiers===e&&this.moduleKeyword===t&&this.name===r&&this.stringLiteral===i&&this.openBraceToken===s&&this.moduleElements===o&&this.closeBraceToken===u?this:new n(e,t,r,i,s,o,u,this.parsedInStrictMode())},n.create=function(t,r,i){return new n(e.Syntax.emptyList,t,null,null,r,e.Syntax.emptyList,i,!1)},n.create1=function(){return new n(e.Syntax.emptyList,e.Syntax.token(65),null,null,e.Syntax.token(70),e.Syntax.emptyList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.moduleKeyword,this.name,this.stringLiteral,this.openBraceToken,this.moduleElements,this.closeBraceToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withModuleKeyword=function(e){return this.update(this.modifiers,e,this.name,this.stringLiteral,this.openBraceToken,this.moduleElements,this.closeBraceToken)},n.prototype.withName=function(e){return this.update(this.modifiers,this.moduleKeyword,e,this.stringLiteral,this.openBraceToken,this.moduleElements,this.closeBraceToken)},n.prototype.withStringLiteral=function(e){return this.update(this.modifiers,this.moduleKeyword,this.name,e,this.openBraceToken,this.moduleElements,this.closeBraceToken)},n.prototype.withOpenBraceToken=function(e){return this.update(this.modifiers,this.moduleKeyword,this.name,this.stringLiteral,e,this.moduleElements,this.closeBraceToken)},n.prototype.withModuleElements=function(e){return this.update(this.modifiers,this.moduleKeyword,this.name,this.stringLiteral,this.openBraceToken,e,this.closeBraceToken)},n.prototype.withModuleElement=function(t){return this.withModuleElements(e.Syntax.list([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.modifiers,this.moduleKeyword,this.name,this.stringLiteral,this.openBraceToken,this.moduleElements,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ModuleDeclarationSyntax=l;var c=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.modifiers=e,this.functionKeyword=n,this.identifier=r,this.callSignature=i,this.block=s,this.semicolonToken=o}return i(n,t),n.prototype.accept=function(e){return e.visitFunctionDeclaration(this)},n.prototype.kind=function(){return 129},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.functionKeyword;case 2:return this.identifier;case 3:return this.callSignature;case 4:return this.block;case 5:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o){return this.modifiers===e&&this.functionKeyword===t&&this.identifier===r&&this.callSignature===i&&this.block===s&&this.semicolonToken===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(t,r,i){return new n(e.Syntax.emptyList,t,r,i,null,null,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,e.Syntax.token(27),t,W.create1(),null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.functionKeyword,this.identifier,this.callSignature,this.block,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withFunctionKeyword=function(e){return this.update(this.modifiers,e,this.identifier,this.callSignature,this.block,this.semicolonToken)},n.prototype.withIdentifier=function(e){return this.update(this.modifiers,this.functionKeyword,e,this.callSignature,this.block,this.semicolonToken)},n.prototype.withCallSignature=function(e){return this.update(this.modifiers,this.functionKeyword,this.identifier,e,this.block,this.semicolonToken)},n.prototype.withBlock=function(e){return this.update(this.modifiers,this.functionKeyword,this.identifier,this.callSignature,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.functionKeyword,this.identifier,this.callSignature,this.block,e)},n.prototype.isTypeScriptSpecific=function(){return this.modifiers.childCount()>0?!0:this.callSignature.isTypeScriptSpecific()?!0:this.block!==null&&this.block.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.FunctionDeclarationSyntax=c;var h=function(t){function n(e,n,r,i){t.call(this,i),this.modifiers=e,this.variableDeclaration=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitVariableStatement(this)},n.prototype.kind=function(){return 148},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.variableDeclaration;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.modifiers===e&&this.variableDeclaration===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(e.Syntax.emptyList,t,r,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,t,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.variableDeclaration,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withVariableDeclaration=function(e){return this.update(this.modifiers,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.variableDeclaration,e)},n.prototype.isTypeScriptSpecific=function(){return this.modifiers.childCount()>0?!0:this.variableDeclaration.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.VariableStatementSyntax=h;var p=function(t){function n(e,n,r){t.call(this,r),this.varKeyword=e,this.variableDeclarators=n}return i(n,t),n.prototype.accept=function(e){return e.visitVariableDeclaration(this)},n.prototype.kind=function(){return 224},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.varKeyword;case 1:return this.variableDeclarators;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.varKeyword===e&&this.variableDeclarators===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(40),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withVarKeyword=function(e){return this.update(e,this.variableDeclarators)},n.prototype.withVariableDeclarators=function(e){return this.update(this.varKeyword,e)},n.prototype.withVariableDeclarator=function(t){return this.withVariableDeclarators(e.Syntax.separatedList([t]))},n.prototype.isTypeScriptSpecific=function(){return this.variableDeclarators.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.VariableDeclarationSyntax=p;var d=function(t){function n(e,n,r,i){t.call(this,i),this.propertyName=e,this.typeAnnotation=n,this.equalsValueClause=r}return i(n,t),n.prototype.accept=function(e){return e.visitVariableDeclarator(this)},n.prototype.kind=function(){return 225},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.propertyName;case 1:return this.typeAnnotation;case 2:return this.equalsValueClause;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r){return this.propertyName===e&&this.typeAnnotation===t&&this.equalsValueClause===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e){return new n(e,null,null,!1)},n.create1=function(e){return new n(e,null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withPropertyName=function(e){return this.update(e,this.typeAnnotation,this.equalsValueClause)},n.prototype.withTypeAnnotation=function(e){return this.update(this.propertyName,e,this.equalsValueClause)},n.prototype.withEqualsValueClause=function(e){return this.update(this.propertyName,this.typeAnnotation,e)},n.prototype.isTypeScriptSpecific=function(){return this.typeAnnotation!==null?!0:this.equalsValueClause!==null&&this.equalsValueClause.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.VariableDeclaratorSyntax=d;var v=function(t){function n(e,n,r){t.call(this,r),this.equalsToken=e,this.value=n}return i(n,t),n.prototype.accept=function(e){return e.visitEqualsValueClause(this)},n.prototype.kind=function(){return 232},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.equalsToken;case 1:return this.value;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.equalsToken===e&&this.value===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(107),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withEqualsToken=function(e){return this.update(e,this.value)},n.prototype.withValue=function(e){return this.update(this.equalsToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.value.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.EqualsValueClauseSyntax=v;var m=function(t){function n(e,n,r,i){t.call(this,i),this.operatorToken=n,this.operand=r,this._kind=e}return i(n,t),n.prototype.accept=function(e){return e.visitPrefixUnaryExpression(this)},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.operatorToken;case 1:return this.operand;default:throw e.Errors.invalidOperation()}},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.kind=function(){return this._kind},n.prototype.update=function(e,t,r){return this._kind===e&&this.operatorToken===t&&this.operand===r?this:new n(e,t,r,this.parsedInStrictMode())},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withKind=function(e){return this.update(e,this.operatorToken,this.operand)},n.prototype.withOperatorToken=function(e){return this.update(this._kind,e,this.operand)},n.prototype.withOperand=function(e){return this.update(this._kind,this.operatorToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.operand.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.PrefixUnaryExpressionSyntax=m;var g=function(t){function n(e,n,r,i){t.call(this,i),this.openBracketToken=e,this.expressions=n,this.closeBracketToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitArrayLiteralExpression(this)},n.prototype.kind=function(){return 214},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.openBracketToken;case 1:return this.expressions;case 2:return this.closeBracketToken;default:throw e.Errors.invalidOperation()}},n.prototype.isPrimaryExpression=function(){return!0},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r){return this.openBracketToken===e&&this.expressions===t&&this.closeBracketToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(e.Syntax.token(74),e.Syntax.emptySeparatedList,e.Syntax.token(75),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenBracketToken=function(e){return this.update(e,this.expressions,this.closeBracketToken)},n.prototype.withExpressions=function(e){return this.update(this.openBracketToken,e,this.closeBracketToken)},n.prototype.withExpression=function(t){return this.withExpressions(e.Syntax.separatedList([t]))},n.prototype.withCloseBracketToken=function(e){return this.update(this.openBracketToken,this.expressions,e)},n.prototype.isTypeScriptSpecific=function(){return this.expressions.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ArrayLiteralExpressionSyntax=g;var y=function(t){function n(e){t.call(this,e)}return i(n,t),n.prototype.accept=function(e){return e.visitOmittedExpression(this)},n.prototype.kind=function(){return 223},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.invalidOperation()},n.prototype.isExpression=function(){return!0},n.prototype.update=function(){return this},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.isTypeScriptSpecific=function(){return!1},n}(e.SyntaxNode);e.OmittedExpressionSyntax=y;var b=function(t){function n(e,n,r,i){t.call(this,i),this.openParenToken=e,this.expression=n,this.closeParenToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitParenthesizedExpression(this)},n.prototype.kind=function(){return 217},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.openParenToken;case 1:return this.expression;case 2:return this.closeParenToken;default:throw e.Errors.invalidOperation()}},n.prototype.isPrimaryExpression=function(){return!0},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r){return this.openParenToken===e&&this.expression===t&&this.closeParenToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(72),t,e.Syntax.token(73),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenParenToken=function(e){return this.update(e,this.expression,this.closeParenToken)},n.prototype.withExpression=function(e){return this.update(this.openParenToken,e,this.closeParenToken)},n.prototype.withCloseParenToken=function(e){return this.update(this.openParenToken,this.expression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ParenthesizedExpressionSyntax=b;var w=function(t){function n(e,n,r,i,s){t.call(this,s),this.identifier=e,this.equalsGreaterThanToken=n,this.block=r,this.expression=i}return i(n,t),n.prototype.accept=function(e){return e.visitSimpleArrowFunctionExpression(this)},n.prototype.kind=function(){return 219},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.identifier;case 1:return this.equalsGreaterThanToken;case 2:return this.block;case 3:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isArrowFunctionExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r,i){return this.identifier===e&&this.equalsGreaterThanToken===t&&this.block===r&&this.expression===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,t,null,null,!1)},n.create1=function(t){return new n(t,e.Syntax.token(85),null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withIdentifier=function(e){return this.update(e,this.equalsGreaterThanToken,this.block,this.expression)},n.prototype.withEqualsGreaterThanToken=function(e){return this.update(this.identifier,e,this.block,this.expression)},n.prototype.withBlock=function(e){return this.update(this.identifier,this.equalsGreaterThanToken,e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.identifier,this.equalsGreaterThanToken,this.block,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.SimpleArrowFunctionExpressionSyntax=w;var E=function(t){function n(e,n,r,i,s){t.call(this,s),this.callSignature=e,this.equalsGreaterThanToken=n,this.block=r,this.expression=i}return i(n,t),n.prototype.accept=function(e){return e.visitParenthesizedArrowFunctionExpression(this)},n.prototype.kind=function(){return 218},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.callSignature;case 1:return this.equalsGreaterThanToken;case 2:return this.block;case 3:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isArrowFunctionExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r,i){return this.callSignature===e&&this.equalsGreaterThanToken===t&&this.block===r&&this.expression===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,t,null,null,!1)},n.create1=function(){return new n(W.create1(),e.Syntax.token(85),null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withCallSignature=function(e){return this.update(e,this.equalsGreaterThanToken,this.block,this.expression)},n.prototype.withEqualsGreaterThanToken=function(e){return this.update(this.callSignature,e,this.block,this.expression)},n.prototype.withBlock=function(e){return this.update(this.callSignature,this.equalsGreaterThanToken,e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.callSignature,this.equalsGreaterThanToken,this.block,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ParenthesizedArrowFunctionExpressionSyntax=E;var S=function(t){function n(e,n,r,i){t.call(this,i),this.left=e,this.dotToken=n,this.right=r}return i(n,t),n.prototype.accept=function(e){return e.visitQualifiedName(this)},n.prototype.kind=function(){return 121},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.left;case 1:return this.dotToken;case 2:return this.right;default:throw e.Errors.invalidOperation()}},n.prototype.isName=function(){return!0},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t,r){return this.left===e&&this.dotToken===t&&this.right===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t,r){return new n(t,e.Syntax.token(76),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withLeft=function(e){return this.update(e,this.dotToken,this.right)},n.prototype.withDotToken=function(e){return this.update(this.left,e,this.right)},n.prototype.withRight=function(e){return this.update(this.left,this.dotToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.QualifiedNameSyntax=S;var x=function(t){function n(e,n,r,i){t.call(this,i),this.lessThanToken=e,this.typeArguments=n,this.greaterThanToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitTypeArgumentList(this)},n.prototype.kind=function(){return 228},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.lessThanToken;case 1:return this.typeArguments;case 2:return this.greaterThanToken;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r){return this.lessThanToken===e&&this.typeArguments===t&&this.greaterThanToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(e.Syntax.token(80),e.Syntax.emptySeparatedList,e.Syntax.token(81),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withLessThanToken=function(e){return this.update(e,this.typeArguments,this.greaterThanToken)},n.prototype.withTypeArguments=function(e){return this.update(this.lessThanToken,e,this.greaterThanToken)},n.prototype.withTypeArgument=function(t){return this.withTypeArguments(e.Syntax.separatedList([t]))},n.prototype.withGreaterThanToken=function(e){return this.update(this.lessThanToken,this.typeArguments,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.TypeArgumentListSyntax=x;var T=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.newKeyword=e,this.typeParameterList=n,this.parameterList=r,this.equalsGreaterThanToken=i,this.type=s}return i(n,t),n.prototype.accept=function(e){return e.visitConstructorType(this)},n.prototype.kind=function(){return 125},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.newKeyword;case 1:return this.typeParameterList;case 2:return this.parameterList;case 3:return this.equalsGreaterThanToken;case 4:return this.type;default:throw e.Errors.invalidOperation()}},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.newKeyword===e&&this.typeParameterList===t&&this.parameterList===r&&this.equalsGreaterThanToken===i&&this.type===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create=function(e,t,r,i){return new n(e,null,t,r,i,!1)},n.create1=function(t){return new n(e.Syntax.token(31),null,X.create1(),e.Syntax.token(85),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withNewKeyword=function(e){return this.update(e,this.typeParameterList,this.parameterList,this.equalsGreaterThanToken,this.type)},n.prototype.withTypeParameterList=function(e){return this.update(this.newKeyword,e,this.parameterList,this.equalsGreaterThanToken,this.type)},n.prototype.withParameterList=function(e){return this.update(this.newKeyword,this.typeParameterList,e,this.equalsGreaterThanToken,this.type)},n.prototype.withEqualsGreaterThanToken=function(e){return this.update(this.newKeyword,this.typeParameterList,this.parameterList,e,this.type)},n.prototype.withType=function(e){return this.update(this.newKeyword,this.typeParameterList,this.parameterList,this.equalsGreaterThanToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ConstructorTypeSyntax=T;var N=function(t){function n(e,n,r,i,s){t.call(this,s),this.typeParameterList=e,this.parameterList=n,this.equalsGreaterThanToken=r,this.type=i}return i(n,t),n.prototype.accept=function(e){return e.visitFunctionType(this)},n.prototype.kind=function(){return 123},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.typeParameterList;case 1:return this.parameterList;case 2:return this.equalsGreaterThanToken;case 3:return this.type;default:throw e.Errors.invalidOperation()}},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t,r,i){return this.typeParameterList===e&&this.parameterList===t&&this.equalsGreaterThanToken===r&&this.type===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(e,t,r){return new n(null,e,t,r,!1)},n.create1=function(t){return new n(null,X.create1(),e.Syntax.token(85),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withTypeParameterList=function(e){return this.update(e,this.parameterList,this.equalsGreaterThanToken,this.type)},n.prototype.withParameterList=function(e){return this.update(this.typeParameterList,e,this.equalsGreaterThanToken,this.type)},n.prototype.withEqualsGreaterThanToken=function(e){return this.update(this.typeParameterList,this.parameterList,e,this.type)},n.prototype.withType=function(e){return this.update(this.typeParameterList,this.parameterList,this.equalsGreaterThanToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.FunctionTypeSyntax=N;var C=function(t){function n(e,n,r,i){t.call(this,i),this.openBraceToken=e,this.typeMembers=n,this.closeBraceToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitObjectType(this)},n.prototype.kind=function(){return 122},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.openBraceToken;case 1:return this.typeMembers;case 2:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t,r){return this.openBraceToken===e&&this.typeMembers===t&&this.closeBraceToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(e.Syntax.token(70),e.Syntax.emptySeparatedList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenBraceToken=function(e){return this.update(e,this.typeMembers,this.closeBraceToken)},n.prototype.withTypeMembers=function(e){return this.update(this.openBraceToken,e,this.closeBraceToken)},n.prototype.withTypeMember=function(t){return this.withTypeMembers(e.Syntax.separatedList([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.openBraceToken,this.typeMembers,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ObjectTypeSyntax=C;var k=function(t){function n(e,n,r,i){t.call(this,i),this.type=e,this.openBracketToken=n,this.closeBracketToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitArrayType(this)},n.prototype.kind=function(){return 124},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.type;case 1:return this.openBracketToken;case 2:return this.closeBracketToken;default:throw e.Errors.invalidOperation()}},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t,r){return this.type===e&&this.openBracketToken===t&&this.closeBracketToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t){return new n(t,e.Syntax.token(74),e.Syntax.token(75),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withType=function(e){return this.update(e,this.openBracketToken,this.closeBracketToken)},n.prototype.withOpenBracketToken=function(e){return this.update(this.type,e,this.closeBracketToken)},n.prototype.withCloseBracketToken=function(e){return this.update(this.type,this.openBracketToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ArrayTypeSyntax=k;var L=function(t){function n(e,n,r){t.call(this,r),this.name=e,this.typeArgumentList=n}return i(n,t),n.prototype.accept=function(e){return e.visitGenericType(this)},n.prototype.kind=function(){return 126},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.name;case 1:return this.typeArgumentList;default:throw e.Errors.invalidOperation()}},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t){return this.name===e&&this.typeArgumentList===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(e){return new n(e,x.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withName=function(e){return this.update(e,this.typeArgumentList)},n.prototype.withTypeArgumentList=function(e){return this.update(this.name,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.GenericTypeSyntax=L;var A=function(t){function n(e,n,r){t.call(this,r),this.typeOfKeyword=e,this.name=n}return i(n,t),n.prototype.accept=function(e){return e.visitTypeQuery(this)},n.prototype.kind=function(){return 127},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.typeOfKeyword;case 1:return this.name;default:throw e.Errors.invalidOperation()}},n.prototype.isType=function(){return!0},n.prototype.update=function(e,t){return this.typeOfKeyword===e&&this.name===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(39),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withTypeOfKeyword=function(e){return this.update(e,this.name)},n.prototype.withName=function(e){return this.update(this.typeOfKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.TypeQuerySyntax=A;var O=function(t){function n(e,n,r){t.call(this,r),this.colonToken=e,this.type=n}return i(n,t),n.prototype.accept=function(e){return e.visitTypeAnnotation(this)},n.prototype.kind=function(){return 244},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.colonToken;case 1:return this.type;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.colonToken===e&&this.type===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(106),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withColonToken=function(e){return this.update(e,this.type)},n.prototype.withType=function(e){return this.update(this.colonToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.TypeAnnotationSyntax=O;var M=function(t){function n(e,n,r,i){t.call(this,i),this.openBraceToken=e,this.statements=n,this.closeBraceToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitBlock(this)},n.prototype.kind=function(){return 146},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.openBraceToken;case 1:return this.statements;case 2:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.openBraceToken===e&&this.statements===t&&this.closeBraceToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptyList,r,!1)},n.create1=function(){return new n(e.Syntax.token(70),e.Syntax.emptyList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenBraceToken=function(e){return this.update(e,this.statements,this.closeBraceToken)},n.prototype.withStatements=function(e){return this.update(this.openBraceToken,e,this.closeBraceToken)},n.prototype.withStatement=function(t){return this.withStatements(e.Syntax.list([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.openBraceToken,this.statements,e)},n.prototype.isTypeScriptSpecific=function(){return this.statements.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.BlockSyntax=M;var _=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.dotDotDotToken=e,this.modifiers=n,this.identifier=r,this.questionToken=i,this.typeAnnotation=s,this.equalsValueClause=o}return i(n,t),n.prototype.accept=function(e){return e.visitParameter(this)},n.prototype.kind=function(){return 242},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.dotDotDotToken;case 1:return this.modifiers;case 2:return this.identifier;case 3:return this.questionToken;case 4:return this.typeAnnotation;case 5:return this.equalsValueClause;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r,i,s,o){return this.dotDotDotToken===e&&this.modifiers===t&&this.identifier===r&&this.questionToken===i&&this.typeAnnotation===s&&this.equalsValueClause===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(t){return new n(null,e.Syntax.emptyList,t,null,null,null,!1)},n.create1=function(t){return new n(null,e.Syntax.emptyList,t,null,null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withDotDotDotToken=function(e){return this.update(e,this.modifiers,this.identifier,this.questionToken,this.typeAnnotation,this.equalsValueClause)},n.prototype.withModifiers=function(e){return this.update(this.dotDotDotToken,e,this.identifier,this.questionToken,this.typeAnnotation,this.equalsValueClause)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withIdentifier=function(e){return this.update(this.dotDotDotToken,this.modifiers,e,this.questionToken,this.typeAnnotation,this.equalsValueClause)},n.prototype.withQuestionToken=function(e){return this.update(this.dotDotDotToken,this.modifiers,this.identifier,e,this.typeAnnotation,this.equalsValueClause)},n.prototype.withTypeAnnotation=function(e){return this.update(this.dotDotDotToken,this.modifiers,this.identifier,this.questionToken,e,this.equalsValueClause)},n.prototype.withEqualsValueClause=function(e){return this.update(this.dotDotDotToken,this.modifiers,this.identifier,this.questionToken,this.typeAnnotation,e)},n.prototype.isTypeScriptSpecific=function(){return this.dotDotDotToken!==null?!0:this.modifiers.isTypeScriptSpecific()?!0:this.questionToken!==null?!0:this.typeAnnotation!==null?!0:this.equalsValueClause!==null?!0:!1},n}(e.SyntaxNode);e.ParameterSyntax=_;var D=function(t){function n(e,n,r,i){t.call(this,i),this.expression=e,this.dotToken=n,this.name=r}return i(n,t),n.prototype.accept=function(e){return e.visitMemberAccessExpression(this)},n.prototype.kind=function(){return 212},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.expression;case 1:return this.dotToken;case 2:return this.name;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r){return this.expression===e&&this.dotToken===t&&this.name===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t,r){return new n(t,e.Syntax.token(76),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withExpression=function(e){return this.update(e,this.dotToken,this.name)},n.prototype.withDotToken=function(e){return this.update(this.expression,e,this.name)},n.prototype.withName=function(e){return this.update(this.expression,this.dotToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.MemberAccessExpressionSyntax=D;var P=function(t){function n(e,n,r,i){t.call(this,i),this.operand=n,this.operatorToken=r,this._kind=e}return i(n,t),n.prototype.accept=function(e){return e.visitPostfixUnaryExpression(this)},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.operand;case 1:return this.operatorToken;default:throw e.Errors.invalidOperation()}},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.kind=function(){return this._kind},n.prototype.update=function(e,t,r){return this._kind===e&&this.operand===t&&this.operatorToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withKind=function(e){return this.update(e,this.operand,this.operatorToken)},n.prototype.withOperand=function(e){return this.update(this._kind,e,this.operatorToken)},n.prototype.withOperatorToken=function(e){return this.update(this._kind,this.operand,e)},n.prototype.isTypeScriptSpecific=function(){return this.operand.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.PostfixUnaryExpressionSyntax=P;var H=function(t){function n(e,n,r,i,s){t.call(this,s),this.expression=e,this.openBracketToken=n,this.argumentExpression=r,this.closeBracketToken=i}return i(n,t),n.prototype.accept=function(e){return e.visitElementAccessExpression(this)},n.prototype.kind=function(){return 221},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.expression;case 1:return this.openBracketToken;case 2:return this.argumentExpression;case 3:return this.closeBracketToken;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r,i){return this.expression===e&&this.openBracketToken===t&&this.argumentExpression===r&&this.closeBracketToken===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create1=function(t,r){return new n(t,e.Syntax.token(74),r,e.Syntax.token(75),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withExpression=function(e){return this.update(e,this.openBracketToken,this.argumentExpression,this.closeBracketToken)},n.prototype.withOpenBracketToken=function(e){return this.update(this.expression,e,this.argumentExpression,this.closeBracketToken)},n.prototype.withArgumentExpression=function(e){return this.update(this.expression,this.openBracketToken,e,this.closeBracketToken)},n.prototype.withCloseBracketToken=function(e){return this.update(this.expression,this.openBracketToken,this.argumentExpression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:this.argumentExpression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ElementAccessExpressionSyntax=H;var B=function(t){function n(e,n,r){t.call(this,r),this.expression=e,this.argumentList=n}return i(n,t),n.prototype.accept=function(e){return e.visitInvocationExpression(this)},n.prototype.kind=function(){return 213},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.expression;case 1:return this.argumentList;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t){return this.expression===e&&this.argumentList===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(e){return new n(e,j.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withExpression=function(e){return this.update(e,this.argumentList)},n.prototype.withArgumentList=function(e){return this.update(this.expression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:this.argumentList.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.InvocationExpressionSyntax=B;var j=function(t){function n(e,n,r,i,s){t.call(this,s),this.typeArgumentList=e,this.openParenToken=n,this.closeParenToken=i,this.arguments=r}return i(n,t),n.prototype.accept=function(e){return e.visitArgumentList(this)},n.prototype.kind=function(){return 226},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.typeArgumentList;case 1:return this.openParenToken;case 2:return this.arguments;case 3:return this.closeParenToken;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r,i){return this.typeArgumentList===e&&this.openParenToken===t&&this.arguments===r&&this.closeParenToken===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(t,r){return new n(null,t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(null,e.Syntax.token(72),e.Syntax.emptySeparatedList,e.Syntax.token(73),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withTypeArgumentList=function(e){return this.update(e,this.openParenToken,this.arguments,this.closeParenToken)},n.prototype.withOpenParenToken=function(e){return this.update(this.typeArgumentList,e,this.arguments,this.closeParenToken)},n.prototype.withArguments=function(e){return this.update(this.typeArgumentList,this.openParenToken,e,this.closeParenToken)},n.prototype.withArgument=function(t){return this.withArguments(e.Syntax.separatedList([t]))},n.prototype.withCloseParenToken=function(e){return this.update(this.typeArgumentList,this.openParenToken,this.arguments,e)},n.prototype.isTypeScriptSpecific=function(){return this.typeArgumentList!==null&&this.typeArgumentList.isTypeScriptSpecific()?!0:this.arguments.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ArgumentListSyntax=j;var F=function(t){function n(e,n,r,i,s){t.call(this,s),this.left=n,this.operatorToken=r,this.right=i,this._kind=e}return i(n,t),n.prototype.accept=function(e){return e.visitBinaryExpression(this)},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.left;case 1:return this.operatorToken;case 2:return this.right;default:throw e.Errors.invalidOperation()}},n.prototype.isExpression=function(){return!0},n.prototype.kind=function(){return this._kind},n.prototype.update=function(e,t,r,i){return this._kind===e&&this.left===t&&this.operatorToken===r&&this.right===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withKind=function(e){return this.update(e,this.left,this.operatorToken,this.right)},n.prototype.withLeft=function(e){return this.update(this._kind,e,this.operatorToken,this.right)},n.prototype.withOperatorToken=function(e){return this.update(this._kind,this.left,e,this.right)},n.prototype.withRight=function(e){return this.update(this._kind,this.left,this.operatorToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.left.isTypeScriptSpecific()?!0:this.right.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.BinaryExpressionSyntax=F;var I=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.condition=e,this.questionToken=n,this.whenTrue=r,this.colonToken=i,this.whenFalse=s}return i(n,t),n.prototype.accept=function(e){return e.visitConditionalExpression(this)},n.prototype.kind=function(){return 186},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.condition;case 1:return this.questionToken;case 2:return this.whenTrue;case 3:return this.colonToken;case 4:return this.whenFalse;default:throw e.Errors.invalidOperation()}},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.condition===e&&this.questionToken===t&&this.whenTrue===r&&this.colonToken===i&&this.whenFalse===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create1=function(t,r,i){return new n(t,e.Syntax.token(105),r,e.Syntax.token(106),i,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withCondition=function(e){return this.update(e,this.questionToken,this.whenTrue,this.colonToken,this.whenFalse)},n.prototype.withQuestionToken=function(e){return this.update(this.condition,e,this.whenTrue,this.colonToken,this.whenFalse)},n.prototype.withWhenTrue=function(e){return this.update(this.condition,this.questionToken,e,this.colonToken,this.whenFalse)},n.prototype.withColonToken=function(e){return this.update(this.condition,this.questionToken,this.whenTrue,e,this.whenFalse)},n.prototype.withWhenFalse=function(e){return this.update(this.condition,this.questionToken,this.whenTrue,this.colonToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.condition.isTypeScriptSpecific()?!0:this.whenTrue.isTypeScriptSpecific()?!0:this.whenFalse.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ConditionalExpressionSyntax=I;var q=function(t){function n(e,n,r){t.call(this,r),this.newKeyword=e,this.callSignature=n}return i(n,t),n.prototype.accept=function(e){return e.visitConstructSignature(this)},n.prototype.kind=function(){return 143},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.newKeyword;case 1:return this.callSignature;default:throw e.Errors.invalidOperation()}},n.prototype.isTypeMember=function(){return!0},n.prototype.update=function(e,t){return this.newKeyword===e&&this.callSignature===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(){return new n(e.Syntax.token(31),W.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withNewKeyword=function(e){return this.update(e,this.callSignature)},n.prototype.withCallSignature=function(e){return this.update(this.newKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ConstructSignatureSyntax=q;var R=function(t){function n(e,n,r,i){t.call(this,i),this.propertyName=e,this.questionToken=n,this.callSignature=r}return i(n,t),n.prototype.accept=function(e){return e.visitMethodSignature(this)},n.prototype.kind=function(){return 145},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.propertyName;case 1:return this.questionToken;case 2:return this.callSignature;default:throw e.Errors.invalidOperation()}},n.prototype.isTypeMember=function(){return!0},n.prototype.update=function(e,t,r){return this.propertyName===e&&this.questionToken===t&&this.callSignature===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,null,t,!1)},n.create1=function(e){return new n(e,null,W.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withPropertyName=function(e){return this.update(e,this.questionToken,this.callSignature)},n.prototype.withQuestionToken=function(e){return this.update(this.propertyName,e,this.callSignature)},n.prototype.withCallSignature=function(e){return this.update(this.propertyName,this.questionToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.callSignature.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.MethodSignatureSyntax=R;var U=function(t){function n(e,n,r,i,s){t.call(this,s),this.openBracketToken=e,this.parameter=n,this.closeBracketToken=r,this.typeAnnotation=i}return i(n,t),n.prototype.accept=function(e){return e.visitIndexSignature(this)},n.prototype.kind=function(){return 144},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.openBracketToken;case 1:return this.parameter;case 2:return this.closeBracketToken;case 3:return this.typeAnnotation;default:throw e.Errors.invalidOperation()}},n.prototype.isTypeMember=function(){return!0},n.prototype.update=function(e,t,r,i){return this.openBracketToken===e&&this.parameter===t&&this.closeBracketToken===r&&this.typeAnnotation===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(e,t,r){return new n(e,t,r,null,!1)},n.create1=function(t){return new n(e.Syntax.token(74),t,e.Syntax.token(75),null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenBracketToken=function(e){return this.update(e,this.parameter,this.closeBracketToken,this.typeAnnotation)},n.prototype.withParameter=function(e){return this.update(this.openBracketToken,e,this.closeBracketToken,this.typeAnnotation)},n.prototype.withCloseBracketToken=function(e){return this.update(this.openBracketToken,this.parameter,e,this.typeAnnotation)},n.prototype.withTypeAnnotation=function(e){return this.update(this.openBracketToken,this.parameter,this.closeBracketToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.IndexSignatureSyntax=U;var z=function(t){function n(e,n,r,i){t.call(this,i),this.propertyName=e,this.questionToken=n,this.typeAnnotation=r}return i(n,t),n.prototype.accept=function(e){return e.visitPropertySignature(this)},n.prototype.kind=function(){return 141},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.propertyName;case 1:return this.questionToken;case 2:return this.typeAnnotation;default:throw e.Errors.invalidOperation()}},n.prototype.isTypeMember=function(){return!0},n.prototype.update=function(e,t,r){return this.propertyName===e&&this.questionToken===t&&this.typeAnnotation===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e){return new n(e,null,null,!1)},n.create1=function(e){return new n(e,null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withPropertyName=function(e){return this.update(e,this.questionToken,this.typeAnnotation)},n.prototype.withQuestionToken=function(e){return this.update(this.propertyName,e,this.typeAnnotation)},n.prototype.withTypeAnnotation=function(e){return this.update(this.propertyName,this.questionToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.PropertySignatureSyntax=z;var W=function(t){function n(e,n,r,i){t.call(this,i),this.typeParameterList=e,this.parameterList=n,this.typeAnnotation=r}return i(n,t),n.prototype.accept=function(e){return e.visitCallSignature(this)},n.prototype.kind=function(){return 142},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.typeParameterList;case 1:return this.parameterList;case 2:return this.typeAnnotation;default:throw e.Errors.invalidOperation()}},n.prototype.isTypeMember=function(){return!0},n.prototype.update=function(e,t,r){return this.typeParameterList===e&&this.parameterList===t&&this.typeAnnotation===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e){return new n(null,e,null,!1)},n.create1=function(){return new n(null,X.create1(),null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withTypeParameterList=function(e){return this.update(e,this.parameterList,this.typeAnnotation)},n.prototype.withParameterList=function(e){return this.update(this.typeParameterList,e,this.typeAnnotation)},n.prototype.withTypeAnnotation=function(e){return this.update(this.typeParameterList,this.parameterList,e)},n.prototype.isTypeScriptSpecific=function(){return this.typeParameterList!==null?!0:this.parameterList.isTypeScriptSpecific()?!0:this.typeAnnotation!==null?!0:!1},n}(e.SyntaxNode);e.CallSignatureSyntax=W;var X=function(t){function n(e,n,r,i){t.call(this,i),this.openParenToken=e,this.parameters=n,this.closeParenToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitParameterList(this)},n.prototype.kind=function(){return 227},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.openParenToken;case 1:return this.parameters;case 2:return this.closeParenToken;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r){return this.openParenToken===e&&this.parameters===t&&this.closeParenToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(e.Syntax.token(72),e.Syntax.emptySeparatedList,e.Syntax.token(73),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenParenToken=function(e){return this.update(e,this.parameters,this.closeParenToken)},n.prototype.withParameters=function(e){return this.update(this.openParenToken,e,this.closeParenToken)},n.prototype.withParameter=function(t){return this.withParameters(e.Syntax.separatedList([t]))},n.prototype.withCloseParenToken=function(e){return this.update(this.openParenToken,this.parameters,e)},n.prototype.isTypeScriptSpecific=function(){return this.parameters.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ParameterListSyntax=X;var V=function(t){function n(e,n,r,i){t.call(this,i),this.lessThanToken=e,this.typeParameters=n,this.greaterThanToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitTypeParameterList(this)},n.prototype.kind=function(){return 229},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.lessThanToken;case 1:return this.typeParameters;case 2:return this.greaterThanToken;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r){return this.lessThanToken===e&&this.typeParameters===t&&this.greaterThanToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(e.Syntax.token(80),e.Syntax.emptySeparatedList,e.Syntax.token(81),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withLessThanToken=function(e){return this.update(e,this.typeParameters,this.greaterThanToken)},n.prototype.withTypeParameters=function(e){return this.update(this.lessThanToken,e,this.greaterThanToken)},n.prototype.withTypeParameter=function(t){return this.withTypeParameters(e.Syntax.separatedList([t]))},n.prototype.withGreaterThanToken=function(e){return this.update(this.lessThanToken,this.typeParameters,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.TypeParameterListSyntax=V;var $=function(t){function n(e,n,r){t.call(this,r),this.identifier=e,this.constraint=n}return i(n,t),n.prototype.accept=function(e){return e.visitTypeParameter(this)},n.prototype.kind=function(){return 238},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.identifier;case 1:return this.constraint;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.identifier===e&&this.constraint===t?this:new n(e,t,this.parsedInStrictMode())},n.create=function(e){return new n(e,null,!1)},n.create1=function(e){return new n(e,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withIdentifier=function(e){return this.update(e,this.constraint)},n.prototype.withConstraint=function(e){return this.update(this.identifier,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.TypeParameterSyntax=$;var J=function(t){function n(e,n,r){t.call(this,r),this.extendsKeyword=e,this.type=n}return i(n,t),n.prototype.accept=function(e){return e.visitConstraint(this)},n.prototype.kind=function(){return 239},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.extendsKeyword;case 1:return this.type;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.extendsKeyword===e&&this.type===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(48),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withExtendsKeyword=function(e){return this.update(e,this.type)},n.prototype.withType=function(e){return this.update(this.extendsKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ConstraintSyntax=J;var K=function(t){function n(e,n,r){t.call(this,r),this.elseKeyword=e,this.statement=n}return i(n,t),n.prototype.accept=function(e){return e.visitElseClause(this)},n.prototype.kind=function(){return 235},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.elseKeyword;case 1:return this.statement;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.elseKeyword===e&&this.statement===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(23),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withElseKeyword=function(e){return this.update(e,this.statement)},n.prototype.withStatement=function(e){return this.update(this.elseKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return this.statement.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ElseClauseSyntax=K;var Q=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.ifKeyword=e,this.openParenToken=n,this.condition=r,this.closeParenToken=i,this.statement=s,this.elseClause=o}return i(n,t),n.prototype.accept=function(e){return e.visitIfStatement(this)},n.prototype.kind=function(){return 147},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.ifKeyword;case 1:return this.openParenToken;case 2:return this.condition;case 3:return this.closeParenToken;case 4:return this.statement;case 5:return this.elseClause;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o){return this.ifKeyword===e&&this.openParenToken===t&&this.condition===r&&this.closeParenToken===i&&this.statement===s&&this.elseClause===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(e,t,r,i,s){return new n(e,t,r,i,s,null,!1)},n.create1=function(t,r){return new n(e.Syntax.token(28),e.Syntax.token(72),t,e.Syntax.token(73),r,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withIfKeyword=function(e){return this.update(e,this.openParenToken,this.condition,this.closeParenToken,this.statement,this.elseClause)},n.prototype.withOpenParenToken=function(e){return this.update(this.ifKeyword,e,this.condition,this.closeParenToken,this.statement,this.elseClause)},n.prototype.withCondition=function(e){return this.update(this.ifKeyword,this.openParenToken,e,this.closeParenToken,this.statement,this.elseClause)},n.prototype.withCloseParenToken=function(e){return this.update(this.ifKeyword,this.openParenToken,this.condition,e,this.statement,this.elseClause)},n.prototype.withStatement=function(e){return this.update(this.ifKeyword,this.openParenToken,this.condition,this.closeParenToken,e,this.elseClause)},n.prototype.withElseClause=function(e){return this.update(this.ifKeyword,this.openParenToken,this.condition,this.closeParenToken,this.statement,e)},n.prototype.isTypeScriptSpecific=function(){return this.condition.isTypeScriptSpecific()?!0:this.statement.isTypeScriptSpecific()?!0:this.elseClause!==null&&this.elseClause.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.IfStatementSyntax=Q;var G=function(t){function n(e,n,r){t.call(this,r),this.expression=e,this.semicolonToken=n}return i(n,t),n.prototype.accept=function(e){return e.visitExpressionStatement(this)},n.prototype.kind=function(){return 149},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.expression;case 1:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t){return this.expression===e&&this.semicolonToken===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(t,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withExpression=function(e){return this.update(e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.expression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ExpressionStatementSyntax=G;var Y=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.modifiers=e,this.constructorKeyword=n,this.callSignature=r,this.block=i,this.semicolonToken=s}return i(n,t),n.prototype.accept=function(e){return e.visitConstructorDeclaration(this)},n.prototype.kind=function(){return 137},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.constructorKeyword;case 2:return this.callSignature;case 3:return this.block;case 4:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isClassElement=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.modifiers===e&&this.constructorKeyword===t&&this.callSignature===r&&this.block===i&&this.semicolonToken===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create=function(t,r){return new n(e.Syntax.emptyList,t,r,null,null,!1)},n.create1=function(){return new n(e.Syntax.emptyList,e.Syntax.token(62),W.create1(),null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.constructorKeyword,this.callSignature,this.block,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withConstructorKeyword=function(e){return this.update(this.modifiers,e,this.callSignature,this.block,this.semicolonToken)},n.prototype.withCallSignature=function(e){return this.update(this.modifiers,this.constructorKeyword,e,this.block,this.semicolonToken)},n.prototype.withBlock=function(e){return this.update(this.modifiers,this.constructorKeyword,this.callSignature,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.constructorKeyword,this.callSignature,this.block,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.ConstructorDeclarationSyntax=Y;var Z=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.modifiers=e,this.propertyName=n,this.callSignature=r,this.block=i,this.semicolonToken=s}return i(n,t),n.prototype.accept=function(e){return e.visitMemberFunctionDeclaration(this)},n.prototype.kind=function(){return 135},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.propertyName;case 2:return this.callSignature;case 3:return this.block;case 4:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberDeclaration=function(){return!0},n.prototype.isClassElement=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.modifiers===e&&this.propertyName===t&&this.callSignature===r&&this.block===i&&this.semicolonToken===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create=function(t,r){return new n(e.Syntax.emptyList,t,r,null,null,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,t,W.create1(),null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.propertyName,this.callSignature,this.block,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withPropertyName=function(e){return this.update(this.modifiers,e,this.callSignature,this.block,this.semicolonToken)},n.prototype.withCallSignature=function(e){return this.update(this.modifiers,this.propertyName,e,this.block,this.semicolonToken)},n.prototype.withBlock=function(e){return this.update(this.modifiers,this.propertyName,this.callSignature,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.propertyName,this.callSignature,this.block,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.MemberFunctionDeclarationSyntax=Z;var et=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.modifiers=e,this.getKeyword=n,this.propertyName=r,this.parameterList=i,this.typeAnnotation=s,this.block=o}return i(n,t),n.prototype.accept=function(e){return e.visitGetAccessor(this)},n.prototype.kind=function(){return 139},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.getKeyword;case 2:return this.propertyName;case 3:return this.parameterList;case 4:return this.typeAnnotation;case 5:return this.block;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberDeclaration=function(){return!0},n.prototype.isPropertyAssignment=function(){return!0},n.prototype.isClassElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o){return this.modifiers===e&&this.getKeyword===t&&this.propertyName===r&&this.parameterList===i&&this.typeAnnotation===s&&this.block===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(t,r,i,s){return new n(e.Syntax.emptyList,t,r,i,null,s,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,e.Syntax.token(64),t,X.create1(),null,M.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.getKeyword,this.propertyName,this.parameterList,this.typeAnnotation,this.block)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withGetKeyword=function(e){return this.update(this.modifiers,e,this.propertyName,this.parameterList,this.typeAnnotation,this.block)},n.prototype.withPropertyName=function(e){return this.update(this.modifiers,this.getKeyword,e,this.parameterList,this.typeAnnotation,this.block)},n.prototype.withParameterList=function(e){return this.update(this.modifiers,this.getKeyword,this.propertyName,e,this.typeAnnotation,this.block)},n.prototype.withTypeAnnotation=function(e){return this.update(this.modifiers,this.getKeyword,this.propertyName,this.parameterList,e,this.block)},n.prototype.withBlock=function(e){return this.update(this.modifiers,this.getKeyword,this.propertyName,this.parameterList,this.typeAnnotation,e)},n.prototype.isTypeScriptSpecific=function(){return this.modifiers.childCount()>0?!0:this.parameterList.isTypeScriptSpecific()?!0:this.typeAnnotation!==null?!0:this.block.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.GetAccessorSyntax=et;var tt=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.modifiers=e,this.setKeyword=n,this.propertyName=r,this.parameterList=i,this.block=s}return i(n,t),n.prototype.accept=function(e){return e.visitSetAccessor(this)},n.prototype.kind=function(){return 140},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.setKeyword;case 2:return this.propertyName;case 3:return this.parameterList;case 4:return this.block;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberDeclaration=function(){return!0},n.prototype.isPropertyAssignment=function(){return!0},n.prototype.isClassElement=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.modifiers===e&&this.setKeyword===t&&this.propertyName===r&&this.parameterList===i&&this.block===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create=function(t,r,i,s){return new n(e.Syntax.emptyList,t,r,i,s,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,e.Syntax.token(68),t,X.create1(),M.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.setKeyword,this.propertyName,this.parameterList,this.block)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withSetKeyword=function(e){return this.update(this.modifiers,e,this.propertyName,this.parameterList,this.block)},n.prototype.withPropertyName=function(e){return this.update(this.modifiers,this.setKeyword,e,this.parameterList,this.block)},n.prototype.withParameterList=function(e){return this.update(this.modifiers,this.setKeyword,this.propertyName,e,this.block)},n.prototype.withBlock=function(e){return this.update(this.modifiers,this.setKeyword,this.propertyName,this.parameterList,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.SetAccessorSyntax=tt;var nt=function(t){function n(e,n,r,i){t.call(this,i),this.modifiers=e,this.variableDeclarator=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitMemberVariableDeclaration(this)},n.prototype.kind=function(){return 136},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.variableDeclarator;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberDeclaration=function(){return!0},n.prototype.isClassElement=function(){return!0},n.prototype.update=function(e,t,r){return this.modifiers===e&&this.variableDeclarator===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(e.Syntax.emptyList,t,r,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,t,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.variableDeclarator,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withVariableDeclarator=function(e){return this.update(this.modifiers,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.variableDeclarator,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.MemberVariableDeclarationSyntax=nt;var rt=function(t){function n(e,n,r,i){t.call(this,i),this.modifiers=e,this.indexSignature=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitIndexMemberDeclaration(this)},n.prototype.kind=function(){return 138},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.indexSignature;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isClassElement=function(){return!0},n.prototype.update=function(e,t,r){return this.modifiers===e&&this.indexSignature===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(e.Syntax.emptyList,t,r,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,t,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.indexSignature,this.semicolonToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withIndexSignature=function(e){return this.update(this.modifiers,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.modifiers,this.indexSignature,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.IndexMemberDeclarationSyntax=rt;var it=function(t){function n(e,n,r,i){t.call(this,i),this.throwKeyword=e,this.expression=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitThrowStatement(this)},n.prototype.kind=function(){return 157},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.throwKeyword;case 1:return this.expression;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.throwKeyword===e&&this.expression===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(36),t,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withThrowKeyword=function(e){return this.update(e,this.expression,this.semicolonToken)},n.prototype.withExpression=function(e){return this.update(this.throwKeyword,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.throwKeyword,this.expression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ThrowStatementSyntax=it;var st=function(t){function n(e,n,r,i){t.call(this,i),this.returnKeyword=e,this.expression=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitReturnStatement(this)},n.prototype.kind=function(){return 150},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.returnKeyword;case 1:return this.expression;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.returnKeyword===e&&this.expression===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,null,t,!1)},n.create1=function(){return new n(e.Syntax.token(33),null,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withReturnKeyword=function(e){return this.update(e,this.expression,this.semicolonToken)},n.prototype.withExpression=function(e){return this.update(this.returnKeyword,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.returnKeyword,this.expression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression!==null&&this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ReturnStatementSyntax=st;var ot=function(t){function n(e,n,r,i){t.call(this,i),this.newKeyword=e,this.expression=n,this.argumentList=r}return i(n,t),n.prototype.accept=function(e){return e.visitObjectCreationExpression(this)},n.prototype.kind=function(){return 216},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.newKeyword;case 1:return this.expression;case 2:return this.argumentList;default:throw e.Errors.invalidOperation()}},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r){return this.newKeyword===e&&this.expression===t&&this.argumentList===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,t,null,!1)},n.create1=function(t){return new n(e.Syntax.token(31),t,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withNewKeyword=function(e){return this.update(e,this.expression,this.argumentList)},n.prototype.withExpression=function(e){return this.update(this.newKeyword,e,this.argumentList)},n.prototype.withArgumentList=function(e){return this.update(this.newKeyword,this.expression,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:this.argumentList!==null&&this.argumentList.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ObjectCreationExpressionSyntax=ot;var ut=function(t){function n(e,n,r,i,s,o,u,a){t.call(this,a),this.switchKeyword=e,this.openParenToken=n,this.expression=r,this.closeParenToken=i,this.openBraceToken=s,this.switchClauses=o,this.closeBraceToken=u}return i(n,t),n.prototype.accept=function(e){return e.visitSwitchStatement(this)},n.prototype.kind=function(){return 151},n.prototype.childCount=function(){return 7},n.prototype.childAt=function(t){switch(t){case 0:return this.switchKeyword;case 1:return this.openParenToken;case 2:return this.expression;case 3:return this.closeParenToken;case 4:return this.openBraceToken;case 5:return this.switchClauses;case 6:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o,u){return this.switchKeyword===e&&this.openParenToken===t&&this.expression===r&&this.closeParenToken===i&&this.openBraceToken===s&&this.switchClauses===o&&this.closeBraceToken===u?this:new n(e,t,r,i,s,o,u,this.parsedInStrictMode())},n.create=function(t,r,i,s,o,u){return new n(t,r,i,s,o,e.Syntax.emptyList,u,!1)},n.create1=function(t){return new n(e.Syntax.token(34),e.Syntax.token(72),t,e.Syntax.token(73),e.Syntax.token(70),e.Syntax.emptyList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withSwitchKeyword=function(e){return this.update(e,this.openParenToken,this.expression,this.closeParenToken,this.openBraceToken,this.switchClauses,this.closeBraceToken)},n.prototype.withOpenParenToken=function(e){return this.update(this.switchKeyword,e,this.expression,this.closeParenToken,this.openBraceToken,this.switchClauses,this.closeBraceToken)},n.prototype.withExpression=function(e){return this.update(this.switchKeyword,this.openParenToken,e,this.closeParenToken,this.openBraceToken,this.switchClauses,this.closeBraceToken)},n.prototype.withCloseParenToken=function(e){return this.update(this.switchKeyword,this.openParenToken,this.expression,e,this.openBraceToken,this.switchClauses,this.closeBraceToken)},n.prototype.withOpenBraceToken=function(e){return this.update(this.switchKeyword,this.openParenToken,this.expression,this.closeParenToken,e,this.switchClauses,this.closeBraceToken)},n.prototype.withSwitchClauses=function(e){return this.update(this.switchKeyword,this.openParenToken,this.expression,this.closeParenToken,this.openBraceToken,e,this.closeBraceToken)},n.prototype.withSwitchClause=function(t){return this.withSwitchClauses(e.Syntax.list([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.switchKeyword,this.openParenToken,this.expression,this.closeParenToken,this.openBraceToken,this.switchClauses,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:this.switchClauses.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.SwitchStatementSyntax=ut;var at=function(t){function n(e,n,r,i,s){t.call(this,s),this.caseKeyword=e,this.expression=n,this.colonToken=r,this.statements=i}return i(n,t),n.prototype.accept=function(e){return e.visitCaseSwitchClause(this)},n.prototype.kind=function(){return 233},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.caseKeyword;case 1:return this.expression;case 2:return this.colonToken;case 3:return this.statements;default:throw e.Errors.invalidOperation()}},n.prototype.isSwitchClause=function(){return!0},n.prototype.update=function(e,t,r,i){return this.caseKeyword===e&&this.expression===t&&this.colonToken===r&&this.statements===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(t,r,i){return new n(t,r,i,e.Syntax.emptyList,!1)},n.create1=function(t){return new n(e.Syntax.token(16),t,e.Syntax.token(106),e.Syntax.emptyList,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withCaseKeyword=function(e){return this.update(e,this.expression,this.colonToken,this.statements)},n.prototype.withExpression=function(e){return this.update(this.caseKeyword,e,this.colonToken,this.statements)},n.prototype.withColonToken=function(e){return this.update(this.caseKeyword,this.expression,e,this.statements)},n.prototype.withStatements=function(e){return this.update(this.caseKeyword,this.expression,this.colonToken,e)},n.prototype.withStatement=function(t){return this.withStatements(e.Syntax.list([t]))},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:this.statements.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.CaseSwitchClauseSyntax=at;var ft=function(t){function n(e,n,r,i){t.call(this,i),this.defaultKeyword=e,this.colonToken=n,this.statements=r}return i(n,t),n.prototype.accept=function(e){return e.visitDefaultSwitchClause(this)},n.prototype.kind=function(){return 234},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.defaultKeyword;case 1:return this.colonToken;case 2:return this.statements;default:throw e.Errors.invalidOperation()}},n.prototype.isSwitchClause=function(){return!0},n.prototype.update=function(e,t,r){return this.defaultKeyword===e&&this.colonToken===t&&this.statements===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,r,e.Syntax.emptyList,!1)},n.create1=function(){return new n(e.Syntax.token(20),e.Syntax.token(106),e.Syntax.emptyList,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withDefaultKeyword=function(e){return this.update(e,this.colonToken,this.statements)},n.prototype.withColonToken=function(e){return this.update(this.defaultKeyword,e,this.statements)},n.prototype.withStatements=function(e){return this.update(this.defaultKeyword,this.colonToken,e)},n.prototype.withStatement=function(t){return this.withStatements(e.Syntax.list([t]))},n.prototype.isTypeScriptSpecific=function(){return this.statements.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.DefaultSwitchClauseSyntax=ft;var lt=function(t){function n(e,n,r,i){t.call(this,i),this.breakKeyword=e,this.identifier=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitBreakStatement(this)},n.prototype.kind=function(){return 152},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.breakKeyword;case 1:return this.identifier;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.breakKeyword===e&&this.identifier===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,null,t,!1)},n.create1=function(){return new n(e.Syntax.token(15),null,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withBreakKeyword=function(e){return this.update(e,this.identifier,this.semicolonToken)},n.prototype.withIdentifier=function(e){return this.update(this.breakKeyword,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.breakKeyword,this.identifier,e)},n.prototype.isTypeScriptSpecific=function(){return!1},n}(e.SyntaxNode);e.BreakStatementSyntax=lt;var ct=function(t){function n(e,n,r,i){t.call(this,i),this.continueKeyword=e,this.identifier=n,this.semicolonToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitContinueStatement(this)},n.prototype.kind=function(){return 153},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.continueKeyword;case 1:return this.identifier;case 2:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.continueKeyword===e&&this.identifier===t&&this.semicolonToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,null,t,!1)},n.create1=function(){return new n(e.Syntax.token(18),null,e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withContinueKeyword=function(e){return this.update(e,this.identifier,this.semicolonToken)},n.prototype.withIdentifier=function(e){return this.update(this.continueKeyword,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.continueKeyword,this.identifier,e)},n.prototype.isTypeScriptSpecific=function(){return!1},n}(e.SyntaxNode);e.ContinueStatementSyntax=ct;var ht=function(t){function n(e,n,r,i,s,o,u,a,f,l,c){t.call(this,c),this.forKeyword=e,this.openParenToken=n,this.variableDeclaration=r,this.initializer=i,this.firstSemicolonToken=s,this.condition=o,this.secondSemicolonToken=u,this.incrementor=a,this.closeParenToken=f,this.statement=l}return i(n,t),n.prototype.accept=function(e){return e.visitForStatement(this)},n.prototype.kind=function(){return 154},n.prototype.childCount=function(){return 10},n.prototype.childAt=function(t){switch(t){case 0:return this.forKeyword;case 1:return this.openParenToken;case 2:return this.variableDeclaration;case 3:return this.initializer;case 4:return this.firstSemicolonToken;case 5:return this.condition;case 6:return this.secondSemicolonToken;case 7:return this.incrementor;case 8:return this.closeParenToken;case 9:return this.statement;default:throw e.Errors.invalidOperation()}},n.prototype.isIterationStatement=function(){return!0},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o,u,a,f,l){return this.forKeyword===e&&this.openParenToken===t&&this.variableDeclaration===r&&this.initializer===i&&this.firstSemicolonToken===s&&this.condition===o&&this.secondSemicolonToken===u&&this.incrementor===a&&this.closeParenToken===f&&this.statement===l?this:new n(e,t,r,i,s,o,u,a,f,l,this.parsedInStrictMode())},n.create=function(e,t,r,i,s,o){return new n(e,t,null,null,r,null,i,null,s,o,!1)},n.create1=function(t){return new n(e.Syntax.token(26),e.Syntax.token(72),null,null,e.Syntax.token(78),null,e.Syntax.token(78),null,e.Syntax.token(73),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withForKeyword=function(e){return this.update(e,this.openParenToken,this.variableDeclaration,this.initializer,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withOpenParenToken=function(e){return this.update(this.forKeyword,e,this.variableDeclaration,this.initializer,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withVariableDeclaration=function(e){return this.update(this.forKeyword,this.openParenToken,e,this.initializer,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withInitializer=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,e,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withFirstSemicolonToken=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.initializer,e,this.condition,this.secondSemicolonToken,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withCondition=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.initializer,this.firstSemicolonToken,e,this.secondSemicolonToken,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withSecondSemicolonToken=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.initializer,this.firstSemicolonToken,this.condition,e,this.incrementor,this.closeParenToken,this.statement)},n.prototype.withIncrementor=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.initializer,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,e,this.closeParenToken,this.statement)},n.prototype.withCloseParenToken=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.initializer,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,this.incrementor,e,this.statement)},n.prototype.withStatement=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.initializer,this.firstSemicolonToken,this.condition,this.secondSemicolonToken,this.incrementor,this.closeParenToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.variableDeclaration!==null&&this.variableDeclaration.isTypeScriptSpecific()?!0:this.initializer!==null&&this.initializer.isTypeScriptSpecific()?!0:this.condition!==null&&this.condition.isTypeScriptSpecific()?!0:this.incrementor!==null&&this.incrementor.isTypeScriptSpecific()?!0:this.statement.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ForStatementSyntax=ht;var pt=function(t){function n(e,n,r,i,s,o,u,a,f){t.call(this,f),this.forKeyword=e,this.openParenToken=n,this.variableDeclaration=r,this.left=i,this.inKeyword=s,this.expression=o,this.closeParenToken=u,this.statement=a}return i(n,t),n.prototype.accept=function(e){return e.visitForInStatement(this)},n.prototype.kind=function(){return 155},n.prototype.childCount=function(){return 8},n.prototype.childAt=function(t){switch(t){case 0:return this.forKeyword;case 1:return this.openParenToken;case 2:return this.variableDeclaration;case 3:return this.left;case 4:return this.inKeyword;case 5:return this.expression;case 6:return this.closeParenToken;case 7:return this.statement;default:throw e.Errors.invalidOperation()}},n.prototype.isIterationStatement=function(){return!0},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o,u,a){return this.forKeyword===e&&this.openParenToken===t&&this.variableDeclaration===r&&this.left===i&&this.inKeyword===s&&this.expression===o&&this.closeParenToken===u&&this.statement===a?this:new n(e,t,r,i,s,o,u,a,this.parsedInStrictMode())},n.create=function(e,t,r,i,s,o){return new n(e,t,null,null,r,i,s,o,!1)},n.create1=function(t,r){return new n(e.Syntax.token(26),e.Syntax.token(72),null,null,e.Syntax.token(29),t,e.Syntax.token(73),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withForKeyword=function(e){return this.update(e,this.openParenToken,this.variableDeclaration,this.left,this.inKeyword,this.expression,this.closeParenToken,this.statement)},n.prototype.withOpenParenToken=function(e){return this.update(this.forKeyword,e,this.variableDeclaration,this.left,this.inKeyword,this.expression,this.closeParenToken,this.statement)},n.prototype.withVariableDeclaration=function(e){return this.update(this.forKeyword,this.openParenToken,e,this.left,this.inKeyword,this.expression,this.closeParenToken,this.statement)},n.prototype.withLeft=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,e,this.inKeyword,this.expression,this.closeParenToken,this.statement)},n.prototype.withInKeyword=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.left,e,this.expression,this.closeParenToken,this.statement)},n.prototype.withExpression=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.left,this.inKeyword,e,this.closeParenToken,this.statement)},n.prototype.withCloseParenToken=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.left,this.inKeyword,this.expression,e,this.statement)},n.prototype.withStatement=function(e){return this.update(this.forKeyword,this.openParenToken,this.variableDeclaration,this.left,this.inKeyword,this.expression,this.closeParenToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.variableDeclaration!==null&&this.variableDeclaration.isTypeScriptSpecific()?!0:this.left!==null&&this.left.isTypeScriptSpecific()?!0:this.expression.isTypeScriptSpecific()?!0:this.statement.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ForInStatementSyntax=pt;var dt=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.whileKeyword=e,this.openParenToken=n,this.condition=r,this.closeParenToken=i,this.statement=s}return i(n,t),n.prototype.accept=function(e){return e.visitWhileStatement(this)},n.prototype.kind=function(){return 158},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.whileKeyword;case 1:return this.openParenToken;case 2:return this.condition;case 3:return this.closeParenToken;case 4:return this.statement;default:throw e.Errors.invalidOperation()}},n.prototype.isIterationStatement=function(){return!0},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.whileKeyword===e&&this.openParenToken===t&&this.condition===r&&this.closeParenToken===i&&this.statement===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create1=function(t,r){return new n(e.Syntax.token(42),e.Syntax.token(72),t,e.Syntax.token(73),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withWhileKeyword=function(e){return this.update(e,this.openParenToken,this.condition,this.closeParenToken,this.statement)},n.prototype.withOpenParenToken=function(e){return this.update(this.whileKeyword,e,this.condition,this.closeParenToken,this.statement)},n.prototype.withCondition=function(e){return this.update(this.whileKeyword,this.openParenToken,e,this.closeParenToken,this.statement)},n.prototype.withCloseParenToken=function(e){return this.update(this.whileKeyword,this.openParenToken,this.condition,e,this.statement)},n.prototype.withStatement=function(e){return this.update(this.whileKeyword,this.openParenToken,this.condition,this.closeParenToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.condition.isTypeScriptSpecific()?!0:this.statement.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.WhileStatementSyntax=dt;var vt=function(t){function n(e,n,r,i,s,o){t.call(this,o),this.withKeyword=e,this.openParenToken=n,this.condition=r,this.closeParenToken=i,this.statement=s}return i(n,t),n.prototype.accept=function(e){return e.visitWithStatement(this)},n.prototype.kind=function(){return 163},n.prototype.childCount=function(){return 5},n.prototype.childAt=function(t){switch(t){case 0:return this.withKeyword;case 1:return this.openParenToken;case 2:return this.condition;case 3:return this.closeParenToken;case 4:return this.statement;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s){return this.withKeyword===e&&this.openParenToken===t&&this.condition===r&&this.closeParenToken===i&&this.statement===s?this:new n(e,t,r,i,s,this.parsedInStrictMode())},n.create1=function(t,r){return new n(e.Syntax.token(43),e.Syntax.token(72),t,e.Syntax.token(73),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withWithKeyword=function(e){return this.update(e,this.openParenToken,this.condition,this.closeParenToken,this.statement)},n.prototype.withOpenParenToken=function(e){return this.update(this.withKeyword,e,this.condition,this.closeParenToken,this.statement)},n.prototype.withCondition=function(e){return this.update(this.withKeyword,this.openParenToken,e,this.closeParenToken,this.statement)},n.prototype.withCloseParenToken=function(e){return this.update(this.withKeyword,this.openParenToken,this.condition,e,this.statement)},n.prototype.withStatement=function(e){return this.update(this.withKeyword,this.openParenToken,this.condition,this.closeParenToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.condition.isTypeScriptSpecific()?!0:this.statement.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.WithStatementSyntax=vt;var mt=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.modifiers=e,this.enumKeyword=n,this.identifier=r,this.openBraceToken=i,this.enumElements=s,this.closeBraceToken=o}return i(n,t),n.prototype.accept=function(e){return e.visitEnumDeclaration(this)},n.prototype.kind=function(){return 132},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.modifiers;case 1:return this.enumKeyword;case 2:return this.identifier;case 3:return this.openBraceToken;case 4:return this.enumElements;case 5:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o){return this.modifiers===e&&this.enumKeyword===t&&this.identifier===r&&this.openBraceToken===i&&this.enumElements===s&&this.closeBraceToken===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(t,r,i,s){return new n(e.Syntax.emptyList,t,r,i,e.Syntax.emptySeparatedList,s,!1)},n.create1=function(t){return new n(e.Syntax.emptyList,e.Syntax.token(46),t,e.Syntax.token(70),e.Syntax.emptySeparatedList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withModifiers=function(e){return this.update(e,this.enumKeyword,this.identifier,this.openBraceToken,this.enumElements,this.closeBraceToken)},n.prototype.withModifier=function(t){return this.withModifiers(e.Syntax.list([t]))},n.prototype.withEnumKeyword=function(e){return this.update(this.modifiers,e,this.identifier,this.openBraceToken,this.enumElements,this.closeBraceToken)},n.prototype.withIdentifier=function(e){return this.update(this.modifiers,this.enumKeyword,e,this.openBraceToken,this.enumElements,this.closeBraceToken)},n.prototype.withOpenBraceToken=function(e){return this.update(this.modifiers,this.enumKeyword,this.identifier,e,this.enumElements,this.closeBraceToken)},n.prototype.withEnumElements=function(e){return this.update(this.modifiers,this.enumKeyword,this.identifier,this.openBraceToken,e,this.closeBraceToken)},n.prototype.withEnumElement=function(t){return this.withEnumElements(e.Syntax.separatedList([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.modifiers,this.enumKeyword,this.identifier,this.openBraceToken,this.enumElements,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.EnumDeclarationSyntax=mt;var gt=function(t){function n(e,n,r){t.call(this,r),this.propertyName=e,this.equalsValueClause=n}return i(n,t),n.prototype.accept=function(e){return e.visitEnumElement(this)},n.prototype.kind=function(){return 243},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.propertyName;case 1:return this.equalsValueClause;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.propertyName===e&&this.equalsValueClause===t?this:new n(e,t,this.parsedInStrictMode())},n.create=function(e){return new n(e,null,!1)},n.create1=function(e){return new n(e,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withPropertyName=function(e){return this.update(e,this.equalsValueClause)},n.prototype.withEqualsValueClause=function(e){return this.update(this.propertyName,e)},n.prototype.isTypeScriptSpecific=function(){return this.equalsValueClause!==null&&this.equalsValueClause.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.EnumElementSyntax=gt;var yt=function(t){function n(e,n,r,i,s){t.call(this,s),this.lessThanToken=e,this.type=n,this.greaterThanToken=r,this.expression=i}return i(n,t),n.prototype.accept=function(e){return e.visitCastExpression(this)},n.prototype.kind=function(){return 220},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.lessThanToken;case 1:return this.type;case 2:return this.greaterThanToken;case 3:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r,i){return this.lessThanToken===e&&this.type===t&&this.greaterThanToken===r&&this.expression===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create1=function(t,r){return new n(e.Syntax.token(80),t,e.Syntax.token(81),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withLessThanToken=function(e){return this.update(e,this.type,this.greaterThanToken,this.expression)},n.prototype.withType=function(e){return this.update(this.lessThanToken,e,this.greaterThanToken,this.expression)},n.prototype.withGreaterThanToken=function(e){return this.update(this.lessThanToken,this.type,e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.lessThanToken,this.type,this.greaterThanToken,e)},n.prototype.isTypeScriptSpecific=function(){return!0},n}(e.SyntaxNode);e.CastExpressionSyntax=yt;var bt=function(t){function n(e,n,r,i){t.call(this,i),this.openBraceToken=e,this.propertyAssignments=n,this.closeBraceToken=r}return i(n,t),n.prototype.accept=function(e){return e.visitObjectLiteralExpression(this)},n.prototype.kind=function(){return 215},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.openBraceToken;case 1:return this.propertyAssignments;case 2:return this.closeBraceToken;default:throw e.Errors.invalidOperation()}},n.prototype.isPrimaryExpression=function(){return!0},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r){return this.openBraceToken===e&&this.propertyAssignments===t&&this.closeBraceToken===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create=function(t,r){return new n(t,e.Syntax.emptySeparatedList,r,!1)},n.create1=function(){return new n(e.Syntax.token(70),e.Syntax.emptySeparatedList,e.Syntax.token(71),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withOpenBraceToken=function(e){return this.update(e,this.propertyAssignments,this.closeBraceToken)},n.prototype.withPropertyAssignments=function(e){return this.update(this.openBraceToken,e,this.closeBraceToken)},n.prototype.withPropertyAssignment=function(t){return this.withPropertyAssignments(e.Syntax.separatedList([t]))},n.prototype.withCloseBraceToken=function(e){return this.update(this.openBraceToken,this.propertyAssignments,e)},n.prototype.isTypeScriptSpecific=function(){return this.propertyAssignments.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.ObjectLiteralExpressionSyntax=bt;var wt=function(t){function n(e,n,r,i){t.call(this,i),this.propertyName=e,this.colonToken=n,this.expression=r}return i(n,t),n.prototype.accept=function(e){return e.visitSimplePropertyAssignment(this)},n.prototype.kind=function(){return 240},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.propertyName;case 1:return this.colonToken;case 2:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isPropertyAssignment=function(){return!0},n.prototype.update=function(e,t,r){return this.propertyName===e&&this.colonToken===t&&this.expression===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t,r){return new n(t,e.Syntax.token(106),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withPropertyName=function(e){return this.update(e,this.colonToken,this.expression)},n.prototype.withColonToken=function(e){return this.update(this.propertyName,e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.propertyName,this.colonToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.SimplePropertyAssignmentSyntax=wt;var Et=function(t){function n(e,n,r,i){t.call(this,i),this.propertyName=e,this.callSignature=n,this.block=r}return i(n,t),n.prototype.accept=function(e){return e.visitFunctionPropertyAssignment(this)},n.prototype.kind=function(){return 241},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.propertyName;case 1:return this.callSignature;case 2:return this.block;default:throw e.Errors.invalidOperation()}},n.prototype.isPropertyAssignment=function(){return!0},n.prototype.update=function(e,t,r){return this.propertyName===e&&this.callSignature===t&&this.block===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(e){return new n(e,W.create1(),M.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withPropertyName=function(e){return this.update(e,this.callSignature,this.block)},n.prototype.withCallSignature=function(e){return this.update(this.propertyName,e,this.block)},n.prototype.withBlock=function(e){return this.update(this.propertyName,this.callSignature,e)},n.prototype.isTypeScriptSpecific=function(){return this.callSignature.isTypeScriptSpecific()?!0:this.block.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.FunctionPropertyAssignmentSyntax=Et;var St=function(t){function n(e,n,r,i,s){t.call(this,s),this.functionKeyword=e,this.identifier=n,this.callSignature=r,this.block=i}return i(n,t),n.prototype.accept=function(e){return e.visitFunctionExpression(this)},n.prototype.kind=function(){return 222},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.functionKeyword;case 1:return this.identifier;case 2:return this.callSignature;case 3:return this.block;default:throw e.Errors.invalidOperation()}},n.prototype.isPrimaryExpression=function(){return!0},n.prototype.isMemberExpression=function(){return!0},n.prototype.isPostfixExpression=function(){return!0},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t,r,i){return this.functionKeyword===e&&this.identifier===t&&this.callSignature===r&&this.block===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(e,t,r){return new n(e,null,t,r,!1)},n.create1=function(){return new n(e.Syntax.token(27),null,W.create1(),M.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withFunctionKeyword=function(e){return this.update(e,this.identifier,this.callSignature,this.block)},n.prototype.withIdentifier=function(e){return this.update(this.functionKeyword,e,this.callSignature,this.block)},n.prototype.withCallSignature=function(e){return this.update(this.functionKeyword,this.identifier,e,this.block)},n.prototype.withBlock=function(e){return this.update(this.functionKeyword,this.identifier,this.callSignature,e)},n.prototype.isTypeScriptSpecific=function(){return this.callSignature.isTypeScriptSpecific()?!0:this.block.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.FunctionExpressionSyntax=St;var xt=function(t){function n(e,n){t.call(this,n),this.semicolonToken=e}return i(n,t),n.prototype.accept=function(e){return e.visitEmptyStatement(this)},n.prototype.kind=function(){return 156},n.prototype.childCount=function(){return 1},n.prototype.childAt=function(t){switch(t){case 0:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e){return this.semicolonToken===e?this:new n(e,this.parsedInStrictMode())},n.create1=function(){return new n(e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withSemicolonToken=function(e){return this.update(e)},n.prototype.isTypeScriptSpecific=function(){return!1},n}(e.SyntaxNode);e.EmptyStatementSyntax=xt;var Tt=function(t){function n(e,n,r,i,s){t.call(this,s),this.tryKeyword=e,this.block=n,this.catchClause=r,this.finallyClause=i}return i(n,t),n.prototype.accept=function(e){return e.visitTryStatement(this)},n.prototype.kind=function(){return 159},n.prototype.childCount=function(){return 4},n.prototype.childAt=function(t){switch(t){case 0:return this.tryKeyword;case 1:return this.block;case 2:return this.catchClause;case 3:return this.finallyClause;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i){return this.tryKeyword===e&&this.block===t&&this.catchClause===r&&this.finallyClause===i?this:new n(e,t,r,i,this.parsedInStrictMode())},n.create=function(e,t){return new n(e,t,null,null,!1)},n.create1=function(){return new n(e.Syntax.token(38),M.create1(),null,null,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withTryKeyword=function(e){return this.update(e,this.block,this.catchClause,this.finallyClause)},n.prototype.withBlock=function(e){return this.update(this.tryKeyword,e,this.catchClause,this.finallyClause)},n.prototype.withCatchClause=function(e){return this.update(this.tryKeyword,this.block,e,this.finallyClause)},n.prototype.withFinallyClause=function(e){return this.update(this.tryKeyword,this.block,this.catchClause,e)},n.prototype.isTypeScriptSpecific=function(){return this.block.isTypeScriptSpecific()?!0:this.catchClause!==null&&this.catchClause.isTypeScriptSpecific()?!0:this.finallyClause!==null&&this.finallyClause.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.TryStatementSyntax=Tt;var Nt=function(t){function n(e,n,r,i,s,o,u){t.call(this,u),this.catchKeyword=e,this.openParenToken=n,this.identifier=r,this.typeAnnotation=i,this.closeParenToken=s,this.block=o}return i(n,t),n.prototype.accept=function(e){return e.visitCatchClause(this)},n.prototype.kind=function(){return 236},n.prototype.childCount=function(){return 6},n.prototype.childAt=function(t){switch(t){case 0:return this.catchKeyword;case 1:return this.openParenToken;case 2:return this.identifier;case 3:return this.typeAnnotation;case 4:return this.closeParenToken;case 5:return this.block;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t,r,i,s,o){return this.catchKeyword===e&&this.openParenToken===t&&this.identifier===r&&this.typeAnnotation===i&&this.closeParenToken===s&&this.block===o?this:new n(e,t,r,i,s,o,this.parsedInStrictMode())},n.create=function(e,t,r,i,s){return new n(e,t,r,null,i,s,!1)},n.create1=function(t){return new n(e.Syntax.token(17),e.Syntax.token(72),t,null,e.Syntax.token(73),M.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withCatchKeyword=function(e){return this.update(e,this.openParenToken,this.identifier,this.typeAnnotation,this.closeParenToken,this.block)},n.prototype.withOpenParenToken=function(e){return this.update(this.catchKeyword,e,this.identifier,this.typeAnnotation,this.closeParenToken,this.block)},n.prototype.withIdentifier=function(e){return this.update(this.catchKeyword,this.openParenToken,e,this.typeAnnotation,this.closeParenToken,this.block)},n.prototype.withTypeAnnotation=function(e){return this.update(this.catchKeyword,this.openParenToken,this.identifier,e,this.closeParenToken,this.block)},n.prototype.withCloseParenToken=function(e){return this.update(this.catchKeyword,this.openParenToken,this.identifier,this.typeAnnotation,e,this.block)},n.prototype.withBlock=function(e){return this.update(this.catchKeyword,this.openParenToken,this.identifier,this.typeAnnotation,this.closeParenToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.typeAnnotation!==null&&this.typeAnnotation.isTypeScriptSpecific()?!0:this.block.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.CatchClauseSyntax=Nt;var Ct=function(t){function n(e,n,r){t.call(this,r),this.finallyKeyword=e,this.block=n}return i(n,t),n.prototype.accept=function(e){return e.visitFinallyClause(this)},n.prototype.kind=function(){return 237},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.finallyKeyword;case 1:return this.block;default:throw e.Errors.invalidOperation()}},n.prototype.update=function(e,t){return this.finallyKeyword===e&&this.block===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(){return new n(e.Syntax.token(25),M.create1(),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withFinallyKeyword=function(e){return this.update(e,this.block)},n.prototype.withBlock=function(e){return this.update(this.finallyKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return this.block.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.FinallyClauseSyntax=Ct;var kt=function(t){function n(e,n,r,i){t.call(this,i),this.identifier=e,this.colonToken=n,this.statement=r}return i(n,t),n.prototype.accept=function(e){return e.visitLabeledStatement(this)},n.prototype.kind=function(){return 160},n.prototype.childCount=function(){return 3},n.prototype.childAt=function(t){switch(t){case 0:return this.identifier;case 1:return this.colonToken;case 2:return this.statement;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r){return this.identifier===e&&this.colonToken===t&&this.statement===r?this:new n(e,t,r,this.parsedInStrictMode())},n.create1=function(t,r){return new n(t,e.Syntax.token(106),r,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withIdentifier=function(e){return this.update(e,this.colonToken,this.statement)},n.prototype.withColonToken=function(e){return this.update(this.identifier,e,this.statement)},n.prototype.withStatement=function(e){return this.update(this.identifier,this.colonToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.statement.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.LabeledStatementSyntax=kt;var Lt=function(t){function n(e,n,r,i,s,o,u,a){t.call(this,a),this.doKeyword=e,this.statement=n,this.whileKeyword=r,this.openParenToken=i,this.condition=s,this.closeParenToken=o,this.semicolonToken=u}return i(n,t),n.prototype.accept=function(e){return e.visitDoStatement(this)},n.prototype.kind=function(){return 161},n.prototype.childCount=function(){return 7},n.prototype.childAt=function(t){switch(t){case 0:return this.doKeyword;case 1:return this.statement;case 2:return this.whileKeyword;case 3:return this.openParenToken;case 4:return this.condition;case 5:return this.closeParenToken;case 6:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isIterationStatement=function(){return!0},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t,r,i,s,o,u){return this.doKeyword===e&&this.statement===t&&this.whileKeyword===r&&this.openParenToken===i&&this.condition===s&&this.closeParenToken===o&&this.semicolonToken===u?this:new n(e,t,r,i,s,o,u,this.parsedInStrictMode())},n.create1=function(t,r){return new n(e.Syntax.token(22),t,e.Syntax.token(42),e.Syntax.token(72),r,e.Syntax.token(73),e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withDoKeyword=function(e){return this.update(e,this.statement,this.whileKeyword,this.openParenToken,this.condition,this.closeParenToken,this.semicolonToken)},n.prototype.withStatement=function(e){return this.update(this.doKeyword,e,this.whileKeyword,this.openParenToken,this.condition,this.closeParenToken,this.semicolonToken)},n.prototype.withWhileKeyword=function(e){return this.update(this.doKeyword,this.statement,e,this.openParenToken,this.condition,this.closeParenToken,this.semicolonToken)},n.prototype.withOpenParenToken=function(e){return this.update(this.doKeyword,this.statement,this.whileKeyword,e,this.condition,this.closeParenToken,this.semicolonToken)},n.prototype.withCondition=function(e){return this.update(this.doKeyword,this.statement,this.whileKeyword,this.openParenToken,e,this.closeParenToken,this.semicolonToken)},n.prototype.withCloseParenToken=function(e){return this.update(this.doKeyword,this.statement,this.whileKeyword,this.openParenToken,this.condition,e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.doKeyword,this.statement,this.whileKeyword,this.openParenToken,this.condition,this.closeParenToken,e)},n.prototype.isTypeScriptSpecific=function(){return this.statement.isTypeScriptSpecific()?!0:this.condition.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.DoStatementSyntax=Lt;var At=function(t){function n(e,n,r){t.call(this,r),this.typeOfKeyword=e,this.expression=n}return i(n,t),n.prototype.accept=function(e){return e.visitTypeOfExpression(this)},n.prototype.kind=function(){return 171},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.typeOfKeyword;case 1:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t){return this.typeOfKeyword===e&&this.expression===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(39),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withTypeOfKeyword=function(e){return this.update(e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.typeOfKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.TypeOfExpressionSyntax=At;var Ot=function(t){function n(e,n,r){t.call(this,r),this.deleteKeyword=e,this.expression=n}return i(n,t),n.prototype.accept=function(e){return e.visitDeleteExpression(this)},n.prototype.kind=function(){return 170},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.deleteKeyword;case 1:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t){return this.deleteKeyword===e&&this.expression===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(21),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withDeleteKeyword=function(e){return this.update(e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.deleteKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.DeleteExpressionSyntax=Ot;var Mt=function(t){function n(e,n,r){t.call(this,r),this.voidKeyword=e,this.expression=n}return i(n,t),n.prototype.accept=function(e){return e.visitVoidExpression(this)},n.prototype.kind=function(){return 172},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.voidKeyword;case 1:return this.expression;default:throw e.Errors.invalidOperation()}},n.prototype.isUnaryExpression=function(){return!0},n.prototype.isExpression=function(){return!0},n.prototype.update=function(e,t){return this.voidKeyword===e&&this.expression===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(t){return new n(e.Syntax.token(41),t,!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withVoidKeyword=function(e){return this.update(e,this.expression)},n.prototype.withExpression=function(e){return this.update(this.voidKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return this.expression.isTypeScriptSpecific()?!0:!1},n}(e.SyntaxNode);e.VoidExpressionSyntax=Mt;var _t=function(t){function n(e,n,r){t.call(this,r),this.debuggerKeyword=e,this.semicolonToken=n}return i(n,t),n.prototype.accept=function(e){return e.visitDebuggerStatement(this)},n.prototype.kind=function(){return 162},n.prototype.childCount=function(){return 2},n.prototype.childAt=function(t){switch(t){case 0:return this.debuggerKeyword;case 1:return this.semicolonToken;default:throw e.Errors.invalidOperation()}},n.prototype.isStatement=function(){return!0},n.prototype.isModuleElement=function(){return!0},n.prototype.update=function(e,t){return this.debuggerKeyword===e&&this.semicolonToken===t?this:new n(e,t,this.parsedInStrictMode())},n.create1=function(){return new n(e.Syntax.token(19),e.Syntax.token(78),!1)},n.prototype.withLeadingTrivia=function(e){return t.prototype.withLeadingTrivia.call(this,e)},n.prototype.withTrailingTrivia=function(e){return t.prototype.withTrailingTrivia.call(this,e)},n.prototype.withDebuggerKeyword=function(e){return this.update(e,this.semicolonToken)},n.prototype.withSemicolonToken=function(e){return this.update(this.debuggerKeyword,e)},n.prototype.isTypeScriptSpecific=function(){return!1},n}(e.SyntaxNode);e.DebuggerStatementSyntax=_t})(r||(r={}));var r;(function(e){var t=function(){function t(){}return t.prototype.visitToken=function(e){return e},t.prototype.visitNode=function(e){return e.accept(this)},t.prototype.visitNodeOrToken=function(e){return e.isToken()?this.visitToken(e):this.visitNode(e)},t.prototype.visitList=function(t){var n=null;for(var r=0,i=t.childCount();r<i;r++){var s=t.childAt(r),o=this.visitNodeOrToken(s);if(s!==o&&n===null){n=[];for(var u=0;u<r;u++)n.push(t.childAt(u))}n&&n.push(o)}return n===null?t:e.Syntax.list(n)},t.prototype.visitSeparatedList=function(t){var n=null;for(var r=0,i=t.childCount();r<i;r++){var s=t.childAt(r),o=s.isToken()?this.visitToken(s):this.visitNode(s);if(s!==o&&n===null){n=[];for(var u=0;u<r;u++)n.push(t.childAt(u))}n&&n.push(o)}return n===null?t:e.Syntax.separatedList(n)},t.prototype.visitSourceUnit=function(e){return e.update(this.visitList(e.moduleElements),this.visitToken(e.endOfFileToken))},t.prototype.visitExternalModuleReference=function(e){return e.update(this.visitToken(e.requireKeyword),this.visitToken(e.openParenToken),this.visitToken(e.stringLiteral),this.visitToken(e.closeParenToken))},t.prototype.visitModuleNameModuleReference=function(e){return e.update(this.visitNodeOrToken(e.moduleName))},t.prototype.visitImportDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.importKeyword),this.visitToken(e.identifier),this.visitToken(e.equalsToken),this.visitNodeOrToken(e.moduleReference),this.visitToken(e.semicolonToken))},t.prototype.visitExportAssignment=function(e){return e.update(this.visitToken(e.exportKeyword),this.visitToken(e.equalsToken),this.visitToken(e.identifier),this.visitToken(e.semicolonToken))},t.prototype.visitClassDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.classKeyword),this.visitToken(e.identifier),e.typeParameterList===null?null:this.visitNode(e.typeParameterList),this.visitList(e.heritageClauses),this.visitToken(e.openBraceToken),this.visitList(e.classElements),this.visitToken(e.closeBraceToken))},t.prototype.visitInterfaceDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.interfaceKeyword),this.visitToken(e.identifier),e.typeParameterList===null?null:this.visitNode(e.typeParameterList),this.visitList(e.heritageClauses),this.visitNode(e.body))},t.prototype.visitHeritageClause=function(e){return e.update(e.kind(),this.visitToken(e.extendsOrImplementsKeyword),this.visitSeparatedList(e.typeNames))},t.prototype.visitModuleDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.moduleKeyword),e.name===null?null:this.visitNodeOrToken(e.name),e.stringLiteral===null?null:this.visitToken(e.stringLiteral),this.visitToken(e.openBraceToken),this.visitList(e.moduleElements),this.visitToken(e.closeBraceToken))},t.prototype.visitFunctionDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.functionKeyword),this.visitToken(e.identifier),this.visitNode(e.callSignature),e.block===null?null:this.visitNode(e.block),e.semicolonToken===null?null:this.visitToken(e.semicolonToken))},t.prototype.visitVariableStatement=function(e){return e.update(this.visitList(e.modifiers),this.visitNode(e.variableDeclaration),this.visitToken(e.semicolonToken))},t.prototype.visitVariableDeclaration=function(e){return e.update(this.visitToken(e.varKeyword),this.visitSeparatedList(e.variableDeclarators))},t.prototype.visitVariableDeclarator=function(e){return e.update(this.visitToken(e.propertyName),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation),e.equalsValueClause===null?null:this.visitNode(e.equalsValueClause))},t.prototype.visitEqualsValueClause=function(e){return e.update(this.visitToken(e.equalsToken),this.visitNodeOrToken(e.value))},t.prototype.visitPrefixUnaryExpression=function(e){return e.update(e.kind(),this.visitToken(e.operatorToken),this.visitNodeOrToken(e.operand))},t.prototype.visitArrayLiteralExpression=function(e){return e.update(this.visitToken(e.openBracketToken),this.visitSeparatedList(e.expressions),this.visitToken(e.closeBracketToken))},t.prototype.visitOmittedExpression=function(e){return e},t.prototype.visitParenthesizedExpression=function(e){return e.update(this.visitToken(e.openParenToken),this.visitNodeOrToken(e.expression),this.visitToken(e.closeParenToken))},t.prototype.visitSimpleArrowFunctionExpression=function(e){return e.update(this.visitToken(e.identifier),this.visitToken(e.equalsGreaterThanToken),e.block===null?null:this.visitNode(e.block),e.expression===null?null:this.visitNodeOrToken(e.expression))},t.prototype.visitParenthesizedArrowFunctionExpression=function(e){return e.update(this.visitNode(e.callSignature),this.visitToken(e.equalsGreaterThanToken),e.block===null?null:this.visitNode(e.block),e.expression===null?null:this.visitNodeOrToken(e.expression))},t.prototype.visitQualifiedName=function(e){return e.update(this.visitNodeOrToken(e.left),this.visitToken(e.dotToken),this.visitToken(e.right))},t.prototype.visitTypeArgumentList=function(e){return e.update(this.visitToken(e.lessThanToken),this.visitSeparatedList(e.typeArguments),this.visitToken(e.greaterThanToken))},t.prototype.visitConstructorType=function(e){return e.update(this.visitToken(e.newKeyword),e.typeParameterList===null?null:this.visitNode(e.typeParameterList),this.visitNode(e.parameterList),this.visitToken(e.equalsGreaterThanToken),this.visitNodeOrToken(e.type))},t.prototype.visitFunctionType=function(e){return e.update(e.typeParameterList===null?null:this.visitNode(e.typeParameterList),this.visitNode(e.parameterList),this.visitToken(e.equalsGreaterThanToken),this.visitNodeOrToken(e.type))},t.prototype.visitObjectType=function(e){return e.update(this.visitToken(e.openBraceToken),this.visitSeparatedList(e.typeMembers),this.visitToken(e.closeBraceToken))},t.prototype.visitArrayType=function(e){return e.update(this.visitNodeOrToken(e.type),this.visitToken(e.openBracketToken),this.visitToken(e.closeBracketToken))},t.prototype.visitGenericType=function(e){return e.update(this.visitNodeOrToken(e.name),this.visitNode(e.typeArgumentList))},t.prototype.visitTypeQuery=function(e){return e.update(this.visitToken(e.typeOfKeyword),this.visitNodeOrToken(e.name))},t.prototype.visitTypeAnnotation=function(e){return e.update(this.visitToken(e.colonToken),this.visitNodeOrToken(e.type))},t.prototype.visitBlock=function(e){return e.update(this.visitToken(e.openBraceToken),this.visitList(e.statements),this.visitToken(e.closeBraceToken))},t.prototype.visitParameter=function(e){return e.update(e.dotDotDotToken===null?null:this.visitToken(e.dotDotDotToken),this.visitList(e.modifiers),this.visitToken(e.identifier),e.questionToken===null?null:this.visitToken(e.questionToken),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation),e.equalsValueClause===null?null:this.visitNode(e.equalsValueClause))},t.prototype.visitMemberAccessExpression=function(e){return e.update(this.visitNodeOrToken(e.expression),this.visitToken(e.dotToken),this.visitToken(e.name))},t.prototype.visitPostfixUnaryExpression=function(e){return e.update(e.kind(),this.visitNodeOrToken(e.operand),this.visitToken(e.operatorToken))},t.prototype.visitElementAccessExpression=function(e){return e.update(this.visitNodeOrToken(e.expression),this.visitToken(e.openBracketToken),this.visitNodeOrToken(e.argumentExpression),this.visitToken(e.closeBracketToken))},t.prototype.visitInvocationExpression=function(e){return e.update(this.visitNodeOrToken(e.expression),this.visitNode(e.argumentList))},t.prototype.visitArgumentList=function(e){return e.update(e.typeArgumentList===null?null:this.visitNode(e.typeArgumentList),this.visitToken(e.openParenToken),this.visitSeparatedList(e.arguments),this.visitToken(e.closeParenToken))},t.prototype.visitBinaryExpression=function(e){return e.update(e.kind(),this.visitNodeOrToken(e.left),this.visitToken(e.operatorToken),this.visitNodeOrToken(e.right))},t.prototype.visitConditionalExpression=function(e){return e.update(this.visitNodeOrToken(e.condition),this.visitToken(e.questionToken),this.visitNodeOrToken(e.whenTrue),this.visitToken(e.colonToken),this.visitNodeOrToken(e.whenFalse))},t.prototype.visitConstructSignature=function(e){return e.update(this.visitToken(e.newKeyword),this.visitNode(e.callSignature))},t.prototype.visitMethodSignature=function(e){return e.update(this.visitToken(e.propertyName),e.questionToken===null?null:this.visitToken(e.questionToken),this.visitNode(e.callSignature))},t.prototype.visitIndexSignature=function(e){return e.update(this.visitToken(e.openBracketToken),this.visitNode(e.parameter),this.visitToken(e.closeBracketToken),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation))},t.prototype.visitPropertySignature=function(e){return e.update(this.visitToken(e.propertyName),e.questionToken===null?null:this.visitToken(e.questionToken),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation))},t.prototype.visitCallSignature=function(e){return e.update(e.typeParameterList===null?null:this.visitNode(e.typeParameterList),this.visitNode(e.parameterList),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation))},t.prototype.visitParameterList=function(e){return e.update(this.visitToken(e.openParenToken),this.visitSeparatedList(e.parameters),this.visitToken(e.closeParenToken))},t.prototype.visitTypeParameterList=function(e){return e.update(this.visitToken(e.lessThanToken),this.visitSeparatedList(e.typeParameters),this.visitToken(e.greaterThanToken))},t.prototype.visitTypeParameter=function(e){return e.update(this.visitToken(e.identifier),e.constraint===null?null:this.visitNode(e.constraint))},t.prototype.visitConstraint=function(e){return e.update(this.visitToken(e.extendsKeyword),this.visitNodeOrToken(e.type))},t.prototype.visitElseClause=function(e){return e.update(this.visitToken(e.elseKeyword),this.visitNodeOrToken(e.statement))},t.prototype.visitIfStatement=function(e){return e.update(this.visitToken(e.ifKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement),e.elseClause===null?null:this.visitNode(e.elseClause))},t.prototype.visitExpressionStatement=function(e){return e.update(this.visitNodeOrToken(e.expression),this.visitToken(e.semicolonToken))},t.prototype.visitConstructorDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.constructorKeyword),this.visitNode(e.callSignature),e.block===null?null:this.visitNode(e.block),e.semicolonToken===null?null:this.visitToken(e.semicolonToken))},t.prototype.visitMemberFunctionDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.propertyName),this.visitNode(e.callSignature),e.block===null?null:this.visitNode(e.block),e.semicolonToken===null?null:this.visitToken(e.semicolonToken))},t.prototype.visitGetAccessor=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.getKeyword),this.visitToken(e.propertyName),this.visitNode(e.parameterList),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation),this.visitNode(e.block))},t.prototype.visitSetAccessor=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.setKeyword),this.visitToken(e.propertyName),this.visitNode(e.parameterList),this.visitNode(e.block))},t.prototype.visitMemberVariableDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitNode(e.variableDeclarator),this.visitToken(e.semicolonToken))},t.prototype.visitIndexMemberDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitNode(e.indexSignature),this.visitToken(e.semicolonToken))},t.prototype.visitThrowStatement=function(e){return e.update(this.visitToken(e.throwKeyword),this.visitNodeOrToken(e.expression),this.visitToken(e.semicolonToken))},t.prototype.visitReturnStatement=function(e){return e.update(this.visitToken(e.returnKeyword),e.expression===null?null:this.visitNodeOrToken(e.expression),this.visitToken(e.semicolonToken))},t.prototype.visitObjectCreationExpression=function(e){return e.update(this.visitToken(e.newKeyword),this.visitNodeOrToken(e.expression),e.argumentList===null?null:this.visitNode(e.argumentList))},t.prototype.visitSwitchStatement=function(e){return e.update(this.visitToken(e.switchKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.expression),this.visitToken(e.closeParenToken),this.visitToken(e.openBraceToken),this.visitList(e.switchClauses),this.visitToken(e.closeBraceToken))},t.prototype.visitCaseSwitchClause=function(e){return e.update(this.visitToken(e.caseKeyword),this.visitNodeOrToken(e.expression),this.visitToken(e.colonToken),this.visitList(e.statements))},t.prototype.visitDefaultSwitchClause=function(e){return e.update(this.visitToken(e.defaultKeyword),this.visitToken(e.colonToken),this.visitList(e.statements))},t.prototype.visitBreakStatement=function(e){return e.update(this.visitToken(e.breakKeyword),e.identifier===null?null:this.visitToken(e.identifier),this.visitToken(e.semicolonToken))},t.prototype.visitContinueStatement=function(e){return e.update(this.visitToken(e.continueKeyword),e.identifier===null?null:this.visitToken(e.identifier),this.visitToken(e.semicolonToken))},t.prototype.visitForStatement=function(e){return e.update(this.visitToken(e.forKeyword),this.visitToken(e.openParenToken),e.variableDeclaration===null?null:this.visitNode(e.variableDeclaration),e.initializer===null?null:this.visitNodeOrToken(e.initializer),this.visitToken(e.firstSemicolonToken),e.condition===null?null:this.visitNodeOrToken(e.condition),this.visitToken(e.secondSemicolonToken),e.incrementor===null?null:this.visitNodeOrToken(e.incrementor),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement))},t.prototype.visitForInStatement=function(e){return e.update(this.visitToken(e.forKeyword),this.visitToken(e.openParenToken),e.variableDeclaration===null?null:this.visitNode(e.variableDeclaration),e.left===null?null:this.visitNodeOrToken(e.left),this.visitToken(e.inKeyword),this.visitNodeOrToken(e.expression),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement))},t.prototype.visitWhileStatement=function(e){return e.update(this.visitToken(e.whileKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement))},t.prototype.visitWithStatement=function(e){return e.update(this.visitToken(e.withKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement))},t.prototype.visitEnumDeclaration=function(e){return e.update(this.visitList(e.modifiers),this.visitToken(e.enumKeyword),this.visitToken(e.identifier),this.visitToken(e.openBraceToken),this.visitSeparatedList(e.enumElements),this.visitToken(e.closeBraceToken))},t.prototype.visitEnumElement=function(e){return e.update(this.visitToken(e.propertyName),e.equalsValueClause===null?null:this.visitNode(e.equalsValueClause))},t.prototype.visitCastExpression=function(e){return e.update(this.visitToken(e.lessThanToken),this.visitNodeOrToken(e.type),this.visitToken(e.greaterThanToken),this.visitNodeOrToken(e.expression))},t.prototype.visitObjectLiteralExpression=function(e){return e.update(this.visitToken(e.openBraceToken),this.visitSeparatedList(e.propertyAssignments),this.visitToken(e.closeBraceToken))},t.prototype.visitSimplePropertyAssignment=function(e){return e.update(this.visitToken(e.propertyName),this.visitToken(e.colonToken),this.visitNodeOrToken(e.expression))},t.prototype.visitFunctionPropertyAssignment=function(e){return e.update(this.visitToken(e.propertyName),this.visitNode(e.callSignature),this.visitNode(e.block))},t.prototype.visitFunctionExpression=function(e){return e.update(this.visitToken(e.functionKeyword),e.identifier===null?null:this.visitToken(e.identifier),this.visitNode(e.callSignature),this.visitNode(e.block))},t.prototype.visitEmptyStatement=function(e){return e.update(this.visitToken(e.semicolonToken))},t.prototype.visitTryStatement=function(e){return e.update(this.visitToken(e.tryKeyword),this.visitNode(e.block),e.catchClause===null?null:this.visitNode(e.catchClause),e.finallyClause===null?null:this.visitNode(e.finallyClause))},t.prototype.visitCatchClause=function(e){return e.update(this.visitToken(e.catchKeyword),this.visitToken(e.openParenToken),this.visitToken(e.identifier),e.typeAnnotation===null?null:this.visitNode(e.typeAnnotation),this.visitToken(e.closeParenToken),this.visitNode(e.block))},t.prototype.visitFinallyClause=function(e){return e.update(this.visitToken(e.finallyKeyword),this.visitNode(e.block))},t.prototype.visitLabeledStatement=function(e){return e.update(this.visitToken(e.identifier),this.visitToken(e.colonToken),this.visitNodeOrToken(e.statement))},t.prototype.visitDoStatement=function(e){return e.update(this.visitToken(e.doKeyword),this.visitNodeOrToken(e.statement),this.visitToken(e.whileKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitToken(e.semicolonToken))},t.prototype.visitTypeOfExpression=function(e){return e.update(this.visitToken(e.typeOfKeyword),this.visitNodeOrToken(e.expression))},t.prototype.visitDeleteExpression=function(e){return e.update(this.visitToken(e.deleteKeyword),this.visitNodeOrToken(e.expression))},t.prototype.visitVoidExpression=function(e){return e.update(this.visitToken(e.voidKeyword),this.visitNodeOrToken(e.expression))},t.prototype.visitDebuggerStatement=function(e){return e.update(this.visitToken(e.debuggerKeyword),this.visitToken(e.semicolonToken))},t}();e.SyntaxRewriter=t})(r||(r={}));var r;(function(e){var t=function(t){function n(e,n,r,i){t.call(this),this.dedentationAmount=n,this.minimumIndent=r,this.options=i,this.lastTriviaWasNewLine=e}return i(n,t),n.prototype.abort=function(){this.lastTriviaWasNewLine=!1,this.dedentationAmount=0},n.prototype.isAborted=function(){return this.dedentationAmount===0},n.prototype.visitToken=function(e){if(e.width()===0)return e;var t=e;return this.lastTriviaWasNewLine&&(t=e.withLeadingTrivia(this.dedentTriviaList(e.leadingTrivia()))),this.isAborted()?e:(this.lastTriviaWasNewLine=e.hasTrailingNewLine(),t)},n.prototype.dedentTriviaList=function(t){var n=[],r=!0;for(var i=0,s=t.count();i<s&&!this.isAborted();i++){var o=t.syntaxTriviaAt(i),u=r;r=!1;if(u){if(o.kind()===4){var a=i<t.count()-1&&t.syntaxTriviaAt(i+1).kind()===5;n.push(this.dedentWhitespace(o,a));continue}if(o.kind()!==5){this.abort();break}}if(o.kind()===6){n.push(this.dedentMultiLineComment(o));continue}n.push(o),o.kind()===5&&(r=!0)}return r&&this.abort(),this.isAborted()?t:e.Syntax.triviaList(n)},n.prototype.dedentSegment=function(t,n){var r=e.Indentation.firstNonWhitespacePosition(t);if(r===t.length){if(n)return""}else if(e.CharacterInfo.isLineTerminator(t.charCodeAt(r)))return t.substring(r);var i=e.Indentation.columnForPositionInString(t,r,this.options),s=e.MathPrototype.min(i,e.MathPrototype.max(i-this.dedentationAmount,this.minimumIndent));if(s===i)return this.abort(),t;this.dedentationAmount=i-s,e.Debug.assert(this.dedentationAmount>=0);var o=e.Indentation.indentationString(s,this.options);return o+t.substring(r)},n.prototype.dedentWhitespace=function(t,n){var r=this.dedentSegment(t.fullText(),n);return e.Syntax.whitespace(r)},n.prototype.dedentMultiLineComment=function(t){var n=e.Syntax.splitMultiLineCommentTriviaIntoMultipleLines(t);if(n.length===1)return t;for(var r=1;r<n.length;r++){var i=n[r];n[r]=this.dedentSegment(i,!1)}var s=n.join("");return e.Syntax.multiLineComment(s)},n.dedentNode=function(e,t,r,i,s){var o=new n(t,r,i,s),u=e.accept(o);return o.isAborted()?e:u},n}(e.SyntaxRewriter);e.SyntaxDedenter=t})(r||(r={}));var r;(function(e){var t=function(t){function n(n,r,i){t.call(this),this.indentationAmount=r,this.options=i,this.lastTriviaWasNewLine=n,this.indentationTrivia=e.Indentation.indentationTrivia(this.indentationAmount,this.options)}return i(n,t),n.prototype.visitToken=function(e){if(e.width()===0)return e;var t=e;return this.lastTriviaWasNewLine&&(t=e.withLeadingTrivia(this.indentTriviaList(e.leadingTrivia()))),this.lastTriviaWasNewLine=e.hasTrailingNewLine(),t},n.prototype.indentTriviaList=function(t){var n=[],r=!0;for(var i=0,s=t.count();i<s;i++){var o=t.syntaxTriviaAt(i),u=r;r=!1;switch(o.kind()){case 6:this.indentMultiLineComment(o,u,n);continue;case 7:case 8:this.indentSingleLineOrSkippedText(o,u,n);continue;case 4:this.indentWhitespace(o,u,n);continue;case 5:n.push(o),r=!0;continue;default:throw e.Errors.invalidOperation()}}return r&&n.push(this.indentationTrivia),e.Syntax.triviaList(n)},n.prototype.indentSegment=function(t){var n=e.Indentation.firstNonWhitespacePosition(t);if(n<t.length&&e.CharacterInfo.isLineTerminator(t.charCodeAt(n)))return t;var r=e.Indentation.columnForPositionInString(t,n,this.options),i=r+this.indentationAmount,s=e.Indentation.indentationString(i,this.options);return s+t.substring(n)},n.prototype.indentWhitespace=function(t,n,r){if(!n){r.push(t);return}var i=this.indentSegment(t.fullText());r.push(e.Syntax.whitespace(i))},n.prototype.indentSingleLineOrSkippedText=function(e,t,n){t&&n.push(this.indentationTrivia),n.push(e)},n.prototype.indentMultiLineComment=function(t,n,r){n&&r.push(this.indentationTrivia);var i=e.Syntax.splitMultiLineCommentTriviaIntoMultipleLines(t);for(var s=1;s<i.length;s++)i[s]=this.indentSegment(i[s]);var o=i.join("");r.push(e.Syntax.multiLineComment(o))},n.indentNode=function(e,t,r,i){var s=new n(t,r,i);return e.accept(s)},n.indentNodes=function(t,r,i,s){var o=new n(r,i,s),u=e.ArrayUtilities.select(t,function(e){return e.accept(o)});return u},n}(e.SyntaxRewriter);e.SyntaxIndenter=t})(r||(r={}));var r;(function(e){(function(t){function l(e,t){e.leadingTrivia().collectTextElements(t),t.push(e.text()),e.trailingTrivia().collectTextElements(t)}function c(e){return e>>>2}function h(e){return(e&2)!==0}function p(e){return(e&1)!==0}var n=function(){function n(e,t){this._fullText=e,this.tokenKind=t}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.fullWidth()-this.leadingTriviaWidth()-this.trailingTriviaWidth()},n.prototype.text=function(){return this.fullText().substr(this.leadingTriviaWidth(),this.width())},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return this._value===undefined&&(this._value=t.value(this)),this._value},n.prototype.valueText=function(){return this._valueText===undefined&&(this._valueText=t.valueText(this)),this._valueText},n.prototype.hasLeadingTrivia=function(){return!1},n.prototype.hasLeadingComment=function(){return!1},n.prototype.hasLeadingNewLine=function(){return!1},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return 0},n.prototype.leadingTrivia=function(){return t.emptyTriviaList},n.prototype.hasTrailingTrivia=function(){return!1},n.prototype.hasTrailingComment=function(){return!1},n.prototype.hasTrailingNewLine=function(){return!1},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return 0},n.prototype.trailingTrivia=function(){return t.emptyTriviaList},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.VariableWidthTokenWithNoTrivia=n;var r=function(){function n(e,t,n){this._fullText=e,this.tokenKind=t,this._leadingTriviaInfo=n}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind,this._leadingTriviaInfo)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.fullWidth()-this.leadingTriviaWidth()-this.trailingTriviaWidth()},n.prototype.text=function(){return this.fullText().substr(this.leadingTriviaWidth(),this.width())},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return this._value===undefined&&(this._value=t.value(this)),this._value},n.prototype.valueText=function(){return this._valueText===undefined&&(this._valueText=t.valueText(this)),this._valueText},n.prototype.hasLeadingTrivia=function(){return!0},n.prototype.hasLeadingComment=function(){return h(this._leadingTriviaInfo)},n.prototype.hasLeadingNewLine=function(){return p(this._leadingTriviaInfo)},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return c(this._leadingTriviaInfo)},n.prototype.leadingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),0,c(this._leadingTriviaInfo),!1)},n.prototype.hasTrailingTrivia=function(){return!1},n.prototype.hasTrailingComment=function(){return!1},n.prototype.hasTrailingNewLine=function(){return!1},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return 0},n.prototype.trailingTrivia=function(){return t.emptyTriviaList},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.VariableWidthTokenWithLeadingTrivia=r;var i=function(){function n(e,t,n){this._fullText=e,this.tokenKind=t,this._trailingTriviaInfo=n}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind,this._trailingTriviaInfo)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.fullWidth()-this.leadingTriviaWidth()-this.trailingTriviaWidth()},n.prototype.text=function(){return this.fullText().substr(this.leadingTriviaWidth(),this.width())},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return this._value===undefined&&(this._value=t.value(this)),this._value},n.prototype.valueText=function(){return this._valueText===undefined&&(this._valueText=t.valueText(this)),this._valueText},n.prototype.hasLeadingTrivia=function(){return!1},n.prototype.hasLeadingComment=function(){return!1},n.prototype.hasLeadingNewLine=function(){return!1},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return 0},n.prototype.leadingTrivia=function(){return t.emptyTriviaList},n.prototype.hasTrailingTrivia=function(){return!0},n.prototype.hasTrailingComment=function(){return h(this._trailingTriviaInfo)},n.prototype.hasTrailingNewLine=function(){return p(this._trailingTriviaInfo)},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return c(this._trailingTriviaInfo)},n.prototype.trailingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),this.leadingTriviaWidth()+this.width(),c(this._trailingTriviaInfo),!0)},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.VariableWidthTokenWithTrailingTrivia=i;var s=function(){function n(e,t,n,r){this._fullText=e,this.tokenKind=t,this._leadingTriviaInfo=n,this._trailingTriviaInfo=r}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind,this._leadingTriviaInfo,this._trailingTriviaInfo)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.fullWidth()-this.leadingTriviaWidth()-this.trailingTriviaWidth()},n.prototype.text=function(){return this.fullText().substr(this.leadingTriviaWidth(),this.width())},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return this._value===undefined&&(this._value=t.value(this)),this._value},n.prototype.valueText=function(){return this._valueText===undefined&&(this._valueText=t.valueText(this)),this._valueText},n.prototype.hasLeadingTrivia=function(){return!0},n.prototype.hasLeadingComment=function(){return h(this._leadingTriviaInfo)},n.prototype.hasLeadingNewLine=function(){return p(this._leadingTriviaInfo)},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return c(this._leadingTriviaInfo)},n.prototype.leadingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),0,c(this._leadingTriviaInfo),!1)},n.prototype.hasTrailingTrivia=function(){return!0},n.prototype.hasTrailingComment=function(){return h(this._trailingTriviaInfo)},n.prototype.hasTrailingNewLine=function(){return p(this._trailingTriviaInfo)},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return c(this._trailingTriviaInfo)},n.prototype.trailingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),this.leadingTriviaWidth()+this.width(),c(this._trailingTriviaInfo),!0)},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.VariableWidthTokenWithLeadingAndTrailingTrivia=s;var o=function(){function n(e){this.tokenKind=e}return n.prototype.clone=function(){return new n(this.tokenKind)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.text().length},n.prototype.text=function(){return e.SyntaxFacts.getText(this.tokenKind)},n.prototype.fullText=function(){return this.text()},n.prototype.value=function(){return t.value(this)},n.prototype.valueText=function(){return t.valueText(this)},n.prototype.hasLeadingTrivia=function(){return!1},n.prototype.hasLeadingComment=function(){return!1},n.prototype.hasLeadingNewLine=function(){return!1},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return 0},n.prototype.leadingTrivia=function(){return t.emptyTriviaList},n.prototype.hasTrailingTrivia=function(){return!1},n.prototype.hasTrailingComment=function(){return!1},n.prototype.hasTrailingNewLine=function(){return!1},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return 0},n.prototype.trailingTrivia=function(){return t.emptyTriviaList},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.FixedWidthTokenWithNoTrivia=o;var u=function(){function n(e,t,n){this._fullText=e,this.tokenKind=t,this._leadingTriviaInfo=n}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind,this._leadingTriviaInfo)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.text().length},n.prototype.text=function(){return e.SyntaxFacts.getText(this.tokenKind)},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return t.value(this)},n.prototype.valueText=function(){return t.valueText(this)},n.prototype.hasLeadingTrivia=function(){return!0},n.prototype.hasLeadingComment=function(){return h(this._leadingTriviaInfo)},n.prototype.hasLeadingNewLine=function(){return p(this._leadingTriviaInfo)},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return c(this._leadingTriviaInfo)},n.prototype.leadingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),0,c(this._leadingTriviaInfo),!1)},n.prototype.hasTrailingTrivia=function(){return!1},n.prototype.hasTrailingComment=function(){return!1},n.prototype.hasTrailingNewLine=function(){return!1},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return 0},n.prototype.trailingTrivia=function(){return t.emptyTriviaList},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.FixedWidthTokenWithLeadingTrivia=u;var a=function(){function n(e,t,n){this._fullText=e,this.tokenKind=t,this._trailingTriviaInfo=n}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind,this._trailingTriviaInfo)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.text().length},n.prototype.text=function(){return e.SyntaxFacts.getText(this.tokenKind)},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return t.value(this)},n.prototype.valueText=function(){return t.valueText(this)},n.prototype.hasLeadingTrivia=function(){return!1},n.prototype.hasLeadingComment=function(){return!1},n.prototype.hasLeadingNewLine=function(){return!1},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return 0},n.prototype.leadingTrivia=function(){return t.emptyTriviaList},n.prototype.hasTrailingTrivia=function(){return!0},n.prototype.hasTrailingComment=function(){return h(this._trailingTriviaInfo)},n.prototype.hasTrailingNewLine=function(){return p(this._trailingTriviaInfo)},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return c(this._trailingTriviaInfo)},n.prototype.trailingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),this.leadingTriviaWidth()+this.width(),c(this._trailingTriviaInfo),!0)},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.FixedWidthTokenWithTrailingTrivia=a;var f=function(){function n(e,t,n,r){this._fullText=e,this.tokenKind=t,this._leadingTriviaInfo=n,this._trailingTriviaInfo=r}return n.prototype.clone=function(){return new n(this._fullText,this.tokenKind,this._leadingTriviaInfo,this._trailingTriviaInfo)},n.prototype.isNode=function(){return!1},n.prototype.isToken=function(){return!0},n.prototype.isList=function(){return!1},n.prototype.isSeparatedList=function(){return!1},n.prototype.kind=function(){return this.tokenKind},n.prototype.childCount=function(){return 0},n.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.width=function(){return this.text().length},n.prototype.text=function(){return e.SyntaxFacts.getText(this.tokenKind)},n.prototype.fullText=function(){return this._fullText},n.prototype.value=function(){return t.value(this)},n.prototype.valueText=function(){return t.valueText(this)},n.prototype.hasLeadingTrivia=function(){return!0},n.prototype.hasLeadingComment=function(){return h(this._leadingTriviaInfo)},n.prototype.hasLeadingNewLine=function(){return p(this._leadingTriviaInfo)},n.prototype.hasLeadingSkippedText=function(){return!1},n.prototype.leadingTriviaWidth=function(){return c(this._leadingTriviaInfo)},n.prototype.leadingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),0,c(this._leadingTriviaInfo),!1)},n.prototype.hasTrailingTrivia=function(){return!0},n.prototype.hasTrailingComment=function(){return h(this._trailingTriviaInfo)},n.prototype.hasTrailingNewLine=function(){return p(this._trailingTriviaInfo)},n.prototype.hasTrailingSkippedText=function(){return!1},n.prototype.trailingTriviaWidth=function(){return c(this._trailingTriviaInfo)},n.prototype.trailingTrivia=function(){return e.Scanner.scanTrivia(e.SimpleText.fromString(this._fullText),this.leadingTriviaWidth()+this.width(),c(this._trailingTriviaInfo),!0)},n.prototype.hasSkippedToken=function(){return!1},n.prototype.toJSON=function(e){return t.tokenToJSON(this)},n.prototype.firstToken=function(){return this},n.prototype.lastToken=function(){return this},n.prototype.isTypeScriptSpecific=function(){return!1},n.prototype.isIncrementallyUnusable=function(){return this.fullWidth()===0||e.SyntaxFacts.isAnyDivideOrRegularExpressionToken(this.tokenKind)},n.prototype.accept=function(e){return e.visitToken(this)},n.prototype.realize=function(){return t.realizeToken(this)},n.prototype.collectTextElements=function(e){l(this,e)},n.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},n.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},n.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},n.prototype.isExpression=function(){return t.isExpression(this)},n.prototype.isPrimaryExpression=function(){return this.isExpression()},n.prototype.isMemberExpression=function(){return this.isExpression()},n.prototype.isPostfixExpression=function(){return this.isExpression()},n.prototype.isUnaryExpression=function(){return this.isExpression()},n}();t.FixedWidthTokenWithLeadingAndTrailingTrivia=f})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){(function(t){function n(e){switch(e.tokenKind){case 11:case 12:case 13:case 14:case 24:case 32:case 35:case 37:case 50:return!0}return!1}function r(e){return new g(e.tokenKind,e.leadingTrivia(),e.text(),e.value(),e.valueText(),e.trailingTrivia())}function i(t){return e.Debug.assert(e.SyntaxFacts.isAnyKeyword(t.tokenKind)),new g(11,t.leadingTrivia(),t.text(),t.text(),t.text(),t.trailingTrivia())}function s(t){var n={};for(var r in e.SyntaxKind)if(e.SyntaxKind[r]===t.kind()){n.kind=r;break}n.width=t.width(),t.fullWidth()!==t.width()&&(n.fullWidth=t.fullWidth()),n.text=t.text();var i=t.value();i!==null&&(n.value=i,n.valueText=t.valueText()),t.hasLeadingTrivia()&&(n.hasLeadingTrivia=!0),t.hasLeadingComment()&&(n.hasLeadingComment=!0),t.hasLeadingNewLine()&&(n.hasLeadingNewLine=!0),t.hasLeadingSkippedText()&&(n.hasLeadingSkippedText=!0),t.hasTrailingTrivia()&&(n.hasTrailingTrivia=!0),t.hasTrailingComment()&&(n.hasTrailingComment=!0),t.hasTrailingNewLine()&&(n.hasTrailingNewLine=!0),t.hasTrailingSkippedText()&&(n.hasTrailingSkippedText=!0);var s=t.leadingTrivia();return s.count()>0&&(n.leadingTrivia=s),s=t.trailingTrivia(),s.count()>0&&(n.trailingTrivia=s),n}function o(e){return c(e.tokenKind,e.text())}function u(t,n,r){var i=0;for(var s=0;s<r;s++){var o=t.charCodeAt(n+s);if(!e.CharacterInfo.isHexDigit(o))break;i=(i<<4)+e.CharacterInfo.hexValue(o)}return i}function f(e){a.length=0;var t="";for(var n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i===92){n++;if(n<r){i=e.charCodeAt(n);switch(i){case 48:a.push(0);continue;case 98:a.push(8);continue;case 102:a.push(12);continue;case 110:a.push(10);continue;case 114:a.push(13);continue;case 116:a.push(9);continue;case 118:a.push(11);continue;case 120:a.push(u(e,n+1,2)),n+=2;continue;case 117:a.push(u(e,n+1,4)),n+=4;continue;case 13:var s=n+1;s<e.length&&e.charCodeAt(s)===10&&n++;continue;case 10:case 8233:case 8232:continue;default:}}}a.push(i),n&&!(n%1024)&&(t=t.concat(String.fromCharCode.apply(null,a)),a.length=0)}return a.length&&(t=t.concat(String.fromCharCode.apply(null,a))),t}function l(e){return e.indexOf("\\")>=0?f(e):e}function c(t,n){if(t===11)return l(n);switch(t){case 37:return!0;case 24:return!1;case 32:return null}if(e.SyntaxFacts.isAnyKeyword(t)||e.SyntaxFacts.isAnyPunctuation(t))return e.SyntaxFacts.getText(t);if(t===13)return e.IntegerUtilities.isHexInteger(n)?parseInt(n,16):parseFloat(n);if(t===14)return n.length>1&&n.charCodeAt(n.length-1)===n.charCodeAt(0)?l(n.substr(1,n.length-2)):l(n.substr(1));if(t===12)return h(n);if(t===10||t===9)return null;throw e.Errors.invalidOperation()}function h(e){try{var t=e.lastIndexOf("/"),n=e.substring(1,t),r=e.substring(t+1);return new RegExp(n,r)}catch(i){return null}}function p(e,t){var n=c(e,t);return n===null?"":n.toString()}function d(e){var t=e.value();return t===null?"":t.toString()}function m(e){return new v(e)}function y(n,r){typeof r=="undefined"&&(r=null);var i=r!==null&&r.text!==undefined?r.text:e.SyntaxFacts.getText(n);return new g(n,t.triviaList(r===null?null:r.leadingTrivia),i,c(n,i),p(n,i),t.triviaList(r===null?null:r.trailingTrivia))}function b(e,t){return typeof t=="undefined"&&(t=null),t=t||{},t.text=e,y(11,t)}t.isExpression=n,t.realizeToken=r,t.convertToIdentifierName=i,t.tokenToJSON=s,t.value=o;var a=[];t.massageEscapes=l,t.valueText=d;var v=function(){function i(e){this.tokenKind=e}return i.prototype.clone=function(){return new i(this.tokenKind)},i.prototype.kind=function(){return this.tokenKind},i.prototype.isToken=function(){return!0},i.prototype.isNode=function(){return!1},i.prototype.isList=function(){return!1},i.prototype.isSeparatedList=function(){return!1},i.prototype.childCount=function(){return 0},i.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},i.prototype.toJSON=function(e){return s(this)},i.prototype.accept=function(e){return e.visitToken(this)},i.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},i.prototype.firstToken=function(){return this},i.prototype.lastToken=function(){return this},i.prototype.isTypeScriptSpecific=function(){return!1},i.prototype.isIncrementallyUnusable=function(){return!0},i.prototype.fullWidth=function(){return 0},i.prototype.width=function(){return 0},i.prototype.text=function(){return""},i.prototype.fullText=function(){return""},i.prototype.value=function(){return null},i.prototype.valueText=function(){return""},i.prototype.hasLeadingTrivia=function(){return!1},i.prototype.hasLeadingComment=function(){return!1},i.prototype.hasLeadingNewLine=function(){return!1},i.prototype.hasLeadingSkippedText=function(){return!1},i.prototype.leadingTriviaWidth=function(){return 0},i.prototype.hasTrailingTrivia=function(){return!1},i.prototype.hasTrailingComment=function(){return!1},i.prototype.hasTrailingNewLine=function(){return!1},i.prototype.hasTrailingSkippedText=function(){return!1},i.prototype.hasSkippedToken=function(){return!1},i.prototype.trailingTriviaWidth=function(){return 0},i.prototype.leadingTrivia=function(){return t.emptyTriviaList},i.prototype.trailingTrivia=function(){return t.emptyTriviaList},i.prototype.realize=function(){return r(this)},i.prototype.collectTextElements=function(e){},i.prototype.withLeadingTrivia=function(e){return this.realize().withLeadingTrivia(e)},i.prototype.withTrailingTrivia=function(e){return this.realize().withTrailingTrivia(e)},i.prototype.isExpression=function(){return n(this)},i.prototype.isPrimaryExpression=function(){return this.isExpression()},i.prototype.isMemberExpression=function(){return this.isExpression()},i.prototype.isPostfixExpression=function(){return this.isExpression()},i.prototype.isUnaryExpression=function(){return this.isExpression()},i}();t.emptyToken=m;var g=function(){function t(e,t,n,r,i,s){this.tokenKind=e,this._leadingTrivia=t,this._text=n,this._value=r,this._valueText=i,this._trailingTrivia=s}return t.prototype.clone=function(){return new t(this.tokenKind,this._leadingTrivia,this._text,this._value,this._valueText,this._trailingTrivia)},t.prototype.kind=function(){return this.tokenKind},t.prototype.toJSON=function(e){return s(this)},t.prototype.firstToken=function(){return this},t.prototype.lastToken=function(){return this},t.prototype.isTypeScriptSpecific=function(){return!1},t.prototype.isIncrementallyUnusable=function(){return!0},t.prototype.accept=function(e){return e.visitToken(this)},t.prototype.childCount=function(){return 0},t.prototype.childAt=function(t){throw e.Errors.argumentOutOfRange("index")},t.prototype.isToken=function(){return!0},t.prototype.isNode=function(){return!1},t.prototype.isList=function(){return!1},t.prototype.isSeparatedList=function(){return!1},t.prototype.isTrivia=function(){return!1},t.prototype.isTriviaList=function(){return!1},t.prototype.fullWidth=function(){return this._leadingTrivia.fullWidth()+this.width()+this._trailingTrivia.fullWidth()},t.prototype.width=function(){return this.text().length},t.prototype.text=function(){return this._text},t.prototype.fullText=function(){return this._leadingTrivia.fullText()+this.text()+this._trailingTrivia.fullText()},t.prototype.value=function(){return this._value},t.prototype.valueText=function(){return this._valueText},t.prototype.hasLeadingTrivia=function(){return this._leadingTrivia.count()>0},t.prototype.hasLeadingComment=function(){return this._leadingTrivia.hasComment()},t.prototype.hasLeadingNewLine=function(){return this._leadingTrivia.hasNewLine()},t.prototype.hasLeadingSkippedText=function(){return this._leadingTrivia.hasSkippedToken()},t.prototype.leadingTriviaWidth=function(){return this._leadingTrivia.fullWidth()},t.prototype.hasTrailingTrivia=function(){return this._trailingTrivia.count()>0},t.prototype.hasTrailingComment=function(){return this._trailingTrivia.hasComment()},t.prototype.hasTrailingNewLine=function(){return this._trailingTrivia.hasNewLine()},t.prototype.hasTrailingSkippedText=function(){return this._trailingTrivia.hasSkippedToken()},t.prototype.trailingTriviaWidth=function(){return this._trailingTrivia.fullWidth()},t.prototype.hasSkippedToken=function(){return this.hasLeadingSkippedText()||this.hasTrailingSkippedText()},t.prototype.leadingTrivia=function(){return this._leadingTrivia},t.prototype.trailingTrivia=function(){return this._trailingTrivia},t.prototype.findTokenInternal=function(t,n,r){return new e.PositionedToken(t,this,r)},t.prototype.collectTextElements=function(e){this.leadingTrivia().collectTextElements(e),e.push(this.text()),this.trailingTrivia().collectTextElements(e)},t.prototype.withLeadingTrivia=function(e){return new t(this.tokenKind,e,this._text,this._value,this._valueText,this._trailingTrivia)},t.prototype.withTrailingTrivia=function(e){return new t(this.tokenKind,this._leadingTrivia,this._text,this._value,this._valueText,e)},t.prototype.isExpression=function(){return n(this)},t.prototype.isPrimaryExpression=function(){return this.isExpression()},t.prototype.isMemberExpression=function(){return this.isExpression()},t.prototype.isPostfixExpression=function(){return this.isExpression()},t.prototype.isUnaryExpression=function(){return this.isExpression()},t}();t.token=y,t.identifier=b})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){var t=function(e){function t(t,n){e.call(this),this.token1=t,this.token2=n}return i(t,e),t.prototype.visitToken=function(e){if(e===this.token1){var t=this.token2;return this.token1=null,this.token2=null,t}return e},t.prototype.visitNode=function(t){return this.token1===null?t:e.prototype.visitNode.call(this,t)},t.prototype.visitList=function(t){return this.token1===null?t:e.prototype.visitList.call(this,t)},t.prototype.visitSeparatedList=function(t){return this.token1===null?t:e.prototype.visitSeparatedList.call(this,t)},t}(e.SyntaxRewriter);e.SyntaxTokenReplacer=t})(r||(r={}));var r;(function(e){(function(t){function u(e,t,n,r){return new o(e,t,n,r)}function a(e,t){return new r(e,t)}function f(t){return e.Debug.assert(!t.hasLeadingTrivia()),e.Debug.assert(!t.hasTrailingTrivia()),e.Debug.assert(t.fullWidth()>0),new s(t)}function l(t){return a(4,e.StringUtilities.repeat(" ",t))}function c(e){return a(4,e)}function h(e){return a(6,e)}function p(e){return a(7,e)}function d(e){var t=[],n=e.fullText(),r=0;for(var i=0;i<n.length;i++){var s=n.charCodeAt(i),o=!1;switch(s){case 13:i<n.length-1&&n.charCodeAt(i+1)===10&&i++;case 10:case 8233:case 8232:t.push(n.substring(r,i+1)),r=i+1;continue}}return t.push(n.substring(r)),t}var n=function(){function t(e){this._kind=e}return t.prototype.fullWidth=function(){throw e.Errors.abstract()},t.prototype.fullText=function(){throw e.Errors.abstract()},t.prototype.skippedToken=function(){throw e.Errors.abstract()},t.prototype.toJSON=function(t){var n={};for(var r in e.SyntaxKind)if(e.SyntaxKind[r]===this._kind){n.kind=r;break}return this.isSkippedToken()?n.skippedToken=this.skippedToken():n.text=this.fullText(),n},t.prototype.kind=function(){return this._kind},t.prototype.isWhitespace=function(){return this.kind()===4},t.prototype.isComment=function(){return this.kind()===7||this.kind()===6},t.prototype.isNewLine=function(){return this.kind()===5},t.prototype.isSkippedToken=function(){return this.kind()===8},t.prototype.collectTextElements=function(e){e.push(this.fullText())},t}(),r=function(t){function n(e,n){t.call(this,e),this._text=n}return i(n,t),n.prototype.fullWidth=function(){return this.fullText().length},n.prototype.fullText=function(){return this._text},n.prototype.skippedToken=function(){throw e.Errors.invalidOperation()},n}(n),s=function(e){function t(t){e.call(this,8),this._skippedToken=t}return i(t,e),t.prototype.fullWidth=function(){return this.fullText().length},t.prototype.fullText=function(){return this.skippedToken().fullText()},t.prototype.skippedToken=function(){return this._skippedToken},t}(n),o=function(t){function n(e,n,r,i){t.call(this,e),this._text=n,this._fullStart=r,this._fullWidth=i,this._fullText=null}return i(n,t),n.prototype.fullWidth=function(){return this._fullWidth},n.prototype.fullText=function(){return this._fullText||(this._fullText=this._text.substr(this._fullStart,this._fullWidth,!1),this._text=null),this._fullText},n.prototype.skippedToken=function(){throw e.Errors.invalidOperation()},n}(n);t.deferredTrivia=u,t.trivia=a,t.skippedTokenTrivia=f,t.spaces=l,t.whitespace=c,t.multiLineComment=h,t.singleLineComment=p,t.spaceTrivia=l(1),t.lineFeedTrivia=a(5,"\n"),t.carriageReturnTrivia=a(5,"\r"),t.carriageReturnLineFeedTrivia=a(5,"\r\n"),t.splitMultiLineCommentTriviaIntoMultipleLines=d})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){(function(t){function n(e,t){if(e.count()===0)return t;if(t.count()===0)return e;var n=e.toArray();return n.push.apply(n,t.toArray()),o(n)}function r(e){return e.kind()===6||e.kind()===7}function o(e){return e===undefined||e===null||e.length===0?t.emptyTriviaList:e.length===1?new i(e[0]):new s(e)}t.emptyTriviaList={kind:function(){return 3},count:function(){return 0},syntaxTriviaAt:function(t){throw e.Errors.argumentOutOfRange("index")},last:function(){throw e.Errors.argumentOutOfRange("index")},fullWidth:function(){return 0},fullText:function(){return""},hasComment:function(){return!1},hasNewLine:function(){return!1},hasSkippedToken:function(){return!1},toJSON:function(e){return[]},collectTextElements:function(e){},toArray:function(){return[]},concat:function(e){return e}};var i=function(){function t(e){this.item=e}return t.prototype.kind=function(){return 3},t.prototype.count=function(){return 1},t.prototype.syntaxTriviaAt=function(t){if(t!==0)throw e.Errors.argumentOutOfRange("index");return this.item},t.prototype.last=function(){return this.item},t.prototype.fullWidth=function(){return this.item.fullWidth()},t.prototype.fullText=function(){return this.item.fullText()},t.prototype.hasComment=function(){return r(this.item)},t.prototype.hasNewLine=function(){return this.item.kind()===5},t.prototype.hasSkippedToken=function(){return this.item.kind()===8},t.prototype.toJSON=function(e){return[this.item]},t.prototype.collectTextElements=function(e){this.item.collectTextElements(e)},t.prototype.toArray=function(){return[this.item]},t.prototype.concat=function(e){return n(this,e)},t}(),s=function(){function t(e){this.trivia=e}return t.prototype.kind=function(){return 3},t.prototype.count=function(){return this.trivia.length},t.prototype.syntaxTriviaAt=function(t){if(t<0||t>=this.trivia.length)throw e.Errors.argumentOutOfRange("index");return this.trivia[t]},t.prototype.last=function(){return this.trivia[this.trivia.length-1]},t.prototype.fullWidth=function(){return e.ArrayUtilities.sum(this.trivia,function(e){return e.fullWidth()})},t.prototype.fullText=function(){var e="";for(var t=0,n=this.trivia.length;t<n;t++)e+=this.trivia[t].fullText();return e},t.prototype.hasComment=function(){for(var e=0;e<this.trivia.length;e++)if(r(this.trivia[e]))return!0;return!1},t.prototype.hasNewLine=function(){for(var e=0;e<this.trivia.length;e++)if(this.trivia[e].kind()===5)return!0;return!1},t.prototype.hasSkippedToken=function(){for(var e=0;e<this.trivia.length;e++)if(this.trivia[e].kind()===8)return!0;return!1},t.prototype.toJSON=function(e){return this.trivia},t.prototype.collectTextElements=function(e){for(var t=0;t<this.trivia.length;t++)this.trivia[t].collectTextElements(e)},t.prototype.toArray=function(){return this.trivia.slice(0)},t.prototype.concat=function(e){return n(this,e)},t}();t.triviaList=o,t.spaceTriviaList=o([t.spaceTrivia])})(e.Syntax||(e.Syntax={}));var t=e.Syntax})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.isAngleBracket=function(e){var t=e.element(),n=e.parentElement();if(n!==null&&(t.kind()===80||t.kind()===81))switch(n.kind()){case 228:case 229:case 220:return!0}return!1},e.getToken=function(e,t){for(var n=0,r=e.childCount();n<r;n++){var i=e.childAt(n);if(i.tokenKind===t)return i}return null},e.containsToken=function(t,n){return e.getToken(t,n)!==null},e.hasExportKeyword=function(t){return e.getExportKeyword(t)!==null},e.getExportKeyword=function(t){switch(t.kind()){case 130:case 131:case 129:case 148:case 132:case 128:case 133:return e.getToken(t.modifiers,47);default:return null}},e.isAmbientDeclarationSyntax=function(t){if(!t)return!1;var n=t.node();switch(n.kind()){case 130:case 131:case 129:case 148:case 132:if(e.containsToken(n.modifiers,63))return!0;case 133:case 137:case 135:case 139:case 140:case 136:if(n.isClassElement()||n.isModuleElement())return e.isAmbientDeclarationSyntax(t.containingNode());case 243:return e.isAmbientDeclarationSyntax(t.containingNode().containingNode());default:return e.isAmbientDeclarationSyntax(t.containingNode())}},e}();e.SyntaxUtilities=t})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.prototype.defaultVisit=function(e){return null},e.prototype.visitToken=function(e){return this.defaultVisit(e)},e.prototype.visitSourceUnit=function(e){return this.defaultVisit(e)},e.prototype.visitExternalModuleReference=function(e){return this.defaultVisit(e)},e.prototype.visitModuleNameModuleReference=function(e){return this.defaultVisit(e)},e.prototype.visitImportDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitExportAssignment=function(e){return this.defaultVisit(e)},e.prototype.visitClassDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitInterfaceDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitHeritageClause=function(e){return this.defaultVisit(e)},e.prototype.visitModuleDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitFunctionDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitVariableStatement=function(e){return this.defaultVisit(e)},e.prototype.visitVariableDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitVariableDeclarator=function(e){return this.defaultVisit(e)},e.prototype.visitEqualsValueClause=function(e){return this.defaultVisit(e)},e.prototype.visitPrefixUnaryExpression=function(e){return this.defaultVisit(e)},e.prototype.visitArrayLiteralExpression=function(e){return this.defaultVisit(e)},e.prototype.visitOmittedExpression=function(e){return this.defaultVisit(e)},e.prototype.visitParenthesizedExpression=function(e){return this.defaultVisit(e)},e.prototype.visitSimpleArrowFunctionExpression=function(e){return this.defaultVisit(e)},e.prototype.visitParenthesizedArrowFunctionExpression=function(e){return this.defaultVisit(e)},e.prototype.visitQualifiedName=function(e){return this.defaultVisit(e)},e.prototype.visitTypeArgumentList=function(e){return this.defaultVisit(e)},e.prototype.visitConstructorType=function(e){return this.defaultVisit(e)},e.prototype.visitFunctionType=function(e){return this.defaultVisit(e)},e.prototype.visitObjectType=function(e){return this.defaultVisit(e)},e.prototype.visitArrayType=function(e){return this.defaultVisit(e)},e.prototype.visitGenericType=function(e){return this.defaultVisit(e)},e.prototype.visitTypeQuery=function(e){return this.defaultVisit(e)},e.prototype.visitTypeAnnotation=function(e){return this.defaultVisit(e)},e.prototype.visitBlock=function(e){return this.defaultVisit(e)},e.prototype.visitParameter=function(e){return this.defaultVisit(e)},e.prototype.visitMemberAccessExpression=function(e){return this.defaultVisit(e)},e.prototype.visitPostfixUnaryExpression=function(e){return this.defaultVisit(e)},e.prototype.visitElementAccessExpression=function(e){return this.defaultVisit(e)},e.prototype.visitInvocationExpression=function(e){return this.defaultVisit(e)},e.prototype.visitArgumentList=function(e){return this.defaultVisit(e)},e.prototype.visitBinaryExpression=function(e){return this.defaultVisit(e)},e.prototype.visitConditionalExpression=function(e){return this.defaultVisit(e)},e.prototype.visitConstructSignature=function(e){return this.defaultVisit(e)},e.prototype.visitMethodSignature=function(e){return this.defaultVisit(e)},e.prototype.visitIndexSignature=function(e){return this.defaultVisit(e)},e.prototype.visitPropertySignature=function(e){return this.defaultVisit(e)},e.prototype.visitCallSignature=function(e){return this.defaultVisit(e)},e.prototype.visitParameterList=function(e){return this.defaultVisit(e)},e.prototype.visitTypeParameterList=function(e){return this.defaultVisit(e)},e.prototype.visitTypeParameter=function(e){return this.defaultVisit(e)},e.prototype.visitConstraint=function(e){return this.defaultVisit(e)},e.prototype.visitElseClause=function(e){return this.defaultVisit(e)},e.prototype.visitIfStatement=function(e){return this.defaultVisit(e)},e.prototype.visitExpressionStatement=function(e){return this.defaultVisit(e)},e.prototype.visitConstructorDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitMemberFunctionDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitGetAccessor=function(e){return this.defaultVisit(e)},e.prototype.visitSetAccessor=function(e){return this.defaultVisit(e)},e.prototype.visitMemberVariableDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitIndexMemberDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitThrowStatement=function(e){return this.defaultVisit(e)},e.prototype.visitReturnStatement=function(e){return this.defaultVisit(e)},e.prototype.visitObjectCreationExpression=function(e){return this.defaultVisit(e)},e.prototype.visitSwitchStatement=function(e){return this.defaultVisit(e)},e.prototype.visitCaseSwitchClause=function(e){return this.defaultVisit(e)},e.prototype.visitDefaultSwitchClause=function(e){return this.defaultVisit(e)},e.prototype.visitBreakStatement=function(e){return this.defaultVisit(e)},e.prototype.visitContinueStatement=function(e){return this.defaultVisit(e)},e.prototype.visitForStatement=function(e){return this.defaultVisit(e)},e.prototype.visitForInStatement=function(e){return this.defaultVisit(e)},e.prototype.visitWhileStatement=function(e){return this.defaultVisit(e)},e.prototype.visitWithStatement=function(e){return this.defaultVisit(e)},e.prototype.visitEnumDeclaration=function(e){return this.defaultVisit(e)},e.prototype.visitEnumElement=function(e){return this.defaultVisit(e)},e.prototype.visitCastExpression=function(e){return this.defaultVisit(e)},e.prototype.visitObjectLiteralExpression=function(e){return this.defaultVisit(e)},e.prototype.visitSimplePropertyAssignment=function(e){return this.defaultVisit(e)},e.prototype.visitFunctionPropertyAssignment=function(e){return this.defaultVisit(e)},e.prototype.visitFunctionExpression=function(e){return this.defaultVisit(e)},e.prototype.visitEmptyStatement=function(e){return this.defaultVisit(e)},e.prototype.visitTryStatement=function(e){return this.defaultVisit(e)},e.prototype.visitCatchClause=function(e){return this.defaultVisit(e)},e.prototype.visitFinallyClause=function(e){return this.defaultVisit(e)},e.prototype.visitLabeledStatement=function(e){return this.defaultVisit(e)},e.prototype.visitDoStatement=function(e){return this.defaultVisit(e)},e.prototype.visitTypeOfExpression=function(e){return this.defaultVisit(e)},e.prototype.visitDeleteExpression=function(e){return this.defaultVisit(e)},e.prototype.visitVoidExpression=function(e){return this.defaultVisit(e)},e.prototype.visitDebuggerStatement=function(e){return this.defaultVisit(e)},e}();e.SyntaxVisitor=t})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.prototype.visitToken=function(e){},e.prototype.visitNode=function(e){e.accept(this)},e.prototype.visitNodeOrToken=function(e){e.isToken()?this.visitToken(e):this.visitNode(e)},e.prototype.visitOptionalToken=function(e){if(e===null)return;this.visitToken(e)},e.prototype.visitOptionalNode=function(e){if(e===null)return;this.visitNode(e)},e.prototype.visitOptionalNodeOrToken=function(e){if(e===null)return;this.visitNodeOrToken(e)},e.prototype.visitList=function(e){for(var t=0,n=e.childCount();t<n;t++)this.visitNodeOrToken(e.childAt(t))},e.prototype.visitSeparatedList=function(e){for(var t=0,n=e.childCount();t<n;t++){var r=e.childAt(t);this.visitNodeOrToken(r)}},e.prototype.visitSourceUnit=function(e){this.visitList(e.moduleElements),this.visitToken(e.endOfFileToken)},e.prototype.visitExternalModuleReference=function(e){this.visitToken(e.requireKeyword),this.visitToken(e.openParenToken),this.visitToken(e.stringLiteral),this.visitToken(e.closeParenToken)},e.prototype.visitModuleNameModuleReference=function(e){this.visitNodeOrToken(e.moduleName)},e.prototype.visitImportDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.importKeyword),this.visitToken(e.identifier),this.visitToken(e.equalsToken),this.visitNodeOrToken(e.moduleReference),this.visitToken(e.semicolonToken)},e.prototype.visitExportAssignment=function(e){this.visitToken(e.exportKeyword),this.visitToken(e.equalsToken),this.visitToken(e.identifier),this.visitToken(e.semicolonToken)},e.prototype.visitClassDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.classKeyword),this.visitToken(e.identifier),this.visitOptionalNode(e.typeParameterList),this.visitList(e.heritageClauses),this.visitToken(e.openBraceToken),this.visitList(e.classElements),this.visitToken(e.closeBraceToken)},e.prototype.visitInterfaceDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.interfaceKeyword),this.visitToken(e.identifier),this.visitOptionalNode(e.typeParameterList),this.visitList(e.heritageClauses),this.visitNode(e.body)},e.prototype.visitHeritageClause=function(e){this.visitToken(e.extendsOrImplementsKeyword),this.visitSeparatedList(e.typeNames)},e.prototype.visitModuleDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.moduleKeyword),this.visitOptionalNodeOrToken(e.name),this.visitOptionalToken(e.stringLiteral),this.visitToken(e.openBraceToken),this.visitList(e.moduleElements),this.visitToken(e.closeBraceToken)},e.prototype.visitFunctionDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.functionKeyword),this.visitToken(e.identifier),this.visitNode(e.callSignature),this.visitOptionalNode(e.block),this.visitOptionalToken(e.semicolonToken)},e.prototype.visitVariableStatement=function(e){this.visitList(e.modifiers),this.visitNode(e.variableDeclaration),this.visitToken(e.semicolonToken)},e.prototype.visitVariableDeclaration=function(e){this.visitToken(e.varKeyword),this.visitSeparatedList(e.variableDeclarators)},e.prototype.visitVariableDeclarator=function(e){this.visitToken(e.propertyName),this.visitOptionalNode(e.typeAnnotation),this.visitOptionalNode(e.equalsValueClause)},e.prototype.visitEqualsValueClause=function(e){this.visitToken(e.equalsToken),this.visitNodeOrToken(e.value)},e.prototype.visitPrefixUnaryExpression=function(e){this.visitToken(e.operatorToken),this.visitNodeOrToken(e.operand)},e.prototype.visitArrayLiteralExpression=function(e){this.visitToken(e.openBracketToken),this.visitSeparatedList(e.expressions),this.visitToken(e.closeBracketToken)},e.prototype.visitOmittedExpression=function(e){},e.prototype.visitParenthesizedExpression=function(e){this.visitToken(e.openParenToken),this.visitNodeOrToken(e.expression),this.visitToken(e.closeParenToken)},e.prototype.visitSimpleArrowFunctionExpression=function(e){this.visitToken(e.identifier),this.visitToken(e.equalsGreaterThanToken),this.visitOptionalNode(e.block),this.visitOptionalNodeOrToken(e.expression)},e.prototype.visitParenthesizedArrowFunctionExpression=function(e){this.visitNode(e.callSignature),this.visitToken(e.equalsGreaterThanToken),this.visitOptionalNode(e.block),this.visitOptionalNodeOrToken(e.expression)},e.prototype.visitQualifiedName=function(e){this.visitNodeOrToken(e.left),this.visitToken(e.dotToken),this.visitToken(e.right)},e.prototype.visitTypeArgumentList=function(e){this.visitToken(e.lessThanToken),this.visitSeparatedList(e.typeArguments),this.visitToken(e.greaterThanToken)},e.prototype.visitConstructorType=function(e){this.visitToken(e.newKeyword),this.visitOptionalNode(e.typeParameterList),this.visitNode(e.parameterList),this.visitToken(e.equalsGreaterThanToken),this.visitNodeOrToken(e.type)},e.prototype.visitFunctionType=function(e){this.visitOptionalNode(e.typeParameterList),this.visitNode(e.parameterList),this.visitToken(e.equalsGreaterThanToken),this.visitNodeOrToken(e.type)},e.prototype.visitObjectType=function(e){this.visitToken(e.openBraceToken),this.visitSeparatedList(e.typeMembers),this.visitToken(e.closeBraceToken)},e.prototype.visitArrayType=function(e){this.visitNodeOrToken(e.type),this.visitToken(e.openBracketToken),this.visitToken(e.closeBracketToken)},e.prototype.visitGenericType=function(e){this.visitNodeOrToken(e.name),this.visitNode(e.typeArgumentList)},e.prototype.visitTypeQuery=function(e){this.visitToken(e.typeOfKeyword),this.visitNodeOrToken(e.name)},e.prototype.visitTypeAnnotation=function(e){this.visitToken(e.colonToken),this.visitNodeOrToken(e.type)},e.prototype.visitBlock=function(e){this.visitToken(e.openBraceToken),this.visitList(e.statements),this.visitToken(e.closeBraceToken)},e.prototype.visitParameter=function(e){this.visitOptionalToken(e.dotDotDotToken),this.visitList(e.modifiers),this.visitToken(e.identifier),this.visitOptionalToken(e.questionToken),this.visitOptionalNode(e.typeAnnotation),this.visitOptionalNode(e.equalsValueClause)},e.prototype.visitMemberAccessExpression=function(e){this.visitNodeOrToken(e.expression),this.visitToken(e.dotToken),this.visitToken(e.name)},e.prototype.visitPostfixUnaryExpression=function(e){this.visitNodeOrToken(e.operand),this.visitToken(e.operatorToken)},e.prototype.visitElementAccessExpression=function(e){this.visitNodeOrToken(e.expression),this.visitToken(e.openBracketToken),this.visitNodeOrToken(e.argumentExpression),this.visitToken(e.closeBracketToken)},e.prototype.visitInvocationExpression=function(e){this.visitNodeOrToken(e.expression),this.visitNode(e.argumentList)},e.prototype.visitArgumentList=function(e){this.visitOptionalNode(e.typeArgumentList),this.visitToken(e.openParenToken),this.visitSeparatedList(e.arguments),this.visitToken(e.closeParenToken)},e.prototype.visitBinaryExpression=function(e){this.visitNodeOrToken(e.left),this.visitToken(e.operatorToken),this.visitNodeOrToken(e.right)},e.prototype.visitConditionalExpression=function(e){this.visitNodeOrToken(e.condition),this.visitToken(e.questionToken),this.visitNodeOrToken(e.whenTrue),this.visitToken(e.colonToken),this.visitNodeOrToken(e.whenFalse)},e.prototype.visitConstructSignature=function(e){this.visitToken(e.newKeyword),this.visitNode(e.callSignature)},e.prototype.visitMethodSignature=function(e){this.visitToken(e.propertyName),this.visitOptionalToken(e.questionToken),this.visitNode(e.callSignature)},e.prototype.visitIndexSignature=function(e){this.visitToken(e.openBracketToken),this.visitNode(e.parameter),this.visitToken(e.closeBracketToken),this.visitOptionalNode(e.typeAnnotation)},e.prototype.visitPropertySignature=function(e){this.visitToken(e.propertyName),this.visitOptionalToken(e.questionToken),this.visitOptionalNode(e.typeAnnotation)},e.prototype.visitCallSignature=function(e){this.visitOptionalNode(e.typeParameterList),this.visitNode(e.parameterList),this.visitOptionalNode(e.typeAnnotation)},e.prototype.visitParameterList=function(e){this.visitToken(e.openParenToken),this.visitSeparatedList(e.parameters),this.visitToken(e.closeParenToken)},e.prototype.visitTypeParameterList=function(e){this.visitToken(e.lessThanToken),this.visitSeparatedList(e.typeParameters),this.visitToken(e.greaterThanToken)},e.prototype.visitTypeParameter=function(e){this.visitToken(e.identifier),this.visitOptionalNode(e.constraint)},e.prototype.visitConstraint=function(e){this.visitToken(e.extendsKeyword),this.visitNodeOrToken(e.type)},e.prototype.visitElseClause=function(e){this.visitToken(e.elseKeyword),this.visitNodeOrToken(e.statement)},e.prototype.visitIfStatement=function(e){this.visitToken(e.ifKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement),this.visitOptionalNode(e.elseClause)},e.prototype.visitExpressionStatement=function(e){this.visitNodeOrToken(e.expression),this.visitToken(e.semicolonToken)},e.prototype.visitConstructorDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.constructorKeyword),this.visitNode(e.callSignature),this.visitOptionalNode(e.block),this.visitOptionalToken(e.semicolonToken)},e.prototype.visitMemberFunctionDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.propertyName),this.visitNode(e.callSignature),this.visitOptionalNode(e.block),this.visitOptionalToken(e.semicolonToken)},e.prototype.visitGetAccessor=function(e){this.visitList(e.modifiers),this.visitToken(e.getKeyword),this.visitToken(e.propertyName),this.visitNode(e.parameterList),this.visitOptionalNode(e.typeAnnotation),this.visitNode(e.block)},e.prototype.visitSetAccessor=function(e){this.visitList(e.modifiers),this.visitToken(e.setKeyword),this.visitToken(e.propertyName),this.visitNode(e.parameterList),this.visitNode(e.block)},e.prototype.visitMemberVariableDeclaration=function(e){this.visitList(e.modifiers),this.visitNode(e.variableDeclarator),this.visitToken(e.semicolonToken)},e.prototype.visitIndexMemberDeclaration=function(e){this.visitList(e.modifiers),this.visitNode(e.indexSignature),this.visitToken(e.semicolonToken)},e.prototype.visitThrowStatement=function(e){this.visitToken(e.throwKeyword),this.visitNodeOrToken(e.expression),this.visitToken(e.semicolonToken)},e.prototype.visitReturnStatement=function(e){this.visitToken(e.returnKeyword),this.visitOptionalNodeOrToken(e.expression),this.visitToken(e.semicolonToken)},e.prototype.visitObjectCreationExpression=function(e){this.visitToken(e.newKeyword),this.visitNodeOrToken(e.expression),this.visitOptionalNode(e.argumentList)},e.prototype.visitSwitchStatement=function(e){this.visitToken(e.switchKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.expression),this.visitToken(e.closeParenToken),this.visitToken(e.openBraceToken),this.visitList(e.switchClauses),this.visitToken(e.closeBraceToken)},e.prototype.visitCaseSwitchClause=function(e){this.visitToken(e.caseKeyword),this.visitNodeOrToken(e.expression),this.visitToken(e.colonToken),this.visitList(e.statements)},e.prototype.visitDefaultSwitchClause=function(e){this.visitToken(e.defaultKeyword),this.visitToken(e.colonToken),this.visitList(e.statements)},e.prototype.visitBreakStatement=function(e){this.visitToken(e.breakKeyword),this.visitOptionalToken(e.identifier),this.visitToken(e.semicolonToken)},e.prototype.visitContinueStatement=function(e){this.visitToken(e.continueKeyword),this.visitOptionalToken(e.identifier),this.visitToken(e.semicolonToken)},e.prototype.visitForStatement=function(e){this.visitToken(e.forKeyword),this.visitToken(e.openParenToken),this.visitOptionalNode(e.variableDeclaration),this.visitOptionalNodeOrToken(e.initializer),this.visitToken(e.firstSemicolonToken),this.visitOptionalNodeOrToken(e.condition),this.visitToken(e.secondSemicolonToken),this.visitOptionalNodeOrToken(e.incrementor),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement)},e.prototype.visitForInStatement=function(e){this.visitToken(e.forKeyword),this.visitToken(e.openParenToken),this.visitOptionalNode(e.variableDeclaration),this.visitOptionalNodeOrToken(e.left),this.visitToken(e.inKeyword),this.visitNodeOrToken(e.expression),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement)},e.prototype.visitWhileStatement=function(e){this.visitToken(e.whileKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement)},e.prototype.visitWithStatement=function(e){this.visitToken(e.withKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitNodeOrToken(e.statement)},e.prototype.visitEnumDeclaration=function(e){this.visitList(e.modifiers),this.visitToken(e.enumKeyword),this.visitToken(e.identifier),this.visitToken(e.openBraceToken),this.visitSeparatedList(e.enumElements),this.visitToken(e.closeBraceToken)},e.prototype.visitEnumElement=function(e){this.visitToken(e.propertyName),this.visitOptionalNode(e.equalsValueClause)},e.prototype.visitCastExpression=function(e){this.visitToken(e.lessThanToken),this.visitNodeOrToken(e.type),this.visitToken(e.greaterThanToken),this.visitNodeOrToken(e.expression)},e.prototype.visitObjectLiteralExpression=function(e){this.visitToken(e.openBraceToken),this.visitSeparatedList(e.propertyAssignments),this.visitToken(e.closeBraceToken)},e.prototype.visitSimplePropertyAssignment=function(e){this.visitToken(e.propertyName),this.visitToken(e.colonToken),this.visitNodeOrToken(e.expression)},e.prototype.visitFunctionPropertyAssignment=function(e){this.visitToken(e.propertyName),this.visitNode(e.callSignature),this.visitNode(e.block)},e.prototype.visitFunctionExpression=function(e){this.visitToken(e.functionKeyword),this.visitOptionalToken(e.identifier),this.visitNode(e.callSignature),this.visitNode(e.block)},e.prototype.visitEmptyStatement=function(e){this.visitToken(e.semicolonToken)},e.prototype.visitTryStatement=function(e){this.visitToken(e.tryKeyword),this.visitNode(e.block),this.visitOptionalNode(e.catchClause),this.visitOptionalNode(e.finallyClause)},e.prototype.visitCatchClause=function(e){this.visitToken(e.catchKeyword),this.visitToken(e.openParenToken),this.visitToken(e.identifier),this.visitOptionalNode(e.typeAnnotation),this.visitToken(e.closeParenToken),this.visitNode(e.block)},e.prototype.visitFinallyClause=function(e){this.visitToken(e.finallyKeyword),this.visitNode(e.block)},e.prototype.visitLabeledStatement=function(e){this.visitToken(e.identifier),this.visitToken(e.colonToken),this.visitNodeOrToken(e.statement)},e.prototype.visitDoStatement=function(e){this.visitToken(e.doKeyword),this.visitNodeOrToken(e.statement),this.visitToken(e.whileKeyword),this.visitToken(e.openParenToken),this.visitNodeOrToken(e.condition),this.visitToken(e.closeParenToken),this.visitToken(e.semicolonToken)},e.prototype.visitTypeOfExpression=function(e){this.visitToken(e.typeOfKeyword),this.visitNodeOrToken(e.expression)},e.prototype.visitDeleteExpression=function(e){this.visitToken(e.deleteKeyword),this.visitNodeOrToken(e.expression)},e.prototype.visitVoidExpression=function(e){this.visitToken(e.voidKeyword),this.visitNodeOrToken(e.expression)},e.prototype.visitDebuggerStatement=function(e){this.visitToken(e.debuggerKeyword),this.visitToken(e.semicolonToken)},e}();e.SyntaxWalker=t})(r||(r={}));var r;(function(e){var t=function(e){function t(){e.apply(this,arguments),this._position=0}return i(t,e),t.prototype.visitToken=function(e){this._position+=e.fullWidth()},t.prototype.position=function(){return this._position},t.prototype.skip=function(e){this._position+=e.fullWidth()},t}(e.SyntaxWalker);e.PositionTrackingWalker=t})(r||(r={}));var r;(function(e){var t=function(t){function n(n,r){t.call(this),this.trackParents=n,this.trackPreviousToken=r,this.tokenToInformation=e.Collections.createHashTable(e.Collections.DefaultHashTableCapacity,e.Collections.identityHashCode),this.elementToPosition=e.Collections.createHashTable(e.Collections.DefaultHashTableCapacity,e.Collections.identityHashCode),this._previousToken=null,this._previousTokenInformation=null,this._currentPosition=0,this._elementToParent=e.Collections.createHashTable(e.Collections.DefaultHashTableCapacity,e.Collections.identityHashCode),this._parentStack=[],this._parentStack.push(null)}return i(n,t),n.create=function(e,t,r){var i=new n(t,r);return i.visitNode(e),i},n.prototype.visitNode=function(n){this.trackParents&&this._elementToParent.add(n,e.ArrayUtilities.last(this._parentStack)),this.elementToPosition.add(n,this._currentPosition),this.trackParents&&this._parentStack.push(n),t.prototype.visitNode.call(this,n),this.trackParents&&this._parentStack.pop()},n.prototype.visitToken=function(t){this.trackParents&&this._elementToParent.add(t,e.ArrayUtilities.last(this._parentStack));if(this.trackPreviousToken){var n={previousToken:this._previousToken,nextToken:null};this._previousTokenInformation!==null&&(this._previousTokenInformation.nextToken=t),this._previousToken=t,this._previousTokenInformation=n,this.tokenToInformation.add(t,n)}this.elementToPosition.add(t,this._currentPosition),this._currentPosition+=t.fullWidth()},n.prototype.parent=function(e){return this._elementToParent.get(e)},n.prototype.fullStart=function(e){return this.elementToPosition.get(e)},n.prototype.start=function(e){return this.fullStart(e)+e.leadingTriviaWidth()},n.prototype.end=function(e){return this.start(e)+e.width()},n.prototype.previousToken=function(e){return this.tokenInformation(e).previousToken},n.prototype.tokenInformation=function(e){return this.tokenToInformation.get(e)},n.prototype.firstTokenInLineContainingToken=function(e){var t=e;for(;;){var n=this.tokenInformation(t);if(this.isFirstTokenInLineWorker(n))break;t=n.previousToken}return t},n.prototype.isFirstTokenInLine=function(e){var t=this.tokenInformation(e);return this.isFirstTokenInLineWorker(t)},n.prototype.isFirstTokenInLineWorker=function(e){return e.previousToken===null||e.previousToken.hasTrailingNewLine()},n}(e.SyntaxWalker);e.SyntaxInformationMap=t})(r||(r={}));var r;(function(e){var t=function(t){function n(){t.apply(this,arguments),this.tokenTable=e.Collections.createHashTable(e.Collections.DefaultHashTableCapacity,e.Collections.identityHashCode)}return i(n,t),n.checkInvariants=function(e){e.accept(new n)},n.prototype.visitToken=function(e){this.tokenTable.add(e,e)},n}(e.SyntaxWalker);e.SyntaxNodeInvariantsChecker=t})(r||(r={}));var r;(function(e){var t=function(e){function t(t){e.call(this),this._depth=0,this._maximumDepth=0,this._maximumDepth=t}return i(t,e),t.prototype.visitNode=function(t){this._depth<this._maximumDepth?(this._depth++,e.prototype.visitNode.call(this,t),this._depth--):this.skip(t)},t}(e.PositionTrackingWalker);e.DepthLimitedWalker=t})(r||(r={}));var r;(function(e){(function(t){function a(e,t,n,r){var i=new s(e,t,r.languageVersion());return(new u(e,t.lineMap(),i,r,t)).parseSyntaxTree(n)}function f(e,t,n){if(t.isUnchanged())return e;var r=new o(e,t,n);return(new u(e.fileName(),n.lineMap(),r,e.parseOptions(),n)).parseSyntaxTree(e.isDeclaration())}var n;(function(e){e[e.CommaExpressionPrecedence=1]="CommaExpressionPrecedence",e[e.AssignmentExpressionPrecedence=2]="AssignmentExpressionPrecedence",e[e.ConditionalExpressionPrecedence=3]="ConditionalExpressionPrecedence",e[e.ArrowFunctionPrecedence=4]="ArrowFunctionPrecedence",e[e.LogicalOrExpressionPrecedence=5]="LogicalOrExpressionPrecedence",e[e.LogicalAndExpressionPrecedence=6]="LogicalAndExpressionPrecedence",e[e.BitwiseOrExpressionPrecedence=7]="BitwiseOrExpressionPrecedence",e[e.BitwiseExclusiveOrExpressionPrecedence=8]="BitwiseExclusiveOrExpressionPrecedence",e[e.BitwiseAndExpressionPrecedence=9]="BitwiseAndExpressionPrecedence",e[e.EqualityExpressionPrecedence=10]="EqualityExpressionPrecedence",e[e.RelationalExpressionPrecedence=11]="RelationalExpressionPrecedence",e[e.ShiftExpressionPrecdence=12]="ShiftExpressionPrecdence",e[e.AdditiveExpressionPrecedence=13]="AdditiveExpressionPrecedence",e[e.MultiplicativeExpressionPrecedence=14]="MultiplicativeExpressionPrecedence",e[e.UnaryExpressionPrecedence=15]="UnaryExpressionPrecedence"})(n||(n={}));var r;(function(e){e[e.SourceUnit_ModuleElements=1]="SourceUnit_ModuleElements",e[e.ClassDeclaration_ClassElements=2]="ClassDeclaration_ClassElements",e[e.ModuleDeclaration_ModuleElements=4]="ModuleDeclaration_ModuleElements",e[e.SwitchStatement_SwitchClauses=8]="SwitchStatement_SwitchClauses",e[e.SwitchClause_Statements=16]="SwitchClause_Statements",e[e.Block_Statements=32]="Block_Statements",e[e.TryBlock_Statements=64]="TryBlock_Statements",e[e.CatchBlock_Statements=128]="CatchBlock_Statements",e[e.EnumDeclaration_EnumElements=256]="EnumDeclaration_EnumElements",e[e.ObjectType_TypeMembers=512]="ObjectType_TypeMembers",e[e.ClassOrInterfaceDeclaration_HeritageClauses=1024]="ClassOrInterfaceDeclaration_HeritageClauses",e[e.HeritageClause_TypeNameList=2048]="HeritageClause_TypeNameList",e[e.VariableDeclaration_VariableDeclarators_AllowIn=4096]="VariableDeclaration_VariableDeclarators_AllowIn",e[e.VariableDeclaration_VariableDeclarators_DisallowIn=8192]="VariableDeclaration_VariableDeclarators_DisallowIn",e[e.ArgumentList_AssignmentExpressions=16384]="ArgumentList_AssignmentExpressions",e[e.ObjectLiteralExpression_PropertyAssignments=32768]="ObjectLiteralExpression_PropertyAssignments",e[e.ArrayLiteralExpression_AssignmentExpressions=65536]="ArrayLiteralExpression_AssignmentExpressions",e[e.ParameterList_Parameters=1<<17]="ParameterList_Parameters",e[e.TypeArgumentList_Types=1<<18]="TypeArgumentList_Types",e[e.TypeParameterList_TypeParameters=1<<19]="TypeParameterList_TypeParameters",e[e.FirstListParsingState=e.SourceUnit_ModuleElements]="FirstListParsingState",e[e.LastListParsingState=e.TypeParameterList_TypeParameters]="LastListParsingState"})(r||(r={}));var i=function(){function e(e){this._elements=[],this._index=0,this._pinCount=0,e.insertChildrenInto(this._elements,0)}return e.prototype.isFinished=function(){return this._index===this._elements.length},e.prototype.currentElement=function(){return this.isFinished()?null:this._elements[this._index]},e.prototype.currentNode=function(){var e=this.currentElement();return e!==null&&e.isNode()?e:null},e.prototype.moveToFirstChild=function(){if(this.isFinished())return;var e=this._elements[this._index];if(e.isToken())return;var t=e;this._elements.splice(this._index,1),t.insertChildrenInto(this._elements,this._index)},e.prototype.moveToNextSibling=function(){if(this.isFinished())return;if(this._pinCount>0){this._index++;return}this._elements.shift()},e.prototype.getAndPinCursorIndex=function(){return this._pinCount++,this._index},e.prototype.releaseAndUnpinCursorIndex=function(e){this._pinCount--,this._pinCount===0},e.prototype.rewindToPinnedCursorIndex=function(e){this._index=e},e.prototype.pinCount=function(){return this._pinCount},e.prototype.moveToFirstToken=function(){var e;while(!this.isFinished()){e=this.currentElement();if(e.isNode()){this.moveToFirstChild();continue}return}},e.prototype.currentToken=function(){this.moveToFirstToken();if(this.isFinished())return null;var e=this.currentElement();return e},e.prototype.peekToken=function(e){this.moveToFirstToken();var t=this.getAndPinCursorIndex();for(var n=0;n<e;n++)this.moveToNextSibling(),this.moveToFirstToken();var r=this.currentToken();return this.rewindToPinnedCursorIndex(t),this.releaseAndUnpinCursorIndex(t),r},e}(),s=function(){function t(t,n,r){this._previousToken=null,this._absolutePosition=0,this._tokenDiagnostics=[],this.rewindPointPool=[],this.rewindPointPoolCount=0,this.slidingWindow=new e.SlidingWindow(this,e.ArrayUtilities.createArray(32,null),null),this.scanner=new e.Scanner(t,n,r)}return t.prototype.currentNode=function(){return null},t.prototype.moveToNextNode=function(){throw e.Errors.invalidOperation()},t.prototype.absolutePosition=function(){return this._absolutePosition},t.prototype.previousToken=function(){return this._previousToken},t.prototype.tokenDiagnostics=function(){return this._tokenDiagnostics},t.prototype.getOrCreateRewindPoint=function(){if(this.rewindPointPoolCount===0)return{};this.rewindPointPoolCount--;var e=this.rewindPointPool[this.rewindPointPoolCount];return this.rewindPointPool[this.rewindPointPoolCount]=null,e},t.prototype.getRewindPoint=function(){var e=this.slidingWindow.getAndPinAbsoluteIndex(),t=this.getOrCreateRewindPoint();return t.slidingWindowIndex=e,t.previousToken=this._previousToken,t.absolutePosition=this._absolutePosition,t.pinCount=this.slidingWindow.pinCount(),t},t.prototype.isPinned=function(){return this.slidingWindow.pinCount()>0},t.prototype.rewind=function(e){this.slidingWindow.rewindToPinnedIndex(e.slidingWindowIndex),this._previousToken=e.previousToken,this._absolutePosition=e.absolutePosition},t.prototype.releaseRewindPoint=function(e){this.slidingWindow.releaseAndUnpinAbsoluteIndex(e.absoluteIndex),this.rewindPointPool[this.rewindPointPoolCount]=e,this.rewindPointPoolCount++},t.prototype.fetchMoreItems=function(e,t,n,r,i){return n[r]=this.scanner.scan(this._tokenDiagnostics,e),1},t.prototype.peekToken=function(e){return this.slidingWindow.peekItemN(e)},t.prototype.moveToNextToken=function(){var e=this.currentToken();this._absolutePosition+=e.fullWidth(),this._previousToken=e,this.slidingWindow.moveToNextItem()},t.prototype.currentToken=function(){return this.slidingWindow.currentItem(!1)},t.prototype.removeDiagnosticsOnOrAfterPosition=function(e){var t=this._tokenDiagnostics.length;while(t>0){var n=this._tokenDiagnostics[t-1];if(!(n.start()>=e))break;t--}this._tokenDiagnostics.length=t},t.prototype.resetToPosition=function(e,t){this._absolutePosition=e,this._previousToken=t,this.removeDiagnosticsOnOrAfterPosition(e),this.slidingWindow.disgardAllItemsFromCurrentIndexOnwards(),this.scanner.setAbsoluteIndex(e)},t.prototype.currentTokenAllowingRegularExpression=function(){this.resetToPosition(this._absolutePosition,this._previousToken);var e=this.slidingWindow.currentItem(!0);return e},t}(),o=function(){function t(n,r,o){this._changeDelta=0;var u=n.sourceUnit();this._oldSourceUnitCursor=new i(u),this._changeRange=t.extendToAffectedRange(r,u),e.Debug.shouldAssert(2)&&e.Debug.assert(u.fullWidth()-this._changeRange.span().length()+this._changeRange.newLength()===o.length()),this._normalParserSource=new s(n.fileName(),o,n.parseOptions().languageVersion())}return t.extendToAffectedRange=function(t,n){var r=1,i=t.span().start();for(var s=0;i>0&&s<=r;s++){var o=n.findToken(i),u=o.fullStart();i=e.MathPrototype.max(0,u-1)}var a=e.TextSpan.fromBounds(i,t.span().end()),f=t.newLength()+(t.span().start()-i);return new e.TextChangeRange(a,f)},t.prototype.absolutePosition=function(){return this._normalParserSource.absolutePosition()},t.prototype.previousToken=function(){return this._normalParserSource.previousToken()},t.prototype.tokenDiagnostics=function(){return this._normalParserSource.tokenDiagnostics()},t.prototype.getRewindPoint=function(){var e=this._normalParserSource.getRewindPoint(),t=this._oldSourceUnitCursor.getAndPinCursorIndex();return e.changeDelta=this._changeDelta,e.changeRange=this._changeRange,e.oldSourceUnitCursorIndex=t,e},t.prototype.rewind=function(e){this._changeRange=e.changeRange,this._changeDelta=e.changeDelta,this._oldSourceUnitCursor.rewindToPinnedCursorIndex(e.oldSourceUnitCursorIndex),this._normalParserSource.rewind(e)},t.prototype.releaseRewindPoint=function(e){this._oldSourceUnitCursor.releaseAndUnpinCursorIndex(e.oldSourceUnitCursorIndex),this._normalParserSource.releaseRewindPoint(e)},t.prototype.canReadFromOldSourceUnit=function(){return this._normalParserSource.isPinned()?!1:this._changeRange!==null&&this._changeRange.newSpan().intersectsWithPosition(this.absolutePosition())?!1:(this.syncCursorToNewTextIfBehind(),this._changeDelta===0&&!this._oldSourceUnitCursor.isFinished())},t.prototype.currentNode=function(){return this.canReadFromOldSourceUnit()?this.tryGetNodeFromOldSourceUnit():null},t.prototype.currentToken=function(){if(this.canReadFromOldSourceUnit()){var e=this.tryGetTokenFromOldSourceUnit();if(e!==null)return e}return this._normalParserSource.currentToken()},t.prototype.currentTokenAllowingRegularExpression=function(){return this._normalParserSource.currentTokenAllowingRegularExpression()},t.prototype.syncCursorToNewTextIfBehind=function(){for(;;){if(this._oldSourceUnitCursor.isFinished())break;if(this._changeDelta>=0)break;var e=this._oldSourceUnitCursor.currentElement();e.isNode()&&e.fullWidth()>Math.abs(this._changeDelta)?this._oldSourceUnitCursor.moveToFirstChild():(this._oldSourceUnitCursor.moveToNextSibling(),this._changeDelta+=e.fullWidth())}},t.prototype.intersectsWithChangeRangeSpanInOriginalText=function(e,t){return this._changeRange!==null&&this._changeRange.span().intersectsWith(e,t)},t.prototype.tryGetNodeFromOldSourceUnit=function(){for(;;){var e=this._oldSourceUnitCursor.currentNode();if(e===null)return null;if(!this.intersectsWithChangeRangeSpanInOriginalText(this.absolutePosition(),e.fullWidth())&&!e.isIncrementallyUnusable())return e;this._oldSourceUnitCursor.moveToFirstChild()}},t.prototype.canReuseTokenFromOldSourceUnit=function(e,t){return t!==null&&!this.intersectsWithChangeRangeSpanInOriginalText(e,t.fullWidth())&&!t.isIncrementallyUnusable()?!0:!1},t.prototype.tryGetTokenFromOldSourceUnit=function(){var e=this._oldSourceUnitCursor.currentToken();return this.canReuseTokenFromOldSourceUnit(this.absolutePosition(),e)?e:null},t.prototype.peekToken=function(e){if(this.canReadFromOldSourceUnit()){var t=this.tryPeekTokenFromOldSourceUnit(e);if(t!==null)return t}return this._normalParserSource.peekToken(e)},t.prototype.tryPeekTokenFromOldSourceUnit=function(e){var t=this.absolutePosition();for(var n=0;n<e;n++){var r=this._oldSourceUnitCursor.peekToken(n);if(!this.canReuseTokenFromOldSourceUnit(t,r))return null;t+=r.fullWidth()}var i=this._oldSourceUnitCursor.peekToken(e);return this.canReuseTokenFromOldSourceUnit(t,i)?i:null},t.prototype.moveToNextNode=function(){var e=this._oldSourceUnitCursor.currentElement(),t=this._oldSourceUnitCursor.currentNode();this._oldSourceUnitCursor.moveToNextSibling();var n=this.absolutePosition()+t.fullWidth(),r=t.lastToken();this._normalParserSource.resetToPosition(n,r),this._changeRange!==null},t.prototype.moveToNextToken=function(){var e=this.currentToken();if(this._oldSourceUnitCursor.currentToken()===e){this._oldSourceUnitCursor.moveToNextSibling();var t=this.absolutePosition()+e.fullWidth(),n=e;this._normalParserSource.resetToPosition(t,n),this._changeRange!==null}else{this._changeDelta-=e.fullWidth(),this._normalParserSource.moveToNextToken();if(this._changeRange!==null){var r=this._changeRange.newSpan();this.absolutePosition()>=r.end()&&(this._changeDelta+=this._changeRange.newLength()-this._changeRange.span().length(),this._changeRange=null)}}},t}(),u=function(){function t(t,n,r,i,s){this.newText_forDebuggingPurposesOnly=s,this.listParsingState=0,this.isInStrictMode=!1,this.diagnostics=[],this.factory=e.Syntax.normalModeFactory,this.mergeTokensStorage=[],this.arrayPool=[],this.fileName=t,this.lineMap=n,this.source=r,this.parseOptions=i}return t.prototype.getRewindPoint=function(){var e=this.source.getRewindPoint();return e.diagnosticsCount=this.diagnostics.length,e.isInStrictMode=this.isInStrictMode,e.listParsingState=this.listParsingState,e},t.prototype.rewind=function(e){this.source.rewind(e),this.diagnostics.length=e.diagnosticsCount},t.prototype.releaseRewindPoint=function(e){this.source.releaseRewindPoint(e)},t.prototype.currentTokenStart=function(){return this.source.absolutePosition()+this.currentToken().leadingTriviaWidth()},t.prototype.previousTokenStart=function(){return this.previousToken()===null?0:this.source.absolutePosition()-this.previousToken().fullWidth()+this.previousToken().leadingTriviaWidth()},t.prototype.previousTokenEnd=function(){return this.previousToken()===null?0:this.previousTokenStart()+this.previousToken().width()},t.prototype.currentNode=function(){var e=this.source.currentNode();return e===null||e.parsedInStrictMode()!==this.isInStrictMode?null:e},t.prototype.currentToken=function(){return this.source.currentToken()},t.prototype.currentTokenAllowingRegularExpression=function(){return this.source.currentTokenAllowingRegularExpression()},t.prototype.peekToken=function(e){return this.source.peekToken(e)},t.prototype.eatAnyToken=function(){var e=this.currentToken();return this.moveToNextToken(),e},t.prototype.moveToNextToken=function(){this.source.moveToNextToken()},t.prototype.previousToken=function(){return this.source.previousToken()},t.prototype.eatNode=function(){var e=this.source.currentNode();return this.source.moveToNextNode(),e},t.prototype.eatToken=function(e){var t=this.currentToken();return t.tokenKind===e?(this.moveToNextToken(),t):this.createMissingToken(e,t)},t.prototype.tryEatToken=function(e){return this.currentToken().tokenKind===e?this.eatToken(e):null},t.prototype.eatKeyword=function(e){var t=this.currentToken();return t.tokenKind===e?(this.moveToNextToken(),t):this.createMissingToken(e,t)},t.prototype.isIdentifier=function(e){var t=e.tokenKind;return t===11?!0:t>=51?t<=59?!this.isInStrictMode:t<=69:!1},t.prototype.eatIdentifierNameToken=function(){var t=this.currentToken();return t.tokenKind===11?(this.moveToNextToken(),t):e.SyntaxFacts.isAnyKeyword(t.tokenKind)?(this.moveToNextToken(),e.Syntax.convertToIdentifierName(t)):this.createMissingToken(11,t)},t.prototype.eatIdentifierToken=function(){var t=this.currentToken();return this.isIdentifier(t)?(this.moveToNextToken(),t.tokenKind===11?t:e.Syntax.convertToIdentifierName(t)):this.createMissingToken(11,t)},t.prototype.canEatAutomaticSemicolon=function(e){var t=this.currentToken();return t.tokenKind===10?!0:t.tokenKind===71?!0:e?!0:this.previousToken()!==null&&this.previousToken().hasTrailingNewLine()?!0:!1},t.prototype.canEatExplicitOrAutomaticSemicolon=function(e){var t=this.currentToken();return t.tokenKind===78?!0:this.canEatAutomaticSemicolon(e)},t.prototype.eatExplicitOrAutomaticSemicolon=function(t){var n=this.currentToken();if(n.tokenKind===78)return this.eatToken(78);if(this.canEatAutomaticSemicolon(t)){var r=e.Syntax.emptyToken(78);return this.parseOptions.allowAutomaticSemicolonInsertion()||this.addDiagnostic(new e.Diagnostic(this.fileName,this.lineMap,this.previousTokenEnd(),0,e.DiagnosticCode.Automatic_semicolon_insertion_not_allowed,null)),r}return this.eatToken(78)},t.prototype.isKeyword=function(e){if(e>=15){if(e<=50)return!0;if(this.isInStrictMode)return e<=59}return!1},t.prototype.createMissingToken=function(t,n){var r=this.getExpectedTokenDiagnostic(t,n);return this.addDiagnostic(r),e.Syntax.emptyToken(t)},t.prototype.getExpectedTokenDiagnostic=function(t,n){var r=this.currentToken();return e.SyntaxFacts.isAnyKeyword(t)||e.SyntaxFacts.isAnyPunctuation(t)?new e.Diagnostic(this.fileName,this.lineMap,this.currentTokenStart(),r.width(),e.DiagnosticCode._0_expected,[e.SyntaxFacts.getText(t)]):n!==null&&e.SyntaxFacts.isAnyKeyword(n.tokenKind)?new e.Diagnostic(this.fileName,this.lineMap,this.currentTokenStart(),r.width(),e.DiagnosticCode.Identifier_expected_0_is_a_keyword,[e.SyntaxFacts.getText(n.tokenKind)]):new e.Diagnostic(this.fileName,this.lineMap,this.currentTokenStart(),r.width(),e.DiagnosticCode.Identifier_expected,null)},t.getPrecedence=function(t){switch(t){case 173:return 1;case 174:case 175:case 176:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 184:case 185:return 2;case 186:return 3;case 187:return 5;case 188:return 6;case 189:return 7;case 190:return 8;case 191:return 9;case 192:case 193:case 194:case 195:return 10;case 196:case 197:case 198:case 199:case 200:case 201:return 11;case 202:case 203:case 204:return 12;case 208:case 209:return 13;case 205:case 206:case 207:return 14;case 164:case 165:case 166:case 167:case 170:case 171:case 172:case 168:case 169:return 15}throw e.Errors.invalidOperation()},t.prototype.addSkippedTokenAfterNodeOrToken=function(t,n){if(t.isToken())return this.addSkippedTokenAfterToken(t,n);if(t.isNode())return this.addSkippedTokenAfterNode(t,n);throw e.Errors.invalidOperation()},t.prototype.addSkippedTokenAfterNode=function(e,t){var n=e.lastToken(),r=this.addSkippedTokenAfterToken(n,t);return e.replaceToken(n,r)},t.prototype.addSkippedTokensBeforeNode=function(e,t){if(t.length>0){var n=e.firstToken(),r=this.addSkippedTokensBeforeToken(n,t);return e.replaceToken(n,r)}return e},t.prototype.addSkippedTokensBeforeToken=function(t,n){var r=[];for(var i=0,s=n.length;i<s;i++)this.addSkippedTokenToTriviaArray(r,n[i]);return this.addTriviaTo(t.leadingTrivia(),r),this.returnArray(n),t.withLeadingTrivia(e.Syntax.triviaList(r))},t.prototype.addSkippedTokensAfterToken=function(t,n){if(n.length===0)return this.returnArray(n),t;var r=t.trailingTrivia().toArray();for(var i=0,s=n.length;i<s;i++)this.addSkippedTokenToTriviaArray(r,n[i]);return this.returnArray(n),t.withTrailingTrivia(e.Syntax.triviaList(r))},t.prototype.addSkippedTokenAfterToken=function(t,n){var r=t.trailingTrivia().toArray();return this.addSkippedTokenToTriviaArray(r,n),t.withTrailingTrivia(e.Syntax.triviaList(r))},t.prototype.addSkippedTokenToTriviaArray=function(t,n){this.addTriviaTo(n.leadingTrivia(),t);var r=n.withLeadingTrivia(e.Syntax.emptyTriviaList).withTrailingTrivia(e.Syntax.emptyTriviaList);t.push(e.Syntax.skippedTokenTrivia(r)),this.addTriviaTo(n.trailingTrivia(),t)},t.prototype.addTriviaTo=function(e,t){for(var n=0,r=e.count();n<r;n++)t.push(e.syntaxTriviaAt(n))},t.prototype.parseSyntaxTree=function(t){var n=this.parseSourceUnit(),r=this.source.tokenDiagnostics().concat(this.diagnostics);return r.sort(function(e,t){return e.start()-t.start()}),new e.SyntaxTree(n,t,r,this.fileName,this.lineMap,this.parseOptions)},t.prototype.setStrictMode=function(t){this.isInStrictMode=t,this.factory=t?e.Syntax.strictModeFactory:e.Syntax.normalModeFactory},t.prototype.parseSourceUnit=function(){var n=this.isInStrictMode,r=this.parseSyntaxList(1,t.updateStrictModeState),i=r.list;this.setStrictMode(n);var s=this.factory.sourceUnit(i,this.currentToken());return s=this.addSkippedTokensBeforeNode(s,r.skippedTokens),e.Debug.shouldAssert(2)&&(e.Debug.assert(s.fullWidth()===this.newText_forDebuggingPurposesOnly.length()),e.Debug.shouldAssert(3)&&e.Debug.assert(s.fullText()===this.newText_forDebuggingPurposesOnly.substr(0,this.newText_forDebuggingPurposesOnly.length(),!1))),s},t.updateStrictModeState=function(t,n){if(!t.isInStrictMode){for(var r=0;r<n.length;r++){var i=n[r];if(!e.SyntaxFacts.isDirectivePrologueElement(i))return}t.setStrictMode(e.SyntaxFacts.isUseStrictDirective(n[n.length-1]))}},t.prototype.isModuleElement=function(e){if(this.currentNode()!==null&&this.currentNode().isModuleElement())return!0;var t=this.modifierCount();return this.isImportDeclaration(t)||this.isExportAssignment()||this.isModuleDeclaration(t)||this.isInterfaceDeclaration(t)||this.isClassDeclaration(t)||this.isEnumDeclaration(t)||this.isStatement(e)},t.prototype.parseModuleElement=function(t){if(this.currentNode()!==null&&this.currentNode().isModuleElement())return this.eatNode();var n=this.modifierCount();if(this.isImportDeclaration(n))return this.parseImportDeclaration();if(this.isExportAssignment())return this.parseExportAssignment();if(this.isModuleDeclaration(n))return this.parseModuleDeclaration();if(this.isInterfaceDeclaration(n))return this.parseInterfaceDeclaration();if(this.isClassDeclaration(n))return this.parseClassDeclaration();if(this.isEnumDeclaration(n))return this.parseEnumDeclaration();if(this.isStatement(t))return this.parseStatement(t);throw e.Errors.invalidOperation()},t.prototype.isImportDeclaration=function(e){return e>0&&this.peekToken(e).tokenKind===49?!0:this.currentToken().tokenKind===49&&this.isIdentifier(this.peekToken(1))},t.prototype.parseImportDeclaration=function(){var e=this.parseModifiers(),t=this.eatKeyword(49),n=this.eatIdentifierToken(),r=this.eatToken(107),i=this.parseModuleReference(),s=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.importDeclaration(e,t,n,r,i,s)},t.prototype.isExportAssignment=function(){return this.currentToken().tokenKind===47&&this.peekToken(1).tokenKind===107},t.prototype.parseExportAssignment=function(){var e=this.eatKeyword(47),t=this.eatToken(107),n=this.eatIdentifierToken(),r=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.exportAssignment(e,t,n,r)},t.prototype.parseModuleReference=function(){return this.isExternalModuleReference()?this.parseExternalModuleReference():this.parseModuleNameModuleReference()},t.prototype.isExternalModuleReference=function(){var e=this.currentToken();return e.tokenKind===66?this.peekToken(1).tokenKind===72:!1},t.prototype.parseExternalModuleReference=function(){var e=this.eatKeyword(66),t=this.eatToken(72),n=this.eatToken(14),r=this.eatToken(73);return this.factory.externalModuleReference(e,t,n,r)},t.prototype.parseModuleNameModuleReference=function(){var e=this.parseName();return this.factory.moduleNameModuleReference(e)},t.prototype.parseIdentifierName=function(){var e=this.eatIdentifierNameToken();return e},t.prototype.tryParseTypeArgumentList=function(e){if(this.currentToken().kind()!==80)return null;var t,n,r,i;if(!e)return t=this.eatToken(80),r=this.parseSeparatedSyntaxList(262144),i=r.list,t=this.addSkippedTokensAfterToken(t,r.skippedTokens),n=this.eatToken(81),this.factory.typeArgumentList(t,i,n);var s=this.getRewindPoint();t=this.eatToken(80),r=this.parseSeparatedSyntaxList(262144),i=r.list,t=this.addSkippedTokensAfterToken(t,r.skippedTokens),n=this.eatToken(81);if(n.fullWidth()===0||!this.canFollowTypeArgumentListInExpression(this.currentToken().kind()))return this.rewind(s),this.releaseRewindPoint(s),null;this.releaseRewindPoint(s);var o=this.factory.typeArgumentList(t,i,n);return o},t.prototype.canFollowTypeArgumentListInExpression=function(e){switch(e){case 72:case 76:case 73:case 75:case 106:case 78:case 79:case 105:case 84:case 87:case 86:case 88:case 103:case 104:case 100:case 98:case 99:case 71:case 10:return!0;default:return!1}},t.prototype.parseName=function(){var t=this.isIdentifier(this.currentToken()),n=this.eatIdentifierToken();while(t&&this.currentToken().tokenKind===76){var r=this.eatToken(76),i=this.currentToken(),s;e.SyntaxFacts.isAnyKeyword(i.tokenKind)&&this.previousToken().hasTrailingNewLine()&&!i.hasTrailingNewLine()&&e.SyntaxFacts.isIdentifierNameOrAnyKeyword(this.peekToken(1))?s=this.createMissingToken(11,i):s=this.eatIdentifierNameToken(),n=this.factory.qualifiedName(n,r,s),t=s.fullWidth()>0}return n},t.prototype.isEnumDeclaration=function(e){return e>0&&this.peekToken(e).tokenKind===46?!0:this.currentToken().tokenKind===46&&this.isIdentifier(this.peekToken(1))},t.prototype.parseEnumDeclaration=function(){var t=this.parseModifiers(),n=this.eatKeyword(46),r=this.eatIdentifierToken(),i=this.eatToken(70),s=e.Syntax.emptySeparatedList;if(i.width()>0){var o=this.parseSeparatedSyntaxList(256);s=o.list,i=this.addSkippedTokensAfterToken(i,o.skippedTokens)}var u=this.eatToken(71);return this.factory.enumDeclaration(t,n,r,i,s,u)},t.prototype.isEnumElement=function(e){return this.currentNode()!==null&&this.currentNode().kind()===243?!0:this.isPropertyName(this.currentToken(),e)},t.prototype.parseEnumElement=function(){if(this.currentNode()!==null&&this.currentNode().kind()===243)return this.eatNode();var e=this.eatPropertyName(),t=null;return this.isEqualsValueClause(!1)&&(t=this.parseEqualsValueClause(!0)),this.factory.enumElement(e,t)},t.isModifier=function(e){switch(e.tokenKind){case 57:case 55:case 58:case 47:case 63:return!0;default:return!1}},t.prototype.modifierCount=function(){var e=0;for(;;){if(t.isModifier(this.peekToken(e))){e++;continue}break}return e},t.prototype.parseModifiers=function(){var n=this.getArray();for(;;){if(t.isModifier(this.currentToken())){n.push(this.eatAnyToken());continue}break}var r=e.Syntax.list(n);return this.returnZeroOrOneLengthArray(n),r},t.prototype.isClassDeclaration=function(e){return e>0&&this.peekToken(e).tokenKind===44?!0:this.currentToken().tokenKind===44&&this.isIdentifier(this.peekToken(1))},t.prototype.parseHeritageClauses=function(){var t=e.Syntax.emptyList;if(this.isHeritageClause()){var n=this.parseSyntaxList(1024);t=n.list,e.Debug.assert(n.skippedTokens.length===0)}return t},t.prototype.parseClassDeclaration=function(){var t=this.parseModifiers(),n=this.eatKeyword(44),r=this.eatIdentifierToken(),i=this.parseOptionalTypeParameterList(!1),s=this.parseHeritageClauses(),o=this.eatToken(70),u=e.Syntax.emptyList;if(o.width()>0){var a=this.parseSyntaxList(2);u=a.list,o=this.addSkippedTokensAfterToken(o,a.skippedTokens)}var f=this.eatToken(71);return this.factory.classDeclaration(t,n,r,i,s,o,u,f)},t.isPublicOrPrivateKeyword=function(e){return e.tokenKind===57||e.tokenKind===55},t.prototype.isAccessor=function(e){var t=this.modifierCount();return this.peekToken(t).tokenKind!==64&&this.peekToken(t).tokenKind!==68?!1:(t++,this.isPropertyName(this.peekToken(t),e))},t.prototype.parseAccessor=function(t){var n=this.parseModifiers();if(this.currentToken().tokenKind===64)return this.parseGetMemberAccessorDeclaration(n,t);if(this.currentToken().tokenKind===68)return this.parseSetMemberAccessorDeclaration(n,t);throw e.Errors.invalidOperation()},t.prototype.parseGetMemberAccessorDeclaration=function(e,t){var n=this.eatKeyword(64),r=this.eatPropertyName(),i=this.parseParameterList(),s=this.parseOptionalTypeAnnotation(!1),o=this.parseBlock(!1,t);return this.factory.getAccessor(e,n,r,i,s,o)},t.prototype.parseSetMemberAccessorDeclaration=function(e,t){var n=this.eatKeyword(68),r=this.eatPropertyName(),i=this.parseParameterList(),s=this.parseBlock(!1,t);return this.factory.setAccessor(e,n,r,i,s)},t.prototype.isClassElement=function(e){return this.currentNode()!==null&&this.currentNode().isClassElement()?!0:this.isConstructorDeclaration()||this.isMemberFunctionDeclaration(e)||this.isAccessor(e)||this.isMemberVariableDeclaration(e)||this.isIndexMemberDeclaration()},t.prototype.parseClassElement=function(t){if(this.currentNode()!==null&&this.currentNode().isClassElement())return this.eatNode();if(this.isConstructorDeclaration())return this.parseConstructorDeclaration();if(this.isMemberFunctionDeclaration(t))return this.parseMemberFunctionDeclaration();if(this.isAccessor(t))return this.parseAccessor(!1);if(this.isMemberVariableDeclaration(t))return this.parseMemberVariableDeclaration();if(this.isIndexMemberDeclaration())return this.parseIndexMemberDeclaration();throw e.Errors.invalidOperation()},t.prototype.isConstructorDeclaration=function(){var e=this.modifierCount();return this.peekToken(e).tokenKind===62},t.prototype.parseConstructorDeclaration=function(){var e=this.parseModifiers(),t=this.eatKeyword(62),n=this.parseCallSignature(!1),r=null,i=null;return this.isBlock()?i=this.parseBlock(!1,!0):r=this.eatExplicitOrAutomaticSemicolon(!1),this.factory.constructorDeclaration(e,t,n,i,r)},t.prototype.isMemberFunctionDeclaration=function(e){var n=0;for(;;){var r=this.peekToken(n);if(this.isPropertyName(r,e)&&this.isCallSignature(n+1))return!0;if(t.isModifier(r)){n++;continue}return!1}},t.prototype.parseMemberFunctionDeclaration=function(){var n=this.getArray();for(;;){var r=this.currentToken();if(this.isPropertyName(r,!1)&&this.isCallSignature(1))break;e.Debug.assert(t.isModifier(r)),n.push(this.eatAnyToken())}var i=e.Syntax.list(n);this.returnZeroOrOneLengthArray(n);var s=this.eatPropertyName(),o=this.parseCallSignature(!1),u=!1,a=this.tryAddUnexpectedEqualsGreaterThanToken(o);a!==o&&(u=!0,o=a);var f=null,l=null;return u||this.isBlock()?f=this.parseBlock(u,!0):l=this.eatExplicitOrAutomaticSemicolon(!1),this.factory.memberFunctionDeclaration(i,s,o,f,l)},t.prototype.isDefinitelyMemberVariablePropertyName=function(t){if(!e.SyntaxFacts.isAnyKeyword(this.peekToken(t).tokenKind))return!0;switch(this.peekToken(t+1).tokenKind){case 78:case 107:case 106:case 71:case 10:return!0;default:return!1}},t.prototype.isMemberVariableDeclaration=function(e){var n=0;for(;;){var r=this.peekToken(n);if(this.isPropertyName(r,e)&&this.isDefinitelyMemberVariablePropertyName(n))return!0;if(t.isModifier(this.peekToken(n))){n++;continue}return!1}},t.prototype.parseMemberVariableDeclaration=function(){var n=this.getArray();for(;;){var r=this.currentToken();if(this.isPropertyName(r,!1)&&this.isDefinitelyMemberVariablePropertyName(0))break;e.Debug.assert(t.isModifier(r)),n.push(this.eatAnyToken())}var i=e.Syntax.list(n);this.returnZeroOrOneLengthArray(n);var s=this.parseVariableDeclarator(!0,!0),o=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.memberVariableDeclaration(i,s,o)},t.prototype.isIndexMemberDeclaration=function(){var e=this.modifierCount();return this.isIndexSignature(e)},t.prototype.parseIndexMemberDeclaration=function(){var e=this.parseModifiers(),t=this.parseIndexSignature(),n=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.indexMemberDeclaration(e,t,n)},t.prototype.tryAddUnexpectedEqualsGreaterThanToken=function(t){var n=this.currentToken(),r=n.tokenKind===85;if(r&&t.lastToken()){var i=new e.Diagnostic(this.fileName,this.lineMap,this.currentTokenStart(),n.width(),e.DiagnosticCode.Unexpected_token_0_expected,[e.SyntaxFacts.getText(70)]);this.addDiagnostic(i);var s=this.eatAnyToken();return this.addSkippedTokenAfterNode(t,n)}return t},t.prototype.isFunctionDeclaration=function(){var e=this.modifierCount();return this.peekToken(e).tokenKind===27},t.prototype.parseFunctionDeclaration=function(){var e=this.parseModifiers(),t=this.eatKeyword(27),n=this.eatIdentifierToken(),r=this.parseCallSignature(!1),i=!1,s=this.tryAddUnexpectedEqualsGreaterThanToken(r);s!==r&&(i=!0,r=s);var o=null,u=null;return i||this.isBlock()?u=this.parseBlock(i,!0):o=this.eatExplicitOrAutomaticSemicolon(!1),this.factory.functionDeclaration(e,t,n,r,u,o)},t.prototype.isModuleDeclaration=function(e){if(e>0&&this.peekToken(e).tokenKind===65)return!0;if(this.currentToken().tokenKind===65){var t=this.peekToken(1);return this.isIdentifier(t)||t.tokenKind===14}return!1},t.prototype.parseModuleDeclaration=function(){var t=this.parseModifiers(),n=this.eatKeyword(65),r=null,i=null;this.currentToken().tokenKind===14?i=this.eatToken(14):r=this.parseName();var s=this.eatToken(70),o=e.Syntax.emptyList;if(s.width()>0){var u=this.parseSyntaxList(4);o=u.list,s=this.addSkippedTokensAfterToken(s,u.skippedTokens)}var a=this.eatToken(71);return this.factory.moduleDeclaration(t,n,r,i,s,o,a)},t.prototype.isInterfaceDeclaration=function(e){return e>0&&this.peekToken(e).tokenKind===52?!0:this.currentToken().tokenKind===52&&this.isIdentifier(this.peekToken(1))},t.prototype.parseInterfaceDeclaration=function(){var e=this.parseModifiers(),t=this.eatKeyword(52),n=this.eatIdentifierToken(),r=this.parseOptionalTypeParameterList(!1),i=this.parseHeritageClauses(),s=this.parseObjectType();return this.factory.interfaceDeclaration(e,t,n,r,i,s)},t.prototype.parseObjectType=function(){var t=this.eatToken(70),n=e.Syntax.emptySeparatedList;if(t.width()>0){var r=this.parseSeparatedSyntaxList(512);n=r.list,t=this.addSkippedTokensAfterToken(t,r.skippedTokens)}var i=this.eatToken(71);return this.factory.objectType(t,n,i)},t.prototype.isTypeMember=function(e){return this.currentNode()!==null&&this.currentNode().isTypeMember()?!0:this.isCallSignature(0)||this.isConstructSignature()||this.isIndexSignature(0)||this.isMethodSignature(e)||this.isPropertySignature(e)},t.prototype.parseTypeMember=function(t){if(this.currentNode()!==null&&this.currentNode().isTypeMember())return this.eatNode();if(this.isCallSignature(0))return this.parseCallSignature(!1);if(this.isConstructSignature())return this.parseConstructSignature();if(this.isIndexSignature(0))return this.parseIndexSignature();if(this.isMethodSignature(t))return this.parseMethodSignature();if(this.isPropertySignature(t))return this.parsePropertySignature();throw e.Errors.invalidOperation()},t.prototype.parseConstructSignature=function(){var e=this.eatKeyword(31),t=this.parseCallSignature(!1);return this.factory.constructSignature(e,t)},t.prototype.parseIndexSignature=function(){var e=this.eatToken(74),t=this.parseParameter(),n=this.eatToken(75),r=this.parseOptionalTypeAnnotation(!1);return this.factory.indexSignature(e,t,n,r)},t.prototype.parseMethodSignature=function(){var e=this.eatPropertyName(),t=this.tryEatToken(105),n=this.parseCallSignature(!1);return this.factory.methodSignature(e,t,n)},t.prototype.parsePropertySignature=function(){var e=this.eatPropertyName(),t=this.tryEatToken(105),n=this.parseOptionalTypeAnnotation(!1);return this.factory.propertySignature(e,t,n)},t.prototype.isCallSignature=function(e){var t=this.peekToken(e).tokenKind;return t===72||t===80},t.prototype.isConstructSignature=function(){if(this.currentToken().tokenKind!==31)return!1;var e=this.peekToken(1);return e.tokenKind===80||e.tokenKind===72},t.prototype.isIndexSignature=function(e){return this.peekToken(e).tokenKind===74},t.prototype.isMethodSignature=function(e){if(this.isPropertyName(this.currentToken(),e)){if(this.isCallSignature(1))return!0;if(this.peekToken(1).tokenKind===105&&this.isCallSignature(2))return!0}return!1},t.prototype.isPropertySignature=function(e){var n=this.currentToken();return t.isModifier(n)&&!n.hasTrailingNewLine()&&this.isPropertyName(this.peekToken(1),e)?!1:this.isPropertyName(n,e)},t.prototype.isHeritageClause=function(){var e=this.currentToken();return e.tokenKind===48||e.tokenKind===51},t.prototype.isNotHeritageClauseTypeName=function(){return this.currentToken().tokenKind===51||this.currentToken().tokenKind===48?this.isIdentifier(this.peekToken(1)):!1},t.prototype.isHeritageClauseTypeName=function(){return this.isIdentifier(this.currentToken())?!this.isNotHeritageClauseTypeName():!1},t.prototype.parseHeritageClause=function(){var t=this.eatAnyToken();e.Debug.assert(t.tokenKind===48||t.tokenKind===51);var n=this.parseSeparatedSyntaxList(2048),r=n.list;return t=this.addSkippedTokensAfterToken(t,n.skippedTokens),this.factory.heritageClause(t.tokenKind===48?230:231,t,r)},t.prototype.isStatement=function(t){if(this.currentNode()!==null&&this.currentNode().isStatement())return!0;var n=this.currentToken(),r=n.tokenKind;switch(r){case 57:case 55:case 58:var i=this.peekToken(1);if(e.SyntaxFacts.isIdentifierNameOrAnyKeyword(i))return!1;break;case 28:case 70:case 33:case 34:case 36:case 15:case 18:case 26:case 42:case 43:case 22:case 38:case 19:return!0}return this.isInterfaceDeclaration(0)||this.isClassDeclaration(0)||this.isEnumDeclaration(0)||this.isModuleDeclaration(0)?!1:this.isLabeledStatement(n)||this.isVariableStatement()||this.isFunctionDeclaration()||this.isEmptyStatement(n,t)||this.isExpressionStatement(n)},t.prototype.parseStatement=function(e){if(this.currentNode()!==null&&this.currentNode().isStatement())return this.eatNode();var t=this.currentToken(),n=t.tokenKind;switch(n){case 28:return this.parseIfStatement();case 70:return this.parseBlock(!1,!1);case 33:return this.parseReturnStatement();case 34:return this.parseSwitchStatement();case 36:return this.parseThrowStatement();case 15:return this.parseBreakStatement();case 18:return this.parseContinueStatement();case 26:return this.parseForOrForInStatement();case 42:return this.parseWhileStatement();case 43:return this.parseWithStatement();case 22:return this.parseDoStatement();case 38:return this.parseTryStatement();case 19:return this.parseDebuggerStatement()}return this.isVariableStatement()?this.parseVariableStatement():this.isLabeledStatement(t)?this.parseLabeledStatement():this.isFunctionDeclaration()?this.parseFunctionDeclaration():this.isEmptyStatement(t,e)?this.parseEmptyStatement():this.parseExpressionStatement()},t.prototype.parseDebuggerStatement=function(){var e=this.eatKeyword(19),t=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.debuggerStatement(e,t)},t.prototype.parseDoStatement=function(){var e=this.eatKeyword(22),t=this.parseStatement(!1),n=this.eatKeyword(42),r=this.eatToken(72),i=this.parseExpression(!0),s=this.eatToken(73),o=this.eatExplicitOrAutomaticSemicolon(!0);return this.factory.doStatement(e,t,n,r,i,s,o)},t.prototype.isLabeledStatement=function(e){return this.isIdentifier(e)&&this.peekToken(1).tokenKind===106},t.prototype.parseLabeledStatement=function(){var e=this.eatIdentifierToken(),t=this.eatToken(106),n=this.parseStatement(!1);return this.factory.labeledStatement(e,t,n)},t.prototype.parseTryStatement=function(){var e=this.eatKeyword(38),t=this.listParsingState;this.listParsingState|=64;var n=this.parseBlock(!1,!1);this.listParsingState=t;var r=null;this.isCatchClause()&&(r=this.parseCatchClause());var i=null;if(r===null||this.isFinallyClause())i=this.parseFinallyClause();return this.factory.tryStatement(e,n,r,i)},t.prototype.isCatchClause=function(){return this.currentToken().tokenKind===17},t.prototype.parseCatchClause=function(){var e=this.eatKeyword(17),t=this.eatToken(72),n=this.eatIdentifierToken(),r=this.parseOptionalTypeAnnotation(!1),i=this.eatToken(73),s=this.listParsingState;this.listParsingState|=128;var o=this.parseBlock(!1,!1);return this.listParsingState=s,this.factory.catchClause(e,t,n,r,i,o)},t.prototype.isFinallyClause=function(){return this.currentToken().tokenKind===25},t.prototype.parseFinallyClause=function(){var e=this.eatKeyword(25),t=this.parseBlock(!1,!1);return this.factory.finallyClause(e,t)},t.prototype.parseWithStatement=function(){var e=this.eatKeyword(43),t=this.eatToken(72),n=this.parseExpression(!0),r=this.eatToken(73),i=this.parseStatement(!1);return this.factory.withStatement(e,t,n,r,i)},t.prototype.parseWhileStatement=function(){var e=this.eatKeyword(42),t=this.eatToken(72),n=this.parseExpression(!0),r=this.eatToken(73),i=this.parseStatement(!1);return this.factory.whileStatement(e,t,n,r,i)},t.prototype.isEmptyStatement=function(e,t){return t?!1:e.tokenKind===78},t.prototype.parseEmptyStatement=function(){var e=this.eatToken(78);return this.factory.emptyStatement(e)},t.prototype.parseForOrForInStatement=function(){var e=this.eatKeyword(26),t=this.eatToken(72),n=this.currentToken();return n.tokenKind===40?this.parseForOrForInStatementWithVariableDeclaration(e,t):n.tokenKind===78?this.parseForStatementWithNoVariableDeclarationOrInitializer(e,t):this.parseForOrForInStatementWithInitializer(e,t)},t.prototype.parseForOrForInStatementWithVariableDeclaration=function(e,t){var n=this.parseVariableDeclaration(!1);return this.currentToken().tokenKind===29?this.parseForInStatementWithVariableDeclarationOrInitializer(e,t,n,null):this.parseForStatementWithVariableDeclarationOrInitializer(e,t,n,null)},t.prototype.parseForInStatementWithVariableDeclarationOrInitializer=function(e,t,n,r){var i=this.eatKeyword(29),s=this.parseExpression(!0),o=this.eatToken(73),u=this.parseStatement(!1);return this.factory.forInStatement(e,t,n,r,i,s,o,u)},t.prototype.parseForOrForInStatementWithInitializer=function(e,t){var n=this.parseExpression(!1);return this.currentToken().tokenKind===29?this.parseForInStatementWithVariableDeclarationOrInitializer(e,t,null,n):this.parseForStatementWithVariableDeclarationOrInitializer(e,t,null,n)},t.prototype.parseForStatementWithNoVariableDeclarationOrInitializer=function(e,t){return this.parseForStatementWithVariableDeclarationOrInitializer(e,t,null,null)},t.prototype.parseForStatementWithVariableDeclarationOrInitializer=function(e,t,n,r){var i=this.eatToken(78),s=null;this.currentToken().tokenKind!==78&&this.currentToken().tokenKind!==73&&this.currentToken().tokenKind!==10&&(s=this.parseExpression(!0));var o=this.eatToken(78),u=null;this.currentToken().tokenKind!==73&&this.currentToken().tokenKind!==10&&(u=this.parseExpression(!0));var a=this.eatToken(73),f=this.parseStatement(!1);return this.factory.forStatement(e,t,n,r,i,s,o,u,a,f)},t.prototype.parseBreakStatement=function(){var e=this.eatKeyword(15),t=null;this.canEatExplicitOrAutomaticSemicolon(!1)||this.isIdentifier(this.currentToken())&&(t=this.eatIdentifierToken());var n=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.breakStatement(e,t,n)},t.prototype.parseContinueStatement=function(){var e=this.eatKeyword(18),t=null;this.canEatExplicitOrAutomaticSemicolon(!1)||this.isIdentifier(this.currentToken())&&(t=this.eatIdentifierToken());var n=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.continueStatement(e,t,n)},t.prototype.parseSwitchStatement=function(){var t=this.eatKeyword(34),n=this.eatToken(72),r=this.parseExpression(!0),i=this.eatToken(73),s=this.eatToken(70),o=e.Syntax.emptyList;if(s.width()>0){var u=this.parseSyntaxList(8);o=u.list,s=this.addSkippedTokensAfterToken(s,u.skippedTokens)}var a=this.eatToken(71);return this.factory.switchStatement(t,n,r,i,s,o,a)},t.prototype.isCaseSwitchClause=function(){return this.currentToken().tokenKind===16},t.prototype.isDefaultSwitchClause=function(){return this.currentToken().tokenKind===20},t.prototype.isSwitchClause=function(){return this.currentNode()!==null&&this.currentNode().isSwitchClause()?!0:this.isCaseSwitchClause()||this.isDefaultSwitchClause()},t.prototype.parseSwitchClause=function(){if(this.currentNode()!==null&&this.currentNode().isSwitchClause())return this.eatNode();if(this.isCaseSwitchClause())return this.parseCaseSwitchClause();if(this.isDefaultSwitchClause())return this.parseDefaultSwitchClause();throw e.Errors.invalidOperation()},t.prototype.parseCaseSwitchClause=function(){var t=this.eatKeyword(16),n=this.parseExpression(!0),r=this.eatToken(106),i=e.Syntax.emptyList;if(r.fullWidth()>0){var s=this.parseSyntaxList(16);i=s.list,r=this.addSkippedTokensAfterToken(r,s.skippedTokens)}return this.factory.caseSwitchClause(t,n,r,i)},t.prototype.parseDefaultSwitchClause=function(){var t=this.eatKeyword(20),n=this.eatToken(106),r=e.Syntax.emptyList;if(n.fullWidth()>0){var i=this.parseSyntaxList(16);r=i.list,n=this.addSkippedTokensAfterToken(n,i.skippedTokens)}return this.factory.defaultSwitchClause(t,n,r)},t.prototype.parseThrowStatement=function(){var e=this.eatKeyword(36),t=null;if(this.canEatExplicitOrAutomaticSemicolon(!1)){var n=this.createMissingToken(11,null);t=n}else t=this.parseExpression(!0);var r=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.throwStatement(e,t,r)},t.prototype.parseReturnStatement=function(){var e=this.eatKeyword(33),t=null;this.canEatExplicitOrAutomaticSemicolon(!1)||(t=this.parseExpression(!0));var n=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.returnStatement(e,t,n)},t.prototype.isExpressionStatement=function(e){var t=e.tokenKind;return t===70||t===27?!1:this.isExpression(e)},t.prototype.isAssignmentOrOmittedExpression=function(){var e=this.currentToken();return e.tokenKind===79?!0:this.isExpression(e)},t.prototype.parseAssignmentOrOmittedExpression=function(){return this.currentToken().tokenKind===79?this.factory.omittedExpression():this.parseAssignmentExpression(!0)},t.prototype.isExpression=function(e){switch(e.tokenKind){case 13:case 14:case 12:case 74:case 72:case 80:case 93:case 94:case 89:case 90:case 102:case 101:case 70:case 85:case 118:case 119:case 50:case 35:case 37:case 24:case 32:case 31:case 21:case 41:case 39:case 27:return!0}return this.isIdentifier(e)},t.prototype.parseExpressionStatement=function(){var e=this.parseExpression(!0),t=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.expressionStatement(e,t)},t.prototype.parseIfStatement=function(){var e=this.eatKeyword(28),t=this.eatToken(72),n=this.parseExpression(!0),r=this.eatToken(73),i=this.parseStatement(!1),s=null;return this.isElseClause()&&(s=this.parseElseClause()),this.factory.ifStatement(e,t,n,r,i,s)},t.prototype.isElseClause=function(){return this.currentToken().tokenKind===23},t.prototype.parseElseClause=function(){var e=this.eatKeyword(23),t=this.parseStatement(!1);return this.factory.elseClause(e,t)},t.prototype.isVariableStatement=function(){var e=this.modifierCount();return this.peekToken(e).tokenKind===40},t.prototype.parseVariableStatement=function(){var e=this.parseModifiers(),t=this.parseVariableDeclaration(!0),n=this.eatExplicitOrAutomaticSemicolon(!1);return this.factory.variableStatement(e,t,n)},t.prototype.parseVariableDeclaration=function(e){var t=this.eatKeyword(40),n=e?4096:8192,r=this.parseSeparatedSyntaxList(n),i=r.list;return t=this.addSkippedTokensAfterToken(t,r.skippedTokens),this.factory.variableDeclaration(t,i)},t.prototype.isVariableDeclarator=function(){return this.currentNode()!==null&&this.currentNode().kind()===225?!0:this.isIdentifier(this.currentToken())},t.prototype.canReuseVariableDeclaratorNode=function(e){if(e===null||e.kind()!==225)return!1;var t=e;return t.equalsValueClause===null},t.prototype.parseVariableDeclarator=function(e,t){if(this.canReuseVariableDeclaratorNode(this.currentNode()))return this.eatNode();var n=t?this.eatPropertyName():this.eatIdentifierToken(),r=null,i=null;return n.width()>0&&(i=this.parseOptionalTypeAnnotation(!1),this.isEqualsValueClause(!1)&&(r=this.parseEqualsValueClause(e))),this.factory.variableDeclarator(n,i,r)},t.prototype.isColonValueClause=function(){return this.currentToken().tokenKind===106},t.prototype.isEqualsValueClause=function(e){var t=this.currentToken();return t.tokenKind===107?!0:this.previousToken().hasTrailingNewLine()?!1:t.tokenKind===85?!1:t.tokenKind===70&&e?!1:this.isExpression(t)},t.prototype.parseEqualsValueClause=function(e){var t=this.eatToken(107),n=this.parseAssignmentExpression(e);return this.factory.equalsValueClause(t,n)},t.prototype.parseExpression=function(e){return this.parseSubExpression(0,e)},t.prototype.parseAssignmentExpression=function(e){return this.parseSubExpression(2,e)},t.prototype.parseUnaryExpressionOrLower=function(){var t=this.currentToken().tokenKind;if(e.SyntaxFacts.isPrefixUnaryExpressionOperatorToken(t)){var n=e.SyntaxFacts.getPrefixUnaryExpressionFromOperatorToken(t),r=this.eatAnyToken(),i=this.parseUnaryExpressionOrLower();return this.factory.prefixUnaryExpression(n,r,i)}return t===39?this.parseTypeOfExpression():t===41?this.parseVoidExpression():t===21?this.parseDeleteExpression():t===80?this.parseCastExpression():this.parsePostfixExpressionOrLower()},t.prototype.parseSubExpression=function(e,t){if(e<=2){if(this.isSimpleArrowFunctionExpression())return this.parseSimpleArrowFunctionExpression();var n=this.tryParseParenthesizedArrowFunctionExpression();if(n!==null)return n}var r=this.parseUnaryExpressionOrLower();return this.parseBinaryOrConditionalExpressions(e,t,r)},t.prototype.parseBinaryOrConditionalExpressions=function(n,r,i){for(;;){var s=this.currentToken(),o=s.tokenKind;if(e.SyntaxFacts.isBinaryExpressionOperatorToken(o)){if(o===29&&!r)break;var u=this.tryMergeBinaryExpressionTokens(),a=u===null?o:u.syntaxKind,f=e.SyntaxFacts.getBinaryExpressionFromOperatorToken(a),l=t.getPrecedence(f);if(l<n)break;if(l===n&&!this.isRightAssociative(f))break;var c=u===null?s:e.Syntax.token(u.syntaxKind).withLeadingTrivia(s.leadingTrivia()).withTrailingTrivia(this.peekToken(u.tokenCount-1).trailingTrivia()),h=u===null?1:u.tokenCount;for(var p=0;p<h;p++)this.eatAnyToken();i=this.factory.binaryExpression(f,i,c,this.parseSubExpression(l,r));continue}if(o===105&&n<=3){var d=this.eatToken(105),v=this.parseAssignmentExpression(r),m=this.eatToken(106),g=this.parseAssignmentExpression(r);i=this.factory.conditionalExpression(i,d,v,m,g);continue}break}return i},t.prototype.tryMergeBinaryExpressionTokens=function(){var e=this.currentToken();if(e.tokenKind===81&&!e.hasTrailingTrivia()){var t=this.mergeTokensStorage;t[0]=0,t[1]=0,t[2]=0;for(var n=0;n<t.length;n++){var r=this.peekToken(n+1);r.hasLeadingTrivia()||(t[n]=r.tokenKind);if(r.hasTrailingTrivia())break}if(t[0]===81)return t[1]===81?t[2]===107?{tokenCount:4,syntaxKind:114}:{tokenCount:3,syntaxKind:97}:t[1]===107?{tokenCount:3,syntaxKind:113}:{tokenCount:2,syntaxKind:96};if(t[0]===107)return{tokenCount:2,syntaxKind:83}}return null},t.prototype.isRightAssociative=function(e){switch(e){case 174:case 175:case 176:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 184:case 185:return!0;default:return!1}},t.prototype.parseMemberExpressionOrLower=function(e){if(this.currentToken().tokenKind===31)return this.parseObjectCreationExpression();var t=this.parsePrimaryExpression();return t===null?this.eatIdentifierToken():this.parseMemberExpressionRest(t,!1,e)},t.prototype.parseCallExpressionOrLower=function(){var e;if(this.currentToken().tokenKind===50){e=this.eatKeyword(50);var t=this.currentToken().tokenKind;t!==72&&t!==76&&(e=this.factory.memberAccessExpression(e,this.eatToken(76),this.eatIdentifierNameToken()))}else e=this.parseMemberExpressionOrLower(!1);return this.parseMemberExpressionRest(e,!0,!1)},t.prototype.parseMemberExpressionRest=function(e,t,n){for(;;){var r=this.currentToken().tokenKind;switch(r){case 72:if(!t)return e;e=this.factory.invocationExpression(e,this.parseArgumentList(null));continue;case 80:if(!t)return e;var i=this.tryParseArgumentList();if(i!==null){e=this.factory.invocationExpression(e,i);continue}break;case 74:e=this.parseElementAccessExpression(e,n);continue;case 76:e=this.factory.memberAccessExpression(e,this.eatToken(76),this.eatIdentifierNameToken());continue}return e}},t.prototype.parseLeftHandSideExpressionOrLower=function(){return this.currentToken().tokenKind===31?this.parseObjectCreationExpression():this.parseCallExpressionOrLower()},t.prototype.parsePostfixExpressionOrLower=function(){var t=this.parseLeftHandSideExpressionOrLower();if(t===null)return this.eatIdentifierToken();var n=this.currentToken().tokenKind;switch(n){case 93:case 94:if(this.previousToken()!==null&&this.previousToken().hasTrailingNewLine())break;return this.factory.postfixUnaryExpression(e.SyntaxFacts.getPostfixUnaryExpressionFromOperatorToken(n),t,this.eatAnyToken())}return t},t.prototype.tryParseGenericArgumentList=function(){var t=this.getRewindPoint(),n=this.tryParseTypeArgumentList(!0),r=this.currentToken(),i=r.tokenKind===72,s=r.tokenKind===76,o=i||s,u=null;if(n===null||!o)return this.rewind(t),this.releaseRewindPoint(t),null;this.releaseRewindPoint(t);if(s){var a=new e.Diagnostic(this.fileName,this.lineMap,this.currentTokenStart(),r.width(),e.DiagnosticCode.A_parameter_list_must_follow_a_generic_type_argument_list_expected,null);return this.addDiagnostic(a),this.factory.argumentList(n,e.Syntax.emptyToken(72),e.Syntax.emptySeparatedList,e.Syntax.emptyToken(73))}return this.parseArgumentList(n)},t.prototype.tryParseArgumentList=function(){return this.currentToken().tokenKind===80?this.tryParseGenericArgumentList():this.currentToken().tokenKind===72?this.parseArgumentList(null):null},t.prototype.parseArgumentList=function(t){var n=this.eatToken(72),r=e.Syntax.emptySeparatedList;if(n.fullWidth()>0){var i=this.parseSeparatedSyntaxList(16384);r=i.list,n=this.addSkippedTokensAfterToken(n,i.skippedTokens)}var s=this.eatToken(73);return this.factory.argumentList(t,n,r,s)},t.prototype.parseElementAccessExpression=function(t,n){var r=this.currentTokenStart(),i=this.eatToken(74),s;if(this.currentToken().tokenKind===75&&n){var o=this.currentTokenStart()+this.currentToken().width(),u=new e.Diagnostic(this.fileName,this.lineMap,r,o-r,e.DiagnosticCode.new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead,null);this.addDiagnostic(u),s=e.Syntax.emptyToken(11)}else s=this.parseExpression(!0);var a=this.eatToken(75);return this.factory.elementAccessExpression(t,i,s,a)},t.prototype.parsePrimaryExpression=function(){var e=this.currentToken();if(this.isIdentifier(e))return this.eatIdentifierToken();var t=e.tokenKind;switch(t){case 35:return this.parseThisExpression();case 37:case 24:return this.parseLiteralExpression();case 32:return this.parseLiteralExpression();case 27:return this.parseFunctionExpression();case 13:return this.parseLiteralExpression();case 12:return this.parseLiteralExpression();case 14:return this.parseLiteralExpression();case 74:return this.parseArrayLiteralExpression();case 70:return this.parseObjectLiteralExpression();case 72:return this.parseParenthesizedExpression();case 118:case 119:var n=this.tryReparseDivideAsRegularExpression();if(n!==null)return n}return null},t.prototype.tryReparseDivideAsRegularExpression=function(){var t=this.currentToken();if(this.previousToken()!==null){var n=this.previousToken().tokenKind;switch(n){case 11:return null;case 35:case 37:case 24:return null;case 14:case 13:case 12:case 93:case 94:case 75:return null}}t=this.currentTokenAllowingRegularExpression();if(t.tokenKind===118||t.tokenKind===119)return null;if(t.tokenKind===12)return this.parseLiteralExpression();throw e.Errors.invalidOperation()},t.prototype.parseTypeOfExpression=function(){var e=this.eatKeyword(39),t=this.parseUnaryExpressionOrLower();return this.factory.typeOfExpression(e,t)},t.prototype.parseDeleteExpression=function(){var e=this.eatKeyword(21),t=this.parseUnaryExpressionOrLower();return this.factory.deleteExpression(e,t)},t.prototype.parseVoidExpression=function(){var e=this.eatKeyword(41),t=this.parseUnaryExpressionOrLower();return this.factory.voidExpression(e,t)},t.prototype.parseFunctionExpression=function(){var e=this.eatKeyword(27),t=null;this.isIdentifier(this.currentToken())&&(t=this.eatIdentifierToken());var n=this.parseCallSignature(!1),r=this.parseBlock(!1,!0);return this.factory.functionExpression(e,t,n,r)},t.prototype.parseObjectCreationExpression=function(){var e=this.eatKeyword(31),t=this.parseObjectCreationExpressionOrLower(!0),n=this.tryParseArgumentList(),r=this.factory.objectCreationExpression(e,t,n);return this.parseMemberExpressionRest(r,!0,!1)},t.prototype.parseObjectCreationExpressionOrLower=function(e){return this.currentToken().tokenKind===31?this.parseObjectCreationExpression():this.parseMemberExpressionOrLower(e)},t.prototype.parseCastExpression=function(){var e=this.eatToken(80),t=this.parseType(),n=this.eatToken(81),r=this.parseUnaryExpressionOrLower();return this.factory.castExpression(e,t,n,r)},t.prototype.parseParenthesizedExpression=function(){var e=this.eatToken(72),t=this.parseExpression(!0),n=this.eatToken(73);return this.factory.parenthesizedExpression(e,t,n)},t.prototype.tryParseParenthesizedArrowFunctionExpression=function(){var e=this.currentToken().tokenKind;if(e!==72&&e!==80)return null;if(this.isDefinitelyArrowFunctionExpression())return this.parseParenthesizedArrowFunctionExpression(!1);if(!this.isPossiblyArrowFunctionExpression())return null;var t=this.getRewindPoint(),n=this.parseParenthesizedArrowFunctionExpression(!0);return n===null&&this.rewind(t),this.releaseRewindPoint(t),n},t.prototype.parseParenthesizedArrowFunctionExpression=function(e){var t=this.currentToken(),n=this.parseCallSignature(!0);if(e&&this.currentToken().tokenKind!==85)return null;var r=this.eatToken(85),i=this.tryParseArrowFunctionBlock(),s=null;return i===null&&(s=this.parseAssignmentExpression(!0)),this.factory.parenthesizedArrowFunctionExpression(n,r,i,s)},t.prototype.tryParseArrowFunctionBlock=function(){return this.isBlock()?this.parseBlock(!1,!1):this.isStatement(!1)&&!this.isExpressionStatement(this.currentToken())&&!this.isFunctionDeclaration()?this.parseBlock(!0,!1):null},t.prototype.isSimpleArrowFunctionExpression=function(){return this.currentToken().tokenKind===85?!0:this.isIdentifier(this.currentToken())&&this.peekToken(1).tokenKind===85},t.prototype.parseSimpleArrowFunctionExpression=function(){var e=this.eatIdentifierToken(),t=this.eatToken(85),n=this.tryParseArrowFunctionBlock(),r=null;return n===null&&(r=this.parseAssignmentExpression(!0)),this.factory.simpleArrowFunctionExpression(e,t,n,r)},t.prototype.isBlock=function(){return this.currentToken().tokenKind===70},t.prototype.isDefinitelyArrowFunctionExpression=function(){var e=this.currentToken();if(e.tokenKind!==72)return!1;var t=this.peekToken(1),n;if(t.tokenKind===73)return n=this.peekToken(2),n.tokenKind===106||n.tokenKind===85||n.tokenKind===70;if(t.tokenKind===77)return!0;n=this.peekToken(2);if(t.tokenKind===57||t.tokenKind===55)if(this.isIdentifier(n))return!0;if(!this.isIdentifier(t))return!1;if(n.tokenKind===106)return!0;var r=this.peekToken(3);if(n.tokenKind===105)if(r.tokenKind===106||r.tokenKind===73||r.tokenKind===79)return!0;return n.tokenKind===73&&r.tokenKind===85?!0:!1},t.prototype.isPossiblyArrowFunctionExpression=function(){var e=this.currentToken();if(e.tokenKind!==72)return!0;var t=this.peekToken(1);if(!this.isIdentifier(t))return!1;var n=this.peekToken(2);if(n.tokenKind===107)return!0;if(n.tokenKind===79)return!0;if(n.tokenKind===73){var r=this.peekToken(3);if(r.tokenKind===106)return!0}return!1},t.prototype.parseObjectLiteralExpression=function(){var e=this.eatToken(70),t=this.parseSeparatedSyntaxList(32768),n=t.list;e=this.addSkippedTokensAfterToken(e,t.skippedTokens);var r=this.eatToken(71);return this.factory.objectLiteralExpression(e,n,r)},t.prototype.parsePropertyAssignment=function(t){if(this.isAccessor(t))return this.parseAccessor(!0);if(this.isFunctionPropertyAssignment(t))return this.parseFunctionPropertyAssignment();if(this.isSimplePropertyAssignment(t))return this.parseSimplePropertyAssignment();throw e.Errors.invalidOperation()},t.prototype.isPropertyAssignment=function(e){return this.isAccessor(e)||this.isFunctionPropertyAssignment(e)||this.isSimplePropertyAssignment(e)},t.prototype.eatPropertyName=function(){return e.SyntaxFacts.isIdentifierNameOrAnyKeyword(this.currentToken())?this.eatIdentifierNameToken():this.eatAnyToken()},t.prototype.isFunctionPropertyAssignment=function(e){return this.isPropertyName(this.currentToken(),e)&&this.isCallSignature(1)},t.prototype.parseFunctionPropertyAssignment=function(){var e=this.eatPropertyName(),t=this.parseCallSignature(!1),n=this.parseBlock(!1,!0);return this.factory.functionPropertyAssignment(e,t,n)},t.prototype.isSimplePropertyAssignment=function(e){return this.isPropertyName(this.currentToken(),e)},t.prototype.parseSimplePropertyAssignment=function(){var e=this.eatPropertyName(),t=this.eatToken(106),n=this.parseAssignmentExpression(!0);return this.factory.simplePropertyAssignment(e,t,n)},t.prototype.isPropertyName=function(t,n){if(e.SyntaxFacts.isIdentifierNameOrAnyKeyword(t))return n?this.isIdentifier(t):!0;switch(t.tokenKind){case 14:case 13:return!0;default:return!1}},t.prototype.parseArrayLiteralExpression=function(){var e=this.eatToken(74),t=this.parseSeparatedSyntaxList(65536),n=t.list;e=this.addSkippedTokensAfterToken(e,t.skippedTokens);var r=this.eatToken(75);return this.factory.arrayLiteralExpression(e,n,r)},t.prototype.parseLiteralExpression=function(){return this.eatAnyToken()},t.prototype.parseThisExpression=function(){return this.eatKeyword(35)},t.prototype.parseBlock=function(n,r){var i=this.eatToken(70),s=e.Syntax.emptyList;if(n||i.width()>0){var o=this.isInStrictMode,u=r?t.updateStrictModeState:null,a=this.parseSyntaxList(32,u);s=a.list,i=this.addSkippedTokensAfterToken(i,a.skippedTokens),this.setStrictMode(o)}var f=this.eatToken(71);return this.factory.block(i,s,f)},t.prototype.parseCallSignature=function(e){var t=this.parseOptionalTypeParameterList(e),n=this.parseParameterList(),r=this.parseOptionalTypeAnnotation(!1);return this.factory.callSignature(t,n,r)},t.prototype.parseOptionalTypeParameterList=function(e){if(this.currentToken().tokenKind!==80)return null;var t=this.getRewindPoint(),n=this.eatToken(80),r=this.parseSeparatedSyntaxList(524288),i=r.list;n=this.addSkippedTokensAfterToken(n,r.skippedTokens);var s=this.eatToken(81);if(e&&s.fullWidth()===0)return this.rewind(t),this.releaseRewindPoint(t),null;this.releaseRewindPoint(t);var o=this.factory.typeParameterList(n,i,s);return o},t.prototype.isTypeParameter=function(){return this.isIdentifier(this.currentToken())},t.prototype.parseTypeParameter=function(){var e=this.eatIdentifierToken(),t=this.parseOptionalConstraint();return this.factory.typeParameter(e,t)},t.prototype.parseOptionalConstraint=function(){if(this.currentToken().kind()!==48)return null;var e=this.eatKeyword(48),t=this.parseType();return this.factory.constraint(e,t)},t.prototype.parseParameterList=function(){var t=this.eatToken(72),n=e.Syntax.emptySeparatedList;if(t.width()>0){var r=this.parseSeparatedSyntaxList(131072);n=r.list,t=this.addSkippedTokensAfterToken(t,r.skippedTokens)}var i=this.eatToken(73);return this.factory.parameterList(t,n,i)},t.prototype.isTypeAnnotation=function(){return this.currentToken().tokenKind===106},t.prototype.parseOptionalTypeAnnotation=function(e){return this.isTypeAnnotation()?this.parseTypeAnnotation(e):null},t.prototype.parseTypeAnnotation=function(e){var t=this.eatToken(106),n=e&&this.currentToken().tokenKind===14?this.eatToken(14):this.parseType();return this.factory.typeAnnotation(t,n)},t.prototype.isType=function(){var e=this.currentToken(),t=e.tokenKind;switch(t){case 39:case 60:case 67:case 61:case 69:case 41:case 70:case 72:case 80:case 31:return!0}return this.isIdentifier(e)},t.prototype.parseType=function(){var e=this.currentToken(),t=e.tokenKind,n=this.parseNonArrayType(e);while(this.currentToken().tokenKind===74){var r=this.eatToken(74),i=this.eatToken(75);n=this.factory.arrayType(n,r,i)}return n},t.prototype.isTypeQuery=function(){return this.currentToken().tokenKind===39},t.prototype.parseTypeQuery=function(){var e=this.eatToken(39),t=this.parseName();return this.factory.typeQuery(e,t)},t.prototype.parseNonArrayType=function(e){var t=e.tokenKind;switch(t){case 60:case 67:case 61:case 69:case 41:return this.eatAnyToken();case 70:return this.parseObjectType();case 72:case 80:return this.parseFunctionType();case 31:return this.parseConstructorType();case 39:return this.parseTypeQuery()}return this.parseNameOrGenericType()},t.prototype.parseNameOrGenericType=function(){var e=this.parseName(),t=this.tryParseTypeArgumentList(!1);return t===null?e:this.factory.genericType(e,t)},t.prototype.parseFunctionType=function(){var e=this.parseOptionalTypeParameterList(!1),t=this.parseParameterList(),n=this.eatToken(85),r=this.parseType();return this.factory.functionType(e,t,n,r)},t.prototype.parseConstructorType=function(){var e=this.eatKeyword(31),t=this.parseOptionalTypeParameterList(!1),n=this.parseParameterList(),r=this.eatToken(85),i=this.parseType();return this.factory.constructorType(e,t,n,r,i)},t.prototype.isParameter=function(){if(this.currentNode()!==null&&this.currentNode().kind()===242)return!0;var e=this.currentToken(),n=e.tokenKind;return n===77?!0:t.isModifier(e)&&!this.isModifierUsedAsParameterIdentifier(e)?!0:this.isIdentifier(e)},t.prototype.isModifierUsedAsParameterIdentifier=function(e){if(this.isIdentifier(e)){var t=this.peekToken(1).tokenKind;switch(t){case 73:case 106:case 107:case 79:case 105:return!0}}return!1},t.prototype.parseParameter=function(){if(this.currentNode()!==null&&this.currentNode().kind()===242)return this.eatNode();var n=this.tryEatToken(77),r=this.getArray();for(;;){var i=this.currentToken();if(t.isModifier(i)&&!this.isModifierUsedAsParameterIdentifier(i)){r.push(this.eatAnyToken());continue}break}var s=e.Syntax.list(r);this.returnZeroOrOneLengthArray(r);var o=this.eatIdentifierToken(),u=this.tryEatToken(105),a=this.parseOptionalTypeAnnotation(!0),f=null;return this.isEqualsValueClause(!0)&&(f=this.parseEqualsValueClause(!0)),this.factory.parameter(n,s,o,u,a,f)},t.prototype.parseSyntaxList=function(e,t){typeof t=="undefined"&&(t=null);var n=this.listParsingState;this.listParsingState|=e;var r=this.parseSyntaxListWorker(e,t);return this.listParsingState=n,r},t.prototype.parseSeparatedSyntaxList=function(e){var t=this.listParsingState;this.listParsingState|=e;var n=this.parseSeparatedSyntaxListWorker(e);return this.listParsingState=t,n},t.prototype.abortParsingListOrMoveToNextToken=function(e,t,n){this.reportUnexpectedTokenDiagnostic(e);for(var r=524288;r>=1;r>>=1)if((this.listParsingState&r)!==0)if(this.isExpectedListTerminator(r)||this.isExpectedListItem(r,!0))return!0;var i=this.currentToken();return this.moveToNextToken(),this.addSkippedTokenToList(t,n,i),!1},t.prototype.addSkippedTokenToList=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r],s=i.lastToken();if(s.fullWidth()>0){e[r]=this.addSkippedTokenAfterNodeOrToken(i,n);return}}t.push(n)},t.prototype.tryParseExpectedListItem=function(e,t,n,r){if(this.isExpectedListItem(e,t)){var i=this.parseExpectedListItem(e,t);n.push(i),r!==null&&r(this,n)}},t.prototype.listIsTerminated=function(e){return this.isExpectedListTerminator(e)||this.currentToken().tokenKind===10},t.prototype.getArray=function(){return this.arrayPool.length>0?this.arrayPool.pop():[]},t.prototype.returnZeroOrOneLengthArray=function(e){e.length<=1&&this.returnArray(e)},t.prototype.returnArray=function(e){e.length=0,this.arrayPool.push(e)},t.prototype.parseSyntaxListWorker=function(t,n){var r=this.getArray(),i=this.getArray();for(;;){var s=r.length;this.tryParseExpectedListItem(t,!1,r,n);var o=r.length;if(o===s){if(this.listIsTerminated(t))break;var u=this.abortParsingListOrMoveToNextToken(t,r,i);if(u)break}}var a=e.Syntax.list(r);return this.returnZeroOrOneLengthArray(r),{skippedTokens:i,list:a}},t.prototype.parseSeparatedSyntaxListWorker=function(t){var n=this.getArray(),r=this.getArray();e.Debug.assert(n.length===0),e.Debug.assert(r.length===0),e.Debug.assert(r!==n);var i=this.separatorKind(t),s=i===78,o=!1,u=!1;for(;;){var a=n.length;this.tryParseExpectedListItem(t,o,n,null);var f=n.length;if(f===a){if(this.listIsTerminated(t)){u=!0;break}var l=this.abortParsingListOrMoveToNextToken(t,n,r);if(l)break;o=!0;continue}o=!1;var c=this.currentToken();if(c.tokenKind===i||c.tokenKind===79){n.push(this.eatAnyToken());continue}if(this.listIsTerminated(t)){u=!0;break}if(s&&this.canEatAutomaticSemicolon(!1)){n.push(this.eatExplicitOrAutomaticSemicolon(!1));continue}n.push(this.eatToken(i)),o=!0}var h=e.Syntax.separatedList(n);return this.returnZeroOrOneLengthArray(n),{skippedTokens:r,list:h}},t.prototype.separatorKind=function(t){switch(t){case 2048:case 16384:case 256:case 4096:case 8192:case 32768:case 131072:case 65536:case 262144:case 524288:return 79;case 512:return 78;case 1:case 1024:case 2:case 4:case 8:case 16:case 32:default:throw e.Errors.notYetImplemented()}},t.prototype.reportUnexpectedTokenDiagnostic=function(t){var n=this.currentToken(),r=new e.Diagnostic(this.fileName,this.lineMap,this.currentTokenStart(),n.width(),e.DiagnosticCode.Unexpected_token_0_expected,[this.getExpectedListElementType(t)]);this.addDiagnostic(r)},t.prototype.addDiagnostic=function(e){if(this.diagnostics.length>0&&this.diagnostics[this.diagnostics.length-1].start()===e.start())return;this.diagnostics.push(e)},t.prototype.isExpectedListTerminator=function(t){switch(t){case 1:return this.isExpectedSourceUnit_ModuleElementsTerminator();case 1024:return this.isExpectedClassOrInterfaceDeclaration_HeritageClausesTerminator();case 2:return this.isExpectedClassDeclaration_ClassElementsTerminator();case 4:return this.isExpectedModuleDeclaration_ModuleElementsTerminator();case 8:return this.isExpectedSwitchStatement_SwitchClausesTerminator();case 16:return this.isExpectedSwitchClause_StatementsTerminator();case 32:return this.isExpectedBlock_StatementsTerminator();case 64:return this.isExpectedTryBlock_StatementsTerminator();case 128:return this.isExpectedCatchBlock_StatementsTerminator();case 256:return this.isExpectedEnumDeclaration_EnumElementsTerminator();case 512:return this.isExpectedObjectType_TypeMembersTerminator();case 16384:return this.isExpectedArgumentList_AssignmentExpressionsTerminator();case 2048:return this.isExpectedHeritageClause_TypeNameListTerminator();case 4096:return this.isExpectedVariableDeclaration_VariableDeclarators_AllowInTerminator();case 8192:return this.isExpectedVariableDeclaration_VariableDeclarators_DisallowInTerminator();case 32768:return this.isExpectedObjectLiteralExpression_PropertyAssignmentsTerminator();case 131072:return this.isExpectedParameterList_ParametersTerminator();case 262144:return this.isExpectedTypeArgumentList_TypesTerminator();case 524288:return this.isExpectedTypeParameterList_TypeParametersTerminator();case 65536:return this.isExpectedLiteralExpression_AssignmentExpressionsTerminator();default:throw e.Errors.invalidOperation()}},t.prototype.isExpectedSourceUnit_ModuleElementsTerminator=function(){return this.currentToken().tokenKind===10},t.prototype.isExpectedEnumDeclaration_EnumElementsTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedModuleDeclaration_ModuleElementsTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedObjectType_TypeMembersTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedObjectLiteralExpression_PropertyAssignmentsTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedLiteralExpression_AssignmentExpressionsTerminator=function(){return this.currentToken().tokenKind===75},t.prototype.isExpectedTypeArgumentList_TypesTerminator=function(){var e=this.currentToken();return e.tokenKind===81?!0:this.canFollowTypeArgumentListInExpression(e.tokenKind)?!0:!1},t.prototype.isExpectedTypeParameterList_TypeParametersTerminator=function(){var e=this.currentToken();return e.tokenKind===81?!0:e.tokenKind===72||e.tokenKind===70||e.tokenKind===48||e.tokenKind===51?!0:!1},t.prototype.isExpectedParameterList_ParametersTerminator=function(){var e=this.currentToken();return e.tokenKind===73?!0:e.tokenKind===70?!0:e.tokenKind===85?!0:!1},t.prototype.isExpectedVariableDeclaration_VariableDeclarators_DisallowInTerminator=function(){return this.currentToken().tokenKind===78||this.currentToken().tokenKind===73?!0:this.currentToken().tokenKind===29?!0:!1},t.prototype.isExpectedVariableDeclaration_VariableDeclarators_AllowInTerminator=function(){return this.previousToken().tokenKind===79?!1:this.currentToken().tokenKind===85?!0:this.canEatExplicitOrAutomaticSemicolon(!1)},t.prototype.isExpectedClassOrInterfaceDeclaration_HeritageClausesTerminator=function(){var e=this.currentToken();return e.tokenKind===70||e.tokenKind===71?!0:!1},t.prototype.isExpectedHeritageClause_TypeNameListTerminator=function(){var e=this.currentToken();return e.tokenKind===48||e.tokenKind===51?!0:this.isExpectedClassOrInterfaceDeclaration_HeritageClausesTerminator()?!0:!1},t.prototype.isExpectedArgumentList_AssignmentExpressionsTerminator=function(){var e=this.currentToken();return e.tokenKind===73||e.tokenKind===78},t.prototype.isExpectedClassDeclaration_ClassElementsTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedSwitchStatement_SwitchClausesTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedSwitchClause_StatementsTerminator=function(){return this.currentToken().tokenKind===71||this.isSwitchClause()},t.prototype.isExpectedBlock_StatementsTerminator=function(){return this.currentToken().tokenKind===71},t.prototype.isExpectedTryBlock_StatementsTerminator=function(){return this.currentToken().tokenKind===17||this.currentToken().tokenKind===25},t.prototype.isExpectedCatchBlock_StatementsTerminator=function(){return this.currentToken().tokenKind===25},t.prototype.isExpectedListItem=function(t,n){switch(t){case 1:return this.isModuleElement(n);case 1024:return this.isHeritageClause();case 2:return this.isClassElement(n);case 4:return this.isModuleElement(n);case 8:return this.isSwitchClause();case 16:return this.isStatement(n);case 32:return this.isStatement(n);case 64:case 128:return!1;case 256:return this.isEnumElement(n);case 4096:case 8192:return this.isVariableDeclarator();case 512:return this.isTypeMember(n);case 16384:return this.isExpectedArgumentList_AssignmentExpression();case 2048:return this.isHeritageClauseTypeName();case 32768:return this.isPropertyAssignment(n);case 131072:return this.isParameter();case 262144:return this.isType();case 524288:return this.isTypeParameter();case 65536:return this.isAssignmentOrOmittedExpression();default:throw e.Errors.invalidOperation()}},t.prototype.isExpectedArgumentList_AssignmentExpression=function(){var e=this.currentToken();return this.isExpression(e)?!0:e.tokenKind===79?!0:!1},t.prototype.parseExpectedListItem=function(t,n){switch(t){case 1:return this.parseModuleElement(n);case 1024:return this.parseHeritageClause();case 2:return this.parseClassElement(n);case 4:return this.parseModuleElement(n);case 8:return this.parseSwitchClause();case 16:return this.parseStatement(n);case 32:return this.parseStatement(n);case 256:return this.parseEnumElement();case 512:return this.parseTypeMember(n);case 16384:return this.parseAssignmentExpression(!0);case 2048:return this.parseNameOrGenericType();case 4096:return this.parseVariableDeclarator(!0,!1);case 8192:return this.parseVariableDeclarator(!1,!1);case 32768:return this.parsePropertyAssignment(n);case 65536:return this.parseAssignmentOrOmittedExpression();case 131072:return this.parseParameter();case 262144:return this.parseType();case 524288:return this.parseTypeParameter();default:throw e.Errors.invalidOperation()}},t.prototype.getExpectedListElementType=function(t){switch(t){case 1:return e.getLocalizedText(e.DiagnosticCode.module_class_interface_enum_import_or_statement,null);case 1024:return"{";case 2:return e.getLocalizedText(e.DiagnosticCode.constructor_function_accessor_or_variable,null);case 4:return e.getLocalizedText(e.DiagnosticCode.module_class_interface_enum_import_or_statement,null);case 8:return e.getLocalizedText(e.DiagnosticCode.case_or_default_clause,null);case 16:return e.getLocalizedText(e.DiagnosticCode.statement,null);case 32:return e.getLocalizedText(e.DiagnosticCode.statement,null);case 4096:case 8192:return e.getLocalizedText(e.DiagnosticCode.identifier,null);case 256:return e.getLocalizedText(e.DiagnosticCode.identifier,null);case 512:return e.getLocalizedText(e.DiagnosticCode.call_construct_index_property_or_function_signature,null);case 16384:return e.getLocalizedText(e.DiagnosticCode.expression,null);case 2048:return e.getLocalizedText(e.DiagnosticCode.type_name,null);case 32768:return e.getLocalizedText(e.DiagnosticCode.property_or_accessor,null);case 131072:return e.getLocalizedText(e.DiagnosticCode.parameter,null);case 262144:return e.getLocalizedText(e.DiagnosticCode.type,null);case 524288:return e.getLocalizedText(e.DiagnosticCode.type_parameter,null);case 65536:return e.getLocalizedText(e.DiagnosticCode.expression,null);default:throw e.Errors.invalidOperation()}},t}();t.parse=a,t.incrementalParse=f})(e.Parser||(e.Parser={}));var t=e.Parser})(r||(r={}));var r;(function(e){var t=function(){function t(e,t,n,r,i,s){this._allDiagnostics=null,this._sourceUnit=e,this._isDeclaration=t,this._parserDiagnostics=n,this._fileName=r,this._lineMap=i,this._parseOptions=s}return t.prototype.toJSON=function(t){var n={};return n.isDeclaration=this._isDeclaration,n.languageVersion=e.LanguageVersion[this._parseOptions.languageVersion()],n.parseOptions=this._parseOptions,this.diagnostics().length>0&&(n.diagnostics=this.diagnostics()),n.sourceUnit=this._sourceUnit,n.lineMap=this._lineMap,n},t.prototype.sourceUnit=function(){return this._sourceUnit},t.prototype.isDeclaration=function(){return this._isDeclaration},t.prototype.computeDiagnostics=function(){if(this._parserDiagnostics.length>0)return this._parserDiagnostics;var e=[];return this.sourceUnit().accept(new n(this,e)),e},t.prototype.diagnostics=function(){return this._allDiagnostics===null&&(this._allDiagnostics=this.computeDiagnostics()),this._allDiagnostics},t.prototype.fileName=function(){return this._fileName},t.prototype.lineMap=function(){return this._lineMap},t.prototype.parseOptions=function(){return this._parseOptions},t.prototype.structuralEquals=function(t){return e.ArrayUtilities.sequenceEquals(this.diagnostics(),t.diagnostics(),e.Diagnostic.equals)&&this.sourceUnit().structuralEquals(t.sourceUnit())},t}();e.SyntaxTree=t;var n=function(t){function n(e,n){t.call(this),this.syntaxTree=e,this.diagnostics=n,this.inAmbientDeclaration=!1,this.inBlock=!1,this.inObjectLiteralExpression=!1,this.currentConstructor=null}return i(n,t),n.prototype.childFullStart=function(t,n){return this.position()+e.Syntax.childOffset(t,n)},n.prototype.childStart=function(e,t){return this.childFullStart(e,t)+t.leadingTriviaWidth()},n.prototype.pushDiagnostic=function(t,n,r,i){typeof i=="undefined"&&(i=null),this.diagnostics.push(new e.Diagnostic(this.syntaxTree.fileName(),this.syntaxTree.lineMap(),t,n,r,i))},n.prototype.pushDiagnostic1=function(t,n,r,i){typeof i=="undefined"&&(i=null),this.diagnostics.push(new e.Diagnostic(this.syntaxTree.fileName(),this.syntaxTree.lineMap(),t+n.leadingTriviaWidth(),n.width(),r,i))},n.prototype.visitCatchClause=function(n){n.typeAnnotation&&this.pushDiagnostic(this.childStart(n,n.typeAnnotation),n.typeAnnotation.width(),e.DiagnosticCode.Catch_clause_parameter_cannot_have_a_type_annotation),t.prototype.visitCatchClause.call(this,n)},n.prototype.checkParameterListOrder=function(t){var n=this.childFullStart(t,t.parameters),r=!1,i=t.parameters.nonSeparatorCount();for(var s=0,o=t.parameters.childCount();s<o;s++){var u=t.parameters.childAt(s);if(s%2===0){var a=s/2,f=t.parameters.childAt(s);if(f.dotDotDotToken){if(a!==i-1)return this.pushDiagnostic1(n,f,e.DiagnosticCode.Rest_parameter_must_be_last_in_list),!0;if(f.questionToken)return this.pushDiagnostic1(n,f,e.DiagnosticCode.Rest_parameter_cannot_be_optional),!0;if(f.equalsValueClause)return this.pushDiagnostic1(n,f,e.DiagnosticCode.Rest_parameter_cannot_have_an_initializer),!0}else if(f.questionToken||f.equalsValueClause){r=!0;if(f.questionToken&&f.equalsValueClause)return this.pushDiagnostic1(n,f,e.DiagnosticCode.Parameter_cannot_have_question_mark_and_initializer),!0}else if(r)return this.pushDiagnostic1(n,f,e.DiagnosticCode.Required_parameter_cannot_follow_optional_parameter),!0}n+=u.fullWidth()}return!1},n.prototype.checkParameterListAcessibilityModifiers=function(e){var t=this.childFullStart(e,e.parameters);for(var n=0,r=e.parameters.childCount();n<r;n++){var i=e.parameters.childAt(n);if(n%2===0){var s=e.parameters.childAt(n);if(this.checkParameterAccessibilityModifiers(e,s,t))return!0}t+=i.fullWidth()}return!1},n.prototype.checkParameterAccessibilityModifiers=function(t,n,r){if(n.modifiers.childCount()>0){var i=n.modifiers,s=r+e.Syntax.childOffset(n,i);for(var o=0,u=i.childCount();o<u;o++){var a=i.childAt(o);if(this.checkParameterAccessibilityModifier(t,a,s,o))return!0;s+=a.fullWidth()}}return!1},n.prototype.checkParameterAccessibilityModifier=function(t,n,r,i){return n.tokenKind!==57&&n.tokenKind!==55?(this.pushDiagnostic1(r,n,e.DiagnosticCode._0_modifier_cannot_appear_on_a_parameter,[n.text()]),!0):i>0?(this.pushDiagnostic1(r,n,e.DiagnosticCode.Accessibility_modifier_already_seen),!0):!this.inAmbientDeclaration&&this.currentConstructor&&!this.currentConstructor.block&&this.currentConstructor.callSignature.parameterList===t?(this.pushDiagnostic1(r,n,e.DiagnosticCode.Parameter_property_declarations_cannot_be_used_in_a_constructor_overload),!0):this.inAmbientDeclaration||this.currentConstructor===null||this.currentConstructor.callSignature.parameterList!==t?(this.pushDiagnostic1(r,n,e.DiagnosticCode.Parameter_property_declarations_can_only_be_used_in_a_non_ambient_constructor_declaration),!0):!1},n.prototype.checkForTrailingSeparator=function(t,n){if(n.childCount()===0||n.childCount()%2===1)return!1;var r=this.childFullStart(t,n);for(var i=0,s=n.childCount();i<s;i++){var o=n.childAt(i);i===s-1&&this.pushDiagnostic1(r,o,e.DiagnosticCode.Trailing_separator_not_allowed),r+=o.fullWidth()}return!0},n.prototype.checkForAtLeastOneElement=function(t,n,r){if(n.childCount()>0)return!1;var i=this.childFullStart(t,n),s=this.syntaxTree.sourceUnit().findToken(i);return this.pushDiagnostic1(i,s.token(),e.DiagnosticCode.Unexpected_token_0_expected,[r]),!0},n.prototype.visitParameterList=function(e){if(this.checkParameterListAcessibilityModifiers(e)||this.checkParameterListOrder(e)||this.checkForTrailingSeparator(e,e.parameters)){this.skip(e);return}t.prototype.visitParameterList.call(this,e)},n.prototype.visitHeritageClause=function(n){if(this.checkForTrailingSeparator(n,n.typeNames)||this.checkForAtLeastOneElement(n,n.typeNames,e.getLocalizedText(e.DiagnosticCode.type_name,null))){this.skip(n);return}t.prototype.visitHeritageClause.call(this,n)},n.prototype.visitArgumentList=function(e){if(this.checkForTrailingSeparator(e,e.arguments)){this.skip(e);return}t.prototype.visitArgumentList.call(this,e)},n.prototype.visitVariableDeclaration=function(n){if(this.checkForTrailingSeparator(n,n.variableDeclarators)||this.checkForAtLeastOneElement(n,n.variableDeclarators,e.getLocalizedText(e.DiagnosticCode.identifier,null))){this.skip(n);return}t.prototype.visitVariableDeclaration.call(this,n)},n.prototype.visitTypeArgumentList=function(n){if(this.checkForTrailingSeparator(n,n.typeArguments)||this.checkForAtLeastOneElement(n,n.typeArguments,e.getLocalizedText(e.DiagnosticCode.identifier,null))){this.skip(n);return}t.prototype.visitTypeArgumentList.call(this,n)},n.prototype.visitTypeParameterList=function(n){if(this.checkForTrailingSeparator(n,n.typeParameters)||this.checkForAtLeastOneElement(n,n.typeParameters,e.getLocalizedText(e.DiagnosticCode.identifier,null))){this.skip(n);return}t.prototype.visitTypeParameterList.call(this,n)},n.prototype.checkIndexSignatureParameter=function(t){var n=this.childFullStart(t,t.parameter),r=t.parameter;return r.dotDotDotToken?(this.pushDiagnostic1(n,r,e.DiagnosticCode.Index_signatures_cannot_have_rest_parameters),!0):r.modifiers.childCount()>0?(this.pushDiagnostic1(n,r,e.DiagnosticCode.Index_signature_parameter_cannot_have_accessibility_modifiers),!0):r.questionToken?(this.pushDiagnostic1(n,r,e.DiagnosticCode.Index_signature_parameter_cannot_have_a_question_mark),!0):r.equalsValueClause?(this.pushDiagnostic1(n,r,e.DiagnosticCode.Index_signature_parameter_cannot_have_an_initializer),!0):r.typeAnnotation?r.typeAnnotation.type.kind()!==69&&r.typeAnnotation.type.kind()!==67?(this.pushDiagnostic1(n,r,e.DiagnosticCode.Index_signature_parameter_type_must_be_string_or_number),!0):!1:(this.pushDiagnostic1(n,r,e.DiagnosticCode.Index_signature_parameter_must_have_a_type_annotation),!0)},n.prototype.visitIndexSignature=function(n){if(this.checkIndexSignatureParameter(n)){this.skip(n);return}if(!n.typeAnnotation){this.pushDiagnostic1(this.position(),n,e.DiagnosticCode.Index_signature_must_have_a_type_annotation),this.skip(n);return}t.prototype.visitIndexSignature.call(this,n)},n.prototype.checkClassDeclarationHeritageClauses=function(t){var n=this.childFullStart(t,t.heritageClauses),r=!1,i=!1;for(var s=0,o=t.heritageClauses.childCount();s<o;s++){e.Debug.assert(s<=2);var u=t.heritageClauses.childAt(s);if(u.extendsOrImplementsKeyword.tokenKind===48){if(r)return this.pushDiagnostic1(n,u,e.DiagnosticCode.extends_clause_already_seen),!0;if(i)return this.pushDiagnostic1(n,u,e.DiagnosticCode.extends_clause_must_precede_implements_clause),!0;if(u.typeNames.nonSeparatorCount()>1)return this.pushDiagnostic1(n,u,e.DiagnosticCode.Classes_can_only_extend_a_single_class),!0;r=!0}else{e.Debug.assert(u.extendsOrImplementsKeyword.tokenKind===51);if(i)return this.pushDiagnostic1(n,u,e.DiagnosticCode.implements_clause_already_seen),!0;i=!0}n+=u.fullWidth()}return!1},n.prototype.checkForDisallowedDeclareModifier=function(t){if(this.inAmbientDeclaration){var n=e.SyntaxUtilities.getToken(t,63);if(n)return this.pushDiagnostic1(this.childFullStart(t,n),n,e.DiagnosticCode.declare_modifier_not_allowed_for_code_already_in_an_ambient_context),!0}return!1},n.prototype.checkForRequiredDeclareModifier=function(t,n,r){if(!this.inAmbientDeclaration&&this.syntaxTree.isDeclaration()&&!e.SyntaxUtilities.containsToken(r,63))return this.pushDiagnostic1(this.childFullStart(t,n),n.firstToken(),e.DiagnosticCode.declare_modifier_required_for_top_level_element),!0},n.prototype.checkFunctionOverloads=function(t,n){if(!this.inAmbientDeclaration&&!this.syntaxTree.isDeclaration()){var r=this.childFullStart(t,n),i=!1,s=null;for(var o=0,u=n.childCount();o<u;o++){var a=n.childAt(o),f=o===u-1;if(i){if(a.kind()!==129)return this.pushDiagnostic1(r,a.firstToken(),e.DiagnosticCode.Function_implementation_expected),!0;var l=a;if(l.identifier.valueText()!==s){var c=r+e.Syntax.childOffset(a,l.identifier);return this.pushDiagnostic1(c,l.identifier,e.DiagnosticCode.Function_overload_name_must_be_0,[s]),!0}}if(a.kind()===129){l=a;if(!e.SyntaxUtilities.containsToken(l.modifiers,63)){i=l.block===null,s=l.identifier.valueText();if(i){if(f)return this.pushDiagnostic1(r,a.firstToken(),e.DiagnosticCode.Function_implementation_expected),!0;var h=n.childAt(o+1);if(h.kind()===129){var p=h;if(p.identifier.valueText()!==s&&p.block===null){var c=r+e.Syntax.childOffset(a,l.identifier);return this.pushDiagnostic1(c,l.identifier,e.DiagnosticCode.Function_implementation_expected),!0}}}}else i=!1,s=""}r+=a.fullWidth()}}return!1},n.prototype.checkClassOverloads=function(t){if(!this.inAmbientDeclaration&&!e.SyntaxUtilities.containsToken(t.modifiers,63)){var n=this.childFullStart(t,t.classElements),r=!1,i=!1,s=null,o=null,u=null;for(var a=0,f=t.classElements.childCount();a<f;a++){var l=t.classElements.childAt(a),c=a===f-1,h=null;if(r){if(l.kind()!==135)return this.pushDiagnostic1(n,l.firstToken(),e.DiagnosticCode.Function_implementation_expected),!0;u=l;if(u.propertyName.valueText()!==s){var p=n+e.Syntax.childOffset(l,u.propertyName);return this.pushDiagnostic1(p,u.propertyName,e.DiagnosticCode.Function_overload_name_must_be_0,[s]),!0}h=e.SyntaxUtilities.containsToken(u.modifiers,58);if(h!==o){var p=n+e.Syntax.childOffset(l,u.propertyName),d=o?e.DiagnosticCode.Function_overload_must_be_static:e.DiagnosticCode.Function_overload_must_not_be_static;return this.pushDiagnostic1(p,u.propertyName,d,null),!0}}else if(i&&l.kind()!==137)return this.pushDiagnostic1(n,l.firstToken(),e.DiagnosticCode.Constructor_implementation_expected),!0;if(l.kind()===135){u=l,r=u.block===null,s=u.propertyName.valueText(),o=e.SyntaxUtilities.containsToken(u.modifiers,58);if(r){if(c)return this.pushDiagnostic1(n,l.firstToken(),e.DiagnosticCode.Function_implementation_expected),!0;var v=t.classElements.childAt(a+1);if(v.kind()===135){var m=v;if(m.propertyName.valueText()!==s&&m.block===null){var p=n+e.Syntax.childOffset(l,u.propertyName);return this.pushDiagnostic1(p,u.propertyName,e.DiagnosticCode.Function_implementation_expected),!0}}}}else if(l.kind()===137){var g=l;i=g.block===null;if(c&&i)return this.pushDiagnostic1(n,l.firstToken(),e.DiagnosticCode.Constructor_implementation_expected),!0}n+=l.fullWidth()}}return!1},n.prototype.checkForReservedName=function(t,n,r){var i=this.childFullStart(t,n),s,o,u=n;while(u!==null){if(u.kind()===121){var a=u;s=a.right,o=i+this.childFullStart(a,s),u=a.left}else e.Debug.assert(u.kind()===11),s=u,o=i,u=null;switch(s.valueText()){case"any":case"number":case"boolean":case"string":case"void":return this.pushDiagnostic(o+s.leadingTriviaWidth(),s.width(),r,[s.valueText()]),!0}}return!1},n.prototype.visitClassDeclaration=function(n){if(this.checkForReservedName(n,n.identifier,e.DiagnosticCode.Class_name_cannot_be_0)||this.checkForDisallowedDeclareModifier(n.modifiers)||this.checkForRequiredDeclareModifier(n,n.classKeyword,n.modifiers)||this.checkModuleElementModifiers(n.modifiers)||this.checkClassDeclarationHeritageClauses(n)||this.checkClassOverloads(n)){this.skip(n);return}var r=this.inAmbientDeclaration;this.inAmbientDeclaration=this.inAmbientDeclaration||this.syntaxTree.isDeclaration()||e.SyntaxUtilities.containsToken(n.modifiers,63),t.prototype.visitClassDeclaration.call(this,n),this.inAmbientDeclaration=r},n.prototype.checkInterfaceDeclarationHeritageClauses=function(t){var n=this.childFullStart(t,t.heritageClauses),r=!1;for(var i=0,s=t.heritageClauses.childCount();i<s;i++){e.Debug.assert(i<=1);var o=t.heritageClauses.childAt(i);if(o.extendsOrImplementsKeyword.tokenKind!==48)return e.Debug.assert(o.extendsOrImplementsKeyword.tokenKind===51),this.pushDiagnostic1(n,o,e.DiagnosticCode.Interface_declaration_cannot_have_implements_clause),!0;if(r)return this.pushDiagnostic1(n,o,e.DiagnosticCode.extends_clause_already_seen),!0;r=!0,n+=o.fullWidth()}return!1},n.prototype.checkInterfaceModifiers=function(t){var n=this.position();for(var r=0,i=t.childCount();r<i;r++){var s=t.childAt(r);if(s.tokenKind===63)return this.pushDiagnostic1(n,s,e.DiagnosticCode.declare_modifier_cannot_appear_on_an_interface_declaration),!0;n+=s.fullWidth()}return!1},n.prototype.visitInterfaceDeclaration=function(n){if(this.checkForReservedName(n,n.identifier,e.DiagnosticCode.Interface_name_cannot_be_0)||this.checkInterfaceModifiers(n.modifiers)||this.checkModuleElementModifiers(n.modifiers)||this.checkInterfaceDeclarationHeritageClauses(n)){this.skip(n);return}t.prototype.visitInterfaceDeclaration.call(this,n)},n.prototype.checkClassElementModifiers=function(t){var n=this.position(),r=!1,i=!1;for(var s=0,o=t.childCount();s<o;s++){var u=t.childAt(s);if(u.tokenKind===57||u.tokenKind===55){if(r)return this.pushDiagnostic1(n,u,e.DiagnosticCode.Accessibility_modifier_already_seen),!0;if(i){var a=t.childAt(s-1);return this.pushDiagnostic1(n,u,e.DiagnosticCode._0_modifier_must_precede_1_modifier,[u.text(),a.text()]),!0}r=!0}else{if(u.tokenKind!==58)return this.pushDiagnostic1(n,u,e.DiagnosticCode._0_modifier_cannot_appear_on_a_class_element,[u.text()]),!0;if(i)return this.pushDiagnostic1(n,u,e.DiagnosticCode._0_modifier_already_seen,[u.text()]),!0;i=!0}n+=u.fullWidth()}return!1},n.prototype.visitMemberVariableDeclaration=function(e){if(this.checkClassElementModifiers(e.modifiers)){this.skip(e);return}t.prototype.visitMemberVariableDeclaration.call(this,e)},n.prototype.visitMemberFunctionDeclaration=function(e){if(this.checkClassElementModifiers(e.modifiers)){this.skip(e);return}t.prototype.visitMemberFunctionDeclaration.call(this,e)},n.prototype.checkGetAccessorParameter=function(t,n,r){var i=this.childFullStart(t,n);return r.parameters.childCount()!==0?(this.pushDiagnostic1(i,n,e.DiagnosticCode.get_accessor_cannot_have_parameters),!0):!1},n.prototype.visitIndexMemberDeclaration=function(e){if(this.checkIndexMemberModifiers(e)){this.skip(e);return}t.prototype.visitIndexMemberDeclaration.call(this,e)},n.prototype.checkIndexMemberModifiers=function(t){if(t.modifiers.childCount()>0){var n=this.childFullStart(t,t.modifiers);return this.pushDiagnostic1(n,t.modifiers.childAt(0),e.DiagnosticCode.Modifiers_cannot_appear_here),!0}return!1},n.prototype.checkEcmaScriptVersionIsAtLeast=function(e,t,n,r){if(this.syntaxTree.parseOptions().languageVersion()<n){var i=this.childFullStart(e,t);return this.pushDiagnostic1(i,t,r),!0}return!1},n.prototype.visitObjectLiteralExpression=function(e){var n=this.inObjectLiteralExpression;this.inObjectLiteralExpression=!0,t.prototype.visitObjectLiteralExpression.call(this,e),this.inObjectLiteralExpression=n},n.prototype.visitGetAccessor=function(n){if(this.checkForAccessorDeclarationInAmbientContext(n)||this.checkEcmaScriptVersionIsAtLeast(n,n.getKeyword,1,e.DiagnosticCode.Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher)||this.checkForDisallowedModifiers(n,n.modifiers)||this.checkClassElementModifiers(n.modifiers)||this.checkGetAccessorParameter(n,n.getKeyword,n.parameterList)){this.skip(n);return}t.prototype.visitGetAccessor.call(this,n)},n.prototype.checkForAccessorDeclarationInAmbientContext=function(t){return this.inAmbientDeclaration?(this.pushDiagnostic1(this.position(),t,e.DiagnosticCode.Accessors_are_not_allowed_in_ambient_contexts,null),!0):!1},n.prototype.checkSetAccessorParameter=function(t,n,r){var i=this.childFullStart(t,n);if(r.parameters.childCount()!==1)return this.pushDiagnostic1(i,n,e.DiagnosticCode.set_accessor_must_have_one_and_only_one_parameter),!0;var s=this.childFullStart(t,r),o=s+e.Syntax.childOffset(r,r.openParenToken),u=r.parameters.childAt(0);return u.questionToken?(this.pushDiagnostic1(o,u,e.DiagnosticCode.set_accessor_parameter_cannot_be_optional),!0):u.equalsValueClause?(this.pushDiagnostic1(o,u,e.DiagnosticCode.set_accessor_parameter_cannot_have_an_initializer),!0):u.dotDotDotToken?(this.pushDiagnostic1(o,u,e.DiagnosticCode.set_accessor_cannot_have_rest_parameter),!0):!1},n.prototype.visitSetAccessor=function(n){if(this.checkForAccessorDeclarationInAmbientContext(n)||this.checkEcmaScriptVersionIsAtLeast(n,n.setKeyword,1,e.DiagnosticCode.Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher)||this.checkForDisallowedModifiers(n,n.modifiers)||this.checkClassElementModifiers(n.modifiers)||this.checkSetAccessorParameter(n,n.setKeyword,n.parameterList)){this.skip(n);return}t.prototype.visitSetAccessor.call(this,n)},n.prototype.visitEnumDeclaration=function(n){if(this.checkForReservedName(n,n.identifier,e.DiagnosticCode.Enum_name_cannot_be_0)||this.checkForDisallowedDeclareModifier(n.modifiers)||this.checkForRequiredDeclareModifier(n,n.enumKeyword,n.modifiers)||this.checkModuleElementModifiers(n.modifiers),this.checkEnumElements(n)){this.skip(n);return}var r=this.inAmbientDeclaration;this.inAmbientDeclaration=this.inAmbientDeclaration||this.syntaxTree.isDeclaration()||e.SyntaxUtilities.containsToken(n.modifiers,63),t.prototype.visitEnumDeclaration.call(this,n),this.inAmbientDeclaration=r},n.prototype.checkEnumElements=function(t){var n=this.childFullStart(t,t.enumElements),r=!1;for(var i=0,s=t.enumElements.childCount();i<s;i++){var o=t.enumElements.childAt(i);if(i%2===0){var u=o;if(!u.equalsValueClause&&r)return this.pushDiagnostic1(n,u,e.DiagnosticCode.Enum_member_must_have_initializer,null),!0;if(u.equalsValueClause){var a=u.equalsValueClause.value;r=!e.Syntax.isIntegerLiteral(a)}}n+=o.fullWidth()}return!1},n.prototype.visitEnumElement=function(n){if(this.inAmbientDeclaration&&n.equalsValueClause){var r=n.equalsValueClause.value;if(!e.Syntax.isIntegerLiteral(r)){this.pushDiagnostic1(this.childFullStart(n,n.equalsValueClause),n.equalsValueClause.firstToken(),e.DiagnosticCode.Ambient_enum_elements_can_only_have_integer_literal_initializers),this.skip(n);return}}t.prototype.visitEnumElement.call(this,n)},n.prototype.visitInvocationExpression=function(n){n.expression.kind()===50&&n.argumentList.typeArgumentList!==null&&this.pushDiagnostic1(this.position(),n,e.DiagnosticCode.super_invocation_cannot_have_type_arguments),t.prototype.visitInvocationExpression.call(this,n)},n.prototype.checkModuleElementModifiers=function(t){var n=this.position(),r=!1,i=!1;for(var s=0,o=t.childCount();s<o;s++){var u=t.childAt(s);if(u.tokenKind===57||u.tokenKind===55||u.tokenKind===58)return this.pushDiagnostic1(n,u,e.DiagnosticCode._0_modifier_cannot_appear_on_a_module_element,[u.text()]),!0;if(u.tokenKind===63){if(i){this.pushDiagnostic1(n,u,e.DiagnosticCode.Accessibility_modifier_already_seen);return}i=!0}else if(u.tokenKind===47){if(r){this.pushDiagnostic1(n,u,e.DiagnosticCode._0_modifier_already_seen,[u.text()]);return}if(i){this.pushDiagnostic1(n,u,e.DiagnosticCode._0_modifier_must_precede_1_modifier,[e.SyntaxFacts.getText(47),e.SyntaxFacts.getText(63)]);return}r=!0}n+=u.fullWidth()}return!1},n.prototype.checkForDisallowedImportDeclaration=function(t){var n=this.childFullStart(t,t.moduleElements);for(var r=0,i=t.moduleElements.childCount();r<i;r++){var s=t.moduleElements.childAt(r);if(s.kind()===133){var o=s;o.moduleReference.kind()===245&&t.stringLiteral===null&&this.pushDiagnostic1(n,o,e.DiagnosticCode.Import_declarations_in_an_internal_module_cannot_reference_an_external_module,null)}n+=s.fullWidth()}return!1},n.prototype.checkForDisallowedDeclareModifierOnImportDeclaration=function(t){var n=e.SyntaxUtilities.getToken(t,63);if(n)return this.pushDiagnostic1(this.childFullStart(t,n),n,e.DiagnosticCode.declare_modifier_not_allowed_on_import_declaration),!0},n.prototype.visitImportDeclaration=function(e){if(this.checkForDisallowedDeclareModifierOnImportDeclaration(e.modifiers)||this.checkModuleElementModifiers(e.modifiers)){this.skip(e);return}t.prototype.visitImportDeclaration.call(this,e)},n.prototype.visitModuleDeclaration=function(n){if(this.checkForReservedName(n,n.name,e.DiagnosticCode.Module_name_cannot_be_0)||this.checkForDisallowedDeclareModifier(n.modifiers)||this.checkForRequiredDeclareModifier(n,n.moduleKeyword,n.modifiers)||this.checkModuleElementModifiers(n.modifiers)||this.checkForDisallowedImportDeclaration(n)||this.checkForDisallowedExports(n,n.moduleElements)||this.checkForMultipleExportAssignments(n,n.moduleElements)){this.skip(n);return}if(!e.SyntaxUtilities.containsToken(n.modifiers,63)&&this.checkFunctionOverloads(n,n.moduleElements)){this.skip(n);return}if(n.stringLiteral&&!this.inAmbientDeclaration&&!e.SyntaxUtilities.containsToken(n.modifiers,63)){var r=this.childFullStart(n,n.stringLiteral);this.pushDiagnostic1(r,n.stringLiteral,e.DiagnosticCode.Only_ambient_modules_can_use_quoted_names),this.skip(n);return}if(!n.stringLiteral&&this.checkForDisallowedExportAssignment(n)){this.skip(n);return}var i=this.inAmbientDeclaration;this.inAmbientDeclaration=this.inAmbientDeclaration||this.syntaxTree.isDeclaration()||e.SyntaxUtilities.containsToken(n.modifiers,63),t.prototype.visitModuleDeclaration.call(this,n),this.inAmbientDeclaration=i},n.prototype.checkForDisallowedExports=function(t,n){var r=!1;for(var i=0,s=n.childCount();i<s;i++){var o=n.childAt(i);if(e.SyntaxUtilities.hasExportKeyword(o)){r=!0;break}}var u=this.childFullStart(t,n);if(r)for(var i=0,s=n.childCount();i<s;i++){var o=n.childAt(i);if(o.kind()===134)return this.pushDiagnostic1(u,o,e.DiagnosticCode.Export_assignment_not_allowed_in_module_with_exported_element),!0;u+=o.fullWidth()}return!1},n.prototype.checkForMultipleExportAssignments=function(t,n){var r=this.childFullStart(t,n),i=!1,s=!1;for(var o=0,u=n.childCount();o<u;o++){var a=n.childAt(o);a.kind()===134&&(i&&(this.pushDiagnostic1(r,a,e.DiagnosticCode.Module_cannot_have_multiple_export_assignments),s=!0),i=!0),r+=a.fullWidth()}return s},n.prototype.checkForDisallowedExportAssignment=function(t){var n=this.childFullStart(t,t.moduleElements);for(var r=0,i=t.moduleElements.childCount();r<i;r++){var s=t.moduleElements.childAt(r);if(s.kind()===134)return this.pushDiagnostic1(n,s,e.DiagnosticCode.Export_assignment_cannot_be_used_in_internal_modules),!0;n+=s.fullWidth()}return!1},n.prototype.visitBlock=function(n){if(this.inAmbientDeclaration||this.syntaxTree.isDeclaration()){this.pushDiagnostic1(this.position(),n.firstToken(),e.DiagnosticCode.Implementations_are_not_allowed_in_ambient_contexts),this.skip(n);return}if(this.checkFunctionOverloads(n,n.statements)){this.skip(n);return}var r=this.inBlock;this.inBlock=!0,t.prototype.visitBlock.call(this,n),this.inBlock=r},n.prototype.checkForStatementInAmbientContxt=function(t){return this.inAmbientDeclaration||this.syntaxTree.isDeclaration()?(this.pushDiagnostic1(this.position(),t.firstToken(),e.DiagnosticCode.Statements_are_not_allowed_in_ambient_contexts),!0):!1},n.prototype.visitBreakStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitBreakStatement.call(this,e)},n.prototype.visitContinueStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitContinueStatement.call(this,e)},n.prototype.visitDebuggerStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitDebuggerStatement.call(this,e)},n.prototype.visitDoStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitDoStatement.call(this,e)},n.prototype.visitEmptyStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitEmptyStatement.call(this,e)},n.prototype.visitExpressionStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitExpressionStatement.call(this,e)},n.prototype.visitForInStatement=function(e){if(this.checkForStatementInAmbientContxt(e)||this.checkForInStatementVariableDeclaration(e)){this.skip(e);return}t.prototype.visitForInStatement.call(this,e)},n.prototype.checkForInStatementVariableDeclaration=function(t){if(t.variableDeclaration&&t.variableDeclaration.variableDeclarators.nonSeparatorCount()>1){var n=this.childFullStart(t,t.variableDeclaration);return this.pushDiagnostic1(n,t.variableDeclaration,e.DiagnosticCode.Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement),!0}return!1},n.prototype.visitForStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitForStatement.call(this,e)},n.prototype.visitIfStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitIfStatement.call(this,e)},n.prototype.visitLabeledStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitLabeledStatement.call(this,e)},n.prototype.visitReturnStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitReturnStatement.call(this,e)},n.prototype.visitSwitchStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitSwitchStatement.call(this,e)},n.prototype.visitThrowStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitThrowStatement.call(this,e)},n.prototype.visitTryStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitTryStatement.call(this,e)},n.prototype.visitWhileStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitWhileStatement.call(this,e)},n.prototype.visitWithStatement=function(e){if(this.checkForStatementInAmbientContxt(e)){this.skip(e);return}t.prototype.visitWithStatement.call(this,e)},n.prototype.checkForDisallowedModifiers=function(t,n){if(this.inBlock||this.inObjectLiteralExpression)if(n.childCount()>0){var r=this.childFullStart(t,n);return this.pushDiagnostic1(r,n.childAt(0),e.DiagnosticCode.Modifiers_cannot_appear_here),!0}return!1},n.prototype.visitFunctionDeclaration=function(n){if(this.checkForDisallowedDeclareModifier(n.modifiers)||this.checkForDisallowedModifiers(n,n.modifiers)||this.checkForRequiredDeclareModifier(n,n.functionKeyword,n.modifiers)||this.checkModuleElementModifiers(n.modifiers)){this.skip(n);return}var r=this.inAmbientDeclaration;this.inAmbientDeclaration=this.inAmbientDeclaration||this.syntaxTree.isDeclaration()||e.SyntaxUtilities.containsToken(n.modifiers,63),t.prototype.visitFunctionDeclaration.call(this,n),this.inAmbientDeclaration=r},n.prototype.visitVariableStatement=function(n){if(this.checkForDisallowedDeclareModifier(n.modifiers)||this.checkForDisallowedModifiers(n,n.modifiers)||this.checkForRequiredDeclareModifier(n,n.variableDeclaration,n.modifiers)||this.checkModuleElementModifiers(n.modifiers)){this.skip(n);return}var r=this.inAmbientDeclaration;this.inAmbientDeclaration=this.inAmbientDeclaration||this.syntaxTree.isDeclaration()||e.SyntaxUtilities.containsToken(n.modifiers,63),t.prototype.visitVariableStatement.call(this,n),this.inAmbientDeclaration=r},n.prototype.checkListSeparators=function(t,n,r){var i=this.childFullStart(t,n);for(var s=0,o=n.childCount();s<o;s++){var u=n.childAt(s);s%2===1&&u.kind()!==r&&this.pushDiagnostic1(i,u,e.DiagnosticCode._0_expected,[e.SyntaxFacts.getText(r)]),i+=u.fullWidth()}return!1},n.prototype.visitObjectType=function(e){if(this.checkListSeparators(e,e.typeMembers,78)){this.skip(e);return}var n=this.inAmbientDeclaration;this.inAmbientDeclaration=!0,t.prototype.visitObjectType.call(this,e),this.inAmbientDeclaration=n},n.prototype.visitArrayType=function(e){var n=this.inAmbientDeclaration;this.inAmbientDeclaration=!0,t.prototype.visitArrayType.call(this,e),this.inAmbientDeclaration=n},n.prototype.visitFunctionType=function(e){var n=this.inAmbientDeclaration;this.inAmbientDeclaration=!0,t.prototype.visitFunctionType.call(this,e),this.inAmbientDeclaration=n},n.prototype.visitConstructorType=function(e){var n=this.inAmbientDeclaration;this.inAmbientDeclaration=!0,t.prototype.visitConstructorType.call(this,e),this.inAmbientDeclaration=n},n.prototype.visitVariableDeclarator=function(n){if(this.inAmbientDeclaration&&n.equalsValueClause){this.pushDiagnostic1(this.childFullStart(n,n.equalsValueClause),n.equalsValueClause.firstToken(),e.DiagnosticCode.Initializers_are_not_allowed_in_ambient_contexts),this.skip(n);return}t.prototype.visitVariableDeclarator.call(this,n)},n.prototype.visitConstructorDeclaration=function(e){if(this.checkClassElementModifiers(e.modifiers)||this.checkConstructorModifiers(e.modifiers)||this.checkConstructorTypeParameterList(e)||this.checkConstructorTypeAnnotation(e)){this.skip(e);return}var n=this.currentConstructor;this.currentConstructor=e,t.prototype.visitConstructorDeclaration.call(this,e),this.currentConstructor=n},n.prototype.checkConstructorModifiers=function(t){var n=this.position();for(var r=0,i=t.childCount();r<i;r++){var s=t.childAt(r);if(s.kind()!==57)return this.pushDiagnostic1(n,s,e.DiagnosticCode._0_modifier_cannot_appear_on_a_constructor_declaration,[e.SyntaxFacts.getText(s.kind())]),!0;n+=s.fullWidth()}return!1},n.prototype.checkConstructorTypeParameterList=function(t){var n=this.position();if(t.callSignature.typeParameterList){var r=this.childFullStart(t,t.callSignature),i=r+e.Syntax.childOffset(t.callSignature,t.callSignature.typeAnnotation);return this.pushDiagnostic1(r,t.callSignature.typeParameterList,e.DiagnosticCode.Type_parameters_cannot_appear_on_a_constructor_declaration),!0}return!1},n.prototype.checkConstructorTypeAnnotation=function(t){var n=this.position();if(t.callSignature.typeAnnotation){var r=this.childFullStart(t,t.callSignature),i=r+e.Syntax.childOffset(t.callSignature,t.callSignature.typeAnnotation);return this.pushDiagnostic1(i,t.callSignature.typeAnnotation,e.DiagnosticCode.Type_annotation_cannot_appear_on_a_constructor_declaration),!0}return!1},n.prototype.visitSourceUnit=function(e){if(this.checkFunctionOverloads(e,e.moduleElements)||this.checkForDisallowedExports(e,e.moduleElements)||this.checkForMultipleExportAssignments(e,e.moduleElements)){this.skip(e);return}t.prototype.visitSourceUnit.call(this,e)},n}(e.PositionTrackingWalker)})(r||(r={}));var r;(function(e){var t=function(){function t(){}return t.lookupInUnicodeMap=function(e,t){if(e<t[0])return!1;var n=0,r=t.length,i;while(n+1<r){i=n+(r-n)/2,i-=i%2;if(t[i]<=e&&e<=t[i+1])return!0;e<t[i]?r=i:n=i+2}return!1},t.isIdentifierStart=function(n,r){if(r===0)return t.lookupInUnicodeMap(n,t.unicodeES3IdentifierStart);if(r===1)return t.lookupInUnicodeMap(n,t.unicodeES5IdentifierStart);throw e.Errors.argumentOutOfRange("languageVersion")},t.isIdentifierPart=function(n,r){if(r===0)return t.lookupInUnicodeMap(n,t.unicodeES3IdentifierPart);if(r===1)return t.lookupInUnicodeMap(n,t.unicodeES5IdentifierPart);throw e.Errors.argumentOutOfRange("languageVersion")},t.unicodeES3IdentifierStart=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],t.unicodeES3IdentifierPart=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500],t.unicodeES5IdentifierStart=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],t.unicodeES5IdentifierPart=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],t}();e.Unicode=t})(r||(r={}));var r;(function(e){function r(e,t,n){var r=(new Date).getTime(),i=n(),s=(new Date).getTime();return e.information()&&e.log(t+" completed in "+(s-r)+" msec"),i}(function(e){function t(t){e.diagnosticWriter&&e.diagnosticWriter.Alert(t)}function n(n){e.debug&&t(n)}function r(n,r){e.debug&&(n||t(r))}e.debug=!1,e.diagnosticWriter=null,e.analysisPass=0,e.Alert=t,e.debugPrint=n,e.assert=r})(e.CompilerDiagnostics||(e.CompilerDiagnostics={}));var t=e.CompilerDiagnostics,n=function(){function e(){}return e.prototype.information=function(){return!1},e.prototype.debug=function(){return!1},e.prototype.warning=function(){return!1},e.prototype.error=function(){return!1},e.prototype.fatal=function(){return!1},e.prototype.log=function(e){},e}();e.NullLogger=n,e.timeFunction=r})(r||(r={}));var r;(function(e){var t=function(){function t(e,t,n,r,i,s,o,u,a,f){this._compiler=e,this._semanticInfoChain=t,this.fileName=n,this.referencedFiles=r,this._scriptSnapshot=i,this.byteOrderMark=s,this.version=o,this.isOpen=u,this._syntaxTree=a,this._topLevelDecl=f,this._diagnostics=null,this._bloomFilter=null,this._sourceUnit=null,this._lineMap=null,this._declASTMap=[],this._astDeclMap=[],this._amdDependencies=undefined,this._externalModuleIndicatorSpan=undefined}return t.prototype.invalidate=function(){this._declASTMap.length=0,this._astDeclMap.length=0,this._topLevelDecl=null,this._syntaxTree=null,this._sourceUnit=null,this._diagnostics=null,this._bloomFilter=null},t.prototype.isDeclareFile=function(){return e.isDTSFile(this.fileName)},t.prototype.cacheSyntaxTreeInfo=function(t){var n=(new Date).getTime();this._diagnostics=t.diagnostics(),e.syntaxDiagnosticsTime+=(new Date).getTime()-n,this._lineMap=t.lineMap();var r=t.sourceUnit(),i=r.leadingTrivia();this._externalModuleIndicatorSpan=this.getImplicitImportSpan(i)||this.getTopLevelImportOrExportSpan(r);var s=[];for(var o=0,u=i.count();o<u;o++){var a=i.syntaxTriviaAt(o);if(a.isComment()){var f=this.getAmdDependency(a.fullText());f&&s.push(f)}}this._amdDependencies=s},t.prototype.getAmdDependency=function(e){var t=/^\/\/\/\s*<amd-dependency\s+path=('|")(.+?)\1/gim,n=t.exec(e);return n?n[2]:null},t.prototype.getImplicitImportSpan=function(e){var t=0;for(var n=0,r=e.count();n<r;n++){var i=e.syntaxTriviaAt(n);if(i.isComment()){var s=this.getImplicitImportSpanWorker(i,t);if(s)return s}t+=i.fullWidth()}return null},t.prototype.getImplicitImportSpanWorker=function(t,n){var r=/^(\/\/\/\s*<implicit-import\s*)*\/>/gim,i=r.exec(t.fullText());return i?new e.TextSpan(n,t.fullWidth()):null},t.prototype.getTopLevelImportOrExportSpan=function(t){var n,r=0;for(var i=0,s=t.moduleElements.childCount();i<s;i++){var o=t.moduleElements.childAt(i);n=o.firstToken();if(n!==null&&n.tokenKind===47)return new e.TextSpan(r+n.leadingTriviaWidth(),n.width());if(o.kind()===133){var u=o;if(u.moduleReference.kind()===245)return new e.TextSpan(r+u.leadingTriviaWidth(),u.width())}r+=o.fullWidth()}return null},t.prototype.sourceUnit=function(){if(!this._sourceUnit){var t=(new Date).getTime(),n=this.syntaxTree();this._sourceUnit=e.SyntaxTreeToAstVisitor.visit(n,this.fileName,this._compiler.compilationSettings(),this.isOpen),e.astTranslationTime+=(new Date).getTime()-t,this.isOpen||(this._syntaxTree=null)}return this._sourceUnit},t.prototype.diagnostics=function(){return this._diagnostics===null&&(this.syntaxTree(),e.Debug.assert(this._diagnostics)),this._diagnostics},t.prototype.lineMap=function(){return this._lineMap===null&&(this.syntaxTree(),e.Debug.assert(this._lineMap)),this._lineMap},t.prototype.isExternalModule=function(){return this.externalModuleIndicatorSpan()!==null},t.prototype.externalModuleIndicatorSpan=function(){return this._externalModuleIndicatorSpan===undefined&&(this.syntaxTree(),e.Debug.assert(this._externalModuleIndicatorSpan!==undefined)),this._externalModuleIndicatorSpan},t.prototype.amdDependencies=function(){return this._amdDependencies===undefined&&(this.syntaxTree(),e.Debug.assert(this._amdDependencies!==undefined)),this._amdDependencies},t.prototype.syntaxTree=function(){var t=this._syntaxTree;if(!t){var n=(new Date).getTime();t=e.Parser.parse(this.fileName,e.SimpleText.fromScriptSnapshot(this._scriptSnapshot),e.isDTSFile(this.fileName),e.getParseOptions(this._compiler.compilationSettings())),e.syntaxTreeParseTime+=(new Date).getTime()-n;if(this.isOpen||!this._sourceUnit)this._syntaxTree=t}return this.cacheSyntaxTreeInfo(t),t},t.prototype.bloomFilter=function(){if(!this._bloomFilter){var t=e.createIntrinsicsObject(),n=function(n){if(e.ASTHelpers.isValidAstNode(n)&&n.kind()===11){var r=n.valueText();t[r]=!0}};e.getAstWalkerFactory().simpleWalk(this.sourceUnit(),n,null,t);var r=0;for(var i in t)t[i]&&r++;this._bloomFilter=new e.BloomFilter(r),this._bloomFilter.addKeys(t)}return this._bloomFilter},t.prototype.emitToOwnOutputFile=function(){return!this._compiler.compilationSettings().outFileOption()||this.isExternalModule()},t.prototype.update=function(n,r,i,s){var o=this._syntaxTree;if(s!==null&&e.Debug.shouldAssert(1)){var u=this._scriptSnapshot,a=n;e.Debug.assert(u.getLength()-s.span().length()+s.newLength()===a.getLength());if(e.Debug.shouldAssert(3)){var f=u.getText(0,s.span().start()),l=a.getText(0,s.span().start());e.Debug.assert(f===l);var c=u.getText(s.span().end(),u.getLength()),h=a.getText(s.newSpan().end(),a.getLength());e.Debug.assert(c===h)}}var p=e.SimpleText.fromScriptSnapshot(n),d=s===null||o===null?e.Parser.parse(this.fileName,p,e.isDTSFile(this.fileName),e.getParseOptions(this._compiler.compilationSettings())):e.Parser.incrementalParse(o,s,p);return new t(this._compiler,this._semanticInfoChain,this.fileName,this.referencedFiles,n,this.byteOrderMark,r,i,d,null)},t.create=function(e,n,r,i,s,o,u,a){return new t(e,n,r,a,i,s,o,u,null,null)},t.prototype.topLevelDecl=function(){return this._topLevelDecl===null&&(this._topLevelDecl=e.DeclarationCreator.create(this,this._semanticInfoChain,this._compiler.compilationSettings())),this._topLevelDecl},t.prototype._getDeclForAST=function(e){return this.topLevelDecl(),this._astDeclMap[e.syntaxID()]},t.prototype.getEnclosingDecl=function(e){if(e.kind()===120)return this._getDeclForAST(e);e=e.parent;var t=null;while(e){t=this._getDeclForAST(e);if(t)break;e=e.parent}return t._getEnclosingDeclFromParentDecl()},t.prototype._setDeclForAST=function(t,n){e.Debug.assert(n.fileName()===this.fileName),this._astDeclMap[t.syntaxID()]=n},t.prototype._getASTForDecl=function(e){return this._declASTMap[e.declID]},t.prototype._setASTForDecl=function(t,n){e.Debug.assert(t.fileName()===this.fileName),this._declASTMap[t.declID]=n},t}();e.Document=t})(r||(r={}));var r;(function(e){function t(e,t){return(e&t)!==0}e.hasFlag=t,function(e){e[e.SuccessfulComparison=0]="SuccessfulComparison",e[e.RequiredPropertyIsMissing=2]="RequiredPropertyIsMissing",e[e.IncompatibleSignatures=4]="IncompatibleSignatures",e[e.SourceSignatureHasTooManyParameters=3]="SourceSignatureHasTooManyParameters",e[e.IncompatibleReturnTypes=16]="IncompatibleReturnTypes",e[e.IncompatiblePropertyTypes=32]="IncompatiblePropertyTypes",e[e.IncompatibleParameterTypes=64]="IncompatibleParameterTypes",e[e.InconsistantPropertyAccesibility=128]="InconsistantPropertyAccesibility"}(e.TypeRelationshipFlags||(e.TypeRelationshipFlags={}));var n=e.TypeRelationshipFlags;(function(e){e[e.Unspecified=0]="Unspecified",e[e.Synchronous=1]="Synchronous",e[e.Asynchronous=2]="Asynchronous",e[e.SimpleCJS=3]="SimpleCJS"})(e.ModuleGenTarget||(e.ModuleGenTarget={}));var r=e.ModuleGenTarget})(r||(r={}));var r;(function(e){function r(){return new n}var t="__proto__",n=function(){function e(){this.prototype=undefined,this.toString=undefined,this.toLocaleString=undefined,this.valueOf=undefined,this.hasOwnProperty=undefined,this.propertyIsEnumerable=undefined,this.isPrototypeOf=undefined,this.constructor=undefined,this[t]=null,this[t]=undefined}return e}();e.createIntrinsicsObject=r;var s=function(){function e(){this.itemCount=0,this.table=r()}return e.prototype.getAllKeys=function(){var e=[];for(var t in this.table)this.table[t]!==undefined&&e.push(t);return e},e.prototype.add=function(e,t){return this.table[e]!==undefined?!1:(this.table[e]=t,this.itemCount++,!0)},e.prototype.addOrUpdate=function(e,t){return this.table[e]!==undefined?(this.table[e]=t,!1):(this.table[e]=t,this.itemCount++,!0)},e.prototype.map=function(e,t){for(var n in this.table){var r=this.table[n];r!==undefined&&e(n,this.table[n],t)}},e.prototype.every=function(e,t){for(var n in this.table){var r=this.table[n];if(r!==undefined&&!e(n,this.table[n],t))return!1}return!0},e.prototype.some=function(e,t){for(var n in this.table){var r=this.table[n];if(r!==undefined&&e(n,this.table[n],t))return!0}return!1},e.prototype.count=function(){return this.itemCount},e.prototype.lookup=function(e){var t=this.table[e];return t===undefined?null:t},e.prototype.remove=function(e){this.table[e]!==undefined&&(this.table[e]=undefined,this.itemCount--)},e}();e.StringHashTable=s;var o=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.getAllKeys=function(){var t=[];return e.prototype.map.call(this,function(e,n,r){n!==undefined&&t.push(e.substring(1))},null),t},t.prototype.add=function(t,n){return e.prototype.add.call(this,"#"+t,n)},t.prototype.addOrUpdate=function(t,n){return e.prototype.addOrUpdate.call(this,"#"+t,n)},t.prototype.map=function(t,n){return e.prototype.map.call(this,function(e,n,r){return t(e.substring(1),n,r)},n)},t.prototype.every=function(t,n){return e.prototype.every.call(this,function(e,n,r){return t(e.substring(1),n,r)},n)},t.prototype.some=function(t,n){return e.prototype.some.call(this,function(e,n,r){return t(e.substring(1),n,r)},n)},t.prototype.lookup=function(t){return e.prototype.lookup.call(this,"#"+t)},t}(s);e.IdentiferNameHashTable=o})(r||(r={}));var r;(function(e){(function(t){function n(t){return e.isDTSFile(t.fileName())||i(t.moduleElements)}function r(t){return e.hasModifier(t.modifiers,8)||i(t.moduleElements)}function i(e){for(var t=0,n=e.childCount();t<n;t++){var i=e.childAt(t);if(i.kind()===130){if(!r(i))return!1}else if(i.kind()!==128)return!1}return!0}function s(t){return e.hasModifier(t.modifiers,8)?!0:!1}function o(e){return e?e.start()===-1||e.end()===-1?!1:!0:!1}function u(t,n,r,i){typeof r=="undefined"&&(r=!0),typeof i=="undefined"&&(i=!1);var s=null,u=function(e,u){if(o(e)){var a=e.kind()===149&&e.width()===0;if(a)u.options.goChildren=!1;else{var f=i||e.kind()===11||e.kind()===212||e.kind()===121||e.kind()===224||e.kind()===225||e.kind()===213||n===t.end()+t.trailingTriviaWidth(),l=e.start(),c=e.end()+(r?e.trailingTriviaWidth():0)+(f?1:0);n>=l&&n<c&&(e.kind()!==1&&e.kind()!==2||e.end()>e.start())&&(s===null?s=e:e.start()>=s.start()&&e.end()+(r?e.trailingTriviaWidth():0)<=s.end()+(r?s.trailingTriviaWidth():0)&&(s.width()!==0||e.width()!==0)&&(s=e)),u.options.goChildren=l<=n&&n<=c}}};return e.getAstWalkerFactory().walk(t,u),s}function a(e){return e?e.firstOrDefault(function(e){return e.typeNames.nonSeparatorCount()>0&&e.kind()===230}):null}function f(e){return e?e.firstOrDefault(function(e){return e.typeNames.nonSeparatorCount()>0&&e.kind()===231}):null}function l(e){return e&&e.kind()===213||e&&e.kind()===216}function c(e){if(!e)return!1;var t=e;while(t&&t.parent){if(t.parent.kind()===212&&t.parent.name===t){t=t.parent;continue}break}if(t&&t.parent)if(t.parent.kind()===213||t.parent.kind()===216)return t===t.parent.expression;return!1}function h(e){if(e===null||e.parent===null)return!1;if(e.kind()!==11)return!1;switch(e.parent.kind()){case 131:return e.parent.identifier===e;case 128:return e.parent.identifier===e;case 132:return e.parent.identifier===e;case 130:return e.parent.name===e||e.parent.stringLiteral===e;case 225:return e.parent.propertyName===e;case 129:return e.parent.identifier===e;case 135:return e.parent.propertyName===e;case 242:return e.parent.identifier===e;case 238:return e.parent.identifier===e;case 240:return e.parent.propertyName===e;case 241:return e.parent.propertyName===e;case 243:return e.parent.propertyName===e;case 133:return e.parent.identifier===e}return!1}function p(e){return h(e)||T(e)}function d(e){var t=e;while(t){switch(t.kind()){case 232:if(t.parent&&t.parent.kind()===242)return t.parent;break;case 131:case 128:case 130:return null}t=t.parent}return null}function v(e){var t=e;while(t){switch(t.kind()){case 136:return t;case 131:case 128:case 130:return null}t=t.parent}return null}function m(e){return e&&e.parent&&e.kind()===11&&e.parent.kind()===129&&e.parent.identifier===e}function g(e){return e&&e.parent&&e.kind()===11&&e.parent.kind()===135&&e.parent.propertyName===e}function y(e){return e&&e.parent&&e.parent.kind()===212&&e.parent.name===e?!0:!1}function b(e){return e&&e.parent&&e.parent.kind()===121&&e.parent.right===e?!0:!1}function w(e){return{length:1,lastParameterIsRest:function(){return!1},ast:e,astAt:function(t){return e},identifierAt:function(t){return e},typeAt:function(e){return null},initializerAt:function(e){return null},isOptionalAt:function(e){return!1}}}function E(e){return{length:1,lastParameterIsRest:function(){return e.dotDotDotToken!==null},ast:e,astAt:function(t){return e},identifierAt:function(t){return e.identifier},typeAt:function(t){return L(e)},initializerAt:function(t){return e.equalsValueClause},isOptionalAt:function(t){return S(e)}}}function S(e){return e.questionToken!==null||e.equalsValueClause!==null}function x(t){return{length:t.parameters.nonSeparatorCount(),lastParameterIsRest:function(){return e.lastParameterIsRest(t)},ast:t.parameters,astAt:function(e){return t.parameters.nonSeparatorAt(e)},identifierAt:function(e){return t.parameters.nonSeparatorAt(e).identifier},typeAt:function(e){return L(t.parameters.nonSeparatorAt(e))},initializerAt:function(e){return t.parameters.nonSeparatorAt(e).equalsValueClause},isOptionalAt:function(e){return S(t.parameters.nonSeparatorAt(e))}}}function T(e){switch(e.kind()){case 225:return A(e)!==null;case 133:case 131:case 128:case 242:case 219:case 218:case 144:case 129:case 130:case 124:case 122:case 238:case 137:case 135:case 139:case 140:case 136:case 138:case 132:case 243:case 240:case 241:case 222:case 142:case 143:case 145:case 141:return!0;default:return!1}}function N(t){if(T(t)){var n=t.kind()===225?A(t).preComments():t.preComments();if(n&&n.length>0){var r=n.length,i=new Array;for(var s=r-1;s>=0;s--){if(C(n[s])){i.push(n[s]);continue}break}return i.reverse()}}return e.sentinelEmptyArray}function C(e){if(e.kind()===6){var t=e.fullText();return t.charAt(2)==="*"&&t.charAt(3)!=="/"}return!1}function k(e){if(e)switch(e.kind()){case 137:return k(e.callSignature);case 129:return k(e.callSignature);case 218:return k(e.callSignature);case 143:return k(e.callSignature);case 135:return k(e.callSignature);case 241:return k(e.callSignature);case 222:return k(e.callSignature);case 145:return k(e.callSignature);case 125:return e.parameterList;case 123:return e.parameterList;case 142:return e.parameterList;case 139:return e.parameterList;case 140:return e.parameterList}return null}function L(e){if(e)switch(e.kind()){case 129:return L(e.callSignature);case 218:return L(e.callSignature);case 143:return L(e.callSignature);case 135:return L(e.callSignature);case 241:return L(e.callSignature);case 222:return L(e.callSignature);case 145:return L(e.callSignature);case 142:return L(e.typeAnnotation);case 144:return L(e.typeAnnotation);case 141:return L(e.typeAnnotation);case 139:return L(e.typeAnnotation);case 242:return L(e.typeAnnotation);case 136:return L(e.variableDeclarator);case 225:return L(e.typeAnnotation);case 236:return L(e.typeAnnotation);case 125:return e.type;case 123:return e.type;case 244:return e.type}return null}function A(e){return e&&e.parent&&e.parent.parent&&e.parent.parent.parent&&e.parent.kind()===2&&e.parent.parent.kind()===224&&e.parent.parent.parent.kind()===148?e.parent.parent.parent:null}function O(t){var n=A(t);return n?n.modifiers:e.sentinelEmptyArray}function M(t){if(t)switch(t.kind()){case 164:case 165:return t=t.operand,t.kind()===13&&e.IntegerUtilities.isInteger(t.text());case 13:var n=t.text();return e.IntegerUtilities.isInteger(n)||e.IntegerUtilities.isHexInteger(n)}return!1}function _(e){while(e){if(e.kind()===130)return e;e=e.parent}return null}function D(e,t){if(e){if(e.stringLiteral)return t===e.stringLiteral;var n=B(e.name),r=n.indexOf(t);return r===n.length-1}return!1}function P(e,t){if(e){if(e.stringLiteral)return e.stringLiteral===t;var n=B(e.name),r=n.indexOf(t);return r>=0}return!1}function H(t){if(t.kind()===11)return t.text();e.Debug.assert(t.kind()==121);var n=t;return H(n.left)+"."+H(n.right)}function B(e,t){return t=t||[],e.kind()===121?(B(e.left,t),t.push(e.right)):t.push(e),t}t.scriptIsElided=n,t.moduleIsElided=r,t.enumIsElided=s,t.isValidAstNode=o,t.getAstAtPosition=u,t.getExtendsHeritageClause=a,t.getImplementsHeritageClause=f,t.isCallExpression=l,t.isCallExpressionTarget=c,t.isDeclarationASTOrDeclarationNameAST=p,t.getEnclosingParameterForInitializer=d,t.getEnclosingMemberVariableDeclaration=v,t.isNameOfFunction=m,t.isNameOfMemberFunction=g,t.isNameOfMemberAccessExpression=y,t.isRightSideOfQualifiedName=b,t.parametersFromIdentifier=w,t.parametersFromParameter=E,t.parametersFromParameterList=x,t.isDeclarationAST=T,t.docComments=N,t.getParameterList=k,t.getType=L,t.getVariableDeclaratorModifiers=O,t.isIntegerLiteralAST=M,t.getEnclosingModuleDeclaration=_,t.isLastNameOfModule=D,t.isAnyNameOfModule=P,t.getNameOfIdenfierOrQualifiedName=H,t.getModuleNames=B})(e.ASTHelpers||(e.ASTHelpers={}));var t=e.ASTHelpers})(r||(r={}));var r;(function(e){function t(e,t){for(var n=0,r=e.childCount();n<r;n++)t.walk(e.childAt(n))}function n(e,t){t.walk(e.expression)}function r(e,t){t.walk(e.operand)}function i(e,t){t.walk(e.operand)}function s(e,t){t.walk(e.expression)}function o(e,t){t.walk(e.typeArguments)}function u(e,t){t.walk(e.expression)}function a(e,t){t.walk(e.expression)}function f(e,t){t.walk(e.typeArgumentList),t.walk(e.arguments)}function l(e,t){t.walk(e.expressions)}function c(e,t){t.walk(e.propertyName),t.walk(e.expression)}function h(e,t){t.walk(e.propertyName),t.walk(e.callSignature),t.walk(e.block)}function p(e,t){t.walk(e.propertyName),t.walk(e.parameterList),t.walk(e.typeAnnotation),t.walk(e.block)}function d(e,t){for(var n=0,r=e.nonSeparatorCount();n<r;n++)t.walk(e.nonSeparatorAt(n))}function v(e,t){t.walk(e.propertyName),t.walk(e.parameterList),t.walk(e.block)}function m(e,t){t.walk(e.propertyAssignments)}function g(e,t){t.walk(e.type),t.walk(e.expression)}function y(e,t){t.walk(e.expression)}function b(e,t){t.walk(e.expression),t.walk(e.argumentExpression)}function w(e,t){t.walk(e.expression),t.walk(e.name)}function E(e,t){t.walk(e.left),t.walk(e.right)}function S(e,t){t.walk(e.left),t.walk(e.right)}function x(e,t){t.walk(e.value)}function T(e,t){t.walk(e.identifier),t.walk(e.constraint)}function N(e,t){t.walk(e.typeParameters)}function C(e,t){t.walk(e.name),t.walk(e.typeArgumentList)}function k(e,t){t.walk(e.type)}function L(e,t){t.walk(e.name)}function A(e,t){t.walk(e.expression),t.walk(e.argumentList)}function O(e,t){t.walk(e.expression),t.walk(e.argumentList)}function M(e,t){t.walk(e.condition),t.walk(e.whenTrue),t.walk(e.whenFalse)}function _(e,t){t.walk(e.identifier),t.walk(e.callSignature),t.walk(e.block)}function D(e,t){t.walk(e.typeParameterList),t.walk(e.parameterList),t.walk(e.type)}function P(e,t){t.walk(e.callSignature),t.walk(e.block),t.walk(e.expression)}function H(e,t){t.walk(e.identifier),t.walk(e.block),t.walk(e.expression)}function B(e,t){t.walk(e.propertyName),t.walk(e.callSignature),t.walk(e.block)}function j(e,t){t.walk(e.identifier),t.walk(e.callSignature),t.walk(e.block)}function F(e,t){t.walk(e.indexSignature)}function I(e,t){t.walk(e.parameter),t.walk(e.typeAnnotation)}function q(e,t){t.walk(e.typeParameterList),t.walk(e.parameterList),t.walk(e.typeAnnotation)}function R(e,t){t.walk(e.type)}function U(e,t){t.walk(e.callSignature),t.walk(e.block)}function z(e,t){t.walk(e.typeParameterList),t.walk(e.parameterList),t.walk(e.type)}function W(e,t){t.walk(e.callSignature)}function X(e,t){t.walk(e.identifier),t.walk(e.typeAnnotation),t.walk(e.equalsValueClause)}function V(e,t){t.walk(e.parameters)}function $(e,t){t.walk(e.propertyName),t.walk(e.typeAnnotation)}function J(e,t){t.walk(e.propertyName),t.walk(e.typeAnnotation),t.walk(e.equalsValueClause)}function K(e,t){t.walk(e.variableDeclarator)}function Q(e,t){t.walk(e.propertyName),t.walk(e.callSignature)}function G(e,t){t.walk(e.expression)}function Y(e,t){t.walk(e.variableDeclaration),t.walk(e.initializer),t.walk(e.condition),t.walk(e.incrementor),t.walk(e.statement)}function Z(e,t){t.walk(e.variableDeclaration),t.walk(e.left),t.walk(e.expression),t.walk(e.statement)}function et(e,t){t.walk(e.condition),t.walk(e.statement),t.walk(e.elseClause)}function tt(e,t){t.walk(e.statement)}function nt(e,t){t.walk(e.condition),t.walk(e.statement)}function rt(e,t){t.walk(e.condition),t.walk(e.statement)}function it(e,t){t.walk(e.statements)}function st(e,t){t.walk(e.declarators)}function ot(e,t){t.walk(e.expression),t.walk(e.statements)}function ut(e,t){t.walk(e.statements)}function at(e,t){t.walk(e.expression),t.walk(e.switchClauses)}function ft(e,t){t.walk(e.block),t.walk(e.catchClause),t.walk(e.finallyClause)}function lt(e,t){t.walk(e.identifier),t.walk(e.typeAnnotation),t.walk(e.block)}function ct(e,t){t.walk(e.stringLiteral)}function ht(e,t){t.walk(e.block)}function pt(e,t){t.walk(e.identifier),t.walk(e.typeParameterList),t.walk(e.heritageClauses),t.walk(e.classElements)}function dt(e,t){t.walk(e.moduleElements)}function vt(e,t){t.walk(e.typeNames)}function mt(e,t){t.walk(e.identifier),t.walk(e.typeParameterList),t.walk(e.heritageClauses),t.walk(e.body)}function gt(e,t){t.walk(e.typeMembers)}function yt(e,t){t.walk(e.type)}function bt(e,t){t.walk(e.name),t.walk(e.stringLiteral),t.walk(e.moduleElements)}function wt(e,t){t.walk(e.moduleName)}function Et(e,t){t.walk(e.identifier),t.walk(e.enumElements)}function St(e,t){t.walk(e.propertyName),t.walk(e.equalsValueClause)}function xt(e,t){t.walk(e.identifier),t.walk(e.moduleReference)}function Tt(e,t){t.walk(e.identifier)}function Nt(e,t){t.walk(e.condition),t.walk(e.statement)}function Ct(e,t){t.walk(e.expression)}function kt(e,t){t.walk(e.identifier),t.walk(e.statement)}function Lt(e,t){t.walk(e.declaration)}function It(){return Ft}var At=new Array(247);for(var Ot=9,Mt=119;Ot<=Mt;Ot++)At[Ot]=null;for(var Ot=4,Mt=8;Ot<=Mt;Ot++)At[Ot]=null;At[175]=S,At[208]=S,At[180]=S,At[60]=null,At[226]=f,At[214]=l,At[124]=yt,At[219]=H,At[218]=P,At[174]=S,At[191]=S,At[190]=S,At[166]=r,At[189]=S,At[146]=it,At[61]=null,At[152]=null,At[142]=q,At[233]=ot,At[220]=g,At[236]=lt,At[131]=pt,At[173]=S,At[186]=M,At[239]=R,At[137]=U,At[143]=W,At[153]=null,At[125]=z,At[162]=null,At[234]=ut,At[170]=s,At[178]=S,At[206]=S,At[161]=rt,At[221]=b,At[235]=tt,At[156]=null,At[132]=Et,At[243]=St,At[194]=S,At[232]=x,At[192]=S,At[181]=S,At[134]=Tt,At[149]=Ct,At[230]=vt,At[245]=ct,At[24]=null,At[237]=ht,At[155]=Z,At[154]=Y,At[129]=j,At[222]=_,At[241]=h,At[123]=D,At[126]=C,At[139]=p,At[197]=S,At[199]=S,At[147]=et,At[231]=vt,At[133]=xt,At[138]=F,At[144]=I,At[201]=S,At[200]=S,At[128]=mt,At[213]=A,At[160]=kt,At[183]=S,At[202]=S,At[196]=S,At[198]=S,At[1]=t,At[188]=S,At[167]=r,At[187]=S,At[212]=w,At[135]=B,At[136]=K,At[145]=Q,At[130]=bt,At[246]=wt,At[179]=S,At[207]=S,At[177]=S,At[205]=S,At[11]=null,At[165]=r,At[0]=null,At[195]=S,At[193]=S,At[32]=null,At[67]=null,At[13]=null,At[216]=O,At[215]=m,At[122]=gt,At[223]=null,At[182]=S,At[242]=X,At[227]=V,At[217]=y,At[164]=r,At[211]=i,At[210]=i,At[169]=r,At[168]=r,At[141]=$,At[121]=E,At[12]=null,At[150]=G,At[120]=dt,At[2]=d,At[140]=v,At[184]=S,At[203]=S,At[240]=c,At[14]=null,At[69]=null,At[176]=S,At[209]=S,At[50]=null,At[151]=at,At[35]=null,At[157]=n,At[3]=null,At[37]=null,At[159]=ft,At[244]=k,At[228]=o,At[171]=u,At[238]=T,At[229]=N,At[127]=L,At[185]=S,At[204]=S,At[224]=st,At[225]=J,At[148]=Lt,At[172]=a,At[41]=null,At[158]=nt,At[163]=Nt;for(var _t in e.SyntaxKind)e.SyntaxKind.hasOwnProperty(_t)&&e.StringUtilities.isString(e.SyntaxKind[_t])&&e.Debug.assert(At[_t]!==undefined,"Fix initWalkers: "+e.SyntaxKind[_t]);var Dt=function(){function e(){this.goChildren=!0,this.stopWalking=!1}return e}();e.AstWalkOptions=Dt;var Pt=function(){function e(e,t){this.pre=e,this.state=t,this.options=new Dt}return e.prototype.walk=function(e){if(!e)return;this.pre(e,this.state);var t=At[e.kind()];t&&t(e,this)},e}(),Ht=function(){function e(e,t,n){this.pre=e,this.post=t,this.state=n,this.options=new Dt}return e.prototype.walk=function(e){if(!e)return;this.pre(e,this.state);var t=At[e.kind()];t&&t(e,this),this.post(e,this.state)},e}(),Bt=function(){function e(e,t,n){this.pre=e,this.post=t,this.state=n,this.options=new Dt}return e.prototype.walk=function(e){if(!e)return;if(this.options.stopWalking)return;this.pre(e,this);if(this.options.stopWalking)return;if(this.options.goChildren){var t=At[e.kind()];t&&t(e,this)}else this.options.goChildren=!0;this.post&&this.post(e,this)},e}(),jt=function(){function e(){}return e.prototype.walk=function(e,t,n,r){(new Bt(t,n,r)).walk(e)},e.prototype.simpleWalk=function(e,t,n,r){n?(new Ht(t,n,r)).walk(e):(new Pt(t,r)).walk(e)},e}();e.AstWalkerFactory=jt;var Ft=new jt;e.getAstWalkerFactory=It})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e.encode=function(t){if(t<64)return e.encodedValues.charAt(t);throw TypeError(t+": not a 64 based value")},e.decodeChar=function(t){if(t.length===1)return e.encodedValues.indexOf(t);throw TypeError('"'+t+'" must have length 1')},e.encodedValues="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e}(),n=function(){function n(){}return n.encode=function(e){e<0?e=(-e<<1)+1:e<<=1;var n="";do{var r=e&31;e>>=5,e>0&&(r|=32),n+=t.encode(r)}while(e>0);return n},n.decode=function(n){var r=0,i=!1,s=0;for(var o=0;o<n.length;o++){var u=t.decodeChar(n[o]);o===0?((u&1)===1&&(i=!0),r=u>>1&15):r|=(u&31)<<s,s+=o===0?4:5;if((u&32)!==32)return{value:i?-r:r,rest:n.substr(o+1)}}throw new Error(e.getDiagnosticMessage(e.DiagnosticCode.Base64_value_0_finished_with_a_continuation_bit,[n]))},n}();e.Base64VLQFormat=n})(r||(r={}));var r;(function(e){var t=function(){function e(){}return e}();e.SourceMapPosition=t;var n=function(){function e(){this.start=new t,this.end=new t,this.nameIndex=-1,this.childMappings=[]}return e}();e.SourceMapping=n;var r=function(){function t(t,n,r,i,s,o,u){this.emittedFile=t,this.emittedLine=n,this.emittedColumn=r,this.sourceFile=i,this.sourceLine=s,this.sourceColumn=o,this.sourceName=u,e.Debug.assert(isFinite(n)),e.Debug.assert(isFinite(r)),e.Debug.assert(isFinite(o)),e.Debug.assert(isFinite(s))}return t}();e.SourceMapEntry=r;var i=function(){function t(e,t,n,r,i,s){this.jsFile=e,this.sourceMapOut=t,this.names=[],this.mappingLevel=[],this.tsFilePaths=[],this.allSourceMappings=[],this.sourceMapEntries=[],this.setSourceMapOptions(n,r,i,s),this.setNewSourceFile(n,i)}return t.prototype.getOutputFile=function(){var e=this.sourceMapOut.getOutputFile();return e.sourceMapEntries=this.sourceMapEntries,e},t.prototype.increaseMappingLevel=function(e){this.mappingLevel.push(e)},t.prototype.decreaseMappingLevel=function(t){e.Debug.assert(this.mappingLevel.length>0,"Mapping level should never be less than 0. This suggests a missing start call.");var n=this.mappingLevel.pop(),r=n.kind?e.SyntaxKind[n.kind()]:[n.start(),n.end()],i=t.kind?e.SyntaxKind[t.kind()]:[t.start(),t.end()];e.Debug.assert(t===n,"Provided ast is not the expected AST, Expected: "+r+" Given: "+i)},t.prototype.setNewSourceFile=function(e,t){var n=[];this.allSourceMappings.push(n),this.currentMappings=[n],this.currentNameIndex=[],this.setNewSourceFilePath(e,t)},t.prototype.setSourceMapOptions=function(n,r,i,s){var o=e.getPrettyName(r,!1,!0),u=o+t.MapFileExtension;this.jsFileName=o,i.sourceMapRootDirectory()?(this.sourceMapDirectory=i.sourceMapRootDirectory(),n.emitToOwnOutputFile()&&(this.sourceMapDirectory=this.sourceMapDirectory+e.switchToForwardSlashes(e.getRootFilePath(n.fileName).replace(i.commonDirectoryPath(),""))),e.isRelative(this.sourceMapDirectory)?(this.sourceMapDirectory=i.commonDirectoryPath()+this.sourceMapDirectory,this.sourceMapDirectory=e.convertToDirectoryPath(e.switchToForwardSlashes(s(this.sourceMapDirectory))),this.sourceMapPath=e.getRelativePathToFixedPath(e.getRootFilePath(r),this.sourceMapDirectory+u)):this.sourceMapPath=this.sourceMapDirectory+u):(this.sourceMapPath=u,this.sourceMapDirectory=e.getRootFilePath(r)),this.sourceRoot=i.sourceRootDirectory()},t.prototype.setNewSourceFilePath=function(t,n){var r=e.switchToForwardSlashes(t.fileName);n.sourceRootDirectory()?r=e.getRelativePathToFixedPath(n.commonDirectoryPath(),r):r=e.getRelativePathToFixedPath(this.sourceMapDirectory,r),this.tsFilePaths.push(r)},t.prototype.emitSourceMapping=function(){var t=this;e.Debug.assert(this.mappingLevel.length===0,"Mapping level is not 0. This suggest a missing end call. Value: "+this.mappingLevel.map(function(t){return["Node of type",e.SyntaxKind[t.kind()],"at",t.start(),"to",t.end()].join(" ")}).join(", ")),this.jsFile.WriteLine("//# sourceMappingURL="+this.sourceMapPath);var n="",i=0,s=0,o=0,u=0,a=0,f=0,l=!1,c=null;for(var h=0;h<this.tsFilePaths.length;h++){var p=function(p,d){if(c!==null&&c.emittedColumn===p.emittedColumn&&c.emittedLine===p.emittedLine)return;if(s!==p.emittedLine){while(s<p.emittedLine)i=0,n+=";",s++;l=!1}else l&&(n+=",");t.sourceMapEntries.push(new r(t.jsFileName,p.emittedLine+1,p.emittedColumn+1,t.tsFilePaths[h],p.sourceLine,p.sourceColumn+1,d>=0?t.names[d]:undefined)),n+=e.Base64VLQFormat.encode(p.emittedColumn-i),i=p.emittedColumn,n+=e.Base64VLQFormat.encode(h-a),a=h,n+=e.Base64VLQFormat.encode(p.sourceLine-1-u),u=p.sourceLine-1,n+=e.Base64VLQFormat.encode(p.sourceColumn-o),o=p.sourceColumn,d>=0&&(n+=e.Base64VLQFormat.encode(d-f),f=d),l=!0,c=p},d=function(e){for(var t=0;t<e.length;t++){var n=e[t];p(n.start,n.nameIndex),d(n.childMappings),p(n.end,n.nameIndex)}};d(this.allSourceMappings[h])}this.sourceMapOut.Write(JSON.stringify({version:3,file:this.jsFileName,sourceRoot:this.sourceRoot,sources:this.tsFilePaths,names:this.names,mappings:n})),this.sourceMapOut.Close()},t.MapFileExtension=".map",t}();e.SourceMapper=i})(r||(r={}));var r;(function(e){function s(e){var t=e.parameters;return t.nonSeparatorCount()>0&&t.nonSeparatorAt(t.nonSeparatorCount()-1).dotDotDotToken!==null}function u(e){return e.classElements.lastOrDefault(function(e){return e.kind()===137})}function a(e){return e.kind()===6?e.fullText().split("\n").map(function(e){return e.trim()}):[e.fullText().trim()]}(function(e){e[e.Prog=0]="Prog",e[e.Module=1]="Module",e[e.DynamicModule=2]="DynamicModule",e[e.Class=3]="Class",e[e.Constructor=4]="Constructor",e[e.Function=5]="Function",e[e.Args=6]="Args",e[e.Interface=7]="Interface"})(e.EmitContainer||(e.EmitContainer={}));var t=e.EmitContainer,n=function(){function e(){this.column=0,this.line=0,this.container=0}return e}();e.EmitState=n;var r=function(){function t(t,n){this.resolvePath=n,this._diagnostic=null,this._settings=null,this._commonDirectoryPath="",this._sharedOutputFile="",this._sourceRootDirectory="",this._sourceMapRootDirectory="",this._outputDirectory="";var r=t.compilationSettings();this._settings=r;if(r.moduleGenTarget()===0){var i=t.fileNames();for(var s=0,o=i.length;s<o;s++){var u=t.getDocument(i[s]);if(!u.isDeclareFile()&&u.isExternalModule()){var a=u.externalModuleIndicatorSpan();this._diagnostic=new e.Diagnostic(u.fileName,u.lineMap(),a.start(),a.length(),e.DiagnosticCode.Cannot_compile_external_modules_unless_the_module_flag_is_provided);return}}}if(!r.mapSourceFiles()){if(r.mapRoot()){if(r.sourceRoot()){this._diagnostic=new e.Diagnostic(null,null,0,0,e.DiagnosticCode.Options_mapRoot_and_sourceRoot_cannot_be_specified_without_specifying_sourcemap_option,null);return}this._diagnostic=new e.Diagnostic(null,null,0,0,e.DiagnosticCode.Option_mapRoot_cannot_be_specified_without_specifying_sourcemap_option,null);return}if(r.sourceRoot()){this._diagnostic=new e.Diagnostic(null,null,0,0,e.DiagnosticCode.Option_sourceRoot_cannot_be_specified_without_specifying_sourcemap_option,null);return}}this._sourceMapRootDirectory=e.convertToDirectoryPath(e.switchToForwardSlashes(r.mapRoot())),this._sourceRootDirectory=e.convertToDirectoryPath(e.switchToForwardSlashes(r.sourceRoot()));if(r.outFileOption()||r.outDirOption()||r.mapRoot()||r.sourceRoot())r.outFileOption()&&(this._sharedOutputFile=e.switchToForwardSlashes(n(r.outFileOption()))),r.outDirOption()&&(this._outputDirectory=e.convertToDirectoryPath(e.switchToForwardSlashes(n(r.outDirOption())))),(this._outputDirectory||this._sourceMapRootDirectory||this.sourceRootDirectory)&&this.determineCommonDirectoryPath(t)}return t.prototype.diagnostic=function(){return this._diagnostic},t.prototype.commonDirectoryPath=function(){return this._commonDirectoryPath},t.prototype.sharedOutputFile=function(){return this._sharedOutputFile},t.prototype.sourceRootDirectory=function(){return this._sourceRootDirectory},t.prototype.sourceMapRootDirectory=function(){return this._sourceMapRootDirectory},t.prototype.outputDirectory=function(){return this._outputDirectory},t.prototype.compilationSettings=function(){return this._settings},t.prototype.determineCommonDirectoryPath=function(t){var n=[],r=-1,i=t.fileNames();for(var s=0,o=i.length;s<o;s++){var u=i[s],a=t.getDocument(i[s]),f=a.sourceUnit();if(!a.isDeclareFile()){var l=e.filePathComponents(u);if(r===-1)n=l,r=n.length;else{var c=!1;for(var h=0;h<r&&h<l.length;h++)if(n[h]!==l[h]){r=h,c=!0;if(h===0){var p=e.ArrayUtilities.any(i,function(e){return a=t.getDocument(e),!a.isDeclareFile()&&a.isExternalModule()});if(this._outputDirectory||this._sourceRootDirectory||this._sourceMapRootDirectory&&(!this._sharedOutputFile||p)){this._diagnostic=new e.Diagnostic(null,null,0,0,e.DiagnosticCode.Cannot_find_the_common_subdirectory_path_for_the_input_files,null);return}return}break}!c&&l.length<r&&(r=l.length)}}}this._commonDirectoryPath=n.slice(0,r).join("/")+"/"},t}();e.EmitOptions=r;var i=function(){function e(){this.indentAmt=0}return e.prototype.increaseIndent=function(){this.indentAmt+=e.indentStep},e.prototype.decreaseIndent=function(){this.indentAmt-=e.indentStep},e.prototype.getIndent=function(){var t=e.indentStrings[this.indentAmt];if(t===undefined){t="";for(var n=0;n<this.indentAmt;n+=e.indentStep)t+=e.indentStepString;e.indentStrings[this.indentAmt]=t}return t},e.indentStep=4,e.indentStepString="    ",e.indentStrings=[],e}();e.Indenter=i,e.lastParameterIsRest=s;var o=function(){function t(e,t,r,s){this.emittingFileName=e,this.outfile=t,this.emitOptions=r,this.semanticInfoChain=s,this.globalThisCapturePrologueEmitted=!1,this.extendsPrologueEmitted=!1,this.thisClassNode=null,this.inArrowFunction=!1,this.moduleName="",this.emitState=new n,this.indenter=new i,this.sourceMapper=null,this.captureThisStmtString="var _this = this;",this.declStack=[],this.exportAssignment=null,this.inWithBlock=!1,this.document=null,this.detachedCommentsElement=null}return t.prototype.pushDecl=function(e){e&&(this.declStack[this.declStack.length]=e)},t.prototype.popDecl=function(e){e&&this.declStack.length--},t.prototype.getEnclosingDecl=function(){var e=this.declStack.length,t=e>0?this.declStack[e-1]:null;return t},t.prototype.setExportAssignment=function(e){this.exportAssignment=e},t.prototype.getExportAssignment=function(){return this.exportAssignment},t.prototype.setDocument=function(e){this.document=e},t.prototype.shouldEmitImportDeclaration=function(t){var n=t.moduleReference.kind()===245,r=this.semanticInfoChain.getDeclForAST(t),i=e.hasFlag(r.flags,1),s=this.emitOptions.compilationSettings().moduleGenTarget()===2;if(n&&!i&&s)return!1;var o=r.getSymbol();if(o.isUsedAsValue())return!0;if(t.moduleReference.kind()!==245){var u=i||o.typeUsedExternally()||o.isUsedInExportedAlias();!u&&!this.document.isExternalModule()&&(u=e.hasFlag(r.getParentDecl().kind,33));if(u){if(o.getExportAssignedValueSymbol())return!0;var a=o.getExportAssignedContainerSymbol();if(a&&a.getInstanceSymbol())return!0}}return!1},t.prototype.emitImportDeclaration=function(t){var n=t.moduleReference.kind()===245,r=this.semanticInfoChain.getDeclForAST(t),i=e.hasFlag(r.flags,1),s=this.emitOptions.compilationSettings().moduleGenTarget()===2;this.emitComments(t,!0);var o=r.getSymbol(),u=o.getContainer(),a=u?u.kind:0,f=u?u.getAssociatedContainerType():null,l=f?f.kind:0,c=!1,h=!1,p;if(i&&(a===4||a===32||l===4||l===32)){if(o.getExportAssignedTypeSymbol()||o.getExportAssignedContainerSymbol())c=!0;else{var d=o.getExportAssignedValueSymbol();!d||d.kind!==65536&&d.kind!==16384?h=!0:c=!0}this.emitState.container===2?p="exports.":p=this.moduleName+"."}if(s&&n)c=!0;else{this.recordSourceMappingStart(t),h?this.writeToOutput(p):this.writeToOutput("var "),this.writeToOutput(t.identifier.text()+" = ");var v=t.moduleReference;n?this.writeToOutput(["r","e","q","u","i","r","e"].join("")+"("+v.stringLiteral.text()+")"):this.emitJavascript(v.moduleName,!1),this.recordSourceMappingEnd(t),this.writeToOutput(";"),c&&(this.writeLineToOutput(""),this.emitIndent())}c&&(this.writeToOutputWithSourceMapRecord(p+t.identifier.text()+" = "+t.identifier.text(),t),this.writeToOutput(";")),this.emitComments(t,!1)},t.prototype.createSourceMapper=function(t,n,r,i,s){this.sourceMapper=new e.SourceMapper(r,i,t,n,this.emitOptions,s)},t.prototype.setSourceMapperNewSourceFile=function(e){this.sourceMapper.setNewSourceFile(e,this.emitOptions)},t.prototype.updateLineAndColumn=function(t){var n=e.TextUtilities.parseLineStarts(t);n.length>1?(this.emitState.line+=n.length-1,this.emitState.column=t.length-n[n.length-1]):this.emitState.column+=t.length},t.prototype.writeToOutputWithSourceMapRecord=function(e,t){this.recordSourceMappingStart(t),this.writeToOutput(e),this.recordSourceMappingEnd(t)},t.prototype.writeToOutput=function(e){this.outfile.Write(e),this.updateLineAndColumn(e)},t.prototype.writeLineToOutput=function(e,t){typeof t=="undefined"&&(t=!1);if(!t&&e===""&&this.emitState.column===0)return;this.outfile.WriteLine(e),this.updateLineAndColumn(e),this.emitState.column=0,this.emitState.line++},t.prototype.writeCaptureThisStatement=function(e){this.emitIndent(),this.writeToOutputWithSourceMapRecord(this.captureThisStmtString,e),this.writeLineToOutput("")},t.prototype.setContainer=function(e){var t=this.emitState.container;return this.emitState.container=e,t},t.prototype.getIndentString=function(){return this.indenter.getIndent()},t.prototype.emitIndent=function(){this.writeToOutput(this.getIndentString())},t.prototype.emitComment=function(e,t,n){if(this.emitOptions.compilationSettings().removeComments())return;var r=a(e),i=this.emitState.column;i===0?this.emitIndent():t&&n&&this.writeToOutput(" ");if(e.kind()===6){this.recordSourceMappingStart(e),this.writeToOutput(r[0]);if(!(r.length>1||e.endsLine)){this.recordSourceMappingEnd(e),this.writeToOutput(" ");return}for(var s=1;s<r.length;s++)this.writeLineToOutput(""),this.emitIndent(),this.writeToOutput(r[s]);this.recordSourceMappingEnd(e),this.writeLineToOutput("")}else this.recordSourceMappingStart(e),this.writeToOutput(r[0]),this.recordSourceMappingEnd(e),this.writeLineToOutput("");!t&&i!==0&&this.emitIndent()},t.prototype.emitComments=function(t,n,r){var i=this;typeof r=="undefined"&&(r=!1);if(t&&t.kind()!==146)if(t.parent.kind()===219||t.parent.kind()===218)return;if(n){var s=t.preComments();if(s&&t===this.detachedCommentsElement){var o=this.getDetachedComments(t);s=s.slice(o.length),this.detachedCommentsElement=null}s&&r&&(s=e.ArrayUtilities.where(s,function(e){return i.isPinnedOrTripleSlash(e)})),this.emitCommentsArray(s,!1)}else this.emitCommentsArray(t.postComments(),!0)},t.prototype.isPinnedOrTripleSlash=function(t){var n=t.fullText();return n.match(e.tripleSlashReferenceRegExp)?!0:n.indexOf("/*!")===0},t.prototype.emitCommentsArray=function(e,t){if(!this.emitOptions.compilationSettings().removeComments()&&e)for(var n=0,r=e.length;n<r;n++)this.emitComment(e[n],t,n===0)},t.prototype.emitObjectLiteralExpression=function(e){this.recordSourceMappingStart(e),this.writeToOutput("{"),this.emitCommaSeparatedList(e,e.propertyAssignments," ",!0),this.writeToOutput("}"),this.recordSourceMappingEnd(e)},t.prototype.emitArrayLiteralExpression=function(e){this.recordSourceMappingStart(e),this.writeToOutput("["),this.emitCommaSeparatedList(e,e.expressions,"",!0),this.writeToOutput("]"),this.recordSourceMappingEnd(e)},t.prototype.emitObjectCreationExpression=function(e){this.recordSourceMappingStart(e),this.writeToOutput("new ");var t=e.expression;this.emit(t),e.argumentList&&(this.recordSourceMappingStart(e.argumentList),this.writeToOutput("("),this.emitCommaSeparatedList(e.argumentList,e.argumentList.arguments,"",!1),this.writeToOutputWithSourceMapRecord(")",e.argumentList.closeParenToken),this.recordSourceMappingEnd(e.argumentList)),this.recordSourceMappingEnd(e)},t.prototype.getConstantDecl=function(e){var t=this.semanticInfoChain.getSymbolForAST(e);if(t&&t.kind===67108864){var n=t.getDeclarations();if(n.length===1){var r=n[0];if(r.kind===67108864)return r}}return null},t.prototype.tryEmitConstant=function(e){var t=e.name,n=this.getConstantDecl(e);if(n){var r=n.constantValue;if(r!==null){this.recordSourceMappingStart(e),this.writeToOutput(r.toString());var i=" /* ";return i+=t.text(),i+=" */",this.writeToOutput(i),this.recordSourceMappingEnd(e),!0}}return!1},t.prototype.emitInvocationExpression=function(e){this.recordSourceMappingStart(e);var t=e.expression,n=e.argumentList.arguments;t.kind()===212&&t.expression.kind()===50?(this.emit(t),this.writeToOutput(".call"),this.recordSourceMappingStart(n),this.writeToOutput("("),this.emitThis(),n&&n.nonSeparatorCount()>0&&(this.writeToOutput(", "),this.emitCommaSeparatedList(e.argumentList,n,"",!1))):(e.expression.kind()===50&&this.emitState.container===4?this.writeToOutput("_super.call"):this.emitJavascript(t,!1),this.recordSourceMappingStart(n),this.writeToOutput("("),e.expression.kind()===50&&this.emitState.container===4&&(this.writeToOutput("this"),n&&n.nonSeparatorCount()>0&&this.writeToOutput(", ")),this.emitCommaSeparatedList(e.argumentList,n,"",!1)),this.writeToOutputWithSourceMapRecord(")",e.argumentList.closeParenToken),this.recordSourceMappingEnd(n),this.recordSourceMappingEnd(e)},t.prototype.emitParameterList=function(t){this.writeToOutput("("),this.emitCommentsArray(t.openParenTrailingComments,!0),this.emitFunctionParameters(e.ASTHelpers.parametersFromParameterList(t)),this.writeToOutput(")")},t.prototype.emitFunctionParameters=function(e){var t=0;if(e){this.emitComments(e.ast,!0);var n=this.setContainer(6);t=e.length;var r=t;e.lastParameterIsRest()&&r--;for(var i=0;i<r;i++){var s=e.astAt(i);this.emit(s),i<r-1&&this.writeToOutput(", ")}this.setContainer(n),this.emitComments(e.ast,!1)}},t.prototype.emitFunctionBodyStatements=function(e,t,n,r,i){this.writeLineToOutput(" {"),e&&this.recordSourceMappingNameStart(e),this.indenter.increaseIndent(),r&&this.emitDetachedComments(r.statements),this.shouldCaptureThis(t)&&this.writeCaptureThisStatement(t),n&&(this.emitDefaultValueAssignments(n),this.emitRestParameterInitializer(n)),r?(this.emitList(r.statements),this.emitCommentsArray(r.closeBraceLeadingComments,!1)):(this.emitIndent(),this.emitCommentsArray(i.preComments(),!1),this.writeToOutput("return "),this.emit(i),this.writeLineToOutput(";"),this.emitCommentsArray(i.postComments(),!0)),this.indenter.decreaseIndent(),this.emitIndent(),r?this.writeToOutputWithSourceMapRecord("}",r.closeBraceToken):this.writeToOutputWithSourceMapRecord("}",i),e&&this.recordSourceMappingNameEnd()},t.prototype.emitDefaultValueAssignments=function(e){var t=e.length;e.lastParameterIsRest()&&t--;for(var n=0;n<t;n++){var r=e.astAt(n),i=e.identifierAt(n),s=e.initializerAt(n);s&&(this.emitIndent(),this.recordSourceMappingStart(r),this.writeToOutput("if (typeof "+i.text()+' === "undefined") { '),this.writeToOutputWithSourceMapRecord(i.text(),i),this.emitJavascript(s,!1),this.writeLineToOutput("; }"),this.recordSourceMappingEnd(r))}},t.prototype.emitRestParameterInitializer=function(e){if(e.lastParameterIsRest()){var t=e.length,n=e.astAt(t-1),r=e.identifierAt(t-1);this.emitIndent(),this.recordSourceMappingStart(n),this.writeToOutput("var "),this.writeToOutputWithSourceMapRecord(r.text(),r),this.writeLineToOutput(" = [];"),this.recordSourceMappingEnd(n),this.emitIndent(),this.writeToOutput("for ("),this.writeToOutputWithSourceMapRecord("var _i = 0;",n),this.writeToOutput(" "),this.writeToOutputWithSourceMapRecord("_i < (arguments.length - "+(t-1)+")",n),this.writeToOutput("; "),this.writeToOutputWithSourceMapRecord("_i++",n),this.writeLineToOutput(") {"),this.indenter.increaseIndent(),this.emitIndent(),this.writeToOutputWithSourceMapRecord(r.text()+"[_i] = arguments[_i + "+(t-1)+"];",n),this.writeLineToOutput(""),this.indenter.decreaseIndent(),this.emitIndent(),this.writeLineToOutput("}")}},t.prototype.getImportDecls=function(e){var t=this.semanticInfoChain.topLevelDecl(this.document.fileName),n=[],r=t.getChildDecls()[0],i=r.getChildDecls();for(var s=0,o=i.length;s<o;s++){var u=i[s];if(u.kind&128){var a=this.semanticInfoChain.getASTForDecl(u);if(a.moduleReference.kind()===245){var f=u.getSymbol(),l=f&&f.type;l&&l!==this.semanticInfoChain.anyTypeSymbol&&!l.isError()&&n.push(u)}}}return n},t.prototype.getModuleImportAndDependencyList=function(e){var t="",n="",r=this.getImportDecls(this.document.fileName);if(r.length)for(var i=0;i<r.length;i++){var s=r[i],o=s.getSymbol(),u=this.semanticInfoChain.getASTForDecl(s);o.isUsedAsValue()&&(i<=r.length-1&&(n+=", ",t+=", "),t+=s.name,n+=u.moduleReference.stringLiteral.text())}var a=this.document.amdDependencies();for(var i=0;i<a.length;i++)n+=', "'+a[i]+'"';return{importList:t,dependencyList:n}},t.prototype.shouldCaptureThis=function(t){if(t.kind()===120){var n=this.semanticInfoChain.topLevelDecl(this.document.fileName);return e.hasFlag(n.flags,262144)}var r=this.semanticInfoChain.getDeclForAST(t);return r?e.hasFlag(r.flags,262144):!1},t.prototype.emitEnum=function(t){var n=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(n);var r=this.moduleName;this.moduleName=t.identifier.text();var i=this.setContainer(1),s=e.hasFlag(n.flags,1);s||(this.recordSourceMappingStart(t),this.writeToOutput("var "),this.recordSourceMappingStart(t.identifier),this.writeToOutput(this.moduleName),this.recordSourceMappingEnd(t.identifier),this.writeLineToOutput(";"),this.recordSourceMappingEnd(t),this.emitIndent()),this.writeToOutput("("),this.recordSourceMappingStart(t),this.writeToOutput("function ("),this.writeToOutputWithSourceMapRecord(this.moduleName,t.identifier),this.writeLineToOutput(") {"),this.recordSourceMappingNameStart(this.moduleName),this.indenter.increaseIndent(),this.shouldCaptureThis(t)&&this.writeCaptureThisStatement(t),this.emitSeparatedList(t.enumElements),this.indenter.decreaseIndent(),this.emitIndent();var o=i===2;if(i===0&&s)this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.writeToOutput(")(this."+this.moduleName+" || (this."+this.moduleName+" = {}));");else if(s||i===0){var u=r!==""?(o?"exports":r)+".":r;this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.writeToOutput(")("+u+this.moduleName+" || ("+u+this.moduleName+" = {}));")}else!s&&i!==0?(this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.writeToOutput(")("+this.moduleName+" || ("+this.moduleName+" = {}));")):(this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.writeToOutput(")();"));this.recordSourceMappingEnd(t),i!==0&&s&&(this.recordSourceMappingStart(t),o?(this.writeLineToOutput(""),this.emitIndent(),this.writeToOutput("var "+this.moduleName+" = exports."+this.moduleName+";")):(this.writeLineToOutput(""),this.emitIndent(),this.writeToOutput("var "+this.moduleName+" = "+r+"."+this.moduleName+";")),this.recordSourceMappingEnd(t)),this.setContainer(i),this.moduleName=r,this.popDecl(n)},t.prototype.getModuleDeclToVerifyChildNameCollision=function(t,n){if(e.ArrayUtilities.contains(this.declStack,t))return t;if(n){var r=t.getSymbol();if(r){var i=r.getDeclarations();for(var s=0;s<i.length;s++)if(e.ArrayUtilities.contains(this.declStack,i[s]))return i[s]}}return null},t.prototype.hasChildNameCollision=function(t,n){var r=this,i=n.getChildDecls();return e.ArrayUtilities.any(i,function(e){var i=r.semanticInfoChain.getASTForDecl(e);if(e.kind!=67108864&&r.shouldEmit(i)){if(e.name===t){if(n.kind!=8)return!0;if(e.kind!=65536&&e.kind!=4096&&e.kind!=524288&&e.kind!=262144)return!0}if(r.hasChildNameCollision(t,e))return!0}return!1})},t.prototype.getModuleName=function(e,t){var n=e.name,r=e.getDisplayName();e=this.getModuleDeclToVerifyChildNameCollision(e,t);if(e&&e.kind!=64)while(this.hasChildNameCollision(n,e))n="_"+n,r="_"+r;return r},t.prototype.emitModuleDeclarationWorker=function(t){if(t.stringLiteral)this.emitSingleModuleDeclaration(t,t.stringLiteral);else{var n=e.ASTHelpers.getModuleNames(t.name);this.emitSingleModuleDeclaration(t,n[0])}},t.prototype.emitSingleModuleDeclaration=function(t,n){var r=e.ASTHelpers.isLastNameOfModule(t,n);r&&this.emitComments(t,!0);var i=this.semanticInfoChain.getDeclForAST(n);this.pushDecl(i);var s=this.moduleName;t.stringLiteral?(this.moduleName=t.stringLiteral.valueText(),e.isTSFile(this.moduleName)&&(this.moduleName=this.moduleName.substring(0,this.moduleName.length-".ts".length))):this.moduleName=n.text();var o=this.setContainer(1),u=e.hasFlag(i.flags,1);u||(this.recordSourceMappingStart(t),this.writeToOutput("var "),this.recordSourceMappingStart(n),this.writeToOutput(this.moduleName),this.recordSourceMappingEnd(n),this.writeLineToOutput(";"),this.recordSourceMappingEnd(t),this.emitIndent()),this.writeToOutput("("),this.recordSourceMappingStart(t),this.writeToOutput("function ("),this.moduleName=this.getModuleName(i),this.writeToOutputWithSourceMapRecord(this.moduleName,n),this.writeLineToOutput(") {"),this.recordSourceMappingNameStart(n.text()),this.indenter.increaseIndent(),this.shouldCaptureThis(t)&&this.writeCaptureThisStatement(t);if(n===t.stringLiteral)this.emitList(t.moduleElements);else{var a=e.ASTHelpers.getModuleNames(t.name),f=a.indexOf(n);e.Debug.assert(f>=0),r?this.emitList(t.moduleElements):(this.emitIndent(),this.emitSingleModuleDeclaration(t,a[f+1]),this.writeLineToOutput(""))}this.moduleName=n.text(),this.indenter.decreaseIndent(),this.emitIndent();var l=o===2;this.recordSourceMappingStart(t.endingToken);if(o===0&&u)this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.recordSourceMappingEnd(t.endingToken),this.writeToOutput(")(this."+this.moduleName+" || (this."+this.moduleName+" = {}));");else if(u||o===0){var c=s!==""?(l?"exports":s)+".":s;this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.recordSourceMappingEnd(t.endingToken),this.writeToOutput(")("+c+this.moduleName+" || ("+c+this.moduleName+" = {}));")}else!u&&o!==0?(this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.recordSourceMappingEnd(t.endingToken),this.writeToOutput(")("+this.moduleName+" || ("+this.moduleName+" = {}));")):(this.writeToOutput("}"),this.recordSourceMappingNameEnd(),this.recordSourceMappingEnd(t.endingToken),this.writeToOutput(")();"));this.recordSourceMappingEnd(t),o!==0&&u&&(this.recordSourceMappingStart(t),l?(this.writeLineToOutput(""),this.emitIndent(),this.writeToOutput("var "+this.moduleName+" = exports."+this.moduleName+";")):(this.writeLineToOutput(""),this.emitIndent(),this.writeToOutput("var "+this.moduleName+" = "+s+"."+this.moduleName+";")),this.recordSourceMappingEnd(t)),this.setContainer(o),this.moduleName=s,this.popDecl(i),r&&this.emitComments(t,!1)},t.prototype.emitEnumElement=function(t){var n=this.semanticInfoChain.getDeclForAST(t);e.Debug.assert(n&&n.kind===67108864),this.emitComments(t,!0),this.recordSourceMappingStart(t);var r=t.propertyName.text(),i=e.isQuoted(r);this.writeToOutput(this.moduleName),this.writeToOutput("["),this.writeToOutput(this.moduleName),this.writeToOutput("["),this.writeToOutput(i?r:'"'+r+'"'),this.writeToOutput("]"),t.equalsValueClause?this.emit(t.equalsValueClause):n.constantValue!==null?(this.writeToOutput(" = "),this.writeToOutput(n.constantValue.toString())):this.writeToOutput(" = null"),this.writeToOutput("] = "),this.writeToOutput(i?r:'"'+r+'"'),this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.writeToOutput(";")},t.prototype.emitElementAccessExpression=function(e){this.recordSourceMappingStart(e),this.emit(e.expression),this.writeToOutput("["),this.emit(e.argumentExpression),this.writeToOutput("]"),this.recordSourceMappingEnd(e)},t.prototype.emitSimpleArrowFunctionExpression=function(t){this.emitAnyArrowFunctionExpression(t,null,e.ASTHelpers.parametersFromIdentifier(t.identifier),t.block,t.expression)},t.prototype.emitParenthesizedArrowFunctionExpression=function(t){this.emitAnyArrowFunctionExpression(t,null,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),t.block,t.expression)},t.prototype.emitAnyArrowFunctionExpression=function(e,t,n,r,i){var s=this.inArrowFunction;this.inArrowFunction=!0;var o=this.setContainer(5);this.recordSourceMappingStart(e);var u=this.semanticInfoChain.getDeclForAST(e);this.pushDecl(u),this.emitComments(e,!0),this.recordSourceMappingStart(e),this.writeToOutput("function "),this.writeToOutput("("),this.emitFunctionParameters(n),this.writeToOutput(")"),this.emitFunctionBodyStatements(t,e,n,r,i),this.recordSourceMappingEnd(e),this.recordSourceMappingEnd(e),this.emitComments(e,!1),this.popDecl(u),this.setContainer(o),this.inArrowFunction=s},t.prototype.emitConstructor=function(t){if(!t.block)return;var n=this.setContainer(4);this.recordSourceMappingStart(t);var r=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(r),this.emitComments(t,!0),this.recordSourceMappingStart(t),this.writeToOutput("function "),this.writeToOutput(this.thisClassNode.identifier.text()),this.writeToOutput("(");var i=e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList);this.emitFunctionParameters(i),this.writeLineToOutput(") {"),this.recordSourceMappingNameStart("constructor"),this.indenter.increaseIndent(),this.emitDefaultValueAssignments(i),this.emitRestParameterInitializer(i),this.shouldCaptureThis(t)&&this.writeCaptureThisStatement(t),this.emitConstructorStatements(t),this.emitCommentsArray(t.block.closeBraceLeadingComments,!1),this.indenter.decreaseIndent(),this.emitIndent(),this.writeToOutputWithSourceMapRecord("}",t.block.closeBraceToken),this.recordSourceMappingNameEnd(),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.popDecl(r),this.setContainer(n)},t.prototype.emitGetAccessor=function(t){this.recordSourceMappingStart(t),this.writeToOutput("get ");var n=this.setContainer(5);this.recordSourceMappingStart(t);var r=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(r),this.recordSourceMappingStart(t);var i=e.PullHelpers.getAccessorSymbol(t,this.semanticInfoChain),s=i.getContainer(),o=s.kind;this.recordSourceMappingNameStart(t.propertyName.text()),this.writeToOutput(t.propertyName.text()),this.writeToOutput("("),this.writeToOutput(")"),this.emitFunctionBodyStatements(null,t,e.ASTHelpers.parametersFromParameterList(t.parameterList),t.block,null),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.popDecl(r),this.setContainer(n),this.recordSourceMappingEnd(t)},t.prototype.emitSetAccessor=function(t){this.recordSourceMappingStart(t),this.writeToOutput("set ");var n=this.setContainer(5);this.recordSourceMappingStart(t);var r=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(r),this.recordSourceMappingStart(t);var i=e.PullHelpers.getAccessorSymbol(t,this.semanticInfoChain),s=i.getContainer(),o=s.kind;this.recordSourceMappingNameStart(t.propertyName.text()),this.writeToOutput(t.propertyName.text()),this.writeToOutput("(");var u=e.ASTHelpers.parametersFromParameterList(t.parameterList);this.emitFunctionParameters(u),this.writeToOutput(")"),this.emitFunctionBodyStatements(null,t,u,t.block,null),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.popDecl(r),this.setContainer(n),this.recordSourceMappingEnd(t)},t.prototype.emitFunctionExpression=function(t){var n=this.inArrowFunction;this.inArrowFunction=!1;var r=this.setContainer(5),i=t.identifier?t.identifier.text():null;this.recordSourceMappingStart(t);var s=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(s),this.recordSourceMappingStart(t),this.writeToOutput("function "),t.identifier&&(this.recordSourceMappingStart(t.identifier),this.writeToOutput(t.identifier.text()),this.recordSourceMappingEnd(t.identifier)),this.writeToOutput("(");var o=e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList);this.emitFunctionParameters(o),this.writeToOutput(")"),this.emitFunctionBodyStatements(i,t,o,t.block,null),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.popDecl(s),this.setContainer(r),this.inArrowFunction=n},t.prototype.emitFunction=function(t){if(t.block===null)return;var n=this.inArrowFunction;this.inArrowFunction=!1;var r=this.setContainer(5),i=t.identifier.text();this.recordSourceMappingStart(t);var s=t.identifier!==null,o=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(o),this.emitComments(t,!0),this.recordSourceMappingStart(t),this.writeToOutput("function ");if(s){var u=t.identifier.text();u&&(t.identifier&&this.recordSourceMappingStart(t.identifier),this.writeToOutput(u),t.identifier&&this.recordSourceMappingEnd(t.identifier))}this.emitParameterList(t.callSignature.parameterList);var a=e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList);this.emitFunctionBodyStatements(t.identifier.text(),t,a,t.block,null),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.popDecl(o),this.setContainer(r),this.inArrowFunction=n;if(t.block){var f=this.semanticInfoChain.getDeclForAST(t);if((this.emitState.container===1||this.emitState.container===2)&&f&&e.hasFlag(f.flags,1)){this.writeLineToOutput(""),this.emitIndent();var l=this.emitState.container===1?this.moduleName:"exports";this.recordSourceMappingStart(t),this.writeToOutput(l+"."+i+" = "+i+";"),this.recordSourceMappingEnd(t)}}},t.prototype.emitAmbientVarDecl=function(e){this.recordSourceMappingStart(this.currentVariableDeclaration),e.equalsValueClause&&(this.emitComments(e,!0),this.recordSourceMappingStart(e),this.writeToOutputWithSourceMapRecord(e.propertyName.text(),e.propertyName),this.emitJavascript(e.equalsValueClause,!1),this.recordSourceMappingEnd(e),this.emitComments(e,!1))},t.prototype.emitVarDeclVar=function(){this.currentVariableDeclaration&&this.writeToOutput("var ")},t.prototype.emitVariableDeclaration=function(t){var n=t.declarators.nonSeparatorAt(0),r=this.semanticInfoChain.getSymbolForAST(n),i=r?r.getContainer():null,s=i?i.kind:0;this.emitComments(t,!0);var o=this.semanticInfoChain.getDeclForAST(n),u=o&&e.hasFlag(o.flags,8)&&n.equalsValueClause===null;if(!u){var a=this.currentVariableDeclaration;this.currentVariableDeclaration=t;for(var f=0,l=t.declarators.nonSeparatorCount();f<l;f++){var c=t.declarators.nonSeparatorAt(f);f>0&&this.writeToOutput(", "),this.emit(c)}this.currentVariableDeclaration=a,this.recordSourceMappingEnd(t)}this.emitComments(t,!1)},t.prototype.emitMemberVariableDeclaration=function(t){e.Debug.assert(!e.hasModifier(t.modifiers,16)&&t.variableDeclarator.equalsValueClause);var n=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(n),this.emitComments(t,!0),this.recordSourceMappingStart(t);var r=t.variableDeclarator.propertyName.text(),i=e.isQuoted(r)||t.variableDeclarator.propertyName.kind()!==11,s=this.semanticInfoChain.getSymbolForAST(t),o=s?s.getContainer():null,u=n&&n.getParentDecl();i?this.writeToOutput("this["):this.writeToOutput("this."),this.writeToOutputWithSourceMapRecord(t.variableDeclarator.propertyName.text(),t.variableDeclarator.propertyName),i&&this.writeToOutput("]");if(t.variableDeclarator.equalsValueClause){var a=this.currentVariableDeclaration;this.emit(t.variableDeclarator.equalsValueClause),this.currentVariableDeclaration=a}this.emitState.container!==6&&this.writeToOutput(";"),this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.popDecl(n)},t.prototype.emitVariableDeclarator=function(t){var n=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(n);if(n&&(n.flags&8)===8)this.emitAmbientVarDecl(t);else{this.emitComments(t,!0),this.recordSourceMappingStart(this.currentVariableDeclaration),this.recordSourceMappingStart(t);var r=t.propertyName.text(),i=this.semanticInfoChain.getSymbolForAST(t),s=i?i.getContainer():null,o=n&&n.getParentDecl(),u=o&&o.flags&102400;u?e.hasFlag(n.flags,1)?this.emitState.container===2?this.writeToOutput("exports."):this.writeToOutput(this.moduleName+"."):this.emitVarDeclVar():this.emitVarDeclVar(),this.writeToOutputWithSourceMapRecord(t.propertyName.text(),t.propertyName);if(t.equalsValueClause){var a=this.currentVariableDeclaration;this.emit(t.equalsValueClause),this.currentVariableDeclaration=a}this.recordSourceMappingEnd(t),this.emitComments(t,!1)}this.currentVariableDeclaration=undefined,this.popDecl(n)},t.prototype.symbolIsUsedInItsEnclosingContainer=function(e,t){typeof t=="undefined"&&(t=!1);var n=e.getDeclarations();if(n.length){var r=this.getEnclosingDecl();if(r){var i=n[0].getParentDecl();if(i){var s=i,o=r;while(s){if(s.kind===(t?32:4))break;s=s.getParentDecl()}if(s)while(o){if(o.kind===(t?32:4))break;o=o.getParentDecl()}if(s&&o){var u=s===o;return!u&&e.anyDeclHasFlag(32768)&&(u=s===o.getParentDecl()),u}}}}return!1},t.prototype.shouldQualifySymbolNameWithParentName=function(t){var n=this.declStack,r=t.getDeclarations();for(var i=0;i<r.length;i++){var s=r[i],o=s.getParentDecl();if(s.kind===67108864)return!0;if(!e.hasFlag(s.flags,1))return!1;if(s.kind===512&&!e.hasFlag(s.flags,118784))return!0;if(e.ArrayUtilities.contains(this.declStack,o))return!1}return!0},t.prototype.getSymbolForEmit=function(t){var n=this.semanticInfoChain.getSymbolForAST(t),r=this.semanticInfoChain.getAliasSymbolForAST(t);if(n&&r){var i=e.isTypesOnlyLocation(t)?r.getExportAssignedTypeSymbol():r.getExportAssignedValueSymbol();n===i&&(n=r,r=null)}return{symbol:n,aliasSymbol:r}},t.prototype.emitName=function(t,n){this.emitComments(t,!0),this.recordSourceMappingStart(t);if(t.text().length>0){var r=this.getSymbolForEmit(t),i=r.symbol;i||(i=this.semanticInfoChain.anyTypeSymbol);var s=r.aliasSymbol,o=i.kind,u=s&&s.getDeclarations()[0].getParentDecl()===this.getEnclosingDecl();if(n&&this.emitState.container!==6&&i){var a=i.getContainer();if(a){var f=a.kind;if(e.PullHelpers.symbolIsModule(a)||f===64||a.anyDeclHasFlag(36864)){var l=this.shouldQualifySymbolNameWithParentName(i);if(l){var c=i.getDeclarations()[0].getParentDecl();e.Debug.assert(c&&!c.isRootDecl()),this.writeToOutput(this.getModuleName(c,!0)+".")}}else if(f===32||a.anyDeclHasFlag(65536))o===4096?this.writeToOutput("exports."):i.anyDeclHasFlag(1)&&!u&&!i.anyDeclHasFlag(118784)&&i.kind!==32768&&i.kind!==8&&i.kind!==64&&this.writeToOutput("exports.")}}this.writeToOutput(t.text())}this.recordSourceMappingEnd(t),this.emitComments(t,!1)},t.prototype.recordSourceMappingNameStart=function(e){if(this.sourceMapper){var t=-1;if(e){if(this.sourceMapper.currentNameIndex.length>0){var n=this.sourceMapper.currentNameIndex[this.sourceMapper.currentNameIndex.length-1];n!==-1&&(e=this.sourceMapper.names[n]+"."+e)}var t=this.sourceMapper.names.length-1;for(t;t>=0;t--)if(this.sourceMapper.names[t]===e)break;t===-1&&(t=this.sourceMapper.names.length,this.sourceMapper.names.push(e))}this.sourceMapper.currentNameIndex.push(t)}},t.prototype.recordSourceMappingNameEnd=function(){this.sourceMapper&&this.sourceMapper.currentNameIndex.pop()},t.prototype.recordSourceMappingStart=function(t){if(this.sourceMapper&&e.ASTHelpers.isValidAstNode(t)){var n={line:-1,character:-1},r=new e.SourceMapping;r.start.emittedColumn=this.emitState.column,r.start.emittedLine=this.emitState.line;var i=this.document.lineMap();i.fillLineAndCharacterFromPosition(t.start(),n),r.start.sourceColumn=n.character,r.start.sourceLine=n.line+1,i.fillLineAndCharacterFromPosition(t.end(),n),r.end.sourceColumn=n.character,r.end.sourceLine=n.line+1,e.Debug.assert(!isNaN(r.start.emittedColumn)),e.Debug.assert(!isNaN(r.start.emittedLine)),e.Debug.assert(!isNaN(r.start.sourceColumn)),e.Debug.assert(!isNaN(r.start.sourceLine)),e.Debug.assert(!isNaN(r.end.sourceColumn)),e.Debug.assert(!isNaN(r.end.sourceLine)),this.sourceMapper.currentNameIndex.length>0&&(r.nameIndex=this.sourceMapper.currentNameIndex[this.sourceMapper.currentNameIndex.length-1]);var s=this.sourceMapper.currentMappings[this.sourceMapper.currentMappings.length-1];s.push(r),this.sourceMapper.currentMappings.push(r.childMappings),this.sourceMapper.increaseMappingLevel(t)}},t.prototype.recordSourceMappingEnd=function(t){if(this.sourceMapper&&e.ASTHelpers.isValidAstNode(t)){this.sourceMapper.currentMappings.pop();var n=this.sourceMapper.currentMappings[this.sourceMapper.currentMappings.length-1],r=n[n.length-1];r.end.emittedColumn=this.emitState.column,r.end.emittedLine=this.emitState.line,e.Debug.assert(!isNaN(r.end.emittedColumn)),e.Debug.assert(!isNaN(r.end.emittedLine)),this.sourceMapper.decreaseMappingLevel(t)}},t.prototype.getOutputFiles=function(){var e=[];return this.sourceMapper!==null&&(this.sourceMapper.emitSourceMapping(),e.push(this.sourceMapper.getOutputFile())),e.push(this.outfile.getOutputFile()),e},t.prototype.emitParameterPropertyAndMemberVariableAssignments=function(){var t=u(this.thisClassNode);if(t)for(var n=0,r=t.callSignature.parameterList.parameters.nonSeparatorCount();n<r;n++){var i=t.callSignature.parameterList.parameters.nonSeparatorAt(n),s=this.semanticInfoChain.getDeclForAST(i);e.hasFlag(s.flags,8388608)&&(this.emitIndent(),this.recordSourceMappingStart(i),this.writeToOutputWithSourceMapRecord("this."+i.identifier.text(),i.identifier),this.writeToOutput(" = "),this.writeToOutputWithSourceMapRecord(i.identifier.text(),i.identifier),this.writeLineToOutput(";"),this.recordSourceMappingEnd(i))}for(var n=0,r=this.thisClassNode.classElements.childCount();n<r;n++)if(this.thisClassNode.classElements.childAt(n).kind()===136){var o=this.thisClassNode.classElements.childAt(n);!e.hasModifier(o.modifiers,16)&&o.variableDeclarator.equalsValueClause&&(this.emitIndent(),this.emitMemberVariableDeclaration(o),this.writeLineToOutput(""))}},t.prototype.isOnSameLine=function(e,t){var n=this.document.lineMap();return n.getLineNumberFromPosition(e)===n.getLineNumberFromPosition(t)},t.prototype.emitCommaSeparatedList=function(e,t,n,r){if(t===null||t.nonSeparatorCount()===0)return;var i=r&&!this.isOnSameLine(e.end(),t.nonSeparatorAt(0).end());r&&this.indenter.increaseIndent(),i?this.writeLineToOutput(""):this.writeToOutput(n);for(var s=0,o=t.nonSeparatorCount();s<o;s++){var u=t.nonSeparatorAt(s);this.emitJavascript(u,i),s<o-1&&(i=r&&!this.isOnSameLine(u.end(),t.nonSeparatorAt(s+1).start()),i?this.writeLineToOutput(","):this.writeToOutput(", "))}r&&this.indenter.decreaseIndent(),r&&!this.isOnSameLine(e.end(),t.nonSeparatorAt(t.nonSeparatorCount()-1).end())?(this.writeLineToOutput(""),this.emitIndent()):this.writeToOutput(n)},t.prototype.emitList=function(e,t,n,r){typeof t=="undefined"&&(t=!0),typeof n=="undefined"&&(n=0),typeof r=="undefined"&&(r=e.childCount());if(e===null)return;this.emitComments(e,!0);var i=null;for(var s=n;s<r;s++){var o=e.childAt(s);this.shouldEmit(o)&&(this.emitSpaceBetweenConstructs(i,o),this.emitJavascript(o,!0),t&&this.writeLineToOutput(""),i=o)}this.emitComments(e,!1)},t.prototype.emitSeparatedList=function(e,t,n,r){typeof t=="undefined"&&(t=!0),typeof n=="undefined"&&(n=0),typeof r=="undefined"&&(r=e.nonSeparatorCount());if(e===null)return;this.emitComments(e,!0);var i=null;for(var s=n;s<r;s++){var o=e.nonSeparatorAt(s);this.shouldEmit(o)&&(this.emitSpaceBetweenConstructs(i,o),this.emitJavascript(o,!0),t&&this.writeLineToOutput(""),i=o)}this.emitComments(e,!1)},t.prototype.isDirectivePrologueElement=function(e){if(e.kind()===149){var t=e;return t.expression.kind()===14}return!1},t.prototype.emitSpaceBetweenConstructs=function(e,t){if(e===null||t===null)return;if(e.start()===-1||e.end()===-1||t.start()===-1||t.end()===-1)return;var n=this.document.lineMap(),r=n.getLineNumberFromPosition(e.end()),i=n.getLineNumberFromPosition(t.start());i-r>1&&this.writeLineToOutput("",!0)},t.prototype.getDetachedComments=function(t){var n=t.preComments();if(n){var r=this.document.lineMap(),i=[],s=null;for(var o=0,u=n.length;o<u;o++){var a=n[o];if(s){var f=r.getLineNumberFromPosition(s.end()),l=r.getLineNumberFromPosition(a.start());if(l>=f+2)return i}i.push(a),s=a}var f=r.getLineNumberFromPosition(e.ArrayUtilities.last(i).end()),c=r.getLineNumberFromPosition(t.start());if(c>=f+2)return i}return[]},t.prototype.emitPossibleCopyrightHeaders=function(e){this.emitDetachedComments(e.moduleElements)},t.prototype.emitDetachedComments=function(e){if(e.childCount()>0){var t=e.childAt(0);this.detachedCommentsElement=t,this.emitCommentsArray(this.getDetachedComments(this.detachedCommentsElement),!1)}},t.prototype.emitScriptElements=function(t){var n=t.moduleElements;this.emitPossibleCopyrightHeaders(t);for(var r=0,i=n.childCount();r<i;r++){var s=n.childAt(r);if(!this.isDirectivePrologueElement(s))break;this.emitJavascript(s,!0),this.writeLineToOutput("")}this.emitPrologue(t);var o=this.document.isExternalModule(),u=o&&!e.ASTHelpers.scriptIsElided(t);if(u){this.recordSourceMappingStart(t);if(this.emitOptions.compilationSettings().moduleGenTarget()===2){var a='["require", "exports"',f="require, exports",l=this.getModuleImportAndDependencyList(t);f+=l.importList,a+=l.dependencyList+"]",this.writeLineToOutput("define("+a+","+" function("+f+") {")}else this.emitOptions.compilationSettings().moduleGenTarget()===3&&(this.writeLineToOutput("define(function(require, exports, module) {"),this.writeLineToOutput('"no use strict";'))}if(o){var c=this.setContainer(2),h=this.moduleName;this.moduleName=t.fileName(),e.isTSFile(this.moduleName)&&(this.moduleName=this.moduleName.substring(0,this.moduleName.length-".ts".length)),this.setExportAssignment(null),this.emitOptions.compilationSettings().moduleGenTarget()===2&&this.indenter.increaseIndent();var p=this.semanticInfoChain.getDeclForAST(this.document.sourceUnit());e.hasFlag(p.flags,262144)&&this.writeCaptureThisStatement(t),this.pushDecl(p)}this.emitList(n,!0,r,i);if(o){this.emitOptions.compilationSettings().moduleGenTarget()===2&&this.indenter.decreaseIndent();if(u){var d=this.getExportAssignment(),v=d?d.identifier.text():null,m=p.getSymbol().getExportAssignedValueSymbol();this.emitOptions.compilationSettings().moduleGenTarget()===2?(v&&m&&!(m.kind&58720272)&&(this.indenter.increaseIndent(),this.emitIndent(),this.writeToOutputWithSourceMapRecord("return "+v,d),this.writeLineToOutput(";"),this.indenter.decreaseIndent()),this.writeToOutput("});")):this.emitOptions.compilationSettings().moduleGenTarget()===3?(v&&m&&!(m.kind&58720272)&&(this.indenter.increaseIndent(),this.emitIndent(),this.writeToOutputWithSourceMapRecord("return "+v,d),this.writeLineToOutput(";"),this.indenter.decreaseIndent()),this.writeToOutput("});")):v&&m&&!(m.kind&58720272)&&(this.emitIndent(),this.writeToOutputWithSourceMapRecord("module.exports = "+v,d),this.writeToOutput(";")),this.recordSourceMappingEnd(t),this.writeLineToOutput("")}this.setContainer(c),this.moduleName=h,this.popDecl(p)}},t.prototype.emitConstructorStatements=function(t){var n=t.block.statements;if(n===null)return;this.emitComments(n,!0);var r=e.ASTHelpers.getExtendsHeritageClause(this.thisClassNode.heritageClauses)!==null,i=r?1:0,s=null;for(var o=0,u=n.childCount();o<u;o++){o===i&&this.emitParameterPropertyAndMemberVariableAssignments();var a=n.childAt(o);this.shouldEmit(a)&&(this.emitSpaceBetweenConstructs(s,a),this.emitJavascript(a,!0),this.writeLineToOutput(""),s=a)}o===i&&this.emitParameterPropertyAndMemberVariableAssignments(),this.emitComments(n,!1)},t.prototype.emitJavascript=function(e,t){if(e===null)return;t&&this.indenter.indentAmt>0&&this.emitIndent(),this.emit(e)},t.prototype.emitAccessorMemberDeclaration=function(t,n,r,i){if(t.kind()!==139){var s=e.PullHelpers.getAccessorSymbol(t,this.semanticInfoChain);if(s.getGetter())return}this.emitIndent(),this.recordSourceMappingStart(t),this.writeToOutput("Object.defineProperty("+r),i?this.writeToOutput(".prototype, "):this.writeToOutput(", ");var o=n.text();e.isQuoted(o)?this.writeToOutput(o):this.writeToOutput('"'+o+'"'),this.writeLineToOutput(", {"),this.indenter.increaseIndent();var u=e.PullHelpers.getGetterAndSetterFunction(t,this.semanticInfoChain);u.getter&&(this.emitIndent(),this.recordSourceMappingStart(u.getter),this.emitComments(u.getter,!0),this.writeToOutput("get: "),this.emitAccessorBody(u.getter,u.getter.parameterList,u.getter.block),this.writeLineToOutput(",")),u.setter&&(this.emitIndent(),this.recordSourceMappingStart(u.setter),this.emitComments(u.setter,!0),this.writeToOutput("set: "),this.emitAccessorBody(u.setter,u.setter.parameterList,u.setter.block),this.writeLineToOutput(",")),this.emitIndent(),this.writeLineToOutput("enumerable: true,"),this.emitIndent(),this.writeLineToOutput("configurable: true"),this.indenter.decreaseIndent(),this.emitIndent(),this.writeLineToOutput("});"),this.recordSourceMappingEnd(t)},t.prototype.emitAccessorBody=function(t,n,r){var i=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(i),this.recordSourceMappingStart(t),this.writeToOutput("function "),this.writeToOutput("(");var s=e.ASTHelpers.parametersFromParameterList(n);this.emitFunctionParameters(s),this.writeToOutput(")"),this.emitFunctionBodyStatements(null,t,s,r,null),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.popDecl(i)},t.prototype.emitClass=function(t){var n=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(n);var r=this.thisClassNode;this.thisClassNode=t;var i=t.identifier.text();this.emitComments(t,!0);var s=this.setContainer(3);this.recordSourceMappingStart(t),this.writeToOutput("var "+i);var o=e.ASTHelpers.getExtendsHeritageClause(t.heritageClauses)!==null,a=null,f=null;o?this.writeLineToOutput(" = (function (_super) {"):this.writeLineToOutput(" = (function () {"),this.recordSourceMappingNameStart(i),this.indenter.increaseIndent(),o&&(a=e.ASTHelpers.getExtendsHeritageClause(t.heritageClauses).typeNames.nonSeparatorAt(0),this.emitIndent(),this.writeToOutputWithSourceMapRecord("__extends("+i+", _super)",a),this.writeLineToOutput(";")),this.emitIndent();var l=u(t);l?(this.emit(l),this.writeLineToOutput("")):(this.recordSourceMappingStart(t),this.indenter.increaseIndent(),this.writeLineToOutput("function "+t.identifier.text()+"() {"),this.recordSourceMappingNameStart("constructor"),o&&(this.emitIndent(),this.writeToOutputWithSourceMapRecord("_super.apply(this, arguments)",a),this.writeLineToOutput(";")),this.shouldCaptureThis(t)&&this.writeCaptureThisStatement(t),this.emitParameterPropertyAndMemberVariableAssignments(),this.indenter.decreaseIndent(),this.emitIndent(),this.writeToOutputWithSourceMapRecord("}",t.closeBraceToken),this.writeLineToOutput(""),this.recordSourceMappingNameEnd(),this.recordSourceMappingEnd(t)),this.emitClassMembers(t),this.emitIndent(),this.writeToOutputWithSourceMapRecord("return "+i+";",t.closeBraceToken),this.writeLineToOutput(""),this.indenter.decreaseIndent(),this.emitIndent(),this.writeToOutputWithSourceMapRecord("}",t.closeBraceToken),this.recordSourceMappingNameEnd(),this.recordSourceMappingStart(t),this.writeToOutput(")("),o&&this.emitJavascript(a,!1),this.writeToOutput(");"),this.recordSourceMappingEnd(t);if((s===1||s===2)&&e.hasFlag(n.flags,1)){this.writeLineToOutput(""),this.emitIndent();var c=s===1?this.moduleName:"exports";this.writeToOutputWithSourceMapRecord(c+"."+i+" = "+i+";",t)}this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.setContainer(s),this.thisClassNode=r,this.popDecl(n)},t.prototype.emitClassMembers=function(t){var n=null;for(var r=0,i=t.classElements.childCount();r<i;r++){var s=t.classElements.childAt(r);if(s.kind()===139){this.emitSpaceBetweenConstructs(n,s);var o=s;this.emitAccessorMemberDeclaration(o,o.propertyName,t.identifier.text(),!e.hasModifier(o.modifiers,16)),n=s}else if(s.kind()===140){this.emitSpaceBetweenConstructs(n,s);var u=s;this.emitAccessorMemberDeclaration(u,u.propertyName,t.identifier.text(),!e.hasModifier(u.modifiers,16)),n=s}else if(s.kind()===135){var a=s;a.block&&(this.emitSpaceBetweenConstructs(n,s),this.emitClassMemberFunctionDeclaration(t,a),n=s)}}for(var r=0,i=t.classElements.childCount();r<i;r++){var s=t.classElements.childAt(r);if(s.kind()===136){var f=s;if(e.hasModifier(f.modifiers,16)&&f.variableDeclarator.equalsValueClause){this.emitSpaceBetweenConstructs(n,f),this.emitIndent(),this.recordSourceMappingStart(f);var l=f.variableDeclarator.propertyName.text();e.isQuoted(l)||f.variableDeclarator.propertyName.kind()!==11?this.writeToOutput(t.identifier.text()+"["+l+"]"):this.writeToOutput(t.identifier.text()+"."+l),this.emit(f.variableDeclarator.equalsValueClause),this.recordSourceMappingEnd(f),this.writeLineToOutput(";"),n=f}}}},t.prototype.emitClassMemberFunctionDeclaration=function(t,n){this.emitIndent(),this.recordSourceMappingStart(n),this.emitComments(n,!0);var r=n.propertyName.text();this.writeToOutput(t.identifier.text()),e.hasModifier(n.modifiers,16)||this.writeToOutput(".prototype"),e.isQuoted(r)||n.propertyName.kind()!==11?this.writeToOutput("["+r+"] = "):this.writeToOutput("."+r+" = ");var i=this.semanticInfoChain.getDeclForAST(n);this.pushDecl(i),this.recordSourceMappingStart(n),this.writeToOutput("function "),this.emitParameterList(n.callSignature.parameterList);var s=e.ASTHelpers.parametersFromParameterList(n.callSignature.parameterList);this.emitFunctionBodyStatements(n.propertyName.text(),n,s,n.block,null),this.recordSourceMappingEnd(n),this.emitComments(n,!1),this.recordSourceMappingEnd(n),this.popDecl(i),this.writeLineToOutput(";")},t.prototype.requiresExtendsBlock=function(t){for(var n=0,r=t.childCount();n<r;n++){var i=t.childAt(n);if(i.kind()===130){var s=i;if(!e.hasModifier(s.modifiers,8)&&this.requiresExtendsBlock(s.moduleElements))return!0}else if(i.kind()===131){var o=i;if(!e.hasModifier(o.modifiers,8)&&e.ASTHelpers.getExtendsHeritageClause(o.heritageClauses)!==null)return!0}}return!1},t.prototype.emitPrologue=function(e){this.extendsPrologueEmitted||this.requiresExtendsBlock(e.moduleElements)&&(this.extendsPrologueEmitted=!0,this.writeLineToOutput("var __extends = this.__extends || function (d, b) {"),this.writeLineToOutput("    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];"),this.writeLineToOutput("    function __() { this.constructor = d; }"),this.writeLineToOutput("    __.prototype = b.prototype;"),this.writeLineToOutput("    d.prototype = new __();"),this.writeLineToOutput("};")),this.globalThisCapturePrologueEmitted||this.shouldCaptureThis(e)&&(this.globalThisCapturePrologueEmitted=!0,this.writeLineToOutput(this.captureThisStmtString))},t.prototype.emitThis=function(){!this.inWithBlock&&this.inArrowFunction?this.writeToOutput("_this"):this.writeToOutput("this")},t.prototype.emitBlockOrStatement=function(e){e.kind()===146?this.emit(e):(this.writeLineToOutput(""),this.indenter.increaseIndent(),this.emitJavascript(e,!0),this.indenter.decreaseIndent())},t.prototype.emitLiteralExpression=function(t){switch(t.kind()){case 32:this.writeToOutputWithSourceMapRecord("null",t);break;case 24:this.writeToOutputWithSourceMapRecord("false",t);break;case 37:this.writeToOutputWithSourceMapRecord("true",t);break;default:throw e.Errors.abstract()}},t.prototype.emitThisExpression=function(e){!this.inWithBlock&&this.inArrowFunction?this.writeToOutputWithSourceMapRecord("_this",e):this.writeToOutputWithSourceMapRecord("this",e)},t.prototype.emitSuperExpression=function(e){this.writeToOutputWithSourceMapRecord("_super.prototype",e)},t.prototype.emitParenthesizedExpression=function(e){e.expression.kind()===220&&e.openParenTrailingComments===null?this.emit(e.expression):(this.recordSourceMappingStart(e),this.writeToOutput("("),this.emitCommentsArray(e.openParenTrailingComments,!1),this.emit(e.expression),this.writeToOutput(")"),this.recordSourceMappingEnd(e))},t.prototype.emitCastExpression=function(e){this.emit(e.expression)},t.prototype.emitPrefixUnaryExpression=function(t){var n=t.kind();this.recordSourceMappingStart(t);switch(n){case 167:this.writeToOutput("!"),this.emit(t.operand);break;case 166:this.writeToOutput("~"),this.emit(t.operand);break;case 165:this.writeToOutput("-"),(t.operand.kind()===165||t.operand.kind()===169)&&this.writeToOutput(" "),this.emit(t.operand);break;case 164:this.writeToOutput("+"),(t.operand.kind()===164||t.operand.kind()===168)&&this.writeToOutput(" "),this.emit(t.operand);break;case 168:this.writeToOutput("++"),this.emit(t.operand);break;case 169:this.writeToOutput("--"),this.emit(t.operand);break;default:throw e.Errors.abstract()}this.recordSourceMappingEnd(t)},t.prototype.emitPostfixUnaryExpression=function(t){var n=t.kind();this.recordSourceMappingStart(t);switch(n){case 210:this.emit(t.operand),this.writeToOutput("++");break;case 211:this.emit(t.operand),this.writeToOutput("--");break;default:throw e.Errors.abstract()}this.recordSourceMappingEnd(t)},t.prototype.emitTypeOfExpression=function(e){this.recordSourceMappingStart(e),this.writeToOutput("typeof "),this.emit(e.expression),this.recordSourceMappingEnd(e)},t.prototype.emitDeleteExpression=function(e){this.recordSourceMappingStart(e),this.writeToOutput("delete "),this.emit(e.expression),this.recordSourceMappingEnd(e)},t.prototype.emitVoidExpression=function(e){this.recordSourceMappingStart(e),this.writeToOutput("void "),this.emit(e.expression),this.recordSourceMappingEnd(e)},t.prototype.canEmitDottedNameMemberAccessExpression=function(t){var n=t.expression.kind();if(n===11||n==212){var r=this.getSymbolForEmit(t).symbol,i=this.getSymbolForEmit(t.expression).symbol;if(r&&i&&!this.semanticInfoChain.getAliasSymbolForAST(t.expression)&&(e.PullHelpers.symbolIsModule(i)||i.kind===64||i.anyDeclHasFlag(36864))){var s=r.kind;if(s===4096||s===67108864||r.anyDeclHasFlag(1)&&s===512&&!r.anyDeclHasFlag(36864)||r.anyDeclHasFlag(1)&&!this.symbolIsUsedInItsEnclosingContainer(r))return n===212?this.canEmitDottedNameMemberAccessExpression(t.expression):!0}}return!1},t.prototype.emitDottedNameMemberAccessExpression=function(e){this.recordSourceMappingStart(e),e.expression.kind()===212?this.emitDottedNameMemberAccessExpressionRecurse(e.expression):this.emitName(e.expression,!0),this.writeToOutput("."),this.emitName(e.name,!1),this.recordSourceMappingEnd(e)},t.prototype.emitDottedNameMemberAccessExpressionRecurse=function(e){this.emitComments(e,!0),this.emitDottedNameMemberAccessExpression(e),this.emitComments(e,!1)},t.prototype.emitMemberAccessExpression=function(e){this.tryEmitConstant(e)||(this.canEmitDottedNameMemberAccessExpression(e)?this.emitDottedNameMemberAccessExpression(e):(this.recordSourceMappingStart(e),this.emit(e.expression),this.writeToOutput("."),this.emitName(e.name,!1),this.recordSourceMappingEnd(e)))},t.prototype.emitQualifiedName=function(e){this.recordSourceMappingStart(e),this.emit(e.left),this.writeToOutput("."),this.emitName(e.right,!1),this.recordSourceMappingEnd(e)},t.prototype.emitBinaryExpression=function(t){this.recordSourceMappingStart(t);switch(t.kind()){case 173:this.emit(t.left),this.writeToOutput(", "),this.emit(t.right);break;default:this.emit(t.left);var n=e.SyntaxFacts.getText(e.SyntaxFacts.getOperatorTokenFromBinaryExpression(t.kind()));n==="instanceof"?this.writeToOutput(" instanceof "):n==="in"?this.writeToOutput(" in "):this.writeToOutput(" "+n+" "),this.emit(t.right)}this.recordSourceMappingEnd(t)},t.prototype.emitSimplePropertyAssignment=function(e){this.recordSourceMappingStart(e),this.emit(e.propertyName),this.writeToOutput(": "),this.emit(e.expression),this.recordSourceMappingEnd(e)},t.prototype.emitFunctionPropertyAssignment=function(t){this.recordSourceMappingStart(t),this.emit(t.propertyName),this.writeToOutput(": ");var n=this.semanticInfoChain.getDeclForAST(t),r=this.inArrowFunction;this.inArrowFunction=!1;var i=this.setContainer(5),s=t.propertyName,o=this.semanticInfoChain.getDeclForAST(t);this.pushDecl(o),this.recordSourceMappingStart(t),this.writeToOutput("function "),this.writeToOutput("(");var u=e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList);this.emitFunctionParameters(u),this.writeToOutput(")"),this.emitFunctionBodyStatements(t.propertyName.text(),t,u,t.block,null),this.recordSourceMappingEnd(t),this.recordSourceMappingEnd(t),this.emitComments(t,!1),this.popDecl(o),this.setContainer(i),this.inArrowFunction=r},t.prototype.emitConditionalExpression=function(e){this.emit(e.condition),this.writeToOutput(" ? "),this.emit(e.whenTrue),this.writeToOutput(" : "),this.emit(e.whenFalse)},t.prototype.emitThrowStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("throw "),this.emit(e.expression),this.recordSourceMappingEnd(e),this.writeToOutput(";")},t.prototype.emitExpressionStatement=function(e){var t=e.expression.kind()===219||e.expression.kind()===218;this.recordSourceMappingStart(e),t&&this.writeToOutput("("),this.emit(e.expression),t&&this.writeToOutput(")"),this.recordSourceMappingEnd(e),this.writeToOutput(";")},t.prototype.emitLabeledStatement=function(e){this.writeToOutputWithSourceMapRecord(e.identifier.text(),e.identifier),this.writeLineToOutput(":"),this.emitJavascript(e.statement,!0)},t.prototype.emitBlock=function(e){this.recordSourceMappingStart(e),this.writeLineToOutput(" {"),this.indenter.increaseIndent(),e.statements&&this.emitList(e.statements),this.emitCommentsArray(e.closeBraceLeadingComments,!1),this.indenter.decreaseIndent(),this.emitIndent(),this.writeToOutput("}"),this.recordSourceMappingEnd(e)},t.prototype.emitBreakStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("break"),e.identifier&&this.writeToOutput(" "+e.identifier.text()),this.recordSourceMappingEnd(e),this.writeToOutput(";")},t.prototype.emitContinueStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("continue"),e.identifier&&this.writeToOutput(" "+e.identifier.text()),this.recordSourceMappingEnd(e),this.writeToOutput(";")},t.prototype.emitWhileStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("while ("),this.emit(e.condition),this.writeToOutput(")"),this.emitBlockOrStatement(e.statement),this.recordSourceMappingEnd(e)},t.prototype.emitDoStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("do"),this.emitBlockOrStatement(e.statement),this.writeToOutputWithSourceMapRecord(" while",e.whileKeyword),this.writeToOutput("("),this.emit(e.condition),this.writeToOutput(")"),this.recordSourceMappingEnd(e),this.writeToOutput(";")},t.prototype.emitIfStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("if ("),this.emit(e.condition),this.writeToOutput(")"),this.emitBlockOrStatement(e.statement),e.elseClause&&(e.statement.kind()!==146?(this.writeLineToOutput(""),this.emitIndent()):this.writeToOutput(" "),this.emit(e.elseClause)),this.recordSourceMappingEnd(e)},t.prototype.emitElseClause=function(e){e.statement.kind()===147?(this.writeToOutput("else "),this.emit(e.statement)):(this.writeToOutput("else"),this.emitBlockOrStatement(e.statement))},t.prototype.emitReturnStatement=function(e){this.recordSourceMappingStart(e),e.expression?(this.writeToOutput("return "),this.emit(e.expression)):this.writeToOutput("return"),this.recordSourceMappingEnd(e),this.writeToOutput(";")},t.prototype.emitForInStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("for ("),e.left?this.emit(e.left):this.emit(e.variableDeclaration),this.writeToOutput(" in "),this.emit(e.expression),this.writeToOutput(")"),this.emitBlockOrStatement(e.statement),this.recordSourceMappingEnd(e)},t.prototype.emitForStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("for ("),e.variableDeclaration?this.emit(e.variableDeclaration):e.initializer&&this.emit(e.initializer),this.writeToOutput("; "),this.emitJavascript(e.condition,!1),this.writeToOutput(";"),e.incrementor&&(this.writeToOutput(" "),this.emitJavascript(e.incrementor,!1)),this.writeToOutput(")"),this.emitBlockOrStatement(e.statement),this.recordSourceMappingEnd(e)},t.prototype.emitWithStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("with ("),e.condition&&this.emit(e.condition),this.writeToOutput(")");var t=this.inWithBlock;this.inWithBlock=!0,this.emitBlockOrStatement(e.statement),this.inWithBlock=t,this.recordSourceMappingEnd(e)},t.prototype.emitSwitchStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("switch ("),this.emit(e.expression),this.recordSourceMappingStart(e.closeParenToken),this.writeToOutput(")"),this.recordSourceMappingEnd(e.closeParenToken),this.writeLineToOutput(" {"),this.indenter.increaseIndent(),this.emitList(e.switchClauses,!1),this.indenter.decreaseIndent(),this.emitIndent(),this.writeToOutput("}"),this.recordSourceMappingEnd(e)},t.prototype.emitCaseSwitchClause=function(e){this.recordSourceMappingStart(e),this.writeToOutput("case "),this.emit(e.expression),this.writeToOutput(":"),this.emitSwitchClauseBody(e.statements),this.recordSourceMappingEnd(e)},t.prototype.emitSwitchClauseBody=function(e){e.childCount()===1&&e.childAt(0).kind()===146?(this.emit(e.childAt(0)),this.writeLineToOutput("")):(this.writeLineToOutput(""),this.indenter.increaseIndent(),this.emit(e),this.indenter.decreaseIndent())},t.prototype.emitDefaultSwitchClause=function(e){this.recordSourceMappingStart(e),this.writeToOutput("default:"),this.emitSwitchClauseBody(e.statements),this.recordSourceMappingEnd(e)},t.prototype.emitTryStatement=function(e){this.recordSourceMappingStart(e),this.writeToOutput("try "),this.emit(e.block),this.emitJavascript(e.catchClause,!1),e.finallyClause&&this.emit(e.finallyClause),this.recordSourceMappingEnd(e)},t.prototype.emitCatchClause=function(e){this.writeToOutput(" "),this.recordSourceMappingStart(e),this.writeToOutput("catch ("),this.emit(e.identifier),this.writeToOutput(")"),this.emit(e.block),this.recordSourceMappingEnd(e)},t.prototype.emitFinallyClause=function(e){this.writeToOutput(" finally"),this.emit(e.block)},t.prototype.emitDebuggerStatement=function(e){this.writeToOutputWithSourceMapRecord("debugger",e),this.writeToOutput(";")},t.prototype.emitNumericLiteral=function(e){this.writeToOutputWithSourceMapRecord(e.text(),e)},t.prototype.emitRegularExpressionLiteral=function(e){this.writeToOutputWithSourceMapRecord(e.text(),e)},t.prototype.emitStringLiteral=function(e){this.writeToOutputWithSourceMapRecord(e.text(),e)},t.prototype.emitEqualsValueClause=function(e){this.writeToOutput(" = "),this.emit(e.value)},t.prototype.emitParameter=function(e){this.writeToOutputWithSourceMapRecord(e.identifier.text(),e)},t.prototype.emitConstructorDeclaration=function(e){e.block?this.emitConstructor(e):this.emitComments(e,!0,!0)},t.prototype.shouldEmitFunctionDeclaration=function(t){return t.preComments()!==null||!e.hasModifier(t.modifiers,8)&&t.block!==null},t.prototype.emitFunctionDeclaration=function(t){!e.hasModifier(t.modifiers,8)&&t.block!==null?this.emitFunction(t):this.emitComments(t,!0,!0)},t.prototype.emitSourceUnit=function(e){if(!this.document.isDeclareFile()){var t=this.semanticInfoChain.getDeclForAST(e);this.pushDecl(t),this.emitScriptElements(e),this.popDecl(t),this.emitCommentsArray(e.endOfFileTokenLeadingComments,!1)}},t.prototype.shouldEmitEnumDeclaration=function(t){return t.preComments()!==null||!e.ASTHelpers.enumIsElided(t)},t.prototype.emitEnumDeclaration=function(t){e.ASTHelpers.enumIsElided(t)?this.emitComments(t,!0,!0):(this.emitComments(t,!0),this.emitEnum(t),this.emitComments(t,!1))},t.prototype.shouldEmitModuleDeclaration=function(t){return t.preComments()!==null||!e.ASTHelpers.moduleIsElided(t)},t.prototype.emitModuleDeclaration=function(t){e.ASTHelpers.moduleIsElided(t)?this.emitComments(t,!0,!0):this.emitModuleDeclarationWorker(t)},t.prototype.shouldEmitClassDeclaration=function(t){return t.preComments()!==null||!e.hasModifier(t.modifiers,8)},t.prototype.emitClassDeclaration=function(t){e.hasModifier(t.modifiers,8)?this.emitComments(t,!0,!0):this.emitClass(t)},t.prototype.shouldEmitInterfaceDeclaration=function(e){return e.preComments()!==null},t.prototype.emitInterfaceDeclaration=function(e){this.emitComments(e,!0,!0)},t.prototype.firstVariableDeclarator=function(e){return e.declaration.declarators.nonSeparatorAt(0)},t.prototype.isNotAmbientOrHasInitializer=function(t){return!e.hasModifier(t.modifiers,8)||this.firstVariableDeclarator(t).equalsValueClause!==null},t.prototype.shouldEmitVariableStatement=function(e){return e.preComments()!==null||this.isNotAmbientOrHasInitializer(e)},t.prototype.emitVariableStatement=function(e){this.isNotAmbientOrHasInitializer(e)?(this.emitComments(e,!0),this.emit(e.declaration),this.writeToOutput(";"),this.emitComments(e,!1)):this.emitComments(e,!0,!0)},t.prototype.emitGenericType=function(e){this.emit(e.name)},t.prototype.shouldEmit=function(e){if(!e)return!1;switch(e.kind()){case 133:return this.shouldEmitImportDeclaration(e);case 131:return this.shouldEmitClassDeclaration(e);case 128:return this.shouldEmitInterfaceDeclaration(e);case 129:return this.shouldEmitFunctionDeclaration(e);case 130:return this.shouldEmitModuleDeclaration(e);case 148:return this.shouldEmitVariableStatement(e);case 223:return!1;case 132:return this.shouldEmitEnumDeclaration(e)}return!0},t.prototype.emit=function(e){if(!e)return;switch(e.kind()){case 2:return this.emitSeparatedList(e);case 1:return this.emitList(e);case 120:return this.emitSourceUnit(e);case 133:return this.emitImportDeclaration(e);case 134:return this.setExportAssignment(e);case 131:return this.emitClassDeclaration(e);case 128:return this.emitInterfaceDeclaration(e);case 11:return this.emitName(e,!0);case 225:return this.emitVariableDeclarator(e);case 219:return this.emitSimpleArrowFunctionExpression(e);case 218:return this.emitParenthesizedArrowFunctionExpression(e);case 129:return this.emitFunctionDeclaration(e);case 130:return this.emitModuleDeclaration(e);case 224:return this.emitVariableDeclaration(e);case 126:return this.emitGenericType(e);case 137:return this.emitConstructorDeclaration(e);case 132:return this.emitEnumDeclaration(e);case 243:return this.emitEnumElement(e);case 222:return this.emitFunctionExpression(e);case 148:return this.emitVariableStatement(e)}this.emitComments(e,!0),this.emitWorker(e),this.emitComments(e,!1)},t.prototype.emitWorker=function(e){if(!e)return;switch(e.kind()){case 13:return this.emitNumericLiteral(e);case 12:return this.emitRegularExpressionLiteral(e);case 14:return this.emitStringLiteral(e);case 24:case 32:case 37:return this.emitLiteralExpression(e);case 35:return this.emitThisExpression(e);case 50:return this.emitSuperExpression(e);case 217:return this.emitParenthesizedExpression(e);case 214:return this.emitArrayLiteralExpression(e);case 211:case 210:return this.emitPostfixUnaryExpression(e);case 167:case 166:case 165:case 164:case 168:case 169:return this.emitPrefixUnaryExpression(e);case 213:return this.emitInvocationExpression(e);case 221:return this.emitElementAccessExpression(e);case 212:return this.emitMemberAccessExpression(e);case 121:return this.emitQualifiedName(e);case 173:case 174:case 175:case 176:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 184:case 185:case 187:case 188:case 189:case 190:case 191:case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:case 208:case 209:return this.emitBinaryExpression(e);case 186:return this.emitConditionalExpression(e);case 232:return this.emitEqualsValueClause(e);case 242:return this.emitParameter(e);case 146:return this.emitBlock(e);case 235:return this.emitElseClause(e);case 147:return this.emitIfStatement(e);case 149:return this.emitExpressionStatement(e);case 139:return this.emitGetAccessor(e);case 140:return this.emitSetAccessor(e);case 157:return this.emitThrowStatement(e);case 150:return this.emitReturnStatement(e);case 216:return this.emitObjectCreationExpression(e);case 151:return this.emitSwitchStatement(e);case 233:return this.emitCaseSwitchClause(e);case 234:return this.emitDefaultSwitchClause(e);case 152:return this.emitBreakStatement(e);case 153:return this.emitContinueStatement(e);case 154:return this.emitForStatement(e);case 155:return this.emitForInStatement(e);case 158:return this.emitWhileStatement(e);case 163:return this.emitWithStatement(e);case 220:return this.emitCastExpression(e);case 215:return this.emitObjectLiteralExpression(e);case 240:return this.emitSimplePropertyAssignment(e);case 241:return this.emitFunctionPropertyAssignment(e);case 156:return this.writeToOutputWithSourceMapRecord(";",e);case 159:return this.emitTryStatement(e);case 236:return this.emitCatchClause(e);case 237:return this.emitFinallyClause(e);case 160:return this.emitLabeledStatement(e);case 161:return this.emitDoStatement(e);case 171:return this.emitTypeOfExpression(e);case 170:return this.emitDeleteExpression(e);case 172:return this.emitVoidExpression(e);case 162:return this.emitDebuggerStatement(e)}},t}();e.Emitter=o,e.getLastConstructor=u,e.getTrimmedTextLines=a})(r||(r={}));var r;(function(e){var t=function(){function e(){this.prefix="",this.suffix=""}return e.prototype.isString=function(){return!1},e.prototype.isArray=function(){return!1},e.prototype.isMarker=function(){return!this.isString()&&!this.isArray()},e.prototype.toString=function(){return e.memberNameToString(this)},e.memberNameToString=function(t,n,r){typeof r=="undefined"&&(r=0);var i=t.prefix;if(t.isString())i+=t.text;else if(t.isArray()){var s=t;for(var o=0;o<s.entries.length;o++){if(s.entries[o].isMarker()){n&&n.push(r+i.length);continue}i+=e.memberNameToString(s.entries[o],n,r+i.length),i+=s.delim}}return i+=t.suffix,i},e.create=function(e,t,i){if(typeof e=="string")return new n(e);var s=new r;return t&&(s.prefix=t),i&&(s.suffix=i),s.entries.push(e),s},e}();e.MemberName=t;var n=function(e){function t(t){e.call(this),this.text=t}return i(t,e),t.prototype.isString=function(){return!0},t}(t);e.MemberNameString=n;var r=function(e){function t(){e.call(this),this.delim="",this.entries=[]}return i(t,e),t.prototype.isArray=function(){return!0},t.prototype.add=function(e){this.entries.push(e)},t.prototype.addAll=function(e){for(var t=0;t<e.length;t++)this.entries.push(e[t])},t}(t);e.MemberNameArray=r})(r||(r={}));var r;(function(e){function t(e){var t=e&&e.charCodeAt(0);return e&&e.length>=2&&t===e.charCodeAt(e.length-1)&&(t===39||t===34)?e.substring(1,e.length-1):e}function n(e){return e&&e.length>=2&&e.charCodeAt(0)===e.charCodeAt(e.length-1)&&e.charCodeAt(0)===39}function r(e){return e&&e.length>=2&&e.charCodeAt(0)===e.charCodeAt(e.length-1)&&e.charCodeAt(0)===34}function i(e){return r(e)||n(e)}function s(e){return'"'+e+'"'}function u(e){return e.replace(o,"/")}function a(e){return e.length>5&&e.substring(e.length-5,e.length)===".d.ts"?e.substring(0,e.length-5):e.length>3&&e.substring(e.length-3,e.length)===".ts"?e.substring(0,e.length-3):e.length>3&&e.substring(e.length-3,e.length)===".js"?e.substring(0,e.length-3):e}function f(e){return c(e)?m(e):m(e)}function l(e,t){var n=e.toLocaleUpperCase(),r=t.toLocaleUpperCase(),i=r.length;return n.length>i&&n.substring(n.length-i,n.length)===r}function c(e){return l(e,".ts")}function h(e){return l(e,".d.ts")}function p(e,n,r){typeof n=="undefined"&&(n=!0),typeof r=="undefined"&&(r=!1);var i=r?u(e):a(t(e)),o=this.getPathComponents(i);return o.length?n?s(o[o.length-1]):o[o.length-1]:e}function d(e){return e.split("/")}function v(e,t,n){typeof n=="undefined"&&(n=!0),t=u(t);var r=this.getPathComponents(t),i=this.getPathComponents(e),s=0;for(;s<r.length&&s<i.length;s++)if(i[s]!==r[s])break;if(s!==0){var o="",a=r.slice(s,r.length);for(;s<i.length;s++)i[s]!==""&&(o+="../");return o+a.join("/")}return n&&t.indexOf("://")===-1&&(t="file:///"+t),t}function m(e){return a(t(e))+".d.ts"}function g(e){return e.length>0&&e.charAt(0)==="."}function y(e){return e.length>0&&(e.charAt(0)==="\\"||e.charAt(0)==="/"||e.indexOf(":\\")!==-1||e.indexOf(":/")!==-1)}function b(e){if(e==="")return e;var t=e.indexOf("/")!==-1;return t?E(e):""}function w(e){e=u(e);var t=d(e);return t.slice(0,t.length-1)}function E(e){var t=w(e);return t.join("/")+"/"}function S(e){return e&&e.charAt(e.length-1)!=="/"&&(e+="/"),e}function T(t){x.test(t)&&(t="file:"+t);var n=this.getPathComponents(u(t)),r=[];for(var i=0;i<n.length;i++){var s=n[i];if(s===".")continue;if(r.length>0&&e.ArrayUtilities.last(r)!==".."&&s===".."){r.pop();continue}r.push(s)}return r.join("/")}e.stripStartAndEndQuotes=t,e.isSingleQuoted=n,e.isDoubleQuoted=r,e.isQuoted=i,e.quoteStr=s;var o=/\\/g;e.switchToForwardSlashes=u,e.trimModName=a,e.getDeclareFilePath=f,e.isTSFile=c,e.isDTSFile=h,e.getPrettyName=p,e.getPathComponents=d,e.getRelativePathToFixedPath=v,e.changePathToDTS=m,e.isRelative=g,e.isRooted=y,e.getRootFilePath=b,e.filePathComponents=w,e.filePath=E,e.convertToDirectoryPath=S;var x=/^\\\\[^\\]/;e.normalizePath=T})(r||(r={}));var r;(function(e){function t(e){var t=/^(\/\/\/\s*<reference\s+no-default-lib=)('|")(.+?)\2\s*\/>/gim;return t.exec(e)}function n(n,r,i,s,o){var u=/^\/\/\/\s*<reference\s+/gim;if(u.exec(s)){var a=t(s);if(!a){var f=e.tripleSlashReferenceRegExp,l=f.exec(s);if(!!l){var c=e.normalizePath(l[3]),h=e.normalizePath(c),p=l.length>=7&&l[6]==="true";return p&&e.CompilerDiagnostics.debugPrint(c+" is resident"),{line:0,character:0,position:0,length:0,path:e.switchToForwardSlashes(h),isResident:p}}o.push(new e.Diagnostic(n,r,i,s.length,e.DiagnosticCode.Invalid_reference_directive_syntax))}}return null}function s(t,n,r,s){var o=0,u={line:-1,character:-1},a=(new Date).getTime();while(r.tokenKind!==10){if(r.tokenKind===49){var f=o+r.leadingTriviaWidth();r=n.scan(i,!1);if(e.SyntaxFacts.isIdentifierNameOrAnyKeyword(r)){r=n.scan(i,!1);if(r.tokenKind===107){r=n.scan(i,!1);if(r.tokenKind===65||r.tokenKind===66){r=n.scan(i,!1);if(r.tokenKind===72){var l=n.absoluteIndex();r=n.scan(i,!1),t.fillLineAndCharacterFromPosition(f,u);if(r.tokenKind===14){var c={line:u.line,character:u.character,position:l+r.leadingTriviaWidth(),length:r.width(),path:e.stripStartAndEndQuotes(e.switchToForwardSlashes(r.text())),isResident:!1};s.push(c)}}}}}}o=n.absoluteIndex(),r=n.scan(i,!1)}var h=(new Date).getTime()-a;e.fileResolutionScanImportsTime+=h}function o(e,r,i){var s=i.leadingTrivia(),o=0,u={line:-1,character:-1},a=!1,f=[],l=[];for(var c=0,h=s.count();c<h;c++){var p=s.syntaxTriviaAt(c);if(p.kind()===7){var d=p.fullText(),v=n(e,r,o,d,f);v&&(r.fillLineAndCharacterFromPosition(o,u),v.position=o,v.length=p.fullWidth(),v.line=u.line,v.character=u.character,l.push(v));var m=t(d);m&&(a=m[3]==="true")}o+=p.fullWidth()}return{noDefaultLib:a,diagnostics:f,referencedFiles:l}}function u(t,n,u){typeof u=="undefined"&&(u=!0);var a=e.SimpleText.fromScriptSnapshot(n),f=new e.Scanner(t,a,1,r),l=f.scan(i,!1),c=[];u&&s(a.lineMap(),f,l,c);var h=o(t,a.lineMap(),l);return i.length=0,{referencedFiles:h.referencedFiles,importedFiles:c,isLibFile:h.noDefaultLib,diagnostics:h.diagnostics}}function a(t){return new e.ParseOptions(t.codeGenTarget(),t.allowAutomaticSemicolonInsertion())}function f(e,t){return u(e,t,!1).referencedFiles}e.tripleSlashReferenceRegExp=/^(\/\/\/\s*<reference\s+path=)('|")(.+?)\2\s*(static=('|")(.+?)\2\s*)*\/>/;var r=e.ArrayUtilities.createArray(2048,0),i=[];e.preProcessFile=u,e.getParseOptions=a,e.getReferencedFiles=f})(r||(r={}));var r;(function(e){var t=function(){function e(){this.resolvedFiles=[],this.diagnostics=[],this.seenNoDefaultLibTag=!1}return e}();e.ReferenceResolutionResult=t;var n=function(){function e(e,t,n,r,i){this.filePath=e,this.lineMap=t,this.position=n,this.length=r,this.isImported=i}return e}(),r=function(){function r(e,t,n){this.useCaseSensitiveFileResolution=n,this.inputFileNames=e,this.host=t,this.visited={}}return r.resolve=function(e,t,n){var i=new r(e,t,n);return i.resolveInputFiles()},r.prototype.resolveInputFiles=function(){var e=this,r=new t;if(!this.inputFileNames||this.inputFileNames.length<=0)return r;var i=new n(null,null,0,0,!1);return this.inputFileNames.forEach(function(t){return e.resolveIncludedFile(t,i,r)}),r},r.prototype.resolveIncludedFile=function(t,n,r){var i=this.getNormalizedFilePath(t,n.filePath);if(this.isSameFile(i,n.filePath))return n.isImported||r.diagnostics.push(new e.Diagnostic(n.filePath,n.lineMap,n.position,n.length,e.DiagnosticCode.A_file_cannot_have_a_reference_to_itself,null)),i;if(!e.isTSFile(i)&&!e.isDTSFile(i)){var s=i+".d.ts",o=i+".ts";this.host.fileExists(o)?i=o:i=s}return this.host.fileExists(i)?this.resolveFile(i,r):(n.isImported||r.diagnostics.push(new e.Diagnostic(n.filePath,n.lineMap,n.position,n.length,e.DiagnosticCode.Cannot_resolve_referenced_file_0,[t])),i)},r.prototype.resolveImportedFile=function(t,n,r){var i=e.isRelative(t),s=i?!1:e.isRooted(t);if(i||s)return this.resolveIncludedFile(t,n,r);var o=this.host.getParentDirectory(n.filePath),u=null,a=t+".d.ts",f=t+".ts",l=(new Date).getTime();do{c=this.host.resolveRelativePath(f,o);if(this.host.fileExists(c)){u=c;break}var c=this.host.resolveRelativePath(a,o);if(this.host.fileExists(c)){u=c;break}o=this.host.getParentDirectory(o)}while(o);return e.fileResolutionImportFileSearchTime+=(new Date).getTime()-l,u?this.resolveFile(u,r):t},r.prototype.resolveFile=function(t,r){var i=this,s=this.isVisited(t);if(!s){this.recordVisitedFile(t);var o=(new Date).getTime(),u=this.host.getScriptSnapshot(t),a=(new Date).getTime()-o;e.fileResolutionIOTime+=a;var f=e.LineMap1.fromScriptSnapshot(u),l=e.preProcessFile(t,u);r.diagnostics.push.apply(r.diagnostics,l.diagnostics),l.isLibFile&&(r.seenNoDefaultLibTag=!0);var c=[];l.referencedFiles.forEach(function(e){var s=new n(t,f,e.position,e.length,!1),o=i.resolveIncludedFile(e.path,s,r);c.push(o)});var h=[];for(var p=0;p<l.importedFiles.length;p++){var d=l.importedFiles[p],v=new n(t,f,d.position,d.length,!0),m=this.resolveImportedFile(d.path,v,r);h.push(m)}r.resolvedFiles.push({path:t,referencedFiles:c,importedFiles:h})}else t=s;return t},r.prototype.getNormalizedFilePath=function(e,t){var n=t?this.host.getParentDirectory(t):"",r=this.host.resolveRelativePath(e,n);return r},r.prototype.getUniqueFileId=function(e){return this.useCaseSensitiveFileResolution?e:e.toLocaleUpperCase()},r.prototype.recordVisitedFile=function(e){this.visited[this.getUniqueFileId(e)]=e},r.prototype.isVisited=function(e){return this.visited[this.getUniqueFileId(e)]},r.prototype.isSameFile=function(e,t){return!e||!t?!1:this.useCaseSensitiveFileResolution?e===t:e.toLocaleUpperCase()===t.toLocaleUpperCase()},r}();e.ReferenceResolver=r})(r||(r={}));var r;(function(e){var t=function(){function t(e,t,n){this.name=e,this.writeByteOrderMark=t,this.outputFileType=n,this.contents="",this.onNewLine=!0}return t.prototype.Write=function(e){this.contents+=e,this.onNewLine=!1},t.prototype.WriteLine=function(t){this.contents+=t,this.contents+=e.newLine(),this.onNewLine=!0},t.prototype.Close=function(){},t.prototype.getOutputFile=function(){return new e.OutputFile(this.name,this.writeByteOrderMark,this.contents,this.outputFileType)},t}();e.TextWriter=t;var n=function(){function n(n,r,i,s,o){this.emittingFileName=n,this.document=r,this.compiler=i,this.emitOptions=s,this.semanticInfoChain=o,this.declFile=null,this.indenter=new e.Indenter,this.emittedReferencePaths=!1,this.declFile=new t(n,this.document.byteOrderMark!==0,2)}return n.prototype.getOutputFile=function(){return this.declFile.getOutputFile()},n.prototype.emitDeclarations=function(e){this.emitDeclarationsForSourceUnit(e)},n.prototype.emitDeclarationsForList=function(e){for(var t=0,n=e.childCount();t<n;t++)this.emitDeclarationsForAST(e.childAt(t))},n.prototype.emitSeparatedList=function(e){for(var t=0,n=e.nonSeparatorCount();t<n;t++)this.emitDeclarationsForAST(e.nonSeparatorAt(t))},n.prototype.emitDeclarationsForAST=function(e){switch(e.kind()){case 148:return this.emitDeclarationsForVariableStatement(e);case 141:return this.emitPropertySignature(e);case 225:return this.emitVariableDeclarator(e,!0,!0);case 136:return this.emitDeclarationsForMemberVariableDeclaration(e);case 137:return this.emitDeclarationsForConstructorDeclaration(e);case 139:return this.emitDeclarationsForGetAccessor(e);case 140:return this.emitDeclarationsForSetAccessor(e);case 138:return this.emitIndexMemberDeclaration(e);case 144:return this.emitIndexSignature(e);case 142:return this.emitCallSignature(e);case 143:return this.emitConstructSignature(e);case 145:return this.emitMethodSignature(e);case 129:return this.emitDeclarationsForFunctionDeclaration(e);case 135:return this.emitMemberFunctionDeclaration(e);case 131:return this.emitDeclarationsForClassDeclaration(e);case 128:return this.emitDeclarationsForInterfaceDeclaration(e);case 133:return this.emitDeclarationsForImportDeclaration(e);case 130:return this.emitDeclarationsForModuleDeclaration(e);case 132:return this.emitDeclarationsForEnumDeclaration(e);case 134:return this.emitDeclarationsForExportAssignment(e)}},n.prototype.getIndentString=function(e){return typeof e=="undefined"&&(e=!1),this.indenter.getIndent()},n.prototype.emitIndent=function(){this.declFile.Write(this.getIndentString())},n.prototype.canEmitDeclarations=function(t){var r=n.getEnclosingContainer(t);if(r.kind()===130||r.kind()===120){var i=this.semanticInfoChain.getDeclForAST(t);if(!e.hasFlag(i.flags,1)){var s=(new Date).getTime(),o=this.semanticInfoChain.getSymbolForAST(t),u=o&&o.isExternallyVisible();return e.declarationEmitIsExternallyVisibleTime+=(new Date).getTime()-s,u}}return!0},n.prototype.getDeclFlagsString=function(t,r){var i=this.getIndentString(),s=t.flags;if(e.hasFlag(s,16))e.hasFlag(s,2)&&(i+="private "),i+="static ";else if(e.hasFlag(s,2))i+="private ";else if(e.hasFlag(s,4))i+="public ";else{var o=!e.hasFlag(s,1),u=this.semanticInfoChain.getASTForDecl(t),a=n.getEnclosingContainer(u),f=a.kind()===120&&this.document.isExternalModule();f&&e.hasFlag(s,1)&&(i+="export ",o=!0),(f||a.kind()===120)&&o&&r!=="interface"&&r!=="import"&&(i+="declare "),i+=r+" "}return i},n.prototype.emitDeclFlags=function(e,t){this.declFile.Write(this.getDeclFlagsString(this.semanticInfoChain.getDeclForAST(e),t))},n.prototype.emitTypeNamesMember=function(e,t){typeof t=="undefined"&&(t=!1),e.prefix==="{ "?(t&&this.emitIndent(),this.declFile.WriteLine("{"),this.indenter.increaseIndent(),t=!0):e.prefix!==""&&(t&&this.emitIndent(),this.declFile.Write(e.prefix),t=!1);if(e.isString())t&&this.emitIndent(),this.declFile.Write(e.text);else if(e.isArray()){var n=e;for(var r=0;r<n.entries.length;r++)this.emitTypeNamesMember(n.entries[r],t),n.delim==="; "&&this.declFile.WriteLine(";")}e.suffix==="}"?(this.indenter.decreaseIndent(),this.emitIndent(),this.declFile.Write(e.suffix)):this.declFile.Write(e.suffix)},n.prototype.emitTypeSignature=function(t,r){var i=n.getEnclosingContainer(t),s=(new Date).getTime(),o=this.semanticInfoChain.getDeclForAST(i),u=o.getSymbol();e.declarationEmitTypeSignatureTime+=(new Date).getTime()-s;var a=t.kind()!==126,f=r.getScopedNameEx(u,!1,!1,!1,!1,!1,a);this.emitTypeNamesMember(f)},n.prototype.emitComment=function(t){var n=e.getTrimmedTextLines(t);this.declFile.onNewLine?this.emitIndent():t.kind()!==6&&(this.declFile.WriteLine(""),this.emitIndent()),this.declFile.Write(n[0]);for(var r=1;r<n.length;r++)this.declFile.WriteLine(""),this.emitIndent(),this.declFile.Write(n[r]);t.endsLine||t.kind()!==6?this.declFile.WriteLine(""):this.declFile.Write(" ")},n.prototype.emitDeclarationComments=function(t,n){typeof n=="undefined"&&(n=!0);if(this.emitOptions.compilationSettings().removeComments())return;var r=t.docComments?t.docComments():e.ASTHelpers.docComments(t);this.writeDeclarationComments(r,n)},n.prototype.writeDeclarationComments=function(e,t){typeof t=="undefined"&&(t=!0);if(e.length>0){for(var n=0;n<e.length;n++)this.emitComment(e[n]);t?this.declFile.onNewLine||this.declFile.WriteLine(""):this.declFile.onNewLine&&this.emitIndent()}},n.prototype.emitTypeOfVariableDeclaratorOrParameter=function(t){var n=(new Date).getTime(),r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol();e.declarationEmitGetBoundDeclTypeTime+=(new Date).getTime()-n;var s=i.type;e.Debug.assert(s),this.declFile.Write(": "),this.emitTypeSignature(t,s)},n.prototype.emitPropertySignature=function(e){this.emitDeclarationComments(e),this.emitIndent(),this.declFile.Write(e.propertyName.text()),e.questionToken&&this.declFile.Write("?"),this.emitTypeOfVariableDeclaratorOrParameter(e),this.declFile.WriteLine(";")},n.prototype.emitVariableDeclarator=function(t,n,r){this.canEmitDeclarations(t)&&(this.emitDeclarationComments(t),n&&this.emitDeclFlags(t,"var"),this.declFile.Write(t.propertyName.text()),e.hasModifier(e.ASTHelpers.getVariableDeclaratorModifiers(t),2)||this.emitTypeOfVariableDeclaratorOrParameter(t),r?this.declFile.WriteLine(";"):this.declFile.Write(", "))},n.prototype.emitClassElementModifiers=function(t){e.hasModifier(t,16)?(e.hasModifier(t,2)&&this.declFile.Write("private "),this.declFile.Write("static ")):e.hasModifier(t,2)?this.declFile.Write("private "):this.declFile.Write("public ")},n.prototype.emitDeclarationsForMemberVariableDeclaration=function(t){this.canEmitDeclarations(t)&&(this.emitDeclarationComments(t),this.declFile.Write(this.getIndentString()),this.emitClassElementModifiers(t.modifiers),this.declFile.Write(t.variableDeclarator.propertyName.text()),e.hasModifier(t.modifiers,2)||this.emitTypeOfVariableDeclaratorOrParameter(t),this.declFile.WriteLine(";"))},n.prototype.emitDeclarationsForVariableStatement=function(e){this.emitDeclarationsForVariableDeclaration(e.declaration)},n.prototype.emitDeclarationsForVariableDeclaration=function(e){var t=e.declarators.nonSeparatorCount();for(var n=0;n<t;n++)this.emitVariableDeclarator(e.declarators.nonSeparatorAt(n),n===0,n===t-1)},n.prototype.emitArgDecl=function(e,t,n,r){this.indenter.increaseIndent(),this.emitDeclarationComments(e,!1),this.declFile.Write(t.text()),n&&this.declFile.Write("?"),this.indenter.decreaseIndent(),r||this.emitTypeOfVariableDeclaratorOrParameter(e)},n.prototype.isOverloadedCallSignature=function(t){var n=(new Date).getTime(),r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol();e.declarationEmitIsOverloadedCallSignatureTime+=(new Date).getTime()-n;var s=i.type,o=s.getCallSignatures(),u=o&&o.length>1;return u},n.prototype.emitDeclarationsForConstructorDeclaration=function(t){var n=(new Date).getTime(),r=this.semanticInfoChain.getSymbolForAST(t);e.declarationEmitFunctionDeclarationGetSymbolTime+=(new Date).getTime()-n;var i=r.type;if(t.block){var s=i.getConstructSignatures();if(s&&s.length>1)return}var o=this.semanticInfoChain.getDeclForAST(t),u=o.getSignatureSymbol();this.emitDeclarationComments(t),this.emitIndent(),this.declFile.Write("constructor"),this.declFile.Write("("),this.emitParameters(!1,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList)),this.declFile.Write(")"),this.declFile.WriteLine(";")},n.prototype.emitParameterList=function(t,n){this.declFile.Write("("),this.emitParameters(t,e.ASTHelpers.parametersFromParameterList(n)),this.declFile.Write(")")},n.prototype.emitParameters=function(e,t){var n=t.lastParameterIsRest(),r=t.length;n&&r--;for(var i=0;i<r;i++)this.emitArgDecl(t.astAt(i),t.identifierAt(i),t.isOptionalAt(i),e),i<r-1&&this.declFile.Write(", ");if(n){t.length>1?this.declFile.Write(", ..."):this.declFile.Write("...");var s=t.length-1;this.emitArgDecl(t.astAt(s),t.identifierAt(s),t.isOptionalAt(s),e)}},n.prototype.emitMemberFunctionDeclaration=function(t){var n=(new Date).getTime(),r=this.semanticInfoChain.getSymbolForAST(t);e.declarationEmitFunctionDeclarationGetSymbolTime+=(new Date).getTime()-n;var i=r.type;if(t.block){var s=i.getConstructSignatures();if(s&&s.length>1)return;if(this.isOverloadedCallSignature(t))return}else if(e.hasModifier(t.modifiers,2)&&this.isOverloadedCallSignature(t)){var o=i.getCallSignatures();e.Debug.assert(o&&o.length>1);var u=o[0].isDefinition()?o[1]:o[0],a=u.getDeclarations()[0],f=this.semanticInfoChain.getASTForDecl(a);if(f!==t)return}if(!this.canEmitDeclarations(t))return;var l=this.semanticInfoChain.getDeclForAST(t),c=l.getSignatureSymbol();this.emitDeclarationComments(t),this.emitDeclFlags(t,"function");var h=t.propertyName.text();this.declFile.Write(h),this.emitTypeParameters(t.callSignature.typeParameterList,c);var p=e.hasModifier(t.modifiers,2);this.emitParameterList(p,t.callSignature.parameterList);if(!p){var d=c.returnType;this.declFile.Write(": "),this.emitTypeSignature(t,d)}this.declFile.WriteLine(";")},n.prototype.emitCallSignature=function(t){var n=this.semanticInfoChain.getDeclForAST(t);this.emitDeclarationComments(t);var r=n.getSignatureSymbol();this.emitTypeParameters(t.typeParameterList,r),this.emitIndent(),this.declFile.Write("("),this.emitParameters(!1,e.ASTHelpers.parametersFromParameterList(t.parameterList)),this.declFile.Write(")");var i=r.returnType;this.declFile.Write(": "),i?this.emitTypeSignature(t,i):this.declFile.Write("any"),this.declFile.WriteLine(";")},n.prototype.emitConstructSignature=function(t){var n=this.semanticInfoChain.getDeclForAST(t),r=(new Date).getTime(),i=this.semanticInfoChain.getSymbolForAST(t);e.declarationEmitFunctionDeclarationGetSymbolTime+=(new Date).getTime()-r,this.emitDeclarationComments(t),this.emitIndent(),this.declFile.Write("new");var s=n.getSignatureSymbol();this.emitTypeParameters(t.callSignature.typeParameterList,s),this.declFile.Write("("),this.emitParameters(!1,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList)),this.declFile.Write(")");var o=s.returnType;this.declFile.Write(": "),o?this.emitTypeSignature(t,o):this.declFile.Write("any"),this.declFile.WriteLine(";")},n.prototype.emitMethodSignature=function(t){var n=this.semanticInfoChain.getDeclForAST(t),r=(new Date).getTime(),i=this.semanticInfoChain.getSymbolForAST(t);e.declarationEmitFunctionDeclarationGetSymbolTime+=(new Date).getTime()-r,this.emitDeclarationComments(t),this.emitIndent(),this.declFile.Write(t.propertyName.text()),t.questionToken&&this.declFile.Write("? ");var s=n.getSignatureSymbol();this.emitTypeParameters(t.callSignature.typeParameterList,s),this.declFile.Write("("),this.emitParameters(!1,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList)),this.declFile.Write(")");var o=s.returnType;this.declFile.Write(": "),o?this.emitTypeSignature(t,o):this.declFile.Write("any"),this.declFile.WriteLine(";")},n.prototype.emitDeclarationsForFunctionDeclaration=function(t){var n=this.semanticInfoChain.getDeclForAST(t),r=(new Date).getTime(),i=this.semanticInfoChain.getSymbolForAST(t);e.declarationEmitFunctionDeclarationGetSymbolTime+=(new Date).getTime()-r;if(t.block){var s=i.type,o=s.getConstructSignatures();if(o&&o.length>1)return;if(this.isOverloadedCallSignature(t))return}if(!this.canEmitDeclarations(t))return;this.emitDeclarationComments(t);var u=t.identifier.text();this.emitDeclFlags(t,"function"),u!==""||!t.identifier||t.identifier.text().length>0?this.declFile.Write(u):n.kind===2097152&&this.declFile.Write("new");var a=n.getSignatureSymbol();this.emitTypeParameters(t.callSignature.typeParameterList,a),this.declFile.Write("("),this.emitParameters(!1,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList)),this.declFile.Write(")");var f=a.returnType;this.declFile.Write(": "),f?this.emitTypeSignature(t,f):this.declFile.Write("any"),this.declFile.WriteLine(";")},n.prototype.emitIndexMemberDeclaration=function(e){this.emitDeclarationsForAST(e.indexSignature)},n.prototype.emitIndexSignature=function(t){if(!this.canEmitDeclarations(t))return;this.emitDeclarationComments(t),this.emitIndent(),this.declFile.Write("["),this.emitParameters(!1,e.ASTHelpers.parametersFromParameter(t.parameter)),this.declFile.Write("]");var n=this.semanticInfoChain.getDeclForAST(t),r=n.getSignatureSymbol(),i=r.returnType;this.declFile.Write(": "),this.emitTypeSignature(t,i),this.declFile.WriteLine(";")},n.prototype.emitBaseList=function(e,t){if(e&&e.nonSeparatorCount()>0){var n=t?"extends":"implements";this.declFile.Write(" "+n+" ");var r=e.nonSeparatorCount();for(var i=0;i<r;i++){i>0&&this.declFile.Write(", ");var s=e.nonSeparatorAt(i),o=this.semanticInfoChain.getSymbolForAST(s);this.emitTypeSignature(s,o)}}},n.prototype.emitAccessorDeclarationComments=function(t){if(this.emitOptions.compilationSettings().removeComments())return;var n=(new Date).getTime(),r=e.PullHelpers.getGetterAndSetterFunction(t,this.semanticInfoChain);e.declarationEmitGetAccessorFunctionTime+=(new Date).getTime();var i=[];r.getter&&(i=i.concat(e.ASTHelpers.docComments(r.getter))),r.setter&&(i=i.concat(e.ASTHelpers.docComments(r.setter))),this.writeDeclarationComments(i)},n.prototype.emitDeclarationsForGetAccessor=function(e){this.emitMemberAccessorDeclaration(e,e.modifiers,e.propertyName)},n.prototype.emitDeclarationsForSetAccessor=function(e){this.emitMemberAccessorDeclaration(e,e.modifiers,e.propertyName)},n.prototype.emitMemberAccessorDeclaration=function(t,n,r){var i=(new Date).getTime(),s=e.PullHelpers.getAccessorSymbol(t,this.semanticInfoChain);e.declarationEmitGetAccessorFunctionTime+=(new Date).getTime();if(t.kind()===140&&s.getGetter())return;var o=e.hasModifier(n,2);this.emitAccessorDeclarationComments(t),this.declFile.Write(this.getIndentString()),this.emitClassElementModifiers(n),this.declFile.Write(r.text());if(!o){this.declFile.Write(" : ");var u=s.type;this.emitTypeSignature(t,u)}this.declFile.WriteLine(";")},n.prototype.emitClassMembersFromConstructorDefinition=function(t){var n=t.callSignature.parameterList.parameters.nonSeparatorCount();e.lastParameterIsRest(t.callSignature.parameterList)&&n--;for(var r=0;r<n;r++){var i=t.callSignature.parameterList.parameters.nonSeparatorAt(r),s=this.semanticInfoChain.getDeclForAST(i);if(e.hasFlag(s.flags,8388608)){var o=this.semanticInfoChain.getDeclForAST(t);this.emitDeclarationComments(i),this.declFile.Write(this.getIndentString()),this.emitClassElementModifiers(i.modifiers),this.declFile.Write(i.identifier.text()),e.hasModifier(i.modifiers,2)||this.emitTypeOfVariableDeclaratorOrParameter(i),this.declFile.WriteLine(";")}}},n.prototype.emitDeclarationsForClassDeclaration=function(t){if(!this.canEmitDeclarations(t))return;var n=t.identifier.text();this.emitDeclarationComments(t);var r=this.semanticInfoChain.getDeclForAST(t);this.emitDeclFlags(t,"class"),this.declFile.Write(n),this.emitTypeParameters(t.typeParameterList),this.emitHeritageClauses(t.heritageClauses),this.declFile.WriteLine(" {"),this.indenter.increaseIndent();var i=e.getLastConstructor(t);i&&this.emitClassMembersFromConstructorDefinition(i),this.emitDeclarationsForList(t.classElements),this.indenter.decreaseIndent(),this.emitIndent(),this.declFile.WriteLine("}")},n.prototype.emitHeritageClauses=function(e){if(e)for(var t=0,n=e.childCount();t<n;t++)this.emitHeritageClause(e.childAt(t))},n.prototype.emitHeritageClause=function(e){this.emitBaseList(e.typeNames,e.kind()===230)},n.getEnclosingContainer=function(t){var n=e.ASTHelpers.getEnclosingModuleDeclaration(t);e.ASTHelpers.isAnyNameOfModule(n,t)&&(t=n),t=t.parent;while(t){if(t.kind()===131||t.kind()===128||t.kind()===130||t.kind()===120)return t;t=t.parent}return null},n.prototype.emitTypeParameters=function(t,r){if(!t||!t.typeParameters.nonSeparatorCount())return;this.declFile.Write("<");var i=n.getEnclosingContainer(t),s=(new Date).getTime(),o=this.semanticInfoChain.getDeclForAST(i),u=o.getSymbol();e.declarationEmitGetTypeParameterSymbolTime+=(new Date).getTime()-s;var a;r?a=r.getTypeParameters():a=u.getTypeArgumentsOrTypeParameters();for(var f=0;f<a.length;f++){f&&this.declFile.Write(", ");var l=a[f].getScopedNameEx(u,!1,!0);this.emitTypeNamesMember(l)}this.declFile.Write(">")},n.prototype.emitDeclarationsForInterfaceDeclaration=function(e){if(!this.canEmitDeclarations(e))return;var t=e.identifier.text();this.emitDeclarationComments(e);var n=this.semanticInfoChain.getDeclForAST(e);this.emitDeclFlags(e,"interface"),this.declFile.Write(t),this.emitTypeParameters(e.typeParameterList),this.emitHeritageClauses(e.heritageClauses),this.declFile.WriteLine(" {"),this.indenter.increaseIndent(),this.emitSeparatedList(e.body.typeMembers),this.indenter.decreaseIndent(),this.emitIndent(),this.declFile.WriteLine("}")},n.prototype.emitDeclarationsForImportDeclaration=function(t){var n=this.semanticInfoChain.getDeclForAST(t),r=n.getSymbol(),i=e.hasModifier(t.modifiers,1);if(i||r.typeUsedExternally()||e.PullContainerSymbol.usedAsSymbol(r.getContainer(),r))this.emitDeclarationComments(t),this.emitIndent(),i&&this.declFile.Write("export "),this.declFile.Write("import "),this.declFile.Write(t.identifier.text()+" = "),t.moduleReference.kind()===245?this.declFile.WriteLine(["r","e","q","u","i","r","e"].join("")+"("+t.moduleReference.stringLiteral.text()+");"):this.declFile.WriteLine(e.ASTHelpers.getNameOfIdenfierOrQualifiedName(t.moduleReference.moduleName)+";")},n.prototype.emitDeclarationsForEnumDeclaration=function(e){if(!this.canEmitDeclarations(e))return;this.emitDeclarationComments(e);var t=this.semanticInfoChain.getDeclForAST(e);this.emitDeclFlags(e,"enum"),this.declFile.WriteLine(e.identifier.text()+" {"),this.indenter.increaseIndent();var n=e.enumElements.nonSeparatorCount();for(var r=0;r<n;r++){var i=e.enumElements.nonSeparatorAt(r),s=i,o=this.semanticInfoChain.getDeclForAST(s);this.emitDeclarationComments(s),this.emitIndent(),this.declFile.Write(s.propertyName.text()),o.constantValue!==null&&this.declFile.Write(" = "+o.constantValue),this.declFile.WriteLine(",")}this.indenter.decreaseIndent(),this.emitIndent(),this.declFile.WriteLine("}")},n.prototype.emitDeclarationsForModuleDeclaration=function(t){var n=t.stringLiteral||e.ArrayUtilities.first(e.ASTHelpers.getModuleNames(t.name));if(!this.canEmitDeclarations(n))return;this.emitDeclarationComments(t),this.emitDeclFlags(n,"module"),t.stringLiteral?this.declFile.Write(t.stringLiteral.text()):this.declFile.Write(e.ASTHelpers.getNameOfIdenfierOrQualifiedName(t.name)),this.declFile.WriteLine(" {"),this.indenter.increaseIndent(),this.emitDeclarationsForList(t.moduleElements),this.indenter.decreaseIndent(),this.emitIndent(),this.declFile.WriteLine("}")},n.prototype.emitDeclarationsForExportAssignment=function(e){this.emitIndent(),this.declFile.Write("export = "),this.declFile.Write(e.identifier.text()),this.declFile.WriteLine(";")},n.prototype.resolveScriptReference=function(t,n){if(!this.emitOptions.compilationSettings().noResolve()||e.isRooted(n))return n;var r=e.convertToDirectoryPath(e.switchToForwardSlashes(e.getRootFilePath(t.fileName))),i=this.emitOptions.resolvePath(r+n);return i},n.prototype.emitReferencePaths=function(t){if(this.emittedReferencePaths)return;var n=[];if(this.document.emitToOwnOutputFile()){var r=this.document.referencedFiles,i=!1;for(var s=0;s<r.length;s++){var o=this.resolveScriptReference(this.document,r[s]),u=this.compiler.getDocument(o);u&&(u.emitToOwnOutputFile()||u.isDeclareFile()||!i)&&(n=n.concat(u),!u.isDeclareFile()&&u.isExternalModule()&&(i=!0))}}else{var a=this.compiler.fileNames();for(var f=0;f<a.length;f++){var l=this.compiler.getDocument(a[f]);if(!l.isDeclareFile()&&!l.isExternalModule()){var r=l.referencedFiles;for(var s=0;s<r.length;s++){var o=this.resolveScriptReference(l,r[s]),u=this.compiler.getDocument(o);if(u&&(u.isDeclareFile()||u.isExternalModule())){for(var c=0;c<n.length;c++)if(n[c]===u)break;c===n.length&&(n=n.concat(u))}}}}}var h=n.length?e.getRootFilePath(this.emittingFileName):null;for(var f=0;f<n.length;f++){var u=n[f],p;u.isDeclareFile()?p=u.fileName:p=this.compiler.mapOutputFileName(u,this.emitOptions,e.TypeScriptCompiler.mapToDTSFileName),p=e.getRelativePathToFixedPath(h,p,!1),this.declFile.WriteLine('/// <reference path="'+p+'" />')}this.emittedReferencePaths=!0},n.prototype.emitDeclarationsForSourceUnit=function(e){this.emitReferencePaths(e),this.emitDeclarationsForList(e.moduleElements)},n}();e.DeclarationEmitter=n})(r||(r={}));var r;(function(e){var t=function(){function t(e){var n=Math.max(1,t.computeM(e)),r=Math.max(1,t.computeK(e)),i=n+7&-8;this.bitArray=[];for(var s=0,o=i;s<o;s++)this.bitArray[s]=!1;this.hashFunctionCount=r}return t.computeM=function(e){var n=t.falsePositiveProbability,r=e,i=r*Math.log(n),s=Math.log(1/Math.pow(2,Math.log(2)));return Math.ceil(i/s)},t.computeK=function(e){var n=e,r=t.computeM(e),i=Math.log(2)*r/n;return Math.round(i)},t.prototype.computeHash=function(t,n){return e.Hash.computeMurmur2StringHashCode(t,n)},t.prototype.addKeys=function(e){for(var t in e)e[t]&&this.add(t)},t.prototype.add=function(e){for(var t=0;t<this.hashFunctionCount;t++){var n=this.computeHash(e,t);n%=this.bitArray.length,this.bitArray[Math.abs(n)]=!0}},t.prototype.probablyContains=function(e){for(var t=0;t<this.hashFunctionCount;t++){var n=this.computeHash(e,t);n%=this.bitArray.length;if(!this.bitArray[Math.abs(n)])return!1}return!0},t.prototype.isEquivalent=function(e){return t.isEquivalent(this.bitArray,e.bitArray)&&this.hashFunctionCount===e.hashFunctionCount},t.isEquivalent=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.falsePositiveProbability=1e-4,t}();e.BloomFilter=t})(r||(r={}));var r;(function(e){var t=function(e){function t(t){e.call(this),this.list=t}return i(t,e),t.prototype.visitToken=function(e){this.list[e.text()]=!0},t}(e.SyntaxWalker);e.IdentifierWalker=t})(r||(r={}));var r;(function(e){var t=function(){function e(){this.propagateEnumConstants=!1,this.removeComments=!1,this.watch=!1,this.noResolve=!1,this.allowAutomaticSemicolonInsertion=!0,this.noImplicitAny=!1,this.noLib=!1,this.codeGenTarget=0,this.moduleGenTarget=0,this.outFileOption="",this.outDirOption="",this.mapSourceFiles=!1,this.mapRoot="",this.sourceRoot="",this.generateDeclarationFiles=!1,this.useCaseSensitiveFileResolution=!1,this.gatherDiagnostics=!1,this.codepage=null,this.createFileLog=!1}return e}();e.CompilationSettings=t;var n=function(){function n(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){this._propagateEnumConstants=e,this._removeComments=t,this._watch=n,this._noResolve=r,this._allowAutomaticSemicolonInsertion=i,this._noImplicitAny=s,this._noLib=o,this._codeGenTarget=u,this._moduleGenTarget=a,this._outFileOption=f,this._outDirOption=l,this._mapSourceFiles=c,this._mapRoot=h,this._sourceRoot=p,this._generateDeclarationFiles=d,this._useCaseSensitiveFileResolution=v,this._gatherDiagnostics=m,this._codepage=g,this._createFileLog=y}return n.prototype.propagateEnumConstants=function(){return this._propagateEnumConstants},n.prototype.removeComments=function(){return this._removeComments},n.prototype.watch=function(){return this._watch},n.prototype.noResolve=function(){return this._noResolve},n.prototype.allowAutomaticSemicolonInsertion=function(){return this._allowAutomaticSemicolonInsertion},n.prototype.noImplicitAny=function(){return this._noImplicitAny},n.prototype.noLib=function(){return this._noLib},n.prototype.codeGenTarget=function(){return this._codeGenTarget},n.prototype.moduleGenTarget=function(){return this._moduleGenTarget},n.prototype.outFileOption=function(){return this._outFileOption},n.prototype.outDirOption=function(){return this._outDirOption},n.prototype.mapSourceFiles=function(){return this._mapSourceFiles},n.prototype.mapRoot=function(){return this._mapRoot},n.prototype.sourceRoot=function(){return this._sourceRoot},n.prototype.generateDeclarationFiles=function(){return this._generateDeclarationFiles},n.prototype.useCaseSensitiveFileResolution=function(){return this._useCaseSensitiveFileResolution},n.prototype.gatherDiagnostics=function(){return this._gatherDiagnostics},n.prototype.codepage=function(){return this._codepage},n.prototype.createFileLog=function(){return this._createFileLog},n.defaultSettings=function(){return n._defaultSettings||(n._defaultSettings=n.fromCompilationSettings(new t)),n._defaultSettings},n.fromCompilationSettings=function(e){return new n(e.propagateEnumConstants,e.removeComments,e.watch,e.noResolve,e.allowAutomaticSemicolonInsertion,e.noImplicitAny,e.noLib,e.codeGenTarget,e.moduleGenTarget,e.outFileOption,e.outDirOption,e.mapSourceFiles,e.mapRoot,e.sourceRoot,e.generateDeclarationFiles,e.useCaseSensitiveFileResolution,e.gatherDiagnostics,e.codepage,e.createFileLog)},n.prototype.toCompilationSettings=function(){var n=new t,r=this,i=n;for(var s in this)this.hasOwnProperty(s)&&e.StringUtilities.startsWith(s,"_")&&(i[s.substr(1)]=r[s]);return n},n}();e.ImmutableCompilationSettings=n})(r||(r={}));var r;(function(e){function n(t,n){for(var r=0,i=t.length;r<i;r++)if(e.hasFlag(t[r],n))return!0;return!1}(function(e){e[e.None=0]="None",e[e.Exported=1]="Exported",e[e.Private=2]="Private",e[e.Public=4]="Public",e[e.Ambient=8]="Ambient",e[e.Static=16]="Static",e[e.Optional=128]="Optional",e[e.Signature=2048]="Signature",e[e.Enum=4096]="Enum",e[e.ArrowFunction=8192]="ArrowFunction",e[e.ClassConstructorVariable=16384]="ClassConstructorVariable",e[e.InitializedModule=32768]="InitializedModule",e[e.InitializedDynamicModule=65536]="InitializedDynamicModule",e[e.MustCaptureThis=1<<18]="MustCaptureThis",e[e.DeclaredInAWithBlock=1<<21]="DeclaredInAWithBlock",e[e.HasReturnStatement=1<<22]="HasReturnStatement",e[e.PropertyParameter=1<<23]="PropertyParameter",e[e.IsAnnotatedWithAny=1<<24]="IsAnnotatedWithAny",e[e.HasDefaultArgs=1<<25]="HasDefaultArgs",e[e.ConstructorParameter=1<<26]="ConstructorParameter",e[e.ImplicitVariable=e.ClassConstructorVariable|e.InitializedModule|e.InitializedDynamicModule|e.Enum]="ImplicitVariable",e[e.SomeInitializedModule=e.InitializedModule|e.InitializedDynamicModule|e.Enum]="SomeInitializedModule"})(e.PullElementFlags||(e.PullElementFlags={}));var t=e.PullElementFlags;e.hasModifier=n,function(e){e[e.None=0]="None",e[e.Global=0]="Global",e[e.Script=1]="Script",e[e.Primitive=2]="Primitive",e[e.Container=4]="Container",e[e.Class=8]="Class",e[e.Interface=16]="Interface",e[e.DynamicModule=32]="DynamicModule",e[e.Enum=64]="Enum",e[e.TypeAlias=128]="TypeAlias",e[e.ObjectLiteral=256]="ObjectLiteral",e[e.Variable=512]="Variable",e[e.CatchVariable=1024]="CatchVariable",e[e.Parameter=2048]="Parameter",e[e.Property=4096]="Property",e[e.TypeParameter=8192]="TypeParameter",e[e.Function=16384]="Function",e[e.ConstructorMethod=32768]="ConstructorMethod",e[e.Method=65536]="Method",e[e.FunctionExpression=1<<17]="FunctionExpression",e[e.GetAccessor=1<<18]="GetAccessor",e[e.SetAccessor=1<<19]="SetAccessor",e[e.CallSignature=1<<20]="CallSignature",e[e.ConstructSignature=1<<21]="ConstructSignature",e[e.IndexSignature=1<<22]="IndexSignature",e[e.ObjectType=1<<23]="ObjectType",e[e.FunctionType=1<<24]="FunctionType",e[e.ConstructorType=1<<25]="ConstructorType",e[e.EnumMember=1<<26]="EnumMember",e[e.WithBlock=1<<27]="WithBlock",e[e.CatchBlock=1<<28]="CatchBlock",e[e.All=e.Script|e.Global|e.Primitive|e.Container|e.Class|e.Interface|e.DynamicModule|e.Enum|e.TypeAlias|e.ObjectLiteral|e.Variable|e.Parameter|e.Property|e.TypeParameter|e.Function|e.ConstructorMethod|e.Method|e.FunctionExpression|e.GetAccessor|e.SetAccessor|e.CallSignature|e.ConstructSignature|e.IndexSignature|e.ObjectType|e.FunctionType|e.ConstructorType|e.EnumMember|e.WithBlock|e.CatchBlock]="All",e[e.SomeFunction=e.Function|e.ConstructorMethod|e.Method|e.FunctionExpression|e.GetAccessor|e.SetAccessor]="SomeFunction",e[e.SomeValue=e.Variable|e.Parameter|e.Property|e.EnumMember|e.SomeFunction]="SomeValue",e[e.SomeType=e.Script|e.Global|e.Primitive|e.Class|e.Interface|e.Enum|e.ObjectLiteral|e.ObjectType|e.FunctionType|e.ConstructorType|e.TypeParameter]="SomeType",e[e.AcceptableAlias=e.Variable|e.SomeFunction|e.Class|e.Interface|e.Enum|e.Container|e.ObjectType|e.FunctionType|e.ConstructorType]="AcceptableAlias",e[e.SomeContainer=e.Container|e.DynamicModule|e.TypeAlias]="SomeContainer",e[e.SomeSignature=e.CallSignature|e.ConstructSignature|e.IndexSignature]="SomeSignature",e[e.SomeTypeReference=e.Interface|e.ObjectType|e.FunctionType|e.ConstructorType]="SomeTypeReference",e[e.SomeInstantiatableType=e.Class|e.Interface|e.TypeParameter]="SomeInstantiatableType"}(e.PullElementKind||(e.PullElementKind={}));var r=e.PullElementKind})(r||(r={}));var r;(function(e){var t=0,n=[],r=function(){function r(e,n,r,i,s){this.declID=t++,this.flags=0,this.declGroups=null,this.childDecls=null,this.typeParameters=null,this.synthesizedValDecl=null,this.containerDecl=null,this.childDeclTypeCache=null,this.childDeclValueCache=null,this.childDeclNamespaceCache=null,this.childDeclTypeParameterCache=null,this.name=e,this.kind=r,this.flags=i,this.semanticInfoChain=s,n!==this.name&&(this.declDisplayName=n)}return r.prototype.fileName=function(){throw e.Errors.abstract()},r.prototype.getParentPath=function(){throw e.Errors.abstract()},r.prototype.getParentDecl=function(){throw e.Errors.abstract()},r.prototype.isExternalModule=function(){throw e.Errors.abstract()},r.prototype.getEnclosingDecl=function(){throw e.Errors.abstract()},r.prototype._getEnclosingDeclFromParentDecl=function(){var t=this;while(t){switch(t.kind){default:return t;case 512:case 8192:case 2048:case 128:case 67108864:}t=t.getParentDecl()}e.Debug.fail()},r.prototype.getDisplayName=function(){return this.declDisplayName===undefined?this.name:this.declDisplayName},r.prototype.setSymbol=function(e){this.semanticInfoChain.setSymbolForDecl(this,e)},r.prototype.ensureSymbolIsBound=function(){if(!this.hasBeenBound()&&this.kind!==1){var e=this.semanticInfoChain.getBinder();e.bindDeclToPullSymbol(this)}},r.prototype.getSymbol=function(){return this.kind===1?null:(this.ensureSymbolIsBound(),this.semanticInfoChain.getSymbolForDecl(this))},r.prototype.hasSymbol=function(){var e=this.semanticInfoChain.getSymbolForDecl(this);return!!e},r.prototype.setSignatureSymbol=function(e){this.semanticInfoChain.setSignatureSymbolForDecl(this,e)},r.prototype.getSignatureSymbol=function(){return this.ensureSymbolIsBound(),this.semanticInfoChain.getSignatureSymbolForDecl(this)},r.prototype.hasSignatureSymbol=function(){var e=this.semanticInfoChain.getSignatureSymbolForDecl(this);return!!e},r.prototype.setFlags=function(e){this.flags=e},r.prototype.setFlag=function(e){this.flags|=e},r.prototype.setValueDecl=function(e){this.synthesizedValDecl=e,e.containerDecl=this},r.prototype.getValueDecl=function(){return this.synthesizedValDecl},r.prototype.getContainerDecl=function(){return this.containerDecl},r.prototype.getChildDeclCache=function(t){return t===8192?(this.childDeclTypeParameterCache||(this.childDeclTypeParameterCache=e.createIntrinsicsObject()),this.childDeclTypeParameterCache):e.hasFlag(t,164)?(this.childDeclNamespaceCache||(this.childDeclNamespaceCache=e.createIntrinsicsObject()),this.childDeclNamespaceCache):e.hasFlag(t,58728795)?(this.childDeclTypeCache||(this.childDeclTypeCache=e.createIntrinsicsObject()),this.childDeclTypeCache):(this.childDeclValueCache||(this.childDeclValueCache=e.createIntrinsicsObject()),this.childDeclValueCache)},r.prototype.addChildDecl=function(e){e.kind===8192?(this.typeParameters||(this.typeParameters=[]),this.typeParameters[this.typeParameters.length]=e):(this.childDecls||(this.childDecls=[]),this.childDecls[this.childDecls.length]=e);var t=e.name;if(!(e.kind&7340032)){var n=this.getChildDeclCache(e.kind),r=n[t];r||(r=[]),r.push(e),n[t]=r}},r.prototype.searchChildDecls=function(e,t){var r=null;t&58728795?r=this.childDeclTypeCache?this.childDeclTypeCache[e]:null:t&164?r=this.childDeclNamespaceCache?this.childDeclNamespaceCache[e]:null:r=this.childDeclValueCache?this.childDeclValueCache[e]:null;if(r)return r;if(t&58728795){r=this.childDeclTypeParameterCache?this.childDeclTypeParameterCache[e]:null;if(r)return r}return n},r.prototype.getChildDecls=function(){return this.childDecls||n},r.prototype.getTypeParameters=function(){return this.typeParameters||n},r.prototype.addVariableDeclToGroup=function(t){this.declGroups||(this.declGroups=e.createIntrinsicsObject());var n=this.declGroups[t.name];n?n.addDecl(t):(n=new l(t.name),n.addDecl(t),this.declGroups[t.name]=n)},r.prototype.getVariableDeclGroups=function(){var e=null;if(this.declGroups)for(var t in this.declGroups)this.declGroups[t]&&(e===null&&(e=[]),e.push(this.declGroups[t].getDecls()));return e||n},r.prototype.hasBeenBound=function(){return this.hasSymbol()||this.hasSignatureSymbol()},r.prototype.isSynthesized=function(){return!1},r.prototype.ast=function(){return this.semanticInfoChain.getASTForDecl(this)},r.prototype.isRootDecl=function(){throw e.Errors.abstract()},r}();e.PullDecl=r;var s=function(e){function t(t,n,r,i,s,o){e.call(this,t,t,r,i,s),this.semanticInfoChain=s,this._isExternalModule=o,this._fileName=n}return i(t,e),t.prototype.fileName=function(){return this._fileName},t.prototype.getParentPath=function(){return[this]},t.prototype.getParentDecl=function(){return null},t.prototype.isExternalModule=function(){return this._isExternalModule},t.prototype.getEnclosingDecl=function(){return this},t.prototype.isRootDecl=function(){return!0},t}(r);e.RootPullDecl=s;var o=function(t){function n(n,r,i,s,o,u){typeof u=="undefined"&&(u=!0),t.call(this,n,r,i,s,o?o.semanticInfoChain:null),this.parentDecl=null,this.parentPath=null,this.parentDecl=o,u&&o.addChildDecl(this),this.parentDecl?this.parentDecl.isRootDecl()?this._rootDecl=this.parentDecl:this._rootDecl=this.parentDecl._rootDecl:(e.Debug.assert(this.isSynthesized()),this._rootDecl=null)}return i(n,t),n.prototype.fileName=function(){return this._rootDecl.fileName()},n.prototype.getParentDecl=function(){return this.parentDecl},n.prototype.getParentPath=function(){if(!this.parentPath){var e=[this],t=this.parentDecl;while(t)t&&e[e.length-1]!==t&&!(t.kind&8388864)&&e.unshift(t),t=t.getParentDecl();this.parentPath=e}return this.parentPath},n.prototype.isExternalModule=function(){return!1},n.prototype.getEnclosingDecl=function(){return this.parentDecl&&this.parentDecl._getEnclosingDeclFromParentDecl()},n.prototype.isRootDecl=function(){return!1},n}(r);e.NormalPullDecl=o;var u=function(e){function t(t,n,r){e.call(this,t,n,67108864,4,r),this.constantValue=null}return i(t,e),t}(o);e.PullEnumElementDecl=u;var a=function(e){function t(t,n,r,i){typeof i=="undefined"&&(i=""),e.call(this,"",i,131072,n,r),this.functionExpressionName=t}return i(t,e),t.prototype.getFunctionExpressionName=function(){return this.functionExpressionName},t}(o);e.PullFunctionExpressionDecl=a;var f=function(e){function t(t,n,r,i,s,o){e.call(this,t,n,r,i,s,!1),this.semanticInfoChain=o}return i(t,e),t.prototype.isSynthesized=function(){return!0},t.prototype.fileName=function(){return this._rootDecl?this._rootDecl.fileName():""},t}(o);e.PullSynthesizedDecl=f;var l=function(){function e(e){this.name=e,this._decls=[]}return e.prototype.addDecl=function(e){e.name===this.name&&(this._decls[this._decls.length]=e)},e.prototype.getDecls=function(){return this._decls},e}();e.PullDeclGroup=l})(r||(r={}));var r;(function(e){function h(e,t){var n="",r=null,i=e.getAllowedToReferenceTypeParameters();for(var s=0;s<i.length;s++){var o=i[s],u=o.pullSymbolID,a=t[u];a||(a=o),n+=u+":"+p(a)}return n}function p(e){var t;return e.isError()?t="E"+p(e._anyType):e.isNamedTypeSymbol()||(t=d(e)),t||(t=e.pullSymbolID+"#"),t}function d(t){if(t.isResolved){var n=new v;e.PullHelpers.walkPullTypeSymbolStructure(t,n)}return null}e.pullSymbolID=0,e.sentinelEmptyArray=[];var t=function(){function t(t,n){this.pullSymbolID=++e.pullSymbolID,this._container=null,this.type=null,this._declarations=null,this.isResolved=!1,this.isOptional=!1,this.inResolution=!1,this.isSynthesized=!1,this.isVarArg=!1,this.rootSymbol=null,this._enclosingSignature=null,this._docComments=null,this.isPrinting=!1,this.name=t,this.kind=n}return t.prototype.isAny=function(){return!1},t.prototype.isType=function(){return(this.kind&58728795)!==0},t.prototype.isTypeReference=function(){return!1},t.prototype.isSignature=function(){return(this.kind&7340032)!==0},t.prototype.isArrayNamedTypeReference=function(){return!1},t.prototype.isPrimitive=function(){return this.kind===2},t.prototype.isAccessor=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.isInterface=function(){return this.kind===16},t.prototype.isMethod=function(){return this.kind===65536},t.prototype.isProperty=function(){return this.kind===4096},t.prototype.isAlias=function(){return!1},t.prototype.isContainer=function(){return!1},t.prototype.findAliasedType=function(n,r,i,s,o){typeof s=="undefined"&&(s=[]),typeof o=="undefined"&&(o=[]);var u=n.getDeclarations(),f=[];for(var l=0;l<u.length;l++){var c=u[l];if(!e.ArrayUtilities.contains(o,c)){o.push(c);var h=c.getChildDecls();for(var p=0;p<h.length;p++){var d=h[p];if(d.kind===128&&(!i||d.flags&1)){var v=d.getSymbol();if(a.usedAsSymbol(v,this)||this.rootSymbol&&a.usedAsSymbol(v,this.rootSymbol))return s.push(v),s;!r&&t._isExternalModuleReferenceAlias(v)&&(!v.assignedContainer().hasExportAssignment()||v.assignedContainer().getExportAssignedContainerSymbol()&&v.assignedContainer().getExportAssignedContainerSymbol().kind===32)&&f.push(v)}}}}for(var l=0;l<f.length;l++){var m=f[l];s.push(m);var g=this.findAliasedType(m.assignedContainer().hasExportAssignment()?m.assignedContainer().getExportAssignedContainerSymbol():m.assignedContainer(),!1,!0,s,o);if(g)return g;s.pop()}return null},t.prototype.getExternalAliasedSymbols=function(e){if(!e)return null;var t=e.pathToRoot();if(t.length&&t[t.length-1].kind===32){var n=this.findAliasedType(t[t.length-1]);return n}return null},t._isExternalModuleReferenceAlias=function(e){return e?e.assignedValue()?!1:e.assignedType()&&e.assignedType()!==e.assignedContainer()?!1:e.assignedContainer()&&e.assignedContainer().kind!==32?!1:!0:!1},t.prototype.getExportedInternalAliasSymbol=function(t){if(t&&this.kind!==128){var n=t.pathToRoot();for(var r=0;r<n.length;r++){var i=this.findAliasedType(t,!0,!0);if(i)return e.Debug.assert(i.length===1),i[0]}}return null},t.prototype.getAliasSymbolName=function(e,n,r,i){if(!i){var s=this.getExportedInternalAliasSymbol(e);if(s)return n(s)}var o=this.getExternalAliasedSymbols(e);if(o&&t._isExternalModuleReferenceAlias(o[o.length-1])){var u=n(o[0]);if(!u)return null;for(var a=1,f=o.length;a<f;a++)u=u+"."+r(o[a]);return u}return null},t.prototype._getResolver=function(){return e.Debug.assert(this._declarations&&this._declarations.length>0),this._declarations[0].semanticInfoChain.getResolver()},t.prototype._resolveDeclaredSymbol=function(){return this._getResolver().resolveDeclaredSymbol(this)},t.prototype.getName=function(e,t){var n=this.getAliasSymbolName(e,function(n){return n.getName(e,t)},function(e){return e.getName()});return n||this.name},t.prototype.getDisplayName=function(e,t,n){var r=this.getAliasSymbolName(e,function(n){return n.getDisplayName(e,t)},function(e){return e.getDisplayName()},n);if(r)return r;var i=this.getDeclarations(),s=i.length&&i[0].getDisplayName();return s&&s.length?s:this.name},t.prototype.getIsSpecialized=function(){return!1},t.prototype.getRootSymbol=function(){return this.rootSymbol?this.rootSymbol:this},t.prototype.setRootSymbol=function(e){this.rootSymbol=e},t.prototype.setIsSynthesized=function(t){typeof t=="undefined"&&(t=!0),e.Debug.assert(this.rootSymbol==null),this.isSynthesized=t},t.prototype.getIsSynthesized=function(){return this.rootSymbol?this.rootSymbol.getIsSynthesized():this.isSynthesized},t.prototype.setEnclosingSignature=function(e){this._enclosingSignature=e},t.prototype.getEnclosingSignature=function(){return this._enclosingSignature},t.prototype.addDeclaration=function(t){e.Debug.assert(!!t);if(this.rootSymbol)return;this._declarations?this._declarations[this._declarations.length]=t:this._declarations=[t]},t.prototype.getDeclarations=function(){return this.rootSymbol?this.rootSymbol.getDeclarations():(this._declarations||(this._declarations=[]),this._declarations)},t.prototype.hasDeclaration=function(t){return this._declarations?e.ArrayUtilities.any(this._declarations,function(e){return e===t}):!1},t.prototype.setContainer=function(e){if(this.rootSymbol)return;this._container=e},t.prototype.getContainer=function(){return this.rootSymbol?this.rootSymbol.getContainer():this._container},t.prototype.setResolved=function(){this.isResolved=!0,this.inResolution=!1},t.prototype.startResolving=function(){this.inResolution=!0},t.prototype.setUnresolved=function(){this.isResolved=!1,this.inResolution=!1},t.prototype.anyDeclHasFlag=function(t){var n=this.getDeclarations();for(var r=0,i=n.length;r<i;r++)if(e.hasFlag(n[r].flags,t))return!0;return!1},t.prototype.allDeclsHaveFlag=function(t){var n=this.getDeclarations();for(var r=0,i=n.length;r<i;r++)if(!e.hasFlag(n[r].flags,t))return!1;return!0},t.prototype.pathToRoot=function(){var e=[],t=this;while(t){if(t.isType()){var n=t.getAssociatedContainerType();n&&(t=n)}e[e.length]=t;var r=t.kind;if(r===2048)break;t=t.getContainer()}return e},t.unqualifiedNameReferencesDifferentSymbolInScope=function(t,n,r){var i=n[0].getDeclarations()[0].getParentPath();for(var s=0,o=i.length-1;s<=r;s++,o--)if(n[s].isContainer()){var u=n[s];if(t.isContainer()){var a=u.findContainedNonMemberContainer(t.name,164);if(a&&a!=t&&a.getDeclarations()[0].getParentDecl()==i[o])return!0;var a=u.findNestedContainer(t.name,164);if(a&&a!=t)return!0}else if(t.isType()){var a=u.findContainedNonMemberType(t.name,58728795),f=e.PullHelpers.getRootType(t);if(a&&e.PullHelpers.getRootType(a)!=f&&a.getDeclarations()[0].getParentDecl()==i[o])return!0;var a=u.findNestedType(t.name,58728795);if(a&&e.PullHelpers.getRootType(a)!=f)return!0}}return!1},t.prototype.findQualifyingSymbolPathInScopeSymbol=function(n){var r=this.pathToRoot();if(r.length===1)return r;var i;if(!n)return r;i=n.pathToRoot();var s=e.ArrayUtilities.indexOf(r,function(t){return e.ArrayUtilities.contains(i,t)});if(s>0){var o=r[s],u=e.ArrayUtilities.indexOf(i,function(e){return e===o});e.Debug.assert(r.length-s===i.length-u);for(;s<r.length;s++,u++)if(!t.unqualifiedNameReferencesDifferentSymbolInScope(r[s-1],i,u))break}return s>=0&&s<r.length?r.slice(0,s):r},t.prototype.toString=function(e,t){var n=this.getNameAndTypeName(e);return n},t.prototype.getNamePartForFullName=function(){return this.getDisplayName(null,!0)},t.prototype.fullName=function(t){var n=this,r=this.pathToRoot(),i="",s=this.getAliasSymbolName(t,function(e){return e.fullName(t)},function(e){return e.getNamePartForFullName()});if(s)return s;for(var o=1;o<r.length;o++){var s=r[o].getAliasSymbolName(t,function(e){return e===n?null:e.fullName(t)},function(e){return e.getNamePartForFullName()});if(s){i=s+"."+i;break}var u=r[o].getNamePartForFullName();if(r[o].kind===32&&!e.isQuoted(u))break;if(u==="")break;i=u+"."+i}return i+=this.getNamePartForFullName(),i},t.prototype.getScopedName=function(t,n,r,i){var s=this.findQualifyingSymbolPathInScopeSymbol(t),o="",u=this.getAliasSymbolName(t,function(e){return e.getScopedName(t,n,r,i)},function(e){return e.getNamePartForFullName()},i);if(u)return u;for(var a=1;a<s.length;a++){var f=s[a].kind;if(f!==4&&f!==32)break;var u=s[a].getAliasSymbolName(t,function(e){return e.getScopedName(t,n,!1,i)},function(e){return e.getNamePartForFullName()},i);if(u){o=u+"."+o;break}if(f!==4){var l=s[a].getDisplayName();e.isQuoted(l)&&(o=l+"."+o);break}o=s[a].getDisplayName()+"."+o}return o+=this.getDisplayName(t,r,i),o},t.prototype.getScopedNameEx=function(t,n,r,i,s,o){var u=this.getScopedName(t,n,r,o);return e.MemberName.create(u)},t.prototype.getTypeName=function(e,t){var n=this.getTypeNameEx(e,t);return n.toString()},t.prototype.getTypeNameEx=function(t,n){var r=this.type;if(r){var i=n?this.getTypeNameForFunctionSignature("",t,n):null;return i||(i=r.getScopedNameEx(t,!1,!0,n)),i}return e.MemberName.create("")},t.prototype.getTypeNameForFunctionSignature=function(t,r,i){var s=this.type;if(s&&!s.isNamedTypeSymbol()&&this.kind!==4096&&this.kind!==512&&this.kind!==2048){var o=s.getCallSignatures();if(o.length===1||i&&o.length){var u=new e.MemberNameArray,a=n.getSignaturesTypeNameEx(o,t,!1,!1,r,i);return u.addAll(a),u}}return null},t.prototype.getNameAndTypeName=function(e){var t=this.getNameAndTypeNameEx(e);return t.toString()},t.prototype.getNameAndTypeNameEx=function(t){var n=this.type,r=this.getDisplayName(t);if(n){r+=this.isOptional?"?":"";var i=this.getTypeNameForFunctionSignature(r,t);if(!i){var s=n.getScopedNameEx(t);i=e.MemberName.create(s,r+": ","")}return i}return e.MemberName.create(r)},t.getTypeParameterString=function(e,n,r){return t.getTypeParameterStringEx(e,n,undefined,r).toString()},t.getTypeParameterStringEx=function(t,n,r,i){var s=new e.MemberNameArray;s.prefix="";if(t&&t.length){s.add(e.MemberName.create("<"));for(var o=0;o<t.length;o++)o&&s.add(e.MemberName.create(", ")),r&&s.add(new e.MemberName),s.add(t[o].getScopedNameEx(n,!1,i)),r&&s.add(new e.MemberName);s.add(e.MemberName.create(">"))}return s},t.getIsExternallyVisible=function(t,n,r){if(r){for(var i=0;i<r.length;i++)if(r[i]===t)return!0}else r=[];if(n===t)return!0;r.push(n);var s=t.isExternallyVisible(r);return e.Debug.assert(e.ArrayUtilities.last(r)===n),r.pop(),s},t.prototype.isExternallyVisible=function(e){var n=this.kind;if(n===2)return!0;if(this.rootSymbol)return t.getIsExternallyVisible(this.rootSymbol,this,e);if(this.isType()){var r=this.getAssociatedContainerType();if(r)return t.getIsExternallyVisible(r,this,e)}if(this.anyDeclHasFlag(2))return!1;var i=this.getContainer();if(i===null){var s=this.getDeclarations();if(s.length){var o=s[0].getParentDecl();if(o){var u=o.getSymbol();return!u||o.kind===1?!0:t.getIsExternallyVisible(u,this,e)}}return!0}if(i.kind===32||i.getAssociatedContainerType()&&i.getAssociatedContainerType().kind===32){var f=i.kind===32?i:i.getAssociatedContainerType();if(a.usedAsSymbol(f,this))return!0}return!this.anyDeclHasFlag(1)&&n!==4096&&n!==65536?!1:t.getIsExternallyVisible(i,this,e)},t.prototype.getDocCommentsOfDecl=function(t){var n=t.ast();if(n){var r=e.ASTHelpers.getEnclosingModuleDeclaration(n);if(e.ASTHelpers.isLastNameOfModule(r,n))return e.ASTHelpers.docComments(r);if(n.kind()!==130||t.kind!==512)return e.ASTHelpers.docComments(n)}return[]},t.prototype.getDocCommentArray=function(e){var t=[];if(!e)return t;var n=e.kind===2048,r=e.getDeclarations();for(var i=0;i<r.length;i++){if(n&&r[i].kind===4096)continue;t=t.concat(this.getDocCommentsOfDecl(r[i]))}return t},t.getDefaultConstructorSymbolForDocComments=function(e){if(e.getHasDefaultConstructor()){var n=e.getExtendedTypes();if(n.length)return t.getDefaultConstructorSymbolForDocComments(n[0])}return e.type.getConstructSignatures()[0]},t.prototype.getDocCommentText=function(e){var t=new Array;for(var n=0;n<e.length;n++){var r=this.getDocCommentTextValue(e[n]);r!==""&&t.push(r)}return t.join("\n")},t.prototype.getDocCommentTextValue=function(e){return this.cleanJSDocComment(e.fullText())},t.prototype.docComments=function(e){var t=this.getDeclarations();if(e&&t.length&&t[0].kind===32768){var n=t[0].getParentDecl();return this.getDocCommentText(this.getDocCommentsOfDecl(n))}if(this._docComments===null){var r="";if(!e&&this.kind===2097152&&t.length&&t[0].kind===8){var i=this.returnType,s=i.getExtendedTypes();s.length?r=s[0].getConstructorMethod().docComments():r=""}else if(this.kind===2048){var o=[],u=this.getEnclosingSignature(),a=this.getDocCommentArray(u),f=this.getParameterDocCommentText(this.getDisplayName(),a);f!=""&&o.push(f);var l=this.getDocCommentText(this.getDocCommentArray(this));l!=""&&o.push(l),r=o.join("\n")}else{var c=!0;if(this.kind===16777216){var h=this.getFunctionSymbol();if(h)r=h._docComments||"",c=!1;else{var p=this.getDeclarations();p.length>0&&(r=p[0].getSymbol()._docComments||"",c=!1)}}if(c){r=this.getDocCommentText(this.getDocCommentArray(this));if(r===""&&this.kind===1048576){var d=this.functionType;d&&d.getCallSignatures().length===1&&(r=d.docComments())}}}this._docComments=r}return this._docComments},t.prototype.getParameterDocCommentText=function(e,t){if(t.length===0||t[0].kind()!==6)return"";for(var n=0;n<t.length;n++){var r=t[n].fullText();for(var i=r.indexOf("@param",0);0<=i;i=r.indexOf("@param",i)){i+=6;if(!this.isSpaceChar(r,i))continue;i=this.consumeLeadingSpace(r,i);if(i===-1)break;if(r.charCodeAt(i)===123){i++;var s=0;for(var o=1;i<r.length;i++){s=r.charCodeAt(i);if(s===123){o++;continue}if(s===125){o--;if(o===0)break;continue}if(s===64)break}if(i===r.length)break;if(s===64)continue;i=this.consumeLeadingSpace(r,i+1);if(i===-1)break}if(e!==r.substr(i,e.length)||!this.isSpaceChar(r,i+e.length))continue;i=this.consumeLeadingSpace(r,i+e.length);if(i===-1)return"";var u=r.indexOf("@",i),a=r.substring(i,u<0?r.length:u),f=undefined,l=r.substring(0,i).lastIndexOf("\n")+1;l!==0&&l<i&&r.charAt(l+1)==="\r"&&l++;var c=this.consumeLeadingSpace(r,l);return c!==i&&r.charAt(c)==="*"&&(f=i-c-1),this.cleanJSDocComment(a,f)}}return""},t.prototype.cleanJSDocComment=function(e,t){var n=new Array;e=e.replace("/**",""),e.length>=2&&e.charAt(e.length-1)==="/"&&e.charAt(e.length-2)==="*"&&(e=e.substring(0,e.length-2));var r=e.split("\n"),i=!1;for(var s=0;s<r.length;s++){var o=r[s],u=this.cleanDocCommentLine(o,!0,t);if(!u)continue;var a="",f=u.start;for(var l=o.indexOf("@",u.start);0<=l&&l<u.end;l=o.indexOf("@",l+1)){var c=i;o.indexOf("param",l+1)===l+1&&this.isSpaceChar(o,l+6)?(c||(a+=o.substring(f,l)),f=l,i=!0):c&&(f=l,i=!1)}i||(a+=o.substring(f,u.end));var h=this.cleanDocCommentLine(a,!1);h&&(t===undefined&&(t=u.jsDocSpacesRemoved),n.push(a))}return n.join("\n")},t.prototype.consumeLeadingSpace=function(t,n,r){var i=t.length;r!==undefined&&(i=e.MathPrototype.min(n+r,i));for(;n<i;n++){var s=t.charCodeAt(n);if(s!==32&&s!==9)return n}return i!==t.length?i:-1},t.prototype.isSpaceChar=function(e,t){var n=e.length;if(t<n){var r=e.charCodeAt(t);return r===32||r===9}return t===n},t.prototype.cleanDocCommentLine=function(e,t,n){var r=this.consumeLeadingSpace(e,0);if(r!==-1){var i=r;if(t&&e.charAt(r)==="*"){var s=r+1;r=this.consumeLeadingSpace(e,s,n);if(r===-1)return null;i=r-s}return{start:r,end:e.charAt(e.length-1)==="\r"?e.length-1:e.length,jsDocSpacesRemoved:i}}return null},t}();e.PullSymbol=t;var n=function(n){function r(t,r){typeof r=="undefined"&&(r=!1),n.call(this,"",t),this._isDefinition=r,this._memberTypeParameterNameCache=null,this._stringConstantOverload=undefined,this.parameters=e.sentinelEmptyArray,this._typeParameters=null,this.returnType=null,this.functionType=null,this.hasOptionalParam=!1,this.nonOptionalParamCount=0,this.hasVarArgs=!1,this._allowedToReferenceTypeParameters=null,this._instantiationCache=null,this.hasBeenChecked=!1,this.inWrapCheck=!1,this.inWrapInfiniteExpandingReferenceCheck=!1}return i(r,n),r.prototype.isDefinition=function(){return this._isDefinition},r.prototype.isGeneric=function(){var e=this.getTypeParameters();return!!e&&e.length!==0},r.prototype.addParameter=function(t,n){typeof n=="undefined"&&(n=!1),this.parameters===e.sentinelEmptyArray&&(this.parameters=[]),this.parameters[this.parameters.length]=t,this.hasOptionalParam=n,t.getEnclosingSignature()||t.setEnclosingSignature(this),n||this.nonOptionalParamCount++},r.prototype.addTypeParameter=function(t){this._typeParameters||(this._typeParameters=[]),this._memberTypeParameterNameCache||(this._memberTypeParameterNameCache=e.createIntrinsicsObject()),this._typeParameters[this._typeParameters.length]=t,this._memberTypeParameterNameCache[t.getName()]=t},r.prototype.addTypeParametersFromReturnType=function(){var e=this.returnType.getTypeParameters();for(var t=0;t<e.length;t++)this.addTypeParameter(e[t])},r.prototype.getTypeParameters=function(){return this._typeParameters||(this._typeParameters=[]),this._typeParameters},r.prototype.findTypeParameter=function(t){var n;if(!this._memberTypeParameterNameCache){this._memberTypeParameterNameCache=e.createIntrinsicsObject();for(var r=0;r<this.getTypeParameters().length;r++)this._memberTypeParameterNameCache[this._typeParameters[r].getName()]=this._typeParameters[r]}return n=this._memberTypeParameterNameCache[t],n},r.prototype.getTypeParameterArgumentMap=function(){return null},r.prototype.getAllowedToReferenceTypeParameters=function(){return e.Debug.assert(this.getRootSymbol()==this),this._allowedToReferenceTypeParameters||(this._allowedToReferenceTypeParameters=e.PullInstantiationHelpers.getAllowedToReferenceTypeParametersFromDecl(this.getDeclarations()[0])),this._allowedToReferenceTypeParameters},r.prototype.addSpecialization=function(t,n){e.Debug.assert(this.getRootSymbol()==this),this._instantiationCache||(this._instantiationCache=e.createIntrinsicsObject()),this._instantiationCache[h(this,n)]=t},r.prototype.getSpecialization=function(t){e.Debug.assert(this.getRootSymbol()==this);if(!this._instantiationCache)return null;var n=this._instantiationCache[h(this,t)];return n||null},r.prototype.isStringConstantOverloadSignature=function(){if(this._stringConstantOverload===undefined){var e=this.parameters;this._stringConstantOverload=!1;for(var t=0;t<e.length;t++){var n=e[t].type;n&&n.isPrimitive()&&n.isStringConstant()&&(this._stringConstantOverload=!0)}}return this._stringConstantOverload},r.prototype.getParameterTypeAtIndex=function(e){if(e<this.parameters.length-1||e<this.parameters.length&&!this.hasVarArgs)return this.parameters[e].type;if(this.hasVarArgs){var t=this.parameters[this.parameters.length-1].type;return t.isArrayNamedTypeReference()&&(t=t.getElementType()),t}return null},r.getSignatureTypeMemberName=function(t,n,i){var s=new e.MemberNameArray,o=r.getSignaturesTypeNameEx(n,"",!1,!1,i,!0,t);return s.addAll(o),s},r.getSignaturesTypeNameEx=function(t,n,r,i,s,o,u){var a=[];if(!t)return a;var f=t.length;!o&&f>1&&(r=!1);var l=!1;u&&u.isDefinition()&&f>1&&(u=null);for(var c=0;c<f;c++){if(f>1&&t[c].isDefinition()){l=!0;continue}var h=t[c];o&&u&&(h=u),a.push(h.getSignatureTypeNameEx(n,r,i,s));if(o)break}if(o&&a.length&&f>1){var p=a[a.length-1];for(var c=c+1;c<f;c++)if(t[c].isDefinition()){l=!0;break}var d=e.getLocalizedText(e.DiagnosticCode._0_overload_s,[l?f-2:f-1]);p.add(e.MemberName.create(d))}return a},r.prototype.toString=function(e,t){var n=this.getSignatureTypeNameEx(this.getScopedNameEx().toString(),!1,!1,e,undefined,t).toString();return n},r.prototype.getSignatureTypeNameEx=function(n,r,i,s,o,u){var a=new e.MemberNameArray;a.add(t.getTypeParameterStringEx(this.getTypeParameters(),s,u,!0)),i?a.add(e.MemberName.create("[")):a.add(e.MemberName.create("("));var f=new e.MemberNameArray;f.prefix=n,u?(f.prefix=n,f.addAll(a.entries)):f.prefix=n+a.toString();var l=this.parameters,c=l.length;for(var h=0;h<c;h++){var p=l[h].type,d=p?": ":"",v=l[h].isVarArg,m=v?"...":"",g=!v&&l[h].isOptional?"?":"";o&&f.add(new e.MemberName),f.add(e.MemberName.create(m+l[h].getScopedNameEx(s).toString()+g+d)),p&&f.add(p.getScopedNameEx(s)),o&&f.add(new e.MemberName),h<c-1&&f.add(e.MemberName.create(", "))}return r?i?f.add(e.MemberName.create("] => ")):f.add(e.MemberName.create(") => ")):i?f.add(e.MemberName.create("]: ")):f.add(e.MemberName.create("): ")),this.returnType?f.add(this.returnType.getScopedNameEx(s)):f.add(e.MemberName.create("any")),f},r.prototype.forAllParameterTypes=function(e,t){this.parameters.length<e&&!this.hasVarArgs&&(e=this.parameters.length);for(var n=0;n<e;n++){var r=this.getParameterTypeAtIndex(n);if(!t(r,n))return!1}return!0},r.prototype.forAllCorrespondingParameterTypesInThisAndOtherSignature=function(e,t){var n;this.hasVarArgs?n=e.hasVarArgs?Math.max(this.parameters.length,e.parameters.length):e.parameters.length:n=e.hasVarArgs?this.parameters.length:Math.min(this.parameters.length,e.parameters.length);for(var r=0;r<n;r++){var i=this.getParameterTypeAtIndex(r),s=e.getParameterTypeAtIndex(r);if(!t(i,s,r))return!1}return!0},r.prototype.wrapsSomeTypeParameter=function(e){return this.getWrappingTypeParameterID(e)!==0},r.prototype.getWrappingTypeParameterID=function(t){var n=this;if(n.inWrapCheck)return 0;this._wrapsTypeParameterCache=this._wrapsTypeParameterCache||new e.WrapsTypeParameterCache;var r=this._wrapsTypeParameterCache.getWrapsTypeParameter(t);return r===undefined&&(r=this.getWrappingTypeParameterIDWorker(t),this._wrapsTypeParameterCache.setWrapsTypeParameter(t,r)),r},r.prototype.getWrappingTypeParameterIDWorker=function(t){var n=this;n.inWrapCheck=!0,e.PullHelpers.resolveDeclaredSymbolToUseType(n);var r=n.returnType?n.returnType.getWrappingTypeParameterID(t):0,i=n.parameters;for(var s=0;!r&&s<i.length;s++)e.PullHelpers.resolveDeclaredSymbolToUseType(i[s]),r=i[s].type.getWrappingTypeParameterID(t);return n.inWrapCheck=!1,r},r.prototype._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReference=function(e,t){var n=t.valueAt(this.pullSymbolID,e.pullSymbolID);return n!=undefined?n:this.inWrapInfiniteExpandingReferenceCheck?!1:(this.inWrapInfiniteExpandingReferenceCheck=!0,n=this._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceWorker(e,t),t.setValueAt(this.pullSymbolID,e.pullSymbolID,n),this.inWrapInfiniteExpandingReferenceCheck=!1,n)},r.prototype._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceWorker=function(e,t){if(this.returnType&&this.returnType._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceRecurse(e,t))return!0;var n=this.parameters;for(var r=0;r<n.length;r++)if(n[r].type&&n[r].type._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceRecurse(e,t))return!0;return!1},r}(t);e.PullSignatureSymbol=n;var r=function(r){function s(t,n){r.call(this,t,n),this._members=e.sentinelEmptyArray,this._enclosedMemberTypes=null,this._enclosedMemberContainers=null,this._typeParameters=null,this._allowedToReferenceTypeParameters=null,this._specializedVersionsOfThisType=null,this._arrayVersionOfThisType=null,this._implementedTypes=null,this._extendedTypes=null,this._typesThatExplicitlyImplementThisType=null,this._typesThatExtendThisType=null,this._callSignatures=null,this._allCallSignatures=null,this._constructSignatures=null,this._allConstructSignatures=null,this._indexSignatures=null,this._allIndexSignatures=null,this._allIndexSignaturesOfAugmentedType=null,this._memberNameCache=null,this._enclosedTypeNameCache=null,this._enclosedContainerCache=null,this._typeParameterNameCache=null,this._containedNonMemberNameCache=null,this._containedNonMemberTypeNameCache=null,this._containedNonMemberContainerCache=null,this._simpleInstantiationCache=null,this._complexInstantiationCache=null,this._hasGenericSignature=!1,this._hasGenericMember=!1,this._hasBaseTypeConflict=!1,this._knownBaseTypeCount=0,this._associatedContainerTypeSymbol=null,this._constructorMethod=null,this._hasDefaultConstructor=!1,this._functionSymbol=null,this._inMemberTypeNameEx=!1,this.inSymbolPrivacyCheck=!1,this.inWrapCheck=!1,this.inWrapInfiniteExpandingReferenceCheck=!1,this.typeReference=null,this._widenedType=null,this._isArrayNamedTypeReference=undefined,this.type=this}return i(s,r),s.prototype.isArrayNamedTypeReference=function(){return this._isArrayNamedTypeReference===undefined&&(this._isArrayNamedTypeReference=this.computeIsArrayNamedTypeReference()),this._isArrayNamedTypeReference},s.prototype.computeIsArrayNamedTypeReference=function(){var e=this.getTypeArguments();if(e&&this.getTypeArguments().length===1&&this.name==="Array"){var t=this.getDeclarations()[0];if(t&&t.getParentDecl()&&t.getParentDecl().getParentDecl()===null)return!0}return!1},s.prototype.isType=function(){return!0},s.prototype.isClass=function(){return this.kind===8||this._constructorMethod!==null},s.prototype.isFunction=function(){return(this.kind&50331648)!==0},s.prototype.isConstructor=function(){return this.kind===33554432||this._associatedContainerTypeSymbol&&this._associatedContainerTypeSymbol.isClass()},s.prototype.isTypeParameter=function(){return!1},s.prototype.isTypeVariable=function(){return!1},s.prototype.isError=function(){return!1},s.prototype.isEnum=function(){return this.kind===64},s.prototype.getTypeParameterArgumentMap=function(){return null},s.prototype.isObject=function(){return e.hasFlag(this.kind,58720600)},s.prototype.isFunctionType=function(){return this.getCallSignatures().length>0||this.getConstructSignatures().length>0},s.prototype.getKnownBaseTypeCount=function(){return this._knownBaseTypeCount},s.prototype.resetKnownBaseTypeCount=function(){this._knownBaseTypeCount=0},s.prototype.incrementKnownBaseCount=function(){this._knownBaseTypeCount++},s.prototype.setHasBaseTypeConflict=function(){this._hasBaseTypeConflict=!0},s.prototype.hasBaseTypeConflict=function(){return this._hasBaseTypeConflict},s.prototype.hasMembers=function(){if(this._members!==e.sentinelEmptyArray)return!0;var t=this.getExtendedTypes();for(var n=0;n<t.length;n++)if(t[n].hasMembers())return!0;return!1},s.prototype.setHasGenericSignature=function(){this._hasGenericSignature=!0},s.prototype.getHasGenericSignature=function(){return this._hasGenericSignature},s.prototype.setHasGenericMember=function(){this._hasGenericMember=!0},s.prototype.getHasGenericMember=function(){return this._hasGenericMember},s.prototype.setAssociatedContainerType=function(e){this._associatedContainerTypeSymbol=e},s.prototype.getAssociatedContainerType=function(){return this._associatedContainerTypeSymbol},s.prototype.getArrayType=function(){return this._arrayVersionOfThisType},s.prototype.getElementType=function(){return null},s.prototype.setArrayType=function(e){this._arrayVersionOfThisType=e},s.prototype.getFunctionSymbol=function(){return this._functionSymbol},s.prototype.setFunctionSymbol=function(e){e&&(this._functionSymbol=e)},s.prototype.findContainedNonMember=function(e){return this._containedNonMemberNameCache?this._containedNonMemberNameCache[e]:null},s.prototype.findContainedNonMemberType=function(t,n){typeof n=="undefined"&&(n=0);if(!this._containedNonMemberTypeNameCache)return null;var r=this._containedNonMemberTypeNameCache[t];return r&&n!==0&&(r=e.hasFlag(r.kind,n)?r:null),r},s.prototype.findContainedNonMemberContainer=function(t,n){typeof n=="undefined"&&(n=0);if(!this._containedNonMemberContainerCache)return null;var r=this._containedNonMemberContainerCache[t];return r&&n!==0&&(r=e.hasFlag(r.kind,n)?r:null),r},s.prototype.addMember=function(t){if(!t)return;t.setContainer(this),this._memberNameCache||(this._memberNameCache=e.createIntrinsicsObject()),this._members===e.sentinelEmptyArray&&(this._members=[]),this._members.push(t),this._memberNameCache[t.name]=t},s.prototype.addEnclosedMemberType=function(t){if(!t)return;t.setContainer(this),this._enclosedTypeNameCache||(this._enclosedTypeNameCache=e.createIntrinsicsObject()),this._enclosedMemberTypes||(this._enclosedMemberTypes=[]),this._enclosedMemberTypes[this._enclosedMemberTypes.length]=t,this._enclosedTypeNameCache[t.name]=t},s.prototype.addEnclosedMemberContainer=function(t){if(!t)return;t.setContainer(this),this._enclosedContainerCache||(this._enclosedContainerCache=e.createIntrinsicsObject()),this._enclosedMemberContainers||(this._enclosedMemberContainers=[]),this._enclosedMemberContainers[this._enclosedMemberContainers.length]=t,this._enclosedContainerCache[t.name]=t},s.prototype.addEnclosedNonMember=function(t){if(!t)return;t.setContainer(this),this._containedNonMemberNameCache||(this._containedNonMemberNameCache=e.createIntrinsicsObject()),this._containedNonMemberNameCache[t.name]=t},s.prototype.addEnclosedNonMemberType=function(t){if(!t)return;t.setContainer(this),this._containedNonMemberTypeNameCache||(this._containedNonMemberTypeNameCache=e.createIntrinsicsObject()),this._containedNonMemberTypeNameCache[t.name]=t},s.prototype.addEnclosedNonMemberContainer=function(t){if(!t)return;t.setContainer(this),this._containedNonMemberContainerCache||(this._containedNonMemberContainerCache=e.createIntrinsicsObject()),this._containedNonMemberContainerCache[t.name]=t},s.prototype.addTypeParameter=function(t){if(!t)return;t.getContainer()||t.setContainer(this),this._typeParameterNameCache||(this._typeParameterNameCache=e.createIntrinsicsObject()),this._typeParameters||(this._typeParameters=[]),this._typeParameters[this._typeParameters.length]=t,this._typeParameterNameCache[t.getName()]=t},s.prototype.getMembers=function(){return this._members},s.prototype.setHasDefaultConstructor=function(e){typeof e=="undefined"&&(e=!0),this._hasDefaultConstructor=e},s.prototype.getHasDefaultConstructor=function(){return this._hasDefaultConstructor},s.prototype.getConstructorMethod=function(){return this._constructorMethod},s.prototype.setConstructorMethod=function(e){this._constructorMethod=e},s.prototype.getTypeParameters=function(){return this._typeParameters?this._typeParameters:e.sentinelEmptyArray},s.prototype.getAllowedToReferenceTypeParameters=function(){return!!this.kind&&!0&&this.isNamedTypeSymbol()&&!this.isTypeParameter()?this.getTypeParameters():(this._allowedToReferenceTypeParameters||(this._allowedToReferenceTypeParameters=e.PullInstantiationHelpers.getAllowedToReferenceTypeParametersFromDecl(this.getDeclarations()[0])),this._allowedToReferenceTypeParameters)},s.prototype.isGeneric=function(){return this._typeParameters&&this._typeParameters.length>0||this._hasGenericSignature||this._hasGenericMember||this.isArrayNamedTypeReference()},s.prototype.canUseSimpleInstantiationCache=function(e){if(this.isTypeParameter())return!0;var t=this.getTypeParameters();return e&&this.isNamedTypeSymbol()&&t.length===1&&e[t[0].pullSymbolID].kind!==8388608},s.prototype.getSimpleInstantiationCacheId=function(e){return this.isTypeParameter()?e[0].pullSymbolID:e[this.getTypeParameters()[0].pullSymbolID].pullSymbolID},s.prototype.addSpecialization=function(t,n){this.canUseSimpleInstantiationCache(n)?(this._simpleInstantiationCache||(this._simpleInstantiationCache=[]),this._simpleInstantiationCache[this.getSimpleInstantiationCacheId(n)]=t):(this._complexInstantiationCache||(this._complexInstantiationCache=e.createIntrinsicsObject()),this._complexInstantiationCache[h(this,n)]=t),this._specializedVersionsOfThisType||(this._specializedVersionsOfThisType=[]),this._specializedVersionsOfThisType.push(t)},s.prototype.getSpecialization=function(e){if(this.canUseSimpleInstantiationCache(e)){if(!this._simpleInstantiationCache)return null;var t=this._simpleInstantiationCache[this.getSimpleInstantiationCacheId(e)];return t||null}if(!this._complexInstantiationCache)return null;if(this.getAllowedToReferenceTypeParameters().length==0)return this;var t=this._complexInstantiationCache[h(this,e)];return t||null},s.prototype.getKnownSpecializations=function(){return this._specializedVersionsOfThisType?this._specializedVersionsOfThisType:e.sentinelEmptyArray},s.prototype.getTypeArguments=function(){return null},s.prototype.getTypeArgumentsOrTypeParameters=function(){return this.getTypeParameters()},s.prototype.addCallOrConstructSignaturePrerequisiteBase=function(e){e.isGeneric()&&(this._hasGenericSignature=!0),e.functionType=this},s.prototype.addCallSignaturePrerequisite=function(e){this._callSignatures||(this._callSignatures=[]),this.addCallOrConstructSignaturePrerequisiteBase(e)},s.prototype.appendCallSignature=function(e){this.addCallSignaturePrerequisite(e),this._callSignatures.push(e)},s.prototype.insertCallSignatureAtIndex=function(t,n){this.addCallSignaturePrerequisite(t),e.Debug.assert(n<=this._callSignatures.length),n===this._callSignatures.length?this._callSignatures.push(t):this._callSignatures.splice(n,0,t)},s.prototype.addConstructSignaturePrerequisite=function(e){this._constructSignatures||(this._constructSignatures=[]),this.addCallOrConstructSignaturePrerequisiteBase(e)},s.prototype.appendConstructSignature=function(e){this.addConstructSignaturePrerequisite(e),this._constructSignatures.push(e)},s.prototype.insertConstructSignatureAtIndex=function(t,n){this.addConstructSignaturePrerequisite(t),e.Debug.assert(n<=this._constructSignatures.length),n===this._constructSignatures.length?this._constructSignatures.push(t):this._constructSignatures.splice(n,0,t)},s.prototype.addIndexSignature=function(e){this._indexSignatures||(this._indexSignatures=[]),this._indexSignatures[this._indexSignatures.length]=e,e.isGeneric()&&(this._hasGenericSignature=!0),e.functionType=this},s.prototype.hasOwnCallSignatures=function(){return this._callSignatures!==null},s.prototype.getOwnCallSignatures=function(){return this._callSignatures||e.sentinelEmptyArray},s.prototype.getCallSignatures=function(){if(this._allCallSignatures)return this._allCallSignatures;var e=[];this._callSignatures&&(e=e.concat(this._callSignatures));if(this._extendedTypes&&this.kind===16)for(var t=0;t<this._extendedTypes.length;t++){if(this._extendedTypes[t].hasBase(this))continue;this._getResolver()._addUnhiddenSignaturesFromBaseType(this._callSignatures,this._extendedTypes[t].getCallSignatures(),e)}return this._allCallSignatures=e,e},s.prototype.hasOwnConstructSignatures=function(){return this._constructSignatures!==null},s.prototype.getOwnDeclaredConstructSignatures=function(){return this._constructSignatures||e.sentinelEmptyArray},s.prototype.getConstructSignatures=function(){if(this._allConstructSignatures)return this._allConstructSignatures;var e=[];this._constructSignatures?e=e.concat(this._constructSignatures):this.isConstructor()&&(this._extendedTypes&&this._extendedTypes.length>0?e=this.getBaseClassConstructSignatures(this._extendedTypes[0]):e=[this.getDefaultClassConstructSignature()]);if(this._extendedTypes&&this.kind===16)for(var t=0;t<this._extendedTypes.length;t++){if(this._extendedTypes[t].hasBase(this))continue;this._getResolver()._addUnhiddenSignaturesFromBaseType(this._constructSignatures,this._extendedTypes[t].getConstructSignatures(),e)}return this._allConstructSignatures=e,e},s.prototype.hasOwnIndexSignatures=function(){return this._indexSignatures!==null},s.prototype.getOwnIndexSignatures=function(){return this._indexSignatures||e.sentinelEmptyArray},s.prototype.getIndexSignatures=function(){if(this._allIndexSignatures)return this._allIndexSignatures;var e=[];this._indexSignatures&&(e=e.concat(this._indexSignatures));if(this._extendedTypes)for(var t=0;t<this._extendedTypes.length;t++){if(this._extendedTypes[t].hasBase(this))continue;this._getResolver()._addUnhiddenSignaturesFromBaseType(this._indexSignatures,this._extendedTypes[t].getIndexSignatures(),e)}return this._allIndexSignatures=e,e},s.prototype.getIndexSignaturesOfAugmentedType=function(e,t,n){if(!this._allIndexSignaturesOfAugmentedType){var r=this.getIndexSignatures(),i=!1,s=!1;if(t&&this.isFunctionType()&&this!==t){var o=t.getIndexSignatures();o.length&&(i=!0)}if(n&&this!==n){var u=n.getIndexSignatures();u.length&&(s=!0)}i||s?(this._allIndexSignaturesOfAugmentedType=r.slice(0),i&&e._addUnhiddenSignaturesFromBaseType(r,o,this._allIndexSignaturesOfAugmentedType),s&&(i&&(r=r.concat(o)),e._addUnhiddenSignaturesFromBaseType(r,u,this._allIndexSignaturesOfAugmentedType))):this._allIndexSignaturesOfAugmentedType=r}return this._allIndexSignaturesOfAugmentedType},s.prototype.getBaseClassConstructSignatures=function(t){e.Debug.assert(this.isConstructor()&&t.isConstructor());var r=this.getAssociatedContainerType();e.Debug.assert(r.getDeclarations().length===1);if(t.hasBase(this))return null;var i=t.getConstructSignatures(),s=[];for(var o=0;o<i.length;o++){var u=i[o],a=new n(2097152,u.isDefinition());a.returnType=r,a.addTypeParametersFromReturnType();for(var f=0;f<u.parameters.length;f++)a.addParameter(u.parameters[f],u.parameters[f].isOptional);u.parameters.length>0&&(a.hasVarArgs=u.parameters[u.parameters.length-1].isVarArg),a.addDeclaration(r.getDeclarations()[0]),this.addCallOrConstructSignaturePrerequisiteBase(a),s.push(a)}return s},s.prototype.getDefaultClassConstructSignature=function(){e.Debug.assert(this.isConstructor());var t=this.getAssociatedContainerType();e.Debug.assert(t.getDeclarations().length==1);var r=new n(2097152,!0);return r.returnType=t,r.addTypeParametersFromReturnType(),r.addDeclaration(t.getDeclarations()[0]),this.addCallOrConstructSignaturePrerequisiteBase(r),r},s.prototype.addImplementedType=function(e){if(!e)return;this._implementedTypes||(this._implementedTypes=[]),this._implementedTypes[this._implementedTypes.length]=e,e.addTypeThatExplicitlyImplementsThisType(this)},s.prototype.getImplementedTypes=function(){return this._implementedTypes?this._implementedTypes:e.sentinelEmptyArray},s.prototype.addExtendedType=function(e){if(!e)return;this._extendedTypes||(this._extendedTypes=[]),this._extendedTypes[this._extendedTypes.length]=e,e.addTypeThatExtendsThisType(this)},s.prototype.getExtendedTypes=function(){return this._extendedTypes?this._extendedTypes:e.sentinelEmptyArray},s.prototype.addTypeThatExtendsThisType=function(e){if(!e)return;this._typesThatExtendThisType||(this._typesThatExtendThisType=[]),this._typesThatExtendThisType[this._typesThatExtendThisType.length]=e},s.prototype.getTypesThatExtendThisType=function(){return this._typesThatExtendThisType||(this._typesThatExtendThisType=[]),this._typesThatExtendThisType},s.prototype.addTypeThatExplicitlyImplementsThisType=function(e){if(!e)return;this._typesThatExplicitlyImplementThisType||(this._typesThatExplicitlyImplementThisType=[]),this._typesThatExplicitlyImplementThisType[this._typesThatExplicitlyImplementThisType.length]=e},s.prototype.getTypesThatExplicitlyImplementThisType=function(){return this._typesThatExplicitlyImplementThisType||(this._typesThatExplicitlyImplementThisType=[]),this._typesThatExplicitlyImplementThisType},s.prototype.hasBase=function(t,n){typeof n=="undefined"&&(n=[]);if(this===t||this.getRootSymbol()===t||this===t.getRootSymbol())return!0;if(e.ArrayUtilities.contains(n,this))return!0;n.push(this);var r=this.getExtendedTypes();for(var i=0;i<r.length;i++)if(r[i].hasBase(t,n))return!0;var s=this.getImplementedTypes();for(var i=0;i<s.length;i++)if(s[i].hasBase(t,n))return!0;return n.pop(),!1},s.prototype.isValidBaseKind=function(e,t){if(e.isError())return!1;var n=this.isClass();if(t){if(n)return e.kind===8}else if(!n)return!1;return!!(e.kind&24)},s.prototype.findMember=function(e,t){var n=null;this._memberNameCache&&(n=this._memberNameCache[e]);if(n||!t)return n;if(this._extendedTypes)for(var r=0;r<this._extendedTypes.length;r++){n=this._extendedTypes[r].findMember(e,t);if(n)return n}return null},s.prototype.findNestedType=function(t,n){typeof n=="undefined"&&(n=0);var r;return this._enclosedTypeNameCache?(r=this._enclosedTypeNameCache[t],r&&n!==0&&(r=e.hasFlag(r.kind,n)?r:null),r):null},s.prototype.findNestedContainer=function(t,n){typeof n=="undefined"&&(n=0);var r;return this._enclosedContainerCache?(r=this._enclosedContainerCache[t],r&&n!==0&&(r=e.hasFlag(r.kind,n)?r:null),r):null},s.prototype.getAllMembers=function(t,n){var r=[];if(this._members!==e.sentinelEmptyArray)for(var i=0,s=this._members.length;i<s;i++){var o=this._members[i];o.kind&t&&(n!==2||!o.anyDeclHasFlag(2))&&(r[r.length]=o)}if(this._extendedTypes){var u=n!==0?2:0;for(var i=0,s=this._extendedTypes.length;i<s;i++){var a=this._extendedTypes[i].getAllMembers(t,u);for(var f=0,l=a.length;f<l;f++){var c=a[f];if(!this._memberNameCache||!this._memberNameCache[c.name])r[r.length]=c}}}if(this.isContainer()){if(this._enclosedMemberTypes)for(var i=0;i<this._enclosedMemberTypes.length;i++)r[r.length]=this._enclosedMemberTypes[i];if(this._enclosedMemberContainers)for(var i=0;i<this._enclosedMemberContainers.length;i++)r[r.length]=this._enclosedMemberContainers[i]}return r},s.prototype.findTypeParameter=function(e){return this._typeParameterNameCache?this._typeParameterNameCache[e]:null},s.prototype.setResolved=function(){r.prototype.setResolved.call(this)},s.prototype.getNamePartForFullName=function(){var e=r.prototype.getNamePartForFullName.call(this),n=this.getTypeArgumentsOrTypeParameters(),i=t.getTypeParameterString(n,this,!0);return e+i},s.prototype.getScopedName=function(e,t,n,r){return this.getScopedNameEx(e,t,n,!1,!1,r).toString()},s.prototype.isNamedTypeSymbol=function(){var e=this.kind;return e===2||e===8||e===4||e===32||e===128||e===64||e===8192||(e===16||e===8388608)&&this.name!==""?!0:!1},s.prototype.toString=function(e,t){var n=this.getScopedNameEx(e,!1,t).toString();return n},s.prototype.getScopedNameEx=function(n,i,s,o,u,a,f){typeof f=="undefined"&&(f=!0);if(this.isArrayNamedTypeReference()&&f){var l=this.getElementType(),c=l?l.isArrayNamedTypeReference()||l.isNamedTypeSymbol()?l.getScopedNameEx(n,!1,!1,o,u,a):l.getMemberTypeNameEx(!1,n,o):e.MemberName.create("any");return e.MemberName.create(c,"","[]")}if(!this.isNamedTypeSymbol())return this.getMemberTypeNameEx(!0,n,o);if(i)return e.MemberName.create(r.prototype.getScopedName.call(this,n,i,s,a));var h=new e.MemberNameArray;h.prefix=r.prototype.getScopedName.call(this,n,i,s,a);var p=this.getTypeArgumentsOrTypeParameters();return h.add(t.getTypeParameterStringEx(p,n,u,s)),h},s.prototype.hasOnlyOverloadCallSignatures=function(){var e=this.getMembers(),t=this.getCallSignatures(),n=this.getConstructSignatures();return e.length===0&&n.length===0&&t.length>1},s.prototype.getTypeOfSymbol=function(){var t=this.getAssociatedContainerType();if(t&&t.isNamedTypeSymbol())return t;var n=this.getFunctionSymbol();return n&&n.kind===16384&&!e.PullHelpers.isSymbolLocal(n)?e.PullHelpers.isExportedSymbolInClodule(n)?null:n:null},s.prototype.getMemberTypeNameEx=function(t,r,i){var s=this.getMembers(),o=this.getCallSignatures(),u=this.getConstructSignatures(),a=this.getIndexSignatures(),f=this.getTypeOfSymbol();if(f){var l=f.getScopedNameEx(r,!0);return e.MemberName.create(l,"typeof ","")}if(s.length>0||o.length>0||u.length>0||a.length>0){if(this._inMemberTypeNameEx)return e.MemberName.create("any");this._inMemberTypeNameEx=!0;var c=new e.MemberNameArray,h=!t||a.length!==0,p="; ";for(var d=0;d<s.length;d++){if(s[d].kind===65536&&s[d].type.hasOnlyOverloadCallSignatures()){var v=s[d].type.getCallSignatures(),m=s[d].getDisplayName(r)+(s[d].isOptional?"?":""),g=n.getSignaturesTypeNameEx(v,m,!1,!1,r);c.addAll(g)}else{var y=s[d].getNameAndTypeNameEx(r);y.isArray()&&y.delim===p?c.addAll(y.entries):c.add(y)}h=!0}var b=i&&!h&&this.hasOnlyOverloadCallSignatures(),w=o.length+u.length+a.length,E=!h&&w===1,S;return o.length>0&&(S=n.getSignaturesTypeNameEx(o,"",E,!1,r,b),c.addAll(S)),u.length>0&&(S=n.getSignaturesTypeNameEx(u,"new",E,!1,r),c.addAll(S)),a.length>0&&(S=n.getSignaturesTypeNameEx(a,"",E,!0,r),c.addAll(S)),h||!b&&w>1&&t?(c.prefix="{ ",c.suffix="}",c.delim=p):c.entries.length>1&&(c.delim=p),this._inMemberTypeNameEx=!1,c}return e.MemberName.create("{}")},s.prototype.getGenerativeTypeClassification=function(e){return 2},s.prototype.wrapsSomeTypeParameter=function(e,t){return this.getWrappingTypeParameterID(e,t)!=0},s.prototype.getWrappingTypeParameterID=function(t,n){var r=this;if(r.isTypeParameter()){if(t[r.pullSymbolID]||t[r.getRootSymbol().pullSymbolID])return r.pullSymbolID;var i=r.getConstraint(),s=i?i.getWrappingTypeParameterID(t):0;return s}if(r.inWrapCheck)return 0;this._wrapsTypeParameterCache=this._wrapsTypeParameterCache||new e.WrapsTypeParameterCache;var s=this._wrapsTypeParameterCache.getWrapsTypeParameter(t);return s===undefined&&(s=this.getWrappingTypeParameterIDWorker(t,n),this._wrapsTypeParameterCache.setWrapsTypeParameter(t,s)),s},s.prototype.getWrappingTypeParameterIDFromSignatures=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].getWrappingTypeParameterID(t);if(r!==0)return r}return 0},s.prototype.getWrappingTypeParameterIDWorker=function(t,n){var r=this,i=0;if(!n){r.inWrapCheck=!0;var s=r.getTypeArguments();r.isGeneric()&&!s&&(s=r.getTypeParameters());if(s)for(var o=0;!i&&o<s.length;o++)i=s[o].getWrappingTypeParameterID(t)}if(n||!(r.kind&8216)||!r.name){var u=r.getAllMembers(68147712,0);for(var o=0;!i&&o<u.length;o++)e.PullHelpers.resolveDeclaredSymbolToUseType(u[o]),i=u[o].type.getWrappingTypeParameterID(t);i=i||this.getWrappingTypeParameterIDFromSignatures(r.getCallSignatures(),t)||this.getWrappingTypeParameterIDFromSignatures(r.getConstructSignatures(),t)||this.getWrappingTypeParameterIDFromSignatures(r.getIndexSignatures(),t)}return n||(r.inWrapCheck=!1),i},s.prototype.wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReference=function(t){e.Debug.assert(this.isNamedTypeSymbol()),e.Debug.assert(e.PullHelpers.getRootType(t)==t);var n=e.BitMatrix.getBitMatrix(!0),r=this._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceRecurse(t,n);return n.release(),r},s.prototype._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceRecurse=function(e,t){var n=t.valueAt(this.pullSymbolID,e.pullSymbolID);return n!=undefined?n:this.inWrapInfiniteExpandingReferenceCheck?!1:(this.inWrapInfiniteExpandingReferenceCheck=!0,n=this._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceWorker(e,t),t.setValueAt(this.pullSymbolID,e.pullSymbolID,n),this.inWrapInfiniteExpandingReferenceCheck=!1,n)},s.prototype._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceWorker=function(t,n){var r=e.PullHelpers.getRootType(this);if(r!=t){var i=this.isNamedTypeSymbol();if(i){if(r.inWrapInfiniteExpandingReferenceCheck)return!1;r.inWrapInfiniteExpandingReferenceCheck=!0}var s=this._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceStructure(t,n);return i&&(r.inWrapInfiniteExpandingReferenceCheck=!1),s}var o=t.getTypeParameters(),u=this.getTypeArguments();for(var a=0;a<u.length;a++){if(e.ArrayUtilities.contains(o,u[a]))continue;if(u[a].wrapsSomeTypeParameter(this.getTypeParameterArgumentMap()))return!0}return!1},s.prototype._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceStructure=function(e,t){var n=this.getAllMembers(68147712,0);for(var r=0;r<n.length;r++)if(n[r].type&&n[r].type._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReferenceRecurse(e,t))return!0;var i=this.getCallSignatures();for(var r=0;r<i.length;r++)if(i[r]._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReference(e,t))return!0;i=this.getConstructSignatures();for(var r=0;r<i.length;r++)if(i[r]._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReference(e,t))return!0;i=this.getIndexSignatures();for(var r=0;r<i.length;r++)if(i[r]._wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReference(e,t))return!0;return!1},s.prototype.widenedType=function(e,t,n){return this._widenedType||(this._widenedType=e.widenType(this,t,n)),this._widenedType},s}(t);e.PullTypeSymbol=r;var s=function(e){function t(t){e.call(this,t,2),this.isResolved=!0}return i(t,e),t.prototype.isAny=function(){return!this.isStringConstant()&&this.name==="any"},t.prototype.isNull=function(){return!this.isStringConstant()&&this.name==="null"},t.prototype.isUndefined=function(){return!this.isStringConstant()&&this.name==="undefined"},t.prototype.isStringConstant=function(){return!1},t.prototype.setUnresolved=function(){},t.prototype.getDisplayName=function(){return this.isNull()||this.isUndefined()?"any":e.prototype.getDisplayName.call(this)},t}(r);e.PullPrimitiveTypeSymbol=s;var o=function(e){function t(t){e.call(this,t)}return i(t,e),t.prototype.isStringConstant=function(){return!0},t}(s);e.PullStringConstantTypeSymbol=o;var u=function(t){function n(n,r){t.call(this,r),this._anyType=n,e.Debug.assert(this._anyType),this.isResolved=!0}return i(n,t),n.prototype.isError=function(){return!0},n.prototype._getResolver=function(){return this._anyType._getResolver()},n.prototype.getName=function(e,t){return this._anyType.getName(e,t)},n.prototype.getDisplayName=function(e,t,n){return this._anyType.getName(e,t)},n.prototype.toString=function(e,t){return this._anyType.getName(e,t)},n}(s);e.PullErrorTypeSymbol=u;var a=function(e){function t(t,n){e.call(this,t,n),this.instanceSymbol=null,this.assignedValue=null,this.assignedType=null,this.assignedContainer=null}return i(t,e),t.prototype.isContainer=function(){return!0},t.prototype.setInstanceSymbol=function(e){this.instanceSymbol=e},t.prototype.getInstanceSymbol=function(){return this.instanceSymbol},t.prototype.setExportAssignedValueSymbol=function(e){this.assignedValue=e},t.prototype.getExportAssignedValueSymbol=function(){return this.assignedValue},t.prototype.setExportAssignedTypeSymbol=function(e){this.assignedType=e},t.prototype.getExportAssignedTypeSymbol=function(){return this.assignedType},t.prototype.setExportAssignedContainerSymbol=function(e){this.assignedContainer=e},t.prototype.getExportAssignedContainerSymbol=function(){return this.assignedContainer},t.prototype.hasExportAssignment=function(){return!!this.assignedValue||!!this.assignedType||!!this.assignedContainer},t.usedAsSymbol=function(e,n){if(!e||!e.isContainer())return!1;if(!e.isAlias()&&e.type===n)return!0;var r=e,i=r.getExportAssignedValueSymbol(),s=r.getExportAssignedTypeSymbol(),o=r.getExportAssignedContainerSymbol();return i||s||o?i===n||s==n||o==n||t.usedAsSymbol(o,n):!1},t.prototype.getInstanceType=function(){return this.instanceSymbol?this.instanceSymbol.type:null},t}(r);e.PullContainerSymbol=a;var f=function(t){function n(e){t.call(this,e,128),this._assignedValue=null,this._assignedType=null,this._assignedContainer=null,this._isUsedAsValue=!1,this._typeUsedExternally=!1,this._isUsedInExportAlias=!1,this.retrievingExportAssignment=!1,this.linkedAliasSymbols=null}return i(n,t),n.prototype.isUsedInExportedAlias=function(){return this._resolveDeclaredSymbol(),this._isUsedInExportAlias},n.prototype.typeUsedExternally=function(){return this._resolveDeclaredSymbol(),this._typeUsedExternally},n.prototype.isUsedAsValue=function(){return this._resolveDeclaredSymbol(),this._isUsedAsValue},n.prototype.setTypeUsedExternally=function(){this._typeUsedExternally=!0},n.prototype.setIsUsedInExportedAlias=function(){this._isUsedInExportAlias=!0,this.linkedAliasSymbols&&this.linkedAliasSymbols.forEach(function(e){return e.setIsUsedInExportedAlias()})},n.prototype.addLinkedAliasSymbol=function(e){this.linkedAliasSymbols?this.linkedAliasSymbols.push(e):this.linkedAliasSymbols=[e]},n.prototype.setIsUsedAsValue=function(){this._isUsedAsValue=!0,this.linkedAliasSymbols&&this.linkedAliasSymbols.forEach(function(e){return e.setIsUsedAsValue()})},n.prototype.assignedValue=function(){return this._resolveDeclaredSymbol(),this._assignedValue},n.prototype.assignedType=function(){return this._resolveDeclaredSymbol(),this._assignedType},n.prototype.assignedContainer=function(){return this._resolveDeclaredSymbol(),this._assignedContainer},n.prototype.isAlias=function(){return!0},n.prototype.isContainer=function(){return!0},n.prototype.setAssignedValueSymbol=function(e){this._assignedValue=e},n.prototype.getExportAssignedValueSymbol=function(){if(this._assignedValue)return this._assignedValue;if(this.retrievingExportAssignment)return null;if(this._assignedContainer){if(this._assignedContainer.hasExportAssignment()){this.retrievingExportAssignment=!0;var e=this._assignedContainer.getExportAssignedValueSymbol();return this.retrievingExportAssignment=!1,e}return this._assignedContainer.getInstanceSymbol()}return null},n.prototype.setAssignedTypeSymbol=function(e){this._assignedType=e},n.prototype.getExportAssignedTypeSymbol=function(){if(this.retrievingExportAssignment)return null;if(this._assignedType)if(this._assignedType.isAlias()){this.retrievingExportAssignment=!0;var e=this._assignedType.getExportAssignedTypeSymbol();this.retrievingExportAssignment=!1}else if(this._assignedType!==this._assignedContainer)return this._assignedType;if(this._assignedContainer){this.retrievingExportAssignment=!0;var e=this._assignedContainer.getExportAssignedTypeSymbol();this.retrievingExportAssignment=!1;if(e)return e}return this._assignedContainer},n.prototype.setAssignedContainerSymbol=function(e){this._assignedContainer=e},n.prototype.getExportAssignedContainerSymbol=function(){if(this.retrievingExportAssignment)return null;if(this._assignedContainer){this.retrievingExportAssignment=!0;var e=this._assignedContainer.getExportAssignedContainerSymbol();this.retrievingExportAssignment=!1;if(e)return e}return this._assignedContainer},n.prototype.getMembers=function(){return this._assignedType?this._assignedType.getMembers():e.sentinelEmptyArray},n.prototype.getCallSignatures=function(){return this._assignedType?this._assignedType.getCallSignatures():e.sentinelEmptyArray},n.prototype.getConstructSignatures=function(){return this._assignedType?this._assignedType.getConstructSignatures():e.sentinelEmptyArray},n.prototype.getIndexSignatures=function(){return this._assignedType?this._assignedType.getIndexSignatures():e.sentinelEmptyArray},n.prototype.findMember=function(e){return this._assignedType?this._assignedType.findMember(e,!0):null},n.prototype.findNestedType=function(e){return this._assignedType?this._assignedType.findNestedType(e):null},n.prototype.findNestedContainer=function(e){return this._assignedType?this._assignedType.findNestedContainer(e):null},n.prototype.getAllMembers=function(t,n){return this._assignedType?this._assignedType.getAllMembers(t,n):e.sentinelEmptyArray},n}(r);e.PullTypeAliasSymbol=f;var l=function(t){function n(e){t.call(this,e,8192),this._constraint=null}return i(n,t),n.prototype.isTypeParameter=function(){return!0},n.prototype.setConstraint=function(e){this._constraint=e},n.prototype.getConstraint=function(){return this._constraint},n.prototype.getBaseConstraint=function(t){var n=this.getConstraintRecursively({});return e.Debug.assert(n===null||!n.isTypeParameter()),n||t.emptyTypeSymbol},n.prototype.getConstraintRecursively=function(e){var t=this.getConstraint();if(t){if(!t.isTypeParameter())return t;var n=t;if(!e[n.pullSymbolID])return e[n.pullSymbolID]=n,n.getConstraintRecursively(e)}return null},n.prototype.getDefaultConstraint=function(e){return this._constraint||e.emptyTypeSymbol},n.prototype.getCallSignatures=function(){return this._constraint?this._constraint.getCallSignatures():t.prototype.getCallSignatures.call(this)},n.prototype.getConstructSignatures=function(){return this._constraint?this._constraint.getConstructSignatures():t.prototype.getConstructSignatures.call(this)},n.prototype.getIndexSignatures=function(){return this._constraint?this._constraint.getIndexSignatures():t.prototype.getIndexSignatures.call(this)},n.prototype.isGeneric=function(){return!0},n.prototype.fullName=function(e){var t=this.getDisplayName(e),n=this.getContainer();if(n){var r=n.fullName(e);t=t+" in "+r}return t},n.prototype.getName=function(e,n){var r=t.prototype.getName.call(this,e);return this.isPrinting?r:(this.isPrinting=!0,n&&this._constraint&&(r+=" extends "+this._constraint.toString(e)),this.isPrinting=!1,r)},n.prototype.getDisplayName=function(e,n,r){var i=t.prototype.getDisplayName.call(this,e,n,r);return this.isPrinting?i:(this.isPrinting=!0,n&&this._constraint&&(i+=" extends "+this._constraint.toString(e)),this.isPrinting=!1,i)},n.prototype.isExternallyVisible=function(e){return!0},n}(r);e.PullTypeParameterSymbol=l;var c=function(e){function t(t){e.call(this,t,4096),this._getterSymbol=null,this._setterSymbol=null}return i(t,e),t.prototype.isAccessor=function(){return!0},t.prototype.setSetter=function(e){if(!e)return;this._setterSymbol=e},t.prototype.getSetter=function(){return this._setterSymbol},t.prototype.setGetter=function(e){if(!e)return;this._getterSymbol=e},t.prototype.getGetter=function(){return this._getterSymbol},t}(t);e.PullAccessorSymbol=c,e.getIDForTypeSubstitutions=h;var v=function(){function e(){this.structure=""}return e.prototype.memberSymbolWalk=function(e){return this.structure+=e.name+"@"+p(e.type),!0},e.prototype.callSignatureWalk=function(e){return this.structure+="(",!0},e.prototype.constructSignatureWalk=function(e){return this.structure+="new(",!0},e.prototype.indexSignatureWalk=function(e){return this.structure+="[](",!0},e.prototype.signatureParameterWalk=function(e){return this.structure+=e.name+"@"+p(e.type),!0},e.prototype.signatureReturnTypeWalk=function(e){return this.structure+=")"+p(e),!0},e}();(function(e){e[e.all=0]="all",e[e.internallyVisible=1]="internallyVisible",e[e.externallyVisible=2]="externallyVisible"})(e.GetAllMembersVisiblity||(e.GetAllMembersVisiblity={}));var m=e.GetAllMembersVisiblity})(r||(r={}));var r;(function(e){var t=function(){function t(){this.currentSymbols=null}return t.prototype.getEnclosingType=function(){return this.currentSymbols&&this.currentSymbols.length>0?this.currentSymbols[0]:null},t.prototype._canWalkStructure=function(){var e=this.getEnclosingType();return!!e&&e.isGeneric()},t.prototype._getCurrentSymbol=function(){return this.currentSymbols&&this.currentSymbols.length?this.currentSymbols[this.currentSymbols.length-1]:null},t.prototype.getGenerativeClassification=function(){if(this._canWalkStructure()){var e=this.currentSymbols[this.currentSymbols.length-1];if(!e)return 0;var t=this.getEnclosingType();return e.getGenerativeTypeClassification(t)}return 2},t.prototype._pushSymbol=function(e){return this.currentSymbols.push(e)},t.prototype._popSymbol=function(){return this.currentSymbols.pop()},t.prototype._setEnclosingTypeOfParentDecl=function(e,t){var n=e.getParentDecl();if(n){n.kind&8216?this._setEnclosingTypeWorker(n.getSymbol(),!0):this._setEnclosingTypeOfParentDecl(n,!0);if(this._canWalkStructure()){var r=e.getSymbol();r&&(!r.isType()&&!r.isSignature()&&(r=r.type),this._pushSymbol(r));if(t){var i=e.getSignatureSymbol();i&&this._pushSymbol(i)}}}},t.prototype._setEnclosingTypeWorker=function(t,n){if(t.isType()&&t.isNamedTypeSymbol()){this.currentSymbols=[e.PullHelpers.getRootType(t)];return}var r=t.getDeclarations();for(var i=0;i<r.length;i++){var s=r[i];this._setEnclosingTypeOfParentDecl(s,n);if(this._canWalkStructure())return}},t.prototype.setCurrentSymbol=function(t){e.Debug.assert(this._canWalkStructure()),this.currentSymbols[this.currentSymbols.length-1]=t},t.prototype.startWalkingType=function(e){var t=this.currentSymbols,n=!this.getEnclosingType()||e.isNamedTypeSymbol();return n&&(this.currentSymbols=null,this.setEnclosingType(e)),t},t.prototype.endWalkingType=function(e){this.currentSymbols=e},t.prototype.setEnclosingType=function(t){e.Debug.assert(!this.getEnclosingType()),this._setEnclosingTypeWorker(t,t.isSignature())},t.prototype.walkMemberType=function(e,t){if(this._canWalkStructure()){var n=this._getCurrentSymbol(),r=n?t._getNamedPropertySymbolOfAugmentedType(e,n):null;this._pushSymbol(r?r.type:null)}},t.prototype.postWalkMemberType=function(){this._canWalkStructure()&&this._popSymbol()},t.prototype.walkSignature=function(e,t){if(this._canWalkStructure()){var n=this._getCurrentSymbol(),r;n&&(e==1048576?r=n.getCallSignatures():e==2097152?r=n.getConstructSignatures():r=n.getIndexSignatures()),this._pushSymbol(r?r[t]:null)}},t.prototype.postWalkSignature=function(){this._canWalkStructure()&&this._popSymbol()},t.prototype.walkTypeArgument=function(e){if(this._canWalkStructure()){var t=null,n=this._getCurrentSymbol();if(n){var r=n.getTypeArguments();t=r?r[e]:null}this._pushSymbol(t)}},t.prototype.postWalkTypeArgument=function(){this._canWalkStructure()&&this._popSymbol()},t.prototype.walkTypeParameterConstraint=function(t){if(this._canWalkStructure()){var n,r=this._getCurrentSymbol();r&&(r.isSignature()?n=r.getTypeParameters():(e.Debug.assert(r.isType()),n=r.getTypeParameters())),this._pushSymbol(n?n[t].getConstraint():null)}},t.prototype.postWalkTypeParameterConstraint=function(){this._canWalkStructure()&&this._popSymbol()},t.prototype.walkReturnType=function(){if(this._canWalkStructure()){var e=this._getCurrentSymbol();this._pushSymbol(e?e.returnType:null)}},t.prototype.postWalkReturnType=function(){this._canWalkStructure()&&this._popSymbol()},t.prototype.walkParameterType=function(e){if(this._canWalkStructure()){var t=this._getCurrentSymbol();this._pushSymbol(t?t.getParameterTypeAtIndex(e):null)}},t.prototype.postWalkParameterType=function(){this._canWalkStructure()&&this._popSymbol()},t.prototype.getBothKindOfIndexSignatures=function(e,t,n){if(this._canWalkStructure()){var r=this._getCurrentSymbol();if(r)return e._getBothKindsOfIndexSignatures(r,t,n)}return null},t.prototype.walkIndexSignatureReturnType=function(e,t,n){if(this._canWalkStructure()){var r=e?t?e.stringSignature:e.numericSignature:null;this._pushSymbol(r),n||this._pushSymbol(r?r.returnType:null)}},t.prototype.postWalkIndexSignatureReturnType=function(e){this._canWalkStructure()&&(e||this._popSymbol(),this._popSymbol())},t}();e.PullTypeEnclosingTypeWalker=t})(r||(r={}));var r;(function(e){var t=function(){function t(){this.typeParameter=null,this._inferredTypeAfterFixing=null,this.inferenceCandidates=[]}return t.prototype.addCandidate=function(e){this._inferredTypeAfterFixing||(this.inferenceCandidates[this.inferenceCandidates.length]=e)},t.prototype.isFixed=function(){return!!this._inferredTypeAfterFixing},t.prototype.fixTypeParameter=function(t,n){var r=this;if(!this._inferredTypeAfterFixing){var i={getLength:function(){return r.inferenceCandidates.length},getTypeAtIndex:function(e){return r.inferenceCandidates[e].type}},s=t.findBestCommonType(i,n,new e.TypeComparisonInfo);this._inferredTypeAfterFixing=s.widenedType(t,null,n)}},t}();e.CandidateInferenceInfo=t;var n=function(){function n(t,n,r){this.resolver=t,this.context=n,this.signatureBeingInferred=r,this.inferenceCache=e.BitMatrix.getBitMatrix(!1),this.candidateCache=[];var i=r.getTypeParameters();for(var s=0;s<i.length;s++)this.addInferenceRoot(i[s])}return n.prototype.alreadyRelatingTypes=function(e,t){return this.inferenceCache.valueAt(e.pullSymbolID,t.pullSymbolID)?!0:(this.inferenceCache.setValueAt(e.pullSymbolID,t.pullSymbolID,!0),!1)},n.prototype.resetRelationshipCache=function(){this.inferenceCache.release(),this.inferenceCache=e.BitMatrix.getBitMatrix(!1)},n.prototype.addInferenceRoot=function(e){var n=this.candidateCache[e.pullSymbolID];n||(n=new t,n.typeParameter=e,this.candidateCache[e.pullSymbolID]=n)},n.prototype.getInferenceInfo=function(e){return this.candidateCache[e.pullSymbolID]},n.prototype.addCandidateForInference=function(e,t){var n=this.getInferenceInfo(e);n&&t&&n.inferenceCandidates.indexOf(t)<0&&n.addCandidate(t)},n.prototype.inferTypeArguments=function(){throw e.Errors.abstract()},n.prototype.fixTypeParameter=function(e){var t=this.candidateCache[e.pullSymbolID];t&&t.fixTypeParameter(this.resolver,this.context)},n.prototype._finalizeInferredTypeArguments=function(){var e=[],t=this.signatureBeingInferred.getTypeParameters();for(var n=0;n<t.length;n++){var r=this.candidateCache[t[n].pullSymbolID];r.fixTypeParameter(this.resolver,this.context);for(var n=0;n<e.length;n++)e[n].type===r.typeParameter&&(e[n].type=r._inferredTypeAfterFixing);e.push(r._inferredTypeAfterFixing)}return e},n.prototype.isInvocationInferenceContext=function(){throw e.Errors.abstract()},n}();e.TypeArgumentInferenceContext=n;var r=function(e){function t(t,n,r,i){e.call(this,t,n,r),this.argumentASTs=i}return i(t,e),t.prototype.isInvocationInferenceContext=function(){return!0},t.prototype.inferTypeArguments=function(){var e=this;return this.signatureBeingInferred.forAllParameterTypes(this.argumentASTs.nonSeparatorCount(),function(t,n){var r=e.argumentASTs.nonSeparatorAt(n);e.context.pushInferentialType(t,e);var i=e.resolver.resolveAST(r,!0,e.context).type;return e.resolver.relateTypeToTypeParametersWithNewEnclosingTypes(i,t,e,e.context),e.context.popAnyContextualType(),!0}),this._finalizeInferredTypeArguments()},t}(n);e.InvocationTypeArgumentInferenceContext=r;var s=function(e){function t(t,n,r,i,s){e.call(this,t,n,r),this.contextualSignature=i,this.shouldFixContextualSignatureParameterTypes=s}return i(t,e),t.prototype.isInvocationInferenceContext=function(){return!1},t.prototype.inferTypeArguments=function(){var e=this,t=function(t,n){return e.shouldFixContextualSignatureParameterTypes&&(n=e.context.fixAllTypeParametersReferencedByType(n,e.resolver,e)),e.resolver.relateTypeToTypeParametersWithNewEnclosingTypes(n,t,e,e.context),!0};return this.signatureBeingInferred.forAllCorrespondingParameterTypesInThisAndOtherSignature(this.contextualSignature,t),this._finalizeInferredTypeArguments()},t}(n);e.ContextualSignatureInstantiationTypeArgumentInferenceContext=s;var o=function(){function e(e,t,n,r){this.contextualType=e,this.provisional=t,this.isInferentiallyTyping=n,this.typeArgumentInferenceContext=r,this.provisionallyTypedSymbols=[],this.hasProvisionalErrors=!1,this.astSymbolMap=[]}return e.prototype.recordProvisionallyTypedSymbol=function(e){this.provisionallyTypedSymbols[this.provisionallyTypedSymbols.length]=e},e.prototype.invalidateProvisionallyTypedSymbols=function(){for(var e=0;e<this.provisionallyTypedSymbols.length;e++)this.provisionallyTypedSymbols[e].setUnresolved()},e.prototype.setSymbolForAST=function(e,t){this.astSymbolMap[e.syntaxID()]=t},e.prototype.getSymbolForAST=function(e){return this.astSymbolMap[e.syntaxID()]},e}();e.PullContextualTypeContext=o;var u=function(){function t(t,n,r){typeof n=="undefined"&&(n=!1),typeof r=="undefined"&&(r=null),this.resolver=t,this.inTypeCheck=n,this.fileName=r,this.contextStack=[],this.typeCheckedNodes=null,this.enclosingTypeWalker1=null,this.enclosingTypeWalker2=null,this.inBaseTypeResolution=!1,n&&(e.Debug.assert(r,"A file name must be provided if you are typechecking"),this.typeCheckedNodes=e.BitVector.getBitVector(!1))}return t.prototype.setTypeChecked=function(e){this.inProvisionalResolution()||this.typeCheckedNodes.setValueAt(e.syntaxID(),!0)},t.prototype.canTypeCheckAST=function(e){return this.typeCheck()&&!this.typeCheckedNodes.valueAt(e.syntaxID())&&this.fileName===e.fileName()},t.prototype._pushAnyContextualType=function(e,t,n,r){this.contextStack.push(new o(e,t,n,r))},t.prototype.pushNewContextualType=function(e){this._pushAnyContextualType(e,this.inProvisionalResolution(),!1,null)},t.prototype.propagateContextualType=function(e){this._pushAnyContextualType(e,this.inProvisionalResolution(),this.isInferentiallyTyping(),this.getCurrentTypeArgumentInferenceContext())},t.prototype.pushInferentialType=function(e,t){this._pushAnyContextualType(e,!0,!0,t)},t.prototype.pushProvisionalType=function(e){this._pushAnyContextualType(e,!0,!1,null)},t.prototype.popAnyContextualType=function(){var e=this.contextStack.pop();return e.invalidateProvisionallyTypedSymbols(),e.hasProvisionalErrors&&this.inProvisionalResolution()&&(this.contextStack[this.contextStack.length-1].hasProvisionalErrors=!0),e},t.prototype.hasProvisionalErrors=function(){return this.contextStack.length?this.contextStack[this.contextStack.length-1].hasProvisionalErrors:!1},t.prototype.getContextualType=function(){var e=this.contextStack.length?this.contextStack[this.contextStack.length-1]:null;if(e){var t=e.contextualType;return t?t:null}return null},t.prototype.fixAllTypeParametersReferencedByType=function(t,n,r){var r=this.getCurrentTypeArgumentInferenceContext();if(t.wrapsSomeTypeParameter(r.candidateCache)){var i=[];for(var s in r.candidateCache){var o=r.candidateCache[s]&&r.candidateCache[s].typeParameter;if(o){var u=[];u[o.pullSymbolID]=o,t.wrapsSomeTypeParameter(u)&&(r.fixTypeParameter(o),e.Debug.assert(r.candidateCache[s]._inferredTypeAfterFixing),i[o.pullSymbolID]=r.candidateCache[s]._inferredTypeAfterFixing)}}return n.instantiateType(t,i)}return t},t.prototype.getCurrentTypeArgumentInferenceContext=function(){return this.contextStack.length?this.contextStack[this.contextStack.length-1].typeArgumentInferenceContext:null},t.prototype.isInferentiallyTyping=function(){return this.contextStack.length>0&&this.contextStack[this.contextStack.length-1].isInferentiallyTyping},t.prototype.inProvisionalResolution=function(){return this.contextStack.length?this.contextStack[this.contextStack.length-1].provisional:!1},t.prototype.isInBaseTypeResolution=function(){return this.inBaseTypeResolution},t.prototype.startBaseTypeResolution=function(){var e=this.inBaseTypeResolution;return this.inBaseTypeResolution=!0,e},t.prototype.doneBaseTypeResolution=function(e){this.inBaseTypeResolution=e},t.prototype.setTypeInContext=function(e,t){if(e.type&&e.type.isError()&&!t.isError())return;e.type=t,this.contextStack.length&&this.inProvisionalResolution()&&this.contextStack[this.contextStack.length-1].recordProvisionallyTypedSymbol(e)},t.prototype.postDiagnostic=function(e){e&&(this.inProvisionalResolution()?this.contextStack[this.contextStack.length-1].hasProvisionalErrors=!0:this.inTypeCheck&&this.resolver&&this.resolver.semanticInfoChain.addDiagnostic(e))},t.prototype.typeCheck=function(){return this.inTypeCheck&&!this.inProvisionalResolution()},t.prototype.setSymbolForAST=function(e,t){this.contextStack[this.contextStack.length-1].setSymbolForAST(e,t)},t.prototype.getSymbolForAST=function(e){for(var t=this.contextStack.length-1;t>=0;t--){var n=this.contextStack[t];if(!n.provisional)break;var r=n.getSymbolForAST(e);if(r)return r}return null},t.prototype.startWalkingTypes=function(t,n){this.enclosingTypeWalker1||(this.enclosingTypeWalker1=new e.PullTypeEnclosingTypeWalker);var r=this.enclosingTypeWalker1.startWalkingType(t);this.enclosingTypeWalker2||(this.enclosingTypeWalker2=new e.PullTypeEnclosingTypeWalker);var i=this.enclosingTypeWalker2.startWalkingType(n);return{symbolsWhenStartedWalkingTypes1:r,symbolsWhenStartedWalkingTypes2:i}},t.prototype.endWalkingTypes=function(e){this.enclosingTypeWalker1.endWalkingType(e.symbolsWhenStartedWalkingTypes1),this.enclosingTypeWalker2.endWalkingType(e.symbolsWhenStartedWalkingTypes2)},t.prototype.setEnclosingTypes=function(t,n){this.enclosingTypeWalker1||(this.enclosingTypeWalker1=new e.PullTypeEnclosingTypeWalker),this.enclosingTypeWalker1.setEnclosingType(t),this.enclosingTypeWalker2||(this.enclosingTypeWalker2=new e.PullTypeEnclosingTypeWalker),this.enclosingTypeWalker2.setEnclosingType(n)},t.prototype.walkMemberTypes=function(e){this.enclosingTypeWalker1.walkMemberType(e,this.resolver),this.enclosingTypeWalker2.walkMemberType(e,this.resolver)},t.prototype.postWalkMemberTypes=function(){this.enclosingTypeWalker1.postWalkMemberType(),this.enclosingTypeWalker2.postWalkMemberType()},t.prototype.walkSignatures=function(e,t,n){this.enclosingTypeWalker1.walkSignature(e,t),this.enclosingTypeWalker2.walkSignature(e,n==undefined?t:n)},t.prototype.postWalkSignatures=function(){this.enclosingTypeWalker1.postWalkSignature(),this.enclosingTypeWalker2.postWalkSignature()},t.prototype.walkTypeParameterConstraints=function(e){this.enclosingTypeWalker1.walkTypeParameterConstraint(e),this.enclosingTypeWalker2.walkTypeParameterConstraint(e)},t.prototype.postWalkTypeParameterConstraints=function(){this.enclosingTypeWalker1.postWalkTypeParameterConstraint(),this.enclosingTypeWalker2.postWalkTypeParameterConstraint()},t.prototype.walkTypeArgument=function(e){this.enclosingTypeWalker1.walkTypeArgument(e),this.enclosingTypeWalker2.walkTypeArgument(e)},t.prototype.postWalkTypeArgument=function(){this.enclosingTypeWalker1.postWalkTypeArgument(),this.enclosingTypeWalker2.postWalkTypeArgument()},t.prototype.walkReturnTypes=function(){this.enclosingTypeWalker1.walkReturnType(),this.enclosingTypeWalker2.walkReturnType()},t.prototype.postWalkReturnTypes=function(){this.enclosingTypeWalker1.postWalkReturnType(),this.enclosingTypeWalker2.postWalkReturnType()},t.prototype.walkParameterTypes=function(e){this.enclosingTypeWalker1.walkParameterType(e),this.enclosingTypeWalker2.walkParameterType(e)},t.prototype.postWalkParameterTypes=function(){this.enclosingTypeWalker1.postWalkParameterType(),this.enclosingTypeWalker2.postWalkParameterType()},t.prototype.getBothKindOfIndexSignatures=function(e,t){var n=this.enclosingTypeWalker1.getBothKindOfIndexSignatures(this.resolver,this,e),r=this.enclosingTypeWalker2.getBothKindOfIndexSignatures(this.resolver,this,t);return{indexSigs1:n,indexSigs2:r}},t.prototype.walkIndexSignatureReturnTypes=function(e,t,n,r){this.enclosingTypeWalker1.walkIndexSignatureReturnType(e.indexSigs1,t,r),this.enclosingTypeWalker2.walkIndexSignatureReturnType(e.indexSigs2,n,r)},t.prototype.postWalkIndexSignatureReturnTypes=function(e){this.enclosingTypeWalker1.postWalkIndexSignatureReturnType(e),this.enclosingTypeWalker2.postWalkIndexSignatureReturnType(e)},t.prototype.swapEnclosingTypeWalkers=function(){var e=this.enclosingTypeWalker1;this.enclosingTypeWalker1=this.enclosingTypeWalker2,this.enclosingTypeWalker2=e},t.prototype.oneOfClassificationsIsInfinitelyExpanding=function(){var e=this.enclosingTypeWalker1.getGenerativeClassification();if(e===3)return!0;var t=this.enclosingTypeWalker2.getGenerativeClassification();return t===3?!0:!1},t.prototype.resetEnclosingTypeWalkers=function(){var e=this.enclosingTypeWalker1,t=this.enclosingTypeWalker2;return this.enclosingTypeWalker1=null,this.enclosingTypeWalker2=null,{enclosingTypeWalker1:e,enclosingTypeWalker2:t}},t.prototype.setEnclosingTypeWalkers=function(e){this.enclosingTypeWalker1=e.enclosingTypeWalker1,this.enclosingTypeWalker2=e.enclosingTypeWalker2},t}();e.PullTypeResolutionContext=u})(r||(r={}));var r;(function(e){function a(e){var t=e.valueText();return u[t]}function c(t){if(t.kind()===11)return{actualText:t.text(),memberName:t.valueText()};if(t.kind()===14)return{actualText:t.text(),memberName:t.valueText()};if(t.kind()===13)return{actualText:t.text(),memberName:t.valueText()};throw e.Errors.invalidOperation()}function h(e){while(e&&e.parent){switch(e.parent.kind()){case 244:return!0;case 127:return!1;case 125:var t=e.parent;if(t.type===e)return!0;break;case 123:var n=e.parent;if(n.type===e)return!0;break;case 239:var r=e.parent;if(r.type===e)return!0;break;case 220:var i=e.parent;return i.type===e;case 230:case 231:return!0;case 228:return!0;case 131:case 128:case 130:case 129:case 145:case 212:case 242:return!1}e=e.parent}return!1}var t;(function(e){e[e.NotAssignable=0]="NotAssignable",e[e.AssignableButWithProvisionalErrors=1]="AssignableButWithProvisionalErrors",e[e.AssignableWithNoProvisionalErrors=2]="AssignableWithNoProvisionalErrors",e[e.Subtype=3]="Subtype"})(t||(t={}));var n=function(){function e(){this.targetSymbol=null,this.resolvedSignatures=null,this.candidateSignature=null,this.actualParametersContextTypeSymbols=null,this.diagnosticsFromOverloadResolution=[]}return e}();e.PullAdditionalCallResolutionData=n;var r=function(){function e(){this.membersContextTypeSymbols=null}return e}();e.PullAdditionalObjectLiteralResolutionData=r;var i=function(){function e(e,t){this.memberSymbol=e,this.baseOrigin=t}return e}(),s=function(){function e(e,t){this.signature=e,this.baseOrigin=t}return e}(),o=function(){function e(){}return e}(),u;(function(e){e[e._this=1]="_this",e[e._super=2]="_super",e[e.arguments=3]="arguments",e[e._i=4]="_i",e[e.require=5]="require",e[e.exports=6]="exports"})(u||(u={}));var f=function(){function t(t,n){this.compilationSettings=t,this.semanticInfoChain=n,this._cachedArrayInterfaceType=null,this._cachedNumberInterfaceType=null,this._cachedStringInterfaceType=null,this._cachedBooleanInterfaceType=null,this._cachedObjectInterfaceType=null,this._cachedFunctionInterfaceType=null,this._cachedIArgumentsInterfaceType=null,this._cachedRegExpInterfaceType=null,this._cachedAnyTypeArgs=null,this.typeCheckCallBacks=[],this.postTypeCheckWorkitems=[],this._cachedFunctionArgumentsSymbol=null,this.assignableCache=e.BitMatrix.getBitMatrix(!0),this.subtypeCache=e.BitMatrix.getBitMatrix(!0),this.identicalCache=e.BitMatrix.getBitMatrix(!0),this.inResolvingOtherDeclsWalker=new e.PullHelpers.OtherPullDeclsWalker}return t.prototype.cachedArrayInterfaceType=function(){return this._cachedArrayInterfaceType||(this._cachedArrayInterfaceType=this.getSymbolFromDeclPath("Array",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedArrayInterfaceType.isResolved||this.resolveDeclaredSymbol(this._cachedArrayInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedArrayInterfaceType},t.prototype.getArrayNamedType=function(){return this.cachedArrayInterfaceType()},t.prototype.cachedNumberInterfaceType=function(){return this._cachedNumberInterfaceType||(this._cachedNumberInterfaceType=this.getSymbolFromDeclPath("Number",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedNumberInterfaceType&&!this._cachedNumberInterfaceType.isResolved&&this.resolveDeclaredSymbol(this._cachedNumberInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedNumberInterfaceType},t.prototype.cachedStringInterfaceType=function(){return this._cachedStringInterfaceType||(this._cachedStringInterfaceType=this.getSymbolFromDeclPath("String",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedStringInterfaceType&&!this._cachedStringInterfaceType.isResolved&&this.resolveDeclaredSymbol(this._cachedStringInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedStringInterfaceType},t.prototype.cachedBooleanInterfaceType=function(){return this._cachedBooleanInterfaceType||(this._cachedBooleanInterfaceType=this.getSymbolFromDeclPath("Boolean",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedBooleanInterfaceType&&!this._cachedBooleanInterfaceType.isResolved&&this.resolveDeclaredSymbol(this._cachedBooleanInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedBooleanInterfaceType},t.prototype.cachedObjectInterfaceType=function(){return this._cachedObjectInterfaceType||(this._cachedObjectInterfaceType=this.getSymbolFromDeclPath("Object",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedObjectInterfaceType||(this._cachedObjectInterfaceType=this.semanticInfoChain.anyTypeSymbol),this._cachedObjectInterfaceType.isResolved||this.resolveDeclaredSymbol(this._cachedObjectInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedObjectInterfaceType},t.prototype.cachedFunctionInterfaceType=function(){return this._cachedFunctionInterfaceType||(this._cachedFunctionInterfaceType=this.getSymbolFromDeclPath("Function",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedFunctionInterfaceType&&!this._cachedFunctionInterfaceType.isResolved&&this.resolveDeclaredSymbol(this._cachedFunctionInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedFunctionInterfaceType},t.prototype.cachedIArgumentsInterfaceType=function(){return this._cachedIArgumentsInterfaceType||(this._cachedIArgumentsInterfaceType=this.getSymbolFromDeclPath("IArguments",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedIArgumentsInterfaceType&&!this._cachedIArgumentsInterfaceType.isResolved&&this.resolveDeclaredSymbol(this._cachedIArgumentsInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedIArgumentsInterfaceType},t.prototype.cachedRegExpInterfaceType=function(){return this._cachedRegExpInterfaceType||(this._cachedRegExpInterfaceType=this.getSymbolFromDeclPath("RegExp",[],16)||this.semanticInfoChain.emptyTypeSymbol),this._cachedRegExpInterfaceType&&!this._cachedRegExpInterfaceType.isResolved&&this.resolveDeclaredSymbol(this._cachedRegExpInterfaceType,new e.PullTypeResolutionContext(this)),this._cachedRegExpInterfaceType},t.prototype.cachedFunctionArgumentsSymbol=function(){if(!this._cachedFunctionArgumentsSymbol){this._cachedFunctionArgumentsSymbol=new e.PullSymbol("arguments",512),this._cachedFunctionArgumentsSymbol.type=this.cachedIArgumentsInterfaceType()||this.semanticInfoChain.anyTypeSymbol,this._cachedFunctionArgumentsSymbol.setResolved();var t=new e.PullSynthesizedDecl("arguments","arguments",2048,0,null,this.semanticInfoChain);t.setSymbol(this._cachedFunctionArgumentsSymbol),this._cachedFunctionArgumentsSymbol.addDeclaration(t)}return this._cachedFunctionArgumentsSymbol},t.prototype.getApparentType=function(e){if(e.isTypeParameter()){var t=e.getBaseConstraint(this.semanticInfoChain);if(t===this.semanticInfoChain.anyTypeSymbol)return this.semanticInfoChain.emptyTypeSymbol;e=t}return e.isPrimitive()?e===this.semanticInfoChain.numberTypeSymbol?this.cachedNumberInterfaceType():e===this.semanticInfoChain.booleanTypeSymbol?this.cachedBooleanInterfaceType():e===this.semanticInfoChain.stringTypeSymbol?this.cachedStringInterfaceType():e:e.isEnum()?this.cachedNumberInterfaceType():e},t.prototype.setTypeChecked=function(e,t){t.setTypeChecked(e)},t.prototype.canTypeCheckAST=function(e,t){return t.canTypeCheckAST(e)},t.prototype.setSymbolForAST=function(e,t,n){n&&n.inProvisionalResolution()?n.setSymbolForAST(e,t):this.semanticInfoChain.setSymbolForAST(e,t)},t.prototype.getSymbolForAST=function(e,t){var n=this.semanticInfoChain.getSymbolForAST(e);return n||t&&t.inProvisionalResolution()&&(n=t.getSymbolForAST(e)),n},t.prototype.getASTForDecl=function(e){return this.semanticInfoChain.getASTForDecl(e)},t.prototype.getNewErrorTypeSymbol=function(t){return typeof t=="undefined"&&(t=null),new e.PullErrorTypeSymbol(this.semanticInfoChain.anyTypeSymbol,t)},t.prototype.getEnclosingDecl=function(e){var t=e.getParentPath();return t.length>1&&t[t.length-1]===e?t[t.length-2]:t[t.length-1]},t.prototype.getExportedMemberSymbol=function(e,t){if(!(e.kind&69632)){var n=(t.kind&36)!==0,r=n?t:t.getAssociatedContainerType();if(n&&r)return e.anyDeclHasFlag(1)?e:null}return e},t.prototype._getNamedPropertySymbolOfAugmentedType=function(e,t){var n=this.getNamedPropertySymbol(e,68147712,t);if(n)return n;if(this.cachedFunctionInterfaceType()&&t.isFunctionType()){n=this.cachedFunctionInterfaceType().findMember(e,!0);if(n)return n}return this.cachedObjectInterfaceType()?this.cachedObjectInterfaceType().findMember(e,!0):null},t.prototype.getNamedPropertySymbol=function(e,t,n){var r=null;t&68147712?r=n.findMember(e,!0):t&58728795?r=n.findNestedType(e):t&164&&(r=n.findNestedContainer(e));if(r)return this.getExportedMemberSymbol(r,n);var i=n.getAssociatedContainerType();if(i){if(i.isClass())return null;n=i,t&68147712?r=n.findMember(e,!0):t&58728795?r=n.findNestedType(e):t&164&&(r=n.findNestedContainer(e));if(r)return this.getExportedMemberSymbol(r,n)}if(n.kind&164){var s=n.getDeclarations(),o=null;for(var u=0;u<s.length;u++){o=s[u].searchChildDecls(e,t);if(o.length)return r=o[0].getSymbol(),r||(r=o[0].getSignatureSymbol()),this.getExportedMemberSymbol(r,n);if((t&58728795)!==0||(t&68147712)!==0){o=s[u].searchChildDecls(e,128);if(o.length&&o[0].kind===128){var a=this.getExportedMemberSymbol(o[0].getSymbol(),n);if(a){if((t&58728795)!==0){var f=a.getExportAssignedTypeSymbol();if(f)return f}else{var l=a.getExportAssignedValueSymbol();if(l)return a.setIsUsedAsValue(),l}return a}}}}}},t.prototype.getSymbolFromDeclPath=function(t,n,r){var i=this,s=null,o=null,u,a=null,f,l,c=null,h,p=null,d=null,v=null,m=36;e.hasFlag(r,67108864)&&(m|=64);var g=function(t){if(t.isAlias()){i.resolveDeclaredSymbol(t);if(e.hasFlag(r,164)){if(t.assignedContainer()||t.getExportAssignedContainerSymbol())return!0}else if(e.hasFlag(r,58728795)){var n=t.getExportAssignedTypeSymbol();if(n&&n.kind!==32)return!0;var n=t.assignedType();if(n&&n.kind!==32)return!0}else if(e.hasFlag(r,1038848)){if(t.assignedType()&&t.assignedType().isError())return!0;if(t.assignedValue()||t.getExportAssignedValueSymbol())return!0;var s=t.assignedType();if(s&&s.isContainer()&&s.getInstanceType())return!0;var o=t.getDeclarations(),u=o[0].ast();return u.moduleReference.kind()===245}}return!1},y=function(e){var n=e.searchChildDecls(t,128);if(n.length){var r=n[0].getSymbol();if(g(r))return r}return null};for(var b=n.length-1;b>=0;b--){o=n[b],l=o.kind;if(o.flags&2097152)return this.semanticInfoChain.anyTypeSymbol;if(l&m){u=o.searchChildDecls(t,r);if(u.length)return u[0].getSymbol();var w=y(o);if(w)return w;if(r&68147712){p=o.getSymbol().getInstanceSymbol();if(p){d=p.type,v=this.getNamedPropertySymbol(t,r,d);if(v&&v.kind&r&&!v.anyDeclHasFlag(16))return v}c=o.getValueDecl(),c&&(o=c)}a=o.getSymbol().type;var v=this.getNamedPropertySymbol(t,r,a);if(v&&v.kind&r&&!v.anyDeclHasFlag(16))return v}else if(r&58728959||!(l&8)){var E=null;l===131072&&t===o.getFunctionExpressionName()&&(E=o.getSymbol()),u=o.searchChildDecls(t,r);if(u.length)return o.kind&1032192&&o.ensureSymbolIsBound(),u[0].getSymbol();if(E)return E;var w=y(o);if(w)return w}}s=this.semanticInfoChain.findSymbol([t],r);if(s)return s;if(!e.hasFlag(r,128)){s=this.semanticInfoChain.findSymbol([t],128);if(s&&g(s))return s}return null},t.prototype.getVisibleDeclsFromDeclPath=function(e,t){var n=[],r=null,i,s;for(var o=e.length-1;o>=0;o--){r=e[o],s=r.kind;var u=r.kind;u!==8&&u!==16&&this.addFilteredDecls(r.getChildDecls(),t,n);switch(u){case 4:case 32:var a=this.semanticInfoChain.findDeclsFromPath(e.slice(0,o+1),164);for(var f=0,l=a.length;f<l;f++){var c=a[f];if(c===r)continue;var h=c.getChildDecls();for(var p=0,d=h.length;p<d;p++){var v=h[p];v.flags&1&&v.kind&t&&n.push(v)}}break;case 8:case 16:var m=r.getTypeParameters();m&&m.length&&this.addFilteredDecls(m,t,n);break;case 131072:var g=r.getFunctionExpressionName();g&&n.push(r);case 16384:case 32768:case 65536:var m=r.getTypeParameters();m&&m.length&&this.addFilteredDecls(m,t,n)}}var y=this.semanticInfoChain.topLevelDecls();for(var o=0,b=y.length;o<b;o++){var w=y[o];if(e.length>0&&w.fileName()===e[0].fileName())continue;w.isExternalModule()||this.addFilteredDecls(w.getChildDecls(),t,n)}return n},t.prototype.addFilteredDecls=function(e,t,n){if(e.length)for(var r=0,i=e.length;r<i;r++){var s=e[r];s.kind&t&&n.push(s)}},t.prototype.getVisibleDecls=function(e){var t=e.getParentPath(),n=126876671;return this.getVisibleDeclsFromDeclPath(t,n)},t.prototype.getVisibleContextSymbols=function(e,t){var n=t.getContextualType();if(!n||this.isAnyOrEquivalent(n))return null;var r=126876671,i=n.getAllMembers(r,2);for(var s=0;s<i.length;s++)i[s].setUnresolved();return i},t.prototype.getVisibleMembersFromExpression=function(t,n,r){var i=this.resolveAST(t,!1,r);if(!h(t)||i.kind!==8&&i.kind!==16&&i.kind!==64){var s=i.type;if(!s)return null;this.resolveDeclaredSymbol(s,r),s.isContainer()&&s.isAlias()&&(s=s.getExportAssignedTypeSymbol());if(this.isAnyOrEquivalent(s))return null;var o=2,u=s;u.kind===33554432&&(u=u.getConstructSignatures()[0].returnType);if(u&&u.isClass()){var a=n.getParentPath();if(a&&a.length){var f=u.getDeclarations();for(var l=0,c=f.length;l<c;l++){var p=f[l];if(e.ArrayUtilities.contains(a,p)){o=1;break}}}}var d=126876671,v=[];if(s.isContainer()){var m=s.getExportAssignedContainerSymbol();m&&(s=m)}s=this.getApparentType(s);if(!s.isResolved){var g=this.resolveDeclaredSymbol(s,r);g!==s&&(i.isType()||r.setTypeInContext(i,g),s=g)}v=s.getAllMembers(d,o);if(s.isContainer()){var y=s.getInstanceSymbol();if(y){var b=y.type;this.resolveDeclaredSymbol(b,r);var w=b.getAllMembers(d,o);v=v.concat(w)}var E=s.getExportAssignedContainerSymbol();if(E){var S=E.getAllMembers(d,o);v=v.concat(S)}}else if(!s.isConstructor()&&!s.isEnum()){var x=s.getAssociatedContainerType();if(x){var T=x.type;this.resolveDeclaredSymbol(T,r);var N=T.getAllMembers(d,o);v=v.concat(N)}}return s.isFunctionType()&&this.cachedFunctionInterfaceType()&&(v=v.concat(this.cachedFunctionInterfaceType().getAllMembers(d,2))),v}return null},t.prototype.isAnyOrEquivalent=function(e){return e===this.semanticInfoChain.anyTypeSymbol||e.isError()},t.prototype.resolveExternalModuleReference=function(t,n){var r=t,i=null;if(e.isRelative(r)){var s=e.getRootFilePath(e.switchToForwardSlashes(n));i=this.semanticInfoChain.findExternalModule(s+t)}else{t=r,i=this.semanticInfoChain.findAmbientExternalModuleInGlobalContext(e.quoteStr(r));if(!i){var s=e.getRootFilePath(e.switchToForwardSlashes(n));while(i===null&&s!="")i=this.semanticInfoChain.findExternalModule(s+t),i===null&&(s==="/"?s="":(s=e.normalizePath(s+".."),s=s&&s!="/"?s+"/":s))}}return i},t.prototype.resolveDeclaredSymbol=function(t,n){return!t||t.isResolved||t.isTypeReference()?t:(n||(n=new e.PullTypeResolutionContext(this)),this.resolveDeclaredSymbolWorker(t,n))},t.prototype.resolveDeclaredSymbolWorker=function(t,n){if(!t||t.isResolved)return t;if(t.inResolution)return!t.type&&!t.isType()&&(t.type=this.semanticInfoChain.anyTypeSymbol),t;var r=t.getDeclarations();for(var i=0;i<r.length;i++){var s=r[i],o=this.semanticInfoChain.getASTForDecl(s);if(!o||o.kind()===139&&o.parent.parent.kind()===215||o.kind()===140&&o.parent.parent.kind()===215)return t;if(o.parent&&o.parent.kind()===236&&o.parent.identifier===o)return t;if(o.parent&&o.parent.kind()===219&&o.parent.identifier===o)return t;var u=e.ASTHelpers.getEnclosingModuleDeclaration(o),a;e.ASTHelpers.isAnyNameOfModule(u,o)?a=this.resolveSingleModuleDeclaration(u,o,n):o.kind()===120&&s.kind===32?a=this.resolveModuleSymbol(s.getSymbol(),n,null,null,o):(e.Debug.assert(o.kind()!==11&&o.kind()!==212),a=this.resolveAST(o,!1,n)),s.kind===2048&&!t.isResolved&&!t.type&&a&&t.anyDeclHasFlag(75497472)&&(t.type=a.type,t.setResolved())}return t},t.prototype.resolveOtherDecl=function(t,n){var r=this.getASTForDecl(t),i=e.ASTHelpers.getEnclosingModuleDeclaration(r);e.ASTHelpers.isAnyNameOfModule(i,r)?this.resolveSingleModuleDeclaration(i,r,n):this.resolveAST(r,!1,n)},t.prototype.resolveOtherDeclarations=function(e,t){var n=this,r=this.semanticInfoChain.getDeclForAST(e),i=r.getSymbol(),s=i.getDeclarations();this.inResolvingOtherDeclsWalker.walkOtherPullDecls(r,i.getDeclarations(),function(e){return n.resolveOtherDecl(e,t)})},t.prototype.resolveSourceUnit=function(e,t){var n=this.getEnclosingDeclForAST(e),r=n.getSymbol();return this.ensureAllSymbolsAreBound(r),this.resolveFirstExportAssignmentStatement(e.moduleElements,t),this.resolveAST(e.moduleElements,!1,t),this.canTypeCheckAST(e,t)&&this.typeCheckSourceUnit(e,t),r},t.prototype.typeCheckSourceUnit=function(e,t){var n=this;this.setTypeChecked(e,t),this.resolveAST(e.moduleElements,!1,t),this.typeCheckCallBacks.push(function(t){return n.verifyUniquenessOfImportNamesInSourceUnit(e)})},t.prototype.verifyUniquenessOfImportNamesInSourceUnit=function(e){var t=this,n=this.semanticInfoChain.getDeclForAST(e),r=function(e){var n=t.semanticInfoChain.findTopLevelSymbol(e,128,null);return n&&n.isAlias()};this.checkUniquenessOfImportNames([n],r)},t.prototype.resolveEnumDeclaration=function(e,t){var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();if(r.isResolved||r.inResolution)return r;r.inResolution=!0;var i=r.getDeclarations();for(var s=0;s<i.length;s++){var o=i[s].getChildDecls();for(var u=0;u<o.length;u++)o[u].ensureSymbolIsBound()}return r.setResolved(),this.resolveOtherDeclarations(e,t),this.canTypeCheckAST(e,t)&&this.typeCheckEnumDeclaration(e,t),r},t.prototype.typeCheckEnumDeclaration=function(t,n){var r=this;this.setTypeChecked(t,n),this.resolveAST(t.enumElements,!1,n);var i=this.semanticInfoChain.getDeclForAST(t);this.validateVariableDeclarationGroups(i,n),this.typeCheckCallBacks.push(function(e){return r.checkInitializersInEnumDeclarations(i,e)}),e.ASTHelpers.enumIsElided(t)||this.checkNameForCompilerGeneratedDeclarationCollision(t,!0,t.identifier,n)},t.prototype.postTypeCheckEnumDeclaration=function(e,t){this.checkThisCaptureVariableCollides(e,!0,t)},t.prototype.checkInitializersInEnumDeclarations=function(t,n){var r=t.getSymbol(),i=r.getDeclarations();if(t!==i[0])return;var s=!1;for(var o=0;o<i.length;++o){var u=i[o],a=u.ast();if(a.enumElements.nonSeparatorCount()===0)continue;var f=a.enumElements.nonSeparatorAt(0);f.equalsValueClause||(s?this.semanticInfoChain.addDiagnosticFromAST(f,e.DiagnosticCode.In_enums_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_the_first_enum_element):s=!0)}},t.prototype.resolveModuleDeclaration=function(t,n){var r;if(t.stringLiteral)r=this.resolveSingleModuleDeclaration(t,t.stringLiteral,n);else{var i=e.ASTHelpers.getModuleNames(t.name);for(var s=0,o=i.length;s<o;s++)r=this.resolveSingleModuleDeclaration(t,i[s],n)}return this.canTypeCheckAST(t,n)&&this.typeCheckModuleDeclaration(t,n),r},t.prototype.ensureAllSymbolsAreBound=function(e){if(e){var t=e.getDeclarations();for(var n=0;n<t.length;n++){var r=t[n].getChildDecls();for(var i=0;i<r.length;i++)r[i].ensureSymbolIsBound()}}},t.prototype.resolveModuleSymbol=function(t,n,r,i,s){if(t.isResolved||t.inResolution)return t;t.inResolution=!0,this.ensureAllSymbolsAreBound(t);var o=t.getInstanceSymbol();o&&this.resolveDeclaredSymbol(o,n);var u=e.ASTHelpers.isLastNameOfModule(r,i);return u?this.resolveFirstExportAssignmentStatement(r.moduleElements,n):s&&this.resolveFirstExportAssignmentStatement(s.moduleElements,n),t.setResolved(),i&&this.resolveOtherDeclarations(i,n),t},t.prototype.resolveFirstExportAssignmentStatement=function(e,t){for(var n=0,r=e.childCount();n<r;n++){var i=e.childAt(n);if(i.kind()===134){this.resolveExportAssignmentStatement(i,t);return}}},t.prototype.resolveSingleModuleDeclaration=function(e,t,n){var r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol();return this.resolveModuleSymbol(i,n,e,t,null)},t.prototype.typeCheckModuleDeclaration=function(t,n){if(t.stringLiteral)this.typeCheckSingleModuleDeclaration(t,t.stringLiteral,n);else{var r=e.ASTHelpers.getModuleNames(t.name);for(var i=0,s=r.length;i<s;i++)this.typeCheckSingleModuleDeclaration(t,r[i],n)}},t.prototype.typeCheckSingleModuleDeclaration=function(t,n,r){var i=this;this.setTypeChecked(t,r),e.ASTHelpers.isLastNameOfModule(t,n)&&this.resolveAST(t.moduleElements,!1,r);var s=this.semanticInfoChain.getDeclForAST(n);this.validateVariableDeclarationGroups(s,r),t.stringLiteral&&e.isRelative(t.stringLiteral.valueText())&&this.semanticInfoChain.addDiagnosticFromAST(t.stringLiteral,e.DiagnosticCode.Ambient_external_module_declaration_cannot_specify_relative_module_name),!e.ASTHelpers.moduleIsElided(t)&&!t.stringLiteral&&this.checkNameForCompilerGeneratedDeclarationCollision(n,!0,n,r),this.typeCheckCallBacks.push(function(e){return i.verifyUniquenessOfImportNamesInModule(s)})},t.prototype.verifyUniquenessOfImportNamesInModule=function(e){var t=e.getSymbol();if(!t)return;var n=t.getDeclarations();if(n[0]!==e)return;this.checkUniquenessOfImportNames(n)},t.prototype.checkUniquenessOfImportNames=function(t,n){var r=this,i;for(var s=0;s<t.length;++s){var o=t[s].getChildDecls();for(var u=0;u<o.length;++u){var a=o[u];a.kind===128&&(i=i||e.createIntrinsicsObject(),i[a.name]=!0)}}if(!i&&!n)return;for(var s=0;s<t.length;++s)this.scanVariableDeclarationGroups(t[s],function(t){var s=i&&i[t.name];s||(s=n&&n(t.name),s&&(i=i||e.createIntrinsicsObject(),i[t.name]=!0)),s&&r.semanticInfoChain.addDiagnosticFromAST(t.ast(),e.DiagnosticCode.Variable_declaration_cannot_have_the_same_name_as_an_import_declaration)})},t.prototype.scanVariableDeclarationGroups=function(e,t,n){var r=e.getVariableDeclGroups();for(var i=0;i<r.length;i++){var s=null,o=null;if(e.kind===1&&r[i].length){var u=r[i][0].name,a=this.semanticInfoChain.findTopLevelSymbol(u,512,e);a&&a.isResolved&&(a.anyDeclHasFlag(118784)||(s=a))}for(var f=0;f<r[i].length;f++){var l=r[i][f],u=l.name,c=l.getSymbol();if(f===0){t(l);if(!n)break;if(!s||!s.type){s=c;continue}}n(l,s)}}},t.prototype.postTypeCheckModuleDeclaration=function(e,t){this.checkThisCaptureVariableCollides(e,!0,t)},t.prototype.isTypeRefWithoutTypeArgs=function(e){if(e.kind()===11)return!0;if(e.kind()===121){var t=e;if(t.right.kind()===11)return!0}return!1},t.prototype.createInstantiatedType=function(t,n){if(!t.isGeneric())return t;var r=t.getTypeArgumentsOrTypeParameters(),i=[];for(var s=0;s<r.length;s++)i[r[s].pullSymbolID]=n[s]||new e.PullErrorTypeSymbol(this.semanticInfoChain.anyTypeSymbol,r[s].name);return e.PullInstantiatedTypeReferenceSymbol.create(this,t,i)},t.prototype.resolveReferenceTypeDeclaration=function(t,n,r,i){var s=this,o=this.semanticInfoChain.getDeclForAST(t),u=this.getEnclosingDecl(o),a=o.getSymbol(),f=t.kind()===131,l=this.getSymbolForAST(t,i)!==null;if(a.isResolved&&l||a.inResolution&&!i.isInBaseTypeResolution())return a;var c=a.inResolution;a.startResolving();var h=a.getDeclarations();for(var p=0;p<h.length;p++){var d=h[p].getChildDecls();for(var v=0;v<d.length;v++)d[v].ensureSymbolIsBound()}if(!a.isResolved){var m=a.getTypeParameters();for(var p=0;p<m.length;p++)this.resolveDeclaredSymbol(m[p],i)}var g=i.startBaseTypeResolution();!f&&!l&&a.resetKnownBaseTypeCount();var y=e.ASTHelpers.getExtendsHeritageClause(r);if(y)for(var p=a.getKnownBaseTypeCount();p<y.typeNames.nonSeparatorCount();p=a.getKnownBaseTypeCount()){a.incrementKnownBaseCount();var b=this.resolveTypeReference(y.typeNames.nonSeparatorAt(p),i);if(a.isValidBaseKind(b,!0)){this.setSymbolForAST(y.typeNames.nonSeparatorAt(p),b,null);if(!a.hasBase(b)&&!b.hasBase(a)){a.addExtendedType(b);var w=a.getKnownSpecializations();for(var v=0;v<w.length;v++)w[v].addExtendedType(b)}}else b&&!this.getSymbolForAST(y.typeNames.nonSeparatorAt(p),i)&&this.setSymbolForAST(y.typeNames.nonSeparatorAt(p),b,null)}var E=e.ASTHelpers.getImplementsHeritageClause(r);if(E&&f){var S=y?y.typeNames.nonSeparatorCount():0;for(var p=a.getKnownBaseTypeCount();p-S>=0&&p-S<E.typeNames.nonSeparatorCount();p=a.getKnownBaseTypeCount()){a.incrementKnownBaseCount();var x=E.typeNames.nonSeparatorAt(p-S),T=this.resolveTypeReference(x,i);a.isValidBaseKind(T,!1)?(this.setSymbolForAST(E.typeNames.nonSeparatorAt(p-S),T,null),!a.hasBase(T)&&!T.hasBase(a)&&a.addImplementedType(T)):T&&!this.getSymbolForAST(E.typeNames.nonSeparatorAt(p-S),i)&&this.setSymbolForAST(E.typeNames.nonSeparatorAt(p-S),T,null)}}return i.doneBaseTypeResolution(g),g?(a.inResolution=!1,this.typeCheckCallBacks.push(function(e){t.kind()===131?s.resolveClassDeclaration(t,e):s.resolveInterfaceDeclaration(t,e)}),a):(this.setSymbolForAST(n,a,i),this.setSymbolForAST(t,a,i),a.setResolved(),a)},t.prototype.resolveClassDeclaration=function(e,t){var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();if(!r.isResolved){this.resolveReferenceTypeDeclaration(e,e.identifier,e.heritageClauses,t);var i=r.getConstructorMethod(),s=r.getExtendedTypes(),o=s.length?s[0]:null;if(i){if(o){var u=o.getConstructorMethod();if(u){var a=u.type,f=i.type;f.hasBase(a)||f.addExtendedType(a)}}if(!r.isResolved)return r}this.resolveOtherDeclarations(e,t)}return this.canTypeCheckAST(e,t)&&this.typeCheckClassDeclaration(e,t),r},t.prototype.typeCheckTypeParametersOfTypeDeclaration=function(e,t){var n=this,r=e.kind()==131?e.typeParameterList:e.typeParameterList;if(r){var i=this.semanticInfoChain.getDeclForAST(e),s=i.getSymbol();for(var o=0;o<r.typeParameters.nonSeparatorCount();o++){var u=r.typeParameters.nonSeparatorAt(o);this.resolveTypeParameterDeclaration(u,t);var a=this.semanticInfoChain.getDeclForAST(u),f=a.getSymbol();this.checkSymbolPrivacy(s,f,function(r){return n.typeParameterOfTypeDeclarationPrivacyErrorReporter(e,u,f,r,t)})}}},t.prototype.typeCheckClassDeclaration=function(e,t){this.setTypeChecked(e,t);var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();this.checkNameForCompilerGeneratedDeclarationCollision(e,!0,e.identifier,t),this.resolveAST(e.classElements,!1,t),this.typeCheckTypeParametersOfTypeDeclaration(e,t),this.typeCheckBases(e,e.identifier,e.heritageClauses,r,this.getEnclosingDecl(n),t),r.hasBaseTypeConflict()||this.typeCheckMembersAgainstIndexer(r,n,t),this.checkTypeForDuplicateIndexSignatures(r)},t.prototype.postTypeCheckClassDeclaration=function(e,t){this.checkThisCaptureVariableCollides(e,!0,t)},t.prototype.resolveTypeSymbolSignatures=function(e,t){var n=e.getCallSignatures();for(var r=0;r<n.length;r++)this.resolveDeclaredSymbol(n[r],t);var i=e.getConstructSignatures();for(var r=0;r<i.length;r++)this.resolveDeclaredSymbol(i[r],t);var s=e.getIndexSignatures();for(var r=0;r<s.length;r++)this.resolveDeclaredSymbol(s[r],t)},t.prototype.resolveInterfaceDeclaration=function(e,t){this.resolveReferenceTypeDeclaration(e,e.identifier,e.heritageClauses,t);var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();return this.resolveTypeSymbolSignatures(r,t),r.isResolved&&(this.resolveOtherDeclarations(e,t),this.canTypeCheckAST(e,t)&&this.typeCheckInterfaceDeclaration(e,t)),r},t.prototype.typeCheckInterfaceDeclaration=function(t,n){this.setTypeChecked(t,n);var r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol();this.resolveAST(t.body.typeMembers,!1,n),this.typeCheckTypeParametersOfTypeDeclaration(t,n),this.typeCheckBases(t,t.identifier,t.heritageClauses,i,this.getEnclosingDecl(r),n),i.hasBaseTypeConflict()||this.typeCheckMembersAgainstIndexer(i,r,n);var s=i.getDeclarations();r===s[s.length-1]&&this.checkTypeForDuplicateIndexSignatures(i),this.checkInterfaceDeclForIdenticalTypeParameters(t,n)||this.semanticInfoChain.addDiagnosticFromAST(t.identifier,e.DiagnosticCode.All_declarations_of_an_interface_must_have_identical_type_parameters)},t.prototype.checkInterfaceDeclForIdenticalTypeParameters=function(e,t){var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();if(!r.isGeneric())return!0;var i=r.getDeclarations()[0];if(i==n)return!0;var s=n.getTypeParameters(),o=i.getTypeParameters();if(s.length!=o.length)return!1;for(var u=0;u<s.length;u++){var a=s[u],f=o[u];if(a.name!=f.name)return!1;var l=a.getSymbol(),c=this.semanticInfoChain.getASTForDecl(a),h=this.semanticInfoChain.getASTForDecl(f);if(!!c.constraint!=!!h.constraint)return!1;if(c.constraint){var p=this.resolveAST(c.constraint,!1,t);if(!this.typesAreIdenticalWithNewEnclosingTypes(p,l.getConstraint(),t))return!1}}return!0},t.prototype.checkTypeForDuplicateIndexSignatures=function(t){var n=t.getOwnIndexSignatures(),r=null,i=null;for(var s=0;s<n.length;s++){var o=n[s],u=o.parameters[0].type;e.Debug.assert(u);if(u===this.semanticInfoChain.stringTypeSymbol){if(r){this.semanticInfoChain.addDiagnosticFromAST(o.getDeclarations()[0].ast(),e.DiagnosticCode.Duplicate_string_index_signature,null,[this.semanticInfoChain.locationFromAST(r.getDeclarations()[0].ast())]);return}r=o}else if(u===this.semanticInfoChain.numberTypeSymbol){if(i){this.semanticInfoChain.addDiagnosticFromAST(o.getDeclarations()[0].ast(),e.DiagnosticCode.Duplicate_number_index_signature,null,[this.semanticInfoChain.locationFromAST(i.getDeclarations()[0].ast())]);return}i=o}}},t.prototype.filterSymbol=function(e,t,n,r){if(e){if(e.kind&t)return e;if(e.isAlias()){this.resolveDeclaredSymbol(e,r);var i=e;if(t&164)return i.getExportAssignedContainerSymbol();if(t&58728795)return i.getExportAssignedTypeSymbol();if(t&68147712)return i.getExportAssignedValueSymbol()}}return null},t.prototype.getMemberSymbolOfKind=function(e,t,n,r,i){var s=this.getNamedPropertySymbol(e,t,n);return{symbol:this.filterSymbol(s,t,r,i),aliasSymbol:s&&s.isAlias()?s:null}},t.prototype.resolveIdentifierOfInternalModuleReference=function(t,n,r,i,s){var o=n.valueText();if(o.length===0)return null;var u=r.type,a=this.getMemberSymbolOfKind(o,164,u,i,s),f=a.symbol,l=null,c=null,h=null,p=!0;f&&(p=(f.kind&59753052)!==0,h=a.aliasSymbol);if(!p&&f&&f.kind===128){this.resolveDeclaredSymbol(f,s);var d=f.getExportAssignedValueSymbol(),v=f.getExportAssignedTypeSymbol(),m=f.getExportAssignedContainerSymbol();if(d||v||m)h=f,l=d,c=v,f=m,p=!0}return p?(l||u.getInstanceSymbol()&&(a=this.getMemberSymbolOfKind(o,68147712,u.getInstanceSymbol().type,i,s),l=a.symbol,l&&a.aliasSymbol&&(h=a.aliasSymbol)),c||(a=this.getMemberSymbolOfKind(o,58728795,u,i,s),c=a.symbol,c&&a.aliasSymbol&&(h=a.aliasSymbol)),!l&&!c&&!f?(this.semanticInfoChain.addDiagnosticFromAST(n,e.DiagnosticCode.Could_not_find_symbol_0_in_module_1,[o,r.toString()]),null):(!c&&f&&(c=f),{valueSymbol:l,typeSymbol:c,containerSymbol:f,aliasSymbol:h})):(this.semanticInfoChain.addDiagnosticFromAST(n,e.DiagnosticCode.Import_declaration_referencing_identifier_from_internal_module_can_only_be_made_with_variables_functions_classes_interfaces_enums_and_internal_modules),null)},t.prototype.resolveModuleReference=function(t,n,r,i,s){e.Debug.assert(n.kind()===121||n.kind()===11||n.kind()===14,"resolving module reference should always be either name or member reference");var o=null,u;if(n.kind()===121){var a=n,f=this.resolveModuleReference(t,a.left,r,i,s);f&&(u=a.right.valueText(),o=this.getMemberSymbolOfKind(u,4,f.type,r,i).symbol,o||this.semanticInfoChain.addDiagnosticFromAST(a.right,e.DiagnosticCode.Could_not_find_module_0_in_module_1,[u,f.toString()]))}else{var l=n.kind()===11?n.valueText():n.valueText(),c=n.kind()===11?n.text():n.text();if(c.length>0){var h=this.getSymbolFromDeclPath(l,s,4);o=this.filterSymbol(h,4,r,i);if(o){this.semanticInfoChain.setSymbolForAST(n,o);if(h.isAlias()){this.semanticInfoChain.setAliasSymbolForAST(n,h);var p=t.getSymbol();p.addLinkedAliasSymbol(h)}}else this.semanticInfoChain.addDiagnosticFromAST(n,e.DiagnosticCode.Unable_to_resolve_module_reference_0,[l])}}return o},t.prototype.resolveInternalModuleReference=function(t,n){var r=this.semanticInfoChain.getDeclForAST(t),i=this.getEnclosingDecl(r),s=t.moduleReference,o=s.kind()===245?s.stringLiteral:s.moduleName,u=i.getParentPath(),a=null,f=r.getSymbol();if(o.kind()===11||o.kind()===14){var l=this.resolveModuleReference(r,o,i,n,u);if(l){a=l.type,this.semanticInfoChain.setAliasSymbolForAST(s,this.semanticInfoChain.getAliasSymbolForAST(o));if(a.anyDeclHasFlag(32768)){var c=o.kind()===11?o.valueText():o.valueText(),h=this.getSymbolFromDeclPath(c,u,68147712),p=a.getInstanceSymbol();if(!h||p==h&&h.type!==a)f.setAssignedValueSymbol(h);else{var d=o.kind()===11?o.text():o.text();n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(o,e.DiagnosticCode.Internal_module_reference_0_in_import_declaration_does_not_reference_module_instance_for_1,[d,l.type.toString(i?i.getSymbol():null)]))}}}else a=this.getNewErrorTypeSymbol()}else if(o.kind()===121){var v=o,l=this.resolveModuleReference(r,v.left,i,n,u);if(l){var m=this.resolveIdentifierOfInternalModuleReference(r,v.right,l,i,n);if(m)return f.setAssignedValueSymbol(m.valueSymbol),f.setAssignedTypeSymbol(m.typeSymbol),f.setAssignedContainerSymbol(m.containerSymbol),this.semanticInfoChain.setAliasSymbolForAST(s,m.aliasSymbol),null}}return a||f.setAssignedTypeSymbol(this.getNewErrorTypeSymbol()),a},t.prototype.resolveImportDeclaration=function(t,n){var r=this.semanticInfoChain.getDeclForAST(t),i=this.getEnclosingDecl(r),s=r.getSymbol(),o=null;if(s.isResolved)return s;s.startResolving();if(t.moduleReference.kind()===245){var u=t.moduleReference.stringLiteral.valueText(),a=i.getParentPath();o=this.resolveExternalModuleReference(u,r.fileName());if(!o){var f=t.moduleReference.stringLiteral.text();this.semanticInfoChain.addDiagnosticFromAST(t,e.DiagnosticCode.Unable_to_resolve_external_module_0,[f]),o=this.getNewErrorTypeSymbol()}}else o=this.resolveInternalModuleReference(t,n);return o&&(o.isContainer()||(this.semanticInfoChain.addDiagnosticFromAST(t,e.DiagnosticCode.Module_cannot_be_aliased_to_a_non_module_type),o.isError()||(o=this.getNewErrorTypeSymbol())),o.isContainer()&&s.setAssignedContainerSymbol(o),s.setAssignedTypeSymbol(o),this.setSymbolForAST(t.moduleReference,o,null)),s.setResolved(),this.resolveDeclaredSymbol(s.assignedValue(),n),this.resolveDeclaredSymbol(s.assignedType(),n),this.resolveDeclaredSymbol(s.assignedContainer(),n),o&&s.anyDeclHasFlag(1)&&(s.setIsUsedInExportedAlias(),o.isContainer()&&o.getExportAssignedValueSymbol()&&s.setIsUsedAsValue()),this.canTypeCheckAST(t,n)&&this.typeCheckImportDeclaration(t,n),s},t.prototype.typeCheckImportDeclaration=function(t,n){var r=this;this.setTypeChecked(t,n);var i=this.semanticInfoChain.getDeclForAST(t),s=this.getEnclosingDecl(i),o=i.getSymbol();if(t.moduleReference.kind()===245){this.compilationSettings.noResolve()&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Import_declaration_cannot_refer_to_external_module_reference_when_noResolve_option_is_set,null));var u=t.moduleReference.stringLiteral.valueText();if(s.kind===32){var a=e.ASTHelpers.getEnclosingModuleDeclaration(this.getASTForDecl(s));a&&a.kind()===130&&e.isRelative(u)&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Import_declaration_in_an_ambient_external_module_declaration_cannot_reference_external_module_through_relative_external_module_name))}}var f;if(t.moduleReference.kind()===245){var l=o.getExportAssignedContainerSymbol(),c=l?l.getContainer():null;c&&c.kind===32&&(f=!0)}else f=!0;if(f){var h=o.getExportAssignedTypeSymbol(),l=o.getExportAssignedContainerSymbol(),p=o.getExportAssignedValueSymbol();this.checkSymbolPrivacy(o,l,function(i){var u=e.DiagnosticCode.Exported_import_declaration_0_is_assigned_container_that_is_or_is_using_inaccessible_module_1,a=[o.getScopedName(s?s.getSymbol():null),i.getScopedName(s?s.getSymbol():null,!1,!1,!0)];n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(t,u,a))}),h!==l&&this.checkSymbolPrivacy(o,h,function(i){var u=i.isContainer()&&!i.isEnum()?e.DiagnosticCode.Exported_import_declaration_0_is_assigned_type_that_is_using_inaccessible_module_1:e.DiagnosticCode.Exported_import_declaration_0_is_assigned_type_that_has_or_is_using_private_type_1,a=[o.getScopedName(s?s.getSymbol():null),i.getScopedName(s?s.getSymbol():null,!1,!1,!0)];n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(t,u,a))}),p&&this.checkSymbolPrivacy(o,p.type,function(i){var u=i.isContainer()&&!i.isEnum()?e.DiagnosticCode.Exported_import_declaration_0_is_assigned_value_with_type_that_is_using_inaccessible_module_1:e.DiagnosticCode.Exported_import_declaration_0_is_assigned_value_with_type_that_has_or_is_using_private_type_1,a=[o.getScopedName(s?s.getSymbol():null),i.getScopedName(s?s.getSymbol():null,!1,!1,!0)];n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(t,u,a))})}this.checkNameForCompilerGeneratedDeclarationCollision(t,!0,t.identifier,n)},t.prototype.postTypeCheckImportDeclaration=function(e,t){var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol(),i=r.isUsedAsValue(),s=e.moduleReference.kind()!==245&&r.getExportAssignedValueSymbol()!==null;(i||s)&&this.checkThisCaptureVariableCollides(e,!0,t)},t.prototype.resolveExportAssignmentStatement=function(t,n){var r=t.identifier.valueText();if(r.length===0)return this.semanticInfoChain.anyTypeSymbol;var i=null,s=null,o=null,u=this.getEnclosingDeclForAST(t),a=u.getSymbol();if(!a.isType()&&a.isContainer())return this.semanticInfoChain.addDiagnosticFromAST(t,e.DiagnosticCode.Export_assignments_may_only_be_used_at_the_top_level_of_external_modules),this.semanticInfoChain.anyTypeSymbol;var f=u!==null?[u]:[];o=this.getSymbolFromDeclPath(r,f,164);var l=!0;o&&(l=(o.kind&59753052)!==0);if(!l&&o&&o.kind===128){this.resolveDeclaredSymbol(o,n);var c=o,h=c.getExportAssignedValueSymbol(),p=c.getExportAssignedTypeSymbol(),d=c.getExportAssignedContainerSymbol();if(h||p||d)i=h,s=p,o=d,c.setTypeUsedExternally(),i&&c.setIsUsedAsValue(),l=!0}return l?(i||(i=this.getSymbolFromDeclPath(r,f,68147712)),s||(s=this.getSymbolFromDeclPath(r,f,58728795)),!i&&!s&&!o?(n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Could_not_find_symbol_0,[r])),this.semanticInfoChain.voidTypeSymbol):(i&&a.setExportAssignedValueSymbol(i),s&&a.setExportAssignedTypeSymbol(s),o&&a.setExportAssignedContainerSymbol(o),this.resolveDeclaredSymbol(i,n),this.resolveDeclaredSymbol(s,n),this.resolveDeclaredSymbol(o,n),this.semanticInfoChain.voidTypeSymbol)):(this.semanticInfoChain.addDiagnosticFromAST(t,e.DiagnosticCode.Export_assignments_may_only_be_made_with_variables_functions_classes_interfaces_enums_and_internal_modules),this.semanticInfoChain.voidTypeSymbol)},t.prototype.resolveAnyFunctionTypeSignature=function(t,n,r,i,s){var o=this.semanticInfoChain.getDeclForAST(t);e.Debug.assert(o);var u=o.getSymbol(),a=u.kind===33554432?u.getConstructSignatures()[0]:u.getCallSignatures()[0];i&&(a.returnType=this.resolveTypeReference(i,s));if(n)for(var f=0;f<n.typeParameters.nonSeparatorCount();f++)this.resolveTypeParameterDeclaration(n.typeParameters.nonSeparatorAt(f),s);if(r)for(var f=0;f<r.parameters.nonSeparatorCount();f++)this.resolveFunctionTypeSignatureParameter(r.parameters.nonSeparatorAt(f),a,o,s);return u.setResolved(),this.canTypeCheckAST(t,s)&&(this.setTypeChecked(t,s),this.typeCheckFunctionOverloads(t,s)),u},t.prototype.resolveFunctionTypeSignatureParameter=function(t,n,r,i){var s=this.semanticInfoChain.getDeclForAST(t),o=s.getSymbol();if(t.typeAnnotation){var u=this.resolveTypeReference(e.ASTHelpers.getType(t),i);o.isVarArg&&!u.isArrayNamedTypeReference()&&(i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Rest_parameters_must_be_array_types)),u=this.getNewErrorTypeSymbol()),i.setTypeInContext(o,u)}else o.isVarArg?this.cachedArrayInterfaceType()?i.setTypeInContext(o,this.createInstantiatedType(this.cachedArrayInterfaceType(),[this.semanticInfoChain.anyTypeSymbol])):i.setTypeInContext(o,this.semanticInfoChain.anyTypeSymbol):i.setTypeInContext(o,this.semanticInfoChain.anyTypeSymbol),this.compilationSettings.noImplicitAny()&&i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Parameter_0_of_function_type_implicitly_has_an_any_type,[t.identifier.text()]));e.hasFlag(s.flags,128)&&t.equalsValueClause&&h(t)&&i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Default_arguments_are_only_allowed_in_implementation)),o.setResolved()},t.prototype.resolveFunctionExpressionParameter=function(t,n,r,i,s,o,u){var a=this.semanticInfoChain.getDeclForAST(t),f=a.getSymbol(),c=s&&s.type,h=!1;if(r){var p=this.resolveTypeReference(r,u);if(f.isVarArg&&!p.isArrayNamedTypeReference()){var d=u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Rest_parameters_must_be_array_types));p=this.getNewErrorTypeSymbol()}c=p||c}c?(u.isInferentiallyTyping()&&(c=u.fixAllTypeParametersReferencedByType(c,this)),u.setTypeInContext(f,c)):f.isVarArg&&(this.cachedArrayInterfaceType()?u.setTypeInContext(f,this.createInstantiatedType(this.cachedArrayInterfaceType(),[this.semanticInfoChain.anyTypeSymbol])):u.setTypeInContext(f,this.semanticInfoChain.anyTypeSymbol),h=!0);var v=this.canTypeCheckAST(t,u);if(i&&(v||!c)){c&&u.propagateContextualType(c);var m=this.resolveAST(i,c!==null,u);c&&u.popAnyContextualType();if(!m||!m.type)u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Unable_to_resolve_type_of_0,[n.text()])),c||u.setTypeInContext(f,this.getNewErrorTypeSymbol(f.name));else{var g=this.getInstanceTypeForAssignment(t,m.type,u);if(!c)u.setTypeInContext(f,g.widenedType(this,i,u)),h=g!==f.type;else{var y=new l,b=this.sourceIsAssignableToTarget(g,c,t,u,y);if(!b){var w=this.getEnclosingSymbolForAST(t);y.message?u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1_NL_2,[g.toString(w),c.toString(w),y.message])):u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1,[g.toString(w),c.toString(w)]))}}}}!c&&!f.isVarArg&&!g&&(u.setTypeInContext(f,this.semanticInfoChain.anyTypeSymbol),h=!0);if(h&&this.compilationSettings.noImplicitAny()){var E=a.getParentDecl().getFunctionExpressionName();E?u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Parameter_0_of_1_implicitly_has_an_any_type,[n.text(),E])):u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Parameter_0_of_lambda_function_implicitly_has_an_any_type,[n.text()]))}v&&this.checkNameForCompilerGeneratedDeclarationCollision(t,!0,n,u),f.setResolved()},t.prototype.checkNameForCompilerGeneratedDeclarationCollision=function(e,t,n,r){var i=a(n);switch(i){case 1:this.postTypeCheckWorkitems.push(e);return;case 2:this.checkSuperCaptureVariableCollides(e,t,r);return;case 3:this.checkArgumentsCollides(e,r);return;case 4:this.checkIndexOfRestArgumentInitializationCollides(e,t,r);return;case 5:case 6:t&&this.checkExternalModuleRequireExportsCollides(e,n,r);return}},t.prototype.hasRestParameterCodeGen=function(t){var n=this.getASTForDecl(t),r=n.kind();if(r===129){var i=n;return!e.hasFlag(t.kind===65536?t.getParentDecl().flags:t.flags,8)&&i.block&&e.lastParameterIsRest(i.callSignature.parameterList)}if(r===135){var s=n;return!e.hasFlag(t.kind===65536?t.getParentDecl().flags:t.flags,8)&&s.block&&e.lastParameterIsRest(s.callSignature.parameterList)}if(r===137){var o=n;return!e.hasFlag(t.getParentDecl().flags,8)&&o.block&&e.lastParameterIsRest(o.callSignature.parameterList)}if(r===218){var u=n;return e.lastParameterIsRest(u.callSignature.parameterList)}if(r===222){var a=n;return e.lastParameterIsRest(a.callSignature.parameterList)}return!1},t.prototype.checkArgumentsCollides=function(t,n){if(t.kind()===242){var r=this.getEnclosingDeclForAST(t);e.hasFlag(r.kind,1032192)&&this.hasRestParameterCodeGen(r)&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters))}},t.prototype.checkIndexOfRestArgumentInitializationCollides=function(t,n,r){if(!n||t.kind()===242){var i=this.getEnclosingDeclForAST(t),s=n?[i]:i?i.getParentPath():[],o=null,u;for(var a=s.length-1;a>=0;a--){var f=s[a];if(!n){if(!o){o=this.resolveNameExpression(t,r);if(o.isError())return;u=o.getContainer()}if(u&&e.ArrayUtilities.contains(u.getDeclarations(),f))break}e.hasFlag(f.kind,1032192)&&this.hasRestParameterCodeGen(f)&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,n?e.DiagnosticCode.Duplicate_identifier_i_Compiler_uses_i_to_initialize_rest_parameter:e.DiagnosticCode.Expression_resolves_to_variable_declaration_i_that_compiler_uses_to_initialize_rest_parameter))}}},t.prototype.checkExternalModuleRequireExportsCollides=function(t,n,r){var i=this.getEnclosingDeclForAST(t),s=e.ASTHelpers.getEnclosingModuleDeclaration(n);e.ASTHelpers.isAnyNameOfModule(s,n)&&(i=this.getEnclosingDeclForAST(s));if(i&&i.kind===32){var o=this.semanticInfoChain.getDeclForAST(t);if(!e.hasFlag(o.flags,8)){var u=n.valueText();r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_an_external_module,[u,u]))}}},t.prototype.resolveObjectTypeTypeReference=function(t,n){var r=this.semanticInfoChain.getDeclForAST(t);e.Debug.assert(r);var i=r.getSymbol();e.Debug.assert(i);if(t.typeMembers){var s=null,o=null,u=null,a=t.typeMembers;for(var f=0;f<a.nonSeparatorCount();f++)s=this.semanticInfoChain.getDeclForAST(a.nonSeparatorAt(f)),o=s.kind&7340032?s.getSignatureSymbol():s.getSymbol(),this.resolveAST(a.nonSeparatorAt(f),!1,n),u=o.type,(u&&u.isGeneric()||o.isSignature()&&o.isGeneric())&&i.setHasGenericMember()}return i.setResolved(),this.canTypeCheckAST(t,n)&&this.typeCheckObjectTypeTypeReference(t,n),i},t.prototype.typeCheckObjectTypeTypeReference=function(e,t){this.setTypeChecked(e,t);var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();this.typeCheckMembersAgainstIndexer(r,n,t),this.checkTypeForDuplicateIndexSignatures(r)},t.prototype.resolveTypeAnnotation=function(e,t){return this.resolveTypeReference(e.type,t)},t.prototype.resolveTypeReference=function(t,n){if(t===null)return null;e.Debug.assert(t.kind()!==244);var r=null,i=this.computeTypeReferenceSymbol(t,n);if(i.kind===4){var s=i,o=s.getInstanceSymbol();o&&(o.anyDeclHasFlag(16384)||o.kind===32768)&&(i=o.type.getAssociatedContainerType())}return i&&i.isAlias()&&(r=i,i=r.getExportAssignedTypeSymbol()),i&&!i.isGeneric()&&r&&this.semanticInfoChain.setAliasSymbolForAST(t,r),i&&!i.isError()&&(i.kind&58728795)===0&&(i.kind&164?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Type_reference_cannot_refer_to_container_0,[r?r.toString():i.toString()])):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Type_reference_must_refer_to_type))),this.canTypeCheckAST(t,n)&&this.setTypeChecked(t,n),i},t.prototype.getArrayType=function(e){var t=e.getArrayType();return t||(t=this.createInstantiatedType(this.cachedArrayInterfaceType(),[e]),t||(t=this.semanticInfoChain.anyTypeSymbol),e.setArrayType(t)),t},t.prototype.computeTypeReferenceSymbol=function(t,n){switch(t.kind()){case 60:return this.semanticInfoChain.anyTypeSymbol;case 61:return this.semanticInfoChain.booleanTypeSymbol;case 67:return this.semanticInfoChain.numberTypeSymbol;case 69:return this.semanticInfoChain.stringTypeSymbol;case 41:return this.semanticInfoChain.voidTypeSymbol}var r=null;if(t.kind()===11)r=this.resolveTypeNameExpression(t,n);else if(t.kind()===123){var i=t;r=this.resolveAnyFunctionTypeSignature(i,i.typeParameterList,i.parameterList,i.type,n)}else if(t.kind()===125){var s=t;r=this.resolveAnyFunctionTypeSignature(s,s.typeParameterList,s.parameterList,s.type,n)}else if(t.kind()===122)r=this.resolveObjectTypeTypeReference(t,n);else if(t.kind()===126)r=this.resolveGenericTypeReference(t,n);else if(t.kind()===121)r=this.resolveQualifiedName(t,n);else if(t.kind()===14){var o=t,u=this.getEnclosingDeclForAST(t);r=new e.PullStringConstantTypeSymbol(o.text());var a=new e.PullSynthesizedDecl(o.text(),o.text(),r.kind,null,u,u.semanticInfoChain);r.addDeclaration(a)}else if(t.kind()===127){var f=t,l=f.name,c=this.resolveAST(l,!1,n);if(c&&c.isAlias())if(c.assignedValue())c=c.assignedValue();else{var h=c.getExportAssignedContainerSymbol();c=h&&h.isContainer()&&!h.isEnum()?h.getInstanceSymbol():null}c?r=c.type.widenedType(this,l,n):r=this.getNewErrorTypeSymbol()}else{if(t.kind()!==124)throw e.Errors.invalidOperation("unknown type");var p=t,d=this.resolveTypeReference(p.type,n);r=this.getArrayType(d)}return r?r.isError()?r:(this.genericTypeIsUsedWithoutRequiredTypeArguments(r,t,n)&&(n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Generic_type_references_must_include_all_type_arguments)),r=this.instantiateTypeToAny(r,n)),r):(n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Unable_to_resolve_type)),this.getNewErrorTypeSymbol())},t.prototype.genericTypeIsUsedWithoutRequiredTypeArguments=function(e,t,n){return e?e.isAlias()?this.genericTypeIsUsedWithoutRequiredTypeArguments(e.getExportAssignedTypeSymbol(),t,n):e.isNamedTypeSymbol()&&e.isGeneric()&&!e.isTypeParameter()&&(e.isResolved||e.inResolution)&&!e.getIsSpecialized()&&e.getTypeParameters().length&&e.getTypeArguments()===null&&this.isTypeRefWithoutTypeArgs(t):!1},t.prototype.resolveMemberVariableDeclaration=function(t,n){return this.resolveVariableDeclaratorOrParameterOrEnumElement(t,t.modifiers,t.variableDeclarator.propertyName,e.ASTHelpers.getType(t.variableDeclarator),t.variableDeclarator.equalsValueClause,n)},t.prototype.resolvePropertySignature=function(t,n){return this.resolveVariableDeclaratorOrParameterOrEnumElement(t,e.sentinelEmptyArray,t.propertyName,e.ASTHelpers.getType(t),null,n)},t.prototype.resolveVariableDeclarator=function(t,n){return this.resolveVariableDeclaratorOrParameterOrEnumElement(t,e.ASTHelpers.getVariableDeclaratorModifiers(t),t.propertyName,e.ASTHelpers.getType(t),t.equalsValueClause,n)},t.prototype.resolveParameterList=function(e,t){return this.resolveSeparatedList(e.parameters,t)},t.prototype.resolveParameter=function(t,n){return this.resolveVariableDeclaratorOrParameterOrEnumElement(t,t.modifiers,t.identifier,e.ASTHelpers.getType(t),t.equalsValueClause,n)},t.prototype.getEnumTypeSymbol=function(e,t){var n=e.parent.parent,r=this.semanticInfoChain.getDeclForAST(n),i=r.getSymbol();return this.resolveDeclaredSymbol(i,t),i},t.prototype.resolveEnumElement=function(t,n){return this.resolveVariableDeclaratorOrParameterOrEnumElement(t,e.sentinelEmptyArray,t.propertyName,null,t.equalsValueClause,n)},t.prototype.typeCheckEnumElement=function(t,n){this.typeCheckVariableDeclaratorOrParameterOrEnumElement(t,e.sentinelEmptyArray,t.propertyName,null,t.equalsValueClause,n)},t.prototype.resolveEqualsValueClause=function(e,t,n){return this.canTypeCheckAST(e,n)&&this.setTypeChecked(e,n),this.resolveAST(e.value,t,n)},t.prototype.resolveVariableDeclaratorOrParameterOrEnumElement=function(e,t,n,r,i,s){var o=r!==null||e.kind()===243,u=this.getEnclosingDeclForAST(e),a=this.semanticInfoChain.getDeclForAST(e);u&&a.kind===2048&&u.ensureSymbolIsBound();var f=a.getSymbol(),l=a.getValueDecl()?a.getValueDecl().getSymbol():null;if(f.isResolved){var c=f.type,h=a.getValueDecl();if(h){var p=h.getSymbol();p&&!p.isResolved&&(p.type=c,p.setResolved())}}else{if(f.inResolution)return f.type=this.semanticInfoChain.anyTypeSymbol,f.setResolved(),f;if(!f.type||!f.type.isError()){f.startResolving();var d=this.resolveAndTypeCheckVariableDeclarationTypeExpr(e,n,r,s);o||this.resolveAndTypeCheckVariableDeclaratorOrParameterInitExpr(e,n,r,i,s,d);if(!o&&!i){var v=this.semanticInfoChain.anyTypeSymbol;f.isVarArg&&this.cachedArrayInterfaceType()&&(v=this.createInstantiatedType(this.cachedArrayInterfaceType(),[v])),s.setTypeInContext(f,v),l&&(l.type=v)}f.setResolved(),l&&l.setResolved()}}return this.canTypeCheckAST(e,s)&&this.typeCheckVariableDeclaratorOrParameterOrEnumElement(e,t,n,r,i,s),f},t.prototype.resolveAndTypeCheckVariableDeclarationTypeExpr=function(t,n,r,i){var s=this.getEnclosingDeclForAST(t),o=this.semanticInfoChain.getDeclForAST(t),u=o.getSymbol(),a=o.getValueDecl()?o.getValueDecl().getSymbol():null;if(t.kind()===243){var f=this.getEnumTypeSymbol(t,i);return u.type=f,f}if(!r)return null;var l=this.getEnclosingDecl(o);l=l||s;var c=this.resolveTypeReference(r,i);if(!c)i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Unable_to_resolve_type_of_0,[n.text()])),u.type=this.getNewErrorTypeSymbol(),a&&i.setTypeInContext(a,this.semanticInfoChain.anyTypeSymbol);else if(c.isError())i.setTypeInContext(u,c),a&&i.setTypeInContext(a,c);else{c===this.semanticInfoChain.anyTypeSymbol&&o.setFlag(16777216);if(c.isContainer()){var h=c.getExportAssignedTypeSymbol();if(h)c=h;else{c=c.type,c.isAlias()&&(c=c.getExportAssignedTypeSymbol());if(c&&c.isContainer()&&!c.isEnum()){var p=c.getInstanceSymbol();!p||!e.PullHelpers.symbolIsEnum(p)?c=this.getNewErrorTypeSymbol():c=p.type}}}else u.isVarArg&&!c.isArrayNamedTypeReference()&&c!==this.cachedArrayInterfaceType()&&(i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Rest_parameters_must_be_array_types)),c=this.getNewErrorTypeSymbol());i.setTypeInContext(u,c),a&&(a.type=c),c.kind===16777216&&!c.getFunctionSymbol()&&c.setFunctionSymbol(u)}return c},t.prototype.resolveAndTypeCheckVariableDeclaratorOrParameterInitExpr=function(t,n,r,i,s,o){if(!i)return null;var u=r!==null||t.kind()===243;o&&s.pushNewContextualType(o);var a=this.getEnclosingDeclForAST(t),f=this.semanticInfoChain.getDeclForAST(t),l=f.getSymbol(),c=f.getValueDecl()?f.getValueDecl().getSymbol():null,h=this.getEnclosingDecl(f);h=h||a;var p=this.resolveAST(i,o!==null,s);o&&s.popAnyContextualType();if(!p)s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Unable_to_resolve_type_of_0,[n.text()])),u||(s.setTypeInContext(l,this.getNewErrorTypeSymbol()),c&&s.setTypeInContext(c,this.semanticInfoChain.anyTypeSymbol));else{var d=p.type;if(!u){var v=d.widenedType(this,i.value,s);return s.setTypeInContext(l,v),c&&s.setTypeInContext(c,v),this.compilationSettings.noImplicitAny()&&v!==d&&v===this.semanticInfoChain.anyTypeSymbol&&s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Variable_0_implicitly_has_an_any_type,[n.text()])),v}}return d},t.prototype.typeCheckPropertySignature=function(t,n){this.typeCheckVariableDeclaratorOrParameterOrEnumElement(t,e.sentinelEmptyArray,t.propertyName,e.ASTHelpers.getType(t),null,n)},t.prototype.typeCheckMemberVariableDeclaration=function(t,n){this.typeCheckVariableDeclaratorOrParameterOrEnumElement(t,t.modifiers,t.variableDeclarator.propertyName,e.ASTHelpers.getType(t),t.variableDeclarator.equalsValueClause,n)},t.prototype.typeCheckVariableDeclarator=function(t,n){this.typeCheckVariableDeclaratorOrParameterOrEnumElement(t,e.ASTHelpers.getVariableDeclaratorModifiers(t),t.propertyName,e.ASTHelpers.getType(t),t.equalsValueClause,n)},t.prototype.typeCheckParameter=function(t,n){this.typeCheckVariableDeclaratorOrParameterOrEnumElement(t,t.modifiers,t.identifier,e.ASTHelpers.getType(t),t.equalsValueClause,n)},t.prototype.typeCheckVariableDeclaratorOrParameterOrEnumElement=function(t,n,r,i,s,o){var u=this;this.setTypeChecked(t,o);var a=i!==null||t.kind()===243,f=this.getEnclosingDeclForAST(t),c=this.semanticInfoChain.getDeclForAST(t),h=c.getSymbol(),p=this.resolveAndTypeCheckVariableDeclarationTypeExpr(t,r,i,o),d=this.resolveAndTypeCheckVariableDeclaratorOrParameterInitExpr(t,r,i,s,o,p);if(a||s){p&&p.isAlias()&&(p=p.getExportAssignedTypeSymbol());if(p&&p.kind===32){var v=p.getExportAssignedTypeSymbol();if(v)p=v;else{var m=p.getInstanceType();m?p=m:(o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Tried_to_set_variable_type_to_uninitialized_module_type_0,[p.toString()])),p=null)}}d=this.getInstanceTypeForAssignment(t,d,o);if(d&&p){var g=new l,y=this.sourceIsAssignableToTarget(d,p,t,o,g);if(!y){var b=this.getEnclosingSymbolForAST(t);g.message?o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1_NL_2,[d.toString(b),p.toString(b),g.message])):o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1,[d.toString(b),p.toString(b)]))}}}else if(t.kind()!==243&&this.compilationSettings.noImplicitAny()&&!this.isForInVariableDeclarator(t)){var w=this.getEnclosingDecl(c);w=w||f;var E=function(t,n){return e.hasFlag(t.flags,8)?n&&!e.hasFlag(n.flags,2):!0};if(w.kind===16384||w.kind===32768||w.kind===2097152)o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Parameter_0_of_1_implicitly_has_an_any_type,[r.text(),f.name]));else if(w.kind===65536){var S=w.getParentDecl();E(S,w)&&o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Parameter_0_of_1_implicitly_has_an_any_type,[r.text(),f.name]))}else c.kind===4096&&!h.getContainer().isNamedTypeSymbol()?E(w,c)&&o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Member_0_of_object_type_implicitly_has_an_any_type,[r.text()])):w.kind!==268435456&&(E(w)||!e.hasModifier(n,2))&&o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Variable_0_implicitly_has_an_any_type,[r.text()]))}if(s&&t.kind()===242){var x=f.getSignatureSymbol();x&&!x.isDefinition()&&o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Default_arguments_are_only_allowed_in_implementation))}h.kind!==2048&&(h.kind!==4096||h.getContainer().isNamedTypeSymbol())&&this.checkSymbolPrivacy(h,h.type,function(e){return u.variablePrivacyErrorReporter(t,h,e,o)}),(h.kind!==4096&&h.kind!==67108864||h.anyDeclHasFlag(8388608))&&this.checkNameForCompilerGeneratedDeclarationCollision(t,!0,r,o)},t.prototype.isForInVariableDeclarator=function(e){return e.kind()===225&&e.parent&&e.parent.parent&&e.parent.parent.parent&&e.parent.kind()===2&&e.parent.parent.kind()===224&&e.parent.parent.parent.kind()===155&&e.parent.parent.parent.variableDeclaration===e.parent.parent},t.prototype.checkSuperCaptureVariableCollides=function(t,n,r){var i=this.getEnclosingDeclForAST(t),s=this.getContextualClassSymbolForEnclosingDecl(t,i);if(s&&!s.anyDeclHasFlag(8)){if(t.kind()===242){var o=this.getASTForDecl(i);if(o.kind()!==218&&o.kind()!==219){var u=i.kind===65536?o.block:o.block;if(!u)return}}this.resolveDeclaredSymbol(s,r);var a=s.getExtendedTypes();a.length&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,n?e.DiagnosticCode.Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:e.DiagnosticCode.Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference))}},t.prototype.checkThisCaptureVariableCollides=function(t,n,r){if(n){var i=this.semanticInfoChain.getDeclForAST(t);if(e.hasFlag(i.flags,8))return}var s=this.getEnclosingDeclForAST(t),o=e.ASTHelpers.getEnclosingModuleDeclaration(t);e.ASTHelpers.isAnyNameOfModule(o,t)&&(s=this.getEnclosingDeclForAST(o));var u=s.getParentPath();for(var a=u.length-1;a>=0;a--){var i=u[a],f=i.kind;if(f===131072&&e.hasFlag(i.flags,8192))continue;if(f===16384||f===65536||f===32768||f===262144||f===524288||f===131072||f===8||f===4||f===32||f===1){e.hasFlag(i.flags,262144)&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,n?e.DiagnosticCode.Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference:e.DiagnosticCode.Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference));break}}},t.prototype.postTypeCheckVariableDeclaratorOrParameter=function(e,t){this.checkThisCaptureVariableCollides(e,!0,t)},t.prototype.resolveTypeParameterDeclaration=function(e,t){var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol();return this.resolveFirstTypeParameterDeclaration(r,t),r.isResolved&&this.canTypeCheckAST(e,t)&&this.typeCheckTypeParameterDeclaration(e,t),r},t.prototype.resolveFirstTypeParameterDeclaration=function(e,t){var n=e.getDeclarations()[0],r=this.semanticInfoChain.getASTForDecl(n);if(e.isResolved||e.inResolution)return;e.startResolving();if(r.constraint){var i=this.resolveTypeReference(r.constraint.type,t);i&&e.setConstraint(i)}e.setResolved()},t.prototype.typeCheckTypeParameterDeclaration=function(t,n){this.setTypeChecked(t,n);var r=this.resolveAST(t.constraint,!1,n);if(r){var i=t.parent,s=[];for(var o=0;o<i.nonSeparatorCount();o++){var u=i.nonSeparatorAt(o),a=this.semanticInfoChain.getDeclForAST(u),f=this.semanticInfoChain.getSymbolForDecl(a);s[f.pullSymbolID]=f}r.wrapsSomeTypeParameter(s)&&this.semanticInfoChain.addDiagnosticFromAST(t,e.DiagnosticCode.Constraint_of_a_type_parameter_cannot_reference_any_type_parameter_from_the_same_type_parameter_list)}},t.prototype.resolveConstraint=function(e,t){return this.canTypeCheckAST(e,t)&&this.setTypeChecked(e,t),this.resolveTypeReference(e.type,t)},t.prototype.resolveFunctionBodyReturnTypes=function(t,n,r,i,s,o,u){var a=this,f=[],c=[o],h=function(e,t){var n=!0;switch(e.kind()){case 129:case 219:case 218:case 222:case 215:n=!1;break;case 150:var r=e;o.setFlag(4194304),f.push({expression:r.expression,enclosingDecl:c[c.length-1]}),n=!1;break;case 236:case 163:c[c.length]=a.semanticInfoChain.getDeclForAST(e);break;default:}return t.options.goChildren=n,e},p=function(e,t){switch(e.kind()){case 236:case 163:c.length--;break;default:}return t.options.goChildren=!0,e};n?e.getAstWalkerFactory().walk(n,h,p):(f.push({expression:r,enclosingDecl:o}),o.setFlag(4194304));if(!f.length)i.returnType=this.semanticInfoChain.voidTypeSymbol;else{var d=[],v=[];for(var m=0;m<f.length;m++){var g=f[m].expression;if(g){var y=this.resolveAST(g,s,u).type;if(y.isError()){i.returnType=y;return}g.parent.kind()===150&&this.setSymbolForAST(g.parent,y,u),d.push(y),v.push(g)}}if(!d.length)i.returnType=this.semanticInfoChain.voidTypeSymbol;else{var b={getLength:function(){return d.length},getTypeAtIndex:function(e){return d[e].type}},w=this.findBestCommonType(b,u,new l),y=w,g=v[d.indexOf(y)],E=this.semanticInfoChain.getDeclForAST(t),S=E.getSymbol();if(y){var x=y,T=y.widenedType(this,g,u);i.returnType=T,e.ArrayUtilities.contains(d,w)||u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Could_not_find_the_best_common_type_of_types_of_all_return_statement_expressions));if(this.compilationSettings.noImplicitAny()&&x!==T&&T===this.semanticInfoChain.anyTypeSymbol){var N=o.name;N===""&&(N=o.getFunctionExpressionName()),N!=""?u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode._0_which_lacks_return_type_annotation_implicitly_has_an_any_return_type,[N])):u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Function_expression_which_lacks_return_type_annotation_implicitly_has_an_any_return_type))}}!S.type&&S.isAccessor()&&(S.type=i.returnType)}}},t.prototype.typeCheckConstructorDeclaration=function(t,n){var r=this;this.setTypeChecked(t,n);var i=this.semanticInfoChain.getDeclForAST(t);for(var s=0;s<t.callSignature.parameterList.parameters.nonSeparatorCount();s++)this.resolveAST(t.callSignature.parameterList.parameters.nonSeparatorAt(s),!1,n);this.resolveAST(t.block,!1,n);if(i.getSignatureSymbol()&&i.getSignatureSymbol().isDefinition()&&this.enclosingClassIsDerived(i.getParentDecl()))if(!this.constructorHasSuperCall(t))n.postDiagnostic(new e.Diagnostic(t.fileName(),this.semanticInfoChain.lineMap(t.fileName()),t.start(),"constructor".length,e.DiagnosticCode.Constructors_for_derived_classes_must_contain_a_super_call));else if(this.superCallMustBeFirstStatementInConstructor(i)){var o=this.getFirstStatementOfBlockOrNull(t.block);(!o||!this.isSuperInvocationExpressionStatement(o))&&n.postDiagnostic(new e.Diagnostic(t.fileName(),this.semanticInfoChain.lineMap(t.fileName()),t.start(),"constructor".length,e.DiagnosticCode.A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties))}this.validateVariableDeclarationGroups(i,n),this.checkFunctionTypePrivacy(t,!1,null,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),null,t.block,n),this.typeCheckCallBacks.push(function(e){r.typeCheckFunctionOverloads(t,e)})},t.prototype.constructorHasSuperCall=function(t){var n=this;if(t.block){var r=!1,i=function(e,t){switch(e.kind()){case 129:case 219:case 218:case 222:case 215:t.options.goChildren=!1;default:n.isSuperInvocationExpression(e)&&(r=!0,t.options.stopWalking=!0)}};return e.getAstWalkerFactory().walk(t.block,i),r}return!1},t.prototype.typeCheckFunctionExpression=function(t,n,r){this.typeCheckAnyFunctionExpression(t,t.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),t.callSignature.typeAnnotation,t.block,null,n,r)},t.prototype.typeCheckCallSignature=function(t,n){this.typeCheckAnyFunctionDeclaration(t,!1,null,t.typeParameterList,t.parameterList,e.ASTHelpers.getType(t),null,n)},t.prototype.typeCheckConstructSignature=function(t,n){this.typeCheckAnyFunctionDeclaration(t,!1,null,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),null,n)},t.prototype.typeCheckMethodSignature=function(t,n){this.typeCheckAnyFunctionDeclaration(t,!1,t.propertyName,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),null,n)},t.prototype.typeCheckMemberFunctionDeclaration=function(t,n){this.typeCheckAnyFunctionDeclaration(t,e.hasModifier(t.modifiers,16),t.propertyName,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),t.block,n)},t.prototype.containsSingleThrowStatement=function(e){return e!==null&&e.statements.childCount()===1&&e.statements.childAt(0).kind()===157},t.prototype.typeCheckAnyFunctionDeclaration=function(t,n,r,i,s,o,u,a){var f=this;this.setTypeChecked(t,a);var l=this.semanticInfoChain.getDeclForAST(t);if(i)for(var c=0;c<i.typeParameters.nonSeparatorCount();c++)this.resolveTypeParameterDeclaration(i.typeParameters.nonSeparatorAt(c),a);this.resolveAST(s,!1,a),this.resolveAST(u,!1,a);var h=this.getEnclosingDecl(l);this.resolveReturnTypeAnnotationOfFunctionDeclaration(t,o,a),this.validateVariableDeclarationGroups(l,a),this.checkFunctionTypePrivacy(t,n,i,e.ASTHelpers.parametersFromParameterList(s),o,u,a),this.checkThatNonVoidFunctionHasReturnExpressionOrThrowStatement(l,o,l.getSignatureSymbol().returnType,u,a),l.kind===16384&&this.checkNameForCompilerGeneratedDeclarationCollision(t,!0,r,a),this.typeCheckCallBacks.push(function(e){f.typeCheckFunctionOverloads(t,e)})},t.prototype.checkThatNonVoidFunctionHasReturnExpressionOrThrowStatement=function(t,n,r,i,s){var o=e.hasFlag(t.flags,4194304);if(i!==null&&n!==null&&!o){var u=this.isAnyOrEquivalent(r)||r===this.semanticInfoChain.voidTypeSymbol;if(!u&&!this.containsSingleThrowStatement(i)){var a=t.getDisplayName()||e.getLocalizedText(e.DiagnosticCode.expression,null);s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode.Function_declared_a_non_void_return_type_but_has_no_return_expression))}}},t.prototype.typeCheckIndexSignature=function(t,n){var r=this;this.setTypeChecked(t,n);var i=this.semanticInfoChain.getDeclForAST(t);this.resolveAST(t.parameter,!1,n);var s=this.getEnclosingDecl(i);this.resolveReturnTypeAnnotationOfFunctionDeclaration(t,e.ASTHelpers.getType(t),n),this.validateVariableDeclarationGroups(i,n),this.checkFunctionTypePrivacy(t,!1,null,e.ASTHelpers.parametersFromParameter(t.parameter),e.ASTHelpers.getType(t),null,n);var o=i.getSignatureSymbol();this.typeCheckCallBacks.push(function(n){var s=i.getSignatureSymbol().getContainer(),u=r.getBothKindsOfIndexSignaturesExcludingAugmentedType(s,n),a=u.stringSignature,f=u.numericSignature,c=f===o;if(f&&a&&(c||a.getDeclarations()[0].getParentDecl()!==f.getDeclarations()[0].getParentDecl())){var h=new l;if(!r.sourceIsAssignableToTarget(f.returnType,a.returnType,t,n,h)){var p=r.getEnclosingSymbolForAST(t);h.message?n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Numeric_indexer_type_0_must_be_assignable_to_string_indexer_type_1_NL_2,[f.returnType.toString(p),a.returnType.toString(p),h.message])):n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Numeric_indexer_type_0_must_be_assignable_to_string_indexer_type_1,[f.returnType.toString(p),a.returnType.toString(p)]))}}var d=s.type.getAllMembers(536869887,0);for(var v=0;v<d.length;v++){var m=d[v],g=m.name;if(g||m.kind===4096&&g===""){d[v].isResolved||r.resolveDeclaredSymbol(d[v],n);if(s!==d[v].getContainer()){var y=e.PullHelpers.isNameNumeric(g),b=c===y,w=!f;if(b||w){var h=new l;r.sourceIsAssignableToTarget(d[v].type,o.returnType,t,n,h,!1)||r.reportErrorThatMemberIsNotSubtypeOfIndexer(d[v],o,t,n,h)}}}}})},t.prototype.postTypeCheckFunctionDeclaration=function(e,t){this.checkThisCaptureVariableCollides(e,!0,t)},t.prototype.resolveReturnTypeAnnotationOfFunctionDeclaration=function(t,n,r){var i=null;if(n){var s=this.semanticInfoChain.getDeclForAST(t);i=this.resolveTypeReference(n,r);if(!i)r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode.Cannot_resolve_return_type_reference));else{var o=t.kind()===137||t.kind()===143;o&&i===this.semanticInfoChain.voidTypeSymbol&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Constructors_cannot_have_a_return_type_of_void))}}return i},t.prototype.resolveMemberFunctionDeclaration=function(t,n){return this.resolveFunctionDeclaration(t,e.hasModifier(t.modifiers,16),t.propertyName,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),t.block,n)},t.prototype.resolveCallSignature=function(t,n){return this.resolveFunctionDeclaration(t,!1,null,t.typeParameterList,t.parameterList,e.ASTHelpers.getType(t),null,n)},t.prototype.resolveConstructSignature=function(t,n){return this.resolveFunctionDeclaration(t,!1,null,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),null,n)},t.prototype.resolveMethodSignature=function(t,n){return this.resolveFunctionDeclaration(t,!1,t.propertyName,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),null,n)},t.prototype.resolveAnyFunctionDeclaration=function(t,n){return this.resolveFunctionDeclaration(t,e.hasModifier(t.modifiers,16),t.identifier,t.callSignature.typeParameterList,t.callSignature.parameterList,e.ASTHelpers.getType(t),t.block,n)},t.prototype.resolveFunctionExpression=function(t,n,r){return this.resolveAnyFunctionExpression(t,t.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),e.ASTHelpers.getType(t),t.block,null,n,r)},t.prototype.resolveSimpleArrowFunctionExpression=function(t,n,r){return this.resolveAnyFunctionExpression(t,null,e.ASTHelpers.parametersFromIdentifier(t.identifier),null,t.block,t.expression,n,r)},t.prototype.resolveParenthesizedArrowFunctionExpression=function(t,n,r){return this.resolveAnyFunctionExpression(t,t.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),e.ASTHelpers.getType(t),t.block,t.expression,n,r)},t.prototype.getEnclosingClassDeclaration=function(e){while(e){if(e.kind()===131)return e;e=e.parent}return null},t.prototype.resolveConstructorDeclaration=function(e,t){var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol(),i=n.getSignatureSymbol(),s=!1;if(i){if(i.isResolved)return this.canTypeCheckAST(e,t)&&this.typeCheckConstructorDeclaration(e,t),r;if(!i.inResolution){var o=this.getEnclosingClassDeclaration(e);if(o){var u=this.semanticInfoChain.getDeclForAST(o),a=u.getSymbol();!a.isResolved&&!a.inResolution&&this.resolveDeclaredSymbol(a,t)}}var f=r&&r.type;if(i.inResolution)return i.returnType=this.semanticInfoChain.anyTypeSymbol,r&&(r.setUnresolved(),r.type===this.semanticInfoChain.anyTypeSymbol&&(r.type=f)),i.setResolved(),r;r&&r.startResolving(),i.startResolving();var l=t.inTypeCheck;t.inTypeCheck=!1;for(var c=0;c<e.callSignature.parameterList.parameters.nonSeparatorCount();c++)this.resolveParameter(e.callSignature.parameterList.parameters.nonSeparatorAt(c),t);t.inTypeCheck=l,i.isGeneric()&&r&&r.type.setHasGenericSignature(),s||(r&&(r.setUnresolved(),r.type===this.semanticInfoChain.anyTypeSymbol&&(r.type=f)),i.setResolved())}return r&&this.resolveOtherDeclarations(e,t),this.canTypeCheckAST(e,t)&&this.typeCheckConstructorDeclaration(e,t),r},t.prototype.resolveIndexMemberDeclaration=function(e,t){return this.canTypeCheckAST(e,t)&&this.setTypeChecked(e,t),this.resolveIndexSignature(e.indexSignature,t)},t.prototype.resolveIndexSignature=function(t,n){var r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol(),s=r.getSignatureSymbol(),o=!1;if(s){if(s.isResolved)return this.canTypeCheckAST(t,n)&&this.typeCheckIndexSignature(t,n),i;var u=i&&i.type;if(s.inResolution){if(t.typeAnnotation){var a=this.resolveTypeReference(e.ASTHelpers.getType(t),n);a?s.returnType=a:(n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(e.ASTHelpers.getType(t),e.DiagnosticCode.Cannot_resolve_return_type_reference)),s.returnType=this.getNewErrorTypeSymbol(),o=!0)}else s.returnType=this.semanticInfoChain.anyTypeSymbol;return i&&(i.setUnresolved(),i.type===this.semanticInfoChain.anyTypeSymbol&&(i.type=u)),s.setResolved(),i}i&&i.startResolving(),s.startResolving();if(t.parameter){var f=n.inTypeCheck;n.inTypeCheck=!1,this.resolveParameter(t.parameter,n),n.inTypeCheck=f}t.typeAnnotation?(a=this.resolveReturnTypeAnnotationOfFunctionDeclaration(t,e.ASTHelpers.getType(t),n),a?s.returnType=a:(s.returnType=this.getNewErrorTypeSymbol(),o=!0)):s.returnType=this.semanticInfoChain.anyTypeSymbol,o||(i&&(i.setUnresolved(),i.type===this.semanticInfoChain.anyTypeSymbol&&(i.type=u)),s.setResolved())}return i&&this.resolveOtherDeclarations(t,n),this.canTypeCheckAST(t,n)&&this.typeCheckIndexSignature(t,n),i},t.prototype.resolveFunctionDeclaration=function(t,n,r,i,s,o,u,a){var f=this.semanticInfoChain.getDeclForAST(t),l=f.getSymbol(),c=f.getSignatureSymbol(),h=!1,p=t.kind()===143;if(c){if(c.isResolved)return this.canTypeCheckAST(t,a)&&this.typeCheckAnyFunctionDeclaration(t,n,r,i,s,o,u,a),l;if(p&&!c.inResolution){var d=this.getEnclosingClassDeclaration(t);if(d){var v=this.semanticInfoChain.getDeclForAST(d),m=v.getSymbol();!m.isResolved&&!m.inResolution&&this.resolveDeclaredSymbol(m,a)}}var g=l&&l.type;if(c.inResolution){if(o){var y=this.resolveTypeReference(o,a);y?(c.returnType=y,p&&y===this.semanticInfoChain.voidTypeSymbol&&a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Constructors_cannot_have_a_return_type_of_void))):(a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(o,e.DiagnosticCode.Cannot_resolve_return_type_reference)),c.returnType=this.getNewErrorTypeSymbol(),h=!0)}else c.returnType=this.semanticInfoChain.anyTypeSymbol;return l&&(l.setUnresolved(),l.type===this.semanticInfoChain.anyTypeSymbol&&(l.type=g)),c.setResolved(),l}l&&l.startResolving(),c.startResolving();if(i)for(var b=0;b<i.typeParameters.nonSeparatorCount();b++)this.resolveTypeParameterDeclaration(i.typeParameters.nonSeparatorAt(b),a);if(s){var w=a.inTypeCheck;a.inTypeCheck=!1;for(var b=0;b<s.parameters.nonSeparatorCount();b++)this.resolveParameter(s.parameters.nonSeparatorAt(b),a);a.inTypeCheck=w}if(o)y=this.resolveReturnTypeAnnotationOfFunctionDeclaration(t,o,a),y?c.returnType=y:(c.returnType=this.getNewErrorTypeSymbol(),h=!0);else if(f.kind!==2097152)if(e.hasFlag(f.flags,2048)){c.returnType=this.semanticInfoChain.anyTypeSymbol;var E=0;if(e.hasFlag(f.kind,65536)||e.hasFlag(f.kind,32768)){var S=f.getParentDecl();E=S.flags}if(this.compilationSettings.noImplicitAny()&&(!e.hasFlag(E,8)||e.hasFlag(E,8)&&!e.hasFlag(f.flags,2))){var x=r;x?a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode._0_which_lacks_return_type_annotation_implicitly_has_an_any_return_type,[x.text()])):a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Lambda_Function_which_lacks_return_type_annotation_implicitly_has_an_any_return_type))}}else this.resolveFunctionBodyReturnTypes(t,u,null,c,!1,f,a);else f.kind===2097152&&(c.returnType=this.semanticInfoChain.anyTypeSymbol,this.compilationSettings.noImplicitAny()&&a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Constructor_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type)));h||(l&&(l.setUnresolved(),l.type===this.semanticInfoChain.anyTypeSymbol&&(l.type=g)),c.setResolved())}return l&&this.resolveOtherDeclarations(t,a),this.canTypeCheckAST(t,a)&&this.typeCheckAnyFunctionDeclaration(t,n,r,i,s,o,u,a),l},t.prototype.resolveGetterReturnTypeAnnotation=function(t,n,r){return t&&t.typeAnnotation?this.resolveTypeReference(e.ASTHelpers.getType(t),r):null},t.prototype.resolveSetterArgumentTypeAnnotation=function(t,n,r){if(t&&t.parameterList&&t.parameterList.parameters.nonSeparatorCount()>0){var i=t.parameterList.parameters.nonSeparatorAt(0);return this.resolveTypeReference(e.ASTHelpers.getType(i),r)}return null},t.prototype.resolveAccessorDeclaration=function(t,n){var r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol();if(i.inResolution)return i.type=this.semanticInfoChain.anyTypeSymbol,i.setResolved(),i;if(i.isResolved)i.type||(i.type=this.semanticInfoChain.anyTypeSymbol);else{var s=i.getGetter(),o=s?s.getDeclarations()[0].ast():null,u=s!==null,a=i.getSetter(),f=a?a.getDeclarations()[0].ast():null,l=a!==null,c=this.resolveGetterReturnTypeAnnotation(o,r,n),h=c!==null,p=this.resolveSetterArgumentTypeAnnotation(f,r,n),d=p!==null;i.startResolving(),u&&(s=this.resolveGetAccessorDeclaration(o,o.parameterList,e.ASTHelpers.getType(o),o.block,p,n)),l&&(a=this.resolveSetAccessorDeclaration(f,f.parameterList,n));if(u&&l){var v=a.type.getCallSignatures()[0],m=v.parameters,g=m.length>0,y=s.type.getCallSignatures()[0],b=g?m[0].type:null,w=y.returnType;if(d&&!h)w=b,y.returnType=b;else if(h&&!d||!h&&!d)b=w,g&&(m[0].type=w);this.typesAreIdentical(b,w,n)?i.type=w:i.type=this.getNewErrorTypeSymbol()}else if(l){var v=a.type.getCallSignatures()[0],m=v.parameters,g=m.length>0;i.type=g?m[0].type:this.semanticInfoChain.anyTypeSymbol}else{var y=s.type.getCallSignatures()[0];i.type=y.returnType}i.setResolved()}return this.canTypeCheckAST(t,n)&&this.typeCheckAccessorDeclaration(t,n),i},t.prototype.typeCheckAccessorDeclaration=function(e,t){this.setTypeChecked(e,t);var n=this.semanticInfoChain.getDeclForAST(e),r=n.getSymbol(),i=r.getGetter(),s=r.getSetter(),o=e.kind()===139;if(o){var u=e;t.pushNewContextualType(i.type),this.typeCheckGetAccessorDeclaration(u,t),t.popAnyContextualType()}else{var a=e;this.typeCheckSetAccessorDeclaration(a,t)}},t.prototype.resolveGetAccessorDeclaration=function(e,t,n,r,i,s){var o=this.semanticInfoChain.getDeclForAST(e),u=o.getSymbol(),a=u.getGetter(),f=a.type,l=f.getCallSignatures()[0],c=!1;if(l){if(l.isResolved)return a;if(l.inResolution)return l.returnType=this.semanticInfoChain.anyTypeSymbol,l.setResolved(),a;l.startResolving();if(n){var h=this.resolveReturnTypeAnnotationOfFunctionDeclaration(e,n,s);h?l.returnType=h:(l.returnType=this.getNewErrorTypeSymbol(),c=!0)}else i?l.returnType=i:this.resolveFunctionBodyReturnTypes(e,r,null,l,!1,o,s);c||l.setResolved()}return a},t.prototype.checkIfGetterAndSetterTypeMatch=function(n,r){var i=this.semanticInfoChain.getDeclForAST(n),s=i.getSymbol(),o=s.getGetter(),u=s.getSetter();if(o&&u){var a=o.getDeclarations()[0].ast(),f=u.getDeclarations()[0].ast();if(a.typeAnnotation&&t.hasSetAccessorParameterTypeAnnotation(f)){var l=u.type.getCallSignatures()[0],c=l.parameters,o=s.getGetter(),h=o.type.getCallSignatures()[0],p=c[0].type,d=h.returnType;this.typesAreIdentical(p,d,r)||r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode.get_and_set_accessor_must_have_the_same_type))}}},t.prototype.typeCheckGetAccessorDeclaration=function(t,n){var r=this.semanticInfoChain.getDeclForAST(t),i=r.getSymbol();this.resolveReturnTypeAnnotationOfFunctionDeclaration(t,e.ASTHelpers.getType(t),n),this.resolveAST(t.block,!1,n),this.validateVariableDeclarationGroups(r,n);var s=this.getEnclosingDecl(r),o=(r.flags&4196352)!==0,u=t.propertyName;!o&&!this.containsSingleThrowStatement(t.block)&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(u,e.DiagnosticCode.Getters_must_return_a_value));var a=i.getSetter();if(a){var f=a.getDeclarations()[0],l=e.hasFlag(f.flags,2),c=e.hasModifier(t.modifiers,2);c!==l&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(u,e.DiagnosticCode.Getter_and_setter_accessors_do_not_agree_in_visibility)),this.checkIfGetterAndSetterTypeMatch(t,n)}this.checkFunctionTypePrivacy(t,e.hasModifier(t.modifiers,16),null,e.ASTHelpers.parametersFromParameterList(t.parameterList),e.ASTHelpers.getType(t),t.block,n)},t.hasSetAccessorParameterTypeAnnotation=function(e){return e.parameterList&&e.parameterList.parameters.nonSeparatorCount()>0&&e.parameterList.parameters.nonSeparatorAt(0).typeAnnotation!==null},t.prototype.resolveSetAccessorDeclaration=function(e,t,n){var r=this.semanticInfoChain.getDeclForAST(e),i=r.getSymbol(),s=i.getSetter(),o=s.type,u=r.getSignatureSymbol(),a=!1;if(u){if(u.isResolved)return s;if(u.inResolution)return u.returnType=this.semanticInfoChain.voidTypeSymbol,u.setResolved(),s;u.startResolving();if(t)for(var f=0;f<t.parameters.nonSeparatorCount();f++)this.resolveParameter(t.parameters.nonSeparatorAt(f),n);u.returnType=this.semanticInfoChain.voidTypeSymbol,a||u.setResolved()}return s},t.prototype.typeCheckSetAccessorDeclaration=function(n,r){var i=this.semanticInfoChain.getDeclForAST(n),s=i.getSymbol();if(n.parameterList)for(var o=0;o<n.parameterList.parameters.nonSeparatorCount();o++)this.resolveParameter(n.parameterList.parameters.nonSeparatorAt(o),r);this.resolveAST(n.block,!1,r),this.validateVariableDeclarationGroups(i,r);var u=(i.flags&4196352)!==0,a=s.getGetter(),f=n.propertyName;if(a){var l=a.getDeclarations()[0],c=e.hasFlag(l.flags,2),h=e.hasModifier(n.modifiers,2);c!==h&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(f,e.DiagnosticCode.Getter_and_setter_accessors_do_not_agree_in_visibility)),this.checkIfGetterAndSetterTypeMatch(n,r)}else if(this.compilationSettings.noImplicitAny()){var p=n;!t.hasSetAccessorParameterTypeAnnotation(p)&&s.type===this.semanticInfoChain.anyTypeSymbol&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode._0_which_lacks_get_accessor_and_parameter_type_annotation_on_set_accessor_implicitly_has_an_any_type,[p.propertyName.text()]))}this.checkFunctionTypePrivacy(n,e.hasModifier(n.modifiers,16),null,e.ASTHelpers.parametersFromParameterList(n.parameterList),null,n.block,r)},t.prototype.resolveList=function(e,t){if(this.canTypeCheckAST(e,t)){this.setTypeChecked(e,t);for(var n=0,r=e.childCount();n<r;n++)this.resolveAST(e.childAt(n),!1,t)}return this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveSeparatedList=function(e,t){if(this.canTypeCheckAST(e,t)){this.setTypeChecked(e,t);for(var n=0,r=e.nonSeparatorCount();n<r;n++)this.resolveAST(e.nonSeparatorAt(n),!1,t)}return this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveVoidExpression=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t)),this.semanticInfoChain.undefinedTypeSymbol},t.prototype.resolveLogicalOperation=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckLogicalOperation(e,t),this.semanticInfoChain.booleanTypeSymbol},t.prototype.typeCheckLogicalOperation=function(t,n){this.setTypeChecked(t,n);var r=this.resolveAST(t.left,!1,n).type,i=this.resolveAST(t.right,!1,n).type,s=new l;if(!this.sourceIsAssignableToTarget(r,i,t,n,s)&&!this.sourceIsAssignableToTarget(i,r,t,n,s)){var o=this.getEnclosingSymbolForAST(t);n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Operator_0_cannot_be_applied_to_types_1_and_2,[e.SyntaxFacts.getText(e.SyntaxFacts.getOperatorTokenFromBinaryExpression(t.kind())),r.toString(o),i.toString(o)]))}},t.prototype.resolveLogicalNotExpression=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.operand,!1,t)),this.semanticInfoChain.booleanTypeSymbol},t.prototype.resolveUnaryArithmeticOperation=function(e,t){this.canTypeCheckAST(e,t)&&this.typeCheckUnaryArithmeticOperation(e,t);var n=this.resolveAST(e.operand,!1,t);return n},t.prototype.resolvePostfixUnaryExpression=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckPostfixUnaryExpression(e,t),this.semanticInfoChain.numberTypeSymbol},t.prototype.isNumber=function(e){return e===this.semanticInfoChain.numberTypeSymbol},t.prototype.isEnum=function(t){return e.PullHelpers.symbolIsEnum(t)},t.prototype.isAnyOrNumberOrEnum=function(e){return this.isAnyOrEquivalent(e)||this.isNumber(e)||this.isEnum(e)},t.prototype.typeCheckUnaryArithmeticOperation=function(t,n){this.setTypeChecked(t,n);var r=t.kind(),i=this.resolveAST(t.operand,!1,n);if(r===164||r==165||r==166)return;e.Debug.assert(r===168||r===169);var s=i.type;this.isAnyOrNumberOrEnum(s)||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.operand,e.DiagnosticCode.The_type_of_a_unary_arithmetic_operation_operand_must_be_of_type_any_number_or_an_enum_type)),this.isReference(t.operand,i)||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.operand,e.DiagnosticCode.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_property_or_indexer))},t.prototype.typeCheckPostfixUnaryExpression=function(t,n){this.setTypeChecked(t,n);var r=t.kind(),i=this.resolveAST(t.operand,!1,n);e.Debug.assert(r===210||r===211);var s=i.type;this.isAnyOrNumberOrEnum(s)||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.operand,e.DiagnosticCode.The_type_of_a_unary_arithmetic_operation_operand_must_be_of_type_any_number_or_an_enum_type)),this.isReference(t.operand,i)||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.operand,e.DiagnosticCode.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_property_or_indexer))},t.prototype.resolveBinaryArithmeticExpression=function(e,t){this.canTypeCheckAST(e,t)&&this.typeCheckBinaryArithmeticExpression(e,t);var n=this.resolveAST(e.left,!1,t),r=this.resolveAST(e.right,!1,t);return this.isAnyOrNumberOrEnum(n.type)?this.isAnyOrNumberOrEnum(r.type)?this.semanticInfoChain.numberTypeSymbol:r:n},t.prototype.typeCheckBinaryArithmeticExpression=function(t,n){this.setTypeChecked(t,n);var r=this.resolveAST(t.left,!1,n),i=r.type,s=this.resolveAST(t.right,!1,n).type;if(i===this.semanticInfoChain.nullTypeSymbol||i===this.semanticInfoChain.undefinedTypeSymbol)i=s;if(s===this.semanticInfoChain.nullTypeSymbol||s===this.semanticInfoChain.undefinedTypeSymbol)s=i;var o=!0,u=!0;u||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.right,e.DiagnosticCode.The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type)),o||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type));if(o&&u)switch(t.kind()){case 183:case 184:case 185:case 176:case 177:case 178:case 179:case 182:case 180:case 181:this.isReference(t.left,r)||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.Invalid_left_hand_side_of_assignment_expression)),this.checkAssignability(t.left,s,i,n)}},t.prototype.resolveTypeOfExpression=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t)),this.semanticInfoChain.stringTypeSymbol},t.prototype.resolveThrowStatement=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t)),this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveDeleteExpression=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t)),this.semanticInfoChain.booleanTypeSymbol},t.prototype.resolveInstanceOfExpression=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckInstanceOfExpression(e,t),this.semanticInfoChain.booleanTypeSymbol},t.prototype.typeCheckInstanceOfExpression=function(t,n){this.setTypeChecked(t,n);var r=this.resolveAST(t.left,!1,n).type,i=this.resolveAST(t.right,!1,n).type,s=this.getEnclosingSymbolForAST(t),o=this.isAnyOrEquivalent(r)||r.isObject()||r.isTypeParameter(),u=this.isAnyOrEquivalent(i)||this.typeIsAssignableToFunction(i,t,n);o||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter)),u||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.right,e.DiagnosticCode.The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type))},t.prototype.resolveCommaExpression=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.left,!1,t)),this.resolveAST(e.right,!1,t).type},t.prototype.resolveInExpression=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckInExpression(e,t),this.semanticInfoChain.booleanTypeSymbol},t.prototype.typeCheckInExpression=function(t,n){this.setTypeChecked(t,n);var r=this.resolveAST(t.left,!1,n).type,i=this.resolveAST(t.right,!1,n).type,s=this.isAnyOrEquivalent(r.type)||r.type===this.semanticInfoChain.stringTypeSymbol||r.type===this.semanticInfoChain.numberTypeSymbol,o=this.isAnyOrEquivalent(i)||i.isObject()||i.isTypeParameter();s||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.The_left_hand_side_of_an_in_expression_must_be_of_types_any_string_or_number)),o||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.right,e.DiagnosticCode.The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter))},t.prototype.resolveForStatement=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.variableDeclaration,!1,t),this.resolveAST(e.initializer,!1,t),this.resolveAST(e.condition,!1,t),this.resolveAST(e.incrementor,!1,t),this.resolveAST(e.statement,!1,t)),this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveForInStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckForInStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckForInStatement=function(t,n){this.setTypeChecked(t,n);if(t.variableDeclaration){var r=t.variableDeclaration;if(r.declarators.nonSeparatorCount()===1){var i=r.declarators.nonSeparatorAt(0);i.typeAnnotation&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.Variable_declarations_of_a_for_statement_cannot_use_a_type_annotation))}}else{var s=this.resolveAST(t.left,!1,n),o=s.type===this.semanticInfoChain.stringTypeSymbol||this.isAnyOrEquivalent(s.type);o||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.Variable_declarations_of_a_for_statement_must_be_of_types_string_or_any))}var u=this.resolveAST(t.expression,!1,n).type,a=u&&(this.isAnyOrEquivalent(u)||u.isObject()||u.isTypeParameter());a||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.expression,e.DiagnosticCode.The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter)),this.resolveAST(t.statement,!1,n)},t.prototype.resolveWhileStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckWhileStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckWhileStatement=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.condition,!1,t),this.resolveAST(e.statement,!1,t)},t.prototype.resolveDoStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckDoStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckDoStatement=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.condition,!1,t),this.resolveAST(e.statement,!1,t)},t.prototype.resolveIfStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckIfStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckIfStatement=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.condition,!1,t),this.resolveAST(e.statement,!1,t),this.resolveAST(e.elseClause,!1,t)},t.prototype.resolveElseClause=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckElseClause(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckElseClause=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.statement,!1,t)},t.prototype.resolveBlock=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.statements,!1,t)),this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveVariableStatement=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.declaration,!1,t)),this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveVariableDeclarationList=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.declarators,!1,t)),this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveWithStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckWithStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckWithStatement=function(t,n){this.setTypeChecked(t,n);var r=t;n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r.condition,e.DiagnosticCode.All_symbols_within_a_with_block_will_be_resolved_to_any))},t.prototype.resolveTryStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckTryStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckTryStatement=function(e,t){this.setTypeChecked(e,t);var n=e;this.resolveAST(n.block,!1,t),this.resolveAST(n.catchClause,!1,t),this.resolveAST(n.finallyClause,!1,t)},t.prototype.resolveCatchClause=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckCatchClause(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckCatchClause=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.block,!1,t);var n=this.semanticInfoChain.getDeclForAST(e);this.validateVariableDeclarationGroups(n,t)},t.prototype.resolveFinallyClause=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckFinallyClause(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckFinallyClause=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.block,!1,t)},t.prototype.getEnclosingFunctionDeclaration=function(e){var t=this.getEnclosingDeclForAST(e);while(t){if(t.kind&1032192)return t;t=t.getParentDecl()}return null},t.prototype.resolveReturnExpression=function(t,n,r){n&&n.setFlag(4194304);var i=!1;if(n){var s=this.getASTForDecl(n),o=e.ASTHelpers.getType(s);if(o){var u=this.resolveTypeReference(o,r);u&&(i=!0,r.pushNewContextualType(u))}else{var a=r.getContextualType();if(a&&a.isFunction()){var f=a.kind==33554432?a.getConstructSignatures():a.getCallSignatures(),l=f[0],c=l.returnType;c&&(i=!0,r.propagateContextualType(c))}}}var h=this.resolveAST(t,i,r).type;return i&&r.popAnyContextualType(),h},t.prototype.typeCheckReturnExpression=function(t,n,r,i){if(r&&r.kind===32768){var s=r.getParentDecl();if(s){var o=s.getSymbol();this.resolveDeclaredSymbol(o,i);var u=new l,a=this.sourceIsAssignableToTarget(n,o.type,t,i,u);a||i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class))}}r&&r.kind===524288&&i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Setters_cannot_return_a_value));if(r){var f=this.getASTForDecl(r),c=e.ASTHelpers.getType(f);if(c||r.kind===262144){var h=r.getSignatureSymbol(),p=h.returnType;if(n&&p){var u=new l,d=null;this.resolveDeclaredSymbol(n,i),this.resolveDeclaredSymbol(p,i);var a=this.sourceIsAssignableToTarget(n,p,t,i,u);if(!a){var v=this.getEnclosingSymbolForAST(t);u.message?i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1_NL_2,[n.toString(v),p.toString(v),u.message])):i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1,[n.toString(v),p.toString(v)]))}}}}},t.prototype.resolveReturnStatement=function(e,t){var n=this.getEnclosingFunctionDeclaration(e);n&&n.setFlag(4194304);var r=this.getSymbolForAST(e,t),i=this.canTypeCheckAST(e,t);if(!r||i){var s=e.expression,o=s===null?this.semanticInfoChain.voidTypeSymbol:this.resolveReturnExpression(s,n,t);r||(r=o,this.setSymbolForAST(e,o,t)),s&&i&&(this.setTypeChecked(s,t),this.typeCheckReturnExpression(s,o,n,t))}return r},t.prototype.resolveSwitchStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckSwitchStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckSwitchStatement=function(t,n){this.setTypeChecked(t,n);var r=this.resolveAST(t.expression,!1,n).type;for(var i=0,s=t.switchClauses.childCount();i<s;i++){var o=t.switchClauses.childAt(i);if(o.kind()===233){var u=o,a=this.resolveAST(u.expression,!1,n).type;this.resolveAST(u.statements,!1,n);var f=new l;if(!this.sourceIsAssignableToTarget(r,a,u.expression,n,f)&&!this.sourceIsAssignableToTarget(a,r,u.expression,n,f)){var c=this.getEnclosingSymbolForAST(u.expression);f.message?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(u.expression,e.DiagnosticCode.Cannot_convert_0_to_1_NL_2,[a.toString(c),r.toString(c),f.message])):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(u.expression,e.DiagnosticCode.Cannot_convert_0_to_1,[a.toString(c),r.toString(c)]))}}else{var h=o;this.resolveAST(h.statements,!1,n)}}},t.prototype.resolveLabeledStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckLabeledStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckLabeledStatement=function(t,n){this.setTypeChecked(t,n);var r=t.identifier.valueText(),i=this.getEnclosingLabels(t,!0,!1),s=e.ArrayUtilities.firstOrDefault(i,function(e){return e.identifier.valueText()===r});s&&n.postDiagnostic(this.semanticInfoChain.duplicateIdentifierDiagnosticFromAST(t.identifier,r,s)),this.resolveAST(t.statement,!1,n)},t.prototype.labelIsOnContinuableConstruct=function(e){switch(e.kind()){case 160:return this.labelIsOnContinuableConstruct(e.statement);case 158:case 154:case 155:case 161:return!0;default:return!1}},t.prototype.resolveContinueStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckContinueStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.isIterationStatement=function(e){switch(e.kind()){case 154:case 155:case 158:case 161:return!0}return!1},t.prototype.isAnyFunctionExpressionOrDeclaration=function(e){switch(e.kind()){case 219:case 218:case 222:case 129:case 135:case 241:case 137:case 139:case 140:return!0}return!1},t.prototype.inSwitchStatement=function(e){while(e){if(e.kind()===151)return!0;if(this.isAnyFunctionExpressionOrDeclaration(e))return!1;e=e.parent}return!1},t.prototype.inIterationStatement=function(e,t){while(e){if(this.isIterationStatement(e))return!0;if(!t&&this.isAnyFunctionExpressionOrDeclaration(e))return!1;e=e.parent}return!1},t.prototype.getEnclosingLabels=function(e,t,n){var r=[];e=e.parent;while(e){if(e.kind()===160){var i=e;t?r.push(i):this.labelIsOnContinuableConstruct(i.statement)&&r.push(i)}if(!n&&this.isAnyFunctionExpressionOrDeclaration(e))break;e=e.parent}return r},t.prototype.typeCheckContinueStatement=function(t,n){this.setTypeChecked(t,n);if(!this.inIterationStatement(t,!1))this.inIterationStatement(t,!0)?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Jump_target_cannot_cross_function_boundary)):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.continue_statement_can_only_be_used_within_an_enclosing_iteration_statement));else if(t.identifier){var r=this.getEnclosingLabels(t,!1,!1);if(!e.ArrayUtilities.any(r,function(e){return e.identifier.valueText()===t.identifier.valueText()})){var r=this.getEnclosingLabels(t,!1,!0);e.ArrayUtilities.any(r,function(e){return e.identifier.valueText()===t.identifier.valueText()})?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Jump_target_cannot_cross_function_boundary)):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Jump_target_not_found))}}},t.prototype.resolveBreakStatement=function(e,t){return this.canTypeCheckAST(e,t)&&this.typeCheckBreakStatement(e,t),this.semanticInfoChain.voidTypeSymbol},t.prototype.typeCheckBreakStatement=function(t,n){this.setTypeChecked(t,n);if(t.identifier){var r=this.getEnclosingLabels(t,!0,!1);if(!e.ArrayUtilities.any(r,function(e){return e.identifier.valueText()===t.identifier.valueText()})){var r=this.getEnclosingLabels(t,!0,!0);e.ArrayUtilities.any(r,function(e){return e.identifier.valueText()===t.identifier.valueText()})?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Jump_target_cannot_cross_function_boundary)):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Jump_target_not_found))}}else!this.inIterationStatement(t,!1)&&!this.inSwitchStatement(t)&&(this.inIterationStatement(t,!0)?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Jump_target_cannot_cross_function_boundary)):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement)))},t.prototype.resolveAST=function(t,n,r){if(!t)return;var i=this.getSymbolForAST(t,r);if(i&&i.isResolved)return this.typeCheckAST(t,n,r),i;if(t.isExpression()&&!h(t))return this.resolveExpressionAST(t,n,r);var s=t.kind();switch(s){case 124:case 126:case 122:case 127:case 125:case 123:return this.resolveTypeReference(t,r);case 1:return this.resolveList(t,r);case 2:return this.resolveSeparatedList(t,r);case 120:return this.resolveSourceUnit(t,r);case 132:return this.resolveEnumDeclaration(t,r);case 130:return this.resolveModuleDeclaration(t,r);case 128:return this.resolveInterfaceDeclaration(t,r);case 131:return this.resolveClassDeclaration(t,r);case 224:return this.resolveVariableDeclarationList(t,r);case 136:return this.resolveMemberVariableDeclaration(t,r);case 225:return this.resolveVariableDeclarator(t,r);case 141:return this.resolvePropertySignature(t,r);case 227:return this.resolveParameterList(t,r);case 242:return this.resolveParameter(t,r);case 243:return this.resolveEnumElement(t,r);case 232:return this.resolveEqualsValueClause(t,n,r);case 238:return this.resolveTypeParameterDeclaration(t,r);case 239:return this.resolveConstraint(t,r);case 133:return this.resolveImportDeclaration(t,r);case 240:return this.resolveSimplePropertyAssignment(t,n,r);case 241:return this.resolveFunctionPropertyAssignment(t,n,r);case 11:return e.Debug.assert(h(t)),this.resolveTypeNameExpression(t,r);case 121:return this.resolveQualifiedName(t,r);case 137:return this.resolveConstructorDeclaration(t,r);case 139:case 140:return this.resolveAccessorDeclaration(t,r);case 138:return this.resolveIndexMemberDeclaration(t,r);case 144:return this.resolveIndexSignature(t,r);case 135:return this.resolveMemberFunctionDeclaration(t,r);case 142:return this.resolveCallSignature(t,r);case 143:return this.resolveConstructSignature(t,r);case 145:return this.resolveMethodSignature(t,r);case 129:return this.resolveAnyFunctionDeclaration(t,r);case 244:return this.resolveTypeAnnotation(t,r);case 134:return this.resolveExportAssignmentStatement(t,r);case 157:return this.resolveThrowStatement(t,r);case 149:return this.resolveExpressionStatement(t,r);case 154:return this.resolveForStatement(t,r);case 155:return this.resolveForInStatement(t,r);case 158:return this.resolveWhileStatement(t,r);case 161:return this.resolveDoStatement(t,r);case 147:return this.resolveIfStatement(t,r);case 235:return this.resolveElseClause(t,r);case 146:return this.resolveBlock(t,r);case 148:return this.resolveVariableStatement(t,r);case 163:return this.resolveWithStatement(t,r);case 159:return this.resolveTryStatement(t,r);case 236:return this.resolveCatchClause(t,r);case 237:return this.resolveFinallyClause(t,r);case 150:return this.resolveReturnStatement(t,r);case 151:return this.resolveSwitchStatement(t,r);case 153:return this.resolveContinueStatement(t,r);case 152:return this.resolveBreakStatement(t,r);case 160:return this.resolveLabeledStatement(t,r)}return this.semanticInfoChain.anyTypeSymbol},t.prototype.resolveExpressionAST=function(e,t,n){var r=this.resolveExpressionWorker(e,t,n);return t&&n.isInferentiallyTyping()?this.alterPotentialGenericFunctionTypeToInstantiatedFunctionTypeForTypeArgumentInference(r,n):r},t.prototype.resolveExpressionWorker=function(t,n,r){switch(t.kind()){case 215:return this.resolveObjectLiteralExpression(t,n,r);case 11:return this.resolveNameExpression(t,r);case 212:return this.resolveMemberAccessExpression(t,r);case 222:return this.resolveFunctionExpression(t,n,r);case 219:return this.resolveSimpleArrowFunctionExpression(t,n,r);case 218:return this.resolveParenthesizedArrowFunctionExpression(t,n,r);case 214:return this.resolveArrayLiteralExpression(t,n,r);case 35:return this.resolveThisExpression(t,r);case 50:return this.resolveSuperExpression(t,r);case 213:return this.resolveInvocationExpression(t,r);case 216:return this.resolveObjectCreationExpression(t,r);case 220:return this.resolveCastExpression(t,r);case 13:return this.semanticInfoChain.numberTypeSymbol;case 14:return this.semanticInfoChain.stringTypeSymbol;case 32:return this.semanticInfoChain.nullTypeSymbol;case 37:case 24:return this.semanticInfoChain.booleanTypeSymbol;case 172:return this.resolveVoidExpression(t,r);case 174:return this.resolveAssignmentExpression(t,r);case 167:return this.resolveLogicalNotExpression(t,r);case 193:case 192:case 194:case 195:case 196:case 198:case 199:case 197:return this.resolveLogicalOperation(t,r);case 208:case 175:return this.resolveBinaryAdditionOperation(t,r);case 164:case 165:case 166:case 168:case 169:return this.resolveUnaryArithmeticOperation(t,r);case 210:case 211:return this.resolvePostfixUnaryExpression(t,r);case 209:case 205:case 206:case 207:case 189:case 191:case 202:case 203:case 204:case 190:case 181:case 183:case 184:case 185:case 176:case 177:case 178:case 179:case 182:case 180:return this.resolveBinaryArithmeticExpression(t,r);case 221:return this.resolveElementAccessExpression(t,r);case 187:return this.resolveLogicalOrExpression(t,n,r);case 188:return this.resolveLogicalAndExpression(t,r);case 171:return this.resolveTypeOfExpression(t,r);case 170:return this.resolveDeleteExpression(t,r);case 186:return this.resolveConditionalExpression(t,n,r);case 12:return this.resolveRegularExpressionLiteral();case 217:return this.resolveParenthesizedExpression(t,r);case 200:return this.resolveInstanceOfExpression(t,r);case 173:return this.resolveCommaExpression(t,r);case 201:return this.resolveInExpression(t,r);case 223:return this.semanticInfoChain.undefinedTypeSymbol}e.Debug.fail("resolveExpressionASTWorker: Missing expression kind: "+e.SyntaxKind[t.kind()])},t.prototype.typeCheckAST=function(t,n,r){if(!this.canTypeCheckAST(t,r))return;var i=t.kind();switch(i){case 120:this.typeCheckSourceUnit(t,r);return;case 132:this.typeCheckEnumDeclaration(t,r);return;case 130:this.typeCheckModuleDeclaration(t,r);return;case 128:this.typeCheckInterfaceDeclaration(t,r);return;case 131:this.typeCheckClassDeclaration(t,r);return;case 243:this.typeCheckEnumElement(t,r);return;case 136:this.typeCheckMemberVariableDeclaration(t,r);return;case 225:this.typeCheckVariableDeclarator(t,r);return;case 141:this.typeCheckPropertySignature(t,r);return;case 242:this.typeCheckParameter(t,r);return;case 133:this.typeCheckImportDeclaration(t,r);return;case 215:this.resolveObjectLiteralExpression(t,n,r);return;case 241:this.typeCheckFunctionPropertyAssignment(t,n,r);return;case 11:h(t)?this.resolveTypeNameExpression(t,r):this.resolveNameExpression(t,r);return;case 212:this.resolveMemberAccessExpression(t,r);return;case 121:this.resolveQualifiedName(t,r);return;case 222:this.typeCheckFunctionExpression(t,n,r);return;case 137:this.typeCheckConstructorDeclaration(t,r);return;case 139:case 140:this.typeCheckAccessorDeclaration(t,r);return;case 135:this.typeCheckMemberFunctionDeclaration(t,r);return;case 145:this.typeCheckMethodSignature(t,r);return;case 144:this.typeCheckIndexSignature(t,r);break;case 142:this.typeCheckCallSignature(t,r);return;case 143:this.typeCheckConstructSignature(t,r);return;case 129:var s=t;this.typeCheckAnyFunctionDeclaration(s,e.hasModifier(s.modifiers,16),s.identifier,s.callSignature.typeParameterList,s.callSignature.parameterList,e.ASTHelpers.getType(s),s.block,r);return;case 219:this.typeCheckSimpleArrowFunctionExpression(t,n,r);return;case 218:this.typeCheckParenthesizedArrowFunctionExpression(t,n,r);return;case 214:this.resolveArrayLiteralExpression(t,n,r);return;case 213:this.typeCheckInvocationExpression(t,r);return;case 216:this.typeCheckObjectCreationExpression(t,r);return;case 150:this.resolveReturnStatement(t,r);return;default:e.Debug.assert(!1,"Failure nodeType: "+e.SyntaxKind[t.kind()]+". Implement typeCheck when symbol is set for the ast as part of resolution.")}},t.prototype.processPostTypeCheckWorkItems=function(e){while(this.postTypeCheckWorkitems.length){var t=this.postTypeCheckWorkitems.pop();this.postTypeCheck(t,e)}},t.prototype.postTypeCheck=function(t,n){var r=t.kind();switch(r){case 242:case 225:this.postTypeCheckVariableDeclaratorOrParameter(t,n);return;case 131:this.postTypeCheckClassDeclaration(t,n);return;case 129:this.postTypeCheckFunctionDeclaration(t,n);return;case 130:this.postTypeCheckModuleDeclaration(t,n);return;case 132:this.postTypeCheckEnumDeclaration(t,n);return;case 133:this.postTypeCheckImportDeclaration(t,n);return;case 11:this.postTypeCheckNameExpression(t,n);return;default:e.Debug.assert(!1,"Implement postTypeCheck clause to handle the postTypeCheck work, nodeType: "+e.SyntaxKind[t.kind()])}},t.prototype.resolveRegularExpressionLiteral=function(){return this.cachedRegExpInterfaceType()?this.cachedRegExpInterfaceType():this.semanticInfoChain.anyTypeSymbol},t.prototype.postTypeCheckNameExpression=function(e,t){this.checkThisCaptureVariableCollides(e,!1,t)},t.prototype.typeCheckNameExpression=function(e,t){this.setTypeChecked(e,t),this.checkNameForCompilerGeneratedDeclarationCollision(e,!1,e,t)},t.prototype.resolveNameExpression=function(e,t){var n=this.getSymbolForAST(e,t),r=n!==null;if(!r||this.canTypeCheckAST(e,t))this.canTypeCheckAST(e,t)&&this.typeCheckNameExpression(e,t),n=this.computeNameExpression(e,t);return this.resolveDeclaredSymbol(n,t),n&&(n.type!==this.semanticInfoChain.anyTypeSymbol||n.anyDeclHasFlag(16777217))&&this.setSymbolForAST(e,n,t),n},t.prototype.isInEnumDecl=function(e){if(e.kind&64)return!0;var t=e.getParentPath(),n=58728959;for(var r=t.length-1;r>=0;r--){var e=t[r];if(e.kind&64)return!0;if(e.kind&n)return!1}return!1},t.prototype.getSomeInnermostFunctionScopeDecl=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(n.kind&1032192)return n}return null},t.prototype.isFromFunctionScope=function(t,n){var r=this;return e.ArrayUtilities.any(t.getDeclarations(),function(e){return r.getSomeInnermostFunctionScopeDecl(e.getParentPath())===n})},t.prototype.findConstructorDeclOfEnclosingType=function(t){var n=t;while(n){if(e.hasFlag(n.kind,4096)){var r=n.getParentDecl();if(e.hasFlag(r.kind,8))return e.ArrayUtilities.lastOrDefault(r.getChildDecls(),function(t){return e.hasFlag(t.kind,32768)})}if(e.hasFlag(n.kind,164))return null;n=n.getParentDecl()}return null},t.prototype.checkNameAsPartOfInitializerExpressionForInstanceMemberVariable=function(t,n,r){var i=t.valueText();if(i.length===0)return!1;var s=e.ASTHelpers.getEnclosingMemberVariableDeclaration(t);if(s){var o=this.semanticInfoChain.getDeclForAST(s);if(!e.hasFlag(o.flags,16)){var u=this.findConstructorDeclOfEnclosingType(o);if(u){var a=u.searchChildDecls(i,68147712);if(a.length&&e.PullHelpers.isSymbolDeclaredInScopeChain(n,u.getSymbol().getContainer())){var f=o.getSymbol();return r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor,[f.getScopedName(u.getSymbol()),t.text()])),!0}}}}return!1},t.prototype.computeNameExpression=function(t,n){var r=t.valueText();if(r.length===0)return this.semanticInfoChain.anyTypeSymbol;var i=null,s=this.getEnclosingDeclForAST(t);if(e.hasFlag(s.flags,8388608)){var o=s.getValueDecl();o&&e.hasFlag(o.kind,2048)&&(s=o)}var u=e.ASTHelpers.isDeclarationASTOrDeclarationNameAST(t);u&&(i=this.semanticInfoChain.getDeclForAST(t.parent).getSymbol());var a=s.getParentPath();if(!i){var f=68147712;this.isInEnumDecl(s)||(f&=-67108865);var i=this.getSymbolFromDeclPath(r,a,f)}if(r==="arguments"){var l=this.getSomeInnermostFunctionScopeDecl(a);l&&(!i||!this.isFromFunctionScope(i,l))&&(i=this.cachedFunctionArgumentsSymbol(),this.resolveDeclaredSymbol(this.cachedIArgumentsInterfaceType(),n))}var c=null;i&&i.isAlias()&&!u&&(c=i,this.inTypeQuery(t)||c.setIsUsedAsValue(),this.resolveDeclaredSymbol(i,n),this.resolveDeclaredSymbol(c.assignedValue(),n),this.resolveDeclaredSymbol(c.assignedContainer(),n),i=c.getExportAssignedValueSymbol(),i||(c=null));if(!i)return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Could_not_find_symbol_0,[t.text()])),this.getNewErrorTypeSymbol(r);if(this.checkNameAsPartOfInitializerExpressionForInstanceMemberVariable(t,i,n))return this.getNewErrorTypeSymbol(r);var h=i.getDeclarations()[0],p=h.getParentDecl();if(p&&p.kind&1032192&&p.flags&33554432){var d=this.semanticInfoChain.getASTForDecl(p),v=this.getCurrentParameterIndexForFunction(t,d),m=e.ASTHelpers.getParameterList(d);if(v>=0){var g;if(m)for(var y=0;y<=v;y++){var b=m.parameters.nonSeparatorAt(y);if(b&&b.identifier.valueText()===r){g=b;break}}if(!g)return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it,[m.parameters.nonSeparatorAt(v).identifier.text(),t.text()])),this.getNewErrorTypeSymbol(r);if(g===e.ASTHelpers.getEnclosingParameterForInitializer(t))return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Parameter_0_cannot_be_referenced_in_its_initializer,[m.parameters.nonSeparatorAt(v).identifier.text()])),this.getNewErrorTypeSymbol(r)}}return c&&this.semanticInfoChain.setAliasSymbolForAST(t,c),i},t.prototype.getCurrentParameterIndexForFunction=function(t,n){var r=e.ASTHelpers.getParameterList(n);if(r)while(t&&t.parent){if(t.parent.parent===r)return r.parameters.nonSeparatorIndexOf(t);t=t.parent}return-1},t.prototype.resolveMemberAccessExpression=function(e,t){return this.resolveDottedNameExpression(e,e.expression,e.name,t)},t.prototype.resolveDottedNameExpression=function(e,t,n,r){var i=this.getSymbolForAST(e,r),s=i!==null;if(!s||this.canTypeCheckAST(e,r)){var o=this.canTypeCheckAST(e,r);o&&this.setTypeChecked(e,r),i=this.computeDottedNameExpression(t,n,r,o)}return this.resolveDeclaredSymbol(i,r),i&&(i.type!==this.semanticInfoChain.anyTypeSymbol||i.anyDeclHasFlag(16777217))&&(this.setSymbolForAST(e,i,r),this.setSymbolForAST(n,i,r)),i},t.prototype.computeDottedNameExpression=function(e,t,n,r){var i=t.valueText();if(i.length===0)return this.semanticInfoChain.anyTypeSymbol;var s=this.resolveAST(e,!1,n);return this.computeDottedNameExpressionFromLHS(s,e,t,n,r)},t.prototype.computeDottedNameExpressionFromLHS=function(t,n,r,i,s){var o=r.valueText();if(o.length===0)return this.semanticInfoChain.anyTypeSymbol;var u=t.type;if(t.isAlias()){var a=t;this.inTypeQuery(n)||a.setIsUsedAsValue(),u=a.getExportAssignedTypeSymbol()}u.isAlias()&&(u=u.getExportAssignedTypeSymbol());if(!u)return i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.Could_not_find_enclosing_symbol_for_dotted_name_0,[r.text()])),this.getNewErrorTypeSymbol();if(!u.isResolved){var f=this.resolveDeclaredSymbol(u,i);f!==u&&(t.isType()||i.setTypeInContext(t,f),u=f)}if(u.isContainer()&&!u.isAlias()&&!u.isEnum()){var l=u.getInstanceSymbol();l&&(u=l.type)}var c=u;u=this.getApparentType(u).widenedType(this,n,i);if(this.isAnyOrEquivalent(u))return u;var h=this._getNamedPropertySymbolOfAugmentedType(o,u);if(!h){if(u.kind===32){var p=u,d=p.getInstanceSymbol();if(d){var v=d.type;h=this.getNamedPropertySymbol(o,68147712,v)}}else{var m=u.getAssociatedContainerType();m&&!m.isClass()&&(h=this.getNamedPropertySymbol(o,68147712,m))}if(!h){var g=this.getEnclosingDeclForAST(n);return i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.The_property_0_does_not_exist_on_value_of_type_1,[r.text(),c.toString(g?g.getSymbol():null)])),this.getNewErrorTypeSymbol(o)}}return s&&(this.checkForSuperMemberAccess(n,r,h,i)||this.checkForPrivateMemberAccess(r,u,h,i)),h},t.prototype.resolveTypeNameExpression=function(e,t){var n=this.getSymbolForAST(e,t);if(!n||!n.isType()||this.canTypeCheckAST(e,t))this.canTypeCheckAST(e,t)&&this.setTypeChecked(e,t),n=this.computeTypeNameExpression(e,t),this.setSymbolForAST(e,n,t);return this.resolveDeclaredSymbol(n,t),n},t.prototype.computeTypeNameExpression=function(t,n){var r=t.valueText();if(r.length===0)return this.semanticInfoChain.anyTypeSymbol;var i=this.getEnclosingDeclForAST(t),s=i.getParentPath(),o=this.isLeftSideOfQualifiedName(t),u=o?164:58728795,a=o?58728795:164,f=this.getSymbolFromDeclPath(r,s,u);f||(f=this.getSymbolFromDeclPath(r,s,a));if(!f)return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Could_not_find_symbol_0,[t.text()])),this.getNewErrorTypeSymbol(r);var l=null;if(f.isAlias()){l=f,this.resolveDeclaredSymbol(f,n);var c=l.getExportAssignedTypeSymbol();this.resolveDeclaredSymbol(c,n)}if(f.isTypeParameter()&&this.isInStaticMemberContext(i)){var h=f.getDeclarations()[0].getParentDecl();if(h.kind===8)return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Static_members_cannot_reference_class_type_parameters)),this.getNewErrorTypeSymbol()}return!f.isGeneric()&&(f.isClass()||f.isInterface())&&(f=e.PullTypeReferenceSymbol.createTypeReference(f)),f},t.prototype.isInStaticMemberContext=function(t){while(t){if(e.hasFlag(t.kind,1036288)&&e.hasFlag(t.flags,16))return!0;if(e.hasFlag(t.kind,164))return!1;t=t.getParentDecl()}return!1},t.prototype.isLeftSideOfQualifiedName=function(e){return e&&e.parent&&e.parent.kind()===121&&e.parent.left===e},t.prototype.resolveGenericTypeReference=function(t,n){var r=this,i=this.resolveAST(t.name,!1,n).type;if(i.isError())return i;!i.inResolution&&!i.isResolved&&this.resolveDeclaredSymbol(i,n),i.isAlias()&&(this.inClassExtendsHeritageClause(t)&&!this.inTypeArgumentList(t)&&i.setIsUsedAsValue(),i=i.getExportAssignedTypeSymbol());var s=i.getTypeParameters();if(s.length===0)return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Type_0_does_not_have_type_parameters,[i.toString()])),this.getNewErrorTypeSymbol();var o=[];if(t.typeArgumentList&&t.typeArgumentList.typeArguments.nonSeparatorCount())for(var u=0;u<t.typeArgumentList.typeArguments.nonSeparatorCount();u++)o[u]=this.resolveTypeReference(t.typeArgumentList.typeArguments.nonSeparatorAt(u),n),o[u].isError()&&(o[u]=this.semanticInfoChain.anyTypeSymbol);if(o.length&&o.length!==s.length)return n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Generic_type_0_requires_1_type_argument_s,[i.toString(),i.getTypeParameters().length])),this.getNewErrorTypeSymbol();if(!i.isResolved){var a=i.getDeclarations(),f=null;for(var u=0;u<a.length;u++){f=a[u].getChildDecls();for(var l=0;l<f.length;l++)f[l].ensureSymbolIsBound()}}var c=this.createInstantiatedType(i,o),h=null;s=c.getTypeParameters();var p=[],d=c.getTypeParameterArgumentMap();for(var u=0;u<s.length;u++)p[s[u].pullSymbolID]=s[u];for(var v in d)p[v]=d[v];for(var m=0;m<o.length&&m<s.length;m++){var g=o[m],y=s[m],b=y.getConstraint();p[y.pullSymbolID]=g;if(b){if(b.isTypeParameter())for(var l=0;l<s.length&&l<o.length;l++)s[l]===b&&(b=o[l]);else b.isGeneric()&&(b=this.instantiateType(b,p));g.isTypeParameter()&&(h=g.getConstraint(),h&&(g=h));if(g.inResolution||g.isTypeReference()&&g.referencedTypeSymbol.inResolution)return c;n.canTypeCheckAST(t)&&this.typeCheckCallBacks.push(function(n){if(!r.sourceIsAssignableToTarget(g,b,t,n)){var i=r.getEnclosingSymbolForAST(t);n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Type_0_does_not_satisfy_the_constraint_1_for_type_parameter_2,[g.toString(i,!0),b.toString(i,!0),y.toString(i,!0)]))}})}}return c},t.prototype.resolveQualifiedName=function(e,t){if(this.inTypeQuery(e))return this.resolveDottedNameExpression(e,e.left,e.right,t).type;var n=this.getSymbolForAST(e,t);if(!n||this.canTypeCheckAST(e,t)){var r=this.canTypeCheckAST(e,t);r&&this.setTypeChecked(e,t),n=this.computeQualifiedName(e,t),this.setSymbolForAST(e,n,t)}return this.resolveDeclaredSymbol(n,t),n},t.prototype.isLastNameOfModuleNameModuleReference=function(e){return e.kind()===11&&e.parent&&e.parent.kind()===121&&e.parent.right===e&&e.parent.parent&&e.parent.parent.kind()===246},t.prototype.computeQualifiedName=function(t,n){var r=t.right.valueText();if(r.length===0)return this.semanticInfoChain.anyTypeSymbol;var i=this.getEnclosingDeclForAST(t),s=this.resolveAST(t.left,!1,n),o=s.isAlias()?s.getExportAssignedContainerSymbol():s.type;this.inClassExtendsHeritageClause(t)&&!this.inTypeArgumentList(t)&&s.isAlias()&&s.setIsUsedAsValue();if(!o)return this.getNewErrorTypeSymbol();if(this.isAnyOrEquivalent(o))return o;var u=this.isLeftSideOfQualifiedName(t),a=t.parent.kind()===130&&t.parent.name===t,f=u||a?164:58728795,l=this.getNamedPropertySymbol(r,f,o);!l&&!a&&this.isLastNameOfModuleNameModuleReference(t.right)&&(l=this.getNamedPropertySymbol(r,68147712,o));if(!l&&o.isContainer()){var c=o.getExportAssignedContainerSymbol();c&&(l=this.getNamedPropertySymbol(r,f,c))}if(!l&&i){var h=i;while(h){if(h.kind&164)break;h=h.getParentDecl()}if(h){var p=h.getSymbol().type;p===o&&(l=this.getNamedPropertySymbol(r,f,o))}}return l?l:(n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.right,e.DiagnosticCode.The_property_0_does_not_exist_on_value_of_type_1,[t.right.text(),o.toString(i?i.getSymbol():null)])),this.getNewErrorTypeSymbol(r))},t.prototype.shouldContextuallyTypeAnyFunctionExpression=function(e,t,n,r,i){if(t&&t.typeParameters.nonSeparatorCount()>0)return!1;if(r)return!1;if(n)for(var s=0,o=n.length;s<o;s++)if(n.typeAt(s))return!1;var u=i.getContextualType();if(u){this.resolveDeclaredSymbol(u,i);var a=u.getCallSignatures(),f=a&&a.length===1;if(!f)return!1;var l=a[0].getTypeParameters().length>0;return!l}return!1},t.prototype.resolveAnyFunctionExpression=function(t,n,r,i,s,o,u,a){var f=null,l=this.semanticInfoChain.getDeclForAST(t);e.Debug.assert(l);if(l&&l.hasSymbol()){f=l.getSymbol();if(f.isResolved||f.inResolution)return f}f=l.getSymbol(),e.Debug.assert(f);var c=f.type,h=c.getCallSignatures()[0];f.startResolving();if(n)for(var p=0;p<n.typeParameters.nonSeparatorCount();p++)this.resolveTypeParameterDeclaration(n.typeParameters.nonSeparatorAt(p),a);var d=null;u&&this.shouldContextuallyTypeAnyFunctionExpression(t,n,r,i,a)&&(d=a.getContextualType().getCallSignatures()[0]),this.resolveAnyFunctionExpressionParameters(t,n,r,i,u,a);if(i)h.returnType=this.resolveTypeReference(i,a);else if(d){var v=d.returnType;if(v)a.propagateContextualType(v),this.resolveFunctionBodyReturnTypes(t,s,o,h,!0,l,a),a.popAnyContextualType();else{h.returnType=this.semanticInfoChain.anyTypeSymbol;if(this.compilationSettings.noImplicitAny()){var m=l.getFunctionExpressionName();m!=""?a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode._0_which_lacks_return_type_annotation_implicitly_has_an_any_return_type,[m])):a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Function_expression_which_lacks_return_type_annotation_implicitly_has_an_any_return_type))}}}else this.resolveFunctionBodyReturnTypes(t,s,o,h,!1,l,a);return a.setTypeInContext(f,c),f.setResolved(),this.canTypeCheckAST(t,a)&&this.typeCheckAnyFunctionExpression(t,n,r,i,s,o,u,a),f},t.prototype.resolveAnyFunctionExpressionParameters=function(e,t,n,r,i,s){if(!n)return;var o=this.semanticInfoChain.getDeclForAST(e),u=[],a=null;i&&this.shouldContextuallyTypeAnyFunctionExpression(e,t,n,r,s)&&(a=s.getContextualType().getCallSignatures()[0]),a&&(u=a.parameters);var f=u.length;for(var l=0,c=n.length;l<c;l++){var h=l===c-1&&n.lastParameterIsRest(),p=null,d=null;l<f?p=u[l]:f&&u[f-1].isVarArg&&(p=u[f-1]),p&&(p.isVarArg===h?d=p.type:p.isVarArg&&(d=p.type.getElementType())),this.resolveFunctionExpressionParameter(n.astAt(l),n.identifierAt(l),n.typeAt(l),n.initializerAt(l),d,o,s)}},t.prototype.typeCheckSimpleArrowFunctionExpression=function(t,n,r){return this.typeCheckAnyFunctionExpression(t,null,e.ASTHelpers.parametersFromIdentifier(t.identifier),null,t.block,t.expression,n,r)},t.prototype.typeCheckParenthesizedArrowFunctionExpression=function(t,n,r){return this.typeCheckAnyFunctionExpression(t,t.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),e.ASTHelpers.getType(t),t.block,t.expression,n,r)},t.prototype.typeCheckAnyFunctionExpression=function(e,t,n,r,i,s,o,u){var a=this;this.setTypeChecked(e,u);var f=this.semanticInfoChain.getDeclForAST(e),l=f.getSymbol(),c=l.type,h=c.getCallSignatures()[0],p=h.returnType;if(t)for(var d=0;d<t.typeParameters.nonSeparatorCount();d++)this.resolveTypeParameterDeclaration(t.typeParameters.nonSeparatorAt(d),u);this.resolveAnyFunctionExpressionParameters(e,t,n,r,o,u),u.pushNewContextualType(null);if(i)this.resolveAST(i,!1,u);else{var v=this.resolveReturnExpression(s,f,u);this.typeCheckReturnExpression(s,v,f,u)}u.popAnyContextualType(),this.checkThatNonVoidFunctionHasReturnExpressionOrThrowStatement(f,r,p,i,u),this.validateVariableDeclarationGroups(f,u),this.typeCheckCallBacks.push(function(t){a.typeCheckFunctionOverloads(e,t)})},t.prototype.resolveThisExpression=function(e,t){var n=this.getEnclosingDeclForAST(e),r=this.getContextualClassSymbolForEnclosingDecl(e,n)||this.semanticInfoChain.anyTypeSymbol;return this.canTypeCheckAST(e,t)&&this.typeCheckThisExpression(e,t,n),r},t.prototype.inTypeArgumentList=function(e){var t=null,n=e;while(n){switch(n.kind()){case 126:var r=n;if(r.typeArgumentList===t)return!0;break;case 226:var i=n;return i.typeArgumentList===t}t=n,n=n.parent}return!1},t.prototype.inClassExtendsHeritageClause=function(e){while(e){switch(e.kind()){case 230:var t=e;return t.parent.parent.kind()===131;case 137:case 131:case 130:return!1}e=e.parent}return!1},t.prototype.inTypeQuery=function(e){while(e){switch(e.kind()){case 127:return!0;case 129:case 213:case 137:case 131:case 130:return!1}e=e.parent}return!1},t.prototype.inArgumentListOfSuperInvocation=function(e){var t=null,n=e;while(n){switch(n.kind()){case 213:var r=n;if(t===r.argumentList&&r.expression.kind()===50)return!0;break;case 137:case 131:case 130:return!1}t=n,n=n.parent}return!1},t.prototype.inConstructorParameterList=function(e){var t=null,n=e;while(n){switch(n.kind()){case 142:var r=n;if(t===r.parameterList&&r.parent.kind()===137)return!0;case 131:case 130:return!1}t=n,n=n.parent}return!1},t.prototype.isFunctionAccessorOrNonArrowFunctionExpression=function(e){return e.kind===262144||e.kind===524288?!0:this.isFunctionOrNonArrowFunctionExpression(e)},t.prototype.isFunctionOrNonArrowFunctionExpression=function(t){return t.kind===16384?!0:t.kind===131072&&!e.hasFlag(t.flags,8192)?!0:!1},t.prototype.typeCheckThisExpression=function(t,n,r){this.checkForThisCaptureInArrowFunction(t);if(this.inConstructorParameterList(t)){n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.this_cannot_be_referenced_in_constructor_arguments));return}for(var i=r;i!==null;i=i.getParentDecl()){if(this.isFunctionAccessorOrNonArrowFunctionExpression(i))return;if(i.kind===4||i.kind===32){if(i.getParentDecl()===null)return;n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.this_cannot_be_referenced_within_module_bodies));return}if(i.kind===64){n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.this_cannot_be_referenced_in_current_location));return}if(i.kind===32768){this.inArgumentListOfSuperInvocation(t)&&this.superCallMustBeFirstStatementInConstructor(i)&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.this_cannot_be_referenced_in_current_location));return}if(i.kind===8){this.inStaticMemberVariableDeclaration(t)&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.this_cannot_be_referenced_in_static_initializers_in_a_class_body));return}}},t.prototype.getContextualClassSymbolForEnclosingDecl=function(t,n){var r=n.getParentPath();if(r.length){var i=!1;for(var s=r.length-1;s>=0;s--){var o=r[s],u=o.kind,a=o.flags;if(a&16)i=!0;else{if(u===131072&&!e.hasFlag(a,8192))return null;if(u===16384)return null;if(u===8){if(this.inStaticMemberVariableDeclaration(t))return this.getNewErrorTypeSymbol();var f=o.getSymbol();if(i){var l=f.getConstructorMethod();return l.type}return f}}}}return null},t.prototype.inStaticMemberVariableDeclaration=function(t){while(t){if(t.kind()===136&&e.hasModifier(t.modifiers,16))return!0;t=t.parent}return!1},t.prototype.resolveSuperExpression=function(e,t){var n=this.getEnclosingDeclForAST(e),r=this.semanticInfoChain.anyTypeSymbol,i=this.getContextualClassSymbolForEnclosingDecl(e,n);if(i){this.resolveDeclaredSymbol(i,t);var s=i.getExtendedTypes();s.length&&(r=s[0])}return this.canTypeCheckAST(e,t)&&this.typeCheckSuperExpression(e,t,n),r},t.prototype.typeCheckSuperExpression=function(t,n,r){this.setTypeChecked(t,n),this.checkForThisCaptureInArrowFunction(t);var i=t.parent.kind()===213,s=t.parent.kind()===212;e.Debug.assert(i||s);if(s){for(var o=r;o!==null;o=o.getParentDecl()){if(this.isFunctionOrNonArrowFunctionExpression(o))break;if(o.kind===8){if(!this.enclosingClassIsDerived(o)){n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.super_cannot_be_referenced_in_non_derived_classes));return}if(this.inConstructorParameterList(t)){n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.super_cannot_be_referenced_in_constructor_arguments));return}if(this.inStaticMemberVariableDeclaration(t))break;return}}n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class));return}if(r.kind===32768){var u=r.getParentDecl();if(!this.enclosingClassIsDerived(u)){n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.super_cannot_be_referenced_in_non_derived_classes));return}if(this.inConstructorParameterList(t)){n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.super_cannot_be_referenced_in_constructor_arguments));return}}else n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors))},t.prototype.resolveSimplePropertyAssignment=function(e,t,n){return this.resolveAST(e.expression,t,n)},t.prototype.resolveFunctionPropertyAssignment=function(t,n,r){return this.resolveAnyFunctionExpression(t,t.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),e.ASTHelpers.getType(t),t.block,null,n,r)},t.prototype.typeCheckFunctionPropertyAssignment=function(t,n,r){this.typeCheckAnyFunctionExpression(t,t.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(t.callSignature.parameterList),e.ASTHelpers.getType(t),t.block,null,n,r)},t.prototype.resolveObjectLiteralExpression=function(e,t,n,r){var i=this.getSymbolForAST(e,n),s=i&&i.isResolved;if(!s||r||this.canTypeCheckAST(e,n))this.canTypeCheckAST(e,n)&&this.setTypeChecked(e,n),i=this.computeObjectLiteralExpression(e,t,n,r),this.setSymbolForAST(e,i,n);return i},t.prototype.bindObjectLiteralMembers=function(t,n,r,i,s){var o=[],u;for(var a=0,f=r.nonSeparatorCount();a<f;a++){var l=r.nonSeparatorAt(a),h=this.getPropertyAssignmentName(l),p=c(h),d=l.kind()===139||l.kind()===140,v=this.semanticInfoChain.getDeclForAST(l);e.Debug.assert(v),l.kind()===240?i?u=v.getSymbol():(u=new e.PullSymbol(p.memberName,4096),u.addDeclaration(v),v.setSymbol(u)):l.kind()===241?u=v.getSymbol():(e.Debug.assert(d),u=v.getSymbol());if(!i&&!d){var m=n.findMember(u.name,!0);m&&s.postDiagnostic(this.semanticInfoChain.duplicateIdentifierDiagnosticFromAST(l,p.actualText,m.getDeclarations()[0].ast())),n.addMember(u)}o.push(u)}return o},t.prototype.resolveObjectLiteralMembers=function(t,n,r,i,s,o,u,a,f,l,c,h){for(var p=0,d=i.nonSeparatorCount();p<d;p++){var v=i.nonSeparatorAt(p),m=!1,g=null,y=this.getPropertyAssignmentName(v),b=f[p],w=null;r&&(g=this.getNamedPropertySymbol(b.name,68147712,r),g||(o&&e.PullHelpers.isNameNumeric(b.name)?g=o:s&&(g=s)),g&&(this.resolveDeclaredSymbol(g,c),w=g.kind===4194304?g.returnType:g.type,c.propagateContextualType(w),m=!0,h&&(h.membersContextTypeSymbols[p]=w)));var E=this.resolveAST(v,w!==null,c).type;E&&(E.isGeneric()&&n.setHasGenericMember(),s&&u.push(E),o&&e.PullHelpers.isNameNumeric(b.name)&&a.push(E)),m&&c.popAnyContextualType();var S=v.kind()===140||v.kind()===139;b.isResolved||(S?this.setSymbolForAST(y,E,c):(c.setTypeInContext(b,E),b.setResolved(),this.setSymbolForAST(y,b,c)))}},t.prototype.computeObjectLiteralExpression=function(t,n,r,i){var s=this.semanticInfoChain.getDeclForAST(t);e.Debug.assert(s);var o=this.getSymbolForAST(t,r),u=!!o;o||(o=new e.PullTypeSymbol("",256),o.addDeclaration(s),this.setSymbolForAST(t,o,r),s.setSymbol(o));var a=t.propertyAssignments,f=null;n&&(f=r.getContextualType(),this.resolveDeclaredSymbol(f,r));var l=null,c=null,h=null,p=null;if(f){var d=this.getBothKindsOfIndexSignaturesExcludingAugmentedType(f,r);l=d.stringSignature,c=d.numericSignature;var v=r.isInferentiallyTyping();l&&(h=v?[]:[l.returnType]),c&&(p=v?[]:[c.returnType])}if(a){i&&(i.membersContextTypeSymbols=[]);var m=this.bindObjectLiteralMembers(s,o,a,u,r);this.resolveObjectLiteralMembers(s,o,f,a,l,c,h,p,m,u,r,i),u||(this.stampObjectLiteralWithIndexSignature(o,h,l,r),this.stampObjectLiteralWithIndexSignature(o,p,c,r))}return o.setResolved(),o},t.prototype.getPropertyAssignmentName=function(t){if(t.kind()===240)return t.propertyName;if(t.kind()===241)return t.propertyName;if(t.kind()===139)return t.propertyName;if(t.kind()===140)return t.propertyName;e.Debug.assert(!1)},t.prototype.stampObjectLiteralWithIndexSignature=function(e,t,n,r){if(n){var i={getLength:function(){return t.length},getTypeAtIndex:function(e){return t[e]}},s=e.getDeclarations()[0],o=this.findBestCommonType(i,r).widenedType(this,null,r);o===n.returnType?e.addIndexSignature(n):this.semanticInfoChain.addSyntheticIndexSignature(s,e,this.getASTForDecl(s),n.parameters[0].name,n.parameters[0].type,o)}},t.prototype.resolveArrayLiteralExpression=function(e,t,n){var r=this.getSymbolForAST(e,n);if(!r||this.canTypeCheckAST(e,n))this.canTypeCheckAST(e,n)&&this.setTypeChecked(e,n),r=this.computeArrayLiteralExpressionSymbol(e,t,n),this.setSymbolForAST(e,r,n);return r},t.prototype.computeArrayLiteralExpressionSymbol=function(e,t,n){var r=e.expressions,i=null,s=[],o=new l,u=null;o.onlyCaptureFirstError=!0;if(t){var a=n.getContextualType();this.resolveDeclaredSymbol(a,n);if(a){var f=this.getBothKindsOfIndexSignaturesExcludingAugmentedType(a,n);f.numericSignature&&(u=f.numericSignature.returnType)}}if(r){u&&n.propagateContextualType(u);for(var c=0,h=r.nonSeparatorCount();c<h;c++)s.push(this.resolveAST(r.nonSeparatorAt(c),u!==null,n).type);u&&n.popAnyContextualType()}s.length&&(i=s[0]);var p;return u&&!n.isInferentiallyTyping()?(i||(i=u),p={getLength:function(){return r.nonSeparatorCount()+1},getTypeAtIndex:function(e){return e===0?u:s[e-1]}}):p={getLength:function(){return r.nonSeparatorCount()},getTypeAtIndex:function(e){return s[e]}},i=i?this.findBestCommonType(p,n,o):i,i||(i=this.semanticInfoChain.undefinedTypeSymbol),this.getArrayType(i)},t.prototype.resolveElementAccessExpression=function(e,t){var n=this.computeElementAccessExpressionSymbolAndDiagnostic(e,t);return this.canTypeCheckAST(e,t)&&this.typeCheckElementAccessExpression(e,t,n),n.symbol},t.prototype.typeCheckElementAccessExpression=function(e,t,n){this.setTypeChecked(e,t),t.postDiagnostic(n.diagnostic)},t.prototype.computeElementAccessExpressionSymbolAndDiagnostic=function(t,n){var r=this.resolveAST(t.expression,!1,n),i=this.resolveAST(t.argumentExpression,!1,n).type,s=r.type;s=this.getApparentType(s);if(this.isAnyOrEquivalent(s))return{symbol:s};var o=s.getElementType(),u=i===this.semanticInfoChain.numberTypeSymbol||e.PullHelpers.symbolIsEnum(i);if(o&&u)return{symbol:o};if(t.argumentExpression.kind()===14||t.argumentExpression.kind()===13){var a=t.argumentExpression.kind()===14?e.stripStartAndEndQuotes(t.argumentExpression.text()):t.argumentExpression.valueText(),f=this._getNamedPropertySymbolOfAugmentedType(a,s);if(f)return this.resolveDeclaredSymbol(f,n),{symbol:f.type}}var l=this.getBothKindsOfIndexSignaturesIncludingAugmentedType(s,n),c=l.stringSignature,h=l.numericSignature;return h&&(u||i===this.semanticInfoChain.anyTypeSymbol)?{symbol:h.returnType||this.semanticInfoChain.anyTypeSymbol}:c&&(u||i===this.semanticInfoChain.anyTypeSymbol||i===this.semanticInfoChain.stringTypeSymbol)?{symbol:c.returnType||this.semanticInfoChain.anyTypeSymbol}:u||i===this.semanticInfoChain.anyTypeSymbol||i===this.semanticInfoChain.stringTypeSymbol?(this.compilationSettings.noImplicitAny()&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.argumentExpression,e.DiagnosticCode.Index_signature_of_object_type_implicitly_has_an_any_type)),{symbol:this.semanticInfoChain.anyTypeSymbol}):{symbol:this.getNewErrorTypeSymbol(),diagnostic:this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Value_of_type_0_is_not_indexable_by_type_1,[s.toString(),i.toString()])}},t.prototype.getBothKindsOfIndexSignaturesIncludingAugmentedType=function(e,t){return this._getBothKindsOfIndexSignatures(e,t,!0)},t.prototype.getBothKindsOfIndexSignaturesExcludingAugmentedType=function(e,t){return this._getBothKindsOfIndexSignatures(e,t,!1)},t.prototype._getBothKindsOfIndexSignatures=function(e,t,n){var r=n?e.getIndexSignaturesOfAugmentedType(this,this.cachedFunctionInterfaceType(),this.cachedObjectInterfaceType()):e.getIndexSignatures(),i=null,s=null,o=null,u,a;for(var f=0;f<r.length;f++){if(i&&s)break;o=r[f],o.isResolved||this.resolveDeclaredSymbol(o,t),u=o.parameters;if(u.length){a=u[0].type;if(!i&&a===this.semanticInfoChain.stringTypeSymbol){i=o;continue}if(!s&&a===this.semanticInfoChain.numberTypeSymbol){s=o;continue}}}return{numericSignature:s,stringSignature:i}},t.prototype._addUnhiddenSignaturesFromBaseType=function(t,n,r){var i=this;if(!t){r.push.apply(r,n);return}var s=new e.PullTypeResolutionContext(this);for(var o=0;o<n.length;o++){var u=n[o],a=e.ArrayUtilities.any(t,function(e){return i.signaturesAreIdenticalWithNewEnclosingTypes(u,e,s,!1)});a||r.push(u)}},t.prototype.resolveBinaryAdditionOperation=function(t,n){var r=this.resolveAST(t.left,!1,n),i=r.type,s=this.resolveAST(t.right,!1,n).type;e.PullHelpers.symbolIsEnum(i)&&(i=this.semanticInfoChain.numberTypeSymbol),e.PullHelpers.symbolIsEnum(s)&&(s=this.semanticInfoChain.numberTypeSymbol);var o=i===this.semanticInfoChain.nullTypeSymbol||i===this.semanticInfoChain.undefinedTypeSymbol,u=s===this.semanticInfoChain.nullTypeSymbol||s===this.semanticInfoChain.undefinedTypeSymbol;o?u?i=s=this.semanticInfoChain.anyTypeSymbol:i=s:u&&(s=i);var a=null;return i===this.semanticInfoChain.stringTypeSymbol||s===this.semanticInfoChain.stringTypeSymbol?a=this.semanticInfoChain.stringTypeSymbol:this.isAnyOrEquivalent(i)||this.isAnyOrEquivalent(s)?a=this.semanticInfoChain.anyTypeSymbol:i===this.semanticInfoChain.numberTypeSymbol?s===this.semanticInfoChain.numberTypeSymbol?a=this.semanticInfoChain.numberTypeSymbol:a=s:s===this.semanticInfoChain.numberTypeSymbol?a=i:a=i,this.canTypeCheckAST(t,n)&&(this.setTypeChecked(t,n),a?t.kind()===175&&(this.isReference(t.left,r)||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.Invalid_left_hand_side_of_assignment_expression)),this.checkAssignability(t.left,a,i,n)):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.Invalid_expression_types_not_known_to_support_the_addition_operator))),a||(a=this.semanticInfoChain.anyTypeSymbol),a},t.prototype.bestCommonTypeOfTwoTypes=function(e,t,n){return this.findBestCommonType({getLength:function(){return 2},getTypeAtIndex:function(n){switch(n){case 0:return e;case 1:return t}}},n)},t.prototype.bestCommonTypeOfThreeTypes=function(e,t,n,r){return this.findBestCommonType({getLength:function(){return 3},getTypeAtIndex:function(r){switch(r){case 0:return e;case 1:return t;case 2:return n}}},r)},t.prototype.resolveLogicalOrExpression=function(e,t,n){this.canTypeCheckAST(e,n)&&this.setTypeChecked(e,n);if(t){var r=n.getContextualType(),i=this.resolveAST(e.left,t,n).type,s=this.resolveAST(e.right,t,n).type;return n.isInferentiallyTyping()?this.bestCommonTypeOfTwoTypes(i,s,n):this.bestCommonTypeOfThreeTypes(r,i,s,n)}var i=this.resolveAST(e.left,!1,n).type;n.pushNewContextualType(i);var s=this.resolveAST(e.right,!0,n).type;return n.popAnyContextualType(),this.bestCommonTypeOfTwoTypes(i,s,n)},t.prototype.resolveLogicalAndExpression=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.left,!1,t)),this.resolveAST(e.right,!1,t).type},t.prototype.computeTypeOfConditionalExpression=function(e,t,n,r){if(n&&!r.isInferentiallyTyping()){var i=r.getContextualType();return this.bestCommonTypeOfThreeTypes(i,e,t,r)}return this.bestCommonTypeOfTwoTypes(e,t,r)},t.prototype.resolveConditionalExpression=function(t,n,r){var i=this.resolveAST(t.whenTrue,n,r).type,s=this.resolveAST(t.whenFalse,n,r).type,o=this.computeTypeOfConditionalExpression(i,s,n,r),u=this.conditionExpressionTypesAreValid(i,s,o,n,r);if(this.canTypeCheckAST(t,r)){this.setTypeChecked(t,r),this.resolveAST(t.condition,!1,r);if(!this.conditionExpressionTypesAreValid(i,s,o,n,r))if(n){var a=r.getContextualType();r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Type_of_conditional_0_must_be_identical_to_1_2_or_3,[o.toString(),i.toString(),s.toString(),a.toString()]))}else r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Type_of_conditional_0_must_be_identical_to_1_or_2,[o.toString(),i.toString(),s.toString()]))}return u?o:this.getNewErrorTypeSymbol()},t.prototype.conditionExpressionTypesAreValid=function(e,t,n,r,i){if(r){var s=i.getContextualType();if(this.typesAreIdentical(n,e,i)||this.typesAreIdentical(n,t,i)||this.typesAreIdentical(n,s,i))return!0}else if(this.typesAreIdentical(n,e,i)||this.typesAreIdentical(n,t,i))return!0;return!1},t.prototype.resolveParenthesizedExpression=function(e,t){return this.canTypeCheckAST(e,t)&&this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t)},t.prototype.resolveExpressionStatement=function(e,t){return this.canTypeCheckAST(e,t)&&(this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t)),this.semanticInfoChain.voidTypeSymbol},t.prototype.resolveInvocationExpression=function(e,t,r){var i=this.getSymbolForAST(e,t);if(!i||!i.isResolved)r||(r=new n),i=this.computeInvocationExpressionSymbol(e,t,r),this.canTypeCheckAST(e,t)&&this.setTypeChecked(e,t),i!==this.semanticInfoChain.anyTypeSymbol&&this.setSymbolForAST(e,i,t),this.semanticInfoChain.setCallResolutionDataForAST(e,r);else{this.canTypeCheckAST(e,t)&&this.typeCheckInvocationExpression(e,t);var s=this.semanticInfoChain.getCallResolutionDataForAST(e);r&&s!==r&&(r.actualParametersContextTypeSymbols=s.actualParametersContextTypeSymbols,r.candidateSignature=s.candidateSignature,r.resolvedSignatures=s.resolvedSignatures,r.targetSymbol=s.targetSymbol)}return i},t.prototype.typeCheckInvocationExpression=function(e,t){this.setTypeChecked(e,t);var n=this.resolveAST(e.expression,!1,t);if(e.argumentList.arguments){var r=this.semanticInfoChain.getCallResolutionDataForAST(e),i=e.argumentList.arguments.nonSeparatorCount();for(var s=0;s<i;s++){var o=r.actualParametersContextTypeSymbols?r.actualParametersContextTypeSymbols[s]:null;o&&t.pushNewContextualType(o),this.resolveAST(e.argumentList.arguments.nonSeparatorAt(s),o!==null,t),o&&(t.popAnyContextualType(),o=null)}}for(var s=0;s<r.diagnosticsFromOverloadResolution.length;s++)t.postDiagnostic(r.diagnosticsFromOverloadResolution[s])},t.prototype.computeInvocationExpressionSymbol=function(t,n,r){var i=this.resolveAST(t.expression,!1,n),s=this.getCallTargetErrorSpanAST(t),o=i.type;if(this.isAnyOrEquivalent(o))return this.resolveAST(t.argumentList.arguments,!1,n),t.argumentList.typeArgumentList&&t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount()&&o===this.semanticInfoChain.anyTypeSymbol?(this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Untyped_function_calls_may_not_accept_type_arguments),r,n),this.getNewErrorTypeSymbol()):this.semanticInfoChain.anyTypeSymbol;var u=!1;if(t.expression.kind()===50){u=!0;if(!o.isClass())return this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Calls_to_super_are_only_valid_inside_a_class),r,n),this.resolveAST(t.argumentList.arguments,!1,n),this.getNewErrorTypeSymbol();i=o.getConstructorMethod(),this.resolveDeclaredSymbol(i,n),o=i.type}var a=u?o.getConstructSignatures():o.getCallSignatures();!a.length&&o.kind===33554432&&this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Value_of_type_0_is_not_callable_Did_you_mean_to_include_new,[o.toString()]),r,n);var f=null,c=!1,h,p=null,d=null,v=[];if(t.argumentList.typeArgumentList){f=[];if(t.argumentList.typeArgumentList&&t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount())for(var m=0;m<t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount();m++)f[m]=this.resolveTypeReference(t.argumentList.typeArgumentList.typeArguments.nonSeparatorAt(m),n)}var g=!1,y=[],b,w,E,S=null,x=a,T=o.getTypeParameterArgumentMap();for(var m=0;m<a.length;m++){E=a[m].getTypeParameters(),h=!1;if(a[m].isGeneric()&&E.length){u&&o.isGeneric()&&!t.argumentList.typeArgumentList&&(f=a[m].returnType.getTypeArguments());if(f){if(f.length!==E.length){d=d||this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Signature_expected_0_type_arguments_got_1_instead,[E.length,f.length]);continue}b=f}else{e.Debug.assert(t.argumentList);var N=new e.InvocationTypeArgumentInferenceContext(this,n,a[m],t.argumentList.arguments);b=this.inferArgumentTypesForSignature(N,new l,n),g=!0}e.Debug.assert(b&&b.length==E.length);var C=new e.PullInstantiationHelpers.MutableTypeArgumentMap(T?T:[]);e.PullInstantiationHelpers.updateMutableTypeParameterArgumentMap(E,b,C);var k=C.typeParameterArgumentMap;if(f)for(var L=0;L<E.length;L++){S=E[L].getConstraint();if(S){S.isGeneric()&&(S=this.instantiateType(S,k));if(!this.sourceIsAssignableToTarget(b[L],S,s,n,null,!0)){var A=this.getEnclosingSymbolForAST(s);p=this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Type_0_does_not_satisfy_the_constraint_1_for_type_parameter_2,[b[L].toString(A,!0),S.toString(A,!0),E[L].toString(A,!0)]),h=!0}if(h)break}}if(h)continue;w=this.instantiateSignature(a[m],k),w&&(y[y.length]=w)}else if(!t.argumentList.typeArgumentList||!t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount())y[y.length]=a[m]}a.length&&!y.length&&(c=!0),a=y;var O=null;if(!a.length){r.targetSymbol=i,r.resolvedSignatures=x,r.candidateSignature=x&&x.length?x[0]:null,r.actualParametersContextTypeSymbols=H,this.resolveAST(t.argumentList.arguments,!1,n);if(!c){if(this.cachedFunctionInterfaceType()&&this.sourceIsAssignableToTarget(o,this.cachedFunctionInterfaceType(),s,n))return t.argumentList.typeArgumentList&&this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Non_generic_functions_may_not_accept_type_arguments),r,n),this.semanticInfoChain.anyTypeSymbol;this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature),r,n)}else p?this.postOverloadResolutionDiagnostics(p,r,n):d?this.postOverloadResolutionDiagnostics(d,r,n):this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Could_not_select_overload_for_call_expression),r,n);return this.getNewErrorTypeSymbol()}var M=this.resolveOverloads(t,a,t.argumentList.typeArgumentList!==null,n,v),_=M==null;if(!M){for(var m=0;m<v.length;m++)this.postOverloadResolutionDiagnostics(v[m],r,n);this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Could_not_select_overload_for_call_expression),r,n),O=this.getNewErrorTypeSymbol();if(!a.length)return O;M=a[0]}var D=M.getRootSymbol();!D.isGeneric()&&t.argumentList.typeArgumentList?this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Non_generic_functions_may_not_accept_type_arguments),r,n):D.isGeneric()&&t.argumentList.typeArgumentList&&D.getTypeParameters()&&t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount()!==D.getTypeParameters().length&&this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Signature_expected_0_type_arguments_got_1_instead,[D.getTypeParameters().length,t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount()]),r,n);var P=u?this.semanticInfoChain.voidTypeSymbol:M.returnType,H=[];if(t.argumentList.arguments){var B=t.argumentList.arguments.nonSeparatorCount(),j=M.parameters,F=null,I=M.getDeclarations()[0];for(var m=0;m<B;m++)j.length&&(m<j.length-1||m<j.length&&!M.hasVarArgs?(this.resolveDeclaredSymbol(j[m],n),F=j[m].type):M.hasVarArgs&&(F=j[j.length-1].type,F.isArrayNamedTypeReference()&&(F=F.getElementType()))),F&&(n.pushNewContextualType(F),H[m]=F),this.resolveAST(t.argumentList.arguments.nonSeparatorAt(m),F!==null,n),F&&(n.popAnyContextualType(),F=null)}return r.targetSymbol=i,_&&x?(r.resolvedSignatures=x,r.candidateSignature=x[0]):(r.resolvedSignatures=a,r.candidateSignature=M),r.actualParametersContextTypeSymbols=H,O?O:(P||(P=this.semanticInfoChain.anyTypeSymbol),P)},t.prototype.resolveObjectCreationExpression=function(e,t,r){var i=this.getSymbolForAST(e,t);if(!i||!i.isResolved)r||(r=new n),i=this.computeObjectCreationExpressionSymbol(e,t,r),this.canTypeCheckAST(e,t)&&this.setTypeChecked(e,t),this.setSymbolForAST(e,i,t),this.semanticInfoChain.setCallResolutionDataForAST(e,r);else{this.canTypeCheckAST(e,t)&&this.typeCheckObjectCreationExpression(e,t);var s=this.semanticInfoChain.getCallResolutionDataForAST(e);r&&s!==r&&(r.actualParametersContextTypeSymbols=s.actualParametersContextTypeSymbols,r.candidateSignature=s.candidateSignature,r.resolvedSignatures=s.resolvedSignatures,r.targetSymbol=s.targetSymbol)}return i},t.prototype.typeCheckObjectCreationExpression=function(e,t){this.setTypeChecked(e,t),this.resolveAST(e.expression,!1,t);var n=this.semanticInfoChain.getCallResolutionDataForAST(e);if(e.argumentList){var n=this.semanticInfoChain.getCallResolutionDataForAST(e),r=e.argumentList.arguments.nonSeparatorCount();for(var i=0;i<r;i++){var s=n.actualParametersContextTypeSymbols?n.actualParametersContextTypeSymbols[i]:null;s&&t.pushNewContextualType(s),this.resolveAST(e.argumentList.arguments.nonSeparatorAt(i),s!==null,t),s&&(t.popAnyContextualType(),s=null)}}for(var i=0;i<n.diagnosticsFromOverloadResolution.length;i++)t.postDiagnostic(n.diagnosticsFromOverloadResolution[i])},t.prototype.postOverloadResolutionDiagnostics=function(e,t,n){n.inProvisionalResolution()||t.diagnosticsFromOverloadResolution.push(e),n.postDiagnostic(e)},t.prototype.computeObjectCreationExpressionSymbol=function(t,n,r){var i=this,s=null,o=this.resolveAST(t.expression,!1,n),u=o.isType()?o:o.type,a=this.getCallTargetErrorSpanAST(t),f=u.getConstructSignatures(),c=null,h=!1,p,d=null,v=null,m=[];if(this.isAnyOrEquivalent(u))return t.argumentList&&this.resolveAST(t.argumentList.arguments,!1,n),u;f.length||(f=u.getCallSignatures(),h=!0,this.compilationSettings.noImplicitAny()&&this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.new_expression_which_lacks_a_constructor_signature_implicitly_has_an_any_type),r,n));if(f.length){if(t.argumentList&&t.argumentList.typeArgumentList){c=[];if(t.argumentList.typeArgumentList&&t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount())for(var g=0;g<t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount();g++)c[g]=this.resolveTypeReference(t.argumentList.typeArgumentList.typeArguments.nonSeparatorAt(g),n)}if(u.isGeneric()){var y=[],b,w,E,S=null,x,T=u.getTypeParameterArgumentMap();for(var g=0;g<f.length;g++){p=!1;if(f[g].isGeneric()){E=f[g].getTypeParameters();if(c){if(c.length!==E.length){v=v||this.semanticInfoChain.diagnosticFromAST(a,e.DiagnosticCode.Signature_expected_0_type_arguments_got_1_instead,[E.length,c.length]);continue}b=c}else if(t.argumentList){var N=new e.InvocationTypeArgumentInferenceContext(this,n,f[g],t.argumentList.arguments);b=this.inferArgumentTypesForSignature(N,new l,n),x=!0}else b=e.ArrayUtilities.select(E,function(e){return e.getDefaultConstraint(i.semanticInfoChain)});e.Debug.assert(b&&b.length==E.length);var C=new e.PullInstantiationHelpers.MutableTypeArgumentMap(T?T:[]);e.PullInstantiationHelpers.updateMutableTypeParameterArgumentMap(E,b,C);var k=C.typeParameterArgumentMap;if(c)for(var L=0;L<E.length;L++){S=E[L].getConstraint();if(S){S.isGeneric()&&(S=this.instantiateType(S,k));if(!this.sourceIsAssignableToTarget(b[L],S,a,n,null,!0)){var A=this.getEnclosingSymbolForAST(a);d=this.semanticInfoChain.diagnosticFromAST(a,e.DiagnosticCode.Type_0_does_not_satisfy_the_constraint_1_for_type_parameter_2,[b[L].toString(A,!0),S.toString(A,!0),E[L].toString(A,!0)]),p=!0}if(p)break}}if(p)continue;w=this.instantiateSignature(f[g],k),w&&(y[y.length]=w)}else t.argumentList&&t.argumentList.typeArgumentList&&t.argumentList.typeArgumentList.typeArguments.nonSeparatorCount()||(y[y.length]=f[g])}f=y}var O=this.resolveOverloads(t,f,t.argumentList&&t.argumentList.typeArgumentList!==null,n,m);r.targetSymbol=o,r.resolvedSignatures=f,r.candidateSignature=O,r.actualParametersContextTypeSymbols=[];if(!f.length)return d?this.postOverloadResolutionDiagnostics(d,r,n):v&&this.postOverloadResolutionDiagnostics(v,r,n),this.getNewErrorTypeSymbol();var M=null;if(!O){for(var g=0;g<m.length;g++)this.postOverloadResolutionDiagnostics(m[g],r,n);this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(a,e.DiagnosticCode.Could_not_select_overload_for_new_expression),r,n),M=this.getNewErrorTypeSymbol();if(!f.length)return M;O=f[0]}s=O.returnType,s&&!O.isGeneric()&&s.isGeneric()&&!s.getIsSpecialized()&&(c&&c.length?s=this.createInstantiatedType(s,c):s=this.instantiateTypeToAny(s,n));if(h){if(s!==this.semanticInfoChain.voidTypeSymbol)return this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(a,e.DiagnosticCode.Call_signatures_used_in_a_new_expression_must_have_a_void_return_type),r,n),this.getNewErrorTypeSymbol();s=this.semanticInfoChain.anyTypeSymbol}s||(s=O.returnType,s||(s=u));var _=[];if(t.argumentList&&t.argumentList.arguments){var D=t.argumentList.arguments.nonSeparatorCount(),P=O.parameters,H=null,B=O.getDeclarations()[0];for(var g=0;g<D;g++)P.length&&(g<P.length-1||g<P.length&&!O.hasVarArgs?(this.resolveDeclaredSymbol(P[g],n),H=P[g].type):O.hasVarArgs&&(H=P[P.length-1].type,H.isArrayNamedTypeReference()&&(H=H.getElementType()))),H&&(n.pushNewContextualType(H),_[g]=H),this.resolveAST(t.argumentList.arguments.nonSeparatorAt(g),H!==null,n),H&&(n.popAnyContextualType(),H=null)}return r.targetSymbol=o,r.resolvedSignatures=f,r.candidateSignature=O,r.actualParametersContextTypeSymbols=_,M?M:(s||(s=this.semanticInfoChain.anyTypeSymbol),s)}return t.argumentList&&this.resolveAST(t.argumentList.arguments,!1,n),this.postOverloadResolutionDiagnostics(this.semanticInfoChain.diagnosticFromAST(a,e.DiagnosticCode.Invalid_new_expression),r,n),this.getNewErrorTypeSymbol()},t.prototype.instantiateSignatureInContext=function(t,n,r,i){var s=[],o,u,a=t.getTypeParameters(),f=null,c=new e.ContextualSignatureInstantiationTypeArgumentInferenceContext(this,r,t,n,i);o=this.inferArgumentTypesForSignature(c,new l,r);var h=t.functionType,p=n.functionType,d;if(h){d=h.getTypeParameterArgumentMap();for(var v in d)s[v]=d[v]}if(p){d=p.getTypeParameterArgumentMap();for(var v in d)s[v]=d[v]}return e.PullInstantiationHelpers.updateTypeParameterArgumentMap(a,o,s),this.instantiateSignature(t,s)},t.prototype.resolveCastExpression=function(e,t){var n=this.resolveTypeReference(e.type,t).type;return this.canTypeCheckAST(e,t)&&this.typeCheckCastExpression(e,t,n),n},t.prototype.typeCheckCastExpression=function(t,n,r){this.setTypeChecked(t,n),n.pushNewContextualType(r);var i=this.resolveAST(t.expression,!0,n).type;n.popAnyContextualType(),this.resolveDeclaredSymbol(r,n),this.resolveDeclaredSymbol(i,n);var s=new l,o=this.sourceIsAssignableToTarget(i,r,t,n,s);if(!o){var u=i.widenedType(this,t.expression,n);o=this.sourceIsAssignableToTarget(r,u,t,n,s)}if(!o){var a=this.getEnclosingSymbolForAST(t);s.message?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1_NL_2,[i.toString(a),r.toString(a),s.message])):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1,[i.toString(a),r.toString(a)]))}},t.prototype.resolveAssignmentExpression=function(t,n){var r=this.resolveAST(t.left,!1,n),i=r.type;n.pushNewContextualType(i);var s=this.resolveAST(t.right,!0,n).type;return n.popAnyContextualType(),s=this.getInstanceTypeForAssignment(t.left,s,n),this.canTypeCheckAST(t,n)&&(this.setTypeChecked(t,n),this.isReference(t.left,r)?this.checkAssignability(t.left,s,r.type,n):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.left,e.DiagnosticCode.Invalid_left_hand_side_of_assignment_expression))),s},t.prototype.getInstanceTypeForAssignment=function(t,n,r){var i=n;i&&i.isAlias()&&(i=i.getExportAssignedTypeSymbol());if(i&&i.isContainer()&&!i.isEnum()){var s=i.getInstanceType();s?i=s:(r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Tried_to_set_variable_type_to_uninitialized_module_type_0,[n.toString()])),i=null)}return i},t.prototype.widenType=function(e,t,n){return e===this.semanticInfoChain.undefinedTypeSymbol||e===this.semanticInfoChain.nullTypeSymbol||e.isError()?this.semanticInfoChain.anyTypeSymbol:e.isArrayNamedTypeReference()?this.widenArrayType(e,t,n):e.kind===256?this.widenObjectLiteralType(e,t,n):e},t.prototype.widenArrayType=function(t,n,r){var i=t.getElementType().widenedType(this,n,r);return this.compilationSettings.noImplicitAny()&&n&&i===this.semanticInfoChain.anyTypeSymbol&&t.getElementType()!==this.semanticInfoChain.anyTypeSymbol&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode.Array_Literal_implicitly_has_an_any_type_from_widening)),this.getArrayType(i)},t.prototype.widenObjectLiteralType=function(t,n,r){if(!this.needsToWidenObjectLiteralType(t,n,r))return t;e.Debug.assert(t.name==="");var i=new e.PullTypeSymbol(t.name,t.kind),s=t.getDeclarations();e.Debug.assert(s.length===1),i.addDeclaration(s[0]);var o=t.getMembers();for(var u=0;u<o.length;u++){var a=o[u].type,f=o[u].type.widenedType(this,n,r),l=new e.PullSymbol(o[u].name,o[u].kind),c=o[u].getDeclarations();l.addDeclaration(c[0]),l.type=f,i.addMember(l),l.setResolved(),this.compilationSettings.noImplicitAny()&&n&&f===this.semanticInfoChain.anyTypeSymbol&&a!==this.semanticInfoChain.anyTypeSymbol&&r.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode.Object_literal_s_property_0_implicitly_has_an_any_type_from_widening,[o[u].name]))}var h=t.getIndexSignatures();for(var u=0;u<h.length;u++){var p=new e.PullSignatureSymbol(4194304),d=h[u].parameters[0],v=new e.PullSymbol(d.name,d.kind);v.type=d.type,p.addParameter(v),p.returnType=h[u].returnType,i.addIndexSignature(p)}return i},t.prototype.needsToWidenObjectLiteralType=function(e,t,n){var r=e.getMembers();for(var i=0;i<r.length;i++){var s=r[i].type;if(s!==s.widenedType(this,t,n))return!0}return!1},t.prototype.findBestCommonType=function(e,t,n){var r=e.getLength();for(var i=0;i<r;i++){var s=e.getTypeAtIndex(i);if(this.typeIsBestCommonTypeCandidate(s,e,t))return s}return this.semanticInfoChain.emptyTypeSymbol},t.prototype.typeIsBestCommonTypeCandidate=function(e,t,n){for(var r=0;r<t.getLength();r++){var i=t.getTypeAtIndex(r);if(e===i)continue;if(!this.sourceIsSubtypeOfTarget(i,e,null,n))return!1}return!0},t.prototype.typesAreIdenticalInEnclosingTypes=function(e,t,n){return e=this.getSymbolForRelationshipCheck(e),t=this.getSymbolForRelationshipCheck(t),e===t?!0:e&&t&&n.oneOfClassificationsIsInfinitelyExpanding()?this.infinitelyExpandingTypesAreIdentical(e,t,n):this.typesAreIdentical(e,t,n)},t.prototype.typesAreIdenticalWithNewEnclosingTypes=function(e,t,n){var r=n.resetEnclosingTypeWalkers(),i=this.typesAreIdentical(e,t,n);return n.setEnclosingTypeWalkers(r),i},t.prototype.typesAreIdentical=function(t,n,r){t=this.getSymbolForRelationshipCheck(t),n=this.getSymbolForRelationshipCheck(n);if(t===n)return!0;if(!t||!n)return!1;if(e.hasFlag(t.kind,64)||e.hasFlag(n.kind,64))return!1;if(t.isPrimitive()&&t.isStringConstant()&&n.isPrimitive()&&n.isStringConstant())return e.stripStartAndEndQuotes(t.name)===e.stripStartAndEndQuotes(n.name);if(t.isPrimitive()||n.isPrimitive())return!1;if(t.isError()&&n.isError())return!0;var i=this.identicalCache.valueAt(t.pullSymbolID,n.pullSymbolID);if(i!=undefined)return i;if(t.isTypeParameter()!==n.isTypeParameter())return!1;if(t.isTypeParameter()){var s=t.getDeclarations()[0].getParentDecl(),o=n.getDeclarations()[0].getParentDecl();return s===o?this.symbolsShareDeclaration(t,n):!1}if(t.isPrimitive()!==n.isPrimitive())return!1;this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,!0);var u=r.startWalkingTypes(t,n);return i=this.typesAreIdenticalWorker(t,n,r),r.endWalkingTypes(u),this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,i),i},t.prototype.typesAreIdenticalWorker=function(t,n,r){if(t.getIsSpecialized()&&n.getIsSpecialized()&&e.PullHelpers.getRootType(t)===e.PullHelpers.getRootType(n)&&e.PullHelpers.getRootType(t).isNamedTypeSymbol()){var i=t.getTypeArguments(),s=n.getTypeArguments();if(i&&s)for(var o=0;o<i.length;o++)if(!this.typesAreIdenticalWithNewEnclosingTypes(i[o],s[o],r))return!1;return!0}if(t.hasMembers()&&n.hasMembers()){var u=t.getAllMembers(68147712,0),a=n.getAllMembers(68147712,0);if(u.length!==a.length)return!1;var f=null,l=null,c=null,h=null;for(var p=0;p<u.length;p++){f=u[p],l=this.getNamedPropertySymbol(f.name,68147712,n);if(!this.propertiesAreIdentical(f,l,r))return!1}}else if(t.hasMembers()||n.hasMembers())return!1;var d=t.getCallSignatures(),v=n.getCallSignatures(),m=t.getConstructSignatures(),g=n.getConstructSignatures(),y=t.getIndexSignatures(),b=n.getIndexSignatures();return this.signatureGroupsAreIdentical(d,v,r)?this.signatureGroupsAreIdentical(m,g,r)?this.signatureGroupsAreIdentical(y,b,r)?!0:!1:!1:!1},t.prototype.propertiesAreIdentical=function(e,t,n){if(!t||e.isOptional!==t.isOptional)return!1;var r=e.anyDeclHasFlag(2),i=t.anyDeclHasFlag(2);if(r!==i)return!1;if(i&&r){var s=e.getDeclarations()[0],o=t.getDeclarations()[0];if(s!==o)return!1}var u=e.type,a=t.type;n.walkMemberTypes(e.name);var f=this.typesAreIdenticalInEnclosingTypes(u,a,n);return n.postWalkMemberTypes(),f},t.prototype.propertiesAreIdenticalWithNewEnclosingTypes=function(e,t,n,r,i){var s=i.resetEnclosingTypeWalkers();i.setEnclosingTypes(e,t);var o=this.propertiesAreIdentical(n,r,i);return i.setEnclosingTypeWalkers(s),o},t.prototype.signatureGroupsAreIdentical=function(e,t,n){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){n.walkSignatures(e[r].kind,r);var i=this.signaturesAreIdentical(e[r],t[r],n,!0);n.postWalkSignatures();if(!i)return!1}return!0},t.prototype.typeParametersAreIdentical=function(e,t,n){var r=this.typeParametersAreIdenticalWorker(e,t,n);return this.setTypeParameterIdentity(e,t,undefined),r},t.prototype.typeParametersAreIdenticalWorker=function(e,t,n){if(!!(e&&e.length)!=!!(t&&t.length))return!1;if(e&&t&&e.length!==t.length)return!1;if(e&&t)for(var r=0;r<e.length;r++){n.walkTypeParameterConstraints(r);var i=this.typesAreIdentical(e[r].getConstraint(),t[r].getConstraint(),n);n.postWalkTypeParameterConstraints();if(!i)return!1}return!0},t.prototype.setTypeParameterIdentity=function(e,t,n){if(e&&t&&e.length===t.length)for(var r=0;r<e.length;r++)this.identicalCache.setValueAt(e[r].pullSymbolID,t[r].pullSymbolID,n)},t.prototype.signaturesAreIdenticalWithNewEnclosingTypes=function(e,t,n,r){typeof r=="undefined"&&(r=!0);var i=n.resetEnclosingTypeWalkers();n.setEnclosingTypes(e,t);var s=this.signaturesAreIdentical(e,t,n,r);return n.setEnclosingTypeWalkers(i),s},t.prototype.signaturesAreIdentical=function(e,t,n,r){typeof r=="undefined"&&(r=!0);if(e===t)return!0;var i=this.identicalCache.valueAt(e.pullSymbolID,t.pullSymbolID);if(i||i!=undefined&&r)return i;var s=i;return this.identicalCache.setValueAt(e.pullSymbolID,t.pullSymbolID,!0),i=this.signaturesAreIdenticalWorker(e,t,n,r),r?this.identicalCache.setValueAt(e.pullSymbolID,t.pullSymbolID,i):this.identicalCache.setValueAt(e.pullSymbolID,t.pullSymbolID,s),i},t.prototype.signaturesAreIdenticalWorker=function(e,t,n,r){typeof r=="undefined"&&(r=!0);if(e.hasVarArgs!==t.hasVarArgs)return!1;if(e.nonOptionalParamCount!==t.nonOptionalParamCount)return!1;if(e.parameters.length!==t.parameters.length)return!1;var i=e.getTypeParameters(),s=t.getTypeParameters();this.setTypeParameterIdentity(i,s,!0);var o=this.signatureTypeParametersParametersAndReturnTypesAreIdentical(e,t,n,r);return this.setTypeParameterIdentity(i,s,undefined),o},t.prototype.signatureTypeParametersParametersAndReturnTypesAreIdentical=function(t,n,r,i){if(!this.typeParametersAreIdenticalWorker(t.getTypeParameters(),n.getTypeParameters(),r))return!1;if(i){e.PullHelpers.resolveDeclaredSymbolToUseType(t),e.PullHelpers.resolveDeclaredSymbolToUseType(n),r.walkReturnTypes();var s=this.typesAreIdenticalInEnclosingTypes(t.returnType,n.returnType,r);r.postWalkReturnTypes();if(!s)return!1}var o=t.parameters,u=n.parameters;for(var a=0;a<o.length;a++){e.PullHelpers.resolveDeclaredSymbolToUseType(o[a]),e.PullHelpers.resolveDeclaredSymbolToUseType(u[a]),r.walkParameterTypes(a);var f=this.typesAreIdenticalInEnclosingTypes(o[a].type,u[a].type,r);r.postWalkParameterTypes();if(!f)return!1}return!0},t.prototype.signatureReturnTypesAreIdentical=function(e,t,n){var r=e.getTypeParameters(),i=t.getTypeParameters();this.setTypeParameterIdentity(r,i,!0);var s=n.resetEnclosingTypeWalkers();n.setEnclosingTypes(e,t),n.walkReturnTypes();var o=this.typesAreIdenticalInEnclosingTypes(e.returnType,t.returnType,n);return n.setEnclosingTypeWalkers(s),this.setTypeParameterIdentity(r,i,undefined),o},t.prototype.symbolsShareDeclaration=function(e,t){var n=e.getDeclarations(),r=t.getDeclarations();return n.length&&r.length?n[0]===r[0]:!1},t.prototype.sourceIsSubtypeOfTarget=function(e,t,n,r,i,s){return this.sourceIsRelatableToTarget(e,t,!1,this.subtypeCache,n,r,i,s)},t.prototype.sourceMembersAreAssignableToTargetMembers=function(e,t,n,r,i,s){var o=r.resetEnclosingTypeWalkers();r.setEnclosingTypes(e,t);var u=this.sourceMembersAreRelatableToTargetMembers(e,t,!0,this.assignableCache,n,r,i,s);return r.setEnclosingTypeWalkers(o),u},t.prototype.sourcePropertyIsAssignableToTargetProperty=function(e,t,n,r,i,s,o,u){var a=s.resetEnclosingTypeWalkers();s.setEnclosingTypes(e,t);var f=this.sourcePropertyIsRelatableToTargetProperty(e,t,n,r,!0,this.assignableCache,i,s,o,u);return s.setEnclosingTypeWalkers(a),f},t.prototype.sourceCallSignaturesAreAssignableToTargetCallSignatures=function(e,t,n,r,i,s){var o=r.resetEnclosingTypeWalkers();r.setEnclosingTypes(e,t);var u=this.sourceCallSignaturesAreRelatableToTargetCallSignatures(e,t,!0,this.assignableCache,n,r,i,s);return r.setEnclosingTypeWalkers(o),u},t.prototype.sourceConstructSignaturesAreAssignableToTargetConstructSignatures=function(e,t,n,r,i,s){var o=r.resetEnclosingTypeWalkers();r.setEnclosingTypes(e,t);var u=this.sourceConstructSignaturesAreRelatableToTargetConstructSignatures(e,t,!0,this.assignableCache,n,r,i,s);return r.setEnclosingTypeWalkers(o),u},t.prototype.sourceIndexSignaturesAreAssignableToTargetIndexSignatures=function(e,t,n,r,i,s){var o=r.resetEnclosingTypeWalkers();r.setEnclosingTypes(e,t);var u=this.sourceIndexSignaturesAreRelatableToTargetIndexSignatures(e,t,!0,this.assignableCache,n,r,i,s);return r.setEnclosingTypeWalkers(o),u},t.prototype.typeIsAssignableToFunction=function(e,t,n){return e.isFunctionType()?!0:this.cachedFunctionInterfaceType()&&this.sourceIsAssignableToTarget(e,this.cachedFunctionInterfaceType(),t,n)},t.prototype.signatureIsAssignableToTarget=function(e,t,n,r,i,s){var o=r.resetEnclosingTypeWalkers();r.setEnclosingTypes(e,t);var u=this.signatureIsRelatableToTarget(e,t,!0,this.assignableCache,n,r,i,s);return r.setEnclosingTypeWalkers(o),u},t.prototype.sourceIsAssignableToTarget=function(e,t,n,r,i,s){return this.sourceIsRelatableToTarget(e,t,!0,this.assignableCache,n,r,i,s)},t.prototype.sourceIsAssignableToTargetWithNewEnclosingTypes=function(e,t,n,r,i,s){return this.sourceIsRelatableToTargetWithNewEnclosingTypes(e,t,!0,this.assignableCache,n,r,i,s)},t.prototype.getSymbolForRelationshipCheck=function(e){return e&&e.isTypeReference()?e.getReferencedTypeSymbol():e},t.prototype.sourceIsRelatableToTargetInEnclosingTypes=function(e,t,n,r,i,s,o,u){return e=this.getSymbolForRelationshipCheck(e),t=this.getSymbolForRelationshipCheck(t),e===t?!0:e&&t&&s.oneOfClassificationsIsInfinitelyExpanding()?this.infinitelyExpandingSourceTypeIsRelatableToTargetType(e,t,n,r,i,s,o,u):this.sourceIsRelatableToTarget(e,t,n,r,i,s,o,u)},t.prototype.sourceIsRelatableToTargetWithNewEnclosingTypes=function(e,t,n,r,i,s,o,u){var a=s.resetEnclosingTypeWalkers(),f=this.sourceIsRelatableToTarget(e,t,n,r,i,s,o,u);return s.setEnclosingTypeWalkers(a),f},t.prototype.sourceIsRelatableToTargetInCache=function(e,t,n,r){var i=n.valueAt(e.pullSymbolID,t.pullSymbolID);return i?{isRelatable:i}:i!=undefined&&!r?{isRelatable:i}:null},t.prototype.sourceIsRelatableToTarget=function(t,n,r,i,s,o,u,a){t=this.getSymbolForRelationshipCheck(t),n=this.getSymbolForRelationshipCheck(n);if(t===n)return!0;if(!t||!n)return!0;var f=this.getApparentType(t),l=this.sourceIsRelatableToTargetInCache(t,n,i,u);if(l)return l.isRelatable;if(t===this.semanticInfoChain.stringTypeSymbol&&n.isPrimitive()&&n.isStringConstant())return u&&u.stringConstantVal&&u.stringConstantVal.kind()===14&&e.stripStartAndEndQuotes(u.stringConstantVal.text())===e.stripStartAndEndQuotes(n.name);if(r){if(this.isAnyOrEquivalent(t)||this.isAnyOrEquivalent(n))return!0}else if(this.isAnyOrEquivalent(n))return!0;if(n===this.semanticInfoChain.stringTypeSymbol&&t.isPrimitive()&&t.isStringConstant())return!0;if(t.isPrimitive()&&t.isStringConstant()&&n.isPrimitive()&&n.isStringConstant())return e.stripStartAndEndQuotes(t.name)===e.stripStartAndEndQuotes(n.name);if(t===this.semanticInfoChain.undefinedTypeSymbol)return!0;if(t===this.semanticInfoChain.nullTypeSymbol&&n!==this.semanticInfoChain.undefinedTypeSymbol&&n!=this.semanticInfoChain.voidTypeSymbol)return!0;if(n===this.semanticInfoChain.voidTypeSymbol)return t===this.semanticInfoChain.undefinedTypeSymbol||t==this.semanticInfoChain.nullTypeSymbol?!0:!1;if(t===this.semanticInfoChain.voidTypeSymbol)return n===this.semanticInfoChain.anyTypeSymbol?!0:!1;if(n===this.semanticInfoChain.numberTypeSymbol&&e.PullHelpers.symbolIsEnum(t))return!0;if(t===this.semanticInfoChain.numberTypeSymbol&&e.PullHelpers.symbolIsEnum(n))return r;if(e.PullHelpers.symbolIsEnum(n)&&e.PullHelpers.symbolIsEnum(t))return this.symbolsShareDeclaration(n,t);if(t.kind&64||n.kind&64)return!1;if(t.getIsSpecialized()&&n.getIsSpecialized()&&e.PullHelpers.getRootType(t)===e.PullHelpers.getRootType(n)&&e.PullHelpers.getRootType(t).isNamedTypeSymbol()){var c=t.getTypeArguments(),h=n.getTypeArguments();if(c&&h){i.setValueAt(t.pullSymbolID,n.pullSymbolID,!0);for(var p=0;p<c.length;p++)if(!this.sourceIsRelatableToTargetWithNewEnclosingTypes(c[p],h[p],r,i,s,o,null,a))break;if(p===c.length)return!0;i.setValueAt(t.pullSymbolID,n.pullSymbolID,undefined)}}if(n.isTypeParameter()){if(t.isTypeParameter())return t.getConstraint()?this.isSourceTypeParameterConstrainedToTargetTypeParameter(t,n):this.typesAreIdentical(n,t,o);if(!a)return this.typesAreIdentical(n,f,o);n=n.getBaseConstraint(this.semanticInfoChain)}if(f.isPrimitive()||n.isPrimitive())return!1;i.setValueAt(t.pullSymbolID,n.pullSymbolID,!0);var d=o.startWalkingTypes(f,n),v=t!=f&&o.enclosingTypeWalker1._canWalkStructure()&&o.enclosingTypeWalker1._getCurrentSymbol()!=f;v&&o.enclosingTypeWalker1.setCurrentSymbol(f);var m=this.sourceIsRelatableToTargetWorker(t,n,f,r,i,s,o,u,a);return v&&o.enclosingTypeWalker1.setCurrentSymbol(t),o.endWalkingTypes(d),i.setValueAt(t.pullSymbolID,n.pullSymbolID,m),m},t.prototype.isSourceTypeParameterConstrainedToTargetTypeParameter=function(e,t){var n=e;while(n&&n.isTypeParameter()){if(n===t)return!0;n=n.getConstraint()}return!1},t.prototype.sourceIsRelatableToTargetWorker=function(e,t,n,r,i,s,o,u,a){return t.hasMembers()&&!this.sourceMembersAreRelatableToTargetMembers(n,t,r,i,s,o,u,a)?!1:this.sourceCallSignaturesAreRelatableToTargetCallSignatures(n,t,r,i,s,o,u,a)?this.sourceConstructSignaturesAreRelatableToTargetConstructSignatures(n,t,r,i,s,o,u,a)?this.sourceIndexSignaturesAreRelatableToTargetIndexSignatures(n,t,r,i,s,o,u,a)?!0:!1:!1:!1},t.prototype.sourceMembersAreRelatableToTargetMembers=function(t,n,r,i,s,o,u,a){var f=n.getAllMembers(68147712,0);for(var l=0;l<f.length;l++){var c=f[l],h=this._getNamedPropertySymbolOfAugmentedType(c.name,t);this.resolveDeclaredSymbol(c,o);var p=c.type;if(!h){if(!c.isOptional){if(u){var d=this.getEnclosingSymbolForAST(s);u.flags|=2,u.addMessage(e.getDiagnosticMessage(e.DiagnosticCode.Type_0_is_missing_property_1_from_type_2,[t.toString(d),c.getScopedNameEx().toString(),n.toString(d)]))}return!1}continue}if(!this.sourcePropertyIsRelatableToTargetProperty(t,n,h,c,r,i,s,o,u,a))return!1}return!0},t.prototype.infinitelyExpandingSourceTypeIsRelatableToTargetType=function(t,n,r,i,s,o,u,a){var f=n.widenedType(this,null,o),c=t.widenedType(this,null,o);if(c!==this.semanticInfoChain.anyTypeSymbol&&f!==this.semanticInfoChain.anyTypeSymbol){var h=e.PullHelpers.getRootType(t),p=e.PullHelpers.getRootType(n);if(h!==p){i.setValueAt(t.pullSymbolID,n.pullSymbolID,!1);if(u){var d=this.getEnclosingSymbolForAST(s);u.addMessage(e.getDiagnosticMessage(e.DiagnosticCode.Types_0_and_1_originating_in_infinitely_expanding_type_reference_do_not_refer_to_same_named_type,[t.getScopedNameEx(d).toString(),n.toString(d)]))}return!1}var v=t.getTypeArguments(),m=n.getTypeArguments();if(!v&&!m)return i.setValueAt(t.pullSymbolID,n.pullSymbolID,!0),!0;if(!v||!m||v.length!==m.length){i.setValueAt(t.pullSymbolID,n.pullSymbolID,!1);if(u){var d=this.getEnclosingSymbolForAST(s);u.addMessage(e.getDiagnosticMessage(e.DiagnosticCode.Types_0_and_1_originating_in_infinitely_expanding_type_reference_have_incompatible_type_arguments,[t.toString(d),n.toString(d)]))}return!1}var g=null;u&&!u.onlyCaptureFirstError&&(g=new l(u));var y=!0;for(var b=0;b<v.length&&y;b++){o.walkTypeArgument(b);if(!this.sourceIsRelatableToTargetInEnclosingTypes(v[b],m[b],r,i,s,o,g,a)){y=!1;if(u){var w,d=this.getEnclosingSymbolForAST(s);g&&g.message?w=e.getDiagnosticMessage(e.DiagnosticCode.Types_0_and_1_originating_in_infinitely_expanding_type_reference_have_incompatible_type_arguments_NL_2,[t.toString(d),n.toString(d),g.message]):w=e.getDiagnosticMessage(e.DiagnosticCode.Types_0_and_1_originating_in_infinitely_expanding_type_reference_have_incompatible_type_arguments,[t.toString(d),n.toString(d)]),u.addMessage(w)}}o.postWalkTypeArgument()}}return i.setValueAt(t.pullSymbolID,n.pullSymbolID,y),y},t.prototype.infinitelyExpandingTypesAreIdentical=function(t,n,r){var i=n.widenedType(this,null,null),s=t.widenedType(this,null,null);if(s!==this.semanticInfoChain.anyTypeSymbol&&i!==this.semanticInfoChain.anyTypeSymbol){var o=e.PullHelpers.getRootType(t),u=e.PullHelpers.getRootType(n);if(o!==u)return this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,!1),!1;var a=t.getTypeArguments(),f=n.getTypeArguments();if(!a&&!f)return this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,!0),!0;if(!a||!f||a.length!==f.length)return this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,!1),!1;for(var l=0;l<a.length;l++){r.walkTypeArgument(l);var c=this.typesAreIdenticalInEnclosingTypes(a[l],f[l],r);r.postWalkTypeArgument();if(!c)return this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,!1),!1}}return this.identicalCache.setValueAt(t.pullSymbolID,n.pullSymbolID,!0),!0},t.prototype.sourcePropertyIsRelatableToTargetProperty=function(t,n,r,i,s,o,u,a,f,c){var h=this,p=t.isConstructor()&&n.isConstructor(),d=function(e){var s=h.getEnclosingSymbolForAST(u),o=e?r.getContainer():t,a=e?i.getContainer():n;return p&&(o=o.getAssociatedContainerType(),a=a.getAssociatedContainerType()),{propertyName:i.getScopedNameEx().toString(),sourceTypeName:o.toString(s),targetTypeName:a.toString(s)}},v=i.anyDeclHasFlag(2),m=r.anyDeclHasFlag(2);if(v!==m){if(f){var g=d(!0),y;v?y=p?e.DiagnosticCode.Static_property_0_defined_as_public_in_type_1_is_defined_as_private_in_type_2:e.DiagnosticCode.Property_0_defined_as_public_in_type_1_is_defined_as_private_in_type_2:y=p?e.DiagnosticCode.Static_property_0_defined_as_private_in_type_1_is_defined_as_public_in_type_2:e.DiagnosticCode.Property_0_defined_as_private_in_type_1_is_defined_as_public_in_type_2,f.addMessage(e.getDiagnosticMessage(y,[g.propertyName,g.sourceTypeName,g.targetTypeName])),f.flags|=128}return!1}if(m&&v){var b=i.getDeclarations()[0],w=r.getDeclarations()[0];if(b!==w){if(f){var g=d(!0);f.flags|=128;var y=p?e.DiagnosticCode.Types_0_and_1_define_static_property_2_as_private:e.DiagnosticCode.Types_0_and_1_define_property_2_as_private;f.addMessage(e.getDiagnosticMessage(y,[g.sourceTypeName,g.targetTypeName,g.propertyName]))}return!1}}if(r.isOptional&&!i.isOptional){if(f){var g=d(!0);f.flags|=2,f.addMessage(e.getDiagnosticMessage(e.DiagnosticCode.Property_0_defined_as_optional_in_type_1_but_is_required_in_type_2,[g.propertyName,g.sourceTypeName,g.targetTypeName]))}return!1}this.resolveDeclaredSymbol(r,a);var E=r.type,S=i.type,x=this.sourceIsRelatableToTargetInCache(E,S,o,f);if(x)return x.isRelatable;var T=null;f&&!f.onlyCaptureFirstError&&(T=new l(f)),a.walkMemberTypes(i.name);var N=this.sourceIsRelatableToTargetInEnclosingTypes(E,S,s,o,u,a,T,c);a.postWalkMemberTypes();if(!N&&f){var C=this.getEnclosingSymbolForAST(u);f.flags|=32;var k,g=d(!1);if(T&&T.message){var y=p?e.DiagnosticCode.Types_of_static_property_0_of_class_1_and_class_2_are_incompatible_NL_3:e.DiagnosticCode.Types_of_property_0_of_types_1_and_2_are_incompatible_NL_3;k=e.getDiagnosticMessage(y,[g.propertyName,g.sourceTypeName,g.targetTypeName,T.message])}else{var y=p?e.DiagnosticCode.Types_of_static_property_0_of_class_1_and_class_2_are_incompatible:e.DiagnosticCode.Types_of_property_0_of_types_1_and_2_are_incompatible;k=e.getDiagnosticMessage(y,[g.propertyName,g.sourceTypeName,g.targetTypeName])}f.addMessage(k)}return N},t.prototype.sourceCallSignaturesAreRelatableToTargetCallSignatures=function(t,n,r,i,s,o,u,a){var f=n.getCallSignatures();if(f.length){var c=null;u&&!u.onlyCaptureFirstError&&(c=new l(u));var h=t.getCallSignatures();if(!this.signatureGroupIsRelatableToTarget(t,n,h,f,r,i,s,o,c,a)){if(u){var p,d=this.getEnclosingSymbolForAST(s);if(h.length&&f.length)c&&c.message?p=e.getDiagnosticMessage(e.DiagnosticCode.Call_signatures_of_types_0_and_1_are_incompatible_NL_2,[t.toString(d),n.toString(d),c.message]):p=e.getDiagnosticMessage(e.DiagnosticCode.Call_signatures_of_types_0_and_1_are_incompatible,[t.toString(d),n.toString(d)]);else{var v=f.length?n.toString(d):t.toString(d),m=f.length?t.toString(d):n.toString(d);p=e.getDiagnosticMessage(e.DiagnosticCode.Type_0_requires_a_call_signature_but_type_1_lacks_one,[v,m])}u.flags|=4,u.addMessage(p)}return!1}}return!0},t.prototype.sourceConstructSignaturesAreRelatableToTargetConstructSignatures=function(t,n,r,i,s,o,u,a){var f=n.getConstructSignatures();if(f.length){var c=null;u&&!u.onlyCaptureFirstError&&(c=new l(u));var h=t.getConstructSignatures();if(!this.signatureGroupIsRelatableToTarget(t,n,h,f,r,i,s,o,c,a)){if(u){var p=this.getEnclosingSymbolForAST(s),d;if(h.length&&f.length)c&&c.message?d=e.getDiagnosticMessage(e.DiagnosticCode.Construct_signatures_of_types_0_and_1_are_incompatible_NL_2,[t.toString(p),n.toString(p),c.message]):d=e.getDiagnosticMessage(e.DiagnosticCode.Construct_signatures_of_types_0_and_1_are_incompatible,[t.toString(p),n.toString(p)]);else{var v=f.length?n.toString(p):t.toString(p),m=f.length?t.toString(p):n.toString(p);d=e.getDiagnosticMessage(e.DiagnosticCode.Type_0_requires_a_construct_signature_but_type_1_lacks_one,[v,m])}u.flags|=4,u.addMessage(d)}return!1}}return!0},t.prototype.sourceIndexSignaturesAreRelatableToTargetIndexSignatures=function(t,n,r,i,s,o,u,a){var f=this.getBothKindsOfIndexSignaturesExcludingAugmentedType(n,o),c=f.stringSignature,h=f.numericSignature;if(c||h){var p=this.getBothKindsOfIndexSignaturesIncludingAugmentedType(t,o),d=o.getBothKindOfIndexSignatures(!0,!1),v=p.stringSignature,m=p.numericSignature,g=!0,y=null;u&&!u.onlyCaptureFirstError&&(y=new l(u)),c&&(v?(o.walkIndexSignatureReturnTypes(d,!0,!0),g=this.sourceIsRelatableToTargetInEnclosingTypes(v.returnType,c.returnType,r,i,s,o,y,a),o.postWalkIndexSignatureReturnTypes()):g=!1),g&&h&&(m?(o.walkIndexSignatureReturnTypes(d,!1,!1),g=this.sourceIsRelatableToTargetInEnclosingTypes(m.returnType,h.returnType,r,i,s,o,y,a),o.postWalkIndexSignatureReturnTypes()):v?(o.walkIndexSignatureReturnTypes(d,!0,!1),g=this.sourceIsRelatableToTargetInEnclosingTypes(v.returnType,h.returnType,r,i,s,o,y,a),o.postWalkIndexSignatureReturnTypes()):g=!1);if(!g){if(u){var b,w=this.getEnclosingSymbolForAST(s);y&&y.message?b=e.getDiagnosticMessage(e.DiagnosticCode.Index_signatures_of_types_0_and_1_are_incompatible_NL_2,[t.toString(w),n.toString(w),y.message]):b=e.getDiagnosticMessage(e.DiagnosticCode.Index_signatures_of_types_0_and_1_are_incompatible,[t.toString(w),n.toString(w)]),u.flags|=4,u.addMessage(b)}return!1}}return!0},t.prototype.signatureGroupIsRelatableToTarget=function(e,t,n,r,i,s,o,u,a,f){if(n===r)return!0;if(!n.length||!r.length)return!1;var c=!1,h=r.length>1,p=n.length>1,d=0,v=null;a&&(v=new l(a,!0),v.message=a.message);for(var m=0;m<r.length;m++){var g=r[m];if(g.isStringConstantOverloadSignature()||h&&g.isDefinition())continue;for(var y=0;y<n.length;y++){var b=n[y];if(b.isStringConstantOverloadSignature()||p&&b.isDefinition())continue;u.walkSignatures(b.kind,y,m);var w=this.signatureIsRelatableToTarget(b,g,i,s,o,u,d==0?v:null,f);u.postWalkSignatures(),d++;if(w){c=!0;break}}if(c){c=!1;continue}return a&&d==1&&(a.message=v.message),!1}return!0},t.prototype.signatureIsRelatableToTarget=function(e,t,n,r,i,s,o,u){var a=this.sourceIsRelatableToTargetInCache(e,t,r,o);if(a)return a.isRelatable;r.setValueAt(e.pullSymbolID,t.pullSymbolID,!0);var f=this.signatureIsRelatableToTargetWorker(e,t,n,r,i,s,o,u);return r.setValueAt(e.pullSymbolID,t.pullSymbolID,f),f},t.prototype.signatureIsRelatableToTargetWorker=function(t,n,r,i,s,o,u,a){var f=this,l=t.parameters,c=n.parameters;if(!l||!c)return!1;var h=n.nonOptionalParamCount,p=t.nonOptionalParamCount;if(!n.hasVarArgs&&p>c.length)return u&&(u.flags|=3,u.addMessage(e.getDiagnosticMessage(e.DiagnosticCode.Call_signature_expects_0_or_fewer_parameters,[c.length]))),!1;if(this.signaturesAreIdentical(t,n,o))return!0;n.isGeneric()&&(n=this.instantiateSignatureToAny(n)),t.isGeneric()&&(t=this.instantiateSignatureToAny(t));var d=t.returnType,v=n.returnType;if(v!==this.semanticInfoChain.voidTypeSymbol){o.walkReturnTypes();var m=this.sourceIsRelatableToTargetInEnclosingTypes(d,v,r,i,s,o,u,a);o.postWalkReturnTypes();if(!m)return u&&(u.flags|=16),!1}return n.forAllCorrespondingParameterTypesInThisAndOtherSignature(t,function(e,t,n){o.walkParameterTypes(n);var l=f.sourceIsRelatableToTargetInEnclosingTypes(t,e,r,i,s,o,u,a);return l||(o.swapEnclosingTypeWalkers(),l=f.sourceIsRelatableToTargetInEnclosingTypes(e,t,r,i,s,o,u,a),o.swapEnclosingTypeWalkers()),o.postWalkParameterTypes(),l||u&&(u.flags|=64),l})},t.prototype.resolveOverloads=function(t,n,r,i,s){var o=this,u=n.length>1,a=new l,f=t.argumentList?t.argumentList.arguments:null,c=e.ArrayUtilities.where(n,function(e){if(u&&e.isDefinition())return!1;var t=e.getRootSymbol();return r&&!t.isGeneric()?!1:o.overloadHasCorrectArity(e,f)}),h=null,p=null;for(var d=0;d<c.length;d++){var v=this.overloadIsApplicable(c[d],f,i,a);if(v===3)return c[d];v===2&&!h?h=c[d]:v===1&&!p&&(p=c[d])}if(h||p)return h||p;var m=this.getCallTargetErrorSpanAST(t);return a.message?s.push(this.semanticInfoChain.diagnosticFromAST(m,e.DiagnosticCode.Supplied_parameters_do_not_match_any_signature_of_call_target_NL_0,[a.message])):s.push(this.semanticInfoChain.diagnosticFromAST(m,e.DiagnosticCode.Supplied_parameters_do_not_match_any_signature_of_call_target,null)),null},t.prototype.getCallTargetErrorSpanAST=function(e){return e.expression.kind()===212?e.expression.name:e.expression},t.prototype.overloadHasCorrectArity=function(e,t){if(t==null)return e.nonOptionalParamCount===0;var n=t.nonSeparatorCount()&&t.nonSeparatorCount()===t.separatorCount()?t.separatorCount()+1:t.nonSeparatorCount();return n<e.nonOptionalParamCount?!1:!e.hasVarArgs&&n>e.parameters.length?!1:!0},t.prototype.overloadIsApplicable=function(e,t,n,r){if(t===null)return 3;var i=!1,s=e.parameters,o=null,u=3;for(var a=0;a<t.nonSeparatorCount();a++){i||(this.resolveDeclaredSymbol(s[a],n),s[a].isVarArg?(o=s[a].type.getElementType()||this.getNewErrorTypeSymbol(s[a].type.getName()),i=!0):o=s[a].type);var f=this.overloadIsApplicableForArgument(o,t.nonSeparatorAt(a),a,n,r);if(f===0)return 0;f===1?u=1:u!==1&&f===2&&(u=2)}return u},t.prototype.overloadIsApplicableForArgument=function(t,n,r,i,s){if(t.isAny())return 3;if(t.isError())return 1;if(n.kind()===219){var o=n;return this.overloadIsApplicableForAnyFunctionExpressionArgument(t,n,null,e.ASTHelpers.parametersFromIdentifier(o.identifier),null,o.block,o.expression,r,i,s)}if(n.kind()===218){var u=n;return this.overloadIsApplicableForAnyFunctionExpressionArgument(t,n,u.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(u.callSignature.parameterList),e.ASTHelpers.getType(u),u.block,u.expression,r,i,s)}if(n.kind()===222){var a=n;return this.overloadIsApplicableForAnyFunctionExpressionArgument(t,n,a.callSignature.typeParameterList,e.ASTHelpers.parametersFromParameterList(a.callSignature.parameterList),e.ASTHelpers.getType(a),a.block,null,r,i,s)}return n.kind()===215?this.overloadIsApplicableForObjectLiteralArgument(t,n,r,i,s):n.kind()===214?this.overloadIsApplicableForArrayLiteralArgument(t,n,r,i,s):this.overloadIsApplicableForOtherArgument(t,n,r,i,s)},t.prototype.overloadIsApplicableForAnyFunctionExpressionArgument=function(e,t,n,r,i,s,o,u,a,f){if(this.cachedFunctionInterfaceType()&&e===this.cachedFunctionInterfaceType())return 2;a.pushProvisionalType(e);var l=this.resolveAnyFunctionExpression(t,n,r,i,s,o,!0,a),c=this.overloadIsApplicableForArgumentHelper(e,l.type,u,f,t,a);return a.popAnyContextualType(),c},t.prototype.overloadIsApplicableForObjectLiteralArgument=function(e,t,n,r,i){if(this.cachedObjectInterfaceType()&&e===this.cachedObjectInterfaceType())return 2;r.pushProvisionalType(e);var s=this.resolveObjectLiteralExpression(t,!0,r),o=this.overloadIsApplicableForArgumentHelper(e,s.type,n,i,t,r);return r.popAnyContextualType(),o},t.prototype.overloadIsApplicableForArrayLiteralArgument=function(e,t,n,r,i){if(e===this.cachedArrayInterfaceType())return 2;r.pushProvisionalType(e);var s=this.resolveArrayLiteralExpression(t,!0,r),o=this.overloadIsApplicableForArgumentHelper(e,s.type,n,i,t,r);return r.popAnyContextualType(),o},t.prototype.overloadIsApplicableForOtherArgument=function(e,t,n,r,i){var s=this.resolveAST(t,!1,r);if(s.type.isAlias()){var o=s.type;s=o.getExportAssignedTypeSymbol()}return i.stringConstantVal=t,this.overloadIsApplicableForArgumentHelper(e,s.type,n,i,t,r)},t.prototype.overloadIsApplicableForArgumentHelper=function(t,n,r,i,s,o){var u=new l;u.stringConstantVal=i.stringConstantVal;if(!o.hasProvisionalErrors()&&this.sourceIsSubtypeOfTarget(n.type,t,s,o,u))return 3;if(this.sourceIsAssignableToTarget(n.type,t,s,o,i.message?u:i))return o.hasProvisionalErrors()?1:2;if(!i.message){var a=this.getEnclosingSymbolForAST(s);i.addMessage(e.getDiagnosticMessage(e.DiagnosticCode.Could_not_apply_type_0_to_argument_1_which_is_of_type_2,[t.toString(a),r+1,n.getTypeName(a)]))}return 0},t.prototype.inferArgumentTypesForSignature=function(t,n,r){var i=t.inferTypeArguments(),s=t.signatureBeingInferred.getTypeParameters();e.Debug.assert(s.length==i.length);var o=null;for(var u=0;u<i.length;u++)if(s[u].getConstraint()){o=o||e.PullInstantiationHelpers.createTypeParameterArgumentMap(s,i);var a=this.instantiateType(s[u].getConstraint(),o);this.sourceIsAssignableToTargetWithNewEnclosingTypes(i[u],a,null,r,null,!1)||(i[u]=a)}if(t.isInvocationInferenceContext()){var f=t;if(!this.typeParametersAreInScopeAtArgumentList(s,f.argumentASTs))for(var u=0;u<i.length;u++)i[u].wrapsSomeTypeParameter(t.candidateCache)&&(i[u]=this.semanticInfoChain.anyTypeSymbol)}return i},t.prototype.typeParametersAreInScopeAtArgumentList=function(e,t){var n=this.getEnclosingDeclForAST(t),r=e[0].getDeclarations()[0].getParentDecl();return n.getParentPath().indexOf(r)>-1},t.prototype.relateTypeToTypeParametersInEnclosingType=function(e,t,n,r){if(e&&t&&r.oneOfClassificationsIsInfinitelyExpanding()){this.relateInifinitelyExpandingTypeToTypeParameters(e,t,n,r);return}this.relateTypeToTypeParameters(e,t,n,r)},t.prototype.relateTypeToTypeParametersWithNewEnclosingTypes=function(e,t,n,r){var i=r.resetEnclosingTypeWalkers();this.relateTypeToTypeParameters(e,t,n,r),r.setEnclosingTypeWalkers(i)},t.prototype.relateTypeToTypeParameters=function(t,n,r,i){if(!t||!n)return;t.isError()&&(t=this.semanticInfoChain.anyTypeSymbol);if(n.isTypeParameter()){var s=n;r.addCandidateForInference(s,t);return}if(n.isNamedTypeSymbol()&&!n.isGeneric()&&!n.getTypeArguments())return;if(e.PullInstantiationHelpers.twoTypesAreInstantiationsOfSameNamedGenericType(t,n))this.relateTypeArgumentsOfTypeToTypeParameters(t,n,r,i);else{var o=i.startWalkingTypes(t,n);this.relateObjectTypeToTypeParameters(t,n,r,i),i.endWalkingTypes(o)}},t.prototype.relateTypeArgumentsOfTypeToTypeParameters=function(t,n,r,i){var s=n.getTypeArguments(),o=t.getTypeArguments();e.Debug.assert(s&&o&&s.length===o.length);for(var u=0;u<s.length;u++)this.relateTypeToTypeParametersWithNewEnclosingTypes(o[u],s[u],r,i)},t.prototype.relateInifinitelyExpandingTypeToTypeParameters=function(t,n,r,i){if(!t||!n)return;var s=e.PullHelpers.getRootType(t),o=e.PullHelpers.getRootType(n);if(s!==o)return;var u=t.getTypeArguments(),a=n.getTypeArguments();if(u&&a&&u.length===a.length)for(var f=0;f<u.length;f++)this.relateTypeArgumentsOfTypeToTypeParameters(t,n,r,i)},t.prototype.relateFunctionSignatureToTypeParameters=function(e,t,n,r){var i=this,s=e.returnType,o=t.returnType;t.forAllCorrespondingParameterTypesInThisAndOtherSignature(e,function(e,t,s){return r.walkParameterTypes(s),i.relateTypeToTypeParametersInEnclosingType(t,e,n,r),r.postWalkParameterTypes(),!0}),r.walkReturnTypes(),this.relateTypeToTypeParametersInEnclosingType(s,o,n,r),r.postWalkReturnTypes()},t.prototype.relateObjectTypeToTypeParameters=function(e,t,n,r){var i=t.getMembers(),s,o,u;if(n.alreadyRelatingTypes(e,t))return;for(var a=0;a<i.length;a++)o=this.getNamedPropertySymbol(i[a].name,68147712,e),o&&(this.resolveDeclaredSymbol(o),this.resolveDeclaredSymbol(i[a]),r.walkMemberTypes(i[a].name),this.relateTypeToTypeParametersInEnclosingType(o.type,i[a].type,n,r),r.postWalkMemberTypes());this.relateSignatureGroupToTypeParameters(e.getCallSignatures(),t.getCallSignatures(),1048576,n,r),this.relateSignatureGroupToTypeParameters(e.getConstructSignatures(),t.getConstructSignatures(),2097152,n,r);var f=this.getBothKindsOfIndexSignaturesExcludingAugmentedType(t,r),l=this.getBothKindsOfIndexSignaturesExcludingAugmentedType(e,r),c=r.getBothKindOfIndexSignatures(!1,!1);f.stringSignature&&l.stringSignature&&(r.walkIndexSignatureReturnTypes(c,!0,!0,!0),this.relateFunctionSignatureToTypeParameters(l.stringSignature,f.stringSignature,n,r),r.postWalkIndexSignatureReturnTypes(!0)),f.numericSignature&&l.numericSignature&&(r.walkIndexSignatureReturnTypes(c,!1,!1,!0),this.relateFunctionSignatureToTypeParameters(l.numericSignature,f.numericSignature,n,r),r.postWalkIndexSignatureReturnTypes(!0))},t.prototype.relateSignatureGroupToTypeParameters=function(e,t,n,r,i){for(var s=0;s<t.length;s++){var o=t[s];e.length>0&&o.isGeneric()&&(o=this.instantiateSignatureToAny(o));for(var u=0;u<e.length;u++){var a=e[u];if(a.nonOptionalParamCount>o.nonOptionalParamCount)continue;a.isGeneric()&&(a=this.instantiateSignatureToAny(a)),i.walkSignatures(n,u,s),this.relateFunctionSignatureToTypeParameters(a,o,r,i),i.postWalkSignatures()}}},t.prototype.alterPotentialGenericFunctionTypeToInstantiatedFunctionTypeForTypeArgumentInference=function(t,n){var r=n.getContextualType();e.Debug.assert(r);var i=t.type;if(this.isFunctionTypeWithExactlyOneCallSignatureAndNoOtherMembers(i,!0)&&this.isFunctionTypeWithExactlyOneCallSignatureAndNoOtherMembers(r,!1)){var s=i.getCallSignatures()[0],o=r.getCallSignatures()[0],u=this.instantiateSignatureInContext(s,o,n,!0);if(u===null)return t;var a=new e.PullTypeSymbol("",16777216);return a.appendCallSignature(u),a}return t},t.prototype.isFunctionTypeWithExactlyOneCallSignatureAndNoOtherMembers=function(t,n){e.Debug.assert(t);if(t.getCallSignatures().length!==1)return!1;var r=t.getCallSignatures()[0].isGeneric();if(r!==n)return!1;var i=t.getConstructSignatures().length||t.getIndexSignatures().length||t.getAllMembers(68147712,0).length;return i?!1:!0},t.prototype.instantiateTypeToAny=function(e,t){var n=e.getTypeParameters();if(!n.length)return e;var r=null;this._cachedAnyTypeArgs||(this._cachedAnyTypeArgs=[[this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol]]);if(n.length<this._cachedAnyTypeArgs.length)r=this._cachedAnyTypeArgs[n.length-1];else{r=[];for(var i=0;i<n.length;i++)r[r.length]=this.semanticInfoChain.anyTypeSymbol}var s=this.createInstantiatedType(e,r);return s},t.prototype.instantiateSignatureToAny=function(t){var n=t.getTypeParameters();this._cachedAnyTypeArgs||(this._cachedAnyTypeArgs=[[this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol],[this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.anyTypeSymbol]]);if(n.length<this._cachedAnyTypeArgs.length)var r=this._cachedAnyTypeArgs[n.length-1];else{var r=[];for(var i=0;i<n.length;i++)r[r.length]=this.semanticInfoChain.anyTypeSymbol}var s=e.PullInstantiationHelpers.createTypeParameterArgumentMap(n,r);return this.instantiateSignature(t,s)},t.typeCheck=function(t,n,r){var i=r.sourceUnit(),s=n.getResolver(),o=new e.PullTypeResolutionContext(s,!0,i.fileName());if(s.canTypeCheckAST(i,o)){s.resolveAST(i,!1,o),s.validateVariableDeclarationGroups(n.getDeclForAST(i),o);while(s.typeCheckCallBacks.length){var u=s.typeCheckCallBacks.pop();u(o)}s.processPostTypeCheckWorkItems(o)}},t.prototype.validateVariableDeclarationGroups=function(t,n){var r=this;this.scanVariableDeclarationGroups(t,function(e){},function(t,i){if(e.hasFlag(t.kind,2048)||e.hasFlag(t.flags,8388608))return;var s=r.semanticInfoChain.getASTForDecl(t),o=t.getSymbol(),u=o.type,a=i.type;u&&a&&u!==a&&!r.typesAreIdentical(u,a,n)&&n.postDiagnostic(r.semanticInfoChain.diagnosticFromAST(s,e.DiagnosticCode.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,[o.getScopedName(),a.toString(i),u.toString(o)]))})},t.prototype.typeCheckFunctionOverloads=function(t,n,r,i){if(!r){var s=e.PullHelpers.getSignatureForFuncDecl(this.semanticInfoChain.getDeclForAST(t));r=s.signature,i=s.allSignatures}var o=this.semanticInfoChain.getDeclForAST(t),u=o.getSymbol(),a=null;for(var f=i.length-1;f>=0;f--)if(i[f].isDefinition()){a=i[f];break}if(!r.isDefinition()){var c=r.getDeclarations()[0].getParentDecl();for(var f=0;f<i.length;f++){if(i[f]===r)break;var h=i[f].getDeclarations()[0].getParentDecl();if(h!==c)continue;if(this.signaturesAreIdenticalWithNewEnclosingTypes(i[f],r,n,!1)){this.signatureReturnTypesAreIdentical(i[f],r,n)?t.kind()===137?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_constructor_overload_signature)):o.kind===2097152?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_overload_construct_signature)):o.kind===1048576?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_overload_call_signature)):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_overload_signature_for_0,[u.getScopedNameEx().toString()])):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Overloads_cannot_differ_only_by_return_type));break}}}var p=r.isStringConstantOverloadSignature();if(p)if(r.isDefinition())n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Overload_signature_implementation_cannot_use_specialized_type));else{var d=!1;for(var f=0;f<i.length;f++){if(i[f].isDefinition()||i[f]===r)continue;i[f].isResolved||this.resolveDeclaredSymbol(i[f],n);if(i[f].isStringConstantOverloadSignature())continue;if(this.signatureIsAssignableToTarget(r,i[f],null,n)){d=!0;break}}d||n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature))}else if(a&&a!==r){var v=new l;a.isResolved||this.resolveDeclaredSymbol(a,n),this.signatureIsAssignableToTarget(a,r,t,n,v)||(v.message?n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Overload_signature_is_not_compatible_with_function_definition_NL_0,[v.message])):n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Overload_signature_is_not_compatible_with_function_definition)))}var m=a;if(!a){if(i[0]===r)return;m=i[0]}if(t.kind()!==137&&o.kind!==2097152&&m&&r!==m){var g;m.anyDeclHasFlag(2)!==r.anyDeclHasFlag(2)?g=e.DiagnosticCode.Overload_signatures_must_all_be_public_or_private:m.anyDeclHasFlag(1)!==r.anyDeclHasFlag(1)?g=e.DiagnosticCode.Overload_signatures_must_all_be_exported_or_not_exported:m.anyDeclHasFlag(8)!==r.anyDeclHasFlag(8)?g=e.DiagnosticCode.Overload_signatures_must_all_be_ambient_or_non_ambient:m.anyDeclHasFlag(128)!==r.anyDeclHasFlag(128)&&(g=e.DiagnosticCode.Overload_signatures_must_all_be_optional_or_required),g&&n.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,g))}},t.prototype.checkSymbolPrivacy=function(e,t,n){if(!t||t.kind===2)return;if(t.isType()){var r=t,i=r.isNamedTypeSymbol();if(r.isArrayNamedTypeReference()){this.checkSymbolPrivacy(e,r.getElementType(),n);return}if(!i){var s=r.getTypeOfSymbol();if(s){this.checkSymbolPrivacy(e,s,n);return}}if(r.inSymbolPrivacyCheck)return;r.inSymbolPrivacyCheck=!0;var o=r.getTypeArgumentsOrTypeParameters();if(o)for(var u=0;u<o.length;u++)this.checkSymbolPrivacy(e,o[u],n);if(!i){var a=r.getMembers();for(var u=0;u<a.length;u++)this.checkSymbolPrivacy(e,a[u].type,n);this.checkTypePrivacyOfSignatures(e,r.getCallSignatures(),n),this.checkTypePrivacyOfSignatures(e,r.getConstructSignatures(),n),this.checkTypePrivacyOfSignatures(e,r.getIndexSignatures(),n)}else r.kind===8192&&this.checkSymbolPrivacy(e,r.getConstraint(),n);r.inSymbolPrivacyCheck=!1;if(!i)return}if(e.isExternallyVisible()){var f=t.isExternallyVisible();if(f&&t.kind!==8192){var l=t.pathToRoot(),c=e.pathToRoot();if(l[l.length-1].kind===32&&c[c.length-1].kind===32&&c[c.length-1]!==l[l.length-1]){f=!1;var h=c[c.length-1];for(var u=l.length-1;u>=0;u--){var p=l[u].getExternalAliasedSymbols(h);if(p){f=!0,p[0].setTypeUsedExternally();break}}t=l[l.length-1]}}else if(t.kind===128){var d=t;f=!0,d.setTypeUsedExternally()}f||n(t)}},t.prototype.checkTypePrivacyOfSignatures=function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(t.length>1&&i.isDefinition())continue;var s=i.getTypeParameters();for(var o=0;o<s.length;o++)this.checkSymbolPrivacy(e,s[o],n);var u=i.parameters;for(var o=0;o<u.length;o++){var a=u[o].type;this.checkSymbolPrivacy(e,a,n)}var f=i.returnType;this.checkSymbolPrivacy(e,f,n)}},t.prototype.typeParameterOfTypeDeclarationPrivacyErrorReporter=function(t,n,r,i,s){var o=this.semanticInfoChain.getDeclForAST(t),u=this.getEnclosingDecl(o),a=u?u.getSymbol():null,f,l=t.kind()===131?t.typeParameterList:t.typeParameterList,c=i,h=c.getScopedName(a);c.isContainer()&&!c.isEnum()?(e.isQuoted(h)||(h="'"+h+"'"),t.kind()===131?f=e.DiagnosticCode.TypeParameter_0_of_exported_class_is_using_inaccessible_module_1:f=e.DiagnosticCode.TypeParameter_0_of_exported_interface_is_using_inaccessible_module_1):t.kind()===131?f=e.DiagnosticCode.TypeParameter_0_of_exported_class_has_or_is_using_private_type_1:f=e.DiagnosticCode.TypeParameter_0_of_exported_interface_has_or_is_using_private_type_1;var p=[r.getScopedName(a,!1,!0),h];s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,f,p))},t.prototype.baseListPrivacyErrorReporter=function(t,n,r,i,s,o){var u=this.semanticInfoChain.getDeclForAST(t),a=this.getEnclosingDecl(u),f=a?a.getSymbol():null,l,c=s,h=c.getScopedName(f);c.isContainer()&&!c.isEnum()?(e.isQuoted(h)||(h="'"+h+"'"),t.kind()===131?i?l=e.DiagnosticCode.Exported_class_0_extends_class_from_inaccessible_module_1:l=e.DiagnosticCode.Exported_class_0_implements_interface_from_inaccessible_module_1:l=e.DiagnosticCode.Exported_interface_0_extends_interface_from_inaccessible_module_1):t.kind()===131?i?l=e.DiagnosticCode.Exported_class_0_extends_private_class_1:l=e.DiagnosticCode.Exported_class_0_implements_private_interface_1:l=e.DiagnosticCode.Exported_interface_0_extends_private_interface_1;var p=[n.getScopedName(f),h];o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,l,p))},t.prototype.variablePrivacyErrorReporter=function(t,n,r,i){var s=r,o=this.getEnclosingDecl(n.getDeclarations()[0]),u=o?o.getSymbol():null,a=n.kind===4096,f=!1,l=n.getContainer();l&&(l.kind===8||l.kind===32768)&&(f=!0);var c,h=s.getScopedName(u);s.isContainer()&&!s.isEnum()?(e.isQuoted(h)||(h="'"+h+"'"),n.anyDeclHasFlag(16)?c=e.DiagnosticCode.Public_static_property_0_of_exported_class_is_using_inaccessible_module_1:a?f?c=e.DiagnosticCode.Public_property_0_of_exported_class_is_using_inaccessible_module_1:c=e.DiagnosticCode.Property_0_of_exported_interface_is_using_inaccessible_module_1:c=e.DiagnosticCode.Exported_variable_0_is_using_inaccessible_module_1):n.anyDeclHasFlag(16)?c=e.DiagnosticCode.Public_static_property_0_of_exported_class_has_or_is_using_private_type_1:a?f?c=e.DiagnosticCode.Public_property_0_of_exported_class_has_or_is_using_private_type_1:c=e.DiagnosticCode.Property_0_of_exported_interface_has_or_is_using_private_type_1:c=e.DiagnosticCode.Exported_variable_0_has_or_is_using_private_type_1;var p=[n.getScopedName(u),h];i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,c,p))},t.prototype.checkFunctionTypePrivacy=function(e,t,n,r,i,s,o){var u=this;if(e.kind()===222||e.kind()===241||e.kind()===139&&e.parent.parent.kind()===215||e.kind()===140&&e.parent.parent.kind()===215)return;var a=this.semanticInfoChain.getDeclForAST(e),f=a.getSymbol(),l,c=e.kind()===139,h=e.kind()===140,p=a.kind===4194304;if(c||h){var d=f;l=(c?d.getGetter():d.getSetter()).type.getCallSignatures()[0]}else{if(!f){var v=a.getParentDecl();f=v.getSymbol();if(f&&f.isType()&&!f.isNamedTypeSymbol())return}else if(f.kind===65536&&!t&&!f.getContainer().isNamedTypeSymbol())return;l=a.getSignatureSymbol()}if(n&&!c&&!h&&!p&&e.kind()!==137)for(var m=0;m<n.typeParameters.nonSeparatorCount();m++){var g=n.typeParameters.nonSeparatorAt(m),y=this.resolveTypeParameterDeclaration(g,o);this.checkSymbolPrivacy(f,y,function(n){return u.functionTypeArgumentArgumentTypePrivacyErrorReporter(e,t,g,y,n,o)})}if(!c&&!p){var b=l.parameters;for(var m=0;m<b.length;m++)this.checkSymbolPrivacy(f,b[m].type,function(n){return u.functionArgumentTypePrivacyErrorReporter(e,t,r,m,b[m],n,o)})}h||this.checkSymbolPrivacy(f,l.returnType,function(n){return u.functionReturnTypePrivacyErrorReporter(e,t,i,s,l.returnType,n,o)})},t.prototype.functionTypeArgumentArgumentTypePrivacyErrorReporter=function(t,n,r,i,s,o){var u=this.semanticInfoChain.getDeclForAST(t),a=this.getEnclosingDecl(u),f=a?a.getSymbol():null,l=u.kind===65536,c=!1,h=u.getParentDecl();h&&(h.kind===8||n)&&(c=!0);var p=s,d=p.getScopedName(f),v;p.isContainer()&&!p.isEnum()?(e.isQuoted(d)||(d="'"+d+"'"),u.kind===2097152?v=e.DiagnosticCode.TypeParameter_0_of_constructor_signature_from_exported_interface_is_using_inaccessible_module_1:u.kind===1048576?v=e.DiagnosticCode.TypeParameter_0_of_call_signature_from_exported_interface_is_using_inaccessible_module_1:l?n?v=e.DiagnosticCode.TypeParameter_0_of_public_static_method_from_exported_class_is_using_inaccessible_module_1:c?v=e.DiagnosticCode.TypeParameter_0_of_public_method_from_exported_class_is_using_inaccessible_module_1:v=e.DiagnosticCode.TypeParameter_0_of_method_from_exported_interface_is_using_inaccessible_module_1:v=e.DiagnosticCode.TypeParameter_0_of_exported_function_is_using_inaccessible_module_1):u.kind===2097152?v=e.DiagnosticCode.TypeParameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_type_1:u.kind===1048576?v=e.DiagnosticCode.TypeParameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_type_1:l?n?v=e.DiagnosticCode.TypeParameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_type_1:c?v=e.DiagnosticCode.TypeParameter_0_of_public_method_from_exported_class_has_or_is_using_private_type_1:v=e.DiagnosticCode.TypeParameter_0_of_method_from_exported_interface_has_or_is_using_private_type_1:v=e.DiagnosticCode.TypeParameter_0_of_exported_function_has_or_is_using_private_type_1;if(v){var m=[i.getScopedName(f,!1,!0),d];o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,v,m))}},t.prototype.functionArgumentTypePrivacyErrorReporter=function(t,n,r,i,s,o,u){var a=this.semanticInfoChain.getDeclForAST(t),f=this.getEnclosingDecl(a),l=f?f.getSymbol():null,c=t.kind()===139,h=t.kind()===140,p=a.kind===65536,d=!1,v=a.getParentDecl();v&&(v.kind===8||n)&&(d=!0);var m=o,g=m.getScopedName(l),y;m.isContainer()&&!m.isEnum()?(e.isQuoted(g)||(g="'"+g+"'"),t.kind()===137?y=e.DiagnosticCode.Parameter_0_of_constructor_from_exported_class_is_using_inaccessible_module_1:h?n?y=e.DiagnosticCode.Parameter_0_of_public_static_property_setter_from_exported_class_is_using_inaccessible_module_1:y=e.DiagnosticCode.Parameter_0_of_public_property_setter_from_exported_class_is_using_inaccessible_module_1:a.kind===2097152?y=e.DiagnosticCode.Parameter_0_of_constructor_signature_from_exported_interface_is_using_inaccessible_module_1:a.kind===1048576?y=e.DiagnosticCode.Parameter_0_of_call_signature_from_exported_interface_is_using_inaccessible_module_1:p?n?y=e.DiagnosticCode.Parameter_0_of_public_static_method_from_exported_class_is_using_inaccessible_module_1:d?y=e.DiagnosticCode.Parameter_0_of_public_method_from_exported_class_is_using_inaccessible_module_1:y=e.DiagnosticCode.Parameter_0_of_method_from_exported_interface_is_using_inaccessible_module_1:c||(y=e.DiagnosticCode.Parameter_0_of_exported_function_is_using_inaccessible_module_1)):t.kind()===137?y=e.DiagnosticCode.Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_type_1:h?n?y=e.DiagnosticCode.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_type_1:y=e.DiagnosticCode.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_type_1:a.kind===2097152?y=e.DiagnosticCode.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_type_1:a.kind===1048576?y=e.DiagnosticCode.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_type_1:p?n?y=e.DiagnosticCode.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_type_1:d?y=e.DiagnosticCode.Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_type_1:y=e.DiagnosticCode.Parameter_0_of_method_from_exported_interface_has_or_is_using_private_type_1:!c&&a.kind!==4194304&&(y=e.DiagnosticCode.Parameter_0_of_exported_function_has_or_is_using_private_type_1);if(y){var b=r.astAt(i),w=[s.getScopedName(l),g];u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(b,y,w))}},t.prototype.functionReturnTypePrivacyErrorReporter=function(t,n,r,i,s,o,u){var a=this,f=this.semanticInfoChain.getDeclForAST(t),l=this.getEnclosingDecl(f),c=t.kind()===139,h=t.kind()===140,p=f.kind===65536,d=!1,v=f.getParentDecl();v&&(v.kind===8||n)&&(d=!0);var m=null,g=o,y=g.getScopedName(l?l.getSymbol():null);g.isContainer()&&!g.isEnum()?(e.isQuoted(y)||(y="'"+y+"'"),c?n?m=e.DiagnosticCode.Return_type_of_public_static_property_getter_from_exported_class_is_using_inaccessible_module_0:m=e.DiagnosticCode.Return_type_of_public_property_getter_from_exported_class_is_using_inaccessible_module_0:f.kind===2097152?m=e.DiagnosticCode.Return_type_of_constructor_signature_from_exported_interface_is_using_inaccessible_module_0:f.kind===1048576?m=e.DiagnosticCode.Return_type_of_call_signature_from_exported_interface_is_using_inaccessible_module_0:f.kind===4194304?m=e.DiagnosticCode.Return_type_of_index_signature_from_exported_interface_is_using_inaccessible_module_0:p?n?m=e.DiagnosticCode.Return_type_of_public_static_method_from_exported_class_is_using_inaccessible_module_0:d?m=e.DiagnosticCode.Return_type_of_public_method_from_exported_class_is_using_inaccessible_module_0:m=e.DiagnosticCode.Return_type_of_method_from_exported_interface_is_using_inaccessible_module_0:!h&&t.kind()!==137&&(m=e.DiagnosticCode.Return_type_of_exported_function_is_using_inaccessible_module_0)):c?n?m=e.DiagnosticCode.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_type_0:m=e.DiagnosticCode.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_type_0:f.kind===2097152?m=e.DiagnosticCode.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_type_0:f.kind===1048576?m=e.DiagnosticCode.Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_type_0:f.kind===4194304?m=e.DiagnosticCode.Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_type_0:p?n?m=e.DiagnosticCode.Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_type_0:d?m=e.DiagnosticCode.Return_type_of_public_method_from_exported_class_has_or_is_using_private_type_0:m=e.DiagnosticCode.Return_type_of_method_from_exported_interface_has_or_is_using_private_type_0:!h&&t.kind()!==137&&(m=e.DiagnosticCode.Return_type_of_exported_function_has_or_is_using_private_type_0);if(m){var b=[y],w=!1;if(r){var E=this.resolveTypeReference(r,u);e.PullHelpers.typeSymbolsAreIdentical(E,s)&&u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,m,b))}if(i){var S=function(t,n){var r=!0;switch(t.kind()){case 129:case 219:case 218:case 222:r=!1;break;case 150:var i=t,o=a.resolveAST(i.expression,!1,u).type;e.PullHelpers.typeSymbolsAreIdentical(o,s)?u.postDiagnostic(a.semanticInfoChain.diagnosticFromAST(i,m,b)):w=!0,r=!1;break;default:}return n.options.goChildren=r,t};e.getAstWalkerFactory().walk(i,S)}w&&u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,m,b))}},t.prototype.enclosingClassIsDerived=function(t){e.Debug.assert(t.kind===8);var n=t.getSymbol();return n.getExtendedTypes().length>0},t.prototype.isSuperInvocationExpression=function(e){if(e.kind()===213){var t=e;if(t.expression.kind()===50)return!0}return!1},t.prototype.isSuperInvocationExpressionStatement=function(e){if(e&&e.kind()===149){var t=e;if(this.isSuperInvocationExpression(t.expression))return!0}return!1},t.prototype.getFirstStatementOfBlockOrNull=function(e){return e&&e.statements&&e.statements.childCount()>0?e.statements.childAt(0):null},t.prototype.superCallMustBeFirstStatementInConstructor=function(t){e.Debug.assert(t.kind===32768);if(t){var n=t.getParentDecl(),r=n.getSymbol();if(r.getExtendedTypes().length===0)return!1;var i=r.getMembers();for(var s=0,o=i.length;s<o;s++){var u=i[s];if(u.kind===4096){var a=u.getDeclarations();for(var f=0,l=a.length;f<l;f++){var c=a[f],h=this.semanticInfoChain.getASTForDecl(c);if(h.kind()===242)return!0;if(h.kind()===136){var p=h;if(p.variableDeclarator.equalsValueClause)return!0}}}}}return!1},t.prototype.checkForThisCaptureInArrowFunction=function(t){var n=this.getEnclosingDeclForAST(t),r=n.getParentPath();if(r.length){var i=!1;for(var s=r.length-1;s>=0;s--){var o=r[s],u=o.kind,a=o.flags;if(u===131072&&e.hasFlag(a,8192)){i=!0;continue}if(i){if(u===16384||u===65536||u===32768||u===262144||u===524288||u===131072||u===8||u===4||u===32||u===1){o.setFlags(o.flags|262144);if(u===8){var f=o.getSymbol().getConstructorMethod(),l=f.getDeclarations();for(var s=0;s<l.length;s++)l[s].flags=l[s].flags|262144}break}}else if(u===16384||u===131072)break}}},t.prototype.typeCheckMembersAgainstIndexer=function(t,n,r){var i=this.getBothKindsOfIndexSignaturesExcludingAugmentedType(t,r),s=i.stringSignature,o=i.numericSignature;if(s||o){var u=n.getChildDecls();for(var a=0;a<u.length;a++){var f=u[a];if((f.name||f.kind===4096&&f.name==="")&&f.kind!==32768&&!e.hasFlag(f.flags,16)){var c=f.getSymbol(),h=this.determineRelevantIndexerForMember(c,o,s);if(h){var p=new l;this.sourceIsAssignableToTarget(c.type,h.returnType,f.ast(),r,p)||this.reportErrorThatMemberIsNotSubtypeOfIndexer(c,h,f.ast(),r,p)}}}}},t.prototype.determineRelevantIndexerForMember=function(t,n,r){return n&&e.PullHelpers.isNameNumeric(t.name)?n:r?r:null},t.prototype.reportErrorThatMemberIsNotSubtypeOfIndexer=function(t,n,r,i,s){var o=this.getEnclosingSymbolForAST(r);n.parameters[0].type===this.semanticInfoChain.numberTypeSymbol?s.message?i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.All_numerically_named_properties_must_be_assignable_to_numeric_indexer_type_0_NL_1,[n.returnType.toString(o),s.message])):i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.All_numerically_named_properties_must_be_assignable_to_numeric_indexer_type_0,[n.returnType.toString(o)])):s.message?i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.All_named_properties_must_be_assignable_to_string_indexer_type_0_NL_1,[n.returnType.toString(o),s.message])):i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(r,e.DiagnosticCode.All_named_properties_must_be_assignable_to_string_indexer_type_0,[n.returnType.toString(o)]))},t.prototype.typeCheckIfTypeMemberPropertyOkToOverride=function(t,n,r,i,s,o){if(!t.isClass())return!0;var u=r.kind,a=i.kind;if(u===a)return!0;var f;u===4096?r.isAccessor()?f=e.DiagnosticCode.Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function:f=e.DiagnosticCode.Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:u===65536&&(i.isAccessor()?f=e.DiagnosticCode.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:f=e.DiagnosticCode.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property);var l=e.getDiagnosticMessage(f,[t.toString(),r.getScopedNameEx().toString(),n.toString()]);return o.addMessage(l),!1},t.prototype.typeCheckIfTypeExtendsType=function(t,n,r,i,s,o){var u=r.getMembers(),a=new l,f=!1,c=!1,h=!1;for(var p=0;p<u.length;p++){var d=u[p].name,v=i.findMember(d,!0);if(v){this.resolveDeclaredSymbol(v,o),c=!this.typeCheckIfTypeMemberPropertyOkToOverride(r,i,u[p],v,s,a),c||(h=!this.sourcePropertyIsAssignableToTargetProperty(r,i,u[p],v,t,o,a));if(c||h){f=!0;break}}}!f&&r.hasOwnCallSignatures()&&(f=!this.sourceCallSignaturesAreAssignableToTargetCallSignatures(r,i,t,o,a)),!f&&r.hasOwnConstructSignatures()&&(f=!this.sourceConstructSignaturesAreAssignableToTargetConstructSignatures(r,i,t,o,a)),!f&&r.hasOwnIndexSignatures()&&(f=!this.sourceIndexSignaturesAreAssignableToTargetIndexSignatures(r,i,t,o,a));if(!f&&r.isClass()){var m=r.getConstructorMethod().type,g=m.getMembers();if(g.length){var y=i.getConstructorMethod().type,b=new l(a);for(var p=0;p<g.length;p++){var d=g[p].name,w=y.findMember(d,!0);if(w){w.isResolved||this.resolveDeclaredSymbol(w,o);if(!this.sourcePropertyIsAssignableToTargetProperty(m,y,g[p],w,t,o,a)){f=!0;break}}}}}if(f){var E;r.isClass()?E=e.DiagnosticCode.Class_0_cannot_extend_class_1_NL_2:i.isClass()?E=e.DiagnosticCode.Interface_0_cannot_extend_class_1_NL_2:E=e.DiagnosticCode.Interface_0_cannot_extend_interface_1_NL_2,o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,E,[r.getScopedName(),i.getScopedName(),a.message]))}},t.prototype.typeCheckIfClassImplementsType=function(t,n,r,i,s){var o=new l,u=!this.sourceMembersAreAssignableToTargetMembers(n,r,t,s,o);u||(u=!this.sourceCallSignaturesAreAssignableToTargetCallSignatures(n,r,t,s,o),u||(u=!this.sourceConstructSignaturesAreAssignableToTargetConstructSignatures(n,r,t,s,o),u||(u=!this.sourceIndexSignaturesAreAssignableToTargetIndexSignatures(n,r,t,s,o))));if(u){var a=this.getEnclosingSymbolForAST(t);s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t.identifier,e.DiagnosticCode.Class_0_declares_interface_1_but_does_not_implement_it_NL_2,[n.getScopedName(a),r.getScopedName(a),o.message]))}},t.prototype.computeValueSymbolFromAST=function(t,n){var r=n.inTypeCheck;n.inTypeCheck=!1;var i=this.semanticInfoChain.getAliasSymbolForAST(t);if(t.kind()==11)var s=this.computeNameExpression(t,n);else{e.Debug.assert(t.kind()==121);var o=t,u=this.computeValueSymbolFromAST(o.left,n),s=this.computeDottedNameExpressionFromLHS(u.symbol,o.left,o.right,n,!1)}var a=this.semanticInfoChain.getAliasSymbolForAST(t);return this.semanticInfoChain.setAliasSymbolForAST(t,i),n.inTypeCheck=r,{symbol:s,alias:a}},t.prototype.hasClassTypeSymbolConflictAsValue=function(e,t,n,r){var i=this.semanticInfoChain.getAliasSymbolForAST(e),s=e.kind()==126?e.name:e,o=this.computeValueSymbolFromAST(s,r),u=o.symbol,a=o.alias;if(i&&a)return i!==a;if(!u.anyDeclHasFlag(16384))return!0;var f=u.type?u.type.getAssociatedContainerType():null;return f?f!==t.getRootSymbol():!0},t.prototype.typeCheckBase=function(t,n,r,i,s,o,u){var a=this,f=this.semanticInfoChain.getDeclForAST(t),l=this.resolveTypeReference(i,u).type;if(!l)return;var c=r.isClass();if(!r.isValidBaseKind(l,s)){l.isError()||(s?c?u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(i,e.DiagnosticCode.A_class_may_only_extend_another_class)):u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(i,e.DiagnosticCode.An_interface_may_only_extend_another_class_or_interface)):u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(i,e.DiagnosticCode.A_class_may_only_implement_another_class_or_interface)));return}c&&s&&this.hasClassTypeSymbolConflictAsValue(i,l,o,u)&&u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(i,e.DiagnosticCode.Type_name_0_in_extends_clause_does_not_reference_constructor_function_for_1,[e.ASTHelpers.getNameOfIdenfierOrQualifiedName(i.kind()==126?i.name:i),l.toString(o?o.getSymbol():null)]));if(l.hasBase(r)){r.setHasBaseTypeConflict(),l.setHasBaseTypeConflict(),u.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,c?e.DiagnosticCode.Class_0_is_recursively_referenced_as_a_base_type_of_itself:e.DiagnosticCode.Interface_0_is_recursively_referenced_as_a_base_type_of_itself,[r.getScopedName()]));return}s?this.typeCheckCallBacks.push(function(e){return a.typeCheckIfTypeExtendsType(t,n,r,l,o,e)}):(e.Debug.assert(t.kind()===131),this.typeCheckCallBacks.push(function(e){return a.typeCheckIfClassImplementsType(t,r,l,o,e)})),this.checkSymbolPrivacy(r,l,function(e){return a.baseListPrivacyErrorReporter(t,r,i,s,e,u)})},t.prototype.typeCheckBases=function(t,n,r,i,s,o){var u=this,a=e.ASTHelpers.getExtendsHeritageClause(r),f=e.ASTHelpers.getImplementsHeritageClause(r);if(!a&&!f)return;if(a)for(var l=0;l<a.typeNames.nonSeparatorCount();l++)this.typeCheckBase(t,n,i,a.typeNames.nonSeparatorAt(l),!0,s,o);if(i.isClass()){if(f)for(var l=0;l<f.typeNames.nonSeparatorCount();l++)this.typeCheckBase(t,n,i,f.typeNames.nonSeparatorAt(l),!1,s,o)}else if(a&&!i.hasBaseTypeConflict()&&i.getExtendedTypes().length>1){var c=e.ArrayUtilities.firstOrDefault(i.getDeclarations(),function(e){return e.ast().heritageClauses!==null}).ast();t===c&&this.typeCheckCallBacks.push(function(e){u.checkTypeCompatibilityBetweenBases(t.identifier,i,e)})}},t.prototype.checkTypeCompatibilityBetweenBases=function(t,n,r){var i=n.getOwnIndexSignatures(),s=e.createIntrinsicsObject(),u=new o,a=!1,f=!1;if(n.hasOwnIndexSignatures()){var l=n.getOwnIndexSignatures();for(var c=0;c<l.length;c++)l[c].parameters[0].type===this.semanticInfoChain.numberTypeSymbol?a=!0:f=!0}var h=n.getExtendedTypes();for(var c=0;c<h.length;c++)if(this.checkNamedPropertyIdentityBetweenBases(t,n,h[c],s,r)||this.checkIndexSignatureIdentityBetweenBases(t,n,h[c],u,a,f,r))return;if(this.checkThatInheritedNumberSignatureIsSubtypeOfInheritedStringSignature(t,n,u,r))return;this.checkInheritedMembersAgainstInheritedIndexSignatures(t,n,u,s,r)},t.prototype.checkNamedPropertyIdentityBetweenBases=function(t,n,r,s,o){var u=r.getAllMembers(69632,0);for(var a=0;a<u.length;a++){var f=u[a],l=f.name;if(n.findMember(l,!1))continue;this.resolveDeclaredSymbol(f,o);if(s[l]){var c=s[l];if(c.baseOrigin!==r&&!this.propertiesAreIdenticalWithNewEnclosingTypes(r,c.baseOrigin,f,c.memberSymbol,o)){var h=e.getDiagnosticMessage(e.DiagnosticCode.Named_properties_0_of_types_1_and_2_are_not_identical,[l,c.baseOrigin.getScopedName(),r.getScopedName()]);return o.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3,[n.getDisplayName(),c.baseOrigin.getScopedName(),r.getScopedName(),h])),!0}}else s[l]=new i(f,r)}return!1},t.prototype.checkIndexSignatureIdentityBetweenBases=function(t,n,r,i,o,u,a){if(o&&u)return!1;var f=r.getIndexSignatures();for(var l=0;l<f.length;l++){var c=f[l],h=c.parameters[0].type===this.semanticInfoChain.stringTypeSymbol,p=c.parameters[0].type===this.semanticInfoChain.numberTypeSymbol;if(h&&u||p&&o)continue;if(h)if(i.stringSignatureWithBaseOrigin){if(i.stringSignatureWithBaseOrigin.baseOrigin!==r&&!this.typesAreIdentical(i.stringSignatureWithBaseOrigin.signature.returnType,c.returnType,a)){var d=e.getDiagnosticMessage(e.DiagnosticCode.Types_of_string_indexer_of_types_0_and_1_are_not_identical,[i.stringSignatureWithBaseOrigin.baseOrigin.getScopedName(),r.getScopedName()]);return a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3,[n.getDisplayName(),i.stringSignatureWithBaseOrigin.baseOrigin.getScopedName(),r.getScopedName(),d])),!0}}else i.stringSignatureWithBaseOrigin=new s(c,r);else if(p)if(i.numberSignatureWithBaseOrigin){if(i.numberSignatureWithBaseOrigin.baseOrigin!==r&&!this.typesAreIdentical(i.numberSignatureWithBaseOrigin.signature.returnType,c.returnType,a)){var d=e.getDiagnosticMessage(e.DiagnosticCode.Types_of_number_indexer_of_types_0_and_1_are_not_identical,[i.numberSignatureWithBaseOrigin.baseOrigin.getScopedName(),r.getScopedName()]);return a.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3,[n.getDisplayName(),i.numberSignatureWithBaseOrigin.baseOrigin.getScopedName(),r.getScopedName(),d])),!0}}else i.numberSignatureWithBaseOrigin=new s(c,r)}return!1},t.prototype.checkInheritedMembersAgainstInheritedIndexSignatures=function(t,n,r,i,s){if(!r.stringSignatureWithBaseOrigin&&!r.numberSignatureWithBaseOrigin)return!1;var o=new l,u=r.stringSignatureWithBaseOrigin&&r.stringSignatureWithBaseOrigin.signature,a=r.numberSignatureWithBaseOrigin&&r.numberSignatureWithBaseOrigin.signature;for(var f in i){var c=i[f];if(!c)continue;var h=this.determineRelevantIndexerForMember(c.memberSymbol,a,u);if(!h)continue;var p=h.parameters[0].type===this.semanticInfoChain.numberTypeSymbol,d=p?r.numberSignatureWithBaseOrigin.baseOrigin:r.stringSignatureWithBaseOrigin.baseOrigin;if(d===c.baseOrigin)continue;var v=this.sourceIsAssignableToTarget(c.memberSymbol.type,h.returnType,t,s,o);if(!v){var m=this.getEnclosingSymbolForAST(t);if(p){var g=e.getDiagnosticMessage(e.DiagnosticCode.Type_of_property_0_in_type_1_is_not_assignable_to_number_indexer_type_in_type_2_NL_3,[f,c.baseOrigin.getScopedName(m),r.numberSignatureWithBaseOrigin.baseOrigin.getScopedName(m),o.message]);s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3,[n.getDisplayName(m),c.baseOrigin.getScopedName(m),r.numberSignatureWithBaseOrigin.baseOrigin.getScopedName(m),g]))}else{var g=e.getDiagnosticMessage(e.DiagnosticCode.Type_of_property_0_in_type_1_is_not_assignable_to_string_indexer_type_in_type_2_NL_3,[f,c.baseOrigin.getScopedName(m),r.stringSignatureWithBaseOrigin.baseOrigin.getScopedName(m),o.message]);s.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3,[n.getDisplayName(m),c.baseOrigin.getScopedName(m),r.stringSignatureWithBaseOrigin.baseOrigin.getScopedName(m),g]))}return!0}}return!1},t.prototype.checkThatInheritedNumberSignatureIsSubtypeOfInheritedStringSignature=function(t,n,r,i){if(r.numberSignatureWithBaseOrigin&&r.stringSignatureWithBaseOrigin){if(r.numberSignatureWithBaseOrigin.baseOrigin===r.stringSignatureWithBaseOrigin.baseOrigin)return!1;var s=new l,o=this.sourceIsAssignableToTarget(r.numberSignatureWithBaseOrigin.signature.returnType,r.stringSignatureWithBaseOrigin.signature.returnType,t,i,s);if(!o){var u=this.getEnclosingSymbolForAST(t),a=e.getDiagnosticMessage(e.DiagnosticCode.Type_of_number_indexer_in_type_0_is_not_assignable_to_string_indexer_type_in_type_1_NL_2,[r.numberSignatureWithBaseOrigin.baseOrigin.getScopedName(u),r.stringSignatureWithBaseOrigin.baseOrigin.getScopedName(u),s.message]);return i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Interface_0_cannot_simultaneously_extend_types_1_and_2_NL_3,[n.getDisplayName(u),r.numberSignatureWithBaseOrigin.baseOrigin.getScopedName(),r.stringSignatureWithBaseOrigin.baseOrigin.getScopedName(u),a])),!0}}return!1},t.prototype.checkAssignability=function(t,n,r,i){var s=new l,o=this.sourceIsAssignableToTarget(n,r,t,i,s);if(!o){var u=this.getEnclosingSymbolForAST(t);s.message?i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1_NL_2,[n.toString(u),r.toString(u),s.message])):i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode.Cannot_convert_0_to_1,[n.toString(u),r.toString(u)]))}},t.prototype.isReference=function(e,t){if(e.kind()===217)return this.isReference(e.expression,t);if(e.kind()!==11&&e.kind()!==212&&e.kind()!==221)return!1;if(e.kind()===11){if(t.kind===512&&t.anyDeclHasFlag(4096))return!1;if(t.kind===512&&t.anyDeclHasFlag(102400))return!1;if(t.kind===32768||t.kind===16384)return!1}return e.kind()===212&&t.kind===67108864?!1:!0},t.prototype.checkForSuperMemberAccess=function(t,n,r,i){return r&&t.kind()===50&&!r.isError()&&r.kind!==65536?(i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(n,e.DiagnosticCode.Only_public_methods_of_the_base_class_are_accessible_via_the_super_keyword)),!0):!1},t.prototype.getEnclosingDeclForAST=function(e){return this.semanticInfoChain.getEnclosingDecl(e)},t.prototype.getEnclosingSymbolForAST=function(e){var t=this.getEnclosingDeclForAST(e);return t?t.getSymbol():null},t.prototype.checkForPrivateMemberAccess=function(t,n,r,i){if(r&&r.anyDeclHasFlag(2)){var s=r.getContainer();s&&s.kind===33554432&&(s=s.getAssociatedContainerType());if(s&&s.isClass()){var o=s.getDeclarations()[0].ast();e.Debug.assert(o);var u=this.getEnclosingClassDeclaration(t);if(!u||u!==o)return i.postDiagnostic(this.semanticInfoChain.diagnosticFromAST(t,e.DiagnosticCode._0_1_is_inaccessible,[s.toString(null,!1),t.text()])),!0}}return!1},t.prototype.instantiateType=function(t,n){return t.isPrimitive()?t:t.isError()?t:n[t.pullSymbolID]?n[t.pullSymbolID]:(t._resolveDeclaredSymbol(),t.isTypeParameter()?this.instantiateTypeParameter(t,n):t.wrapsSomeTypeParameter(n)?e.PullInstantiatedTypeReferenceSymbol.create(this,t,n):t)},t.prototype.instantiateTypeParameter=function(t,n){var r=t.getConstraint();if(!r)return t;var i=this.instantiateType(r,n);if(i==r)return t;var s=t.getRootSymbol(),o=s.getSpecialization([i]);return o?o:(o=new e.PullInstantiatedTypeParameterSymbol(s,i),o)},t.prototype.instantiateSignature=function(t,n){if(!t.wrapsSomeTypeParameter(n))return t;var r=t.getRootSymbol(),i=new e.PullInstantiationHelpers.MutableTypeArgumentMap(n);e.PullInstantiationHelpers.instantiateTypeArgument(this,t,i);var s=r.getSpecialization(i.typeParameterArgumentMap);if(s)return s;e.PullInstantiationHelpers.cleanUpTypeArgumentMap(t,i),n=i.typeParameterArgumentMap,s=new e.PullInstantiatedSignatureSymbol(r,n),s.returnType=this.instantiateType(r.returnType||this.semanticInfoChain.anyTypeSymbol,n),s.functionType=this.instantiateType(r.functionType,n);var o=r.parameters,u=null;if(o)for(var a=0;a<o.length;a++)u=new e.PullSymbol(o[a].name,2048),u.setRootSymbol(o[a]),o[a].isOptional&&(u.isOptional=!0),o[a].isVarArg&&(u.isVarArg=!0,s.hasVarArgs=!0),s.addParameter(u,u.isOptional),u.type=this.instantiateType(o[a].type,n);return s},t.globalTypeCheckPhase=0,t}();e.PullTypeResolver=f;var l=function(){function t(e,t){this.onlyCaptureFirstError=!1,this.flags=0,this.message="",this.stringConstantVal=null,this.indent=1,e&&(this.flags=e.flags,this.onlyCaptureFirstError=e.onlyCaptureFirstError,this.stringConstantVal=e.stringConstantVal,this.indent=e.indent,t||this.indent++)}return t.prototype.indentString=function(){var e="";for(var t=0;t<this.indent;t++)e+="	";return e},t.prototype.addMessage=function(t){!this.onlyCaptureFirstError&&this.message?this.message=this.message+e.newLine()+this.indentString()+t:this.message=this.indentString()+t},t}();e.TypeComparisonInfo=l,e.getPropertyAssignmentNameTextFromIdentifier=c,e.isTypesOnlyLocation=h})(r||(r={}));var r;(function(e){e.declCacheHit=0,e.declCacheMiss=0,e.symbolCacheHit=0,e.symbolCacheMiss=0;var t=[],n=function(){function t(t,n){this.compiler=t,this.logger=n,this.documents=[],this.fileNameToDocument=e.createIntrinsicsObject(),this.anyTypeDecl=null,this.booleanTypeDecl=null,this.numberTypeDecl=null,this.stringTypeDecl=null,this.nullTypeDecl=null,this.undefinedTypeDecl=null,this.voidTypeDecl=null,this.undefinedValueDecl=null,this.anyTypeSymbol=null,this.booleanTypeSymbol=null,this.numberTypeSymbol=null,this.stringTypeSymbol=null,this.nullTypeSymbol=null,this.undefinedTypeSymbol=null,this.voidTypeSymbol=null,this.undefinedValueSymbol=null,this.emptyTypeSymbol=null,this.astSymbolMap=[],this.astAliasSymbolMap=[],this.astCallResolutionDataMap=[],this.declSymbolMap=[],this.declSignatureSymbolMap=[],this.declCache=null,this.symbolCache=null,this.fileNameToDiagnostics=null,this._binder=null,this._resolver=null,this._topLevelDecls=null,this._fileNames=null;var r=new e.RootPullDecl("","",0,0,this,!1);this.documents[0]=new e.Document(this.compiler,this,"",[],null,0,0,!1,null,r),this.anyTypeDecl=new e.NormalPullDecl("any","any",2,0,r),this.booleanTypeDecl=new e.NormalPullDecl("boolean","boolean",2,0,r),this.numberTypeDecl=new e.NormalPullDecl("number","number",2,0,r),this.stringTypeDecl=new e.NormalPullDecl("string","string",2,0,r),this.voidTypeDecl=new e.NormalPullDecl("void","void",2,0,r),this.nullTypeDecl=new e.RootPullDecl("null","",2,0,this,!1),this.undefinedTypeDecl=new e.RootPullDecl("undefined","",2,0,this,!1),this.undefinedValueDecl=new e.NormalPullDecl("undefined","undefined",512,8,r),this.invalidate()}return t.prototype.getDocument=function(e){var t=this.fileNameToDocument[e];return t||null},t.prototype.lineMap=function(e){return this.getDocument(e).lineMap()},t.prototype.fileNames=function(){return this._fileNames===null&&(this._fileNames=this.documents.slice(1).map(function(e){return e.fileName})),this._fileNames},t.prototype.bindPrimitiveSymbol=function(e,t){return t.addDeclaration(e),e.setSymbol(t),t.setResolved(),t},t.prototype.addPrimitiveTypeSymbol=function(t){var n=new e.PullPrimitiveTypeSymbol(t.name);return this.bindPrimitiveSymbol(t,n)},t.prototype.addPrimitiveValueSymbol=function(t,n){var r=new e.PullSymbol(t.name,512);return r.type=n,this.bindPrimitiveSymbol(t,r)},t.prototype.resetGlobalSymbols=function(){this.anyTypeSymbol=this.addPrimitiveTypeSymbol(this.anyTypeDecl),this.booleanTypeSymbol=this.addPrimitiveTypeSymbol(this.booleanTypeDecl),this.numberTypeSymbol=this.addPrimitiveTypeSymbol(this.numberTypeDecl),this.stringTypeSymbol=this.addPrimitiveTypeSymbol(this.stringTypeDecl),this.voidTypeSymbol=this.addPrimitiveTypeSymbol(this.voidTypeDecl),this.nullTypeSymbol=this.addPrimitiveTypeSymbol(this.nullTypeDecl),this.undefinedTypeSymbol=this.addPrimitiveTypeSymbol(this.undefinedTypeDecl),this.undefinedValueSymbol=this.addPrimitiveValueSymbol(this.undefinedValueDecl,this.undefinedTypeSymbol);var t=new e.PullSynthesizedDecl("{}","{}",8388608,0,null,this),n=new e.PullTypeSymbol("{}",8388608);t.setSymbol(n),n.addDeclaration(t),n.setResolved(),this.emptyTypeSymbol=n},t.prototype.addDocument=function(t){var n=t.fileName,r=e.ArrayUtilities.indexOf(this.documents,function(e){return e.fileName===n});r<0?this.documents.push(t):this.documents[r]=t,this.fileNameToDocument[n]=t,this.invalidate()},t.prototype.removeDocument=function(t){e.Debug.assert(t!=="","Can't remove the semantic info for the global decl.");var n=e.ArrayUtilities.indexOf(this.documents,function(e){return e.fileName===t});n>0&&(this.fileNameToDocument[t]=undefined,this.documents.splice(n,1),this.invalidate())},t.prototype.getDeclPathCacheID=function(e,t){var n="";for(var r=0;r<e.length;r++)n+="#"+e[r];return n+"#"+t.toString()},t.prototype.findTopLevelSymbol=function(e,t,n){var r=this.getDeclPathCacheID([e],t),i=this.symbolCache[r];if(!i){for(var s=0,o=this.documents.length;s<o;s++){var u=this.documents[s].topLevelDecl(),i=this.findTopLevelSymbolInDecl(u,e,t,n);if(i)break;if(n&&u.name===n.fileName())return null}i&&(this.symbolCache[r]=i)}return i},t.prototype.findTopLevelSymbolInDecl=function(e,t,n,r){var i=r&&r.fileName()===e.fileName()?r.ast().start():-1,s=e.searchChildDecls(t,n);for(var o=0;o<s.length;o++){var u=s[o];if(i!==-1&&u.ast()&&u.ast().start()>i)break;var a=s[o].getSymbol();if(a)return a}return null},t.prototype.findExternalModule=function(t){t=e.normalizePath(t);var n=t+".ts",r=this.getDeclPathCacheID([n],32);o=this.symbolCache[r];if(o!=undefined)return o;var i=t+".d.ts",s=this.getDeclPathCacheID([i],32),o=this.symbolCache[s];if(o)return o;var u;for(var a=0;a<this.documents.length;a++){var f=this.documents[a],l=f.topLevelDecl();if(l.isExternalModule()){var c=f.fileName===n;if(c||f.fileName===i){var h=l.getChildDecls()[0];o=h.getSymbol();if(c)return this.symbolCache[r]=o,o;u=o}}}return u?(this.symbolCache[s]=o,u):(this.symbolCache[s]=null,this.symbolCache[r]=null,null)},t.prototype.findAmbientExternalModuleInGlobalContext=function(e){var t=this.getDeclPathCacheID([e],32),n=this.symbolCache[t];if(n==undefined){n=null;for(var r=0;r<this.documents.length;r++){var i=this.documents[r],s=i.topLevelDecl();if(!s.isExternalModule()){var o=s.searchChildDecls(e,32);if(o.length){n=o[0].getSymbol();break}}}this.symbolCache[t]=n}return n},t.prototype.findDecls=function(t,n){var r=this.getDeclPathCacheID(t,n);if(t.length){var i=this.declCache[r];if(i&&i.length)return e.declCacheHit++,i}e.declCacheMiss++;var s=this.topLevelDecls(),o=e.sentinelEmptyArray,u,a=e.sentinelEmptyArray;for(var f=0;f<t.length;f++){u=t[f],o=e.sentinelEmptyArray;var l=f===t.length-1?n:164;for(var c=0;c<s.length;c++){a=s[c].searchChildDecls(u,l);for(var h=0;h<a.length;h++)o===e.sentinelEmptyArray&&(o=[]),o[o.length]=a[h]}s=o;if(!s)break}return o.length&&(this.declCache[r]=o),o},t.prototype.findDeclsFromPath=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){if(e[r].kind&1)continue;n.push(e[r].name)}return this.findDecls(n,t)},t.prototype.findSymbol=function(t,n){var r=this.getDeclPathCacheID(t,n);if(t.length){var i=this.symbolCache[r];if(i)return e.symbolCacheHit++,i}e.symbolCacheMiss++;var s=this.findDecls(t,n),o=null;if(s.length){var u=s[0];if(e.hasFlag(u.kind,164)){var a=u.getValueDecl();a&&a.ensureSymbolIsBound()}o=u.getSymbol();if(o){for(var f=1;f<s.length;f++)s[f].ensureSymbolIsBound();this.symbolCache[r]=o}}return o},t.prototype.cacheGlobalSymbol=function(e,t){var n=this.getDeclPathCacheID([e.name],t),r=this.getDeclPathCacheID([e.name],e.kind);this.symbolCache[n]||(this.symbolCache[n]=e),this.symbolCache[r]||(this.symbolCache[r]=e)},t.prototype.invalidate=function(t,n){typeof t=="undefined"&&(t=null),typeof n=="undefined"&&(n=null),e.PullTypeResolver.globalTypeCheckPhase++;var r=(new Date).getTime();this.astSymbolMap.length=0,this.astAliasSymbolMap.length=0,this.astCallResolutionDataMap.length=0,this.declCache=e.createIntrinsicsObject(),this.symbolCache=e.createIntrinsicsObject(),this.fileNameToDiagnostics=e.createIntrinsicsObject(),this._binder=null,this._resolver=null,this._topLevelDecls=null,this._fileNames=null,this.declSymbolMap.length=0,this.declSignatureSymbolMap.length=0;if(t&&n&&this.settingsChangeAffectsSyntax(t,n))for(var i=1,s=this.documents.length;i<s;i++)this.documents[i].invalidate();e.pullSymbolID=0,this.resetGlobalSymbols();var o=(new Date).getTime()},t.prototype.settingsChangeAffectsSyntax=function(e,t){return e.allowAutomaticSemicolonInsertion()!==t.allowAutomaticSemicolonInsertion()||e.codeGenTarget()!==t.codeGenTarget()||e.propagateEnumConstants()!==t.propagateEnumConstants()},t.prototype.setSymbolForAST=function(e,t){this.astSymbolMap[e.syntaxID()]=t},t.prototype.getSymbolForAST=function(e){return this.astSymbolMap[e.syntaxID()]||null},t.prototype.setAliasSymbolForAST=function(e,t){this.astAliasSymbolMap[e.syntaxID()]=t},t.prototype.getAliasSymbolForAST=function(e){return this.astAliasSymbolMap[e.syntaxID()]},t.prototype.getCallResolutionDataForAST=function(e){return this.astCallResolutionDataMap[e.syntaxID()]},t.prototype.setCallResolutionDataForAST=function(e,t){t&&(this.astCallResolutionDataMap[e.syntaxID()]=t)},t.prototype.setSymbolForDecl=function(e,t){this.declSymbolMap[e.declID]=t},t.prototype.getSymbolForDecl=function(e){return this.declSymbolMap[e.declID]},t.prototype.setSignatureSymbolForDecl=function(e,t){this.declSignatureSymbolMap[e.declID]=t},t.prototype.getSignatureSymbolForDecl=function(e){return this.declSignatureSymbolMap[e.declID]},t.prototype.addDiagnostic=function(e){var t=e.fileName(),n=this.fileNameToDiagnostics[t];n||(n=[],this.fileNameToDiagnostics[t]=n),n.push(e)},t.prototype.getDiagnostics=function(e){var t=this.fileNameToDiagnostics[e];return t||[]},t.prototype.getBinder=function(){return this._binder||(this._binder=new e.PullSymbolBinder(this)),this._binder},t.prototype.getResolver=function(){return this._resolver||(this._resolver=new e.PullTypeResolver(this.compiler.compilationSettings(),this)),this._resolver},t.prototype.addSyntheticIndexSignature=function(t,n,r,i,s,o){var u=new e.PullSignatureSymbol(4194304),a=new e.PullSymbol(i,2048);a.type=s,u.addParameter(a),u.returnType=o,u.setResolved(),a.setResolved(),n.addIndexSignature(u);var f=new e.PullSynthesizedDecl("","",4194304,2048,t,t.semanticInfoChain),l=new e.PullSynthesizedDecl(i,i,2048,0,f,t.semanticInfoChain);f.setSignatureSymbol(u),l.setSymbol(a),u.addDeclaration(f),a.addDeclaration(l)},t.prototype.getDeclForAST=function(e){var t=this.getDocument(e.fileName());return t?t._getDeclForAST(e):null},t.prototype.getEnclosingDecl=function(e){return this.getDocument(e.fileName()).getEnclosingDecl(e)},t.prototype.setDeclForAST=function(e,t){this.getDocument(t.fileName())._setDeclForAST(e,t)},t.prototype.getASTForDecl=function(e){var t=this.getDocument(e.fileName());return t?t._getASTForDecl(e):null},t.prototype.setASTForDecl=function(e,t){this.getDocument(e.fileName())._setASTForDecl(e,t)},t.prototype.topLevelDecl=function(e){var t=this.getDocument(e);return t?t.topLevelDecl():null},t.prototype.topLevelDecls=function(){return this._topLevelDecls||(this._topLevelDecls=e.ArrayUtilities.select(this.documents,function(e){return e.topLevelDecl()})),this._topLevelDecls},t.prototype.addDiagnosticFromAST=function(e,t,n,r){typeof n=="undefined"&&(n=null),typeof r=="undefined"&&(r=null),this.addDiagnostic(this.diagnosticFromAST(e,t,n,r))},t.prototype.diagnosticFromAST=function(t,n,r,i){return typeof r=="undefined"&&(r=null),typeof i=="undefined"&&(i=null),new e.Diagnostic(t.fileName(),this.lineMap(t.fileName()),t.start(),t.width(),n,r,i)},t.prototype.locationFromAST=function(t){return new e.Location(t.fileName(),this.lineMap(t.fileName()),t.start(),t.width())},t.prototype.duplicateIdentifierDiagnosticFromAST=function(t,n,r){return this.diagnosticFromAST(t,e.DiagnosticCode.Duplicate_identifier_0,[n],r?[this.locationFromAST(r)]:null)},t.prototype.addDuplicateIdentifierDiagnosticFromAST=function(e,t,n){this.addDiagnostic(this.duplicateIdentifierDiagnosticFromAST(e,t,n))},t}();e.SemanticInfoChain=n})(r||(r={}));var r;(function(e){function n(e){return e.any(function(e){return e.kind()===134})}function r(e){e=e.parent;while(e){if(e.kind()===130){var t=e;return n(t.moduleElements)}if(e.kind()===120){var r=e;return n(r.moduleElements)}e=e.parent}return!1}function i(t,n){t=t.parent;while(t){if(t.kind()===130&&e.hasModifier(t.modifiers,8))return!0;t=t.parent}return!1}function s(t,n){var i=t,s=0,o=n.getParent();e.hasModifier(i.modifiers,1)&&!r(t)&&(s|=1);var u=new e.NormalPullDecl(i.identifier.valueText(),i.identifier.text(),128,s,o);n.semanticInfoChain.setDeclForAST(t,u),n.semanticInfoChain.setASTForDecl(u,t)}function o(t,r){var i=t.fileName(),s=r.document.isExternalModule(),o=new e.RootPullDecl(i,i,1,0,r.semanticInfoChain,s);r.semanticInfoChain.setDeclForAST(t,o),r.semanticInfoChain.setASTForDecl(o,t),r.isDeclareFile=r.document.isDeclareFile(),r.pushParent(o);if(s){var u=1;e.isDTSFile(i)&&(u|=8);var a=c(t.moduleElements),f=32,h=e.quoteStr(i),o=new e.NormalPullDecl(h,i,f,u,r.getParent());r.semanticInfoChain.setASTForDecl(o,t),r.semanticInfoChain.setDeclForAST(t,o),(!n(t.moduleElements)||a)&&l(o,t,r),r.pushParent(o)}}function u(t,n){var s=0,o=t.identifier.valueText();(e.hasModifier(t.modifiers,1)||i(t,n))&&!r(t)&&(s|=1);if(e.hasModifier(t.modifiers,8)||i(t,n)||n.isDeclareFile)s|=8;s|=4096;var u=64,a=new e.NormalPullDecl(o,t.identifier.text(),u,s,n.getParent());n.semanticInfoChain.setDeclForAST(t,a),n.semanticInfoChain.setASTForDecl(a,t);var f=new e.NormalPullDecl(a.name,a.getDisplayName(),512,a.flags,n.getParent());a.setValueDecl(f),n.semanticInfoChain.setASTForDecl(f,t),n.pushParent(a)}function a(t,n){var r=n.getParent(),i=new e.PullEnumElementDecl(t.propertyName.valueText(),t.propertyName.text(),r);n.semanticInfoChain.setDeclForAST(t,i),n.semanticInfoChain.setASTForDecl(i,t)}function f(t,s){var o=0,u=c(t.moduleElements),a=t.stringLiteral!==null;(e.hasModifier(t.modifiers,1)||i(t,s))&&!r(t)&&(o|=1);if(e.hasModifier(t.modifiers,8)||i(t,s)||s.isDeclareFile)o|=8;var f=a?32:4;if(t.stringLiteral){var h=e.quoteStr(t.stringLiteral.valueText()),p=t.stringLiteral.text(),d=new e.NormalPullDecl(h,p,f,o,s.getParent());s.semanticInfoChain.setDeclForAST(t,d),s.semanticInfoChain.setDeclForAST(t.stringLiteral,d),s.semanticInfoChain.setASTForDecl(d,t.stringLiteral),(!n(t.moduleElements)||u)&&l(d,t.stringLiteral,s),s.pushParent(d)}else{var v=e.ASTHelpers.getModuleNames(t.name);for(var m=0,g=v.length;m<g;m++){var y=v[m],b=o;m>0&&(b|=1);var d=new e.NormalPullDecl(y.valueText(),y.text(),f,b,s.getParent());s.semanticInfoChain.setDeclForAST(t,d),s.semanticInfoChain.setDeclForAST(y,d),s.semanticInfoChain.setASTForDecl(d,y),u&&l(d,y,s),s.pushParent(d)}}}function l(t,n,r){t.setFlags(t.flags|R(t));var i=new e.NormalPullDecl(t.name,t.getDisplayName(),512,t.flags,r.getParent());t.setValueDecl(i),r.semanticInfoChain.setASTForDecl(i,n)}function c(t){for(var n=0,r=t.childCount();n<r;n++){var i=t.childAt(n);if(i.kind()===130){var s=i;if(c(s.moduleElements))return!0}else if(i.kind()===133){if(e.hasModifier(i.modifiers,1))return!0}else if(i.kind()!==128&&i.kind()!==134)return!0}return!1}function h(t,n){var s=0;(e.hasModifier(t.modifiers,1)||i(t,n))&&!r(t)&&(s|=1);if(e.hasModifier(t.modifiers,8)||i(t,n)||n.isDeclareFile)s|=8;var o=n.getParent(),u=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),8,s,o),a=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),512,s|16384,o);u.setValueDecl(a),n.semanticInfoChain.setDeclForAST(t,u),n.semanticInfoChain.setASTForDecl(u,t),n.semanticInfoChain.setASTForDecl(a,t),n.pushParent(u)}function p(t,n){if(t.parent.kind()===128)return;var r=0,i=n.getParent();i&&(i.kind===134217728||i.flags&2097152)&&(r|=2097152);var s=new e.NormalPullDecl("","",8388608,r,i);n.semanticInfoChain.setDeclForAST(t,s),n.semanticInfoChain.setASTForDecl(s,t),n.pushParent(s)}function d(t,n){var s=0;(e.hasModifier(t.modifiers,1)||i(t,n))&&!r(t)&&(s|=1);var o=n.getParent(),u=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),16,s,o);n.semanticInfoChain.setDeclForAST(t,u),n.semanticInfoChain.setASTForDecl(u,t),n.pushParent(u)}function v(t,n){var r=0;e.hasModifier(t.modifiers,2)?r|=2:r|=4;if(t.questionToken!==null||t.equalsValueClause!==null||t.dotDotDotToken!==null)r|=128;var i=n.getParent();i&&(i.kind===134217728||i.flags&2097152)&&(r|=2097152);var s=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),2048,r,i);t.equalsValueClause&&(i.flags|=33554432),i.kind===32768&&s.setFlag(67108864);var o=e.hasModifier(t.modifiers,6),u=i.kind===32768;if(o&&u){var a=n.parentChain[n.parentChain.length-2],f=r&-129,l=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),4096,f,a);l.setValueDecl(s),s.setFlag(8388608),l.setFlag(8388608),i.kind===32768&&l.setFlag(67108864),n.semanticInfoChain.setASTForDecl(s,t),n.semanticInfoChain.setASTForDecl(l,t),n.semanticInfoChain.setDeclForAST(t,l)}else n.semanticInfoChain.setASTForDecl(s,t),n.semanticInfoChain.setDeclForAST(t,s);i.addVariableDeclToGroup(s)}function m(t,n){var r=0,i=n.getParent();i&&(i.kind===134217728||i.flags&2097152)&&(r|=2097152);var s=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),8192,r,i);n.semanticInfoChain.setASTForDecl(s,t),n.semanticInfoChain.setDeclForAST(t,s)}function g(t,n){var r=4,i=n.getParent(),s=4096;t.questionToken!==null&&(r|=128);var o=new e.NormalPullDecl(t.propertyName.valueText(),t.propertyName.text(),s,r,i);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t)}function y(t,n){var r=0,i=4096;e.hasModifier(t.modifiers,2)?r|=2:r|=4,e.hasModifier(t.modifiers,16)&&(r|=16);var s=n.getParent(),o=new e.NormalPullDecl(t.variableDeclarator.propertyName.valueText(),t.variableDeclarator.propertyName.text(),i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setDeclForAST(t.variableDeclarator,o),n.semanticInfoChain.setASTForDecl(o,t)}function b(t,n){var s=0,o=512,u=e.ASTHelpers.getVariableDeclaratorModifiers(t);(e.hasModifier(u,1)||i(t,n))&&!r(t)&&(s|=1);if(e.hasModifier(u,8)||i(t,n)||n.isDeclareFile)s|=8;var a=n.getParent();a&&(a.kind===134217728||a.flags&2097152)&&(s|=2097152);var f=new e.NormalPullDecl(t.propertyName.valueText(),t.propertyName.text(),o,s,a);n.semanticInfoChain.setDeclForAST(t,f),n.semanticInfoChain.setASTForDecl(f,t),a&&a.addVariableDeclToGroup(f)}function w(e,t){if(e.parent.kind()===136)return;var n=e;b(n,t)}function E(t,n){var r=2048,i=16777216,s=n.getParent();s&&(s.kind===134217728||s.flags&2097152)&&(r|=2097152);var o=new e.NormalPullDecl("","",i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function S(t,n){var r=0,i=33554432,s=n.getParent();s&&(s.kind===134217728||s.flags&2097152)&&(r|=2097152);var o=new e.NormalPullDecl("","",i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function x(t,n){var s=0,o=16384;(e.hasModifier(t.modifiers,1)||i(t,n))&&!r(t)&&(s|=1);if(e.hasModifier(t.modifiers,8)||i(t,n)||n.isDeclareFile)s|=8;t.block||(s|=2048);var u=n.getParent();u&&(u.kind===134217728||u.flags&2097152)&&(s|=2097152);var a=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),o,s,u);n.semanticInfoChain.setDeclForAST(t,a),n.semanticInfoChain.setASTForDecl(a,t),n.pushParent(a)}function T(t,n,r,i){typeof i=="undefined"&&(i=null);var s=0;if(t.kind()===219||t.kind()===218)s|=8192;var o=r.getParent();o&&(o.kind===134217728||o.flags&2097152)&&(s|=2097152);var u=n?n.text():"",a=i?i.text():"",f=new e.PullFunctionExpressionDecl(u,s,o,a);r.semanticInfoChain.setDeclForAST(t,f),r.semanticInfoChain.setASTForDecl(f,t),r.pushParent(f);if(t.kind()===219){var l=t,s=4,o=r.getParent();e.hasFlag(o.flags,2097152)&&(s|=2097152);var f=new e.NormalPullDecl(l.identifier.valueText(),l.identifier.text(),2048,s,o);r.semanticInfoChain.setASTForDecl(f,l.identifier),r.semanticInfoChain.setDeclForAST(l.identifier,f),o.addVariableDeclToGroup(f)}}function N(t,n){var r=0,i=65536;e.hasModifier(t.modifiers,16)&&(r|=16),e.hasModifier(t.modifiers,2)?r|=2:r|=4,t.block||(r|=2048);var s=n.getParent(),o=new e.NormalPullDecl(t.propertyName.valueText(),t.propertyName.text(),i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function C(t,n){var r=2048,i=4194304,s=n.getParent(),o=new e.NormalPullDecl("","",i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function k(t,n){var r=t.parent&&t.parent.parent&&t.parent.kind()===2&&t.parent.parent.kind()===122;if(!r)return;var i=2048,s=1048576,o=n.getParent();o&&(o.kind===134217728||o.flags&2097152)&&(i|=2097152);var u=new e.NormalPullDecl("","",s,i,o);n.semanticInfoChain.setDeclForAST(t,u),n.semanticInfoChain.setASTForDecl(u,t),n.pushParent(u)}function L(t,n){var r=0,i=65536;r|=4,r|=2048,t.questionToken!==null&&(r|=128);var s=n.getParent(),o=new e.NormalPullDecl(t.propertyName.valueText(),t.propertyName.text(),i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function A(t,n){var r=2048,i=2097152,s=n.getParent();s&&(s.kind===134217728||s.flags&2097152)&&(r|=2097152);var o=new e.NormalPullDecl("","",i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function O(t,n){var r=0,i=32768;t.block||(r|=2048);var s=n.getParent();if(s){var o=s.flags;o&1&&(r|=1)}var u=new e.NormalPullDecl(s.name,s.getDisplayName(),i,r,s);n.semanticInfoChain.setDeclForAST(t,u),n.semanticInfoChain.setASTForDecl(u,t),n.pushParent(u)}function M(t,n){var r=4,i=262144;e.hasModifier(t.modifiers,16)&&(r|=16),e.hasModifier(t.modifiers,2)?r|=2:r|=4;var s=n.getParent();s&&(s.kind===134217728||s.flags&2097152)&&(r|=2097152);var o=new e.NormalPullDecl(t.propertyName.valueText(),t.propertyName.text(),i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function _(e,t){T(e,e.identifier,t)}function D(t,n){var r=4,i=524288;e.hasModifier(t.modifiers,16)&&(r|=16),e.hasModifier(t.modifiers,2)?r|=2:r|=4;var s=n.getParent();s&&(s.kind===134217728||s.flags&2097152)&&(r|=2097152);var o=new e.NormalPullDecl(t.propertyName.valueText(),t.propertyName.text(),i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function P(t,n){var r=0,i=268435456,s=n.getParent();s&&(s.kind===134217728||s.flags&2097152)&&(r|=2097152);var o=new e.NormalPullDecl("","",i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o);var r=0,i=1024,s=n.getParent();e.hasFlag(s.flags,2097152)&&(r|=2097152);var o=new e.NormalPullDecl(t.identifier.valueText(),t.identifier.text(),i,r,s);n.semanticInfoChain.setDeclForAST(t.identifier,o),n.semanticInfoChain.setASTForDecl(o,t.identifier),s&&s.addVariableDeclToGroup(o)}function H(t,n){var r=0,i=134217728,s=n.getParent(),o=new e.NormalPullDecl("","",i,r,s);n.semanticInfoChain.setDeclForAST(t,o),n.semanticInfoChain.setASTForDecl(o,t),n.pushParent(o)}function B(t,n){var r=new e.NormalPullDecl("","",256,0,n.getParent());n.semanticInfoChain.setDeclForAST(t,r),n.semanticInfoChain.setASTForDecl(r,t),n.pushParent(r)}function j(t,n){var r=e.getPropertyAssignmentNameTextFromIdentifier(t.propertyName),i=e.TextSpan.fromBounds(t.start(),t.end()),s=new e.NormalPullDecl(r.memberName,r.actualText,4096,4,n.getParent());n.semanticInfoChain.setDeclForAST(t,s),n.semanticInfoChain.setASTForDecl(s,t)}function F(t,n){var r=e.getPropertyAssignmentNameTextFromIdentifier(t.propertyName),i=new e.NormalPullDecl(r.memberName,r.actualText,4096,4,n.getParent());n.semanticInfoChain.setDeclForAST(t,i),n.semanticInfoChain.setASTForDecl(i,t),T(t,t.propertyName,n,t.propertyName)}function I(e,t){switch(e.kind()){case 120:o(e,t);break;case 132:u(e,t);break;case 243:a(e,t);break;case 130:f(e,t);break;case 131:h(e,t);break;case 128:d(e,t);break;case 122:p(e,t);break;case 242:v(e,t);break;case 136:y(e,t);break;case 141:g(e,t);break;case 225:w(e,t);break;case 137:O(e,t);break;case 139:M(e,t);break;case 140:D(e,t);break;case 222:_(e,t);break;case 135:N(e,t);break;case 144:C(e,t);break;case 123:E(e,t);break;case 125:S(e,t);break;case 142:k(e,t);break;case 143:A(e,t);break;case 145:L(e,t);break;case 129:x(e,t);break;case 219:case 218:T(e,null,t);break;case 133:s(e,t);break;case 238:m(e,t);break;case 236:P(e,t);break;case 163:H(e,t);break;case 215:B(e,t);break;case 240:j(e,t);break;case 241:F(e,t)}}function q(e){return e.kind===4||e.kind===32||e.kind===64}function R(e){return e.kind&4?32768:e.kind&32?65536:0}function U(e){var t=e.kind;return t&4?(e.flags&32768)!==0:t&32?(e.flags&65536)!==0:!1}function z(t,n){var r=n.getParent();if(t.kind()===11||t.kind()===14)if(r.kind===4||r.kind===32)return;if(t.kind()===130){var i=t;if(i.stringLiteral)e.Debug.assert(r.ast()===i.stringLiteral),n.popParent();else{var s=e.ASTHelpers.getModuleNames(i.name);for(var o=s.length-1;o>=0;o--){var u=s[o];e.Debug.assert(r.ast()===u),n.popParent(),r=n.getParent()}}}t.kind()===132&&W(t,r,n);while(r.getParentDecl()&&r.ast()===t)n.popParent(),r=n.getParent()}function W(t,n,r){e.Debug.assert(n.kind===64);var i=e.hasFlag(n.flags,8),s=!i,o=0,u=n.getChildDecls();for(var a=0,f=t.enumElements.nonSeparatorCount();a<f;a++){var l=t.enumElements.nonSeparatorAt(a),c=e.ArrayUtilities.first(u,function(e){return r.semanticInfoChain.getASTForDecl(e)===l});e.Debug.assert(c.kind===67108864),l.equalsValueClause===null?s&&(c.constantValue=o,o++):(c.constantValue=X(l.equalsValueClause.value,u,r),c.constantValue!==null&&!i?(s=!0,o=c.constantValue+1):s=!1),e.Debug.assert(c.constantValue!==undefined)}}function X(t,n,r){e.Debug.assert(t);if(e.ASTHelpers.isIntegerLiteralAST(t)){var i;switch(t.kind()){case 164:case 165:i=t.operand;break;default:i=t}var s=i.value();return s&&t.kind()===165?-s:s}if(r.propagateEnumConstants){switch(t.kind()){case 11:var o=t,u=e.ArrayUtilities.firstOrDefault(n,function(e){return e.name===o.valueText()});return u?u.constantValue:null;case 202:var a=t,f=X(a.left,n,r),l=X(a.right,n,r);if(f===null||l===null)return null;return f<<l;case 189:var a=t,f=X(a.left,n,r),l=X(a.right,n,r);if(f===null||l===null)return null;return f|l}return null}return null}var t=function(){function e(e,t,n){this.document=e,this.semanticInfoChain=t,this.propagateEnumConstants=n,this.isDeclareFile=!1,this.parentChain=[]}return e.prototype.getParent=function(){return this.parentChain?this.parentChain[this.parentChain.length-1]:null},e.prototype.pushParent=function(e){e&&(this.parentChain[this.parentChain.length]=e)},e.prototype.popParent=function(){this.parentChain.length--},e}();(function(n){function r(n,r,i){var s=new t(n,r,i.propagateEnumConstants());return e.getAstWalkerFactory().simpleWalk(n.sourceUnit(),I,z,s),s.getParent()}n.create=r})(e.DeclarationCreator||(e.DeclarationCreator={}));var V=e.DeclarationCreator})(r||(r={}));var r;(function(e){var t=function(){function t(t){this.semanticInfoChain=t,this.declsBeingBound=[],this.inBindingOtherDeclsWalker=new e.PullHelpers.OtherPullDeclsWalker}return t.prototype.getParent=function(e,t){typeof t=="undefined"&&(t=!1);var n=e.getParentDecl();if(n.kind===1)return null;var r=n.getSymbol();!r&&n&&!n.hasBeenBound()&&this.bindDeclToPullSymbol(n),r=n.getSymbol();if(r){var i=n.kind;i===262144?r=r.getGetter():i===524288&&(r=r.getSetter())}if(r){if(t&&r.isType()&&r.isContainer()){var s=r.getInstanceSymbol();if(s)return s.type}return r.type}return null},t.prototype.findDeclsInContext=function(e,t,n){if(!n){var r=e.getParentDecl();return r.searchChildDecls(e.name,t)}var i=e.getParentPath();if(i.length){var s=[];for(var o=0;o<i.length;o++){if(i[o].kind&1)continue;s[s.length]=i[o].name}return this.semanticInfoChain.findDecls(s,t)}},t.prototype.getExistingSymbol=function(e,t,n){var r=(t&68147712)!==0,i=(t&58728795)!==0,s=(t&164)!==0,o=e.name;if(!n){var h=e.getParentDecl();if(h&&h.kind===1)return this.semanticInfoChain.findTopLevelSymbol(o,t,e);var l=h&&h.searchChildDecls(o,t);return l[0]&&l[0].getSymbol()}var u=(e.flags&1)!==0,a=null;r?a=n.findContainedNonMember(o):i?a=n.findContainedNonMemberType(o,t):s&&(a=n.findContainedNonMemberContainer(o,t));var f=!a;a||(r?a=n.findMember(o,!1):i?a=n.findNestedType(o,t):s&&(a=n.findNestedContainer(o,t)));if(u&&f)return a;if(a){var l=a.getDeclarations(),c=l[l.length-1],h=e.getParentDecl(),p=c&&c.getParentDecl();return h!==p?null:a}return null},t.prototype.checkThatExportsMatch=function(t,n,r){typeof r=="undefined"&&(r=!0);var i=(t.flags&1)!==0,s=n.getDeclarations(),o=(s[s.length-1].flags&1)!==0;if(i!==o&&!n.isSignature()&&(t.kind&7340032)===0){if(r){var u=this.semanticInfoChain.getASTForDecl(t);this.semanticInfoChain.addDiagnosticFromAST(u,e.DiagnosticCode.All_declarations_of_merged_declaration_0_must_be_exported_or_not_exported,[t.getDisplayName()])}return!1}return!0},t.prototype.getIndexForInsertingSignatureAtEndOfEnclosingDeclInSignatureList=function(t,n){var r=t.getDeclarations()[0];e.Debug.assert(r);var i=r.getParentDecl(),s=e.ArrayUtilities.indexOf(n,function(e){return e.getDeclarations()[0].getParentDecl()!==i});return s<0?n.length:s},t.prototype.bindEnumDeclarationToPullSymbol=function(t){var n=t.name,r=null,i=null,s=null,o=t.getValueDecl(),u=t.kind,a=this.getParent(t),f=this.getParent(t,!0),l=t.getParentDecl(),c=this.semanticInfoChain.getASTForDecl(t),h=t.flags&1,p=!1;r=this.getExistingSymbol(t,64,a),r&&(r.kind!==u?(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(c.identifier,t.getDisplayName(),r.getDeclarations()[0].ast()),r=null):this.checkThatExportsMatch(t,r)||(r=null)),r?i=r.getInstanceSymbol():(r=new e.PullContainerSymbol(n,u),p=!0,a||this.semanticInfoChain.cacheGlobalSymbol(r,64)),r.addDeclaration(t),t.setSymbol(r),this.semanticInfoChain.setSymbolForAST(c.identifier,r),this.semanticInfoChain.setSymbolForAST(c,r);if(!i){var d=null;if(f){h?(d=f.findMember(n,!1),d||(d=f.findContainedNonMember(n))):(d=f.findContainedNonMember(n),d||(d=f.findMember(n,!1)));if(d){var v=d.getDeclarations();if(v.length){var m=v[0].getParentDecl();l!==m&&(d=null)}}}else if(!(t.flags&1)){var g=l.getChildDecls(),y=null;for(var b=0;b<g.length;b++){if(g[b]===t)break;if(g[b].name===n&&g[b].kind&68147712){y=g[b];break}}y&&(d=y.getSymbol(),d&&(d.isContainer()?d=d.getInstanceSymbol():d&&d.isType()&&(d=d.getConstructorMethod())))}d?(i=d,s=d.type):i=new e.PullSymbol(n,512),r.setInstanceSymbol(i),s||(s=new e.PullTypeSymbol("",8388608),i.type=s),s.addDeclaration(t),s.getAssociatedContainerType()||s.setAssociatedContainerType(r)}p&&a&&(t.flags&1?a.addEnclosedMemberType(r):a.addEnclosedNonMemberType(r)),p&&this.bindEnumIndexerDeclsToPullSymbols(r);var w=t.getValueDecl();w&&w.ensureSymbolIsBound()},t.prototype.bindEnumIndexerDeclsToPullSymbols=function(t){var n=t.getInstanceSymbol().type,r=new e.PullSymbol("x",2048);r.type=this.semanticInfoChain.numberTypeSymbol,r.setResolved(),r.setIsSynthesized();var i=new e.PullSignatureSymbol(4194304);i.addParameter(r),i.returnType=this.semanticInfoChain.stringTypeSymbol,i.setResolved(),i.setIsSynthesized(),n.addIndexSignature(i)},t.prototype.findExistingVariableSymbolForModuleValueDecl=function(t){var n=e.hasFlag(t.flags,1),r=t.name,i=this.getParent(t,!0),s=t.getParentDecl(),o=null;if(i){n?(o=i.findMember(r,!1),o||(o=i.findContainedNonMember(r))):(o=i.findContainedNonMember(r),o||(o=i.findMember(r,!1)));if(o){var u=o.getDeclarations();if(u.length){var a=u[0].getParentDecl(),f=n||s===a,l=f&&this.checkThatExportsMatch(t,o,!1);l||(o=null)}}}else if(!n){var c=s.getChildDecls();for(var h=0;h<c.length;h++){var p=c[h],d=e.hasFlag(p.kind,68147712),v=e.hasFlag(p.kind,1032192)||e.hasFlag(p.flags,118784),m=p!==t&&p!==t.getValueDecl()&&p.name===r&&d&&v;if(m&&p.hasSymbol()){o=p.getSymbol(),o.isContainer()?o=o.getInstanceSymbol():o&&o.isType()&&(o=o.getConstructorMethod());break}}}return o},t.prototype.bindModuleDeclarationToPullSymbol=function(t){var n=t.name,r=null,i=t.kind,s=this.getParent(t),o=this.getParent(t,!0),u=t.getParentDecl(),a=this.semanticInfoChain.getASTForDecl(t),f=e.ASTHelpers.getEnclosingModuleDeclaration(a);f||(e.Debug.assert(i===32),e.Debug.assert(a.kind()===120),f=a);var l=e.hasFlag(t.flags,1),c=164,h=(t.flags&102400)!==0;s&&i===32&&this.semanticInfoChain.addDiagnosticFromAST(a,e.DiagnosticCode.Ambient_external_module_declaration_must_be_defined_in_global_context,null);var p=!1;r=this.getExistingSymbol(t,c,s),r&&(r.kind!==i?(h&&this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(a,t.getDisplayName(),r.getDeclarations()[0].ast()),r=null):i===32?this.semanticInfoChain.addDiagnosticFromAST(a,e.DiagnosticCode.Ambient_external_module_declaration_cannot_be_reopened):this.checkThatExportsMatch(t,r)||(r=null)),r||(r=new e.PullContainerSymbol(n,i),p=!0,s||this.semanticInfoChain.cacheGlobalSymbol(r,c)),r.addDeclaration(t),t.setSymbol(r),this.semanticInfoChain.setSymbolForAST(a,r),this.semanticInfoChain.setSymbolForAST(f,r);var d=t.getValueDecl(),v=r.getDeclarations();p&&s&&(t.flags&1?s.addEnclosedMemberContainer(r):s.addEnclosedNonMemberContainer(r));if(d){d.ensureSymbolIsBound();var m=null,g=null;d.hasSymbol()?m=d.getSymbol():(m=new e.PullSymbol(n,512),d.setSymbol(m),m.hasDeclaration(d)||m.addDeclaration(d)),m.type||(m.type=new e.PullTypeSymbol("",8388608)),r.setInstanceSymbol(m),m.type.getAssociatedContainerType()||m.type.setAssociatedContainerType(r)}},t.prototype.bindImportDeclaration=function(t){var n=t.flags,r=t.kind,i=this.semanticInfoChain.getASTForDecl(t),s=!1,o=null,u=t.name,a=!1,f=this.getParent(t);o=this.getExistingSymbol(t,164,f),o&&(a=!0),o&&(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i,t.getDisplayName(),o.getDeclarations()[0].ast()),o=null),o||(o=new e.PullTypeAliasSymbol(u),f||this.semanticInfoChain.cacheGlobalSymbol(o,164)),o.addDeclaration(t),t.setSymbol(o),this.semanticInfoChain.setSymbolForAST(i,o),f&&!a&&(n&1?f.addEnclosedMemberContainer(o):f.addEnclosedNonMemberContainer(o))},t.prototype.ensurePriorDeclarationsAreBound=function(e,t){if(!e)return;var n=e.getDeclarations();for(var r=0;r<n.length;++r){var i=n[r],s=i.getChildDecls();for(var o=0;o<s.length;++o){var u=s[o];if(u===t)return;u.name===t.name&&u.ensureSymbolIsBound()}}},t.prototype.bindClassDeclarationToPullSymbol=function(t){var n=t.name,r=null,i=null,s=null,o=this.semanticInfoChain.getASTForDecl(t),u=this.getParent(t);this.ensurePriorDeclarationsAreBound(u,t);var a=t.getParentDecl(),f=t.flags&1,l=!1;r=this.getExistingSymbol(t,58728795,u),r&&r.kind===16&&(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(o.identifier,t.getDisplayName(),r.getDeclarations()[0].ast()),r=null),r=new e.PullTypeSymbol(n,8),u||this.semanticInfoChain.cacheGlobalSymbol(r,8),r.addDeclaration(t),t.setSymbol(r),this.semanticInfoChain.setSymbolForAST(o.identifier,r),this.semanticInfoChain.setSymbolForAST(o,r),u&&(t.flags&1?u.addEnclosedMemberType(r):u.addEnclosedNonMemberType(r));var c=t.getTypeParameters();for(var h=0;h<c.length;h++){var p=r.findTypeParameter(c[h].name);if(p){var d=this.semanticInfoChain.getASTForDecl(p.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(d,e.DiagnosticCode.Duplicate_identifier_0,[p.getName()])}p=new e.PullTypeParameterSymbol(c[h].name),r.addTypeParameter(p),p.addDeclaration(c[h]),c[h].setSymbol(p)}i=r.getConstructorMethod(),s=i?i.type:null;if(!i){var v=null;a&&(v=a.searchChildDecls(n,68147712),v&&v[0]&&v[0].hasSymbol()&&(i=v[0].getSymbol())),i?s=i.type:(i=new e.PullSymbol(n,32768),s=new e.PullTypeSymbol("",33554432),i.setIsSynthesized(),i.type=s),r.setConstructorMethod(i),r.setHasDefaultConstructor()}i.getIsSynthesized()?(i.addDeclaration(t.getValueDecl()),s.addDeclaration(t)):r.setHasDefaultConstructor(!1),s.setAssociatedContainerType(r);var m=t.getValueDecl();m&&m.ensureSymbolIsBound(),this.bindStaticPrototypePropertyOfClass(o,r,s)},t.prototype.bindInterfaceDeclarationToPullSymbol=function(t){var n=t.name,r=null,i=this.semanticInfoChain.getASTForDecl(t),s=!1,o=this.getParent(t),u=16;r=this.getExistingSymbol(t,58728795,o),r&&(r.kind&u?this.checkThatExportsMatch(t,r)||(r=null):(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i.identifier,t.getDisplayName(),r.getDeclarations()[0].ast()),r=null)),r||(r=new e.PullTypeSymbol(n,16),s=!0,o||this.semanticInfoChain.cacheGlobalSymbol(r,u)),r.addDeclaration(t),t.setSymbol(r),s&&o&&(t.flags&1?o.addEnclosedMemberType(r):o.addEnclosedNonMemberType(r));var a=t.getTypeParameters(),f,l=null;for(var c=0;c<a.length;c++){f=r.findTypeParameter(a[c].name);if(!f)f=new e.PullTypeParameterSymbol(a[c].name),r.addTypeParameter(f);else{l=f.getDeclarations();for(var h=0;h<l.length;h++){var p=l[h].getParentDecl();if(p&&p===t){var d=this.semanticInfoChain.getASTForDecl(l[0]);this.semanticInfoChain.addDiagnosticFromAST(d,e.DiagnosticCode.Duplicate_identifier_0,[f.getName()]);break}}}f.addDeclaration(a[c]),a[c].setSymbol(f)}},t.prototype.bindObjectTypeDeclarationToPullSymbol=function(t){var n=this.semanticInfoChain.getASTForDecl(t),r=new e.PullTypeSymbol("",8388608);r.addDeclaration(t),t.setSymbol(r),this.semanticInfoChain.setSymbolForAST(n,r);var i=t.getChildDecls();for(var s=0;s<i.length;s++)this.bindDeclToPullSymbol(i[s])},t.prototype.bindConstructorTypeDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=new e.PullTypeSymbol("",33554432);t.setSymbol(s),s.addDeclaration(t),this.semanticInfoChain.setSymbolForAST(i,s);var o=new e.PullSignatureSymbol(2097152),u=this.semanticInfoChain.getASTForDecl(t);e.lastParameterIsRest(u.parameterList)&&(o.hasVarArgs=!0),o.addDeclaration(t),t.setSignatureSymbol(o),this.bindParameterSymbols(u,e.ASTHelpers.parametersFromParameterList(u.parameterList),s,o);var a=t.getTypeParameters(),f;for(var l=0;l<a.length;l++){f=s.findTypeParameter(a[l].name);if(!f)f=new e.PullTypeParameterSymbol(a[l].name),o.addTypeParameter(f);else{var c=this.semanticInfoChain.getASTForDecl(f.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(c,e.DiagnosticCode.Duplicate_identifier_0,[f.name])}f.addDeclaration(a[l]),a[l].setSymbol(f)}s.appendConstructSignature(o)},t.prototype.bindVariableDeclarationToPullSymbol=function(t){var n=t.flags,r=t.kind,i=this.semanticInfoChain.getASTForDecl(t),s=i.kind()===131?i.identifier:i.kind()===225?i.propertyName:i.kind()===132?i.identifier:i,o=(n&1)!==0,u=null,a=t.name,f=!1,l=this.getParent(t,!0),c=t.getParentDecl(),h=(n&118784)!==0,p=(n&32768)!==0,d=(n&4096)!==0,v=(n&16384)!==0;u=this.getExistingSymbol(t,68147712,l),!u&&p&&(u=this.findExistingVariableSymbolForModuleValueDecl(t.getContainerDecl())),u&&!u.isType()&&(f=!0);var m,g,y,b;if(u){var w=u.kind,E=u.anyDeclHasFlag(4096),S=u.anyDeclHasFlag(16384),x=u.allDeclsHaveFlag(32768),T=u.anyDeclHasFlag(118784),N=e.ArrayUtilities.any(u.getDeclarations(),function(e){return e.kind===16384}),C=u.allDeclsHaveFlag(8),k=C||(t.flags&8)!==0,L=u.getDeclarations()[0],A=L.getParentDecl(),O=c&&c.kind===1&&A.kind===1,M=O||L.getParentDecl()===t.getParentDecl(),_=M&&w===2048&&r==512,D=_||h&&(!d&&!v&&N||(p||d)&&(x||E)||v&&x&&k||p&&S);D&&(S||N)&&!k&&L.fileName()!==t.fileName()&&(this.semanticInfoChain.addDiagnostic(e.PullHelpers.diagnosticFromDecl(t,e.DiagnosticCode.Module_0_cannot_merge_with_previous_declaration_of_1_in_a_different_file_2,[a,a,L.fileName()])),u.type=this.semanticInfoChain.getResolver().getNewErrorTypeSymbol(a));if(!D||_)!_&&(h||T||e.hasFlag(w,1032192))||!M?(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(s,t.getDisplayName(),u.getDeclarations()[0].ast()),u.type=this.semanticInfoChain.getResolver().getNewErrorTypeSymbol(a)):(this.checkThatExportsMatch(t,u),u=null,f=!1);u&&(!u.type||!u.type.isError())&&!this.checkThatExportsMatch(t,u,!p||!x)&&(u.type=this.semanticInfoChain.getResolver().getNewErrorTypeSymbol(a))}if((n&118784)===0)u||(u=new e.PullSymbol(a,r),!l&&c.kind===1&&this.semanticInfoChain.cacheGlobalSymbol(u,r)),u.addDeclaration(t),t.setSymbol(u),this.semanticInfoChain.setSymbolForAST(s,u),this.semanticInfoChain.setSymbolForAST(i,u);else if(!f){if(v){var P=u;if(l){b=l.getMembers();for(var H=0;H<b.length;H++)if(b[H].name===a&&b[H].kind===8){P=b[H];break}}if(!P){var B=t.getContainerDecl();P=B.getSymbol(),P||(P=this.semanticInfoChain.findTopLevelSymbol(a,58728795,t))}P&&P.kind!==8&&(P=null),P&&P.isClass()?(u=P.getConstructorMethod(),t.setSymbol(u),g=P.getDeclarations(),g.length&&(m=g[g.length-1],y=this.semanticInfoChain.getASTForDecl(m))):(u||(u=new e.PullSymbol(a,r)),u.addDeclaration(t),t.setSymbol(u),u.type=this.semanticInfoChain.anyTypeSymbol)}else if(n&102400){var j=null,F=this.getParent(t);if(F){b=F.getMembers();for(var H=0;H<b.length;H++)if(b[H].name===a&&b[H].isContainer()){j=b[H];break}}if(!j){var B=t.getContainerDecl();j=B.getSymbol(),j||(j=this.semanticInfoChain.findTopLevelSymbol(a,164,t),j||(j=this.semanticInfoChain.findTopLevelSymbol(a,64,t)))}j&&!j.isContainer()&&(j=null),j?(u=j.getInstanceSymbol(),u||(u=new e.PullSymbol(a,r),u.type=new e.PullTypeSymbol("",8388608)),u.hasDeclaration(t)||u.addDeclaration(t),t.setSymbol(u)):e.Debug.assert(!1,"Attempted to bind invalid implicit variable symbol")}}else u.hasDeclaration(t)||u.addDeclaration(t),t.setSymbol(u);var B=t.getContainerDecl();u&&u.type&&B&&!u.type.hasDeclaration(B)&&u.type.addDeclaration(B),l&&!f&&(n&1?l.addMember(u):l.addEnclosedNonMember(u))},t.prototype.bindCatchVariableToPullSymbol=function(t){var n=t.flags,r=t.kind,i=this.semanticInfoChain.getASTForDecl(t),s=t.name,o=new e.PullSymbol(s,r);o.addDeclaration(t),t.setSymbol(o),o.type=this.semanticInfoChain.anyTypeSymbol,this.semanticInfoChain.setSymbolForAST(i,o)},t.prototype.bindEnumMemberDeclarationToPullSymbol=function(t){var n=t.flags,r=t.kind,i=this.semanticInfoChain.getASTForDecl(t),s=t.name,o=!1,u=this.getParent(t,!0),a=u.findMember(s,!1);a&&this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i.propertyName,t.getDisplayName(),a.getDeclarations()[0].ast()),a&&(o=!0),o||(a=new e.PullSymbol(s,r)),a.addDeclaration(t),t.setSymbol(a),this.semanticInfoChain.setSymbolForAST(i.propertyName,a),this.semanticInfoChain.setSymbolForAST(i,a),u&&!o&&u.addMember(a)},t.prototype.bindPropertyDeclarationToPullSymbol=function(t){var n=t.flags,r=t.kind,i=this.semanticInfoChain.getASTForDecl(t),s=i.kind()===136?i.variableDeclarator.propertyName:i.kind()===141?i.propertyName:i.kind()===242?i.identifier:i.propertyName,o=!1,u=!1,a=null;e.hasFlag(n,16)&&(o=!0),e.hasFlag(n,128)&&(u=!0);var f=t.name,l=!1,c=this.getParent(t,!0);c.isClass()&&o&&(c=c.getConstructorMethod().type),a=c.findMember(f,!1),a&&this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(s,t.getDisplayName(),a.getDeclarations()[0].ast()),a&&(l=!0);var h;l||(a=new e.PullSymbol(f,r)),a.addDeclaration(t),t.setSymbol(a),this.semanticInfoChain.setSymbolForAST(s,a),this.semanticInfoChain.setSymbolForAST(i,a),u&&(a.isOptional=!0),c&&!l&&c.addMember(a)},t.prototype.bindParameterSymbols=function(t,n,r,i){var s=[],o=e.createIntrinsicsObject(),u=this.semanticInfoChain.getDeclForAST(t);if(n)for(var a=0,f=n.length;a<f;a++){var l=n.astAt(a),c=n.identifierAt(a),h=this.semanticInfoChain.getDeclForAST(l),p=e.hasFlag(h.flags,8388608),d=new e.PullSymbol(c.valueText(),2048);a===f-1&&n.lastParameterIsRest()&&(d.isVarArg=!0),o[c.valueText()]?this.semanticInfoChain.addDiagnosticFromAST(l,e.DiagnosticCode.Duplicate_identifier_0,[c.text()]):o[c.valueText()]=!0;if(h){var v=!1;if(p){h.ensureSymbolIsBound();var m=h.getValueDecl();m&&(v=e.hasFlag(m.flags,128),m.setSymbol(d),d.addDeclaration(m))}else v=e.hasFlag(h.flags,128),d.addDeclaration(h),h.setSymbol(d);d.isOptional=v}i.addParameter(d,d.isOptional),i.isDefinition()&&r.addEnclosedNonMember(d)}},t.prototype.bindFunctionDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=(r&1)!==0,o=t.name,u=(r&2048)!==0,a=this.getParent(t,!0),f=t.getParentDecl(),l=!1,c=null,h=null;c=this.getExistingSymbol(t,68147712,a);if(c){var p;if(c.kind===16384)p=u||c.allDeclsHaveFlag(2048);else{var d=e.hasFlag(t.flags,8);p=e.ArrayUtilities.all(c.getDeclarations(),function(t){var n=e.hasFlag(t.flags,32768)&&(d||e.hasFlag(t.flags,8)),r=e.hasFlag(t.flags,2048);return n||r})}p||(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i.identifier,t.getDisplayName(),c.getDeclarations()[0].ast()),c.type=this.semanticInfoChain.getResolver().getNewErrorTypeSymbol(o))}c&&(h=c.type,l=!0),c||(c=new e.PullSymbol(o,16384)),h||(h=new e.PullTypeSymbol("",16777216),c.type=h,h.setFunctionSymbol(c)),t.setSymbol(c),c.addDeclaration(t),h.addDeclaration(t),this.semanticInfoChain.setSymbolForAST(i.identifier,c),this.semanticInfoChain.setSymbolForAST(i,c),a&&!l&&(s?a.addMember(c):a.addEnclosedNonMember(c));var v=new e.PullSignatureSymbol(1048576,!u);v.addDeclaration(t),t.setSignatureSymbol(v),e.lastParameterIsRest(i.callSignature.parameterList)&&(v.hasVarArgs=!0);var m=this.semanticInfoChain.getASTForDecl(t);this.bindParameterSymbols(m,e.ASTHelpers.parametersFromParameterList(m.callSignature.parameterList),h,v);var g=t.getTypeParameters(),y;for(var b=0;b<g.length;b++){y=v.findTypeParameter(g[b].name);if(!y)y=new e.PullTypeParameterSymbol(g[b].name),v.addTypeParameter(y);else{var w=this.semanticInfoChain.getASTForDecl(y.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(w,e.DiagnosticCode.Duplicate_identifier_0,[y.name])}y.addDeclaration(g[b]),g[b].setSymbol(y)}h.appendCallSignature(v)},t.prototype.bindFunctionExpressionToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=i.kind()===219?e.ASTHelpers.parametersFromIdentifier(i.identifier):e.ASTHelpers.parametersFromParameterList(e.ASTHelpers.getParameterList(i)),o=i,u=n===131072?t.getFunctionExpressionName():t.name,a=new e.PullSymbol(u,n),f=new e.PullTypeSymbol("",16777216);f.setFunctionSymbol(a),a.type=f,t.setSymbol(a),a.addDeclaration(t),f.addDeclaration(t);var l=o.kind()===222?o.identifier:o.kind()===241?o.propertyName:null;l&&this.semanticInfoChain.setSymbolForAST(l,a),this.semanticInfoChain.setSymbolForAST(o,a);var c=new e.PullSignatureSymbol(1048576,!0);s.lastParameterIsRest()&&(c.hasVarArgs=!0);var h=t.getTypeParameters(),p;for(var d=0;d<h.length;d++){p=c.findTypeParameter(h[d].name);if(!p)p=new e.PullTypeParameterSymbol(h[d].name),c.addTypeParameter(p);else{var v=this.semanticInfoChain.getASTForDecl(p.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(v,e.DiagnosticCode.Duplicate_identifier_0,[p.getName()])}p.addDeclaration(h[d]),h[d].setSymbol(p)}c.addDeclaration(t),t.setSignatureSymbol(c),this.bindParameterSymbols(o,s,f,c),f.appendCallSignature(c)},t.prototype.bindFunctionTypeDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=new e.PullTypeSymbol("",16777216);t.setSymbol(s),s.addDeclaration(t),this.semanticInfoChain.setSymbolForAST(i,s);var o=(r&2048)!==0,u=new e.PullSignatureSymbol(1048576,!o);e.lastParameterIsRest(i.parameterList)&&(u.hasVarArgs=!0);var a=t.getTypeParameters(),f;for(var l=0;l<a.length;l++){f=u.findTypeParameter(a[l].name);if(!f)f=new e.PullTypeParameterSymbol(a[l].name),u.addTypeParameter(f);else{var c=this.semanticInfoChain.getASTForDecl(f.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(c,e.DiagnosticCode.Duplicate_identifier_0,[f.name])}f.addDeclaration(a[l]),a[l].setSymbol(f)}u.addDeclaration(t),t.setSignatureSymbol(u),this.bindParameterSymbols(i,e.ASTHelpers.parametersFromParameterList(i.parameterList),s,u),s.appendCallSignature(u)},t.prototype.bindMethodDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=(r&2)!==0,o=(r&16)!==0,u=(r&128)!==0,a=t.name,f=(r&2048)!==0,l=this.getParent(t,!0),c=!1,h=null,p=null;l.isClass()&&o&&(l=l.getConstructorMethod().type),h=l.findMember(a,!1),h&&(h.kind!==65536||!f&&!h.allDeclsHaveFlag(2048))&&(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i,t.getDisplayName(),h.getDeclarations()[0].ast()),h=null),h&&(p=h.type,c=!0),h||(h=new e.PullSymbol(a,65536)),p||(p=new e.PullTypeSymbol("",16777216),h.type=p,p.setFunctionSymbol(h)),t.setSymbol(h),h.addDeclaration(t),p.addDeclaration(t);var d=i.kind()===135?i.propertyName:i.propertyName;e.Debug.assert(d),this.semanticInfoChain.setSymbolForAST(d,h),this.semanticInfoChain.setSymbolForAST(i,h),u&&(h.isOptional=!0),c||l.addMember(h);var v=1048576,m=new e.PullSignatureSymbol(v,!f),g=e.ASTHelpers.getParameterList(i);e.lastParameterIsRest(g)&&(m.hasVarArgs=!0);var y=t.getTypeParameters(),b,w,E;for(var S=0;S<y.length;S++)w=y[S].name,E=this.semanticInfoChain.getASTForDecl(y[S]),b=m.findTypeParameter(w),b?this.semanticInfoChain.addDiagnosticFromAST(E,e.DiagnosticCode.Duplicate_identifier_0,[b.getName()]):(b=new e.PullTypeParameterSymbol(w),m.addTypeParameter(b)),b.addDeclaration(y[S]),y[S].setSymbol(b);m.addDeclaration(t),t.setSignatureSymbol(m);var x=this.semanticInfoChain.getASTForDecl(t);this.bindParameterSymbols(x,e.ASTHelpers.parametersFromParameterList(e.ASTHelpers.getParameterList(x)),p,m);var T=this.getIndexForInsertingSignatureAtEndOfEnclosingDeclInSignatureList(m,p.getOwnCallSignatures());p.insertCallSignatureAtIndex(m,T)},t.prototype.bindStaticPrototypePropertyOfClass=function(t,n,r){var i="prototype",s=r.findMember(i,!1);s&&!s.getIsSynthesized()&&this.semanticInfoChain.addDiagnostic(e.PullHelpers.diagnosticFromDecl(s.getDeclarations()[0],e.DiagnosticCode.Duplicate_identifier_0,[s.getDisplayName()]));if(!s||!s.getIsSynthesized()){var o=new e.PullSynthesizedDecl(i,i,4096,20,r.getDeclarations()[0],this.semanticInfoChain);s=new e.PullSymbol(i,4096),s.setIsSynthesized(),s.addDeclaration(o),s.type=n,r.addMember(s);if(s.type&&s.type.isGeneric()){var u=this.semanticInfoChain.getResolver();s.type=u.instantiateTypeToAny(s.type,new e.PullTypeResolutionContext(u))}s.setResolved()}},t.prototype.bindConstructorDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=t.name,o=(r&2048)!==0,u=this.getParent(t,!0),a=!1,f=u.getConstructorMethod(),l=null;if(f&&(f.kind!==32768||!o&&f.type&&f.type.hasOwnConstructSignatures())){var c=!1,h=f.type.getOwnDeclaredConstructSignatures();for(var p=0;p<h.length;p++)if(!h[p].anyDeclHasFlag(2048)){c=!0;break}c&&(this.semanticInfoChain.addDiagnosticFromAST(i,e.DiagnosticCode.Multiple_constructor_implementations_are_not_allowed),f=null)}f?l=f.type:(f=new e.PullSymbol(s,32768),l=new e.PullTypeSymbol("",33554432)),u.setConstructorMethod(f),f.type=l,t.setSymbol(f),f.addDeclaration(t),l.addDeclaration(t),f.setIsSynthesized(!1),this.semanticInfoChain.setSymbolForAST(i,f);var d=new e.PullSignatureSymbol(2097152,!o);d.returnType=u,d.addTypeParametersFromReturnType(),d.addDeclaration(t),t.setSignatureSymbol(d),this.bindParameterSymbols(i,e.ASTHelpers.parametersFromParameterList(i.callSignature.parameterList),l,d),e.lastParameterIsRest(i.callSignature.parameterList)&&(d.hasVarArgs=!0),l.appendConstructSignature(d)},t.prototype.bindConstructSignatureDeclarationToPullSymbol=function(t){var n=this.getParent(t,!0),r=this.semanticInfoChain.getASTForDecl(t),i=new e.PullSignatureSymbol(2097152);e.lastParameterIsRest(r.callSignature.parameterList)&&(i.hasVarArgs=!0);var s=t.getTypeParameters(),o;for(var u=0;u<s.length;u++){o=i.findTypeParameter(s[u].name);if(!o)o=new e.PullTypeParameterSymbol(s[u].name),i.addTypeParameter(o);else{var a=this.semanticInfoChain.getASTForDecl(o.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(a,e.DiagnosticCode.Duplicate_identifier_0,[o.getName()])}o.addDeclaration(s[u]),s[u].setSymbol(o)}i.addDeclaration(t),t.setSignatureSymbol(i);var f=this.semanticInfoChain.getASTForDecl(t);this.bindParameterSymbols(f,e.ASTHelpers.parametersFromParameterList(e.ASTHelpers.getParameterList(f)),null,i),this.semanticInfoChain.setSymbolForAST(this.semanticInfoChain.getASTForDecl(t),i);var l=this.getIndexForInsertingSignatureAtEndOfEnclosingDeclInSignatureList(i,n.getOwnDeclaredConstructSignatures());n.insertConstructSignatureAtIndex(i,l)},t.prototype.bindCallSignatureDeclarationToPullSymbol=function(t){var n=this.getParent(t,!0),r=this.semanticInfoChain.getASTForDecl(t),i=new e.PullSignatureSymbol(1048576);e.lastParameterIsRest(r.parameterList)&&(i.hasVarArgs=!0);var s=t.getTypeParameters(),o;for(var u=0;u<s.length;u++){o=i.findTypeParameter(s[u].name);if(!o)o=new e.PullTypeParameterSymbol(s[u].name),i.addTypeParameter(o);else{var a=this.semanticInfoChain.getASTForDecl(o.getDeclarations()[0]);this.semanticInfoChain.addDiagnosticFromAST(a,e.DiagnosticCode.Duplicate_identifier_0,[o.getName()])}o.addDeclaration(s[u]),s[u].setSymbol(o)}i.addDeclaration(t),t.setSignatureSymbol(i);var f=this.semanticInfoChain.getASTForDecl(t);this.bindParameterSymbols(f,e.ASTHelpers.parametersFromParameterList(f.parameterList),null,i),this.semanticInfoChain.setSymbolForAST(this.semanticInfoChain.getASTForDecl(t),i);var l=this.getIndexForInsertingSignatureAtEndOfEnclosingDeclInSignatureList(i,n.getOwnCallSignatures());n.insertCallSignatureAtIndex(i,l)},t.prototype.bindIndexSignatureDeclarationToPullSymbol=function(t){var n=new e.PullSignatureSymbol(4194304);n.addDeclaration(t),t.setSignatureSymbol(n);var r=this.semanticInfoChain.getASTForDecl(t);this.bindParameterSymbols(r,e.ASTHelpers.parametersFromParameter(r.parameter),null,n),this.semanticInfoChain.setSymbolForAST(this.semanticInfoChain.getASTForDecl(t),n);var i=this.getParent(t);i.addIndexSignature(n),n.setContainer(i)},t.prototype.bindGetAccessorDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=(r&1)!==0,o=t.name,u=(r&2048)!==0,a=!1;e.hasFlag(r,16)&&(a=!0);var f=this.getParent(t,!0),l=!1,c=null,h=null,p=null;a&&(f=f.getConstructorMethod().type),c=f.findMember(o,!1),c&&(c.isAccessor()?(h=c.getGetter(),h&&(this.semanticInfoChain.addDiagnosticFromAST(i,e.DiagnosticCode.Getter_0_already_declared,[t.getDisplayName()]),c=null,h=null)):(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i.propertyName,t.getDisplayName(),c.getDeclarations()[0].ast()),c=null)),c&&(l=!0),c&&h&&(p=h.type),c||(c=new e.PullAccessorSymbol(o)),h||(h=new e.PullSymbol(o,16384),p=new e.PullTypeSymbol("",16777216),p.setFunctionSymbol(h),h.type=p,c.setGetter(h)),t.setSymbol(c),c.addDeclaration(t),h.addDeclaration(t);var d=i.propertyName;this.semanticInfoChain.setSymbolForAST(d,c),this.semanticInfoChain.setSymbolForAST(i,h),l||f.addMember(c);var v=new e.PullSignatureSymbol(1048576,!u);v.addDeclaration(t),t.setSignatureSymbol(v),this.bindParameterSymbols(i,e.ASTHelpers.parametersFromParameterList(i.parameterList),p,v),p.appendCallSignature(v)},t.prototype.bindSetAccessorDeclarationToPullSymbol=function(t){var n=t.kind,r=t.flags,i=this.semanticInfoChain.getASTForDecl(t),s=(r&1)!==0,o=t.name,u=(r&2048)!==0,a=!1;e.hasFlag(r,16)&&(a=!0);var f=this.getParent(t,!0),l=!1,c=null,h=null,p=null;a&&(f=f.getConstructorMethod().type),c=f.findMember(o,!1),c&&(c.isAccessor()?(h=c.getSetter(),h&&(this.semanticInfoChain.addDiagnosticFromAST(i,e.DiagnosticCode.Setter_0_already_declared,[t.getDisplayName()]),c=null,h=null)):(this.semanticInfoChain.addDuplicateIdentifierDiagnosticFromAST(i.propertyName,t.getDisplayName(),c.getDeclarations()[0].ast()),c=null)),c&&(l=!0,h&&(p=h.type)),c||(c=new e.PullAccessorSymbol(o)),h||(h=new e.PullSymbol(o,16384),p=new e.PullTypeSymbol("",16777216),p.setFunctionSymbol(h),h.type=p,c.setSetter(h)),t.setSymbol(c),c.addDeclaration(t),h.addDeclaration(t);var d=i.propertyName;this.semanticInfoChain.setSymbolForAST(d,c),this.semanticInfoChain.setSymbolForAST(i,h),l||f.addMember(c);var v=new e.PullSignatureSymbol(1048576,!u);v.addDeclaration(t),t.setSignatureSymbol(v),this.bindParameterSymbols(i,e.ASTHelpers.parametersFromParameterList(i.parameterList),p,v),p.appendCallSignature(v)},t.prototype.getDeclsToBind=function(t){var n;switch(t.kind){case 64:case 32:case 4:case 16:n=this.findDeclsInContext(t,t.kind,!0);break;case 512:case 16384:case 65536:case 32768:n=this.findDeclsInContext(t,t.kind,!1);break;default:n=[t]}return e.Debug.assert(n&&n.length>0),e.Debug.assert(e.ArrayUtilities.contains(n,t)),n},t.prototype.shouldBindDeclaration=function(e){return!e.hasBeenBound()&&this.declsBeingBound.indexOf(e.declID)<0},t.prototype.bindDeclToPullSymbol=function(e){this.shouldBindDeclaration(e)&&this.bindAllDeclsToPullSymbol(e)},t.prototype.bindAllDeclsToPullSymbol=function(e){var t=this.getDeclsToBind(e);for(var n=0;n<t.length;n++){var r=t[n];this.shouldBindDeclaration(r)&&this.bindSingleDeclToPullSymbol(r)}},t.prototype.bindSingleDeclToPullSymbol=function(t){this.declsBeingBound.push(t.declID);switch(t.kind){case 1:var n=t.getChildDecls();for(var r=0;r<n.length;r++)this.bindDeclToPullSymbol(n[r]);break;case 64:this.bindEnumDeclarationToPullSymbol(t);break;case 32:case 4:this.bindModuleDeclarationToPullSymbol(t);break;case 16:this.bindInterfaceDeclarationToPullSymbol(t);break;case 8:this.bindClassDeclarationToPullSymbol(t);break;case 16384:this.bindFunctionDeclarationToPullSymbol(t);break;case 512:this.bindVariableDeclarationToPullSymbol(t);break;case 1024:this.bindCatchVariableToPullSymbol(t);break;case 67108864:this.bindEnumMemberDeclarationToPullSymbol(t);break;case 4096:this.bindPropertyDeclarationToPullSymbol(t);break;case 65536:this.bindMethodDeclarationToPullSymbol(t);break;case 32768:this.bindConstructorDeclarationToPullSymbol(t);break;case 1048576:this.bindCallSignatureDeclarationToPullSymbol(t);break;case 2097152:this.bindConstructSignatureDeclarationToPullSymbol(t);break;case 4194304:this.bindIndexSignatureDeclarationToPullSymbol(t);break;case 262144:this.bindGetAccessorDeclarationToPullSymbol(t);break;case 524288:this.bindSetAccessorDeclarationToPullSymbol(t);break;case 8388608:this.bindObjectTypeDeclarationToPullSymbol(t);break;case 16777216:this.bindFunctionTypeDeclarationToPullSymbol(t);break;case 33554432:this.bindConstructorTypeDeclarationToPullSymbol(t);break;case 131072:this.bindFunctionExpressionToPullSymbol(t);break;case 128:this.bindImportDeclaration(t);break;case 2048:case 8192:t.getParentDecl().getSymbol();break;case 268435456:case 134217728:break;default:e.CompilerDiagnostics.assert(!1,"Unrecognized type declaration")}e.Debug.assert(e.ArrayUtilities.last(this.declsBeingBound)===t.declID),this.declsBeingBound.pop()},t}();e.PullSymbolBinder=t})(r||(r={}));var r;(function(e){(function(t){function n(e,t,n,r){typeof n=="undefined"&&(n=null),typeof r=="undefined"&&(r=null);var i=e.ast();return e.semanticInfoChain.diagnosticFromAST(i,t,n,r)}function r(e){e.isSignature()?e.returnType||e._resolveDeclaredSymbol():e.type||e._resolveDeclaredSymbol()}function i(e){var t=e.ast(),n=e.getSymbol();n||(n=e.getSignatureSymbol());var r=null,i=null;if(n.isSignature()){r=n;var s=e.getParentDecl();i=s.getSymbol().type}else r=e.getSignatureSymbol(),i=n.type;var o;return t.kind()===137||e.kind===2097152?o=i.getConstructSignatures():e.kind===4194304?o=i.getIndexSignatures():o=i.getCallSignatures(),{signature:r,allSignatures:o}}function s(e,t){var n=t.getDeclForAST(e),r=n.getSymbol();return r}function o(e,n){var r=t.getAccessorSymbol(e,n),i={getter:null,setter:null},s=r.getGetter();if(s){var o=s.getDeclarations()[0];i.getter=n.getASTForDecl(o)}var u=r.getSetter();if(u){var a=u.getDeclarations()[0];i.setter=n.getASTForDecl(a)}return i}function u(e){return e&&(e.kind&67108928)!==0}function a(e){return e&&(e.kind===4||f(e,4))}function f(e,t){var n=e.getDeclarations();for(var r=0;r<n.length;r++)if(n[r].kind===t)return!0;return!1}function l(e){return isFinite(+e)}function c(e,t){return e.isTypeReference()&&!e.getIsSpecialized()&&(e=e.referencedTypeSymbol),t.isTypeReference()&&!t.getIsSpecialized()&&(t=t.referencedTypeSymbol),e===t}function h(e){var t=e.getRootSymbol();for(;;){if(e===t)return e;e=t,t=e.getRootSymbol()}}function p(e){var t=e.getContainer();if(t){var n=t.kind;if(n&17809408)return!0;if(n===33554432&&!e.anyDeclHasFlag(17))return!0}return!1}function d(e){var t=e.getContainer();return t&&t.kind===33554432&&a(t)&&e.anyDeclHasFlag(1)}function v(t,n){e.Debug.assert(t);var r=t.getContainer();while(n){if(n===r)return!0;n=n.getContainer()}return n===null&&r===null?!0:!1}function m(e,t){var n=!0,r=e.parameters;if(r)for(var i=0;n&&i<r.length;i++)n=t.signatureParameterWalk(r[i]);return n&&(n=t.signatureReturnTypeWalk(e.returnType)),n}function g(e,t){var n=!0,r=e.getMembers();for(var i=0;n&&i<r.length;i++)n=t.memberSymbolWalk(r[i]);if(n){var s=e.getCallSignatures();for(var i=0;n&&i<s.length;i++)n=t.callSignatureWalk(s[i]),n&&(n=m(s[i],t))}if(n){var o=e.getConstructSignatures();for(var i=0;n&&i<o.length;i++)n=t.constructSignatureWalk(o[i]),n&&(n=m(o[i],t))}if(n){var u=e.getIndexSignatures();for(var i=0;n&&i<u.length;i++)n=t.indexSignatureWalk(u[i]),n&&(n=m(u[i],t))}}t.diagnosticFromDecl=n,t.resolveDeclaredSymbolToUseType=r,t.getSignatureForFuncDecl=i,t.getAccessorSymbol=s,t.getGetterAndSetterFunction=o,t.symbolIsEnum=u,t.symbolIsModule=a,t.isNameNumeric=l,t.typeSymbolsAreIdentical=c,t.getRootType=h,t.isSymbolLocal=p,t.isExportedSymbolInClodule=d,t.isSymbolDeclaredInScopeChain=v,t.walkPullTypeSymbolStructure=g;var y=function(){function t(){this.currentlyWalkingOtherDecls=[]}return t.prototype.walkOtherPullDecls=function(t,n,r){if(n){var i=e.ArrayUtilities.any(this.currentlyWalkingOtherDecls,function(t){return e.ArrayUtilities.contains(n,t)});if(!i){this.currentlyWalkingOtherDecls.push(t);for(var s=0;s<n.length;s++)n[s]!==t&&r(n[s]);var o=this.currentlyWalkingOtherDecls.pop();e.Debug.assert(o==t)}}},t}();t.OtherPullDeclsWalker=y})(e.PullHelpers||(e.PullHelpers={}));var t=e.PullHelpers})(r||(r={}));var r;(function(e){var t=function(){function t(){this._wrapsTypeParameterCache=e.BitVector.getBitVector(!0)}return t.prototype.getWrapsTypeParameter=function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=this._wrapsTypeParameterCache.valueAt(n);if(r)return n;t=t||r===undefined}return t?undefined:0},t.prototype.setWrapsTypeParameter=function(e,t){if(t)this._wrapsTypeParameterCache.setValueAt(t,!0);else for(var n in e)e.hasOwnProperty(n)&&this._wrapsTypeParameterCache.setValueAt(n,!1)},t}();e.WrapsTypeParameterCache=t,function(t){function r(e,t,n){if(t.getIsSpecialized()){var r=t.getTypeParameterArgumentMap(),i=[],s=t.getAllowedToReferenceTypeParameters();for(var o=0;o<s.length;o++){var u=s[o].pullSymbolID,a=r[u];a&&(i[u]=e.instantiateType(a,n.typeParameterArgumentMap))}for(var o=0;o<s.length;o++){var u=s[o].pullSymbolID;i[u]&&n.typeParameterArgumentMap[u]!=i[u]&&(n.ensureTypeArgumentCopy(),n.typeParameterArgumentMap[u]=i[u])}}}function i(t,n){var r=t.getAllowedToReferenceTypeParameters();for(var i in n.typeParameterArgumentMap)n.typeParameterArgumentMap.hasOwnProperty(i)&&(e.ArrayUtilities.any(r,function(e){return e.pullSymbolID==i})||(n.ensureTypeArgumentCopy(),delete n.typeParameterArgumentMap[i]))}function s(t){var n=[],r=!1,i=!1;switch(t.kind){case 65536:if(e.hasFlag(t.flags,16)){r=!0;break};case 16777216:case 33554432:case 2097152:case 1048576:case 131072:case 16384:r=!0,i=!0;break;case 4096:if(e.hasFlag(t.flags,16))break;case 2048:case 262144:case 524288:case 32768:case 4194304:case 8388608:case 256:case 8192:i=!0;break;case 8:case 16:r=!0}i&&(n=n.concat(s(t.getParentDecl())));if(r){var o=t.getTypeParameters();for(var u=0;u<o.length;u++)n.push(o[u].getSymbol())}return n}function o(e,t){return u(e,t,{})}function u(e,t,n){for(var r=0;r<e.length;r++)n[e[r].getRootSymbol().pullSymbolID]=t[r];return n}function a(e,t,n){for(var r=0;r<e.length;r++){var i=e[r].getRootSymbol().pullSymbolID;n.typeParameterArgumentMap[i]!==t[r]&&(n.ensureTypeArgumentCopy(),n.typeParameterArgumentMap[i]=t[r])}}function f(t,n){var r=t.isGeneric()&&t.getTypeArguments()!==null,i=n.isGeneric()&&n.getTypeArguments()!==null;if(r&&i){var s=e.PullHelpers.getRootType(t),o=e.PullHelpers.getRootType(n);return s===o}return!1}var n=function(){function e(e){this.typeParameterArgumentMap=e,this.createdDuplicateTypeArgumentMap=!1}return e.prototype.ensureTypeArgumentCopy=function(){if(!this.createdDuplicateTypeArgumentMap){var e=this.typeParameterArgumentMap;this.typeParameterArgumentMap=[];for(var t in e)e.hasOwnProperty(t)&&(this.typeParameterArgumentMap[t]=e[t]);this.createdDuplicateTypeArgumentMap=!0}},e}();t.MutableTypeArgumentMap=n,t.instantiateTypeArgument=r,t.cleanUpTypeArgumentMap=i,t.getAllowedToReferenceTypeParametersFromDecl=s,t.createTypeParameterArgumentMap=o,t.updateTypeParameterArgumentMap=u,t.updateMutableTypeParameterArgumentMap=a,t.twoTypesAreInstantiationsOfSameNamedGenericType=f}(e.PullInstantiationHelpers||(e.PullInstantiationHelpers={}));var n=e.PullInstantiationHelpers})(r||(r={})),Error&&(Error.stackTraceLimit=1e3);var r;(function(e){function f(e,t){for(var n in e)if(typeof e[n]=="object"){if(!f(e[n],t[n]))return!1}else if(typeof e[n]!="function"&&e[n]!==t[n])return!1;return!0}e.fileResolutionTime=0,e.fileResolutionIOTime=0,e.fileResolutionScanImportsTime=0,e.fileResolutionImportFileSearchTime=0,e.fileResolutionGetDefaultLibraryTime=0,e.sourceCharactersCompiled=0,e.syntaxTreeParseTime=0,e.syntaxDiagnosticsTime=0,e.astTranslationTime=0,e.typeCheckTime=0,e.compilerResolvePathTime=0,e.compilerDirectoryNameTime=0,e.compilerDirectoryExistsTime=0,e.compilerFileExistsTime=0,e.emitTime=0,e.emitWriteFileTime=0,e.declarationEmitTime=0,e.declarationEmitIsExternallyVisibleTime=0,e.declarationEmitTypeSignatureTime=0,e.declarationEmitGetBoundDeclTypeTime=0,e.declarationEmitIsOverloadedCallSignatureTime=0,e.declarationEmitFunctionDeclarationGetSymbolTime=0,e.declarationEmitGetBaseTypeTime=0,e.declarationEmitGetAccessorFunctionTime=0,e.declarationEmitGetTypeParameterSymbolTime=0,e.declarationEmitGetImportDeclarationSymbolTime=0,e.ioHostResolvePathTime=0,e.ioHostDirectoryNameTime=0,e.ioHostCreateDirectoryStructureTime=0,e.ioHostWriteFileTime=0,function(e){e[e.Succeeded=0]="Succeeded",e[e.FailedBecauseOfSyntaxErrors=1]="FailedBecauseOfSyntaxErrors",e[e.FailedBecauseOfCompilerOptionsErrors=2]="FailedBecauseOfCompilerOptionsErrors",e[e.FailedToGenerateDeclarationsBecauseOfSemanticErrors=3]="FailedToGenerateDeclarationsBecauseOfSemanticErrors"}(e.EmitOutputResult||(e.EmitOutputResult={}));var t=e.EmitOutputResult,n=function(){function e(e){typeof e=="undefined"&&(e=0),this.outputFiles=[],this.emitOutputResult=e}return e}();e.EmitOutput=n,function(e){e[e.JavaScript=0]="JavaScript",e[e.SourceMap=1]="SourceMap",e[e.Declaration=2]="Declaration"}(e.OutputFileType||(e.OutputFileType={}));var r=e.OutputFileType,i=function(){function e(e,t,n,r,i){typeof i=="undefined"&&(i=[]),this.name=e,this.writeByteOrderMark=t,this.text=n,this.fileType=r,this.sourceMapEntries=i}return e}();e.OutputFile=i;var s=function(){function e(){this.diagnostics=[],this.outputFiles=[]}return e.fromDiagnostics=function(t){var n=new e;return n.diagnostics=t,n},e.fromOutputFiles=function(t){var n=new e;return n.outputFiles=t,n},e}();e.CompileResult=s;var o=function(){function t(t,n){typeof t=="undefined"&&(t=new e.NullLogger),typeof n=="undefined"&&(n=e.ImmutableCompilationSettings.defaultSettings()),this.logger=t,this._settings=n,this.semanticInfoChain=null,this.semanticInfoChain=new e.SemanticInfoChain(this,t)}return t.prototype.compilationSettings=function(){return this._settings},t.prototype.setCompilationSettings=function(e){var t=this._settings;this._settings=e,f(t,e)||this.semanticInfoChain.invalidate(t,e)},t.prototype.getDocument=function(t){return t=e.switchToForwardSlashes(t),this.semanticInfoChain.getDocument(t)},t.prototype.cleanupSemanticCache=function(){this.semanticInfoChain.invalidate()},t.prototype.addFile=function(t,n,r,i,s,o){typeof o=="undefined"&&(o=[]),t=e.switchToForwardSlashes(t),e.sourceCharactersCompiled+=n.getLength();var u=e.Document.create(this,this.semanticInfoChain,t,n,r,i,s,o);this.semanticInfoChain.addDocument(u)},t.prototype.updateFile=function(t,n,r,i,s){t=e.switchToForwardSlashes(t);var o=this.getDocument(t),u=o.update(n,r,i,s);this.semanticInfoChain.addDocument(u)},t.prototype.removeFile=function(t){t=e.switchToForwardSlashes(t),this.semanticInfoChain.removeDocument(t)},t.prototype.mapOutputFileName=function(e,t,n){if(e.emitToOwnOutputFile()){var r=e.fileName;return t.outputDirectory()!==""&&(r=e.fileName.replace(t.commonDirectoryPath(),""),r=t.outputDirectory()+r),n(r,!1)}return n(t.sharedOutputFile(),!0)},t.prototype.writeByteOrderMarkForDocument=function(t){var n=!1;if(t.emitToOwnOutputFile()){var r=t.byteOrderMark!==0;return n&&e.Environment.standardOut.WriteLine("Emitting byte order mark because of: "+t.fileName),r}var i=this.fileNames(),r=!1;for(var s=0,o=i.length;s<o;s++){var t=this.getDocument(i[s]);if(t.isExternalModule())continue;if(t.byteOrderMark!==0){if(!n)return!0;e.Environment.standardOut.WriteLine("Emitting byte order mark because of: "+t.fileName),r=!0}}return r},t.mapToDTSFileName=function(t,n){return e.getDeclareFilePath(t)},t.prototype._shouldEmit=function(e){return!e.isDeclareFile()},t.prototype._shouldEmitDeclarations=function(e){return this.compilationSettings().generateDeclarationFiles()?this._shouldEmit(e):!1},t.prototype.emitDocumentDeclarationsWorker=function(n,r,i){var s=n.sourceUnit();e.Debug.assert(this._shouldEmitDeclarations(n));if(i)i.document=n;else{var o=this.mapOutputFileName(n,r,t.mapToDTSFileName);i=new e.DeclarationEmitter(o,n,this,r,this.semanticInfoChain)}return i.emitDeclarations(s),i},t.prototype._emitDocumentDeclarations=function(e,t,n,r){if(this._shouldEmitDeclarations(e))if(e.emitToOwnOutputFile()){var i=this.emitDocumentDeclarationsWorker(e,t);i&&n(i.getOutputFile())}else r=this.emitDocumentDeclarationsWorker(e,t,r);return r},t.prototype.emitAllDeclarations=function(t){var r=(new Date).getTime(),i=new n,s=new e.EmitOptions(this,t);if(s.diagnostic())return i.emitOutputResult=2,i;var o=null,u=this.fileNames();for(var a=0,f=u.length;a<f;a++){var l=u[a],c=this.getDocument(u[a]);o=this._emitDocumentDeclarations(c,s,function(e){return i.outputFiles.push(e)},o)}return o&&i.outputFiles.push(o.getOutputFile()),e.declarationEmitTime+=(new Date).getTime()-r,i},t.prototype.emitDeclarations=function(t,r){t=e.switchToForwardSlashes(t);var i=new n,s=new e.EmitOptions(this,r);if(s.diagnostic())return i.emitOutputResult=2,i;var o=this.getDocument(t);return o.emitToOwnOutputFile()?(this._emitDocumentDeclarations(o,s,function(e){return i.outputFiles.push(e)},null),i):this.emitAllDeclarations(r)},t.prototype.canEmitDeclarations=function(t){t=e.switchToForwardSlashes(t);var n=this.getDocument(t);return this._shouldEmitDeclarations(n)},t.mapToFileNameExtension=function(e,t,n){if(n)return t;var r=t.split(".");return r.pop(),r.join(".")+e},t.mapToJSFileName=function(e,n){return t.mapToFileNameExtension(".js",e,n)},t.prototype.emitDocumentWorker=function(n,r,i){var s=n.sourceUnit();e.Debug.assert(this._shouldEmit(n));var o=n.fileName;if(!i){var u=this.mapOutputFileName(n,r,t.mapToJSFileName),a=new e.TextWriter(u,this.writeByteOrderMarkForDocument(n),0);i=new e.Emitter(u,a,r,this.semanticInfoChain);if(this.compilationSettings().mapSourceFiles()){var f=new e.TextWriter(u+e.SourceMapper.MapFileExtension,!1,1);i.createSourceMapper(n,u,a,f,r.resolvePath)}}else this.compilationSettings().mapSourceFiles()&&i.setSourceMapperNewSourceFile(n);return i.setDocument(n),i.emitJavascript(s,!1),i},t.prototype._emitDocument=function(e,t,n,r){if(this._shouldEmit(e))if(e.emitToOwnOutputFile()){var i=this.emitDocumentWorker(e,t);i&&n(i.getOutputFiles())}else r=this.emitDocumentWorker(e,t,r);return r},t.prototype.emitAll=function(t){var r=(new Date).getTime(),i=new n,s=new e.EmitOptions(this,t);if(s.diagnostic())return i.emitOutputResult=2,i;var o=this.fileNames(),u=null;for(var a=0,f=o.length;a<f;a++){var l=o[a],c=this.getDocument(l);u=this._emitDocument(c,s,function(e){return i.outputFiles.push.apply(i.outputFiles,e)},u)}return u&&i.outputFiles.push.apply(i.outputFiles,u.getOutputFiles()),e.emitTime+=(new Date).getTime()-r,i},t.prototype.emit=function(t,r){t=e.switchToForwardSlashes(t);var i=new n,s=new e.EmitOptions(this,r);if(s.diagnostic())return i.emitOutputResult=2,i;var o=this.getDocument(t);return o.emitToOwnOutputFile()?(this._emitDocument(o,s,function(e){return i.outputFiles.push.apply(i.outputFiles,e)},null),i):this.emitAll(r)},t.prototype.compile=function(e,t){return typeof t=="undefined"&&(t=!1),new a(this,e,t)},t.prototype.getSyntacticDiagnostics=function(t){return t=e.switchToForwardSlashes(t),this.getDocument(t).diagnostics()},t.prototype.getSyntaxTree=function(e){return this.getDocument(e).syntaxTree()},t.prototype.getSourceUnit=function(e){return this.getDocument(e).sourceUnit()},t.prototype.getSemanticDiagnostics=function(t){t=e.switchToForwardSlashes(t);var n=this.getDocument(t),r=(new Date).getTime();e.PullTypeResolver.typeCheck(this.compilationSettings(),this.semanticInfoChain,n);var i=(new Date).getTime();e.typeCheckTime+=i-r;var s=this.semanticInfoChain.getDiagnostics(t);return s=e.ArrayUtilities.distinct(s,e.Diagnostic.equals),s.sort(function(t,n){if(t.fileName()<n.fileName())return-1;if(t.fileName()>n.fileName())return 1;if(t.start()<n.start())return-1;if(t.start()>n.start())return 1;var r=e.diagnosticInformationMap[t.diagnosticKey()].code,i=e.diagnosticInformationMap[n.diagnosticKey()].code;return r<i?-1:r>i?1:0}),s},t.prototype.getCompilerOptionsDiagnostics=function(t){var n=new e.EmitOptions(this,t),r=n.diagnostic();return r?[r]:e.sentinelEmptyArray},t.prototype.resolveAllFiles=function(){var e=this.fileNames();for(var t=0,n=e.length;t<n;t++)this.getSemanticDiagnostics(e[t])},t.prototype.getSymbolOfDeclaration=function(t){if(!t)return null;var n=this.semanticInfoChain.getResolver(),r=this.semanticInfoChain.getASTForDecl(t);if(!r)return null;var i=n.getEnclosingDecl(t);return r.kind()===139||r.kind()===140?this.getSymbolOfDeclaration(i):n.resolveAST(r,!1,new e.PullTypeResolutionContext(n))},t.prototype.extractResolutionContextFromAST=function(t,n,r,i){var s=r.fileName,o=null,u=null,a=!1,f=!1,l=new e.PullTypeResolutionContext(t);if(!n)return null;var c=this.getASTPath(n);for(var h=0,p=c.length;h<p;h++){var d=c[h];switch(d.kind()){case 222:case 219:case 218:i&&t.resolveAST(d,!0,l);break;case 136:var v=d;a=v.variableDeclarator.typeAnnotation!==null,this.extractResolutionContextForVariable(a,i,t,l,o,v,v.variableDeclarator.equalsValueClause);break;case 225:var m=d;a=m.typeAnnotation!==null,this.extractResolutionContextForVariable(a,i,t,l,o,m,m.equalsValueClause);break;case 213:case 216:if(i){var g=d.kind()===216,y=d,b=null;if(h+2<p&&y.argumentList===c[h+1]&&y.argumentList.arguments===c[h+2]){var w=new e.PullAdditionalCallResolutionData;g?t.resolveObjectCreationExpression(y,l,w):t.resolveInvocationExpression(y,l,w);if(w.actualParametersContextTypeSymbols){var E=c[h+3];if(E)for(var S=0,x=y.argumentList.arguments.nonSeparatorCount();S<x;S++)if(y.argumentList.arguments.nonSeparatorAt(S)===E){var T=w.actualParametersContextTypeSymbols[S];if(T){b=T;break}}}}else g?t.resolveObjectCreationExpression(y,l):t.resolveInvocationExpression(y,l);l.pushNewContextualType(b)}break;case 214:if(i){var b=null,N=l.getContextualType();N&&N.isArrayNamedTypeReference()&&(b=N.getElementType()),l.pushNewContextualType(b)}break;case 215:if(i){var C=d,k=new e.PullAdditionalObjectLiteralResolutionData;t.resolveObjectLiteralExpression(C,a,l,k);var L=c[h+1]&&c[h+1].kind()===2?c[h+2]:c[h+1];if(L){var b=null,A=C.propertyAssignments;if(A&&k.membersContextTypeSymbols)for(var S=0,x=A.nonSeparatorCount();S<x;S++)if(A.nonSeparatorAt(S)===L){var O=k.membersContextTypeSymbols[S];if(O){b=O;break}}l.pushNewContextualType(b)}}break;case 174:if(i){var M=d,b=null;if(c[h+1]&&c[h+1]===M.right){var _=t.resolveAST(M.left,a,l).type;_&&(a=!0,b=_)}l.pushNewContextualType(b)}break;case 220:var D=d;if(!(h+1<p&&c[h+1]===D.type)&&i){var b=null,P=t.resolveAST(D,a,l).type;P&&(a=!0,b=P),l.pushNewContextualType(b)}break;case 150:if(i){var H=d,b=null;if(o&&o.kind&1032192){var B=e.ASTHelpers.getType(u);if(B){var j=t.resolveTypeReference(B,l);j&&(a=!0,b=j)}else{var N=l.getContextualType();if(N&&N.isFunction()){var F=N.kind==33554432?N.getConstructSignatures():N.getCallSignatures(),I=F[0],q=I.returnType;q&&(a=!0,b=q)}}}l.pushNewContextualType(b)}break;case 122:i&&e.isTypesOnlyLocation(d)&&t.resolveAST(d,!1,l);break;case 163:f=!0;break;case 146:a=!1}var R=this.semanticInfoChain.getDeclForAST(d);R&&(o=R,u=d)}return n&&n.parent&&n.kind()===11&&(n.parent.kind()===212?n.parent.name===n&&(n=n.parent):n.parent.kind()===121&&n.parent.right===n&&(n=n.parent)),{ast:n,enclosingDecl:o,resolutionContext:l,inContextuallyTypedAssignment:a,inWithBlock:f}},t.prototype.extractResolutionContextForVariable=function(e,t,n,r,i,s,o){if(e&&t){n.resolveAST(s,!1,r);var u=this.semanticInfoChain.getSymbolForAST(s),a=null;u&&e&&(a=u.type),r.pushNewContextualType(a),o&&n.resolveAST(o,e,r)}},t.prototype.getASTPath=function(e){var t=[];while(e)t.unshift(e),e=e.parent;return t},t.prototype.pullGetSymbolInformationFromAST=function(t,n){var r=this.semanticInfoChain.getResolver(),i=this.extractResolutionContextFromAST(r,t,n,!0);if(!i||i.inWithBlock)return null;t=i.ast;var s=r.resolveAST(t,i.inContextuallyTypedAssignment,i.resolutionContext);if(!s)return e.Debug.assert(t.kind()===120,"No symbol was found for ast and ast was not source unit. Ast Kind: "+e.SyntaxKind[t.kind()]),null;s.isTypeReference()&&(s=s.getReferencedTypeSymbol());var o=this.semanticInfoChain.getAliasSymbolForAST(t);return{symbol:s,aliasSymbol:o,ast:t,enclosingScopeSymbol:this.getSymbolOfDeclaration(i.enclosingDecl)}},t.prototype.pullGetCallInformationFromAST=function(t,n){if(t.kind()!==213&&t.kind()!==216)return null;var r=t.kind()===216,i=this.semanticInfoChain.getResolver(),s=this.extractResolutionContextFromAST(i,t,n,!0);if(!s||s.inWithBlock)return null;var o=new e.PullAdditionalCallResolutionData;return r?i.resolveObjectCreationExpression(t,s.resolutionContext,o):i.resolveInvocationExpression(t,s.resolutionContext,o),{targetSymbol:o.targetSymbol,resolvedSignatures:o.resolvedSignatures,candidateSignature:o.candidateSignature,ast:t,enclosingScopeSymbol:this.getSymbolOfDeclaration(s.enclosingDecl),isConstructorCall:r}},t.prototype.pullGetVisibleMemberSymbolsFromAST=function(e,t){var n=this.semanticInfoChain.getResolver(),r=this.extractResolutionContextFromAST(n,e,t,!0);if(!r||r.inWithBlock)return null;var i=n.getVisibleMembersFromExpression(e,r.enclosingDecl,r.resolutionContext);return i?{symbols:i,enclosingScopeSymbol:this.getSymbolOfDeclaration(r.enclosingDecl)}:null},t.prototype.pullGetVisibleDeclsFromAST=function(e,t){var n=this.semanticInfoChain.getResolver(),r=this.extractResolutionContextFromAST(n,e,t,!1);return!r||r.inWithBlock?null:n.getVisibleDecls(r.enclosingDecl)},t.prototype.pullGetContextualMembersFromAST=function(e,t){if(e.kind()!==215)return null;var n=this.semanticInfoChain.getResolver(),r=this.extractResolutionContextFromAST(n,e,t,!0);if(!r||r.inWithBlock)return null;var i=n.getVisibleContextSymbols(r.enclosingDecl,r.resolutionContext);return{symbols:i,enclosingScopeSymbol:this.getSymbolOfDeclaration(r.enclosingDecl)}},t.prototype.pullGetDeclInformation=function(e,t,n){var r=this.semanticInfoChain.getResolver(),i=this.extractResolutionContextFromAST(r,t,n,!0);if(!i||i.inWithBlock)return null;var s=e.ast();if(!s)return null;var o=this.extractResolutionContextFromAST(r,s,this.getDocument(s.fileName()),!0);if(!o)return null;var u=e.getSymbol();return r.resolveDeclaredSymbol(u,i.resolutionContext),u.setUnresolved(),{symbol:u,aliasSymbol:null,ast:t,enclosingScopeSymbol:this.getSymbolOfDeclaration(i.enclosingDecl)}},t.prototype.topLevelDeclaration=function(e){return this.semanticInfoChain.topLevelDecl(e)},t.prototype.getDeclForAST=function(e){return this.semanticInfoChain.getDeclForAST(e)},t.prototype.fileNames=function(){return this.semanticInfoChain.fileNames()},t.prototype.topLevelDecl=function(e){return this.semanticInfoChain.topLevelDecl(e)},t.getLocationText=function(e){return e.fileName()+"("+(e.line()+1)+","+(e.character()+1)+")"},t.getFullDiagnosticText=function(t){var n="";t.fileName()&&(n+=this.getLocationText(t)+": "),n+=t.message();var r=t.additionalLocations();if(r.length>0){n+=" "+e.getLocalizedText(e.DiagnosticCode.Additional_locations,null)+e.Environment.newLine;for(var i=0,s=r.length;i<s;i++)n+="	"+this.getLocationText(r[i])+e.Environment.newLine}else n+=e.Environment.newLine;return n},t}();e.TypeScriptCompiler=o;var u;(function(e){e[e.Syntax=0]="Syntax",e[e.Semantics=1]="Semantics",e[e.EmitOptionsValidation=2]="EmitOptionsValidation",e[e.Emit=3]="Emit",e[e.DeclarationEmit=4]="DeclarationEmit"})(u||(u={}));var a=function(){function t(e,t,n,r){typeof r=="undefined"&&(r=0),this.compiler=e,this.resolvePath=t,this.continueOnDiagnostics=n,this.index=-1,this.fileNames=null,this._current=null,this._emitOptions=null,this._sharedEmitter=null,this._sharedDeclarationEmitter=null,this.hadSyntacticDiagnostics=!1,this.hadSemanticDiagnostics=!1,this.hadEmitDiagnostics=!1,this.fileNames=e.fileNames(),this.compilerPhase=r}return t.prototype.current=function(){return this._current},t.prototype.moveNext=function(){this._current=null;while(this.moveNextInternal())if(this._current)return!0;return!1},t.prototype.moveNextInternal=function(){this.index++;while(this.shouldMoveToNextPhase())this.index=0,this.compilerPhase++;if(this.compilerPhase>4)return!1;switch(this.compilerPhase){case 0:return this.moveNextSyntaxPhase();case 1:return this.moveNextSemanticsPhase();case 2:return this.moveNextEmitOptionsValidationPhase();case 3:return this.moveNextEmitPhase();case 4:return this.moveNextDeclarationEmitPhase()}},t.prototype.shouldMoveToNextPhase=function(){switch(this.compilerPhase){case 2:return this.index===1;case 0:case 1:return this.index===this.fileNames.length;case 3:case 4:return this.index===this.fileNames.length+1}return!1},t.prototype.moveNextSyntaxPhase=function(){e.Debug.assert(this.index>=0&&this.index<this.fileNames.length);var t=this.fileNames[this.index],n=this.compiler.getSyntacticDiagnostics(t);return n.length&&(this.continueOnDiagnostics||(this.hadSyntacticDiagnostics=!0),this._current=s.fromDiagnostics(n)),!0},t.prototype.moveNextSemanticsPhase=function(){if(this.hadSyntacticDiagnostics)return!1;e.Debug.assert(this.index>=0&&this.index<this.fileNames.length);var t=this.fileNames[this.index],n=this.compiler.getSemanticDiagnostics(t);return n.length&&(this.continueOnDiagnostics||(this.hadSemanticDiagnostics=!0),this._current=s.fromDiagnostics(n)),!0},t.prototype.moveNextEmitOptionsValidationPhase=function(){return e.Debug.assert(!this.hadSyntacticDiagnostics),this._emitOptions||(this._emitOptions=new e.EmitOptions(this.compiler,this.resolvePath)),this._emitOptions.diagnostic()&&(this.continueOnDiagnostics||(this.hadEmitDiagnostics=!0),this._current=s.fromDiagnostics([this._emitOptions.diagnostic()])),!0},t.prototype.moveNextEmitPhase=function(){var t=this;e.Debug.assert(!this.hadSyntacticDiagnostics),e.Debug.assert(this._emitOptions);if(this.hadEmitDiagnostics)return!1;e.Debug.assert(this.index>=0&&this.index<=this.fileNames.length);if(this.index<this.fileNames.length){var n=this.fileNames[this.index],r=this.compiler.getDocument(n);return this._sharedEmitter=this.compiler._emitDocument(r,this._emitOptions,function(e){t._current=s.fromOutputFiles(e)},this._sharedEmitter),!0}return this.index===this.fileNames.length&&this._sharedEmitter&&(this._current=s.fromOutputFiles(this._sharedEmitter.getOutputFiles())),!0},t.prototype.moveNextDeclarationEmitPhase=function(){var t=this;e.Debug.assert(!this.hadSyntacticDiagnostics),e.Debug.assert(!this.hadEmitDiagnostics);if(this.hadSemanticDiagnostics)return!1;if(!this.compiler.compilationSettings().generateDeclarationFiles())return!1;e.Debug.assert(this.index>=0&&this.index<=this.fileNames.length);if(this.index<this.fileNames.length){var n=this.fileNames[this.index],r=this.compiler.getDocument(n);return this._sharedDeclarationEmitter=this.compiler._emitDocumentDeclarations(r,this._emitOptions,function(e){t._current=s.fromOutputFiles([e])},this._sharedDeclarationEmitter),!0}return this.index===this.fileNames.length&&this._sharedDeclarationEmitter&&(this._current=s.fromOutputFiles([this._sharedDeclarationEmitter.getOutputFile()])),!0},t}();e.compareDataObjects=f})(r||(r={}));var r;(function(e){(function(e){e[e.Unknown=0]="Unknown",e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.InfinitelyExpanding=3]="InfinitelyExpanding"})(e.GenerativeTypeClassification||(e.GenerativeTypeClassification={}));var t=e.GenerativeTypeClassification,n=function(t){function n(n){t.call(this,n.name,n.kind),this.referencedTypeSymbol=n,this.isResolved=!0,e.Debug.assert(n!==null,"Type root symbol may not be null"),this.setRootSymbol(n),this.typeReference=this}return i(n,t),n.createTypeReference=function(e){if(e.isTypeReference())return e;var t=e.typeReference;return t||(t=new n(e),e.typeReference=t),t},n.prototype.isTypeReference=function(){return!0},n.prototype.setResolved=function(){},n.prototype.setUnresolved=function(){},n.prototype.invalidate=function(){},n.prototype.ensureReferencedTypeIsResolved=function(){this._getResolver().resolveDeclaredSymbol(this.referencedTypeSymbol)},n.prototype.getReferencedTypeSymbol=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol},n.prototype._getResolver=function(){return this.referencedTypeSymbol._getResolver()},n.prototype.hasMembers=function(){return this.referencedTypeSymbol.hasMembers()},n.prototype.setAssociatedContainerType=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": setAssociatedContainerType")},n.prototype.getAssociatedContainerType=function(){return this.referencedTypeSymbol.getAssociatedContainerType()},n.prototype.getFunctionSymbol=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getFunctionSymbol()},n.prototype.setFunctionSymbol=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": setFunctionSymbol")},n.prototype.addContainedNonMember=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addContainedNonMember")},n.prototype.findContainedNonMemberContainer=function(e,t){return typeof t=="undefined"&&(t=0),this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findContainedNonMemberContainer(e,t)},n.prototype.addMember=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addMember")},n.prototype.addEnclosedMemberType=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addEnclosedMemberType")},n.prototype.addEnclosedMemberContainer=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addEnclosedMemberContainer")},n.prototype.addEnclosedNonMember=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addEnclosedNonMember")},n.prototype.addEnclosedNonMemberType=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addEnclosedNonMemberType")},n.prototype.addEnclosedNonMemberContainer=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addEnclosedNonMemberContainer")},n.prototype.addTypeParameter=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addTypeParameter")},n.prototype.addConstructorTypeParameter=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addConstructorTypeParameter")},n.prototype.findContainedNonMember=function(e){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findContainedNonMember(e)},n.prototype.findContainedNonMemberType=function(e,t){return typeof t=="undefined"&&(t=0),this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findContainedNonMemberType(e,t)},n.prototype.getMembers=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getMembers()},n.prototype.setHasDefaultConstructor=function(t){typeof t=="undefined"&&(t=!0),e.Debug.fail("Reference symbol "+this.pullSymbolID+":setHasDefaultConstructor")},n.prototype.getHasDefaultConstructor=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getHasDefaultConstructor()},n.prototype.getConstructorMethod=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getConstructorMethod()},n.prototype.setConstructorMethod=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": setConstructorMethod")},n.prototype.getTypeParameters=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getTypeParameters()},n.prototype.isGeneric=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.isGeneric()},n.prototype.addSpecialization=function(e,t){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.addSpecialization(e,t)},n.prototype.getSpecialization=function(e){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getSpecialization(e)},n.prototype.getKnownSpecializations=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getKnownSpecializations()},n.prototype.getTypeArguments=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getTypeArguments()},n.prototype.getTypeArgumentsOrTypeParameters=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getTypeArgumentsOrTypeParameters()},n.prototype.appendCallSignature=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": appendCallSignature")},n.prototype.insertCallSignatureAtIndex=function(t,n){e.Debug.fail("Reference symbol "+this.pullSymbolID+": insertCallSignatureAtIndex")},n.prototype.appendConstructSignature=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": appendConstructSignature")},n.prototype.insertConstructSignatureAtIndex=function(t,n){e.Debug.fail("Reference symbol "+this.pullSymbolID+": insertConstructSignatureAtIndex")},n.prototype.addIndexSignature=function(t){e.Debug.fail("Reference symbol "+this.pullSymbolID+": addIndexSignature")},n.prototype.hasOwnCallSignatures=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.hasOwnCallSignatures()},n.prototype.getCallSignatures=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getCallSignatures()},n.prototype.hasOwnConstructSignatures=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.hasOwnConstructSignatures()},n.prototype.getConstructSignatures=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getConstructSignatures()},n.prototype.hasOwnIndexSignatures=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.hasOwnIndexSignatures()},n.prototype.getIndexSignatures=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getIndexSignatures()},n.prototype.addImplementedType=function(e){this.referencedTypeSymbol.addImplementedType(e)},n.prototype.getImplementedTypes=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getImplementedTypes()},n.prototype.addExtendedType=function(e){this.referencedTypeSymbol.addExtendedType(e)},n.prototype.getExtendedTypes=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getExtendedTypes()},n.prototype.addTypeThatExtendsThisType=function(e){this.referencedTypeSymbol.addTypeThatExtendsThisType(e)},n.prototype.getTypesThatExtendThisType=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getTypesThatExtendThisType()},n.prototype.addTypeThatExplicitlyImplementsThisType=function(e){this.referencedTypeSymbol.addTypeThatExplicitlyImplementsThisType(e)},n.prototype.getTypesThatExplicitlyImplementThisType=function(){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getTypesThatExplicitlyImplementThisType()},n.prototype.isValidBaseKind=function(e,t){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.isValidBaseKind(e,t)},n.prototype.findMember=function(e,t){return typeof t=="undefined"&&(t=!0),this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findMember(e,t)},n.prototype.findNestedType=function(e,t){return typeof t=="undefined"&&(t=0),this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findNestedType(e,t)},n.prototype.findNestedContainer=function(e,t){return typeof t=="undefined"&&(t=0),this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findNestedContainer(e,t)},n.prototype.getAllMembers=function(e,t){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.getAllMembers(e,t)},n.prototype.findTypeParameter=function(e){return this.ensureReferencedTypeIsResolved(),this.referencedTypeSymbol.findTypeParameter(e)},n.prototype.hasOnlyOverloadCallSignatures=function(){return this.referencedTypeSymbol.hasOnlyOverloadCallSignatures()},n}(e.PullTypeSymbol);e.PullTypeReferenceSymbol=n,e.nSpecializationsCreated=0,e.nSpecializedSignaturesCreated=0,e.nSpecializedTypeParameterCreated=0;var r=function(t){function n(n,r,i){t.call(this,n),this.referencedTypeSymbol=n,this._typeParameterArgumentMap=r,this.isInstanceReferenceType=i,this._instantiatedMembers=null,this._allInstantiatedMemberNameCache=null,this._instantiatedMemberNameCache=e.createIntrinsicsObject(),this._instantiatedCallSignatures=null,this._instantiatedConstructSignatures=null,this._instantiatedIndexSignatures=null,this._typeArgumentReferences=undefined,this._instantiatedConstructorMethod=null,this._instantiatedAssociatedContainerType=null,this._isArray=undefined,this._generativeTypeClassification=[],e.nSpecializationsCreated++}return i(n,t),n.prototype.getIsSpecialized=function(){return!this.isInstanceReferenceType},n.prototype.getGenerativeTypeClassification=function(e){if(!this.isNamedTypeSymbol())return 0;var t=this._generativeTypeClassification[e.pullSymbolID]||0;if(t===0){var n=e.getTypeParameters(),r=[];for(var i=0;i<n.length;i++)r[n[i].pullSymbolID]=n[i];var s=this.getTypeArguments();for(var i=0;i<s.length;i++)if(s[i].wrapsSomeTypeParameter(r,!0)){t=1;break}t===1?this.wrapsSomeTypeParameterIntoInfinitelyExpandingTypeReference(e)&&(t=3):t=2,this._generativeTypeClassification[e.pullSymbolID]=t}return t},n.prototype.isArrayNamedTypeReference=function(){return this._isArray===undefined&&(this._isArray=this.getRootSymbol().isArrayNamedTypeReference()||this.getRootSymbol()===this._getResolver().getArrayNamedType()),this._isArray},n.prototype.getElementType=function(){if(!this.isArrayNamedTypeReference())return null;var e=this.getTypeArguments();return e?e[0]:null},n.prototype.getReferencedTypeSymbol=function(){return this.ensureReferencedTypeIsResolved(),this.getIsSpecialized()?this:this.referencedTypeSymbol},n.create=function(t,r,i){e.Debug.assert(t);var s=new e.PullInstantiationHelpers.MutableTypeArgumentMap(i);e.PullInstantiationHelpers.instantiateTypeArgument(t,r,s);var o=r.getRootSymbol(),u=o.getSpecialization(s.typeParameterArgumentMap);if(u)return u;e.PullInstantiationHelpers.cleanUpTypeArgumentMap(r,s),i=s.typeParameterArgumentMap;var a=(r.kind&8216)!=0,f=i;if(a){var l=o.getTypeParameters();for(var c=0;c<l.length;c++)if(!e.PullHelpers.typeSymbolsAreIdentical(l[c],i[l[c].pullSymbolID])){a=!1;break}a&&(i=[])}return u=new n(o,i,a),o.addSpecialization(u,f),u},n.prototype.isGeneric=function(){return this.getRootSymbol().isGeneric()},n.prototype.getTypeParameterArgumentMap=function(){return this._typeParameterArgumentMap},n.prototype.getTypeArguments=function(){if(this.isInstanceReferenceType)return this.getTypeParameters();if(this._typeArgumentReferences===undefined){var t=this.referencedTypeSymbol.getTypeParameters();if(t.length){var n=null,r=[];for(var i=0;i<t.length;i++)n=this._typeParameterArgumentMap[t[i].pullSymbolID],n||e.Debug.fail("type argument count mismatch"),n&&(r[r.length]=n);this._typeArgumentReferences=r}else this._typeArgumentReferences=null}return this._typeArgumentReferences},n.prototype.getTypeArgumentsOrTypeParameters=function(){return this.getTypeArguments()},n.prototype.populateInstantiatedMemberFromReferencedMember=function(t){var n;e.PullHelpers.resolveDeclaredSymbolToUseType(t),t.type.wrapsSomeTypeParameter(this._typeParameterArgumentMap)?(n=new e.PullSymbol(t.name,t.kind),n.setRootSymbol(t),n.type=this._getResolver().instantiateType(t.type,this._typeParameterArgumentMap),n.isOptional=t.isOptional):n=t,this._instantiatedMemberNameCache[n.name]=n},n.prototype.getMembers=function(){this.ensureReferencedTypeIsResolved();if(this.isInstanceReferenceType)return this.referencedTypeSymbol.getMembers();if(!this._instantiatedMembers){var e=this.referencedTypeSymbol.getMembers(),t=null,n=null;this._instantiatedMembers=[];for(var r=0;r<e.length;r++)t=e[r],this._getResolver().resolveDeclaredSymbol(t),this._instantiatedMemberNameCache[t.name]||this.populateInstantiatedMemberFromReferencedMember(t),this._instantiatedMembers[this._instantiatedMembers.length]=this._instantiatedMemberNameCache[t.name]}return this._instantiatedMembers},n.prototype.findMember=function(e,t){typeof t=="undefined"&&(t=!0),this.ensureReferencedTypeIsResolved();if(this.isInstanceReferenceType)return this.referencedTypeSymbol.findMember(e,t);var n=this._instantiatedMemberNameCache[e];if(!n){var r=this.referencedTypeSymbol.findMember(e,t);r?(this.populateInstantiatedMemberFromReferencedMember(r),n=this._instantiatedMemberNameCache[e]):n=null}return n},n.prototype.getAllMembers=function(t,n){this.ensureReferencedTypeIsResolved();if(this.isInstanceReferenceType)return this.referencedTypeSymbol.getAllMembers(t,n);var r=[],i=this.referencedTypeSymbol.getAllMembers(t,n);if(!this._allInstantiatedMemberNameCache){this._allInstantiatedMemberNameCache=e.createIntrinsicsObject();var s=this.getMembers();for(var o=0;o<s.length;o++)this._allInstantiatedMemberNameCache[s[o].name]=s[o]}var u=null,a=null;for(var o=0;o<i.length;o++)u=i[o],this._getResolver().resolveDeclaredSymbol(u),this._allInstantiatedMemberNameCache[u.name]?r[r.length]=this._allInstantiatedMemberNameCache[u.name]:u.type.wrapsSomeTypeParameter(this._typeParameterArgumentMap)?(a=new e.PullSymbol(u.name,u.kind),a.setRootSymbol(u),a.type=this._getResolver().instantiateType(u.type,this._typeParameterArgumentMap),a.isOptional=u.isOptional,this._allInstantiatedMemberNameCache[a.name]=a,r[r.length]=a):(this._allInstantiatedMemberNameCache[u.name]=u,r[r.length]=u);return r},n.prototype.getConstructorMethod=function(){if(this.isInstanceReferenceType)return this.referencedTypeSymbol.getConstructorMethod();if(!this._instantiatedConstructorMethod){var t=this.referencedTypeSymbol.getConstructorMethod();this._instantiatedConstructorMethod=new e.PullSymbol(t.name,t.kind),this._instantiatedConstructorMethod.setRootSymbol(t),this._instantiatedConstructorMethod.setResolved(),this._instantiatedConstructorMethod.type=n.create(this._getResolver(),t.type,this._typeParameterArgumentMap)}return this._instantiatedConstructorMethod},n.prototype.getAssociatedContainerType=function(){if(!this.isInstanceReferenceType)return this.referencedTypeSymbol.getAssociatedContainerType();if(!this._instantiatedAssociatedContainerType){var e=this.referencedTypeSymbol.getAssociatedContainerType();e&&(this._instantiatedAssociatedContainerType=n.create(this._getResolver(),e,this._typeParameterArgumentMap))}return this._instantiatedAssociatedContainerType},n.prototype.getCallSignatures=function(){this.ensureReferencedTypeIsResolved();if(this.isInstanceReferenceType)return this.referencedTypeSymbol.getCallSignatures();if(this._instantiatedCallSignatures)return this._instantiatedCallSignatures;var e=this.referencedTypeSymbol.getCallSignatures();this._instantiatedCallSignatures=[];for(var t=0;t<e.length;t++)this._getResolver().resolveDeclaredSymbol(e[t]),e[t].wrapsSomeTypeParameter(this._typeParameterArgumentMap)?(this._instantiatedCallSignatures[this._instantiatedCallSignatures.length]=this._getResolver().instantiateSignature(e[t],this._typeParameterArgumentMap),this._instantiatedCallSignatures[this._instantiatedCallSignatures.length-1].functionType=this):this._instantiatedCallSignatures[this._instantiatedCallSignatures.length]=e[t];return this._instantiatedCallSignatures},n.prototype.getConstructSignatures=function(){this.ensureReferencedTypeIsResolved();if(this.isInstanceReferenceType)return this.referencedTypeSymbol.getConstructSignatures();if(this._instantiatedConstructSignatures)return this._instantiatedConstructSignatures;var e=this.referencedTypeSymbol.getConstructSignatures();this._instantiatedConstructSignatures=[];for(var t=0;t<e.length;t++)this._getResolver().resolveDeclaredSymbol(e[t]),e[t].wrapsSomeTypeParameter(this._typeParameterArgumentMap)?(this._instantiatedConstructSignatures[this._instantiatedConstructSignatures.length]=this._getResolver().instantiateSignature(e[t],this._typeParameterArgumentMap),this._instantiatedConstructSignatures[this._instantiatedConstructSignatures.length-1].functionType=this):this._instantiatedConstructSignatures[this._instantiatedConstructSignatures.length]=e[t];return this._instantiatedConstructSignatures},n.prototype.getIndexSignatures=function(){this.ensureReferencedTypeIsResolved();if(this.isInstanceReferenceType)return this.referencedTypeSymbol.getIndexSignatures();if(this._instantiatedIndexSignatures)return this._instantiatedIndexSignatures;var e=this.referencedTypeSymbol.getIndexSignatures();this._instantiatedIndexSignatures=[];for(var t=0;t<e.length;t++)this._getResolver().resolveDeclaredSymbol(e[t]),e[t].wrapsSomeTypeParameter(this._typeParameterArgumentMap)?(this._instantiatedIndexSignatures[this._instantiatedIndexSignatures.length]=this._getResolver().instantiateSignature(e[t],this._typeParameterArgumentMap),this._instantiatedIndexSignatures[this._instantiatedIndexSignatures.length-1].functionType=this):this._instantiatedIndexSignatures[this._instantiatedIndexSignatures.length]=e[t];return this._instantiatedIndexSignatures},n}(n);e.PullInstantiatedTypeReferenceSymbol=r;var s=function(t){function n(n,r){t.call(this,n.kind,n.isDefinition()),this._typeParameterArgumentMap=r,this.setRootSymbol(n),e.nSpecializedSignaturesCreated++,n.addSpecialization(this,r)}return i(n,t),n.prototype.getTypeParameterArgumentMap=function(){return this._typeParameterArgumentMap},n.prototype.getIsSpecialized=function(){return!0},n.prototype._getResolver=function(){return this.getRootSymbol()._getResolver()},n.prototype.getTypeParameters=function(){var t=this;if(!this._typeParameters){var n=this.getRootSymbol(),r=n.getTypeParameters(),i=e.ArrayUtilities.all(r,function(e){return t._typeParameterArgumentMap[e.pullSymbolID]!==undefined});if(!i&&r.length){this._typeParameters=[];for(var s=0;s<r.length;s++)this._typeParameters[this._typeParameters.length]=this._getResolver().instantiateTypeParameter(r[s],this._typeParameterArgumentMap)}else this._typeParameters=e.sentinelEmptyArray}return this._typeParameters},n.prototype.getAllowedToReferenceTypeParameters=function(){var e=this.getRootSymbol();return e.getAllowedToReferenceTypeParameters()},n}(e.PullSignatureSymbol);e.PullInstantiatedSignatureSymbol=s;var o=function(t){function n(n,r){t.call(this,n.name),e.nSpecializedTypeParameterCreated++,this.setRootSymbol(n),this.setConstraint(r),n.addSpecialization(this,[r])}return i(n,t),n.prototype._getResolver=function(){return this.getRootSymbol()._getResolver()},n}(e.PullTypeParameterSymbol);e.PullInstantiatedTypeParameterSymbol=o})(r||(r={}));var r;(function(e){function n(e,t){e&&(e._start!==-1&&(e._start+=t),e._end!==-1&&(e._end+=t))}function r(e,t){if(e&&e.length>0)for(var r=0;r<e.length;r++){var i=e[r];n(i,t)}}var t=function(){function t(e,t,n){this.fileName=e,this.lineMap=t,this.compilationSettings=n,this.position=0,this.previousTokenTrailingComments=null}return t.visit=function(e,n,r,i){var o=i?new s(n,e.lineMap(),r):new t(n,e.lineMap(),r);return e.sourceUnit().accept(o)},t.prototype.movePast=function(e){e!==null&&(this.position+=e.fullWidth())},t.prototype.moveTo=function(t,n){n!==null&&(this.position+=e.Syntax.childOffset(t,n))},t.prototype.setCommentsAndSpan=function(e,t,n){var r=n.firstToken(),i=n.lastToken();this.setSpan(e,t,n,r,i),e.setPreComments(this.convertTokenLeadingComments(r,t)),e.setPostComments(this.convertNodeTrailingComments(n,i,t))},t.prototype.createTokenSpan=function(t,n){if(n===null)return null;if(n.fullWidth()===0)return new e.ASTSpan(-1,-1);var r=n.leadingTriviaWidth(),i=n.trailingTriviaWidth(),s=t+r,o=t+n.fullWidth()-i;return new e.ASTSpan(s,o)},t.prototype.setSpan=function(e,t,n,r,i){typeof r=="undefined"&&(r=n.firstToken()),typeof i=="undefined"&&(i=n.lastToken());var s=r?r.leadingTriviaWidth():0,o=i?i.trailingTriviaWidth():0,u=t+s,a=t+n.fullWidth()-o;this.setSpanExplicit(e,u,a),e._trailingTriviaWidth=o},t.prototype.setSpanExplicit=function(e,t,n){e._start=t,e._end=n},t.prototype.visitSyntaxList=function(t){var n=this.position,r=new Array(t.childCount());for(var i=0,s=t.childCount();i<s;i++)r[i]=t.childAt(i).accept(this);var o=new e.ISyntaxList2(this.fileName,r);return this.setSpan(o,n,t),o},t.prototype.visitSeparatedSyntaxList=function(t){var n=this.position,r=new Array(t.nonSeparatorCount());for(var i=0,s=t.childCount();i<s;i++)if(i%2===0)r[i/2]=t.childAt(i).accept(this),this.previousTokenTrailingComments=null;else{var o=t.childAt(i);this.previousTokenTrailingComments=this.convertTokenTrailingComments(o,this.position+o.leadingTriviaWidth()+o.width()),this.movePast(o)}var u=new e.ISeparatedSyntaxList2(this.fileName,r,t.separatorCount());return this.setSpan(u,n,t),u.setPostComments(this.previousTokenTrailingComments),this.previousTokenTrailingComments=null,u},t.prototype.convertComment=function(t,n,r){var i=new e.Comment(t,r,n,n+t.fullWidth());return i},t.prototype.convertComments=function(e,t){var n=[];for(var r=0,i=e.count();r<i;r++){var s=e.syntaxTriviaAt(r);if(s.isComment()){var o=r+1<i&&e.syntaxTriviaAt(r+1).isNewLine();n.push(this.convertComment(s,t,o))}t+=s.fullWidth()}return n},t.prototype.mergeComments=function(e,t){return e===null?t:t===null?e:e.concat(t)},t.prototype.convertTokenLeadingComments=function(e,t){if(e===null)return null;var n=e.hasLeadingComment()?this.convertComments(e.leadingTrivia(),t):null,r=this.previousTokenTrailingComments;return this.previousTokenTrailingComments=null,this.mergeComments(r,n)},t.prototype.convertTokenTrailingComments=function(e,t){return e===null||!e.hasTrailingComment()||e.hasTrailingNewLine()?null:this.convertComments(e.trailingTrivia(),t)},t.prototype.convertNodeTrailingComments=function(e,t,n){return t===null||!t.hasTrailingComment()||t.hasTrailingNewLine()?null:this.convertComments(t.trailingTrivia(),n+e.fullWidth()-t.trailingTriviaWidth())},t.prototype.visitIdentifier=function(e){return this.visitToken(e)},t.prototype.visitToken=function(e){var t=this.position,n=this.visitTokenWorker(e);this.movePast(e);var r=t+e.leadingTriviaWidth();return this.setSpanExplicit(n,r,r+e.width()),n},t.prototype.visitTokenWorker=function(t){switch(t.tokenKind){case 60:return new e.BuiltInType(60,t.text(),t.valueText());case 61:return new e.BuiltInType(61,t.text(),t.valueText());case 67:return new e.BuiltInType(67,t.text(),t.valueText());case 69:return new e.BuiltInType(69,t.text(),t.valueText());case 41:return new e.BuiltInType(41,t.text(),t.valueText());case 35:return new e.ThisExpression(t.text(),t.valueText());case 50:return new e.SuperExpression(t.text(),t.valueText());case 37:return new e.LiteralExpression(37,t.text(),t.valueText());case 24:return new e.LiteralExpression(24,t.text(),t.valueText());case 32:return new e.LiteralExpression(32,t.text(),t.valueText());case 14:return new e.StringLiteral(t.text(),t.valueText());case 12:return new e.RegularExpressionLiteral(t.text(),t.valueText());case 13:var n=this.position,r=this.convertTokenLeadingComments(t,n),i=new e.NumericLiteral(t.value(),t.text(),t.valueText());return i.setPreComments(r),i;case 11:return new e.Identifier(t.text());default:throw e.Errors.invalidOperation()}},t.prototype.visitSourceUnit=function(t){var n=this.position;e.Debug.assert(n===0);var r=this.visitSyntaxList(t.moduleElements),i=this.convertTokenLeadingComments(t.endOfFileToken,e.Syntax.childOffset(t,t.endOfFileToken)),s=new e.SourceUnit(r,i,this.fileName);return this.setSpanExplicit(s,n,n+t.fullWidth()),s},t.prototype.visitExternalModuleReference=function(t){var n=this.position;this.moveTo(t,t.stringLiteral);var r=t.stringLiteral.accept(this);this.movePast(t.closeParenToken);var i=new e.ExternalModuleReference(r);return this.setSpan(i,n,t),i},t.prototype.visitModuleNameModuleReference=function(t){var n=this.position,r=t.moduleName.accept(this),i=new e.ModuleNameModuleReference(r);return this.setSpan(i,n,t),i},t.prototype.visitClassDeclaration=function(t){var n=this.position;this.moveTo(t,t.identifier);var r=this.visitIdentifier(t.identifier),i=this.visitTypeParameterList(t.typeParameterList),s=t.heritageClauses?this.visitSyntaxList(t.heritageClauses):null;this.movePast(t.openBraceToken);var o=this.visitSyntaxList(t.classElements),u=this.createTokenSpan(this.position,t.closeBraceToken);this.movePast(t.closeBraceToken);var a=this.visitModifiers(t.modifiers),f=new e.ClassDeclaration(a,r,i,s,o,u);return this.setCommentsAndSpan(f,n,t),f},t.prototype.visitModifiers=function(t){var n=null;return e.SyntaxUtilities.containsToken(t,47)&&(n=n||[],n.push(1)),e.SyntaxUtilities.containsToken(t,63)&&(n=n||[],n.push(8)),e.SyntaxUtilities.containsToken(t,58)&&(n=n||[],n.push(16)),e.SyntaxUtilities.containsToken(t,57)&&(n=n||[],n.push(4)),e.SyntaxUtilities.containsToken(t,55)&&(n=n||[],n.push(2)),n||e.sentinelEmptyArray},t.prototype.visitInterfaceDeclaration=function(t){var n=this.position;this.moveTo(t,t.identifier);var r=this.visitIdentifier(t.identifier),i=this.visitTypeParameterList(t.typeParameterList),s=t.heritageClauses?this.visitSyntaxList(t.heritageClauses):null,o=this.visitObjectType(t.body),u=this.visitModifiers(t.modifiers),a=new e.InterfaceDeclaration(u,r,i,s,o);return this.setCommentsAndSpan(a,n,t),a},t.prototype.visitHeritageClause=function(t){var n=this.position;this.movePast(t.extendsOrImplementsKeyword);var r=this.visitSeparatedSyntaxList(t.typeNames),i=new e.HeritageClause(t.extendsOrImplementsKeyword.tokenKind===48?230:231,r);return this.setSpan(i,n,t),i},t.prototype.visitModuleDeclaration=function(t){var n=this.position,r=this.visitModifiers(t.modifiers);this.moveTo(t,t.moduleKeyword),this.movePast(t.moduleKeyword);var i=t.name?t.name.accept(this):null,s=t.stringLiteral?t.stringLiteral.accept(this):null;this.movePast(t.openBraceToken);var o=this.visitSyntaxList(t.moduleElements),u=this.createTokenSpan(this.position,t.closeBraceToken);this.movePast(t.closeBraceToken);var a=new e.ModuleDeclaration(r,i,s,o,u);return this.setCommentsAndSpan(a,n,t),a},t.prototype.visitFunctionDeclaration=function(t){var n=this.position;this.moveTo(t,t.identifier);var r=this.visitIdentifier(t.identifier),i=this.visitCallSignature(t.callSignature),s=t.block?this.visitBlock(t.block):null;this.movePast(t.semicolonToken);var o=new e.FunctionDeclaration(this.visitModifiers(t.modifiers),r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitEnumDeclaration=function(t){var n=this.position;this.moveTo(t,t.identifier);var r=this.visitIdentifier(t.identifier);this.movePast(t.openBraceToken);var i=this.visitSeparatedSyntaxList(t.enumElements);this.movePast(t.closeBraceToken);var s=new e.EnumDeclaration(this.visitModifiers(t.modifiers),r,i);return this.setCommentsAndSpan(s,n,t),s},t.prototype.visitEnumElement=function(t){var n=this.position,r=this.visitToken(t.propertyName),i=t.equalsValueClause!==null?this.visitEqualsValueClause(t.equalsValueClause):null,s=new e.EnumElement(r,i);return this.setCommentsAndSpan(s,n,t),s},t.prototype.visitImportDeclaration=function(t){var n=this.position;this.moveTo(t,t.identifier);var r=this.visitIdentifier(t.identifier);this.movePast(t.equalsToken);var i=t.moduleReference.accept(this);this.movePast(t.semicolonToken);var s=this.visitModifiers(t.modifiers),o=new e.ImportDeclaration(s,r,i);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitExportAssignment=function(t){var n=this.position;this.moveTo(t,t.identifier);var r=this.visitIdentifier(t.identifier);this.movePast(t.semicolonToken);var i=new e.ExportAssignment(r);return this.setSpan(i,n,t),i},t.prototype.visitVariableStatement=function(t){var n=this.position;this.moveTo(t,t.variableDeclaration);var r=t.variableDeclaration.accept(this);this.movePast(t.semicolonToken);var i=this.visitModifiers(t.modifiers),s=new e.VariableStatement(i,r);return this.setCommentsAndSpan(s,n,t),s},t.prototype.visitVariableDeclaration=function(t){var n=this.position;this.moveTo(t,t.variableDeclarators);var r=this.visitSeparatedSyntaxList(t.variableDeclarators),i=new e.VariableDeclaration(r);return this.setSpan(i,n,t),i},t.prototype.visitVariableDeclarator=function(t){var n=this.position,r=this.visitToken(t.propertyName),i=this.visitTypeAnnotation(t.typeAnnotation),s=t.equalsValueClause?this.visitEqualsValueClause(t.equalsValueClause):null,o=new e.VariableDeclarator(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitEqualsValueClause=function(t){var n=this.position,r=this.convertTokenTrailingComments(t.equalsToken,this.position+t.equalsToken.leadingTriviaWidth()+t.equalsToken.width());this.movePast(t.equalsToken);var i=t.value.accept(this);i.setPreComments(this.mergeComments(r,i.preComments()));var s=new e.EqualsValueClause(i);return this.setSpan(s,n,t),s},t.prototype.visitPrefixUnaryExpression=function(t){var n=this.position;this.movePast(t.operatorToken);var r=t.operand.accept(this),i=new e.PrefixUnaryExpression(t.kind(),r);return this.setSpan(i,n,t),i},t.prototype.visitArrayLiteralExpression=function(t){var n=this.position,r=this.position+t.openBracketToken.leadingTriviaWidth();this.movePast(t.openBracketToken);var i=this.visitSeparatedSyntaxList(t.expressions),s=this.position+t.closeBracketToken.leadingTriviaWidth();this.movePast(t.closeBracketToken);var o=new e.ArrayLiteralExpression(i);return this.setSpan(o,n,t),o},t.prototype.visitOmittedExpression=function(t){var n=this.position,r=new e.OmittedExpression;return this.setSpan(r,n,t),r},t.prototype.visitParenthesizedExpression=function(t){var n=this.position,r=t.openParenToken,i=this.convertTokenTrailingComments(r,n+r.leadingTriviaWidth()+r.width());this.movePast(r);var s=t.expression.accept(this);this.movePast(t.closeParenToken);var o=new e.ParenthesizedExpression(i,s);return this.setSpan(o,n,t),o},t.prototype.visitSimpleArrowFunctionExpression=function(t){var n=this.position,r=t.identifier.accept(this);this.movePast(t.equalsGreaterThanToken);var i=t.block?this.visitBlock(t.block):null,s=t.expression?t.expression.accept(this):null,o=new e.SimpleArrowFunctionExpression(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitParenthesizedArrowFunctionExpression=function(t){var n=this.position,r=this.visitCallSignature(t.callSignature);this.movePast(t.equalsGreaterThanToken);var i=t.block?this.visitBlock(t.block):null,s=t.expression?t.expression.accept(this):null,o=new e.ParenthesizedArrowFunctionExpression(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitType=function(e){return e?e.accept(this):null},t.prototype.visitTypeQuery=function(t){var n=this.position;this.movePast(t.typeOfKeyword);var r=t.name.accept(this),i=new e.TypeQuery(r);return this.setSpan(i,n,t),i},t.prototype.visitQualifiedName=function(t){var n=this.position,r=this.visitType(t.left);this.movePast(t.dotToken);var i=this.visitIdentifier(t.right),s=new e.QualifiedName(r,i);return this.setSpan(s,n,t),s},t.prototype.visitTypeArgumentList=function(t){if(t===null)return null;var n=this.position;this.movePast(t.lessThanToken);var r=this.visitSeparatedSyntaxList(t.typeArguments);this.movePast(t.greaterThanToken);var i=new e.TypeArgumentList(r);return this.setSpan(i,n,t),i},t.prototype.visitConstructorType=function(t){var n=this.position;this.movePast(t.newKeyword);var r=this.visitTypeParameterList(t.typeParameterList),i=this.visitParameterList(t.parameterList);this.movePast(t.equalsGreaterThanToken);var s=this.visitType(t.type),o=new e.ConstructorType(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitFunctionType=function(t){var n=this.position,r=this.visitTypeParameterList(t.typeParameterList),i=this.visitParameterList(t.parameterList);this.movePast(t.equalsGreaterThanToken);var s=this.visitType(t.type),o=new e.FunctionType(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitObjectType=function(t){var n=this.position;this.movePast(t.openBraceToken);var r=this.visitSeparatedSyntaxList(t.typeMembers);this.movePast(t.closeBraceToken);var i=new e.ObjectType(r);return this.setSpan(i,n,t),i},t.prototype.visitArrayType=function(t){var n=this.position,r=this.visitType(t.type);this.movePast(t.openBracketToken),this.movePast(t.closeBracketToken);var i=new e.ArrayType(r);return this.setSpan(i,n,t),i},t.prototype.visitGenericType=function(t){var n=this.position,r=this.visitType(t.name),i=this.visitTypeArgumentList(t.typeArgumentList),s=new e.GenericType(r,i);return this.setSpan(s,n,t),s},t.prototype.visitTypeAnnotation=function(t){if(!t)return null;var n=this.position;this.movePast(t.colonToken);var r=this.visitType(t.type),i=new e.TypeAnnotation(r);return this.setSpan(i,n,t),i},t.prototype.visitBlock=function(t){if(!t)return null;var n=this.position;this.movePast(t.openBraceToken);var r=this.visitSyntaxList(t.statements),i=this.position,s=this.convertTokenLeadingComments(t.closeBraceToken,this.position),o=this.createTokenSpan(this.position,t.closeBraceToken);this.movePast(t.closeBraceToken);var u=new e.Block(r,s,o);return this.setSpan(u,n,t),u},t.prototype.visitParameter=function(t){var n=this.position,r=this.createTokenSpan(this.position,t.dotDotDotToken);this.moveTo(t,t.identifier);var i=this.visitIdentifier(t.identifier),s=this.createTokenSpan(this.position,t.questionToken);this.movePast(t.questionToken);var o=this.visitTypeAnnotation(t.typeAnnotation),u=t.equalsValueClause?t.equalsValueClause.accept(this):null,a=this.visitModifiers(t.modifiers),f=new e.Parameter(r,a,i,s,o,u);return this.setCommentsAndSpan(f,n,t),f},t.prototype.visitMemberAccessExpression=function(t){var n=this.position,r=t.expression.accept(this);this.movePast(t.dotToken);var i=this.visitIdentifier(t.name),s=new e.MemberAccessExpression(r,i);return this.setSpan(s,n,t),s},t.prototype.visitPostfixUnaryExpression=function(t){var n=this.position,r=t.operand.accept(this);this.movePast(t.operatorToken);var i=new e.PostfixUnaryExpression(t.kind()===210?210:211,r);return this.setSpan(i,n,t),i},t.prototype.visitElementAccessExpression=function(t){var n=this.position,r=t.expression.accept(this);this.movePast(t.openBracketToken);var i=t.argumentExpression.accept(this);this.movePast(t.closeBracketToken);var s=new e.ElementAccessExpression(r,i);return this.setSpan(s,n,t),s},t.prototype.visitInvocationExpression=function(t){var n=this.position,r=t.expression.accept(this),i=this.visitArgumentList(t.argumentList),s=new e.InvocationExpression(r,i);return this.setSpan(s,n,t),s},t.prototype.visitArgumentList=function(t){if(t===null)return null;var n=this.position,r=this.visitTypeArgumentList(t.typeArgumentList);this.movePast(t.openParenToken);var i=this.visitSeparatedSyntaxList(t.arguments);if(t.arguments.fullWidth()===0&&t.closeParenToken.fullWidth()===0){var s=n+t.openParenToken.leadingTriviaWidth()+t.openParenToken.width();this.setSpanExplicit(i,s,s+t.openParenToken.trailingTriviaWidth())}var o=this.createTokenSpan(this.position,t.closeParenToken);this.movePast(t.closeParenToken);var u=new e.ArgumentList(r,i,o);return this.setSpan(u,n,t),u},t.prototype.visitBinaryExpression=function(t){var n=this.position,r=t.left.accept(this);this.movePast(t.operatorToken);var i=t.right.accept(this),s=new e.BinaryExpression(t.kind(),r,i);return this.setSpan(s,n,t),s},t.prototype.visitConditionalExpression=function(t){var n=this.position,r=t.condition.accept(this);this.movePast(t.questionToken);var i=t.whenTrue.accept(this);this.movePast(t.colonToken);var s=t.whenFalse.accept(this),o=new e.ConditionalExpression(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitConstructSignature=function(t){var n=this.position;this.movePast(t.newKeyword);var r=this.visitCallSignature(t.callSignature),i=new e.ConstructSignature(r);return this.setCommentsAndSpan(i,n,t),i},t.prototype.visitMethodSignature=function(t){var n=this.position,r=this.visitToken(t.propertyName),i=this.createTokenSpan(this.position,t.questionToken);this.movePast(t.questionToken);var s=this.visitCallSignature(t.callSignature),o=new e.MethodSignature(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitIndexSignature=function(t){var n=this.position;this.movePast(t.openBracketToken);var r=t.parameter.accept(this);this.movePast(t.closeBracketToken);var i=this.visitTypeAnnotation(t.typeAnnotation),s=new e.IndexSignature(r,i);return this.setCommentsAndSpan(s,n,t),s},t.prototype.visitPropertySignature=function(t){var n=this.position,r=this.visitToken(t.propertyName),i=this.createTokenSpan(this.position,t.questionToken);this.movePast(t.questionToken);var s=this.visitTypeAnnotation(t.typeAnnotation),o=new e.PropertySignature(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitParameterList=function(t){if(!t)return null;var n=this.position,r=t.openParenToken;this.previousTokenTrailingComments=this.convertTokenTrailingComments(r,n+r.leadingTriviaWidth()+r.width());var i=null;t.parameters.childCount()===0&&(i=this.previousTokenTrailingComments,this.previousTokenTrailingComments=null),this.movePast(t.openParenToken);var s=this.visitSeparatedSyntaxList(t.parameters);this.movePast(t.closeParenToken);var o=new e.ParameterList(i,s);return this.setSpan(o,n,t),o},t.prototype.visitCallSignature=function(t){var n=this.position,r=this.visitTypeParameterList(t.typeParameterList),i=this.visitParameterList(t.parameterList),s=this.visitTypeAnnotation(t.typeAnnotation),o=new e.CallSignature(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitTypeParameterList=function(t){if(!t)return null;var n=this.position;this.movePast(t.lessThanToken);var r=this.visitSeparatedSyntaxList(t.typeParameters);this.movePast(t.greaterThanToken);var i=new e.TypeParameterList(r);return this.setSpan(i,n,t),i},t.prototype.visitTypeParameter=function(t){var n=this.position,r=this.visitIdentifier(t.identifier),i=t.constraint?t.constraint.accept(this):null,s=new e.TypeParameter(r,i);return this.setSpan(s,n,t),s},t.prototype.visitConstraint=function(t){var n=this.position;this.movePast(t.extendsKeyword);var r=this.visitType(t.type),i=new e.Constraint(r);return this.setSpan(i,n,t),i},t.prototype.visitIfStatement=function(t){var n=this.position;this.moveTo(t,t.condition);var r=t.condition.accept(this);this.movePast(t.closeParenToken);var i=t.statement.accept(this),s=t.elseClause?t.elseClause.accept(this):null,o=new e.IfStatement(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitElseClause=function(t){var n=this.position;this.movePast(t.elseKeyword);var r=t.statement.accept(this),i=new e.ElseClause(r);return this.setSpan(i,n,t),i},t.prototype.visitExpressionStatement=function(t){var n=this.position,r=this.convertTokenLeadingComments(t.firstToken(),n),i=t.expression.accept(this),s=this.position,o=this.convertComments(t.semicolonToken.trailingTrivia(),this.position+t.semicolonToken.leadingTriviaWidth()+t.semicolonToken.width());this.movePast(t.semicolonToken);var u=new e.ExpressionStatement(i);return this.setSpan(u,n,t),u.setPreComments(r),u.setPostComments(o),u},t.prototype.visitConstructorDeclaration=function(t){var n=this.position;this.moveTo(t,t.callSignature);var r=this.visitCallSignature(t.callSignature),i=t.block?t.block.accept(this):null;this.movePast(t.semicolonToken);var s=new e.ConstructorDeclaration(r,i);return this.setCommentsAndSpan(s,n,t),s},t.prototype.visitIndexMemberDeclaration=function(t){var n=this.position;this.moveTo(t,t.indexSignature);var r=t.indexSignature.accept(this);this.movePast(t.semicolonToken);var i=new e.IndexMemberDeclaration(r);return this.setSpan(i,n,t),i},t.prototype.visitMemberFunctionDeclaration=function(t){var n=this.position;this.moveTo(t,t.propertyName);var r=this.visitToken(t.propertyName),i=this.visitCallSignature(t.callSignature),s=t.block?this.visitBlock(t.block):null;this.movePast(t.semicolonToken);var o=new e.MemberFunctionDeclaration(this.visitModifiers(t.modifiers),r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitGetAccessor=function(t){var n=this.position;this.moveTo(t,t.propertyName);var r=this.visitToken(t.propertyName),i=this.visitParameterList(t.parameterList),s=this.visitTypeAnnotation(t.typeAnnotation),o=t.block?t.block.accept(this):null,u=new e.GetAccessor(this.visitModifiers(t.modifiers),r,i,s,o);return this.setCommentsAndSpan(u,n,t),u},t.prototype.visitSetAccessor=function(t){var n=this.position;this.moveTo(t,t.propertyName);var r=this.visitToken(t.propertyName),i=this.visitParameterList(t.parameterList),s=t.block?t.block.accept(this):null,o=new e.SetAccessor(this.visitModifiers(t.modifiers),r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitMemberVariableDeclaration=function(t){var n=this.position;this.moveTo(t,t.variableDeclarator);var r=t.variableDeclarator.accept(this);this.movePast(t.semicolonToken);var i=this.visitModifiers(t.modifiers),s=new e.MemberVariableDeclaration(i,r);return this.setCommentsAndSpan(s,n,t),s},t.prototype.visitThrowStatement=function(t){var n=this.position;this.movePast(t.throwKeyword);var r=t.expression.accept(this);this.movePast(t.semicolonToken);var i=new e.ThrowStatement(r);return this.setSpan(i,n,t),i},t.prototype.visitReturnStatement=function(t){var n=this.position;this.movePast(t.returnKeyword);var r=t.expression?t.expression.accept(this):null;this.movePast(t.semicolonToken);var i=new e.ReturnStatement(r);return this.setCommentsAndSpan(i,n,t),i},t.prototype.visitObjectCreationExpression=function(t){var n=this.position;this.movePast(t.newKeyword);var r=t.expression.accept(this),i=this.visitArgumentList(t.argumentList),s=new e.ObjectCreationExpression(r,i);return this.setSpan(s,n,t),s},t.prototype.visitSwitchStatement=function(t){var n=this.position;this.movePast(t.switchKeyword),this.movePast(t.openParenToken);var r=t.expression.accept(this),i=this.createTokenSpan(this.position,t.closeParenToken);this.movePast(t.closeParenToken),this.movePast(t.openBraceToken);var s=this.visitSyntaxList(t.switchClauses);this.movePast(t.closeBraceToken);var o=new e.SwitchStatement(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitCaseSwitchClause=function(t){var n=this.position;this.movePast(t.caseKeyword);var r=t.expression.accept(this);this.movePast(t.colonToken);var i=this.visitSyntaxList(t.statements),s=new e.CaseSwitchClause(r,i);return this.setSpan(s,n,t),s},t.prototype.visitDefaultSwitchClause=function(t){var n=this.position;this.movePast(t.defaultKeyword),this.movePast(t.colonToken);var r=this.visitSyntaxList(t.statements),i=new e.DefaultSwitchClause(r);return this.setSpan(i,n,t),i},t.prototype.visitBreakStatement=function(t){var n=this.position;this.movePast(t.breakKeyword);var r=t.identifier?t.identifier.accept(this):null;this.movePast(t.semicolonToken);var i=new e.BreakStatement(r);return this.setSpan(i,n,t),i},t.prototype.visitContinueStatement=function(t){var n=this.position;this.movePast(t.continueKeyword);var r=t.identifier?t.identifier.accept(this):null;this.movePast(t.semicolonToken);var i=new e.ContinueStatement(r);return this.setSpan(i,n,t),i},t.prototype.visitForStatement=function(t){var n=this.position;this.movePast(t.forKeyword),this.movePast(t.openParenToken);var r=t.variableDeclaration?t.variableDeclaration.accept(this):null,i=t.initializer?t.initializer.accept(this):null;this.movePast(t.firstSemicolonToken);var s=t.condition?t.condition.accept(this):null;this.movePast(t.secondSemicolonToken);var o=t.incrementor?t.incrementor.accept(this):null;this.movePast(t.closeParenToken);var u=t.statement.accept(this),a=new e.ForStatement(r,i,s,o,u);return this.setSpan(a,n,t),a},t.prototype.visitForInStatement=function(t){var n=this.position;this.movePast(t.forKeyword),this.movePast(t.openParenToken);var r=t.variableDeclaration?t.variableDeclaration.accept(this):null,i=t.left?t.left.accept(this):null;this.movePast(t.inKeyword);var s=t.expression.accept(this);this.movePast(t.closeParenToken);var o=t.statement.accept(this),u=new e.ForInStatement(r,i,s,o);return this.setSpan(u,n,t),u},t.prototype.visitWhileStatement=function(t){var n=this.position;this.moveTo(t,t.condition);var r=t.condition.accept(this);this.movePast(t.closeParenToken);var i=t.statement.accept(this),s=new e.WhileStatement(r,i);return this.setSpan(s,n,t),s},t.prototype.visitWithStatement=function(t){var n=this.position;this.moveTo(t,t.condition);var r=t.condition.accept(this);this.movePast(t.closeParenToken);var i=t.statement.accept(this),s=new e.WithStatement(r,i);return this.setSpan(s,n,t),s},t.prototype.visitCastExpression=function(t){var n=this.position;this.movePast(t.lessThanToken);var r=this.visitType(t.type);this.movePast(t.greaterThanToken);var i=t.expression.accept(this),s=new e.CastExpression(r,i);return this.setSpan(s,n,t),s},t.prototype.visitObjectLiteralExpression=function(t){var n=this.position,r=this.position+t.openBraceToken.leadingTriviaWidth();this.movePast(t.openBraceToken);var i=this.visitSeparatedSyntaxList(t.propertyAssignments),s=this.position+t.closeBraceToken.leadingTriviaWidth();this.movePast(t.closeBraceToken);var o=new e.ObjectLiteralExpression(i);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitSimplePropertyAssignment=function(t){var n=this.position,r=this.convertTokenLeadingComments(t.firstToken(),n),i=this.convertNodeTrailingComments(t,t.lastToken(),n),s=t.propertyName.accept(this),o=this.convertTokenTrailingComments(t.colonToken,this.position+t.colonToken.leadingTriviaWidth()+t.colonToken.width());this.movePast(t.colonToken);var u=t.expression.accept(this);u.setPreComments(this.mergeComments(o,u.preComments()));var a=new e.SimplePropertyAssignment(s,u);return this.setSpan(a,n,t),a.setPreComments(r),a.setPostComments(i),a},t.prototype.visitFunctionPropertyAssignment=function(t){var n=this.position,r=t.propertyName.accept(this),i=this.visitCallSignature(t.callSignature),s=this.visitBlock(t.block),o=new e.FunctionPropertyAssignment(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitFunctionExpression=function(t){var n=this.position;this.movePast(t.functionKeyword);var r=t.identifier===null?null:this.visitIdentifier(t.identifier),i=this.visitCallSignature(t.callSignature),s=t.block?t.block.accept(this):null,o=new e.FunctionExpression(r,i,s);return this.setCommentsAndSpan(o,n,t),o},t.prototype.visitEmptyStatement=function(t){var n=this.position;this.movePast(t.semicolonToken);var r=new e.EmptyStatement;return this.setSpan(r,n,t),r},t.prototype.visitTryStatement=function(t){var n=this.position;this.movePast(t.tryKeyword);var r=t.block.accept(this),i=null;t.catchClause!==null&&(i=t.catchClause.accept(this));var s=null;t.finallyClause!==null&&(s=t.finallyClause.accept(this));var o=new e.TryStatement(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitCatchClause=function(t){var n=this.position;this.movePast(t.catchKeyword),this.movePast(t.openParenToken);var r=this.visitIdentifier(t.identifier),i=this.visitTypeAnnotation(t.typeAnnotation);this.movePast(t.closeParenToken);var s=t.block.accept(this),o=new e.CatchClause(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitFinallyClause=function(t){var n=this.position;this.movePast(t.finallyKeyword);var r=t.block.accept(this),i=new e.FinallyClause(r);return this.setSpan(i,n,t),i},t.prototype.visitLabeledStatement=function(t){var n=this.position,r=this.visitIdentifier(t.identifier);this.movePast(t.colonToken);var i=t.statement.accept(this),s=new e.LabeledStatement(r,i);return this.setSpan(s,n,t),s},t.prototype.visitDoStatement=function(t){var n=this.position;this.movePast(t.doKeyword);var r=t.statement.accept(this),i=this.createTokenSpan(this.position,t.whileKeyword);this.movePast(t.whileKeyword),this.movePast(t.openParenToken);var s=t.condition.accept(this);this.movePast(t.closeParenToken),this.movePast(t.semicolonToken);var o=new e.DoStatement(r,i,s);return this.setSpan(o,n,t),o},t.prototype.visitTypeOfExpression=function(t){var n=this.position;this.movePast(t.typeOfKeyword);var r=t.expression.accept(this),i=new e.TypeOfExpression(r);return this.setSpan(i,n,t),i},t.prototype.visitDeleteExpression=function(t){var n=this.position;this.movePast(t.deleteKeyword);var r=t.expression.accept(this),i=new e.DeleteExpression(r);return this.setSpan(i,n,t),i},t.prototype.visitVoidExpression=function(t){var n=this.position;this.movePast(t.voidKeyword);var r=t.expression.accept(this),i=new e.VoidExpression(r);return this.setSpan(i,n,t),i},t.prototype.visitDebuggerStatement=function(t){var n=this.position;this.movePast(t.debuggerKeyword),this.movePast(t.semicolonToken);var r=new e.DebuggerStatement;return this.setSpan(r,n,t),r},t}();e.SyntaxTreeToAstVisitor=t;var s=function(t){function s(){t.apply(this,arguments)}return i(s,t),s.prototype.applyDelta=function(t,i){if(i===0)return;var s=function(e){n(e,i),r(e.preComments(),i),r(e.postComments(),i);switch(e.kind()){case 146:n(e.closeBraceToken,i);break;case 226:n(e.closeParenToken,i);break;case 130:n(e.endingToken,i);break;case 131:n(e.closeBraceToken,i);break;case 161:n(e.whileKeyword,i);break;case 151:n(e.closeParenToken,i)}};e.getAstWalkerFactory().simpleWalk(t,s)},s.prototype.setSpanExplicit=function(e,n,r){if(e._start!==-1){var i=n-e._start;this.applyDelta(e,i),e._end=r}else t.prototype.setSpanExplicit.call(this,e,n,r)},s.prototype.getAndMovePastAST=function(e){if(this.previousTokenTrailingComments!==null)return null;var t=e._ast;if(!t)return null;var n=this.position;return this.movePast(e),this.setSpan(t,n,e),t},s.prototype.setAST=function(e,t){e._ast=t},s.prototype.visitSyntaxList=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitSyntaxList.call(this,e),e.childCount()>0&&this.setAST(e,n)),n},s.prototype.visitSeparatedSyntaxList=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitSeparatedSyntaxList.call(this,e),e.childCount()>0&&this.setAST(e,n)),n},s.prototype.visitToken=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitToken.call(this,e),this.setAST(e,n)),n},s.prototype.visitClassDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitClassDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitInterfaceDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitInterfaceDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitHeritageClause=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitHeritageClause.call(this,e),this.setAST(e,n)),n},s.prototype.visitModuleDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitModuleDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitFunctionDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitFunctionDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitImportDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitImportDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitExportAssignment=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitExportAssignment.call(this,e),this.setAST(e,n)),n},s.prototype.visitPrefixUnaryExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitPrefixUnaryExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitArrayLiteralExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitArrayLiteralExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitOmittedExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitOmittedExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitParenthesizedExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitParenthesizedExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitSimpleArrowFunctionExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitSimpleArrowFunctionExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitParenthesizedArrowFunctionExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitParenthesizedArrowFunctionExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitQualifiedName=function(e){var n=this.getAndMovePastAST(e);if(!n){var n=t.prototype.visitQualifiedName.call(this,e);this.setAST(e,n)}return n},s.prototype.visitConstructorType=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitConstructorType.call(this,e),this.setAST(e,n)),n},s.prototype.visitFunctionType=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitFunctionType.call(this,e),this.setAST(e,n)),n},s.prototype.visitObjectType=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitObjectType.call(this,e),this.setAST(e,n)),n},s.prototype.visitArrayType=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitArrayType.call(this,e),this.setAST(e,n)),n},s.prototype.visitGenericType=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitGenericType.call(this,e),this.setAST(e,n)),n},s.prototype.visitBlock=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitBlock.call(this,e),this.setAST(e,n)),n},s.prototype.visitParameter=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitParameter.call(this,e),this.setAST(e,n)),n},s.prototype.visitMemberAccessExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitMemberAccessExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitPostfixUnaryExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitPostfixUnaryExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitElementAccessExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitElementAccessExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitInvocationExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitInvocationExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitBinaryExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitBinaryExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitConditionalExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitConditionalExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitConstructSignature=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitConstructSignature.call(this,e),this.setAST(e,n)),n},s.prototype.visitMethodSignature=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitMethodSignature.call(this,e),this.setAST(e,n)),n},s.prototype.visitIndexSignature=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitIndexSignature.call(this,e),this.setAST(e,n)),n},s.prototype.visitPropertySignature=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitPropertySignature.call(this,e),this.setAST(e,n)),n},s.prototype.visitCallSignature=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitCallSignature.call(this,e),this.setAST(e,n)),n},s.prototype.visitTypeParameter=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitTypeParameter.call(this,e),this.setAST(e,n)),n},s.prototype.visitIfStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitIfStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitExpressionStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitExpressionStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitConstructorDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitConstructorDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitMemberFunctionDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitMemberFunctionDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitGetAccessor=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitGetAccessor.call(this,e),this.setAST(e,n)),n},s.prototype.visitSetAccessor=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitSetAccessor.call(this,e),this.setAST(e,n)),n},s.prototype.visitMemberVariableDeclaration=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitMemberVariableDeclaration.call(this,e),this.setAST(e,n)),n},s.prototype.visitThrowStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitThrowStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitReturnStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitReturnStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitObjectCreationExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitObjectCreationExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitSwitchStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitSwitchStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitCaseSwitchClause=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitCaseSwitchClause.call(this,e),this.setAST(e,n)),n},s.prototype.visitDefaultSwitchClause=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitDefaultSwitchClause.call(this,e),this.setAST(e,n)),n},s.prototype.visitBreakStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitBreakStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitContinueStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitContinueStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitForStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitForStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitForInStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitForInStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitWhileStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitWhileStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitWithStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitWithStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitCastExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitCastExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitObjectLiteralExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitObjectLiteralExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitSimplePropertyAssignment=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitSimplePropertyAssignment.call(this,e),this.setAST(e,n)),n},s.prototype.visitFunctionPropertyAssignment=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitFunctionPropertyAssignment.call(this,e),this.setAST(e,n)),n},s.prototype.visitFunctionExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitFunctionExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitEmptyStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitEmptyStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitTryStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitTryStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitCatchClause=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitCatchClause.call(this,e),this.setAST(e,n)),n},s.prototype.visitLabeledStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitLabeledStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitDoStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitDoStatement.call(this,e),this.setAST(e,n)),n},s.prototype.visitTypeOfExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitTypeOfExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitDeleteExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitDeleteExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitVoidExpression=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitVoidExpression.call(this,e),this.setAST(e,n)),n},s.prototype.visitDebuggerStatement=function(e){var n=this.getAndMovePastAST(e);return n||(n=t.prototype.visitDebuggerStatement.call(this,e),this.setAST(e,n)),n},s}(t)})(r||(r={}));var r;(function(e){function r(e,t){return a(e,t,!1)}function s(e,t){return a(e,t,!0)}function o(e,t){return f(e,t,!1)}function u(e,t){return f(e,t,!0)}function a(e,t,n){return e===t?!0:e!==null&&t!==null&&e.kind()===t.kind()&&e.structuralEquals(t,n)}function f(e,t,n){return e===t?!0:e!==null&&t!==null&&e.structuralEquals(t,n)}function l(t,n,i){return e.ArrayUtilities.sequenceEquals(t,n,i?s:r)}function c(t,n,r){return e.ArrayUtilities.sequenceEquals(t,n,r?u:o)}var t=function(){function e(e,t){this._start=e,this._end=t}return e.prototype.start=function(){return this._start},e.prototype.end=function(){return this._end},e}();e.ASTSpan=t;var n=0;e.structuralEqualsNotIncludingPosition=r,e.structuralEqualsIncludingPosition=s;var h=function(){function t(){this.parent=null,this._start=-1,this._end=-1,this._trailingTriviaWidth=0,this._astID=n++,this._preComments=null,this._postComments=null}return t.prototype.syntaxID=function(){return this._astID},t.prototype.start=function(){return this._start},t.prototype.end=function(){return this._end},t.prototype.trailingTriviaWidth=function(){return this._trailingTriviaWidth},t.prototype.fileName=function(){return this.parent.fileName()},t.prototype.kind=function(){throw e.Errors.abstract()},t.prototype.preComments=function(){return this._preComments},t.prototype.postComments=function(){return this._postComments},t.prototype.setPreComments=function(e){e&&e.length?this._preComments=e:this._preComments&&(this._preComments=null)},t.prototype.setPostComments=function(e){e&&e.length?this._postComments=e:this._postComments&&(this._postComments=null)},t.prototype.width=function(){return this.end()-this.start()},t.prototype.structuralEquals=function(e,t){if(t)if(this.start()!==e.start()||this.end()!==e.end())return!1;return c(this.preComments(),e.preComments(),t)&&c(this.postComments(),e.postComments(),t)},t.prototype.isExpression=function(){return!1},t}();e.AST=h;var p=function(t){function n(e,n){t.call(this),this._fileName=e,this.members=n;for(var r=0,i=n.length;r<i;r++)n[r].parent=this}return i(n,t),n.prototype.childCount=function(){return this.members.length},n.prototype.childAt=function(e){return this.members[e]},n.prototype.fileName=function(){return this._fileName},n.prototype.kind=function(){return 1},n.prototype.firstOrDefault=function(t){return e.ArrayUtilities.firstOrDefault(this.members,t)},n.prototype.lastOrDefault=function(t){return e.ArrayUtilities.lastOrDefault(this.members,t)},n.prototype.any=function(t){return e.ArrayUtilities.any(this.members,t)},n.prototype.structuralEquals=function(e,n){return t.prototype.structuralEquals.call(this,e,n)&&l(this.members,e.members,n)},n}(h);e.ISyntaxList2=p;var d=function(e){function t(t,n,r){e.call(this),this._fileName=t,this.members=n,this._separatorCount=r;for(var i=0,s=n.length;i<s;i++)n[i].parent=this}return i(t,e),t.prototype.nonSeparatorCount=function(){return this.members.length},t.prototype.separatorCount=function(){return this._separatorCount},t.prototype.nonSeparatorAt=function(e){return this.members[e]},t.prototype.nonSeparatorIndexOf=function(e){for(var t=0,n=this.nonSeparatorCount();t<n;t++)if(this.nonSeparatorAt(t)===e)return t;return-1},t.prototype.fileName=function(){return this._fileName},t.prototype.kind=function(){return 2},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&l(this.members,t.members,n)},t}(h);e.ISeparatedSyntaxList2=d;var v=function(e){function t(t,n,r){e.call(this),this.moduleElements=t,this.endOfFileTokenLeadingComments=n,this._fileName=r,t&&(t.parent=this)}return i(t,e),t.prototype.fileName=function(){return this._fileName},t.prototype.kind=function(){return 120},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.moduleElements,t.moduleElements,n)},t}(h);e.SourceUnit=v;var m=function(t){function n(e){t.call(this),this._text=e,this._valueText=null}return i(n,t),n.prototype.text=function(){return this._text},n.prototype.valueText=function(){if(!this._valueText){var t=this._text;t==="__proto__"?this._valueText="#__proto__":this._valueText=e.Syntax.massageEscapes(t)}return this._valueText},n.prototype.kind=function(){return 11},n.prototype.structuralEquals=function(e,n){return t.prototype.structuralEquals.call(this,e,n)&&this._text===e._text},n.prototype.isExpression=function(){return!0},n}(h);e.Identifier=m;var g=function(e){function t(t,n,r){e.call(this),this._nodeType=t,this._text=n,this._valueText=r}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.kind=function(){return this._nodeType},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t.prototype.isExpression=function(){return!0},t}(h);e.LiteralExpression=g;var y=function(e){function t(t,n){e.call(this),this._text=t,this._valueText=n}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.kind=function(){return 35},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ThisExpression=y;var b=function(e){function t(t,n){e.call(this),this._text=t,this._valueText=n}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.kind=function(){return 50},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t.prototype.isExpression=function(){return!0},t}(h);e.SuperExpression=b;var w=function(e){function t(t,n,r){e.call(this),this._value=t,this._text=n,this._valueText=r}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.value=function(){return this._value},t.prototype.kind=function(){return 13},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&(this._value===t._value||isNaN(this._value)&&isNaN(t._value))&&this._text===t._text},t.prototype.isExpression=function(){return!0},t}(h);e.NumericLiteral=w;var E=function(e){function t(t,n){e.call(this),this._text=t,this._valueText=n}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.kind=function(){return 12},t.prototype.isExpression=function(){return!0},t}(h);e.RegularExpressionLiteral=E;var S=function(e){function t(t,n){e.call(this),this._text=t,this._valueText=n,this._valueText=n==="__proto__"?"#__proto__":n}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.kind=function(){return 14},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&this._text===t._text},t.prototype.isExpression=function(){return!0},t}(h);e.StringLiteral=S;var x=function(e){function t(t){e.call(this),this.type=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 244},t}(h);e.TypeAnnotation=x;var T=function(e){function t(t,n,r){e.call(this),this._nodeType=t,this._text=n,this._valueText=r}return i(t,e),t.prototype.text=function(){return this._text},t.prototype.valueText=function(){return this._valueText},t.prototype.kind=function(){return this._nodeType},t}(h);e.BuiltInType=T;var N=function(e){function t(t){e.call(this),this.stringLiteral=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 245},t}(h);e.ExternalModuleReference=N;var C=function(e){function t(t){e.call(this),this.moduleName=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 246},t}(h);e.ModuleNameModuleReference=C;var k=function(e){function t(t,n,r){e.call(this),this.modifiers=t,this.identifier=n,this.moduleReference=r,n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 133},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.moduleReference,t.moduleReference,n)},t}(h);e.ImportDeclaration=k;var L=function(e){function t(t){e.call(this),this.identifier=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 134},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)},t}(h);e.ExportAssignment=L;var A=function(e){function t(t){e.call(this),this.typeParameters=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 229},t}(h);e.TypeParameterList=A;var O=function(e){function t(t,n,r,i,s,o){e.call(this),this.modifiers=t,this.identifier=n,this.typeParameterList=r,this.heritageClauses=i,this.classElements=s,this.closeBraceToken=o,n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this),s&&(s.parent=this)}return i(t,e),t.prototype.kind=function(){return 131},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.classElements,t.classElements,n)&&a(this.typeParameterList,t.typeParameterList,n)&&a(this.heritageClauses,t.heritageClauses,n)},t}(h);e.ClassDeclaration=O;var M=function(e){function t(t,n,r,i,s){e.call(this),this.modifiers=t,this.identifier=n,this.typeParameterList=r,this.heritageClauses=i,this.body=s,n&&(n.parent=this),r&&(r.parent=this),s&&(s.parent=this),i&&(i.parent=this)}return i(t,e),t.prototype.kind=function(){return 128},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.body,t.body,n)&&a(this.typeParameterList,t.typeParameterList,n)&&a(this.heritageClauses,t.heritageClauses,n)},t}(h);e.InterfaceDeclaration=M;var _=function(e){function t(t,n){e.call(this),this._nodeType=t,this.typeNames=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return this._nodeType},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.typeNames,t.typeNames,n)},t}(h);e.HeritageClause=_;var D=function(e){function t(t,n,r,i,s){e.call(this),this.modifiers=t,this.name=n,this.stringLiteral=r,this.moduleElements=i,this.endingToken=s,n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this)}return i(t,e),t.prototype.kind=function(){return 130},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.name,t.name,n)&&a(this.moduleElements,t.moduleElements,n)},t}(h);e.ModuleDeclaration=D;var P=function(e){function t(t,n,r,i){e.call(this),this.modifiers=t,this.identifier=n,this.callSignature=r,this.block=i,n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this)}return i(t,e),t.prototype.kind=function(){return 129},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.block,t.block,n)&&a(this.callSignature,t.callSignature,n)},t}(h);e.FunctionDeclaration=P;var H=function(e){function t(t,n){e.call(this),this.modifiers=t,this.declaration=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 148},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.declaration,t.declaration,n)},t}(h);e.VariableStatement=H;var B=function(e){function t(t){e.call(this),this.declarators=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 224},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.declarators,t.declarators,n)},t}(h);e.VariableDeclaration=B;var j=function(e){function t(t,n,r){e.call(this),this.propertyName=t,this.typeAnnotation=n,this.equalsValueClause=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 225},t}(h);e.VariableDeclarator=j;var F=function(e){function t(t){e.call(this),this.value=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 232},t}(h);e.EqualsValueClause=F;var I=function(e){function t(t,n){e.call(this),this._nodeType=t,this.operand=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return this._nodeType},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.operand,t.operand,n)},t.prototype.isExpression=function(){return!0},t}(h);e.PrefixUnaryExpression=I;var q=function(e){function t(t){e.call(this),this.expressions=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 214},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expressions,t.expressions,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ArrayLiteralExpression=q;var R=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.kind=function(){return 223},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t.prototype.isExpression=function(){return!0},t}(h);e.OmittedExpression=R;var U=function(e){function t(t,n){e.call(this),this.openParenTrailingComments=t,this.expression=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 217},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ParenthesizedExpression=U;var z=function(e){function t(t,n,r){e.call(this),this.identifier=t,this.block=n,this.expression=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 219},t.prototype.isExpression=function(){return!0},t}(h);e.SimpleArrowFunctionExpression=z;var W=function(e){function t(t,n,r){e.call(this),this.callSignature=t,this.block=n,this.expression=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 218},t.prototype.isExpression=function(){return!0},t}(h);e.ParenthesizedArrowFunctionExpression=W;var X=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 121},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.left,t.left,n)&&a(this.right,t.right,n)},t}(h);e.QualifiedName=X;var V=function(e){function t(t,n){e.call(this),this.openParenTrailingComments=t,this.parameters=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 227},t}(h);e.ParameterList=V;var $=function(e){function t(t,n,r){e.call(this),this.typeParameterList=t,this.parameterList=n,this.type=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 125},t}(h);e.ConstructorType=$;var J=function(e){function t(t,n,r){e.call(this),this.typeParameterList=t,this.parameterList=n,this.type=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 123},t}(h);e.FunctionType=J;var K=function(e){function t(t){e.call(this),this.typeMembers=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 122},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.typeMembers,t.typeMembers,n)},t}(h);e.ObjectType=K;var Q=function(e){function t(t){e.call(this),this.type=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 124},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.type,t.type,n)},t}(h);e.ArrayType=Q;var G=function(e){function t(t){e.call(this),this.typeArguments=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 228},t}(h);e.TypeArgumentList=G;var Y=function(e){function t(t,n){e.call(this),this.name=t,this.typeArgumentList=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 126},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.name,t.name,n)&&a(this.typeArgumentList,t.typeArgumentList,n)},t}(h);e.GenericType=Y;var Z=function(e){function t(t){e.call(this),this.name=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 127},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.name,t.name,n)},t}(h);e.TypeQuery=Z;var et=function(e){function t(t,n,r){e.call(this),this.statements=t,this.closeBraceLeadingComments=n,this.closeBraceToken=r,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 146},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.statements,t.statements,n)},t}(h);e.Block=et;var tt=function(e){function t(t,n,r,i,s,o){e.call(this),this.dotDotDotToken=t,this.modifiers=n,this.identifier=r,this.questionToken=i,this.typeAnnotation=s,this.equalsValueClause=o,r&&(r.parent=this),s&&(s.parent=this),o&&(o.parent=this)}return i(t,e),t.prototype.kind=function(){return 242},t}(h);e.Parameter=tt;var nt=function(e){function t(t,n){e.call(this),this.expression=t,this.name=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 212},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)&&a(this.name,t.name,n)},t.prototype.isExpression=function(){return!0},t}(h);e.MemberAccessExpression=nt;var rt=function(e){function t(t,n){e.call(this),this._nodeType=t,this.operand=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return this._nodeType},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.operand,t.operand,n)},t.prototype.isExpression=function(){return!0},t}(h);e.PostfixUnaryExpression=rt;var it=function(e){function t(t,n){e.call(this),this.expression=t,this.argumentExpression=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 221},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)&&a(this.argumentExpression,t.argumentExpression,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ElementAccessExpression=it;var st=function(e){function t(t,n){e.call(this),this.expression=t,this.argumentList=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 213},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)&&a(this.argumentList,t.argumentList,n)},t.prototype.isExpression=function(){return!0},t}(h);e.InvocationExpression=st;var ot=function(e){function t(t,n,r){e.call(this),this.typeArgumentList=t,this.closeParenToken=r,this.arguments=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 226},t}(h);e.ArgumentList=ot;var ut=function(e){function t(t,n,r){e.call(this),this._nodeType=t,this.left=n,this.right=r,n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return this._nodeType},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.left,t.left,n)&&a(this.right,t.right,n)},t.prototype.isExpression=function(){return!0},t}(h);e.BinaryExpression=ut;var at=function(e){function t(t,n,r){e.call(this),this.condition=t,this.whenTrue=n,this.whenFalse=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 186},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.condition,t.condition,n)&&a(this.whenTrue,t.whenTrue,n)&&a(this.whenFalse,t.whenFalse,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ConditionalExpression=at;var ft=function(e){function t(t){e.call(this),this.callSignature=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 143},t}(h);e.ConstructSignature=ft;var lt=function(e){function t(t,n,r){e.call(this),this.propertyName=t,this.questionToken=n,this.callSignature=r,t&&(t.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 145},t}(h);e.MethodSignature=lt;var ct=function(e){function t(t,n){e.call(this),this.parameter=t,this.typeAnnotation=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 144},t}(h);e.IndexSignature=ct;var ht=function(e){function t(t,n,r){e.call(this),this.propertyName=t,this.questionToken=n,this.typeAnnotation=r,t&&(t.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 141},t}(h);e.PropertySignature=ht;var pt=function(e){function t(t,n,r){e.call(this),this.typeParameterList=t,this.parameterList=n,this.typeAnnotation=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 142},t}(h);e.CallSignature=pt;var dt=function(e){function t(t,n){e.call(this),this.identifier=t,this.constraint=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 238},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.constraint,t.constraint,n)},t}(h);e.TypeParameter=dt;var vt=function(e){function t(t){e.call(this),this.type=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 239},t}(h);e.Constraint=vt;var mt=function(e){function t(t){e.call(this),this.statement=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 235},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.statement,t.statement,n)},t}(h);e.ElseClause=mt;var gt=function(e){function t(t,n,r){e.call(this),this.condition=t,this.statement=n,this.elseClause=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 147},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.condition,t.condition,n)&&a(this.statement,t.statement,n)&&a(this.elseClause,t.elseClause,n)},t}(h);e.IfStatement=gt;var yt=function(e){function t(t){e.call(this),this.expression=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 149},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t}(h);e.ExpressionStatement=yt;var bt=function(e){function t(t,n){e.call(this),this.callSignature=t,this.block=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 137},t}(h);e.ConstructorDeclaration=bt;var wt=function(e){function t(t,n,r,i){e.call(this),this.modifiers=t,this.propertyName=n,this.callSignature=r,this.block=i,n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this)}return i(t,e),t.prototype.kind=function(){return 135},t}(h);e.MemberFunctionDeclaration=wt;var Et=function(e){function t(t,n,r,i,s){e.call(this),this.modifiers=t,this.propertyName=n,this.parameterList=r,this.typeAnnotation=i,this.block=s,n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this),s&&(s.parent=this)}return i(t,e),t.prototype.kind=function(){return 139},t}(h);e.GetAccessor=Et;var St=function(e){function t(t,n,r,i){e.call(this),this.modifiers=t,this.propertyName=n,this.parameterList=r,this.block=i,n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this)}return i(t,e),t.prototype.kind=function(){return 140},t}(h);e.SetAccessor=St;var xt=function(e){function t(t,n){e.call(this),this.modifiers=t,this.variableDeclarator=n,n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 136},t}(h);e.MemberVariableDeclaration=xt;var Tt=function(e){function t(t){e.call(this),this.indexSignature=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 138},t}(h);e.IndexMemberDeclaration=Tt;var Nt=function(e){function t(t){e.call(this),this.expression=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 157},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t}(h);e.ThrowStatement=Nt;var Ct=function(e){function t(t){e.call(this),this.expression=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 150},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t}(h);e.ReturnStatement=Ct;var kt=function(e){function t(t,n){e.call(this),this.expression=t,this.argumentList=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 216},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)&&a(this.argumentList,t.argumentList,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ObjectCreationExpression=kt;var Lt=function(e){function t(t,n,r){e.call(this),this.expression=t,this.closeParenToken=n,this.switchClauses=r,t&&(t.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 151},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.switchClauses,t.switchClauses,n)&&a(this.expression,t.expression,n)},t}(h);e.SwitchStatement=Lt;var At=function(e){function t(t,n){e.call(this),this.expression=t,this.statements=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 233},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)&&a(this.statements,t.statements,n)},t}(h);e.CaseSwitchClause=At;var Ot=function(e){function t(t){e.call(this),this.statements=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 234},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.statements,t.statements,n)},t}(h);e.DefaultSwitchClause=Ot;var Mt=function(e){function t(t){e.call(this),this.identifier=t}return i(t,e),t.prototype.kind=function(){return 152},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t}(h);e.BreakStatement=Mt;var _t=function(e){function t(t){e.call(this),this.identifier=t}return i(t,e),t.prototype.kind=function(){return 153},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t}(h);e.ContinueStatement=_t;var Dt=function(e){function t(t,n,r,i,s){e.call(this),this.variableDeclaration=t,this.initializer=n,this.condition=r,this.incrementor=i,this.statement=s,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this),s&&(s.parent=this)}return i(t,e),t.prototype.kind=function(){return 154},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.initializer,t.initializer,n)&&a(this.condition,t.condition,n)&&a(this.incrementor,t.incrementor,n)&&a(this.statement,t.statement,n)},t}(h);e.ForStatement=Dt;var Pt=function(e){function t(t,n,r,i){e.call(this),this.variableDeclaration=t,this.left=n,this.expression=r,this.statement=i,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this),i&&(i.parent=this)}return i(t,e),t.prototype.kind=function(){return 155},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.variableDeclaration,t.variableDeclaration,n)&&a(this.expression,t.expression,n)&&a(this.statement,t.statement,n)},t}(h);e.ForInStatement=Pt;var Ht=function(e){function t(t,n){e.call(this),this.condition=t,this.statement=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 158},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.condition,t.condition,n)&&a(this.statement,t.statement,n)},t}(h);e.WhileStatement=Ht;var Bt=function(e){function t(t,n){e.call(this),this.condition=t,this.statement=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 163},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.condition,t.condition,n)&&a(this.statement,t.statement,n)},t}(h);e.WithStatement=Bt;var jt=function(e){function t(t,n,r){e.call(this),this.modifiers=t,this.identifier=n,this.enumElements=r,n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 132},t}(h);e.EnumDeclaration=jt;var Ft=function(e){function t(t,n){e.call(this),this.propertyName=t,this.equalsValueClause=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 243},t}(h);e.EnumElement=Ft;var It=function(e){function t(t,n){e.call(this),this.type=t,this.expression=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 220},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.type,t.type,n)&&a(this.expression,t.expression,n)},t.prototype.isExpression=function(){return!0},t}(h);e.CastExpression=It;var qt=function(e){function t(t){e.call(this),this.propertyAssignments=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 215},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.propertyAssignments,t.propertyAssignments,n)},t.prototype.isExpression=function(){return!0},t}(h);e.ObjectLiteralExpression=qt;var Rt=function(e){function t(t,n){e.call(this),this.propertyName=t,this.expression=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 240},t}(h);e.SimplePropertyAssignment=Rt;var Ut=function(e){function t(t,n,r){e.call(this),this.propertyName=t,this.callSignature=n,this.block=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 241},t}(h);e.FunctionPropertyAssignment=Ut;var zt=function(e){function t(t,n,r){e.call(this),this.identifier=t,this.callSignature=n,this.block=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 222},t.prototype.isExpression=function(){return!0},t}(h);e.FunctionExpression=zt;var Wt=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.kind=function(){return 156},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)},t}(h);e.EmptyStatement=Wt;var Xt=function(e){function t(t,n,r){e.call(this),this.block=t,this.catchClause=n,this.finallyClause=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 159},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.block,t.block,n)&&a(this.catchClause,t.catchClause,n)&&a(this.finallyClause,t.finallyClause,n)},t}(h);e.TryStatement=Xt;var Vt=function(e){function t(t,n,r){e.call(this),this.identifier=t,this.typeAnnotation=n,this.block=r,t&&(t.parent=this),n&&(n.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 236},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.typeAnnotation,t.typeAnnotation,n)&&a(this.block,t.block,n)},t}(h);e.CatchClause=Vt;var $t=function(e){function t(t){e.call(this),this.block=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 237},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.block,t.block,n)},t}(h);e.FinallyClause=$t;var Jt=function(e){function t(t,n){e.call(this),this.identifier=t,this.statement=n,t&&(t.parent=this),n&&(n.parent=this)}return i(t,e),t.prototype.kind=function(){return 160},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.identifier,t.identifier,n)&&a(this.statement,t.statement,n)},t}(h);e.LabeledStatement=Jt;var Kt=function(e){function t(t,n,r){e.call(this),this.statement=t,this.whileKeyword=n,this.condition=r,t&&(t.parent=this),r&&(r.parent=this)}return i(t,e),t.prototype.kind=function(){return 161},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.statement,t.statement,n)&&a(this.condition,t.condition,n)},t}(h);e.DoStatement=Kt;var Qt=function(e){function t(t){e.call(this),this.expression=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 171},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t.prototype.isExpression=function(){return!0},t}(h);e.TypeOfExpression=Qt;var Gt=function(e){function t(t){e.call(this),this.expression=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 170},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t.prototype.isExpression=function(){return!0},t}(h);e.DeleteExpression=Gt;var Yt=function(e){function t(t){e.call(this),this.expression=t,t&&(t.parent=this)}return i(t,e),t.prototype.kind=function(){return 172},t.prototype.structuralEquals=function(t,n){return e.prototype.structuralEquals.call(this,t,n)&&a(this.expression,t.expression,n)},t.prototype.isExpression=function(){return!0},t}(h);e.VoidExpression=Yt;var Zt=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.kind=function(){return 162},t}(h);e.DebuggerStatement=Zt;var en=function(){function e(e,t,n,r){this._trivia=e,this.endsLine=t,this._start=n,this._end=r}return e.prototype.start=function(){return this._start},e.prototype.end=function(){return this._end},e.prototype.fullText=function(){return this._trivia.fullText()},e.prototype.kind=function(){return this._trivia.kind()},e.prototype.structuralEquals=function(e,t){if(t)if(this.start()!==e.start()||this.end()!==e.end())return!1;return this._trivia.fullText()===e._trivia.fullText()&&this.endsLine===e.endsLine},e}();e.Comment=en})(r||(r={})),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){"use strict";if(this==null)throw new TypeError;var n=Object(this),r=n.length>>>0;if(r===0)return-1;var i=0;arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:i!=0&&i!=Infinity&&i!=-Infinity&&(i=(i>0||-1)*Math.floor(Math.abs(i))));if(i>=r)return-1;var s=i>=0?i:Math.max(r-Math.abs(i),0);for(;s<r;s++)if(s in n&&n[s]===e)return s;return-1}),Array.prototype.filter||(Array.prototype.filter=function(e,t){"use strict";if(this==null)throw new TypeError;var n=Object(this),r=n.length>>>0;if(typeof e!="function")throw new TypeError;var i=[];for(var s=0;s<r;s++)if(s in n){var o=n[s];e.call(t,o,s,n)&&i.push(o)}return i}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=undefined,r,i;if(this==null)throw new TypeError(" this is null or not defined");var s=Object(this),o=s.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t&&(n=t),r=new Array(o),i=0;while(i<o){var u,a;i in s&&(u=s[i],a=e.call(n,u,i,s),r[i]=a),i++}return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){if(this===null||this===undefined)throw new TypeError("Object is null or undefined");var n=0,r=this.length>>0,i;if(typeof t!="function")throw new TypeError("First argument is not callable");if(arguments.length<2){if(r===0)throw new TypeError("Array length is 0 and no second argument");i=this[0],n=1}else i=arguments[1];while(n<r)n in this&&(i=t.call(undefined,i,this[n],n,this)),++n;return i}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(this==null)throw new TypeError(" this is null or not defined");var i=Object(this),s=i.length>>>0;if({}.toString.call(e)!="[object Function]")throw new TypeError(e+" is not a function");t?n=t:n=undefined,r=0;while(r<s){var o;r in i&&(o=i[r],e.call(n,o,r,i)),r++}}),Date.now||(Date.now=function(){return(new Date).getTime()}),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(this==null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=arguments[1];for(var i=0;i<n;i++){var s=i.toString();if(s in t&&e.call(r,t[i],i,t))return!0}return!1});var r;(function(e){(function(t){(function(e){e[e.Start=0]="Start",e[e.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",e[e.InSingleQuoteStringLiteral=2]="InSingleQuoteStringLiteral",e[e.InDoubleQuoteStringLiteral=3]="InDoubleQuoteStringLiteral"})(t.EndOfLineState||(t.EndOfLineState={}));var n=t.EndOfLineState;(function(e){e[e.Punctuation=0]="Punctuation",e[e.Keyword=1]="Keyword",e[e.Operator=2]="Operator",e[e.Comment=3]="Comment",e[e.Whitespace=4]="Whitespace",e[e.Identifier=5]="Identifier",e[e.NumberLiteral=6]="NumberLiteral",e[e.StringLiteral=7]="StringLiteral",e[e.RegExpLiteral=8]="RegExpLiteral"})(t.TokenClass||(t.TokenClass={}));var r=t.TokenClass,i=[];i[11]=!0,i[14]=!0,i[13]=!0,i[12]=!0,i[35]=!0,i[93]=!0,i[94]=!0,i[73]=!0,i[75]=!0,i[71]=!0,i[37]=!0,i[24]=!0;var s=function(){function t(t){this.host=t,this.characterWindow=e.ArrayUtilities.createArray(2048,0),this.diagnostics=[]}return t.prototype.getClassificationsForLine=function(t,n){var r=0;n!==0&&(n===3?t='"\\\n'+t:n===2?t="'\\\n"+t:n===1&&(t="/*\n"+t),r=3);var s=new o;this.scanner=new e.Scanner("",e.SimpleText.fromString(t),1,this.characterWindow);var u=0;while(this.scanner.absoluteIndex()<t.length){this.diagnostics.length=0;var a=this.scanner.scan(this.diagnostics,!i[u]);u=a.tokenKind,this.processToken(t,r,a,s)}return s},t.prototype.processToken=function(t,n,r,i){this.processTriviaList(t,n,r.leadingTrivia(),i),this.addResult(t,n,i,r.width(),r.tokenKind),this.processTriviaList(t,n,r.trailingTrivia(),i);if(this.scanner.absoluteIndex()>=t.length){if(this.diagnostics.length>0&&this.diagnostics[this.diagnostics.length-1].diagnosticKey()===e.DiagnosticCode.AsteriskSlash_expected){i.finalLexState=1;return}if(r.tokenKind===14){var s=r.text();if(s.length>0&&s.charCodeAt(s.length-1)===92){var o=s.charCodeAt(0);i.finalLexState=o===34?3:2;return}}}},t.prototype.processTriviaList=function(e,t,n,r){for(var i=0,s=n.count();i<s;i++){var o=n.syntaxTriviaAt(i);this.addResult(e,t,r,o.fullWidth(),o.kind())}},t.prototype.addResult=function(e,t,n,r,i){r>0&&(n.entries.length===0&&(r-=t),n.entries.push(new u(r,this.classFromKind(i))))},t.prototype.classFromKind=function(t){if(e.SyntaxFacts.isAnyKeyword(t))return 1;if(e.SyntaxFacts.isBinaryExpressionOperatorToken(t)||e.SyntaxFacts.isPrefixUnaryExpressionOperatorToken(t))return 2;if(e.SyntaxFacts.isAnyPunctuation(t))return 0;switch(t){case 4:return 4;case 6:case 7:return 3;case 13:return 6;case 14:return 7;case 12:return 8;case 11:default:return 5}},t}();t.Classifier=s;var o=function(){function e(){this.finalLexState=0,this.entries=[]}return e}();t.ClassificationResult=o;var u=function(){function e(e,t){this.length=e,this.classification=t}return e}();t.ClassificationInfo=u})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){function t(e,t){e.log("*INTERNAL ERROR* - Exception in typescript services: "+t.message)}e.logInternalError=t;var n=function(){function e(e,t,n,r){this.fileName="",this.minChar=-1,this.limChar=-1,this.isWriteAccess=!1,this.fileName=e,this.minChar=t,this.limChar=n,this.isWriteAccess=r}return e}();e.ReferenceEntry=n;var r=function(){function e(){this.name="",this.kind="",this.kindModifiers="",this.matchKind="",this.fileName="",this.minChar=-1,this.limChar=-1,this.additionalSpans=null,this.containerName="",this.containerKind=""}return e}();e.NavigateToItem=r;var s=function(){function e(e,t,n){this.minChar=e,this.limChar=t,this.text=n}return e.createInsert=function(t,n){return new e(t,t,n)},e.createDelete=function(t,n){return new e(t,n,"")},e.createReplace=function(t,n,r){return new e(t,n,r)},e}();e.TextEdit=s;var o=function(){function e(){this.IndentSize=4,this.TabSize=4,this.NewLineCharacter="\r\n",this.ConvertTabsToSpaces=!0}return e.clone=function(t){var n=new e;return n.IndentSize=t.IndentSize,n.TabSize=t.TabSize,n.NewLineCharacter=t.NewLineCharacter,n.ConvertTabsToSpaces=t.ConvertTabsToSpaces,n},e}();e.EditorOptions=o;var u=function(e){function t(){e.apply(this,arguments),this.InsertSpaceAfterCommaDelimiter=!0,this.InsertSpaceAfterSemicolonInForStatements=!0,this.InsertSpaceBeforeAndAfterBinaryOperators=!0,this.InsertSpaceAfterKeywordsInControlFlowStatements=!0,this.InsertSpaceAfterFunctionKeywordForAnonymousFunctions=!1,this.InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis=!1,this.PlaceOpenBraceOnNewLineForFunctions=!1,this.PlaceOpenBraceOnNewLineForControlBlocks=!1}return i(t,e),t.clone=function(e){var t=o.clone(e);return t.InsertSpaceAfterCommaDelimiter=e.InsertSpaceAfterCommaDelimiter,t.InsertSpaceAfterSemicolonInForStatements=e.InsertSpaceAfterSemicolonInForStatements,t.InsertSpaceBeforeAndAfterBinaryOperators=e.InsertSpaceBeforeAndAfterBinaryOperators,t.InsertSpaceAfterKeywordsInControlFlowStatements=e.InsertSpaceAfterKeywordsInControlFlowStatements,t.InsertSpaceAfterFunctionKeywordForAnonymousFunctions=e.InsertSpaceAfterFunctionKeywordForAnonymousFunctions,t.InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis=e.InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis,t.PlaceOpenBraceOnNewLineForFunctions=e.PlaceOpenBraceOnNewLineForFunctions,t.PlaceOpenBraceOnNewLineForControlBlocks=e.PlaceOpenBraceOnNewLineForControlBlocks,t},t}(o);e.FormatCodeOptions=u;var a=function(){function e(e,t,n,r,i,s,o){this.fileName=e,this.minChar=t,this.limChar=n,this.kind=r,this.name=i,this.containerKind=s,this.containerName=o}return e}();e.DefinitionInfo=a;var f=function(){function e(e,t,n,r,i,s){this.memberName=e,this.docComment=t,this.fullSymbolName=n,this.kind=r,this.minChar=i,this.limChar=s}return e}();e.TypeInfo=f;var l=function(){function e(e,t,n){typeof n=="undefined"&&(n=null),this.minChar=e,this.limChar=t,this.text=n}return e}();e.SpanInfo=l;var c=function(){function e(){this.formal=[]}return e}();e.SignatureInfo=c;var h=function(){function e(){this.typeParameters=[],this.parameters=[]}return e}();e.FormalSignatureItemInfo=h;var p=function(){function e(){}return e}();e.FormalTypeParameterInfo=p;var d=function(){function e(){}return e}();e.FormalParameterInfo=d;var v=function(){function e(){}return e}();e.ActualSignatureInfo=v;var m=function(){function e(){this.maybeInaccurate=!1,this.isMemberCompletion=!1,this.entries=[]}return e}();e.CompletionInfo=m;var g=function(){function e(){}return e.unknown="",e.keyword="keyword",e.scriptElement="script",e.moduleElement="module",e.classElement="class",e.interfaceElement="interface",e.enumElement="enum",e.variableElement="var",e.localVariableElement="local var",e.functionElement="function",e.localFunctionElement="local function",e.memberFunctionElement="method",e.memberGetAccessorElement="getter",e.memberSetAccessorElement="setter",e.memberVariableElement="property",e.constructorImplementationElement="constructor",e.callSignatureElement="call",e.indexSignatureElement="index",e.constructSignatureElement="construct",e.parameterElement="parameter",e.typeParameterElement="type parameter",e.primitiveType="primitive type",e}();e.ScriptElementKind=g;var y=function(){function e(){}return e.none="",e.publicMemberModifier="public",e.privateMemberModifier="private",e.exportedModifier="export",e.ambientModifier="declare",e.staticModifier="static",e}();e.ScriptElementKindModifier=y;var b=function(){function e(){}return e.none=null,e.exact="exact",e.subString="substring",e.prefix="prefix",e}();e.MatchKind=b;var w=function(){function e(){}return e.none="",e.error="error",e.warning="warning",e.message="message",e}();e.DiagnosticCategory=w})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function n(e){this.snapshot=e,this.lines=[]}return n.prototype.getText=function(e){return this.snapshot.substr(e.start(),e.length(),!1)},n.prototype.getLineNumberFromPosition=function(e){return this.snapshot.lineMap().getLineNumberFromPosition(e)},n.prototype.getLineFromPosition=function(e){var t=this.getLineNumberFromPosition(e);return this.getLineFromLineNumber(t)},n.prototype.getLineFromLineNumber=function(e){var t=this.lines[e];return t===undefined&&(t=this.getLineFromLineNumberWorker(e),this.lines[e]=t),t},n.prototype.getLineFromLineNumberWorker=function(n){var r=this.snapshot.lineMap().lineStarts(),i=n;if(i<0||i>=r.length)throw new Error(e.getDiagnosticMessage(e.DiagnosticCode.Invalid_line_number_0,[i]));var s=r[i],o,u,a="";if(i==r.length)o=u=this.snapshot.length();else{u=i>=r.length-1?this.snapshot.length():r[i+1];for(var f=u-1;f>=s;f--){var l=this.snapshot.substr(f,1,!1);if(l!="\r"&&l!="\n")break}o=f+1,a=this.snapshot.substr(o,u-o,!1)}var c=new t.TextSnapshotLine(this,n,s,o,a);return c},n}();t.TextSnapshot=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function n(e,t,n,r,i){this._snapshot=e,this._lineNumber=t,this._start=n,this._end=r,this._lineBreak=i}return n.prototype.snapshot=function(){return this._snapshot},n.prototype.start=function(){return new t.SnapshotPoint(this._snapshot,this._start)},n.prototype.startPosition=function(){return this._start},n.prototype.end=function(){return new t.SnapshotPoint(this._snapshot,this._end)},n.prototype.endPosition=function(){return this._end},n.prototype.endIncludingLineBreak=function(){return new t.SnapshotPoint(this._snapshot,this._end+this._lineBreak.length)},n.prototype.endIncludingLineBreakPosition=function(){return this._end+this._lineBreak.length},n.prototype.length=function(){return this._end-this._start},n.prototype.lineNumber=function(){return this._lineNumber},n.prototype.getText=function(){return this._snapshot.getText(e.TextSpan.fromBounds(this._start,this._end))},n}();t.TextSnapshotLine=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function e(e,t){this.snapshot=e,this.position=t}return e.prototype.getContainingLine=function(){return this.snapshot.getLineFromPosition(this.position)},e.prototype.add=function(t){return new e(this.snapshot,this.position+t)},e}();e.SnapshotPoint=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function t(t,n){this.snapshot=t,this.formattingRequestKind=n,this.currentTokenSpan=null,this.nextTokenSpan=null,this.contextNode=null,this.currentTokenParent=null,this.nextTokenParent=null,this.contextNodeAllOnSameLine=null,this.nextNodeAllOnSameLine=null,this.tokensAreOnSameLine=null,this.contextNodeBlockIsOnOneLine=null,this.nextNodeBlockIsOnOneLine=null,e.Debug.assert(this.snapshot!=null,"snapshot is null")}return t.prototype.updateContext=function(t,n,r,i,s){e.Debug.assert(t!=null,"currentTokenSpan is null"),e.Debug.assert(n!=null,"currentTokenParent is null"),e.Debug.assert(r!=null,"nextTokenSpan is null"),e.Debug.assert(i!=null,"nextTokenParent is null"),e.Debug.assert(s!=null,"commonParent is null"),this.currentTokenSpan=t,this.currentTokenParent=n,this.nextTokenSpan=r,this.nextTokenParent=i,this.contextNode=s,this.contextNodeAllOnSameLine=null,this.nextNodeAllOnSameLine=null,this.tokensAreOnSameLine=null,this.contextNodeBlockIsOnOneLine=null,this.nextNodeBlockIsOnOneLine=null},t.prototype.ContextNodeAllOnSameLine=function(){return this.contextNodeAllOnSameLine===null&&(this.contextNodeAllOnSameLine=this.NodeIsOnOneLine(this.contextNode)),this.contextNodeAllOnSameLine},t.prototype.NextNodeAllOnSameLine=function(){return this.nextNodeAllOnSameLine===null&&(this.nextNodeAllOnSameLine=this.NodeIsOnOneLine(this.nextTokenParent)),this.nextNodeAllOnSameLine},t.prototype.TokensAreOnSameLine=function(){if(this.tokensAreOnSameLine===null){var e=this.snapshot.getLineNumberFromPosition(this.currentTokenSpan.start()),t=this.snapshot.getLineNumberFromPosition(this.nextTokenSpan.start());this.tokensAreOnSameLine=e==t}return this.tokensAreOnSameLine},t.prototype.ContextNodeBlockIsOnOneLine=function(){return this.contextNodeBlockIsOnOneLine===null&&(this.contextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.contextNode)),this.contextNodeBlockIsOnOneLine},t.prototype.NextNodeBlockIsOnOneLine=function(){return this.nextNodeBlockIsOnOneLine===null&&(this.nextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.nextTokenParent)),this.nextNodeBlockIsOnOneLine},t.prototype.NodeIsOnOneLine=function(e){var t=this.snapshot.getLineNumberFromPosition(e.start()),n=this.snapshot.getLineNumberFromPosition(e.end());return t==n},t.prototype.BlockIsOnOneLine=function(t){var n=t.fullStart(),r=t.node(),i=n+e.Syntax.childOffset(r,r.openBraceToken),s=n+e.Syntax.childOffset(r,r.closeBraceToken),o=this.snapshot.getLineNumberFromPosition(i),u=this.snapshot.getLineNumberFromPosition(s);return o==u},t}();t.FormattingContext=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function n(e,t,n,r){this.syntaxTree=e,this.snapshot=t,this.rulesProvider=n,this.options=new o(!r.ConvertTabsToSpaces,r.TabSize,r.IndentSize,r.NewLineCharacter)}return n.prototype.formatSelection=function(t,n){var r=e.TextSpan.fromBounds(t,n);return this.formatSpan(r,1)},n.prototype.formatDocument=function(t,n){var r=e.TextSpan.fromBounds(t,n);return this.formatSpan(r,0)},n.prototype.formatOnPaste=function(t,n){var r=e.TextSpan.fromBounds(t,n);return this.formatSpan(r,5)},n.prototype.formatOnSemicolon=function(t){var n=this.syntaxTree.sourceUnit(),r=n.findToken(t-1);if(r.kind()===78){var i=r;while(i.parent()!==null&&i.parent().end()===r.end()&&i.parent().kind()!==1)i=i.parent();var s=new e.TextSpan(i.fullStart(),i.fullWidth());return this.formatSpan(s,3)}return[]},n.prototype.formatOnClosingCurlyBrace=function(t){var n=this.syntaxTree.sourceUnit(),r=n.findToken(t-1);if(r.kind()===71){var i=r;while(i.parent()!==null&&i.parent().end()===r.end()&&i.parent().kind()!==1)i=i.parent();var s=new e.TextSpan(i.fullStart(),i.fullWidth());return this.formatSpan(s,4)}return[]},n.prototype.formatOnEnter=function(t){var n=this.snapshot.getLineNumberFromPosition(t);if(n>0){var r=this.snapshot.getLineFromLineNumber(n-1),i=this.snapshot.getLineFromLineNumber(n),s=e.TextSpan.fromBounds(r.startPosition(),i.endPosition());return this.formatSpan(s,2)}return[]},n.prototype.formatSpan=function(n,r){var i=this.snapshot.getLineFromPosition(n.start());n=e.TextSpan.fromBounds(i.startPosition(),n.end());var s=[],o=t.Formatter.getEdits(n,this.syntaxTree.sourceUnit(),this.options,!0,this.snapshot,this.rulesProvider,r);return o.forEach(function(t){var n=new e.Services.TextEdit(t.position,t.position+t.length,t.replaceWith);s.push(n)}),s},n}();t.FormattingManager=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){(function(e){e[e.FormatDocument=0]="FormatDocument",e[e.FormatSelection=1]="FormatSelection",e[e.FormatOnEnter=2]="FormatOnEnter",e[e.FormatOnSemicolon=3]="FormatOnSemicolon",e[e.FormatOnClosingCurlyBrace=4]="FormatOnClosingCurlyBrace",e[e.FormatOnPaste=5]="FormatOnPaste"})(e.FormattingRequestKind||(e.FormattingRequestKind={}));var t=e.FormattingRequestKind})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function e(e,t,n){typeof n=="undefined"&&(n=0),this.Descriptor=e,this.Operation=t,this.Flag=n}return e.prototype.toString=function(){return"[desc="+this.Descriptor+","+"operation="+this.Operation+","+"flag="+this.Flag+"]"},e}();e.Rule=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){(function(e){e[e.Ignore=0]="Ignore",e[e.Space=1]="Space",e[e.NewLine=2]="NewLine",e[e.Delete=3]="Delete"})(e.RuleAction||(e.RuleAction={}));var t=e.RuleAction})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function t(e,t){this.LeftTokenRange=e,this.RightTokenRange=t}return t.prototype.toString=function(){return"[leftRange="+this.LeftTokenRange+","+"rightRange="+this.RightTokenRange+"]"},t.create1=function(n,r){return t.create4(e.Shared.TokenRange.FromToken(n),e.Shared.TokenRange.FromToken(r))},t.create2=function(n,r){return t.create4(n,e.Shared.TokenRange.FromToken(r))},t.create3=function(n,r){return t.create4(e.Shared.TokenRange.FromToken(n),r)},t.create4=function(e,n){return new t(e,n)},t}();e.RuleDescriptor=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){(function(e){e[e.None=0]="None",e[e.CanDeleteNewLines=1]="CanDeleteNewLines"})(e.RuleFlags||(e.RuleFlags={}));var t=e.RuleFlags})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function t(){this.Context=null,this.Action=null}return t.prototype.toString=function(){return"[context="+this.Context+","+"action="+this.Action+"]"},t.create1=function(n){return t.create2(e.RuleOperationContext.Any,n)},t.create2=function(e,n){var r=new t;return r.Context=e,r.Action=n,r},t}();e.RuleOperation=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function e(){var e=[];for(var t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];this.customContextChecks=e}return e.prototype.IsAny=function(){return this==e.Any},e.prototype.InContext=function(e){if(this.IsAny())return!0;for(var t=0,n=this.customContextChecks.length;t<n;t++)if(!this.customContextChecks[t](e))return!1;return!0},e.Any=new e,e}();e.RuleOperationContext=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function n(){this.IgnoreBeforeComment=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.Comments),t.RuleOperation.create1(0)),this.IgnoreAfterLineComment=new t.Rule(t.RuleDescriptor.create3(7,t.Shared.TokenRange.Any),t.RuleOperation.create1(0)),this.NoSpaceBeforeSemicolon=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,78),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeColon=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,106),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotBinaryOpContext),3)),this.NoSpaceBeforeQMark=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,105),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotBinaryOpContext),3)),this.SpaceAfterColon=new t.Rule(t.RuleDescriptor.create3(106,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotBinaryOpContext),1)),this.SpaceAfterQMark=new t.Rule(t.RuleDescriptor.create3(105,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotBinaryOpContext),1)),this.SpaceAfterSemicolon=new t.Rule(t.RuleDescriptor.create3(78,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.SpaceAfterCloseBrace=new t.Rule(t.RuleDescriptor.create3(71,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsAfterCodeBlockContext),1)),this.SpaceBetweenCloseBraceAndElse=new t.Rule(t.RuleDescriptor.create1(71,23),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.SpaceBetweenCloseBraceAndWhile=new t.Rule(t.RuleDescriptor.create1(71,42),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.NoSpaceAfterCloseBrace=new t.Rule(t.RuleDescriptor.create3(71,t.Shared.TokenRange.FromTokens([73,75,79,78])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeDot=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,76),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterDot=new t.Rule(t.RuleDescriptor.create3(76,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeOpenBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,74),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterOpenBracket=new t.Rule(t.RuleDescriptor.create3(74,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeCloseBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,75),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterCloseBracket=new t.Rule(t.RuleDescriptor.create3(75,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.FunctionOpenBraceLeftTokenRange=t.Shared.TokenRange.AnyIncludingMultilineComments,this.SpaceBeforeOpenBraceInFunction=new t.Rule(t.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeMultilineBlockContext),1),1),this.TypeScriptOpenBraceLeftTokenRange=t.Shared.TokenRange.FromTokens([11,6]),this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock=new t.Rule(t.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsTypeScriptDeclWithBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeMultilineBlockContext),1),1),this.ControlOpenBraceLeftTokenRange=t.Shared.TokenRange.FromTokens([73,6,22,38,25,23]),this.SpaceBeforeOpenBraceInControl=new t.Rule(t.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsControlDeclContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeMultilineBlockContext),1),1),this.SpaceAfterOpenBrace=new t.Rule(t.RuleDescriptor.create3(70,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSingleLineBlockContext),1)),this.SpaceBeforeCloseBrace=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSingleLineBlockContext),1)),this.NoSpaceBetweenEmptyBraceBrackets=new t.Rule(t.RuleDescriptor.create1(70,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsObjectContext),3)),this.NewLineAfterOpenBraceInBlockContext=new t.Rule(t.RuleDescriptor.create3(70,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsMultilineBlockContext),2)),this.NewLineBeforeCloseBraceInBlockContext=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.AnyIncludingMultilineComments,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsMultilineBlockContext),2)),this.NoSpaceAfterUnaryPrefixOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.UnaryPrefixOperators,t.Shared.TokenRange.UnaryPrefixExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotBinaryOpContext),3)),this.NoSpaceAfterUnaryPreincrementOperator=new t.Rule(t.RuleDescriptor.create3(93,t.Shared.TokenRange.UnaryPreincrementExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterUnaryPredecrementOperator=new t.Rule(t.RuleDescriptor.create3(94,t.Shared.TokenRange.UnaryPredecrementExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeUnaryPostincrementOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.UnaryPostincrementExpressions,93),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeUnaryPostdecrementOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.UnaryPostdecrementExpressions,94),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.SpaceAfterPostincrementWhenFollowedByAdd=new t.Rule(t.RuleDescriptor.create1(93,89),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterAddWhenFollowedByUnaryPlus=new t.Rule(t.RuleDescriptor.create1(89,89),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterAddWhenFollowedByPreincrement=new t.Rule(t.RuleDescriptor.create1(89,93),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterPostdecrementWhenFollowedBySubtract=new t.Rule(t.RuleDescriptor.create1(94,90),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterSubtractWhenFollowedByUnaryMinus=new t.Rule(t.RuleDescriptor.create1(90,90),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterSubtractWhenFollowedByPredecrement=new t.Rule(t.RuleDescriptor.create1(90,94),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.NoSpaceBeforeComma=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,79),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.SpaceAfterCertainKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([40,36,31,21,33,39]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.NoSpaceBeforeOpenParenInFuncCall=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsFunctionCallOrNewContext),3)),this.SpaceAfterFunctionInFuncDecl=new t.Rule(t.RuleDescriptor.create3(27,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),1)),this.NoSpaceBeforeOpenParenInFuncDecl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsFunctionDeclContext),3)),this.SpaceAfterVoidOperator=new t.Rule(t.RuleDescriptor.create3(41,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsVoidOpContext),1)),this.NoSpaceBetweenReturnAndSemicolon=new t.Rule(t.RuleDescriptor.create1(33,78),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.SpaceBetweenStatements=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([73,22,23,16]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotForContext),1)),this.SpaceAfterTryFinally=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([38,25]),70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.SpaceAfterGetSetInMember=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([64,68]),11),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),1)),this.SpaceBeforeBinaryKeywordOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryKeywordOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterBinaryKeywordOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryKeywordOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.NoSpaceAfterConstructor=new t.Rule(t.RuleDescriptor.create1(62,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterModuleImport=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([65,66]),72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.SpaceAfterCertainTypeScriptKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([44,63,46,47,48,64,51,49,52,65,55,57,68,58]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.SpaceBeforeCertainTypeScriptKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([48,51])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.SpaceAfterModuleName=new t.Rule(t.RuleDescriptor.create1(14,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsModuleDeclContext),1)),this.SpaceAfterArrow=new t.Rule(t.RuleDescriptor.create3(85,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.NoSpaceAfterEllipsis=new t.Rule(t.RuleDescriptor.create1(77,11),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterOptionalParameters=new t.Rule(t.RuleDescriptor.create3(105,t.Shared.TokenRange.FromTokens([73,79])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsNotBinaryOpContext),3)),this.NoSpaceBeforeOpenAngularBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.TypeNames,80),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsTypeArgumentOrParameterContext),3)),this.NoSpaceBetweenCloseParenAndAngularBracket=new t.Rule(t.RuleDescriptor.create1(73,80),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsTypeArgumentOrParameterContext),3)),this.NoSpaceAfterOpenAngularBracket=new t.Rule(t.RuleDescriptor.create3(80,t.Shared.TokenRange.TypeNames),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsTypeArgumentOrParameterContext),3)),this.NoSpaceBeforeCloseAngularBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,81),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsTypeArgumentOrParameterContext),3)),this.NoSpaceAfterCloseAngularBracket=new t.Rule(t.RuleDescriptor.create3(81,t.Shared.TokenRange.FromTokens([72,74,81,79])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsTypeArgumentOrParameterContext),3)),this.NoSpaceBetweenEmptyInterfaceBraceBrackets=new t.Rule(t.RuleDescriptor.create1(70,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsObjectTypeContext),3)),this.HighPriorityCommonRules=[this.IgnoreBeforeComment,this.IgnoreAfterLineComment,this.NoSpaceBeforeColon,this.SpaceAfterColon,this.NoSpaceBeforeQMark,this.SpaceAfterQMark,this.NoSpaceBeforeDot,this.NoSpaceAfterDot,this.NoSpaceAfterUnaryPrefixOperator,this.NoSpaceAfterUnaryPreincrementOperator,this.NoSpaceAfterUnaryPredecrementOperator,this.NoSpaceBeforeUnaryPostincrementOperator,this.NoSpaceBeforeUnaryPostdecrementOperator,this.SpaceAfterPostincrementWhenFollowedByAdd,this.SpaceAfterAddWhenFollowedByUnaryPlus,this.SpaceAfterAddWhenFollowedByPreincrement,this.SpaceAfterPostdecrementWhenFollowedBySubtract,this.SpaceAfterSubtractWhenFollowedByUnaryMinus,this.SpaceAfterSubtractWhenFollowedByPredecrement,this.NoSpaceAfterCloseBrace,this.SpaceAfterOpenBrace,this.SpaceBeforeCloseBrace,this.NewLineBeforeCloseBraceInBlockContext,this.SpaceAfterCloseBrace,this.SpaceBetweenCloseBraceAndElse,this.SpaceBetweenCloseBraceAndWhile,this.NoSpaceBetweenEmptyBraceBrackets,this.SpaceAfterFunctionInFuncDecl,this.NewLineAfterOpenBraceInBlockContext,this.SpaceAfterGetSetInMember,this.NoSpaceBetweenReturnAndSemicolon,this.SpaceAfterCertainKeywords,this.NoSpaceBeforeOpenParenInFuncCall,this.SpaceBeforeBinaryKeywordOperator,this.SpaceAfterBinaryKeywordOperator,this.SpaceAfterVoidOperator,this.NoSpaceAfterConstructor,this.NoSpaceAfterModuleImport,this.SpaceAfterCertainTypeScriptKeywords,this.SpaceBeforeCertainTypeScriptKeywords,this.SpaceAfterModuleName,this.SpaceAfterArrow,this.NoSpaceAfterEllipsis,this.NoSpaceAfterOptionalParameters,this.NoSpaceBetweenEmptyInterfaceBraceBrackets,this.NoSpaceBeforeOpenAngularBracket,this.NoSpaceBetweenCloseParenAndAngularBracket,this.NoSpaceAfterOpenAngularBracket,this.NoSpaceBeforeCloseAngularBracket,this.NoSpaceAfterCloseAngularBracket],this.LowPriorityCommonRules=[this.NoSpaceBeforeSemicolon,this.SpaceBeforeOpenBraceInControl,this.SpaceBeforeOpenBraceInFunction,this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock,this.NoSpaceBeforeComma,this.NoSpaceBeforeOpenBracket,this.NoSpaceAfterOpenBracket,this.NoSpaceBeforeCloseBracket,this.NoSpaceAfterCloseBracket,this.SpaceAfterSemicolon,this.NoSpaceBeforeOpenParenInFuncDecl,this.SpaceBetweenStatements,this.SpaceAfterTryFinally],this.SpaceAfterComma=new t.Rule(t.RuleDescriptor.create3(79,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.NoSpaceAfterComma=new t.Rule(t.RuleDescriptor.create3(79,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.SpaceBeforeBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.SpaceAfterBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),1)),this.NoSpaceBeforeBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),3)),this.NoSpaceAfterBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsBinaryOpContext),3)),this.SpaceAfterKeywordInControl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Keywords,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsControlDeclContext),1)),this.NoSpaceAfterKeywordInControl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Keywords,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsControlDeclContext),3)),this.NewLineBeforeOpenBraceInFunction=new t.Rule(t.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext,n.IsBeforeMultilineBlockContext),2),1),this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock=new t.Rule(t.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsTypeScriptDeclWithBlockContext,n.IsBeforeMultilineBlockContext),2),1),this.NewLineBeforeOpenBraceInControl=new t.Rule(t.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,70),t.RuleOperation.create2(new t.RuleOperationContext(n.IsControlDeclContext,n.IsBeforeMultilineBlockContext),2),1),this.SpaceAfterSemicolonInFor=new t.Rule(t.RuleDescriptor.create3(78,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsForContext),1)),this.NoSpaceAfterSemicolonInFor=new t.Rule(t.RuleDescriptor.create3(78,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext,n.IsForContext),3)),this.SpaceAfterOpenParen=new t.Rule(t.RuleDescriptor.create3(72,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.SpaceBeforeCloseParen=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,73),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),1)),this.NoSpaceBetweenParens=new t.Rule(t.RuleDescriptor.create1(72,73),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceAfterOpenParen=new t.Rule(t.RuleDescriptor.create3(72,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.NoSpaceBeforeCloseParen=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,73),t.RuleOperation.create2(new t.RuleOperationContext(n.IsSameLineTokenContext),3)),this.SpaceAfterAnonymousFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(27,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),1)),this.NoSpaceAfterAnonymousFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(27,72),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),3))}return n.prototype.getRuleName=function(t){var n=this;for(var r in n)if(n[r]===t)return r;throw new Error(e.getDiagnosticMessage(e.DiagnosticCode.Unknown_rule,null))},n.IsForContext=function(e){return e.contextNode.kind()===154},n.IsNotForContext=function(e){return!n.IsForContext(e)},n.IsBinaryOpContext=function(e){switch(e.contextNode.kind()){case 174:case 175:case 176:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 184:case 185:case 186:case 187:case 188:case 189:case 190:case 191:case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:case 208:case 209:return!0;case 133:case 225:case 232:return e.currentTokenSpan.kind()===107||e.nextTokenSpan.kind()===107;case 155:return e.currentTokenSpan.kind()===29||e.nextTokenSpan.kind()===29}return!1},n.IsNotBinaryOpContext=function(e){return!n.IsBinaryOpContext(e)},n.IsSameLineTokenOrBeforeMultilineBlockContext=function(e){return e.TokensAreOnSameLine()||n.IsBeforeMultilineBlockContext(e)},n.IsBeforeMultilineBlockContext=function(e){return n.IsBeforeBlockContext(e)&&!e.NextNodeAllOnSameLine()&&!e.NextNodeBlockIsOnOneLine()},n.IsMultilineBlockContext=function(e){return n.IsBlockContext(e)&&!e.ContextNodeAllOnSameLine()&&!e.ContextNodeBlockIsOnOneLine()},n.IsSingleLineBlockContext=function(e){return n.IsBlockContext(e)&&(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsBlockContext=function(e){return n.NodeIsBlockContext(e.contextNode)},n.IsBeforeBlockContext=function(e){return n.NodeIsBlockContext(e.nextTokenParent)},n.NodeIsBlockContext=function(e){if(n.NodeIsTypeScriptDeclWithBlockContext(e))return!0;switch(e.kind()){case 146:case 151:case 215:return!0}return!1},n.IsFunctionDeclContext=function(e){switch(e.contextNode.kind()){case 129:case 135:case 139:case 140:case 145:case 142:case 222:case 137:case 219:case 218:case 128:return!0}return!1},n.IsTypeScriptDeclWithBlockContext=function(e){return n.NodeIsTypeScriptDeclWithBlockContext(e.contextNode)},n.NodeIsTypeScriptDeclWithBlockContext=function(e){switch(e.kind()){case 131:case 132:case 122:case 130:return!0}return!1},n.IsAfterCodeBlockContext=function(e){switch(e.currentTokenParent.kind()){case 131:case 130:case 132:case 146:case 151:return!0}return!1},n.IsControlDeclContext=function(e){switch(e.contextNode.kind()){case 147:case 151:case 154:case 155:case 158:case 159:case 161:case 163:case 235:case 236:case 237:return!0;default:return!1}},n.IsObjectContext=function(e){return e.contextNode.kind()===215},n.IsFunctionCallContext=function(e){return e.contextNode.kind()===213},n.IsNewContext=function(e){return e.contextNode.kind()===216},n.IsFunctionCallOrNewContext=function(e){return n.IsFunctionCallContext(e)||n.IsNewContext(e)},n.IsSameLineTokenContext=function(e){return e.TokensAreOnSameLine()},n.IsNotFormatOnEnter=function(e){return e.formattingRequestKind!=2},n.IsModuleDeclContext=function(e){return e.contextNode.kind()===130},n.IsObjectTypeContext=function(e){return e.contextNode.kind()===122&&e.contextNode.parent().kind()!==128},n.IsTypeArgumentOrParameter=function(e,t){return(e===80||e===81)&&(t===229||t===228)},n.IsTypeArgumentOrParameterContext=function(e){return n.IsTypeArgumentOrParameter(e.currentTokenSpan.kind(),e.currentTokenParent.kind())||n.IsTypeArgumentOrParameter(e.nextTokenSpan.kind(),e.nextTokenParent.kind())},n.IsVoidOpContext=function(e){return e.currentTokenSpan.kind()===41&&e.currentTokenParent.kind()===172},n}();t.Rules=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function e(){this.map=[],this.mapRowLength=0}return e.create=function(t){var n=new e;return n.Initialize(t),n},e.prototype.Initialize=function(e){this.mapRowLength=120,this.map=new Array(this.mapRowLength*this.mapRowLength);var t=new Array(this.map.length);return this.FillRules(e,t),this.map},e.prototype.FillRules=function(e,t){var n=this;e.forEach(function(e){n.FillRule(e,t)})},e.prototype.GetRuleBucketIndex=function(e,t){var n=e*this.mapRowLength+t;return n},e.prototype.FillRule=function(e,n){var r=this,i=e.Descriptor.LeftTokenRange!=t.Shared.TokenRange.Any&&e.Descriptor.RightTokenRange!=t.Shared.TokenRange.Any;e.Descriptor.LeftTokenRange.GetTokens().forEach(function(t){e.Descriptor.RightTokenRange.GetTokens().forEach(function(s){var o=r.GetRuleBucketIndex(t,s),a=r.map[o];a==undefined&&(a=r.map[o]=new u),a.AddRule(e,i,n,o)})})},e.prototype.GetRule=function(e){var t=this.GetRuleBucketIndex(e.currentTokenSpan.kind(),e.nextTokenSpan.kind()),n=this.map[t];if(n!=null)for(var r=0,i=n.Rules().length;r<i;r++){var s=n.Rules()[r];if(s.Operation.Context.InContext(e))return s}return null},e}();t.RulesMap=n;var r=5,i=31;(function(e){e[e.IgnoreRulesSpecific=0]="IgnoreRulesSpecific",e[e.IgnoreRulesAny=r*1]="IgnoreRulesAny",e[e.ContextRulesSpecific=r*2]="ContextRulesSpecific",e[e.ContextRulesAny=r*3]="ContextRulesAny",e[e.NoContextRulesSpecific=r*4]="NoContextRulesSpecific",e[e.NoContextRulesAny=r*5]="NoContextRulesAny"})(t.RulesPosition||(t.RulesPosition={}));var s=t.RulesPosition,o=function(){function t(){this.rulesInsertionIndexBitmap=0}return t.prototype.GetInsertionIndex=function(e){var t=0,n=0,s=this.rulesInsertionIndexBitmap;while(n<=e)t+=s&i,s>>=r,n+=r;return t},t.prototype.IncreaseInsertionIndex=function(t){var n=this.rulesInsertionIndexBitmap>>t&i;n++,e.Debug.assert((n&i)==n,"Adding more rules into the sub-bucket than allowed. Maximum allowed is 32 rules.");var r=this.rulesInsertionIndexBitmap&~(i<<t);r|=n<<t,this.rulesInsertionIndexBitmap=r},t}();t.RulesBucketConstructionState=o;var u=function(){function e(){this.rules=[]}return e.prototype.Rules=function(){return this.rules},e.prototype.AddRule=function(e,t,n,r){var i;e.Operation.Action==0?i=t?0:s.IgnoreRulesAny:e.Operation.Context.IsAny()?i=t?s.NoContextRulesSpecific:s.NoContextRulesAny:i=t?s.ContextRulesSpecific:s.ContextRulesAny;var u=n[r];u===undefined&&(u=n[r]=new o);var a=u.GetInsertionIndex(i);this.rules.splice(a,0,e),u.IncreaseInsertionIndex(i)},e}();t.RulesBucket=u})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function n(e){this.logger=e,this.globalRules=new t.Rules}return n.prototype.getRuleName=function(e){return this.globalRules.getRuleName(e)},n.prototype.getRuleByName=function(e){return this.globalRules[e]},n.prototype.getRulesMap=function(){return this.rulesMap},n.prototype.ensureUpToDate=function(n){var r=this;if(this.options==null||!e.compareDataObjects(this.options,n)){var i=e.timeFunction(this.logger,"RulesProvider: createActiveRules()",function(){return r.createActiveRules(n)}),s=e.timeFunction(this.logger,"RulesProvider: RulesMap.create()",function(){return t.RulesMap.create(i)});this.activeRules=i,this.rulesMap=s,this.options=e.Services.FormatCodeOptions.clone(n)}},n.prototype.createActiveRules=function(e){var t=this.globalRules.HighPriorityCommonRules.slice(0);return e.InsertSpaceAfterCommaDelimiter?t.push(this.globalRules.SpaceAfterComma):t.push(this.globalRules.NoSpaceAfterComma),e.InsertSpaceAfterFunctionKeywordForAnonymousFunctions?t.push(this.globalRules.SpaceAfterAnonymousFunctionKeyword):t.push(this.globalRules.NoSpaceAfterAnonymousFunctionKeyword),e.InsertSpaceAfterKeywordsInControlFlowStatements?t.push(this.globalRules.SpaceAfterKeywordInControl):t.push(this.globalRules.NoSpaceAfterKeywordInControl),e.InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis?(t.push(this.globalRules.SpaceAfterOpenParen),t.push(this.globalRules.SpaceBeforeCloseParen),t.push(this.globalRules.NoSpaceBetweenParens)):(t.push(this.globalRules.NoSpaceAfterOpenParen),t.push(this.globalRules.NoSpaceBeforeCloseParen),t.push(this.globalRules.NoSpaceBetweenParens)),e.InsertSpaceAfterSemicolonInForStatements?t.push(this.globalRules.SpaceAfterSemicolonInFor):t.push(this.globalRules.NoSpaceAfterSemicolonInFor),e.InsertSpaceBeforeAndAfterBinaryOperators?(t.push(this.globalRules.SpaceBeforeBinaryOperator),t.push(this.globalRules.SpaceAfterBinaryOperator)):(t.push(this.globalRules.NoSpaceBeforeBinaryOperator),t.push(this.globalRules.NoSpaceAfterBinaryOperator)),e.PlaceOpenBraceOnNewLineForControlBlocks&&t.push(this.globalRules.NewLineBeforeOpenBraceInControl),e.PlaceOpenBraceOnNewLineForFunctions&&(t.push(this.globalRules.NewLineBeforeOpenBraceInFunction),t.push(this.globalRules.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock)),t=t.concat(this.globalRules.LowPriorityCommonRules),t},n}();t.RulesProvider=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function e(e,t,n){this.position=e,this.length=t,this.replaceWith=n}return e.prototype.toString=function(){return"[ position: "+this.position+", length: "+this.length+", replaceWith: '"+this.replaceWith+"' ]"},e}();e.TextEditInfo=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){(function(t){var n=function(){function t(e,t,n){this.tokens=[];for(var r=e;r<=t;r++)n.indexOf(r)<0&&this.tokens.push(r)}return t.prototype.GetTokens=function(){return this.tokens},t.prototype.Contains=function(e){return this.tokens.indexOf(e)>=0},t.prototype.toString=function(){return"[tokenRangeStart="+e.SyntaxKind[this.tokens[0]]+","+"tokenRangeEnd="+e.SyntaxKind[this.tokens[this.tokens.length-1]]+"]"},t}();t.TokenRangeAccess=n;var r=function(){function e(e){this.tokens=e&&e.length?e:[]}return e.prototype.GetTokens=function(){return this.tokens},e.prototype.Contains=function(e){return this.tokens.indexOf(e)>=0},e}();t.TokenValuesAccess=r;var i=function(){function t(e){this.token=e}return t.prototype.GetTokens=function(){return[this.token]},t.prototype.Contains=function(e){return e==this.token},t.prototype.toString=function(){return"[singleTokenKind="+e.SyntaxKind[this.token]+"]"},t}();t.TokenSingleValueAccess=i;var s=function(){function e(){}return e.prototype.GetTokens=function(){var e=[];for(var t=9;t<=119;t++)e.push(t);return e},e.prototype.Contains=function(e){return!0},e.prototype.toString=function(){return"[allTokens]"},e}();t.TokenAllAccess=s;var o=function(){function e(e){this.tokenAccess=e}return e.FromToken=function(t){return new e(new i(t))},e.FromTokens=function(t){return new e(new r(t))},e.FromRange=function(t,r,i){return typeof i=="undefined"&&(i=[]),new e(new n(t,r,i))},e.AllTokens=function(){return new e(new s)},e.prototype.GetTokens=function(){return this.tokenAccess.GetTokens()},e.prototype.Contains=function(e){return this.tokenAccess.Contains(e)},e.prototype.toString=function(){return this.tokenAccess.toString()},e.Any=e.AllTokens(),e.AnyIncludingMultilineComments=e.FromTokens(e.Any.GetTokens().concat([6])),e.Keywords=e.FromRange(15,69),e.Operators=e.FromRange(78,119),e.BinaryOperators=e.FromRange(80,119),e.BinaryKeywordOperators=e.FromTokens([29,30]),e.ReservedKeywords=e.FromRange(51,59),e.UnaryPrefixOperators=e.FromTokens([93,94,102,101]),e.UnaryPrefixExpressions=e.FromTokens([13,11,72,74,70,35,31]),e.UnaryPreincrementExpressions=e.FromTokens([11,72,35,31]),e.UnaryPostincrementExpressions=e.FromTokens([11,73,75,31]),e.UnaryPredecrementExpressions=e.FromTokens([11,72,35,31]),e.UnaryPostdecrementExpressions=e.FromTokens([11,73,75,31]),e.Comments=e.FromTokens([7,6]),e.TypeNames=e.FromTokens([11,67,69,61,41,60]),e}();t.TokenRange=o})(t.Shared||(t.Shared={}));var n=t.Shared})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(e){function t(t,n,r){e.call(this,n,r),this._kind=t}return i(t,e),t.prototype.kind=function(){return this._kind},t}(e.TextSpan);t.TokenSpan=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(){function t(e,t,n,r,i){this.update(e,t,n,r,i)}return t.prototype.parent=function(){return this._parent},t.prototype.node=function(){return this._node},t.prototype.fullStart=function(){return this._fullStart},t.prototype.fullWidth=function(){return this._node.fullWidth()},t.prototype.start=function(){return this._fullStart+this._node.leadingTriviaWidth()},t.prototype.end=function(){return this._fullStart+this._node.leadingTriviaWidth()+this._node.width()},t.prototype.indentationAmount=function(){return this._indentationAmount},t.prototype.childIndentationAmountDelta=function(){return this._childIndentationAmountDelta},t.prototype.depth=function(){return this._depth},t.prototype.kind=function(){return this._node.kind()},t.prototype.hasSkippedOrMissingTokenChild=function(){return this._hasSkippedOrMissingTokenChild===null&&(this._hasSkippedOrMissingTokenChild=e.Syntax.nodeHasSkippedOrMissingTokens(this._node)),this._hasSkippedOrMissingTokenChild},t.prototype.clone=function(e){var t=null;return this._parent&&(t=this._parent.clone(e)),e.getNode(t,this._node,this._fullStart,this._indentationAmount,this._childIndentationAmountDelta)},t.prototype.update=function(e,t,n,r,i){this._parent=e,this._node=t,this._fullStart=n,this._indentationAmount=r,this._childIndentationAmountDelta=i,this._hasSkippedOrMissingTokenChild=null,e?this._depth=e.depth()+1:this._depth=0},t}();t.IndentationNodeContext=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){(function(e){var t=function(){function t(){this.nodes=[]}return t.prototype.getNode=function(t,n,r,i,s){if(this.nodes.length>0){var o=this.nodes.pop();return o.update(t,n,r,i,s),o}return new e.IndentationNodeContext(t,n,r,i,s)},t.prototype.releaseNode=function(e,t){typeof t=="undefined"&&(t=!1),this.nodes.push(e);if(t){var n=e.parent();n&&this.releaseNode(n,t)}},t}();e.IndentationNodeContextPool=t})(e.Formatting||(e.Formatting={}));var t=e.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(n){function r(e,r,i,s,o){n.call(this),this.options=o,this._position=0,this._parent=null,this._indentationNodeContextPool=new t.IndentationNodeContextPool,this._textSpan=e,this._snapshot=i,this._parent=this._indentationNodeContextPool.getNode(null,r,0,0,0),this._lastTriviaWasNewLine=s}return i(r,n),r.prototype.position=function(){return this._position},r.prototype.parent=function(){return this._parent},r.prototype.textSpan=function(){return this._textSpan},r.prototype.snapshot=function(){return this._snapshot},r.prototype.indentationNodeContextPool=function(){return this._indentationNodeContextPool},r.prototype.forceIndentNextToken=function(e){this._lastTriviaWasNewLine=!0,this.forceRecomputeIndentationOfParent(e,!0)},r.prototype.forceSkipIndentingNextToken=function(e){this._lastTriviaWasNewLine=!1,this.forceRecomputeIndentationOfParent(e,!1)},r.prototype.indentToken=function(t,n,r){throw e.Errors.abstract()},r.prototype.visitTokenInSpan=function(e){if(this._lastTriviaWasNewLine){var t=this.getTokenIndentationAmount(e),n=this.getCommentIndentationAmount(e);this.indentToken(e,t,n)}},r.prototype.visitToken=function(t){var n=new e.TextSpan(this._position,t.fullWidth());if(n.intersectsWithTextSpan(this._textSpan)){this.visitTokenInSpan(t);var r=t.trailingTrivia();this._lastTriviaWasNewLine=t.hasTrailingNewLine()&&r.syntaxTriviaAt(r.count()-1).kind()==5}this._position+=t.fullWidth()},r.prototype.visitNode=function(t){var n=new e.TextSpan(this._position,t.fullWidth());if(n.intersectsWithTextSpan(this._textSpan)){var r=this.getNodeIndentation(t),i=this._parent;this._parent=this._indentationNodeContextPool.getNode(i,t,this._position,r.indentationAmount,r.indentationAmountDelta),t.accept(this),this._indentationNodeContextPool.releaseNode(this._parent),this._parent=i}else this._position+=t.fullWidth()},r.prototype.getTokenIndentationAmount=function(e){return this._parent.node().firstToken()===e||e.kind()===70||e.kind()===71||e.kind()===74||e.kind()===75||e.kind()===42&&this._parent.node().kind()==161?this._parent.indentationAmount():this._parent.indentationAmount()+this._parent.childIndentationAmountDelta()},r.prototype.getCommentIndentationAmount=function(e){return e.kind()===71||e.kind()===75?this._parent.indentationAmount()+this._parent.childIndentationAmountDelta():this._parent.indentationAmount()},r.prototype.getNodeIndentation=function(t,n){var r=this._parent,i;if(this._textSpan.containsPosition(r.start()))i=r.indentationAmount();else{r.kind()===146&&!this.shouldIndentBlockInParent(this._parent.parent())&&(r=this._parent.parent());var s=this._snapshot.getLineFromPosition(r.start()).getText(),o=e.Indentation.firstNonWhitespacePosition(s);i=e.Indentation.columnForPositionInString(s,o,this.options)}var u=r.childIndentationAmountDelta(),a,f,l=r.node();switch(t.kind()){default:a=i+u,f=0;break;case 131:case 130:case 122:case 132:case 151:case 215:case 137:case 129:case 222:case 135:case 139:case 140:case 138:case 236:case 214:case 124:case 221:case 144:case 154:case 155:case 158:case 161:case 163:case 233:case 234:case 150:case 157:case 219:case 218:case 224:case 134:case 213:case 216:case 142:case 143:a=i+u,f=this.options.indentSpaces;break;case 147:r.kind()===235&&!l.elseKeyword.hasTrailingNewLine()&&!t.ifKeyword.hasLeadingNewLine()?a=i:a=i+u,f=this.options.indentSpaces;break;case 235:a=i,f=this.options.indentSpaces;break;case 146:this.shouldIndentBlockInParent(r)?a=i+u:a=i,f=this.options.indentSpaces}if(l&&!n){var c=this._snapshot.getLineNumberFromPosition(r.start()),h=this._snapshot.getLineNumberFromPosition(this._position+t.leadingTriviaWidth());if(c===h||n===!1)a=i,f=Math.min(this.options.indentSpaces,u+f)}return{indentationAmount:a,indentationAmountDelta:f}},r.prototype.shouldIndentBlockInParent=function(e){switch(e.kind()){case 120:case 130:case 146:case 233:case 234:return!0;default:return!1}},r.prototype.forceRecomputeIndentationOfParent=function(e,t){var n=this._parent;if(n.fullStart()===e){this._parent=n.parent();var r=this.getNodeIndentation(n.node(),t);n.update(n.parent(),n.node(),n.fullStart(),r.indentationAmount,r.indentationAmountDelta),this._parent=n}},r}(e.SyntaxWalker);t.IndentationTrackingWalker=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(n){function r(e,t,r,i,s){n.call(this,e,t,r,i,s),this._edits=[]}return i(r,n),r.prototype.indentToken=function(t,n,r){if(t.fullWidth()===0)return;if(this.parent().hasSkippedOrMissingTokenChild())return;var i=new e.TextSpan(this.position()+t.leadingTriviaWidth(),t.width());if(!this.textSpan().containsTextSpan(i))return;var s=e.Indentation.indentationString(n,this.options),o=e.Indentation.indentationString(r,this.options);this.recordIndentationEditsForToken(t,s,o)},r.prototype.edits=function(){return this._edits},r.prototype.recordEdit=function(e,n,r){this._edits.push(new t.TextEditInfo(e,n,r))},r.prototype.recordIndentationEditsForToken=function(t,n,r){var i=this.position(),s=!0,o="",u=t.leadingTrivia();if(u)for(var a=0,f=u.count();a<f;a++,i+=l.fullWidth()){var l=u.syntaxTriviaAt(a);if(!this.textSpan().containsTextSpan(new e.TextSpan(i,l.fullWidth())))continue;switch(l.kind()){case 6:this.recordIndentationEditsForMultiLineComment(l,i,r,o,!s),s=!1,o="";break;case 7:case 8:s&&(this.recordIndentationEditsForSingleLineOrSkippedText(l,i,r),s=!1);break;case 4:var c=f>a+1&&u.syntaxTriviaAt(a+1),h=c&&c.isComment()?r:n;s&&((!c||!c.isNewLine())&&this.recordIndentationEditsForWhitespace(l,i,h),s=!1),o+=l.fullText();break;case 5:s=!0,o="";break;default:throw e.Errors.invalidOperation()}}t.kind()!==10&&s&&n.length>0&&this.recordEdit(i,0,n)},r.prototype.recordIndentationEditsForSingleLineOrSkippedText=function(e,t,n){n.length>0&&this.recordEdit(t,0,n)},r.prototype.recordIndentationEditsForWhitespace=function(e,t,n){var r=e.fullText();if(n===r)return;this.recordEdit(t,r.length,n)},r.prototype.recordIndentationEditsForMultiLineComment=function(t,n,r,i,s){var o=n,u=e.Syntax.splitMultiLineCommentTriviaIntoMultipleLines(t);if(u.length<=1){s||this.recordIndentationEditsForSingleLineOrSkippedText(t,n,r);return}var a=e.Indentation.columnForPositionInString(i,i.length,this.options),f=e.Indentation.columnForPositionInString(r,r.length,this.options),l=0;s&&(l=1,o+=u[0].length);for(var c=l;c<u.length;c++){var h=u[c];this.recordIndentationEditsForSegment(h,o,f,a),o+=h.length}},r.prototype.recordIndentationEditsForSegment=function(t,n,r,i){var s=e.Indentation.firstNonWhitespacePosition(t),o=e.Indentation.columnForPositionInString(t,s,this.options),u=o-i,a=r+u;a<0&&(a=0);var f=e.Indentation.indentationString(a,this.options);if(s<t.length&&e.CharacterInfo.isLineTerminator(t.charCodeAt(s)))return;if(f===t.substring(0,s))return;this.recordEdit(n,s,f)},r}(t.IndentationTrackingWalker);t.MultipleTokenIndenter=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(t){function n(n,r,i,s,o){t.call(this,new e.TextSpan(n,1),r,i,s,o),this.indentationAmount=null,this.indentationPosition=n}return i(n,t),n.getIndentationAmount=function(e,t,r,i){var s=new n(e,t,r,!0,i);return t.accept(s),s.indentationAmount},n.prototype.indentToken=function(e,t,n){e.fullWidth()===0||this.indentationPosition-this.position()<e.leadingTriviaWidth()?this.indentationAmount=n:this.indentationAmount=t},n}(t.IndentationTrackingWalker);t.SingleTokenIndenter=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(t){var n=function(n){function r(e,r,i,s,o,u,a){n.call(this,e,r,o,i,s),this.previousTokenSpan=null,this.previousTokenParent=null,this.scriptHasErrors=!1,this.previousTokenParent=this.parent().clone(this.indentationNodeContextPool()),this.rulesProvider=u,this.formattingRequestKind=a,this.formattingContext=new t.FormattingContext(this.snapshot(),this.formattingRequestKind)}return i(r,n),r.getEdits=function(e,t,n,i,s,o,u){var a=new r(e,t,i,n,s,o,u);return t.accept(a),a.edits()},r.prototype.visitTokenInSpan=function(t){if(t.fullWidth()!==0){var r=new e.TextSpan(this.position()+t.leadingTriviaWidth(),t.width());this.textSpan().containsTextSpan(r)&&this.processToken(t)}n.prototype.visitTokenInSpan.call(this,t)},r.prototype.processToken=function(e){var n=this.position();e.leadingTriviaWidth()!==0&&(this.processTrivia(e.leadingTrivia(),n),n+=e.leadingTriviaWidth());var r=new t.TokenSpan(e.kind(),n,e.width());this.parent().hasSkippedOrMissingTokenChild()||(this.previousTokenSpan?this.formatPair(this.previousTokenSpan,this.previousTokenParent,r,this.parent()):this.trimWhitespaceInLineRange(this.getLineNumber(this.textSpan()),this.getLineNumber(r))),this.previousTokenSpan=r,this.previousTokenParent&&this.indentationNodeContextPool().releaseNode(this.previousTokenParent,!0),this.previousTokenParent=this.parent().clone(this.indentationNodeContextPool()),n+=e.width(),e.trailingTriviaWidth()!==0&&this.processTrivia(e.trailingTrivia(),n)},r.prototype.processTrivia=function(e,n){var r=n;for(var i=0,s=e.count();i<s;i++){var o=e.syntaxTriviaAt(i);if(o.isComment()||o.isSkippedToken()){var u=new t.TokenSpan(o.kind(),r,o.fullWidth());if(this.textSpan().containsTextSpan(u)){if(o.isComment()&&this.previousTokenSpan)this.formatPair(this.previousTokenSpan,this.previousTokenParent,u,this.parent());else{var a=this.getLineNumber(this.previousTokenSpan||this.textSpan());this.trimWhitespaceInLineRange(a,this.getLineNumber(u))}this.previousTokenSpan=u,this.previousTokenParent&&this.indentationNodeContextPool().releaseNode(this.previousTokenParent,!0),this.previousTokenParent=this.parent().clone(this.indentationNodeContextPool())}}r+=o.fullWidth()}},r.prototype.findCommonParents=function(t,n){var r,i,s,o;t.depth()<n.depth()?(r=t,i=t.depth(),s=n,o=n.depth()):(r=n,i=n.depth(),s=t,o=t.depth()),e.Debug.assert(i>=0,"Expected shallowParentDepth >= 0"),e.Debug.assert(o>=0,"Expected deepParentDepth >= 0"),e.Debug.assert(o>=i,"Expected deepParentDepth >= shallowParentDepth");while(o>i)s=s.parent(),o--;e.Debug.assert(o===i,"Expected deepParentDepth === shallowParentDepth");while(s.node()&&r.node()){if(s.node()===r.node())return s;s=s.parent(),r=r.parent()}throw e.Errors.invalidOperation()},r.prototype.formatPair=function(e,t,n,r){var i=this.getLineNumber(e),s=this.getLineNumber(n),o=this.findCommonParents(t,r);this.formattingContext.updateContext(e,t,n,r,o);var u=this.rulesProvider.getRulesMap().GetRule(this.formattingContext);u!=null&&(this.RecordRuleEdits(u,e,n),(u.Operation.Action==1||u.Operation.Action==3)&&i!=s&&this.forceSkipIndentingNextToken(n.start()),u.Operation.Action==2&&i==s&&this.forceIndentNextToken(n.start())),i!=s&&(!u||u.Operation.Action!=3&&u.Flag!=1)&&this.trimWhitespaceInLineRange(i,s,e)},r.prototype.getLineNumber=function(e){return this.snapshot().getLineNumberFromPosition(e.start())},r.prototype.trimWhitespaceInLineRange=function(e,t,n){for(var r=e;r<t;++r){var i=this.snapshot().getLineFromLineNumber(r);this.trimWhitespace(i,n)}},r.prototype.trimWhitespace=function(t,n){if(n&&(n.kind()==6||n.kind()==7)&&n.start()<=t.endPosition()&&n.end()>=t.endPosition())return;var r=t.getText(),i=0;for(i=r.length-1;i>=0;--i)if(!e.CharacterInfo.isWhitespace(r.charCodeAt(i)))break;++i,i<r.length&&this.recordEdit(t.startPosition()+i,t.length()-i,"")},r.prototype.RecordRuleEdits=function(t,n,r){if(t.Operation.Action==0)return;var i;switch(t.Operation.Action){case 3:i=new e.TextSpan(n.end(),r.start()-n.end());if(i.length()>0){this.recordEdit(i.start(),i.length(),"");return}break;case 2:if(t.Flag!=1&&this.getLineNumber(n)!=this.getLineNumber(r))return;i=new e.TextSpan(n.end(),r.start()-n.end());var s=!1,o=this.snapshot().getText(i),u=o.indexOf(this.options.newLineCharacter);u<0?s=!0:(u=o.indexOf(this.options.newLineCharacter,u+1),u>=0&&(s=!0));if(s){this.recordEdit(i.start(),i.length(),this.options.newLineCharacter);return}break;case 1:if(t.Flag!=1&&this.getLineNumber(n)!=this.getLineNumber(r))return;i=new e.TextSpan(n.end(),r.start()-n.end());if(i.length()>1||this.snapshot().getText(i)!=" "){this.recordEdit(i.start(),i.length()," ");return}}},r}(t.MultipleTokenIndenter);t.Formatter=n})(t.Formatting||(t.Formatting={}));var n=t.Formatting})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var u=this,r;(function(e){(function(t){var n=function(){function t(e){this.host=e}return t.prototype.getPreProcessedFileInfo=function(t,n){return e.preProcessFile(t,n)},t.prototype.getDefaultCompilationSettings=function(){var t=new e.CompilationSettings;return t.codeGenTarget=1,t},t.prototype.dumpMemory=function(){if(!u||!u.Debug||!u.Debug.dumpHeap)throw new Error(e.getDiagnosticMessage(e.DiagnosticCode.This_version_of_the_Javascript_runtime_does_not_support_the_0_function,["Debug.dumpHeap()"]));var t=u.Debug.dumpHeap(2),n=0;for(var r=0;r<t.length;r++)n+=t[r].size;return"There are "+t.length+" object(s) accessible from 'global', for a total of "+n+" byte(s)."},t.prototype.getMemoryInfo=function(){if(!u||!u.Debug||!u.Debug.getMemoryInfo)throw new Error(e.getDiagnosticMessage(e.DiagnosticCode.This_version_of_the_Javascript_runtime_does_not_support_the_0_function,["Debug.getMemoryInfo()"]));return u.Debug.getMemoryInfo()},t.prototype.collectGarbage=function(){if(!u||!u.CollectGarbage)throw new Error(e.getDiagnosticMessage(e.DiagnosticCode.This_version_of_the_Javascript_runtime_does_not_support_the_0_function,["collectGarbage()"]));u.CollectGarbage()},t}();t.CoreServices=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(){function e(e,t,n,r,i){this.fileName=e,this.host=t,this.version=n,this.isOpen=r,this.byteOrderMark=i,this._sourceText=null}return e.prototype.getScriptSnapshot=function(){return this._sourceText===null&&(this._sourceText=this.host.getScriptSnapshot(this.fileName)),this._sourceText},e}(),r=function(){function t(t){this._fileNameToEntry=new e.StringHashTable;var r=t.getScriptFileNames();for(var i=0,s=r.length;i<s;i++){var o=r[i];this._fileNameToEntry.add(e.switchToForwardSlashes(o),new n(o,t,t.getScriptVersion(o),t.getScriptIsOpen(o),t.getScriptByteOrderMark(o)))}var u=t.getCompilationSettings();u||(u=new e.CompilationSettings,u.codeGenTarget=1),this._compilationSettings=e.ImmutableCompilationSettings.fromCompilationSettings(u)}return t.prototype.compilationSettings=function(){return this._compilationSettings},t.prototype.contains=function(t){return this._fileNameToEntry.lookup(e.switchToForwardSlashes(t))!==null},t.prototype.getHostFileName=function(t){var n=this._fileNameToEntry.lookup(e.switchToForwardSlashes(t));return n?n.fileName:t},t.prototype.getFileNames=function(){return this._fileNameToEntry.getAllKeys()},t.prototype.getVersion=function(t){return this._fileNameToEntry.lookup(e.switchToForwardSlashes(t)).version},t.prototype.isOpen=function(t){return this._fileNameToEntry.lookup(e.switchToForwardSlashes(t)).isOpen},t.prototype.getByteOrderMark=function(t){return this._fileNameToEntry.lookup(e.switchToForwardSlashes(t)).byteOrderMark},t.prototype.getScriptSnapshot=function(t){return this._fileNameToEntry.lookup(e.switchToForwardSlashes(t)).getScriptSnapshot()},t.prototype.getScriptTextChangeRangeSinceVersion=function(t,n){var r=this.getVersion(t);if(n===r)return e.TextChangeRange.unchanged;var i=this.getScriptSnapshot(t);return i.getTextChangeRangeSinceVersion(n)},t}(),i=function(){function t(e){this._host=e,this._currentFileName="",this._currentFileVersion=-1,this._currentFileSyntaxTree=null,this._currentFileScriptSnapshot=null,this._hostCache=new r(e)}return t.prototype.getCurrentFileSyntaxTree=function(e){this._hostCache=new r(this._host);var t=this._hostCache.getVersion(e),n=null;if(this._currentFileSyntaxTree===null||this._currentFileName!==e){var i=this._hostCache.getScriptSnapshot(e);n=this.createSyntaxTree(e,i)}else if(this._currentFileVersion!==t){var i=this._hostCache.getScriptSnapshot(e);n=this.updateSyntaxTree(e,i,this._currentFileSyntaxTree,this._currentFileVersion)}return n!==null&&(this._currentFileScriptSnapshot=i,this._currentFileVersion=t,this._currentFileName=e,this._currentFileSyntaxTree=n),this._currentFileSyntaxTree},t.prototype.createSyntaxTree=function(t,n){var r=e.SimpleText.fromScriptSnapshot(n),i=e.Parser.parse(t,r,e.isDTSFile(t),e.getParseOptions(e.ImmutableCompilationSettings.defaultSettings()));return i},t.prototype.updateSyntaxTree=function(t,n,r,i){var s=this._hostCache.getScriptTextChangeRangeSinceVersion(t,i);if(s===null)return this.createSyntaxTree(t,n);var o=e.Parser.incrementalParse(r,s,e.SimpleText.fromScriptSnapshot(n));return this.ensureInvariants(t,s,o,this._currentFileScriptSnapshot,n),o},t.prototype.ensureInvariants=function(t,n,r,i,s){function a(){function r(e){return'"'+e.replace(/\r/g,"\\r").replace(/\n/g,"\\n")+'"'}var e=["expected length:",o,"and actual length:",u,"are not equal\r\n"],t=n.span();e.push("Edit range (old text) (start: "+t.start()+", end: "+t.end()+") \r\n"),e.push("Old text edit range contents: "+r(i.getText(t.start(),t.end())));var a=n.newSpan();return e.push("Edit range (new text) (start: "+a.start()+", end: "+a.end()+") \r\n"),e.push("New text edit range contents: "+r(s.getText(a.start(),a.end()))),e.join(" ")}var o=i.getLength()-n.span().length()+n.newLength(),u=s.getLength();e.Debug.assert(o===u,"Expected length is different from actual!",a);if(e.Debug.shouldAssert(3)){var f=i.getText(0,n.span().start()),l=s.getText(0,n.span().start());e.Debug.assert(f===l,"Expected equal prefix texts!");var c=i.getText(n.span().end(),i.getLength()),h=s.getText(n.newSpan().end(),s.getLength());e.Debug.assert(c===h,"Expected equal suffix texts!");var p=this.createSyntaxTree(t,s);e.Debug.assert(p.structuralEquals(r),"Expected equal incremental and normal trees");var d=r.sourceUnit().fullText(),v=s.getText(0,s.getLength());e.Debug.assert(d===v,"Expected full texts to be equal")}},t}();t.SyntaxTreeCache=i;var s=function(){function t(e){this.host=e,this.compiler=null,this.hostCache=null,this.logger=this.host}return t.prototype.synchronizeHostData=function(){var t=this;e.timeFunction(this.logger,"synchronizeHostData()",function(){t.synchronizeHostDataWorker()})},t.prototype.synchronizeHostDataWorker=function(){this.hostCache=new r(this.host);var t=this.hostCache.compilationSettings();this.compiler===null&&(this.compiler=new e.TypeScriptCompiler(this.logger,t)),this.compiler.setCompilationSettings(t);var n=this.compiler.fileNames();for(var i=0,s=n.length;i<s;i++){var o=n[i];this.hostCache.contains(o)||this.compiler.removeFile(o)}var u=this.hostCache,a=u.getFileNames();for(var i=0,s=a.length;i<s;i++){var o=a[i];this.compiler.getDocument(o)?this.tryUpdateFile(this.compiler,o):this.compiler.addFile(o,u.getScriptSnapshot(o),u.getByteOrderMark(o),u.getVersion(o),u.isOpen(o))}},t.prototype.tryUpdateFile=function(e,t){var n=this.compiler.getDocument(t),r=this.hostCache.getVersion(t),i=this.hostCache.isOpen(t);if(n.version===r&&n.isOpen===i)return;var s=null;n.isOpen&&i&&(s=this.hostCache.getScriptTextChangeRangeSinceVersion(t,n.version)),e.updateFile(t,this.hostCache.getScriptSnapshot(t),r,i,s)},t.prototype.getScriptSnapshot=function(e){return this.synchronizeHostData(),this.hostCache.getScriptSnapshot(e)},t.prototype.getCachedHostFileName=function(e){return this.hostCache||this.synchronizeHostData(),this.hostCache.getHostFileName(e)},t.prototype.getCachedTopLevelDeclaration=function(e){return this.hostCache||this.synchronizeHostData(),this.compiler.topLevelDeclaration(e)},t.prototype.compilationSettings=function(){return this.synchronizeHostData(),this.compiler.compilationSettings()},t.prototype.fileNames=function(){return this.synchronizeHostData(),this.compiler.fileNames()},t.prototype.cleanupSemanticCache=function(){this.compiler.cleanupSemanticCache()},t.prototype.getDocument=function(e){return this.synchronizeHostData(),this.compiler.getDocument(e)},t.prototype.getSyntacticDiagnostics=function(e){return this.synchronizeHostData(),this.compiler.getSyntacticDiagnostics(e)},t.prototype.getSemanticDiagnostics=function(e){return this.synchronizeHostData(),this.compiler.getSemanticDiagnostics(e)},t.prototype.getCompilerOptionsDiagnostics=function(e){return this.synchronizeHostData(),this.compiler.getCompilerOptionsDiagnostics(e)},t.prototype.getSymbolInformationFromAST=function(e,t){return this.synchronizeHostData(),this.compiler.pullGetSymbolInformationFromAST(e,t)},t.prototype.getCallInformationFromAST=function(e,t){return this.synchronizeHostData(),this.compiler.pullGetCallInformationFromAST(e,t)},t.prototype.getVisibleMemberSymbolsFromAST=function(e,t){return this.synchronizeHostData(),this.compiler.pullGetVisibleMemberSymbolsFromAST(e,t)},t.prototype.getVisibleDeclsFromAST=function(e,t){return this.synchronizeHostData(),this.compiler.pullGetVisibleDeclsFromAST(e,t)},t.prototype.getContextualMembersFromAST=function(e,t){return this.synchronizeHostData(),this.compiler.pullGetContextualMembersFromAST(e,t)},t.prototype.pullGetDeclInformation=function(e,t,n){return this.synchronizeHostData(),this.compiler.pullGetDeclInformation(e,t,n)},t.prototype.topLevelDeclaration=function(e){return this.synchronizeHostData(),this.compiler.topLevelDeclaration(e)},t.prototype.getDeclForAST=function(e){return this.synchronizeHostData(),this.compiler.getDeclForAST(e)},t.prototype.emit=function(e,t){return this.synchronizeHostData(),this.compiler.emit(e,t)},t.prototype.emitDeclarations=function(e,t){return this.synchronizeHostData(),this.compiler.emitDeclarations(e,t)},t.prototype.canEmitDeclarations=function(e){return this.synchronizeHostData(),this.compiler.canEmitDeclarations(e)},t}();t.LanguageServiceCompiler=s})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(){function t(){}return t.getSpan=function(t){return new e.TextSpan(t.start(),t.width())},t.symbolDeclarationIntersectsPosition=function(e,t,n){var r=e.getDeclarations()[0];return r.fileName()===t&&this.getSpan(r.ast()).intersectsWithPosition(n)?!0:!1},t.filterContextualMembersList=function(t,n,r,i){if(!n||!n.symbols||n.symbols.length===0)return t;var s=n.symbols,o=e.createIntrinsicsObject();for(var u=0,a=s.length;u<a;u++){if(this.symbolDeclarationIntersectsPosition(s[u],r,i))continue;o[e.stripStartAndEndQuotes(s[u].getDisplayName())]=!0}var f=[];for(var l=0,c=t.length;l<c;l++){var h=t[l];if(!o[e.stripStartAndEndQuotes(h.getDisplayName())]){if(this.symbolDeclarationIntersectsPosition(h,r,i))continue;f.push(h)}}return f},t.isCompletionListBlocker=function(n,r){return r<0||r>n.fullWidth()?!0:e.Syntax.isEntirelyInsideComment(n,r)||e.Syntax.isEntirelyInStringOrRegularExpressionLiteral(n,r)||t.isIdentifierDefinitionLocation(n,r)||t.isRightOfIllegalDot(n,r)},t.getContainingObjectLiteralApplicableForCompletion=function(e,n){var r=t.getNonIdentifierCompleteTokenOnLeft(e,n);if(r){var i=r.parent();switch(r.kind()){case 70:case 79:i&&i.kind()===2&&(i=i.parent());if(i&&i.kind()===215)return i}}return null},t.isIdentifierDefinitionLocation=function(e,n){var r=t.getNonIdentifierCompleteTokenOnLeft(e,n);if(r){var i=r.containingNode()&&r.containingNode().kind();switch(r.kind()){case 79:return i===227||i===224||i===132;case 72:return i===227||i===236;case 70:return i===132;case 57:case 55:case 58:case 77:return i===242;case 44:case 65:case 46:case 52:case 27:case 40:case 64:case 68:return!0}switch(r.token().text()){case"class":case"interface":case"enum":case"module":return!0}}return!1},t.getNonIdentifierCompleteTokenOnLeft=function(e,t){var n=e.findCompleteTokenOnLeft(t,!0);return n&&t===n.end()&&n.kind()==10&&(n=n.previousToken(!0)),n&&t===n.end()&&n.kind()===11&&(n=n.previousToken(!0)),n},t.isRightOfIllegalDot=function(e,n){var r=t.getNonIdentifierCompleteTokenOnLeft(e,n);if(r)switch(r.kind()){case 76:var i=r.previousToken(!0);return i&&i.kind()===13;case 13:var s=r.token().text();return s.charAt(s.length-1)==="."}return!1},t.getValidCompletionEntryDisplayName=function(t){if(t&&t.length>0){var n=t.charCodeAt(0);if(n===39||n===34)t=e.stripStartAndEndQuotes(t);if(e.Scanner.isValidIdentifier(e.SimpleText.fromString(t),1))return t}return null},t}();t.CompletionHelpers=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){var t=function(){function t(){}return t.getKeywordCompltions=function(){if(t.keywordCompletions===null){var n=[];for(var r=0,i=t.keywords.length;r<i;r++){var s=t.keywords[r],o=new e.ResolvedCompletionEntry(s,e.ScriptElementKind.keyword,e.ScriptElementKindModifier.none,null,s,null);n.push(o)}t.keywordCompletions=n}return t.keywordCompletions},t.keywords=["break","case","catch","class","constructor","continue","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","function","get","if","implements","import","in","instanceof","interface","module","new","null","private","public","require","return","set","static","super","switch","this","throw","true","try","typeof","var","while","with"],t.keywordCompletions=null,t}();e.KeywordCompletions=t})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(){function n(){}return n.isInPartiallyWrittenTypeArgumentList=function(t,r){var i=t.sourceUnit().findTokenOnLeft(r,!0);if(i&&e.Syntax.hasAncestorOfKind(i,229))return null;var s=0,o=0;e:while(i){switch(i.kind()){case 80:if(s===0){var u=i;i=i.previousToken(!0);if(!i||i.kind()!==11)break e;return{genericIdentifer:i,lessThanToken:u,argumentIndex:o}}if(s<0)break e;s--;break;case 97:s++;case 81:s++;break;case 79:s==0&&o++;break;case 71:var a=0;i=n.moveBackUpTillMatchingTokenKind(i,71,70);if(!i)break e;break;case 85:i=i.previousToken(!0);if(!i||i.kind()!==73)break e;i=n.moveBackUpTillMatchingTokenKind(i,73,72),i&&i.kind()===81&&(i=n.moveBackUpTillMatchingTokenKind(i,81,80)),i&&i.kind()===31&&(i=i.previousToken(!0));if(!i)break e;break;case 11:case 60:case 67:case 69:case 41:case 61:case 76:case 74:case 75:break;default:break e}i=i.previousToken(!0)}return null},n.getSignatureInfoFromSignatureSymbol=function(n,r,i,s){var o=[],u=r.length>1;for(var a=0,f=r.length;a<f;a++){var l=r[a];if(u&&l.isDefinition())continue;var c=new t.FormalSignatureItemInfo,h=[],p=l.getScopedNameEx(i).toString();!p&&(!n.isType()||n.isNamedTypeSymbol())&&(p=n.getScopedNameEx(i).toString());var d=l.getSignatureTypeNameEx(p,!1,!1,i,!0,!0);c.signatureInfo=e.MemberName.memberNameToString(d,h),c.docComment=l.docComments();var v=0;if(l.isGeneric()){var m=l.getTypeParameters();for(var g=0,y=m.length;g<y;g++){var b=m[g],w=new t.FormalTypeParameterInfo;w.name=b.getDisplayName(),w.docComment=b.docComments(),w.minChar=h[2*v],w.limChar=h[2*v+1],v++,c.typeParameters.push(w)}}var E=l.parameters;for(var g=0,y=E.length;g<y;g++){var S=E[g],x=new t.FormalParameterInfo;x.isVariable=l.hasVarArgs&&g===E.length-1,x.name=S.getDisplayName(),x.docComment=S.docComments(),x.minChar=h[2*v],x.limChar=h[2*v+1],v++,c.parameters.push(x)}o.push(c)}return o},n.getSignatureInfoFromGenericSymbol=function(n,r,i){var s=new t.FormalSignatureItemInfo,o=[],u=n.getScopedNameEx(r,!1,!0,!1,!0);s.signatureInfo=e.MemberName.memberNameToString(u,o),s.docComment=n.docComments();var a=0,f=n.type,l=f.getTypeParameters();for(var c=0,h=l.length;c<h;c++){var p=l[c],d=new t.FormalTypeParameterInfo;d.name=p.getDisplayName(),d.docComment=p.docComments(),d.minChar=o[2*c],d.limChar=o[2*c+1],s.typeParameters.push(d)}return[s]},n.getActualSignatureInfoFromCallExpression=function(e,n,r){if(!e)return null;var i=new t.ActualSignatureInfo,s=n,o=n;e.argumentList.typeArgumentList&&(s=Math.min(e.argumentList.typeArgumentList.start()),o=Math.max(Math.max(e.argumentList.typeArgumentList.start(),e.argumentList.typeArgumentList.end()+e.argumentList.typeArgumentList.trailingTriviaWidth()))),e.argumentList.arguments&&(s=Math.min(s,e.argumentList.arguments.start()),o=Math.max(o,Math.max(e.argumentList.arguments.start(),e.argumentList.arguments.end()+e.argumentList.arguments.trailingTriviaWidth()))),i.parameterMinChar=s,i.parameterLimChar=o,i.currentParameterIsTypeParameter=!1,i.currentParameter=-1;if(r)i.currentParameterIsTypeParameter=!0,i.currentParameter=r.argumentIndex;else if(e.argumentList.arguments&&e.argumentList.arguments.nonSeparatorCount()>0){i.currentParameter=0;for(var u=0;u<e.argumentList.arguments.nonSeparatorCount();u++)n>e.argumentList.arguments.nonSeparatorAt(u).end()+e.argumentList.arguments.nonSeparatorAt(u).trailingTriviaWidth()&&i.currentParameter++}return i},n.getActualSignatureInfoFromPartiallyWritenGenericExpression=function(e,n){var r=new t.ActualSignatureInfo;return r.parameterMinChar=n.lessThanToken.start(),r.parameterLimChar=Math.max(n.lessThanToken.fullEnd(),e),r.currentParameterIsTypeParameter=!0,r.currentParameter=n.argumentIndex,r},n.isSignatureHelpBlocker=function(t,n){return n<0||n>t.fullWidth()?!0:e.Syntax.isEntirelyInsideComment(t,n)},n.isTargetOfObjectCreationExpression=function(t){var n=e.Syntax.getAncestorOfKind(t,216);if(n){var r=n.element(),i=r.newKeyword.fullWidth(),s=t.fullStart()-n.fullStart();return s>=i&&s<=i+r.expression.fullWidth()}return!1},n.moveBackUpTillMatchingTokenKind=function(t,n,r){if(!t||t.kind()!==n)throw e.Errors.invalidOperation();t=t.previousToken(!0);var i=0;while(t){if(t.kind()===r){if(i===0)return t;if(i<0)break;i--}else t.kind()===n&&i++;t=t.previousToken(!0)}return null},n}();t.SignatureInfoHelpers=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){var t=function(){function e(e,t,n,r,i,s){this.name=e,this.kind=t,this.kindModifiers=n,this.type=r,this.fullSymbolName=i,this.docComment=s}return e.prototype.isResolved=function(){return!0},e}();e.ResolvedCompletionEntry=t;var n=function(){function e(e,t,n,r){this.name=e,this.kind=t,this.kindModifiers=n,this.decl=r,this.type=null,this.fullSymbolName=null,this.docComment=null,this.hasBeenResolved=!1}return e.prototype.isResolved=function(){return this.hasBeenResolved},e.prototype.resolve=function(e,t,n){this.type=e,this.fullSymbolName=t,this.docComment=n,this.hasBeenResolved=!0},e}();e.DeclReferenceCompletionEntry=n;var r=function(){function e(e,t,n){this.fileName=e,this.position=t,this.entries=n}return e}();e.CompletionSession=r})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){function r(e){if(e)switch(e.kind()){case 131:case 128:case 130:case 137:case 129:case 225:case 218:case 219:return!0}return!1}var n=function(){function n(n){this.host=n,this.activeCompletionSession=null,this.logger=this.host,this.compiler=new t.LanguageServiceCompiler(this.host),this._syntaxTreeCache=new t.SyntaxTreeCache(this.host),e.LocalizedDiagnosticMessages||(e.LocalizedDiagnosticMessages=this.host.getLocalizedDiagnosticMessages())}return n.prototype.cleanupSemanticCache=function(){this.compiler.cleanupSemanticCache()},n.prototype.refresh=function(){},n.prototype.getSymbolInfoAtPosition=function(t,n,r){var i=this.compiler.getDocument(t),s=i.sourceUnit(),o=e.ASTHelpers.getAstAtPosition(s,n);if(o===null||r&&o.kind()!==11)return this.logger.log("No name found at the given position"),null;var u=this.compiler.getSymbolInformationFromAST(o,i);if(u===null||u.symbol===null&&u.aliasSymbol)return this.logger.log("No symbol found at the given position"),{symbol:null,containingASTOpt:null};var a=u.aliasSymbol||u.symbol,f=a.getName();if(r){var l=o.valueText();if((a.isError()||a.isAny())&&l!==f)return this.logger.log("Unknown symbol found at the given position"),{symbol:null,containingASTOpt:null}}var c=this.getSymbolScopeAST(a,o);return{symbol:a,containingASTOpt:c}},n.prototype.getReferencesAtPosition=function(t,n){t=e.switchToForwardSlashes(t);var r=this.getSymbolInfoAtPosition(t,n,!0);if(r===null)return[];if(r.symbol===null)return this.getSingleNodeReferenceAtPosition(t,n);var i=[],s=r.symbol,o=s.getName(),u=r.containingASTOpt,a=this.compiler.fileNames();for(var f=0,l=a.length;f<l;f++){var c=a[f];if(u&&t!=c)continue;var h=this.compiler.getDocument(c),p=h.bloomFilter();p.probablyContains(o)&&(i=i.concat(this.getReferencesInFile(c,s,u)))}return i},n.prototype.getSymbolScopeAST=function(e,t){if(e.kind===8192&&e.getDeclarations().length>0&&e.getDeclarations()[0].getParentDecl()&&e.getDeclarations()[0].getParentDecl().kind===65536)while(t){if(t.kind()===129||t.kind()===135)return t;t=t.parent}return null},n.prototype.getOccurrencesAtPosition=function(t,n){t=e.switchToForwardSlashes(t);var r=this.getSymbolInfoAtPosition(t,n,!0);if(r===null)return[];if(r.symbol===null)return this.getSingleNodeReferenceAtPosition(t,n);var i=r.symbol,s=r.containingASTOpt;return this.getReferencesInFile(t,i,s)},n.prototype.getSingleNodeReferenceAtPosition=function(n,r){var i=this.compiler.getDocument(n),s=i.sourceUnit(),o=e.ASTHelpers.getAstAtPosition(s,r);if(o===null||o.kind()!==11)return[];var u=this.isWriteAccess(o);return[new t.ReferenceEntry(this._getHostFileName(n),o.start(),o.end(),u)]},n.prototype.getImplementorsAtPosition=function(t,n){var r=this;t=e.switchToForwardSlashes(t);var i=[],s=this.compiler.getDocument(t),o=s.sourceUnit(),u=e.ASTHelpers.getAstAtPosition(o,n);if(u===null||u.kind()!==11)return this.logger.log("No identifier at the specified location."),i;var a=u.valueText(),f=this.compiler.getSymbolInformationFromAST(u,s),l=f.symbol;if(l===null)return this.logger.log("No symbol annotation on the identifier AST."),i;var c=l.getName();if((l.isError()||l.isAny())&&a!==c)return this.logger.log("Unknown symbol found at the given position"),i;var h=l.type,p;if(h.isClass()||h.isInterface())p=h.getTypesThatExtendThisType();else if(l.kind==4096||l.kind==16384||h.isMethod()||h.isProperty()){var d=l.getDeclarations()[0],v=d.getParentDecl().getSymbol().type;p=[];var m=v.getTypesThatExtendThisType(),g=v.getExtendedTypes();m.forEach(function(e){var t=r.getOverrides(e,l);t.forEach(function(e){p.push(e)})}),g.forEach(function(e){var t=r.getOverrides(e,l);t.forEach(function(e){p.push(e)})})}if(p){var y=this.compiler.fileNames();for(var b=0,w=y.length;b<w;b++){var E=y[b],S=this.compiler.getDocument(E),x=S.bloomFilter();p.forEach(function(e){var t=e.getName();x.probablyContains(t)&&(i=i.concat(r.getImplementorsInFile(E,e)))})}}return i},n.prototype.getOverrides=function(e,t){var n=[],r;return e.isClass()?r=e.getMembers():e.isInterface()&&(r=e.getMembers()),r==null?null:(r.forEach(function(e){var r=e;r.getName()===t.getName()&&n.push(r)}),n)},n.prototype.getImplementorsInFile=function(n,r){var i=this,s=[],o=r.getDisplayName(),u=this.getPossibleSymbolReferencePositions(n,o);if(u&&u.length>0){var a=this.compiler.getDocument(n),f=a.sourceUnit();u.forEach(function(o){var u=e.ASTHelpers.getAstAtPosition(f,o);if(u===null||u.kind()!==11)return;var l=i.compiler.getSymbolInformationFromAST(u,a);if(l!==null){var c;if(r.kind===8||r.kind===16)c=l.symbol.type;else{var h=l.symbol.getDeclarations()[0];c=h.getSymbol()}if(c===r){var p=i.isWriteAccess(u);s.push(new t.ReferenceEntry(i._getHostFileName(n),u.start(),u.end(),p))}}})}return s},n.prototype.getReferencesInFile=function(n,r,i){var s=this,o=[],u=r.getDisplayName(),a=this.getPossibleSymbolReferencePositions(n,u);if(a&&a.length>0){var f=this.compiler.getDocument(n),l=f.sourceUnit();a.forEach(function(a){if(i&&(a<i.start()||a>i.end()))return;var c=e.ASTHelpers.getAstAtPosition(l,a,!1);if(c===null||c.kind()!==11||c.end()-c.start()!==u.length)return;var h=s.compiler.getSymbolInformationFromAST(c,f);if(h!==null){var p=h.aliasSymbol||h.symbol;if(t.FindReferenceHelpers.compareSymbolsForLexicalIdentity(p,r)){var d=s.isWriteAccess(c);o.push(new t.ReferenceEntry(s._getHostFileName(n),c.start(),c.end(),d))}}})}return o},n.prototype.isWriteAccess=function(e){var t=e.parent;if(t!==null){var n=t.kind();switch(n){case 131:return t.identifier===e;case 128:return t.identifier===e;case 130:return t.name===e||t.stringLiteral===e;case 129:return t.identifier===e;case 133:return t.identifier===e;case 225:var r=t;return!!r.equalsValueClause&&r.propertyName===e;case 242:return!0;case 174:case 175:case 176:case 177:case 178:case 179:case 182:case 180:case 181:case 183:case 185:case 184:return t.left===e;case 168:case 210:return!0;case 169:case 211:return!0}}return!1},n.prototype.isLetterOrDigit=function(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||t===95||t===36||t>127&&e.Unicode.isIdentifierPart(t,1)},n.prototype.getPossibleSymbolReferencePositions=function(e,t){var n=[];if(!t||!t.length)return n;var r=this.compiler.getScriptSnapshot(e),i=r.getLength(),s=r.getText(0,i),o=t.length,u=s.indexOf(t);while(u>=0){var a=u+o;(u<=0||!this.isLetterOrDigit(s.charCodeAt(u-1)))&&(a>=i||!this.isLetterOrDigit(s.charCodeAt(a)))&&n.push(u),u=s.indexOf(t,u+o+1)}return n},n.prototype.getSignatureAtPosition=function(n,i){n=e.switchToForwardSlashes(n);var s=this.compiler.getDocument(n);if(t.SignatureInfoHelpers.isSignatureHelpBlocker(s.syntaxTree().sourceUnit(),i))return this.logger.log("position is not a valid singature help location"),null;var o=t.SignatureInfoHelpers.isInPartiallyWrittenTypeArgumentList(s.syntaxTree(),i);if(o)return this.getTypeParameterSignatureFromPartiallyWrittenExpression(s,i,o);var u=s.sourceUnit(),a=e.ASTHelpers.getAstAtPosition(u,i);if(!a)return null;while(a){if(a.kind()===213||a.kind()===216||r(a)&&i>a.start())break;a=a.parent}if(!a)return null;if(a.kind()!==213&&a.kind()!==216)return this.logger.log("No call expression or generic arguments found for the given position"),null;var f=a,l=f.kind()===216;if(l&&f.argumentList===null)return this.logger.log("No signature help for a object creation expression without arguments"),null;e.Debug.assert(f.argumentList.arguments!==null,"Expected call expression to have arguments, but it did not");var c=f.expression.end()+f.expression.trailingTriviaWidth(),h=f.argumentList.arguments.end()+f.argumentList.arguments.trailingTriviaWidth();if(i<=c||i>h)return this.logger.log("Outside argument list"),null;var p=this.compiler.getCallInformationFromAST(a,s);if(!p||!p.targetSymbol||!p.resolvedSignatures)return this.logger.log("Could not find symbol for call expression"),null;var d=new t.SignatureInfo;return d.formal=t.SignatureInfoHelpers.getSignatureInfoFromSignatureSymbol(p.targetSymbol,p.resolvedSignatures,p.enclosingScopeSymbol,this.compiler),d.actual=t.SignatureInfoHelpers.getActualSignatureInfoFromCallExpression(f,i,o),d.activeFormal=p.resolvedSignatures&&p.candidateSignature?p.resolvedSignatures.indexOf(p.candidateSignature):-1,d.actual===null||d.formal===null||d.activeFormal===null?(this.logger.log("Can't compute actual and/or formal signature of the call expression"),null):d},n.prototype.getTypeParameterSignatureFromPartiallyWrittenExpression=function(n,r,i){var s=n.sourceUnit(),o=e.ASTHelpers.getAstAtPosition(s,i.genericIdentifer.start());if(o===null||o.kind()!==11)return this.logger.log(["getTypeParameterSignatureAtPosition: Unexpected ast found at position:",r,o===null?"ast was null":"ast kind: "+e.SyntaxKind[o.kind()]].join(" ")),null;var u=this.compiler.getSymbolInformationFromAST(o,n);if(!u.symbol)return null;var a=t.SignatureInfoHelpers.isTargetOfObjectCreationExpression(i.genericIdentifer),f=u.symbol.type;if(f.kind===16777216||a&&f.kind===33554432){var l=a?f.getConstructSignatures():f.getCallSignatures(),c=new t.SignatureInfo;return c.formal=t.SignatureInfoHelpers.getSignatureInfoFromSignatureSymbol(u.symbol,l,u.enclosingScopeSymbol,this.compiler),c.actual=t.SignatureInfoHelpers.getActualSignatureInfoFromPartiallyWritenGenericExpression(r,i),c.activeFormal=0,c}if(f.isGeneric()){f.kind===33554432&&(f=f.getAssociatedContainerType());var c=new t.SignatureInfo;return c.formal=t.SignatureInfoHelpers.getSignatureInfoFromGenericSymbol(f,u.enclosingScopeSymbol,this.compiler),c.actual=t.SignatureInfoHelpers.getActualSignatureInfoFromPartiallyWritenGenericExpression(r,i),c.activeFormal=0,c}return null},n.prototype.getDefinitionAtPosition=function(t,n){t=e.switchToForwardSlashes(t);var r=this.getSymbolInfoAtPosition(t,n,!1);if(r===null||r.symbol===null)return null;var i=r.symbol;e.Debug.assert(i.kind!==0&&i.kind!==0&&i.kind!==1,"getDefinitionAtPosition - Invalid symbol kind");if(i.kind===2)return null;var s=i.getDeclarations(),o=i.getDisplayName(),u=this.mapPullElementKind(i.kind,i),a=i.getContainer(),f=a?a.fullName():"",l=a?this.mapPullElementKind(a.kind,a):"",c=[];return!this.tryAddDefinition(u,o,l,f,s,c)&&!this.tryAddSignatures(u,o,l,f,s,c)&&!this.tryAddConstructor(u,o,l,f,s,c)&&this.addDeclarations(u,o,l,f,s,c),c},n.prototype.addDeclarations=function(e,t,n,r,i,s){for(var o=0,u=i.length;o<u;o++)this.addDeclaration(e,t,n,r,i[o],s)},n.prototype.addDeclaration=function(e,n,r,i,s,o){var u=s.ast();o.push(new t.DefinitionInfo(this._getHostFileName(s.fileName()),u.start(),u.end(),e,n,r,i))},n.prototype.tryAddDefinition=function(t,n,r,i,s,o){var u=e.ArrayUtilities.firstOrDefault(s,function(e){var t=e.getSignatureSymbol();return t&&t.isDefinition()});return u?(this.addDeclaration(t,n,r,i,u,o),!0):!1},n.prototype.tryAddSignatures=function(t,n,r,i,s,o){var u=e.ArrayUtilities.where(s,function(e){var t=e.getSignatureSymbol();return t&&!t.isDefinition()});return u.length===0?!1:(this.addDeclaration(t,n,r,i,e.ArrayUtilities.last(u),o),!0)},n.prototype.tryAddConstructor=function(t,n,r,i,s,o){var u=e.ArrayUtilities.where(s,function(e){return e.kind===32768});return u.length===0?!1:(this.addDeclaration(t,n,r,i,e.ArrayUtilities.last(u),o),!0)},n.prototype.getNavigateToItems=function(t){e.Debug.assert(t!==null&&t!==undefined,"The searchValue argument was not supplied or null");var n=t.split(" "),r=new Array(n.length);for(var i=0;i<n.length;i++)n[i]=n[i].trim().toLocaleLowerCase(),r[i]=new RegExp(n[i],"i");var s=[],o=this.compiler.fileNames();for(var i=0,u=o.length;i<u;i++){var a=o[i],f=this.compiler.getCachedTopLevelDeclaration(a);this.findSearchValueInPullDecl(a,[f],s,n,r)}return s},n.prototype.findSearchValueInPullDecl=function(e,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m;for(var g=0,y=n.length;g<y;++g){f=n[g],h=f.getDisplayName(),p=this.mapPullElementKind(f.kind),d=null;for(var b=0,w=i.length;b<w;++b){l=i[b],c=s[b],m=c.exec(h);if(m){if(h.length===l.length&&m.index===0){d=t.MatchKind.exact;break}if(h.length>l.length&&m.index===0){d=t.MatchKind.prefix;break}if(h.length>l.length&&m.index>0){d=t.MatchKind.subString;break}}}if(this.shouldIncludeDeclarationInNavigationItems(f)){v=o?o+"."+h:h;var E=f.ast();d&&(a=new t.NavigateToItem,a.name=h,a.matchKind=d,a.kind=this.mapPullElementKind(f.kind),a.kindModifiers=this.getScriptElementKindModifiersFromDecl(f),a.fileName=this._getHostFileName(e),a.minChar=E.start(),a.limChar=E.end(),a.containerName=o||"",a.containerKind=u||"",r.push(a))}this.isContainerDeclaration(f)&&this.findSearchValueInPullDecl(e,f.getChildDecls(),r,i,s,v,p)}},n.prototype.getScriptElementKindModifiersFromDecl=function(e){var n=[],r=e.flags;return r&1&&n.push(t.ScriptElementKindModifier.exportedModifier),r&8&&n.push(t.ScriptElementKindModifier.ambientModifier),r&4&&n.push(t.ScriptElementKindModifier.publicMemberModifier),r&2&&n.push(t.ScriptElementKindModifier.privateMemberModifier),r&16&&n.push(t.ScriptElementKindModifier.staticModifier),n.length>0?n.join(","):t.ScriptElementKindModifier.none},n.prototype.isContainerDeclaration=function(e){switch(e.kind){case 1:case 4:case 8:case 16:case 32:case 64:return!0}return!1},n.prototype.shouldIncludeDeclarationInNavigationItems=function(e){switch(e.kind){case 1:return!1;case 512:case 4096:return(e.flags&118784)===0;case 67108864:return!0;case 131072:case 16384:return e.name!=="";case 32768:return!1}return this.isContainerDeclaration(e)?!0:!0},n.prototype.getSyntacticDiagnostics=function(t){return t=e.switchToForwardSlashes(t),this.compiler.getSyntacticDiagnostics(t)},n.prototype.getSemanticDiagnostics=function(t){return t=e.switchToForwardSlashes(t),this.compiler.getSemanticDiagnostics(t)},n.prototype._getHostSpecificDiagnosticWithFileName=function(t){return new e.Diagnostic(this._getHostFileName(t.fileName()),t.lineMap(),t.start(),t.length(),t.diagnosticKey(),t.arguments(),t.additionalLocations())},n.prototype.getCompilerOptionsDiagnostics=function(){var e=this,t=function(t){return e.host.resolveRelativePath(t,null)},n=this.compiler.getCompilerOptionsDiagnostics(t);return n.map(function(t){return e._getHostSpecificDiagnosticWithFileName(t)})},n.prototype._getHostFileName=function(e){return e?this.compiler.getCachedHostFileName(e):e},n.prototype.getEmitOutput=function(t){var n=this;t=e.switchToForwardSlashes(t);var r=function(e){return n.host.resolveRelativePath(e,null)},i=this.compiler.getDocument(t),s=i.emitToOwnOutputFile(),o=s?this.getSyntacticDiagnostics(t):this.getAllSyntacticDiagnostics();if(this.containErrors(o))return new e.EmitOutput(1);var u=s?this.getSemanticDiagnostics(t):this.getAllSemanticDiagnostics(),a=this.compiler.emit(t,r);if(a.emitOutputResult==0)if(!this.containErrors(u)){var f=this.compiler.emitDeclarations(t,r);a.outputFiles.push.apply(a.outputFiles,f.outputFiles),e.Debug.assert(f.emitOutputResult==0)}else this.compiler.canEmitDeclarations(t)&&(a.emitOutputResult=3);return a},n.prototype.getAllSyntacticDiagnostics=function(){var e=this,t=[];return this.compiler.fileNames().forEach(function(n){return t.push.apply(t,e.compiler.getSyntacticDiagnostics(n))}),t},n.prototype.getAllSemanticDiagnostics=function(){var e=this,t=[];return this.compiler.fileNames().map(function(n){return t.push.apply(t,e.compiler.getSemanticDiagnostics(n))}),t},n.prototype.containErrors=function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t].info();if(n.category===1)return!0}return!1},n.prototype.getFullNameOfSymbol=function(t,n){var r=t.getContainer();if(e.PullHelpers.isSymbolLocal(t)||t.kind==2048)return t.getScopedName(n,!1,!0);var i=t.kind;return t.kind==2?"":(i==33554432&&(t=t.getAssociatedContainerType()),i!=4096&&i!=67108864&&i!=65536&&i!=8192&&!t.anyDeclHasFlag(1)?t.getScopedName(n,!1,!0):t.fullName(n))},n.prototype.getTypeInfoEligiblePath=function(t,n,r){var i=this.compiler.getDocument(t),s=i.sourceUnit(),o=e.ASTHelpers.getAstAtPosition(s,n,!1,!0);if(o===null)return null;o.kind()===227&&o.parent.kind()===142&&o.parent.parent.kind()===137&&(o=o.parent.parent);switch(o.kind()){default:return null;case 137:var u=o;return!!r&&n>=u.start()&&n<=u.start()+"constructor".length?o:null;case 129:return null;case 212:case 121:case 50:case 14:case 35:case 11:return o}},n.prototype.getTypeAtPosition=function(n,r){n=e.switchToForwardSlashes(n);var i=this.getTypeInfoEligiblePath(n,r,!0);if(!i)return null;var s=this.compiler.getDocument(n),o,u,a,f,l=!1,c,h,p;if(e.ASTHelpers.isDeclarationASTOrDeclarationNameAST(i)){var d=this.compiler.getSymbolInformationFromAST(i,s);if(!d)return null;o=d.ast,u=d.symbol,f=d.enclosingScopeSymbol;if(i.kind()===137||i.kind()===129||i.kind()===218||i.kind()===219||i.kind()===135||e.ASTHelpers.isNameOfFunction(i)||e.ASTHelpers.isNameOfMemberFunction(i)){var v=i.kind()===11?i.parent:i;if(u&&u.kind!=4096){var m=e.PullHelpers.getSignatureForFuncDecl(this.compiler.getDeclForAST(v));l=!0,h=m.signature,c=m.allSignatures}}}else if(e.ASTHelpers.isCallExpression(i)||e.ASTHelpers.isCallExpressionTarget(i)){while(!e.ASTHelpers.isCallExpression(i))i=i.parent;var g=this.compiler.getCallInformationFromAST(i,s);if(!g||!g.targetSymbol)return null;o=g.ast,u=g.targetSymbol,f=g.enclosingScopeSymbol;var y=u.kind==4096||u.kind==512;a=u.type,y&&(a.getName()!=""&&(u=a),y=a.kind!=16&&a.kind!=8388608||a.getName()==""),y||(l=!0,c=g.resolvedSignatures,h=g.candidateSignature,p=g.isConstructorCall)}else{var b=this.compiler.getSymbolInformationFromAST(i,s);if(!b||!b.symbol)return null;o=b.ast,u=b.symbol,f=b.enclosingScopeSymbol;if(u.kind===65536||u.kind==16384)a=u.type,a&&(l=!0,c=a.getCallSignatures())}if(c&&(!h||h.isDefinition()))for(var w=0,E=c.length;w<E;w++){if(E>1&&c[w].isDefinition())continue;h=c[w];break}var S=l?e.PullSignatureSymbol.getSignatureTypeMemberName(h,c,f):u.getTypeNameEx(f,!0),x=this.mapPullElementKind(u.kind,u,!l,l,p),T=h||u,N=T.docComments(!l),C=this.getFullNameOfSymbol(u,f),k=o?o.start():-1,L=o?o.end():-1;return new t.TypeInfo(S,N,C,x,k,L)},n.prototype.getCompletionsAtPosition=function(n,r,i){n=e.switchToForwardSlashes(n);var s=this.compiler.getDocument(n),o=s.sourceUnit();if(t.CompletionHelpers.isCompletionListBlocker(s.syntaxTree().sourceUnit(),r))return this.logger.log("Returning an empty list because completion was blocked."),null;var u=e.ASTHelpers.getAstAtPosition(o,r,!0,!0);u&&u.kind()===11&&u.start()===u.end()&&(u=u.parent);var a=!1;u&&u.kind()===212&&u.expression.end()<r?(a=!0,u=u.expression):u&&u.kind()===121&&u.left.end()<r?(a=!0,u=u.left):u&&u.parent&&u.kind()===11&&u.parent.kind()===212&&u.parent.name===u?(a=!0,u=u.parent.expression):u&&u.parent&&u.kind()===11&&u.parent.kind()===121&&u.parent.right===u&&(a=!0,u=u.parent.left);var f=new e.IdentiferNameHashTable;if(a){var l=this.compiler.getVisibleMemberSymbolsFromAST(u,s);if(!l)return null;i=!0,this.getCompletionEntriesFromSymbols(l,f)}else{var c=t.CompletionHelpers.getContainingObjectLiteralApplicableForCompletion(s.syntaxTree().sourceUnit(),r);if(c){var h=Math.min(r,c.end()),p=e.ASTHelpers.getAstAtPosition(o,h);while(u&&u.kind()!==215)u=u.parent;if(!u||u.kind()!==215)return null;i=!0;var d=this.compiler.getContextualMembersFromAST(u,s);if(d&&d.symbols&&d.symbols.length>0){var v=this.compiler.getVisibleMemberSymbolsFromAST(u,s);this.getCompletionEntriesFromSymbols({symbols:t.CompletionHelpers.filterContextualMembersList(d.symbols,v,n,r),enclosingScopeSymbol:d.enclosingScopeSymbol},f)}}else{i=!1;var m=this.compiler.getVisibleDeclsFromAST(u,s);this.getCompletionEntriesFromDecls(m,f)}}i||this.getCompletionEntriesForKeywords(t.KeywordCompletions.getKeywordCompltions(),f);var g=new t.CompletionInfo;return g.isMemberCompletion=i,g.entries=[],f.map(function(e,t){g.entries.push({name:t.name,kind:t.kind,kindModifiers:t.kindModifiers})},null),this.activeCompletionSession=new t.CompletionSession(n,r,f),g},n.prototype.getCompletionEntriesFromSymbols=function(e,n){for(var r=0,i=e.symbols.length;r<i;r++){var s=e.symbols[r],o=t.CompletionHelpers.getValidCompletionEntryDisplayName(s.getDisplayName());if(!o)continue;var u=s.kind,a=n.lookup(o);if(a&&u&68147712)continue;var f,l=this.mapPullElementKind(u,s,!0),c=this.getScriptElementKindModifiers(s);if(s.isResolved){var h=this.getResolvedCompletionEntryDetailsFromSymbol(s,e.enclosingScopeSymbol);f=new t.ResolvedCompletionEntry(o,l,c,h.typeName,h.fullSymbolName,h.docComments)}else f=new t.DeclReferenceCompletionEntry(o,l,c,s.getDeclarations()[0]);n.addOrUpdate(o,f)}},n.prototype.getCompletionEntriesFromDecls=function(e,n){for(var r=0,i=e?e.length:0;r<i;r++){var s=e[r],o=t.CompletionHelpers.getValidCompletionEntryDisplayName(s.getDisplayName());if(!o)continue;var u=s.kind,a=n.lookup(o);if(a&&u&68147712)continue;var f=this.mapPullElementKind(u,null,!0),l=this.getScriptElementKindModifiersFromFlags(s.flags),c=null,h=s.hasSymbol()&&s.getSymbol(),p=s.getEnclosingDecl(),d=p&&p.hasSymbol()?p.getSymbol():null;if(h&&h.isResolved&&d&&d.isResolved){var v=this.getResolvedCompletionEntryDetailsFromSymbol(h,d);c=new t.ResolvedCompletionEntry(o,f,l,v.typeName,v.fullSymbolName,v.docComments)}else c=new t.DeclReferenceCompletionEntry(o,f,l,s);n.addOrUpdate(o,c)}},n.prototype.getResolvedCompletionEntryDetailsFromSymbol=function(e,t){var n=e.getTypeName(t,!0),r=this.getFullNameOfSymbol(e,t),i=e.type,s=e;i&&i.hasOnlyOverloadCallSignatures()&&(s=i.getCallSignatures()[0]);var o=s.docComments(!0);return{typeName:n,fullSymbolName:r,docComments:o}},n.prototype.getCompletionEntriesForKeywords=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];t.addOrUpdate(i.name,i)}},n.prototype.getCompletionEntryDetails=function(n,r,i){n=e.switchToForwardSlashes(n);if(!this.activeCompletionSession||this.activeCompletionSession.fileName!==n||this.activeCompletionSession.position!==r)return null;var s=this.activeCompletionSession.entries.lookup(i);if(!s)return null;if(!s.isResolved()){var o=s.decl,u=this.compiler.getDocument(n);if(o.fileName()===e.switchToForwardSlashes(n)){o=this.tryFindDeclFromPreviousCompilerVersion(o);if(o){var a=t.CompletionHelpers.getValidCompletionEntryDisplayName(o.getDisplayName()),f=o.kind,l=this.mapPullElementKind(f,null,!0),c=this.getScriptElementKindModifiersFromFlags(o.flags);s=new t.DeclReferenceCompletionEntry(a,l,c,o),this.activeCompletionSession.entries.addOrUpdate(i,s)}}if(o){var h=e.ASTHelpers.getAstAtPosition(u.sourceUnit(),r),p=this.compiler.pullGetDeclInformation(o,h,u);if(!p)return null;var d=p.symbol,v=this.getResolvedCompletionEntryDetailsFromSymbol(d,p.enclosingScopeSymbol);s.resolve(v.typeName,v.fullSymbolName,v.docComments)}}return{name:s.name,kind:s.kind,kindModifiers:s.kindModifiers,type:s.type,fullSymbolName:s.fullSymbolName,docComment:s.docComment}},n.prototype.tryFindDeclFromPreviousCompilerVersion=function(e){var t=e.fileName(),n=[],r=e;while(r)r.kind!==1&&n.unshift(r),r=r.getParentDecl();var i=this.compiler.topLevelDeclaration(t);if(!i)return null;var s=[i],o=[],u=e.kind&4||e.kind&16||e.kind&8||e.kind&64;for(var a=0;a<n.length;a++){var f=n[a],l=[];for(var c=0;c<s.length;c++){o=s[c].searchChildDecls(f.name,f.kind),l.push.apply(l,o);if(o.length&&!u)break}s=l;if(s.length==0)break}return s.length===0?null:s[0]},n.prototype.getModuleOrEnumKind=function(e){if(e){var n=e.getDeclarations();for(var r=0;r<n.length;r++){var i=n[r].kind;if(i==4)return t.ScriptElementKind.moduleElement;if(i==64)return t.ScriptElementKind.enumElement;if(i==512){var s=n[r].flags;if(s&32768)return t.ScriptElementKind.moduleElement;if(s&4096)return t.ScriptElementKind.enumElement}}}return t.ScriptElementKind.unknown},n.prototype.mapPullElementKind=function(n,r,i,s,o){if(o)return t.ScriptElementKind.constructorImplementationElement;if(s)switch(n){case 4:case 32:case 128:case 16:case 8:case 2048:return t.ScriptElementKind.functionElement;case 512:return r&&e.PullHelpers.isSymbolLocal(r)?t.ScriptElementKind.localFunctionElement:t.ScriptElementKind.functionElement;case 4096:return t.ScriptElementKind.memberFunctionElement;case 16384:return r&&e.PullHelpers.isSymbolLocal(r)?t.ScriptElementKind.localFunctionElement:t.ScriptElementKind.functionElement;case 32768:return t.ScriptElementKind.constructorImplementationElement;case 65536:return t.ScriptElementKind.memberFunctionElement;case 131072:return t.ScriptElementKind.localFunctionElement;case 262144:return t.ScriptElementKind.memberGetAccessorElement;case 524288:return t.ScriptElementKind.memberSetAccessorElement;case 1048576:return t.ScriptElementKind.callSignatureElement;case 2097152:return t.ScriptElementKind.constructSignatureElement;case 4194304:return t.ScriptElementKind.indexSignatureElement;case 8192:return t.ScriptElementKind.typeParameterElement;case 2:return t.ScriptElementKind.primitiveType}else switch(n){case 1:return t.ScriptElementKind.scriptElement;case 4:case 32:case 128:return t.ScriptElementKind.moduleElement;case 16:return t.ScriptElementKind.interfaceElement;case 8:return t.ScriptElementKind.classElement;case 64:return t.ScriptElementKind.enumElement;case 512:var u=this.getModuleOrEnumKind(r);if(u!=t.ScriptElementKind.unknown)return u;return r&&e.PullHelpers.isSymbolLocal(r)?t.ScriptElementKind.localVariableElement:t.ScriptElementKind.variableElement;case 2048:return t.ScriptElementKind.parameterElement;case 4096:return t.ScriptElementKind.memberVariableElement;case 16384:return r&&e.PullHelpers.isSymbolLocal(r)?t.ScriptElementKind.localFunctionElement:t.ScriptElementKind.functionElement;case 32768:return i?t.ScriptElementKind.classElement:t.ScriptElementKind.constructorImplementationElement;case 65536:return t.ScriptElementKind.memberFunctionElement;case 131072:return t.ScriptElementKind.localFunctionElement;case 262144:return t.ScriptElementKind.memberGetAccessorElement;case 524288:return t.ScriptElementKind.memberSetAccessorElement;case 1048576:return t.ScriptElementKind.callSignatureElement;case 2097152:return t.ScriptElementKind.constructSignatureElement;case 4194304:return t.ScriptElementKind.indexSignatureElement;case 67108864:return t.ScriptElementKind.memberVariableElement;case 8192:return t.ScriptElementKind.typeParameterElement;case 2:return t.ScriptElementKind.primitiveType}return t.ScriptElementKind.unknown},n.prototype.getScriptElementKindModifiers=function(e){var n=[];return e.anyDeclHasFlag(1)&&n.push(t.ScriptElementKindModifier.exportedModifier),e.anyDeclHasFlag(8)&&n.push(t.ScriptElementKindModifier.ambientModifier),e.anyDeclHasFlag(4)&&n.push(t.ScriptElementKindModifier.publicMemberModifier),e.anyDeclHasFlag(2)&&n.push(t.ScriptElementKindModifier.privateMemberModifier),e.anyDeclHasFlag(16)&&n.push(t.ScriptElementKindModifier.staticModifier),n.length>0?n.join(","):t.ScriptElementKindModifier.none},n.prototype.getScriptElementKindModifiersFromFlags=function(e){var n=[];return e&1&&n.push(t.ScriptElementKindModifier.exportedModifier),e&8&&n.push(t.ScriptElementKindModifier.ambientModifier),e&4&&n.push(t.ScriptElementKindModifier.publicMemberModifier),e&2&&n.push(t.ScriptElementKindModifier.privateMemberModifier),e&16&&n.push(t.ScriptElementKindModifier.staticModifier),n.length>0?n.join(","):t.ScriptElementKindModifier.none},n.prototype.getNameOrDottedNameSpan=function(n,r,i){n=e.switchToForwardSlashes(n);var s=this.getTypeInfoEligiblePath(n,r,!1);if(!s)return null;while(s){if(!e.ASTHelpers.isNameOfMemberAccessExpression(s)&&!e.ASTHelpers.isRightSideOfQualifiedName(s))break;s=s.parent}var o=new t.SpanInfo(s.start(),s.end());return o},n.prototype.getBreakpointStatementAtPosition=function(t,n){t=e.switchToForwardSlashes(t);var r=this.getSyntaxTree(t);return e.Services.Breakpoints.getBreakpointLocation(r,n)},n.prototype.getFormattingEditsForRange=function(t,n,r,i){t=e.switchToForwardSlashes(t);var s=this.getFormattingManager(t,i);return s.formatSelection(n,r)},n.prototype.getFormattingEditsForDocument=function(t,n,r,i){t=e.switchToForwardSlashes(t);var s=this.getFormattingManager(t,i);return s.formatDocument(n,r)},n.prototype.getFormattingEditsOnPaste=function(t,n,r,i){t=e.switchToForwardSlashes(t);var s=this.getFormattingManager(t,i);return s.formatOnPaste(n,r)},n.prototype.getFormattingEditsAfterKeystroke=function(t,n,r,i){t=e.switchToForwardSlashes(t);var s=this.getFormattingManager(t,i);return r==="}"?s.formatOnClosingCurlyBrace(n):r===";"?s.formatOnSemicolon(n):r==="\n"?s.formatOnEnter(n):[]},n.prototype.getFormattingManager=function(t,n){this.formattingRulesProvider==null&&(this.formattingRulesProvider=new e.Services.Formatting.RulesProvider(this.logger)),this.formattingRulesProvider.ensureUpToDate(n);var r=this.getSyntaxTree(t),i=this.compiler.getScriptSnapshot(t),s=e.SimpleText.fromScriptSnapshot(i),o=new e.Services.Formatting.TextSnapshot(s),u=new e.Services.Formatting.FormattingManager(r,o,this.formattingRulesProvider,n);return u},n.prototype.getOutliningRegions=function(n){n=e.switchToForwardSlashes(n);var r=this.getSyntaxTree(n);return t.OutliningElementsCollector.collectElements(r.sourceUnit())},n.prototype.getIndentationAtPosition=function(t,n,r){t=e.switchToForwardSlashes(t);var i=this.getSyntaxTree(t),s=this.compiler.getScriptSnapshot(t),u=e.SimpleText.fromScriptSnapshot(s),a=new e.Services.Formatting.TextSnapshot(u),f=new o(!r.ConvertTabsToSpaces,r.TabSize,r.IndentSize,r.NewLineCharacter);return e.Services.Formatting.SingleTokenIndenter.getIndentationAmount(n,i.sourceUnit(),a,f)},n.prototype.getBraceMatchingAtPosition=function(n,r){n=e.switchToForwardSlashes(n);var i=this.getSyntaxTree(n);return t.BraceMatcher.getMatchSpans(i,r)},n.prototype.getScriptLexicalStructure=function(n){n=e.switchToForwardSlashes(n);var r=this.getSyntaxTree(n),i=[];return t.GetScriptLexicalStructureWalker.getListsOfAllScriptLexicalStructure(i,n,r.sourceUnit()),i},n.prototype.getSyntaxTree=function(t){return t=e.switchToForwardSlashes(t),this._syntaxTreeCache.getCurrentFileSyntaxTree(t)},n}();t.LanguageService=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(e){var t=function(){function e(){}return e.compareSymbolsForLexicalIdentity=function(e,t){if(!e.isAlias()&&e.isContainer()){var n=e;n.getInstanceSymbol()&&(e=n.getInstanceSymbol())}if(!t.isAlias()&&t.isContainer()){var r=t;r.getInstanceSymbol()&&(t=r.getInstanceSymbol())}if(e.kind===t.kind){if(e===t)return!0;if(e.kind===512&&e.name===t.name&&e.getDeclarations()&&e.getDeclarations().length>=1&&t.getDeclarations()&&t.getDeclarations().length>=1){var i=e.getDeclarations()[0],s=t.getDeclarations()[0];return i.getParentDecl()===s.getParentDecl()}if(e.kind===4096&&e.name===t.name&&e.getDeclarations()&&e.getDeclarations().length>=1&&t.getDeclarations()&&t.getDeclarations().length>=1){var i=e.getDeclarations()[0],s=t.getDeclarations()[0],o=i.getParentDecl(),u=s.getParentDecl();if(o.kind===256&&u.kind===256)return o.ast()===u.ast()}return!1}switch(e.kind){case 8:return this.checkSymbolsForDeclarationEquality(e,t);case 4096:if(e.isAccessor()){var a=e.getGetter(),f=e.getSetter();if(a&&a===t)return!0;if(f&&f===t)return!0}return!1;case 16384:if(t.isAccessor()){var a=t.getGetter(),f=t.getSetter();if(a&&a===e)return!0;if(f&&f===e)return!0}return!1;case 32768:return this.checkSymbolsForDeclarationEquality(e,t)}return e===t},e.checkSymbolsForDeclarationEquality=function(e,t){var n=e.getDeclarations(),r=t.getDeclarations();for(var i=0,s=n.length;i<s;i++)for(var o=0,u=r.length;o<u;o++)if(this.declarationsAreSameOrParents(n[i],r[o]))return!0;return!1},e.declarationsAreSameOrParents=function(e,t){var n=e.getParentDecl(),r=t.getParentDecl();return e===t||e===r||n===t||n===r?!0:!1},e}();e.FindReferenceHelpers=t})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){function o(e,t,n){e.log(t);var r=Date.now(),i=n(),s=Date.now();e.log(t+" completed in "+(s-r)+" msec");if(typeof i=="string"){var o=i;o.length>128&&(o=o.substring(0,128)+"..."),e.log("  result.length="+o.length+", result='"+JSON.stringify(o)+"'")}return i}function a(t,n,r){try{var i=o(t,n,r);return JSON.stringify({result:i})}catch(s){return e.Services.logInternalError(t,s),s.description=n,JSON.stringify({error:s})}}var n=function(){function e(e){this.factory=e,e.registerShim(this)}return e.prototype.dispose=function(e){this.factory.unregisterShim(this)},e}();t.ShimBase=n;var r=function(){function t(e){this.scriptSnapshotShim=e,this.lineStartPositions=null}return t.prototype.getText=function(e,t){return this.scriptSnapshotShim.getText(e,t)},t.prototype.getLength=function(){return this.scriptSnapshotShim.getLength()},t.prototype.getLineStartPositions=function(){return this.lineStartPositions==null&&(this.lineStartPositions=JSON.parse(this.scriptSnapshotShim.getLineStartPositions())),this.lineStartPositions},t.prototype.getTextChangeRangeSinceVersion=function(t){var n=this.scriptSnapshotShim.getTextChangeRangeSinceVersion(t);if(n==null)return null;var r=JSON.parse(n);return new e.TextChangeRange(new e.TextSpan(r.span.start,r.span.length),r.newLength)},t}(),s=function(){function e(e){this.shimHost=e}return e.prototype.information=function(){return this.shimHost.information()},e.prototype.debug=function(){return this.shimHost.debug()},e.prototype.warning=function(){return this.shimHost.warning()},e.prototype.error=function(){return this.shimHost.error()},e.prototype.fatal=function(){return this.shimHost.fatal()},e.prototype.log=function(e){this.shimHost.log(e)},e.prototype.getCompilationSettings=function(){var e=this.shimHost.getCompilationSettings();if(e==null||e=="")return null;var t=JSON.parse(e);return t},e.prototype.getScriptFileNames=function(){var e=this.shimHost.getScriptFileNames();return JSON.parse(e)},e.prototype.getScriptSnapshot=function(e){return new r(this.shimHost.getScriptSnapshot(e))},e.prototype.getScriptVersion=function(e){return this.shimHost.getScriptVersion(e)},e.prototype.getScriptIsOpen=function(e){return this.shimHost.getScriptIsOpen(e)},e.prototype.getScriptByteOrderMark=function(e){return this.shimHost.getScriptByteOrderMark(e)},e.prototype.getDiagnosticsObject=function(){return this.shimHost.getDiagnosticsObject()},e.prototype.getLocalizedDiagnosticMessages=function(){var e=this.shimHost.getLocalizedDiagnosticMessages();if(e==null||e=="")return null;try{return JSON.parse(e)}catch(t){return this.log(t.description||"diagnosticMessages.generated.json has invalid JSON format"),null}},e.prototype.resolveRelativePath=function(e,t){return this.shimHost.resolveRelativePath(e,t)},e.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},e.prototype.directoryExists=function(e){return this.shimHost.directoryExists(e)},e.prototype.getParentDirectory=function(e){return this.shimHost.getParentDirectory(e)},e}();t.LanguageServiceShimHostAdapter=s,t.simpleForwardCall=o,t.forwardJSONCall=a;var f=function(n){function r(e,t,r){n.call(this,e),this.host=t,this.languageService=r,this.logger=this.host}return i(r,n),r.prototype.forwardJSONCall=function(t,n){return e.Services.forwardJSONCall(this.logger,t,n)},r.prototype.dispose=function(e){this.logger.log("dispose()"),this.languageService=null,u&&u.CollectGarbage&&(u.CollectGarbage(),this.logger.log("CollectGarbage()")),this.logger=null,n.prototype.dispose.call(this,e)},r.prototype.refresh=function(e){var t=this;this.forwardJSONCall("refresh("+e+")",function(){return t.languageService.refresh(),null})},r.prototype.cleanupSemanticCache=function(){var e=this;this.forwardJSONCall("cleanupSemanticCache()",function(){return e.languageService.cleanupSemanticCache(),null})},r.realizeDiagnosticCategory=function(e){switch(e){case 1:return t.DiagnosticCategory.error;case 0:return t.DiagnosticCategory.warning;case 2:return t.DiagnosticCategory.message;default:return t.DiagnosticCategory.none}},r.realizeDiagnostic=function(e){return{message:e.text(),start:e.start(),length:e.length(),category:r.realizeDiagnosticCategory(e.info().category)}},r.prototype.realizeDiagnosticWithFileName=function(e){return{fileName:e.fileName(),message:e.text(),start:e.start(),length:e.length(),category:r.realizeDiagnosticCategory(e.info().category)}},r.prototype.getSyntacticDiagnostics=function(e){var t=this;return this.forwardJSONCall('getSyntacticDiagnostics("'+e+'")',function(){var n=t.languageService.getSyntacticDiagnostics(e);return n.map(r.realizeDiagnostic)})},r.prototype.getSemanticDiagnostics=function(e){var t=this;return this.forwardJSONCall('getSemanticDiagnostics("'+e+'")',function(){var n=t.languageService.getSemanticDiagnostics(e);return n.map(r.realizeDiagnostic)})},r.prototype.getCompilerOptionsDiagnostics=function(){var e=this;return this.forwardJSONCall("getCompilerOptionsDiagnostics()",function(){var t=e.languageService.getCompilerOptionsDiagnostics();return t.map(function(t){return e.realizeDiagnosticWithFileName(t)})})},r.prototype.getTypeAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getTypeAtPosition("'+e+'", '+t+")",function(){var r=n.languageService.getTypeAtPosition(e,t);return r})},r.prototype.getNameOrDottedNameSpan=function(e,t,n){var r=this;return this.forwardJSONCall('getNameOrDottedNameSpan("'+e+'", '+t+", "+n+")",function(){var i=r.languageService.getNameOrDottedNameSpan(e,t,n);return i})},r.prototype.getBreakpointStatementAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getBreakpointStatementAtPosition("'+e+'", '+t+")",function(){var r=n.languageService.getBreakpointStatementAtPosition(e,t);return r})},r.prototype.getSignatureAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getSignatureAtPosition("'+e+'", '+t+")",function(){var r=n.languageService.getSignatureAtPosition(e,t);return r})},r.prototype.getDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getDefinitionAtPosition("'+e+'", '+t+")",function(){return n.languageService.getDefinitionAtPosition(e,t)})},r.prototype.getBraceMatchingAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getBraceMatchingAtPosition("'+e+'", '+t+")",function(){var r=n.languageService.getBraceMatchingAtPosition(e,t);return r})},r.prototype.getIndentationAtPosition=function(e,t,n){var r=this;return this.forwardJSONCall('getIndentationAtPosition("'+e+'", '+t+")",function(){var i=JSON.parse(n),s=r.languageService.getIndentationAtPosition(e,t,i);return{value:s}})},r.prototype.getReferencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getReferencesAtPosition("'+e+'", '+t+")",function(){return n.languageService.getReferencesAtPosition(e,t)})},r.prototype.getOccurrencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getOccurrencesAtPosition("'+e+'", '+t+")",function(){return n.languageService.getOccurrencesAtPosition(e,t)})},r.prototype.getImplementorsAtPosition=function(e,t){var n=this;return this.forwardJSONCall('getImplementorsAtPosition("'+e+'", '+t+")",function(){return n.languageService.getImplementorsAtPosition(e,t)})},r.prototype.getCompletionsAtPosition=function(e,t,n){var r=this;return this.forwardJSONCall('getCompletionsAtPosition("'+e+'", '+t+", "+n+")",function(){var i=r.languageService.getCompletionsAtPosition(e,t,n);return i})},r.prototype.getCompletionEntryDetails=function(e,t,n){var r=this;return this.forwardJSONCall('getCompletionEntryDetails("'+e+'", '+t+", "+n+")",function(){var i=r.languageService.getCompletionEntryDetails(e,t,n);return i})},r.prototype.getFormattingEditsForRange=function(e,t,n,r){var i=this;return this.forwardJSONCall('getFormattingEditsForRange("'+e+'", '+t+", "+n+")",function(){var s=JSON.parse(r),o=i.languageService.getFormattingEditsForRange(e,t,n,s);return o})},r.prototype.getFormattingEditsForDocument=function(e,t,n,r){var i=this;return this.forwardJSONCall('getFormattingEditsForDocument("'+e+'", '+t+", "+n+")",function(){var s=JSON.parse(r),o=i.languageService.getFormattingEditsForDocument(e,t,n,s);return o})},r.prototype.getFormattingEditsOnPaste=function(e,t,n,r){var i=this;return this.forwardJSONCall('getFormattingEditsOnPaste("'+e+'", '+t+", "+n+")",function(){var s=JSON.parse(r),o=i.languageService.getFormattingEditsOnPaste(e,t,n,s);return o})},r.prototype.getFormattingEditsAfterKeystroke=function(e,t,n,r){var i=this;return this.forwardJSONCall('getFormattingEditsAfterKeystroke("'+e+'", '+t+', "'+n+'")',function(){var s=JSON.parse(r),o=i.languageService.getFormattingEditsAfterKeystroke(e,t,n,s);return o})},r.prototype.getNavigateToItems=function(e){var t=this;return this.forwardJSONCall('getNavigateToItems("'+e+'")',function(){var n=t.languageService.getNavigateToItems(e),r=t._navigateToItemsToString(n);return r})},r.prototype.getScriptLexicalStructure=function(e){var t=this;return this.forwardJSONCall('getScriptLexicalStructure("'+e+'")',function(){var n=t.languageService.getScriptLexicalStructure(e),r=t._navigateToItemsToString(n);return r})},r.prototype.getOutliningRegions=function(e){var t=this;return this.forwardJSONCall('getOutliningRegions("'+e+'")',function(){var n=t.languageService.getOutliningRegions(e);return n})},r.prototype.getEmitOutput=function(e){var t=this;return this.forwardJSONCall('getEmitOutput("'+e+'")',function(){var n=t.languageService.getEmitOutput(e);return n})},r.prototype._navigateToItemsToString=function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];t.push({name:r.name,kind:r.kind,kindModifiers:r.kindModifiers,containerName:r.containerName,containerKind:r.containerKind,matchKind:r.matchKind,fileName:r.fileName,minChar:r.minChar,limChar:r.limChar,additionalSpans:r.additionalSpans?r.additionalSpans.map(function(e){return{start:e.minChar,end:e.limChar}}):undefined})}return t},r}(n);t.LanguageServiceShim=f;var l=function(t){function n(n,r){t.call(this,n),this.host=r,this.classifier=new e.Services.Classifier(this.host)}return i(n,t),n.prototype.getClassificationsForLine=function(e,t){var n=this.classifier.getClassificationsForLine(e,t),r=n.entries,i="";for(var s=0;s<r.length;s++)i+=r[s].length+"\n",i+=r[s].classification+"\n";return i+=n.finalLexState,i},n}(n);t.ClassifierShim=l;var c=function(t){function n(n,r){t.call(this,n),this.host=r,this.logger=this.host.logger,this.services=new e.Services.CoreServices(this.host)}return i(n,t),n.prototype.forwardJSONCall=function(t,n){return e.Services.forwardJSONCall(this.logger,t,n)},n.prototype.getPreProcessedFileInfo=function(e,t){var n=this;return this.forwardJSONCall('getPreProcessedFileInfo("'+e+'")',function(){var r=n.services.getPreProcessedFileInfo(e,t);return r})},n.prototype.getDefaultCompilationSettings=function(){var e=this;return this.forwardJSONCall("getDefaultCompilationSettings()",function(){var t=e.services.getDefaultCompilationSettings();return t})},n.prototype.dumpMemory=function(e){var t=this;return this.forwardJSONCall("dumpMemory()",function(){return t.services.dumpMemory()})},n.prototype.getMemoryInfo=function(e){var t=this;return this.forwardJSONCall("getMemoryInfo()",function(){var e=t.services.getMemoryInfo();return e})},n}(n);t.CoreServicesShim=c})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(t){function n(){t.call(this,n.MaximumDepth),this.inObjectLiteralExpression=!1,this.elements=[]}return i(n,t),n.prototype.visitClassDeclaration=function(e){this.addOutlineRange(e,e.openBraceToken,e.closeBraceToken),t.prototype.visitClassDeclaration.call(this,e)},n.prototype.visitInterfaceDeclaration=function(e){this.addOutlineRange(e,e.body,e.body),t.prototype.visitInterfaceDeclaration.call(this,e)},n.prototype.visitModuleDeclaration=function(e){this.addOutlineRange(e,e.openBraceToken,e.closeBraceToken),t.prototype.visitModuleDeclaration.call(this,e)},n.prototype.visitEnumDeclaration=function(e){this.addOutlineRange(e,e.openBraceToken,e.closeBraceToken),t.prototype.visitEnumDeclaration.call(this,e)},n.prototype.visitFunctionDeclaration=function(e){this.addOutlineRange(e,e.block,e.block),t.prototype.visitFunctionDeclaration.call(this,e)},n.prototype.visitFunctionExpression=function(e){this.addOutlineRange(e,e.block,e.block),t.prototype.visitFunctionExpression.call(this,e)},n.prototype.visitConstructorDeclaration=function(e){this.addOutlineRange(e,e.block,e.block),t.prototype.visitConstructorDeclaration.call(this,e)},n.prototype.visitMemberFunctionDeclaration=function(e){this.addOutlineRange(e,e.block,e.block),t.prototype.visitMemberFunctionDeclaration.call(this,e)},n.prototype.visitGetAccessor=function(e){this.inObjectLiteralExpression||this.addOutlineRange(e,e.block,e.block),t.prototype.visitGetAccessor.call(this,e)},n.prototype.visitSetAccessor=function(e){this.inObjectLiteralExpression||this.addOutlineRange(e,e.block,e.block),t.prototype.visitSetAccessor.call(this,e)},n.prototype.visitObjectLiteralExpression=function(e){var n=this.inObjectLiteralExpression;this.inObjectLiteralExpression=!0,t.prototype.visitObjectLiteralExpression.call(this,e),this.inObjectLiteralExpression=n},n.prototype.addOutlineRange=function(t,n,r){if(n&&r){var i=this.position()+e.Syntax.childOffset(t,n),s=this.position()+e.Syntax.childOffset(t,r)+r.leadingTriviaWidth()+r.width();this.elements.push(e.TextSpan.fromBounds(i,s))}},n.collectElements=function(e){var t=new n;return e.accept(t),t.elements},n.MaximumDepth=10,n}(e.DepthLimitedWalker);t.OutliningElementsCollector=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(){function t(){}return t.getIndentation=function(e,n,r,i){var s=0,o=e.findToken(r),u=o;o.token().kind()===10?u=o.previousToken():t.belongsToBracket(n,o,r)&&(u=o.parent());if(u===null)return s;if(u.kind()===14||u.kind()===12)return s;var a=u.element(),f=u.parent();while(f!==null){if(f.fullStart()!==u.fullStart())if(t.isInContainerNode(f.element(),a))s+=i.IndentSize;else{var l=t.getCustomListIndentation(f.element(),a);if(l!==-1)return s+l}u=f,a=f.element(),f=f.parent()}return s},t.belongsToBracket=function(t,n,r){switch(n.token().kind()){case 70:case 71:case 72:case 73:case 74:case 75:if(r<n.start()){var i=t.getText(r,n.start());for(var s=0;s<i.length;s++)if(e.CharacterInfo.isLineTerminator(i.charCodeAt(s)))return!1}return!0}return!1},t.isInContainerNode=function(e,t){switch(e.kind()){case 131:case 130:case 132:case 133:case 146:case 151:case 233:case 234:return!0;case 122:return!0;case 128:return t.kind()!==122;case 129:case 135:case 139:case 140:case 222:case 236:case 237:case 129:case 137:case 154:case 155:case 158:case 161:case 163:case 147:case 235:return t.kind()!==146;case 159:return!1;default:return e.isNode()&&e.isStatement()}},t.getCustomListIndentation=function(e,n){switch(e.kind()){case 2:for(var r=0,i=e.childCount();r<i;r++){var s=e.childAt(r);if(s!==null&&s===n)return t.getListItemIndentation(e,r-1)}break;case 226:var o=e,u=o.arguments;if(u!==null&&o.closeParenToken===n)return t.getListItemIndentation(u,u.childCount()-1);break;case 227:var a=e,f=a.parameters;if(f!==null&&a.closeParenToken===n)return t.getListItemIndentation(f,f.childCount()-1);break;case 228:var l=e,c=l.typeArguments;if(c!==null&&l.greaterThanToken===n)return t.getListItemIndentation(c,c.childCount()-1);break;case 229:var h=e,p=h.typeParameters;if(p!==null&&h.greaterThanToken===n)return t.getListItemIndentation(p,p.childCount()-1)}return-1},t.getListItemIndentation=function(e,t){for(var n=t;n>0;n--){var r=e.childAt(n),i=e.childAt(n-1);if(r!==null&&r.leadingTrivia().hasNewLine()||i!==null&&i.trailingTrivia().hasNewLine())return r.leadingTriviaWidth()}return-1},t}();t.Indenter=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){(function(n){function r(e){var n=[];for(var r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];if(!e)return null;if(n.length==0)return new t.SpanInfo(e.start(),e.end());var i,s;for(var o=0;o<n.length;o++){var u=n[o];u&&(i==undefined&&(i=e.childStart(u)),s=e.childEnd(u))}return new t.SpanInfo(i,s)}function i(e,n){return new t.SpanInfo(e.start(),n)}function o(t,n){if(e.isDTSFile(t.fileName()))return null;var r=t.sourceUnit(),i=r.findToken(n),o=t.lineMap(),u=o.getLineNumberFromPosition(n),a=o.getLineNumberFromPosition(i.start());if(u<a)return null;var f=new s(u,o);return f.breakpointSpanOf(i)}var s=function(){function t(e,t){this.posLine=e,this.lineMap=t}return t.prototype.breakpointSpanOfToken=function(e){switch(e.token().tokenKind){case 70:return this.breakpointSpanOfOpenBrace(e);case 71:return this.breakpointSpanOfCloseBrace(e);case 79:return this.breakpointSpanOfComma(e);case 78:case 10:return this.breakpointSpanIfStartsOnSameLine(e.previousToken());case 73:return this.breakpointSpanOfCloseParen(e);case 22:var t=e.parent();if(t&&t.kind()==161)return this.breakpointSpanIfStartsOnSameLine(e.nextToken())}return this.breakpointSpanOfContainingNode(e)},t.prototype.breakpointSpanOfOpenBrace=function(e){var t=e.containingNode();if(t){var n=t;t&&t.kind()==146&&(t=t.containingNode(),t||(t=n));switch(t.kind()){case 146:if(!this.canHaveBreakpointInBlock(t))return null;return this.breakpointSpanOfFirstStatementInBlock(t);case 130:case 131:case 129:case 137:case 135:case 139:case 140:case 222:case 218:case 219:if(!this.canHaveBreakpointInDeclaration(t))return null;return this.posLine!=this.lineMap.getLineNumberFromPosition(t.start())?this.breakpointSpanOfFirstChildOfSyntaxList(this.getSyntaxListOfDeclarationWithElements(t)):this.breakpointSpanOf(t);case 132:if(!this.canHaveBreakpointInDeclaration(t))return null;return this.posLine!=this.lineMap.getLineNumberFromPosition(t.start())?this.breakpointSpanOfFirstEnumElement(t):this.breakpointSpanOf(t);case 147:case 155:case 158:case 236:return this.posLine!=this.lineMap.getLineNumberFromPosition(t.start())?this.breakpointSpanOfFirstStatementInBlock(n):this.breakpointSpanOf(t);case 161:return this.breakpointSpanOfFirstStatementInBlock(n);case 154:return this.posLine!=this.lineMap.getLineNumberFromPosition(t.start())?this.breakpointSpanOfFirstStatementInBlock(n):this.breakpointSpanOf(e.previousToken());case 235:case 233:case 234:case 163:case 159:case 237:return this.breakpointSpanOfFirstStatementInBlock(n);case 151:return this.posLine!=this.lineMap.getLineNumberFromPosition(t.start())?this.breakpointSpanOfFirstStatementOfFirstCaseClause(t):this.breakpointSpanOf(t)}}return null},t.prototype.breakpointSpanOfCloseBrace=function(e){var t=e.containingNode();if(t){var n=t;t.kind()==146&&(t=t.containingNode(),t||(t=n));switch(t.kind()){case 146:if(!this.canHaveBreakpointInBlock(t))return null;return this.breakpointSpanOfLastStatementInBlock(t);case 130:if(!this.canHaveBreakpointInDeclaration(t))return null;var i=t.node();return i.moduleElements&&i.moduleElements.childCount()>0?r(e):null;case 131:case 129:case 137:case 135:case 139:case 140:case 222:if(!this.canHaveBreakpointInDeclaration(t))return null;return r(e);case 132:if(!this.canHaveBreakpointInDeclaration(t))return null;return r(e);case 147:case 235:case 155:case 154:case 158:case 161:case 233:case 234:case 163:case 159:case 236:case 237:case 218:case 219:return this.breakpointSpanOfLastStatementInBlock(n);case 151:return this.breakpointSpanOfLastStatementOfLastCaseClause(t)}}return null},t.prototype.breakpointSpanOfComma=function(e){var t=e.parent();if(t&&t.element().isSeparatedList()){var n=t.parent();if(n)switch(n.kind()){case 224:case 132:case 227:var r=t.childIndex(e.token());if(r>0){var i=t.childAt(r-1);return this.breakpointSpanOf(i)}if(n.kind()==132)return null}}return this.breakpointSpanOfContainingNode(e)},t.prototype.breakpointSpanOfCloseParen=function(e){var t=e.parent();if(t)switch(t.kind()){case 154:case 227:return this.breakpointSpanOf(e.previousToken())}return this.breakpointSpanOfContainingNode(e)},t.prototype.canHaveBreakpointInBlock=function(t){if(!t||e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return!1;var n=t.node();return n.statements&&n.statements.childCount()!=0},t.prototype.breakpointSpanOfFirstStatementInBlock=function(e){if(!e)return null;var t=e.node(),n=e.getPositionedChild(t.statements);if(!n||n.childCount()==0)return null;var r=n.childAt(0);return r&&r.kind()==146?this.canHaveBreakpointInBlock(r)?this.breakpointSpanOfFirstStatementInBlock(r):null:this.breakpointSpanOf(r)},t.prototype.breakpointSpanOfLastStatementInBlock=function(e){if(!e)return null;var t=e.node(),n=e.getPositionedChild(t.statements);if(!n||n.childCount()==0)return null;var r=n.childAt(n.childCount()-1);return r&&r.kind()==146?this.canHaveBreakpointInBlock(r)?this.breakpointSpanOfLastStatementInBlock(r):null:this.breakpointSpanOf(r)},t.prototype.breakpointSpanOfFirstChildOfSyntaxList=function(e){if(!e)return null;var t=e.list();if(t.childCount()==0)return null;var n=e.childAt(0);return n&&n.kind()==146?this.canHaveBreakpointInBlock(n)?this.breakpointSpanOfFirstStatementInBlock(n):null:this.breakpointSpanOf(n)},t.prototype.breakpointSpanOfLastChildOfSyntaxList=function(e){if(!e)return null;var t=e.list();if(t.childCount()==0)return null;var n=e.childAt(0);return n&&n.kind()==146?this.canHaveBreakpointInBlock(n)?this.breakpointSpanOfLastStatementInBlock(n):null:this.breakpointSpanOf(n)},t.prototype.breakpointSpanOfNode=function(e){var t=e.node();switch(t.kind()){case 130:case 131:case 129:case 137:case 135:case 139:case 140:case 222:return this.breakpointSpanOfDeclarationWithElements(e);case 225:return this.breakpointSpanOfVariableDeclarator(e);case 224:return this.breakpointSpanOfVariableDeclaration(e);case 148:return this.breakpointSpanOfVariableStatement(e);case 242:return this.breakpointSpanOfParameter(e);case 136:return this.breakpointSpanOfMemberVariableDeclaration(e);case 133:return this.breakpointSpanOfImportDeclaration(e);case 132:return this.breakpointSpanOfEnumDeclaration(e);case 243:return this.breakpointSpanOfEnumElement(e);case 147:return this.breakpointSpanOfIfStatement(e);case 235:return this.breakpointSpanOfElseClause(e);case 155:return this.breakpointSpanOfForInStatement(e);case 154:return this.breakpointSpanOfForStatement(e);case 158:return this.breakpointSpanOfWhileStatement(e);case 161:return this.breakpointSpanOfDoStatement(e);case 151:return this.breakpointSpanOfSwitchStatement(e);case 233:return this.breakpointSpanOfCaseSwitchClause(e);case 234:return this.breakpointSpanOfDefaultSwitchClause(e);case 163:return this.breakpointSpanOfWithStatement(e);case 159:return this.breakpointSpanOfTryStatement(e);case 236:return this.breakpointSpanOfCatchClause(e);case 237:return this.breakpointSpanOfFinallyClause(e);case 218:return this.breakpointSpanOfParenthesizedArrowFunctionExpression(e);case 219:return this.breakpointSpanOfSimpleArrowFunctionExpression(e);default:return t.isStatement()?this.breakpointSpanOfStatement(e):this.breakpointOfExpression(e)}},t.prototype.isExpressionOfArrowExpressions=function(e){if(!e)return!1;var t=e.parent();if(t){if(t.kind()==218){var n=e.element(),r=t.element(),i=t.getPositionedChild(r.expression);return i&&i.element()==n}if(t.kind()==219){var n=e.element(),s=t.element(),o=t.getPositionedChild(s.expression);return o&&o.element()==n}if(t.kind()==173)return this.isExpressionOfArrowExpressions(t)}return!1},t.prototype.isInitializerOfForStatement=function(e){if(!e)return!1;var t=e.parent();if(t&&t.kind()==154){var n=e.element(),r=t.element(),i=t.getPositionedChild(r.initializer);return i&&i.element()==n}return t&&t.kind()==173?this.isInitializerOfForStatement(t):!1},t.prototype.isConditionOfForStatement=function(e){if(!e)return!1;var t=e.parent();if(t&&t.kind()==154){var n=e.element(),r=t.element(),i=t.getPositionedChild(r.condition);return i&&i.element()==n}return t&&t.kind()==173?this.isConditionOfForStatement(t):!1},t.prototype.isIncrememtorOfForStatement=function(e){if(!e)return!1;var t=e.parent();if(t&&t.kind()==154){var n=e.element(),r=t.element(),i=t.getPositionedChild(r.incrementor);return i&&i.element()==n}return t&&t.kind()==173?this.isIncrememtorOfForStatement(t):!1},t.prototype.breakpointOfLeftOfCommaExpression=function(e){var t=e.node();return this.breakpointSpanOf(e.getPositionedChild(t.left))},t.prototype.breakpointOfExpression=function(e){if(this.isInitializerOfForStatement(e)||this.isConditionOfForStatement(e)||this.isIncrememtorOfForStatement(e))return e.kind()==173?this.breakpointOfLeftOfCommaExpression(e):r(e);if(this.isExpressionOfArrowExpressions(e))return e.kind()==173?this.breakpointOfLeftOfCommaExpression(e):r(e);if(e.kind()==134){var t=e.node();return r(e,t.exportKeyword,t.equalsToken,t.identifier)}return this.breakpointSpanOfContainingNode(e)},t.prototype.breakpointSpanOfStatement=function(e){var t=e.node();if(t.kind()==156)return null;var n=e.containingNode();if(n&&n.node().isStatement()){var i=!1;switch(n.kind()){case 130:case 131:case 129:case 137:case 135:case 139:case 140:case 146:case 147:case 235:case 155:case 154:case 158:case 161:case 151:case 233:case 234:case 163:case 159:case 236:case 237:case 146:i=!0}if(!i)return this.breakpointSpanOfContainingNode(e)}switch(t.kind()){case 149:var s=t;return r(e.getPositionedChild(s.expression));case 150:var o=t;return r(e,o.returnKeyword,o.expression);case 157:var u=t;return r(e,u.throwKeyword,u.expression);case 152:var a=t;return r(e,a.breakKeyword,a.identifier);case 153:var f=t;return r(e,f.continueKeyword,f.identifier);case 162:var l=t;return r(e.getPositionedChild(l.debuggerKeyword));case 160:var c=t;return this.breakpointSpanOf(e.getPositionedChild(c.statement))}return null},t.prototype.getSyntaxListOfDeclarationWithElements=function(t){var n=t.node(),r,i;switch(n.kind()){case 130:r=n.moduleElements;break;case 131:r=n.classElements;break;case 129:i=n.block;break;case 137:i=n.block;break;case 135:i=n.block;break;case 139:i=n.block;break;case 140:i=n.block;break;case 222:i=n.block;break;case 218:i=n.block;break;case 219:i=n.block;break;default:throw e.Errors.argument("positionNode","unknown node kind in getSyntaxListOfDeclarationWithElements")}var s=t;return i&&(s=t.getPositionedChild(i),r=i.statements),s.getPositionedChild(r)},t.prototype.canHaveBreakpointInDeclaration=function(t){return t&&!e.SyntaxUtilities.isAmbientDeclarationSyntax(t)},t.prototype.breakpointSpanOfDeclarationWithElements=function(e){if(!this.canHaveBreakpointInDeclaration(e))return null;var t=e.node(),n=e.node();return t.isModuleElement()&&e.containingNode().kind()!=120||t.isClassElement()||n.kind()==130&&n.name&&n.name.kind()==121?r(e):this.breakpointSpanOfFirstChildOfSyntaxList(this.getSyntaxListOfDeclarationWithElements(e))},t.prototype.canHaveBreakpointInVariableDeclarator=function(t){if(!t||e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return!1;var n=t.node();return!!n.equalsValueClause},t.prototype.breakpointSpanOfVariableDeclarator=function(e){if(!this.canHaveBreakpointInVariableDeclarator(e))return null;var t=e.containingNode();if(t&&t.kind()==224){var n=e.parent();return n&&n.list().childAt(0)==e.node()?this.breakpointSpanOfVariableDeclaration(t):this.canHaveBreakpointInVariableDeclarator(e)?r(e):null}return t?this.breakpointSpanOfMemberVariableDeclaration(t):null},t.prototype.canHaveBreakpointInVariableDeclaration=function(t){if(!t||e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return!1;var n=t.node(),r=t.getPositionedChild(n.variableDeclarators);if(!r||r.childCount()==0)return!1;var i=r.childAt(0);return i&&i.element().isNode()?this.canHaveBreakpointInVariableDeclarator(r.childAt(0)):!1},t.prototype.breakpointSpanOfVariableDeclaration=function(e){if(!this.canHaveBreakpointInDeclaration(e))return null;var t=e.containingNode(),n=e.node(),r=e.getPositionedChild(n.variableDeclarators),s=r.childCount();return t&&t.kind()==148?this.breakpointSpanOfVariableStatement(t):this.canHaveBreakpointInVariableDeclaration(e)?i(e,r.childEndAt(0)):null},t.prototype.canHaveBreakpointInVariableStatement=function(t){if(!t||e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return!1;var n=t.node();return this.canHaveBreakpointInVariableDeclaration(t.getPositionedChild(n.variableDeclaration))},t.prototype.breakpointSpanOfVariableStatement=function(e){if(!this.canHaveBreakpointInVariableStatement(e))return null;var t=e.node(),n=e.getPositionedChild(t.variableDeclaration),r=n.node(),s=n.getPositionedChild(r.variableDeclarators);return i(e,s.childEndAt(0))},t.prototype.breakpointSpanOfParameter=function(t){if(e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return null;var n=t.node();return n.dotDotDotToken||n.equalsValueClause||n.modifiers.childCount()>0?r(t):null},t.prototype.breakpointSpanOfMemberVariableDeclaration=function(t){if(e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return null;var n=t.node();return this.canHaveBreakpointInVariableDeclarator(t.getPositionedChild(n.variableDeclarator))?r(t,n.modifiers,n.variableDeclarator):null},t.prototype.breakpointSpanOfImportDeclaration=function(t){if(e.SyntaxUtilities.isAmbientDeclarationSyntax(t))return null;var n=t.node();return r(t,n.modifiers,n.importKeyword,n.identifier,n.equalsToken,n.moduleReference)},t.prototype.breakpointSpanOfEnumDeclaration=function(e){return this.canHaveBreakpointInDeclaration(e)?r(e):null},t.prototype.breakpointSpanOfFirstEnumElement=function(e){var t=e.node(),n=e.getPositionedChild(t.enumElements);return n&&n.childCount()?this.breakpointSpanOf(n.childAt(0)):null},t.prototype.breakpointSpanOfEnumElement=function(t){return e.SyntaxUtilities.isAmbientDeclarationSyntax(t)?null:r(t)},t.prototype.breakpointSpanOfIfStatement=function(e){var t=e.node();return r(e,t.ifKeyword,t.openParenToken,t.condition,t.closeParenToken)},t.prototype.breakpointSpanOfElseClause=function(e){var t=e.node();return this.breakpointSpanOf(e.getPositionedChild(t.statement))},t.prototype.breakpointSpanOfForInStatement=function(e){var t=e.node();return r(e,t.forKeyword,t.openParenToken,t.variableDeclaration,t.left,t.inKeyword,t.expression,t.closeParenToken)},t.prototype.breakpointSpanOfForStatement=function(e){var t=e.node();return this.breakpointSpanOf(e.getPositionedChild(t.variableDeclaration?t.variableDeclaration:t.initializer))},t.prototype.breakpointSpanOfWhileStatement=function(e){var t=e.node();return r(e,t.whileKeyword,t.openParenToken,t.condition,t.closeParenToken)},t.prototype.breakpointSpanOfDoStatement=function(e){var t=e.node();return r(e,t.whileKeyword,t.openParenToken,t.condition,t.closeParenToken)},t.prototype.breakpointSpanOfSwitchStatement=function(e){var t=e.node();return r(e,t.switchKeyword,t.openParenToken,t.expression,t.closeParenToken)},t.prototype.breakpointSpanOfFirstStatementOfFirstCaseClause=function(e){var t=e.node();if(t.switchClauses&&t.switchClauses.childCount()==0)return null;var n=e.getPositionedChild(t.switchClauses);if(n.childCount()==0)return null;var r=n.childAt(0),i=null;if(r&&r.kind()==233){var s=r.node();i=s.statements}else{if(!r||r.kind()!=234)return null;var o=r.node();i=o.statements}return this.breakpointSpanOfFirstChildOfSyntaxList(r.getPositionedChild(i))},t.prototype.breakpointSpanOfLastStatementOfLastCaseClause=function(e){var t=e.node();if(t.switchClauses&&t.switchClauses.childCount()==0)return null;var n=e.getPositionedChild(t.switchClauses);if(n.childCount()==0)return null;var r=n.childAt(n.childCount()-1),i=null;if(r&&r.kind()==233){var s=r.node();i=s.statements}else{if(!r||r.kind()!=234)return null;var o=r.node();i=o.statements}return this.breakpointSpanOfLastChildOfSyntaxList(r.getPositionedChild(i))},t.prototype.breakpointSpanOfCaseSwitchClause=function(e){var t=e.node();return this.breakpointSpanOfFirstChildOfSyntaxList(e.getPositionedChild(t.statements))},t.prototype.breakpointSpanOfDefaultSwitchClause=function(e){var t=e.node();return this.breakpointSpanOfFirstChildOfSyntaxList(e.getPositionedChild(t.statements))},t.prototype.breakpointSpanOfWithStatement=function(e){var t=e.node();return this.breakpointSpanOf(e.getPositionedChild(t.statement))},t.prototype.breakpointSpanOfTryStatement=function(e){var t=e.node();return this.breakpointSpanOfFirstStatementInBlock(e.getPositionedChild(t.block))},t.prototype.breakpointSpanOfCatchClause=function(e){var t=e.node();return r(e,t.catchKeyword,t.openParenToken,t.identifier,t.typeAnnotation,t.closeParenToken)},t.prototype.breakpointSpanOfFinallyClause=function(e){var t=e.node();return this.breakpointSpanOfFirstStatementInBlock(e.getPositionedChild(t.block))},t.prototype.breakpointSpanOfParenthesizedArrowFunctionExpression=function(e){var t=e.node();return t.block?this.breakpointSpanOfFirstStatementInBlock(e.getPositionedChild(t.block)):this.breakpointSpanOf(e.getPositionedChild(t.expression))},t.prototype.breakpointSpanOfSimpleArrowFunctionExpression=function(e){var t=e.node();return t.block?this.breakpointSpanOfFirstStatementInBlock(e.getPositionedChild(t.block)):this.breakpointSpanOf(e.getPositionedChild(t.expression))},t.prototype.breakpointSpanOfContainingNode=function(e){return this.breakpointSpanOf(e.containingNode())},t.prototype.breakpointSpanIfStartsOnSameLine=function(e){return e&&this.posLine==this.lineMap.getLineNumberFromPosition(e.start())?this.breakpointSpanOf(e):null},t.prototype.breakpointSpanOf=function(e){if(!e)return null;for(var t=e.containingNode();t!=null;t=t.containingNode())if(t.kind()==244)return this.breakpointSpanIfStartsOnSameLine(t);var n=e.element();return n.isNode()?this.breakpointSpanOfNode(e):n.isToken()?this.breakpointSpanOfToken(e):this.breakpointSpanOfContainingNode(e)},t}();n.getBreakpointLocation=o})(t.Breakpoints||(t.Breakpoints={}));var n=t.Breakpoints})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(n){function r(e){n.call(this),this.fileName=e,this.nameStack=[],this.kindStack=[],this.currentMemberVariableDeclaration=null,this.currentVariableStatement=null,this.currentInterfaceDeclaration=null,this.parentScopes=[],this.currentScope=this.createScope()}return i(r,n),r.prototype.createScope=function(){return{items:e.createIntrinsicsObject(),childScopes:e.createIntrinsicsObject(),childScopeNames:[],itemNames:[]}},r.prototype.pushNewContainerScope=function(t,n){e.Debug.assert(t,"No scope name provided");var r=n+"+"+t;this.nameStack.push(t),this.kindStack.push(n);var i=this.currentScope;this.parentScopes.push(i);var s=i.childScopes[r];return s||(s=this.createScope(),i.childScopes[r]=s,i.childScopeNames.push(r)),this.currentScope=s,i},r.prototype.popScope=function(){e.Debug.assert(this.parentScopes.length>0,"No parent scopes to return to"),this.currentScope=this.parentScopes.pop(),this.kindStack.pop(),this.nameStack.pop()},r.prototype.collectItems=function(e,t){var n=this;typeof t=="undefined"&&(t=this.currentScope),t.itemNames.forEach(function(n){e.push(t.items[n])}),t.childScopeNames.forEach(function(r){n.collectItems(e,t.childScopes[r])})},r.getListsOfAllScriptLexicalStructure=function(e,t,n){var i=new r(t);n.accept(i),i.collectItems(e)},r.prototype.createItem=function(n,r,i,s){var o=i+"+"+s;if(this.currentScope.items[o]!==undefined){this.addAdditionalSpan(n,o);return}var u=new t.NavigateToItem;u.name=s,u.kind=i,u.matchKind=t.MatchKind.exact,u.fileName=this.fileName,u.kindModifiers=this.getKindModifiers(r),u.minChar=this.position()+n.leadingTriviaWidth(),u.limChar=u.minChar+n.width(),u.containerName=this.nameStack.join("."),u.containerKind=this.kindStack.length===0?"":e.ArrayUtilities.last(this.kindStack),this.currentScope.items[o]=u,this.currentScope.itemNames.push(o)},r.prototype.addAdditionalSpan=function(n,r){var i=this.currentScope.items[r];e.Debug.assert(i!==undefined);var s=this.position()+n.leadingTriviaWidth(),o=new t.SpanInfo(s,s+n.width());i.additionalSpans?i.additionalSpans.push(o):i.additionalSpans=[o]},r.prototype.getKindModifiers=function(n){var r=[];return e.SyntaxUtilities.containsToken(n,47)&&r.push(t.ScriptElementKindModifier.exportedModifier),e.SyntaxUtilities.containsToken(n,63)&&r.push(t.ScriptElementKindModifier.ambientModifier),e.SyntaxUtilities.containsToken(n,57)&&r.push(t.ScriptElementKindModifier.publicMemberModifier),e.SyntaxUtilities.containsToken(n,55)&&r.push(t.ScriptElementKindModifier.privateMemberModifier),e.SyntaxUtilities.containsToken(n,58)&&r.push(t.ScriptElementKindModifier.staticModifier),r.length>0?r.join(","):t.ScriptElementKindModifier.none},r.prototype.visitModuleDeclaration=function(e){var t=this.getModuleNames(e);this.visitModuleDeclarationWorker(e,t,0)},r.prototype.visitModuleDeclarationWorker=function(r,i,s){if(s===i.length)n.prototype.visitModuleDeclaration.call(this,r);else{var o=s===0?r.modifiers:e.Syntax.list([e.Syntax.token(47)]),u=i[s],a=t.ScriptElementKind.moduleElement;this.createItem(r,r.modifiers,a,u),this.pushNewContainerScope(u,a),this.visitModuleDeclarationWorker(r,i,s+1),this.popScope()}},r.prototype.getModuleNames=function(e){var t=[];return e.stringLiteral?t.push(e.stringLiteral.text()):this.getModuleNamesHelper(e.name,t),t},r.prototype.getModuleNamesHelper=function(e,t){if(e.kind()===121){var n=e;this.getModuleNamesHelper(n.left,t),t.push(n.right.text())}else t.push(e.text())},r.prototype.visitClassDeclaration=function(e){var r=e.identifier.text(),i=t.ScriptElementKind.classElement;this.createItem(e,e.modifiers,i,r),this.pushNewContainerScope(r,i),n.prototype.visitClassDeclaration.call(this,e),this.popScope()},r.prototype.visitInterfaceDeclaration=function(e){var r=e.identifier.text(),i=t.ScriptElementKind.interfaceElement;this.createItem(e,e.modifiers,i,r),this.pushNewContainerScope(r,i),this.currentInterfaceDeclaration=e,n.prototype.visitInterfaceDeclaration.call(this,e),this.currentInterfaceDeclaration=null,this.popScope()},r.prototype.visitObjectType=function(e){this.currentInterfaceDeclaration===null?this.skip(e):n.prototype.visitObjectType.call(this,e)},r.prototype.visitEnumDeclaration=function(e){var r=e.identifier.text(),i=t.ScriptElementKind.enumElement;this.createItem(e,e.modifiers,i,r),this.pushNewContainerScope(r,i),n.prototype.visitEnumDeclaration.call(this,e),this.popScope()},r.prototype.visitConstructorDeclaration=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.constructorImplementationElement,"constructor");var r=n.callSignature.parameterList.parameters;if(r)for(var i=0,s=r.nonSeparatorCount();i<s;i++){var o=r.nonSeparatorAt(i);e.Debug.assert(o.kind()===242),(e.SyntaxUtilities.containsToken(o.modifiers,57)||e.SyntaxUtilities.containsToken(o.modifiers,55))&&this.createItem(n,o.modifiers,t.ScriptElementKind.memberVariableElement,o.identifier.text())}this.skip(n)},r.prototype.visitMemberFunctionDeclaration=function(e){this.createItem(e,e.modifiers,t.ScriptElementKind.memberFunctionElement,e.propertyName.text()),this.skip(e)},r.prototype.visitGetAccessor=function(e){this.createItem(e,e.modifiers,t.ScriptElementKind.memberGetAccessorElement,e.propertyName.text()),this.skip(e)},r.prototype.visitSetAccessor=function(e){this.createItem(e,e.modifiers,t.ScriptElementKind.memberSetAccessorElement,e.propertyName.text()),this.skip(e)},r.prototype.visitMemberVariableDeclaration=function(e){this.currentMemberVariableDeclaration=e,n.prototype.visitMemberVariableDeclaration.call(this,e),this.currentMemberVariableDeclaration=null},r.prototype.visitVariableStatement=function(e){this.currentVariableStatement=e,n.prototype.visitVariableStatement.call(this,e),this.currentVariableStatement=null},r.prototype.visitVariableDeclarator=function(n){var r=this.currentMemberVariableDeclaration?this.currentMemberVariableDeclaration.modifiers:e.Syntax.emptyList,i=this.currentMemberVariableDeclaration?t.ScriptElementKind.memberVariableElement:t.ScriptElementKind.variableElement;this.createItem(n,r,i,n.propertyName.text()),this.skip(n)},r.prototype.visitIndexSignature=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.indexSignatureElement,"[]"),this.skip(n)},r.prototype.visitEnumElement=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.memberVariableElement,n.propertyName.text()),this.skip(n)},r.prototype.visitCallSignature=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.callSignatureElement,"()"),this.skip(n)},r.prototype.visitConstructSignature=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.constructSignatureElement,"new()"),this.skip(n)},r.prototype.visitMethodSignature=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.memberFunctionElement,n.propertyName.text()),this.skip(n)},r.prototype.visitPropertySignature=function(n){this.createItem(n,e.Syntax.emptyList,t.ScriptElementKind.memberVariableElement,n.propertyName.text()),this.skip(n)},r.prototype.visitFunctionDeclaration=function(e){e.identifier.width()>0&&this.createItem(e,e.modifiers,t.ScriptElementKind.functionElement,e.identifier.text()),this.skip(e)},r.prototype.visitBlock=function(e){this.skip(e)},r.prototype.visitIfStatement=function(e){this.skip(e)},r.prototype.visitExpressionStatement=function(e){this.skip(e)},r.prototype.visitThrowStatement=function(e){this.skip(e)},r.prototype.visitReturnStatement=function(e){this.skip(e)},r.prototype.visitSwitchStatement=function(e){this.skip(e)},r.prototype.visitWithStatement=function(e){this.skip(e)},r.prototype.visitTryStatement=function(e){this.skip(e)},r.prototype.visitLabeledStatement=function(e){this.skip(e)},r}(e.PositionTrackingWalker);t.GetScriptLexicalStructureWalker=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){function n(e,t){for(var r in e)typeof e[r]=="object"?n(e[r],t[r]):typeof e[r]!="function"&&(e[r]=t[r]);return e}t.copyDataObject=n;var r=function(){function n(){this._shims=[]}return n.prototype.createPullLanguageService=function(t){try{return new e.Services.LanguageService(t)}catch(n){throw e.Services.logInternalError(t,n),n}},n.prototype.createLanguageServiceShim=function(n){try{var r=new t.LanguageServiceShimHostAdapter(n),i=this.createPullLanguageService(r);return new t.LanguageServiceShim(this,n,i)}catch(s){throw e.Services.logInternalError(n,s),s}},n.prototype.createClassifier=function(t){try{return new e.Services.Classifier(t)}catch(n){throw e.Services.logInternalError(t,n),n}},n.prototype.createClassifierShim=function(n){try{return new t.ClassifierShim(this,n)}catch(r){throw e.Services.logInternalError(n,r),r}},n.prototype.createCoreServices=function(t){try{return new e.Services.CoreServices(t)}catch(n){throw e.Services.logInternalError(t.logger,n),n}},n.prototype.createCoreServicesShim=function(n){try{return new t.CoreServicesShim(this,n)}catch(r){throw e.Services.logInternalError(n.logger,r),r}},n.prototype.close=function(){this._shims=[]},n.prototype.registerShim=function(e){this._shims.push(e)},n.prototype.unregisterShim=function(t){for(var n=0,r=this._shims.length;n<r;n++)if(this._shims[n]===t){delete this._shims[n];return}throw e.Errors.invalidOperation()},n}();t.TypeScriptServicesFactory=r})(e.Services||(e.Services={}));var t=e.Services})(r||(r={}));var r;(function(e){(function(t){var n=function(){function t(){}return t.getMatchSpans=function(e,n){var r=[],i=e.sourceUnit().findToken(n);return t.getMatchingCloseBrace(i,n,r),t.getMatchingOpenBrace(i,n,r),r},t.getMatchingCloseBrace=function(n,r,i){if(n.start()===r){var s=t.getMatchingCloseBraceTokenKind(n);if(s!==null){var o=n.parentElement(),u=n.parent().fullStart();for(var a=0,f=o.childCount();a<f;a++){var l=o.childAt(a);if(l!==null&&l.fullWidth()>0){if(l.kind()===s){var c=new e.TextSpan(r,n.token().width()),h=new e.TextSpan(u+l.leadingTriviaWidth(),l.width());i.push(c,h);break}u+=l.fullWidth()}}}}},t.getMatchingOpenBrace=function(n,r,i){n.fullStart()===r&&(n=n.previousToken());if(n!==null&&n.start()===r-1){var s=t.getMatchingOpenBraceTokenKind(n);if(s!==null){var o=n.parentElement(),u=n.parent().fullStart()+o.fullWidth();for(var a=o.childCount()-1;a>=0;a--){var f=o.childAt(a);if(f!==null&&f.fullWidth()>0){if(f.kind()===s){var l=new e.TextSpan(r-1,n.token().width()),c=new e.TextSpan(u-f.trailingTriviaWidth()-f.width(),f.width());i.push(l,c);break}u-=f.fullWidth()}}}}},t.getMatchingCloseBraceTokenKind=function(t){var n=t!==null&&t.element();switch(n.kind()){case 70:return 71;case 72:return 73;case 74:return 75;case 80:return e.SyntaxUtilities.isAngleBracket(t)?81:null}return null},t.getMatchingOpenBraceTokenKind=function(t){var n=t!==null&&t.element();switch(n.kind()){case 71:return 70;case 73:return 72;case 75:return 74;case 81:return e.SyntaxUtilities.isAngleBracket(t)?80:null}return null},t}();t.BraceMatcher=n})(e.Services||(e.Services={}));var t=e.Services})(r||(r={})),t.TypeScript=r}),define("ace/workspace/workspace_worker",["require","exports","module","ace/workspace/workspace_protocol","ace/workspace/typescriptServices"],function(e,t,n){var r=e("./workspace_protocol"),i=e("./typescriptServices").TypeScript,s=i.Services,o=s.TypeScriptServicesFactory,u=i.LineMap1,a=i.ScriptSnapshot,f=i.TextChangeRange,l=i.TextSpan,c=function(){function e(e,t){this.getLineMap=function(){return this.lineMap||(this.lineMap=u.fromString(this.content)),this.lineMap},this.fileName=e,this.version=1,this.editRanges=[],this.setContent(t)}return e.prototype.setContent=function(e){this.content=e,this.lineMap=null},e.prototype.updateContent=function(e){this.editRanges=[],this.setContent(e),this.version++},e.prototype.editContent=function(e,t,n){var r=this.content.substring(0,e),i=n,s=this.content.substring(t);this.setContent(r+i+s);var o=this.content.length,u=new f(l.fromBounds(e,t),n.length);this.editRanges.push({length:o,textChangeRange:u}),this.version++},e.prototype.getTextChangeRangeSinceVersion=function(e){if(this.version===e)return f.unchanged;var t=this.editRanges.length-(this.version-e),n=this.editRanges.slice(t);return f.collapseChangesAcrossMultipleVersions(n.map(function(e){return e.textChangeRange}))},e}(),h=function(){function e(){this.compilationSettings=null,this.scripts={},this.maxScriptVersions=100}return e.prototype.getScriptFileNames=function(){return Object.keys(this.scripts)},e.prototype.getFileNames=function(e){e(Object.keys(this.scripts))},e.prototype.getScriptIsOpen=function(e){return!0},e.prototype.getScriptByteOrderMark=function(e){return null},e.prototype.getLocalizedDiagnosticMessages=function(){return""},e.prototype.fileExists=function(e){return!0},e.prototype.directoryExists=function(e){return!0},e.prototype.getParentDirectory=function(e){return""},e.prototype.resolveRelativePath=function(e,t){return""},e.prototype.getScriptSnapshot=function(e){var t=this.scripts[e],n=a.fromString(t.content);return n.getTextChangeRangeSinceVersion=function(e){return null},n},e.prototype.addScript=function(e,t){var n=new c(e,t);this.scripts[e]=n},e.prototype.ensureScript=function(e,t){var n=this.scripts[e];n?n.updateContent(t):this.addScript(e,t)},e.prototype.editScript=function(e,t,n,r){var i=this.scripts[e];if(!i)throw new Error("No script with fileName '"+e+"'");i.editContent(t,n,r)},e.prototype.removeScript=function(e){var t=this.scripts[e];if(!t)throw new Error("No script with fileName '"+e+"'");delete this.scripts[e]},e.prototype.information=function(){return!1},e.prototype.debug=function(){return!1},e.prototype.warning=function(){return!1},e.prototype.error=function(){return!1},e.prototype.fatal=function(){return!1},e.prototype.log=function(e){},e.prototype.getDiagnosticsObject=function(){var e={log:function(e){}};return e},e.prototype.getCompilationSettings=function(){return this.compilationSettings},e.prototype.setCompilationSettings=function(e){this.compilationSettings=e},e.prototype.getScriptVersion=function(e){var t=this.scripts[e];return t.version},e.prototype.applyEdits=function(e,t){var n=e;t=this.normalizeEdits(t);for(var r=t.length-1;r>=0;r--){var i=t[r],s=n.substring(0,i.minChar),o=i.text,u=n.substring(i.limChar);n=s+o+u}return n},e.prototype.normalizeEdits=function(e){function n(e){var t=[];for(var n=0;n<e.length;n++)t.push({edit:e[n],index:n});return t}var t=[],r=n(e).sort(function(e,t){var n=e.edit.minChar-t.edit.minChar;return n===0&&(n=e.index-t.index),n}),i=0,s=1;while(i<r.length){var o=r[i].edit;if(s>=r.length){t.push(o),i++;continue}var u=r[s].edit,a=u.minChar-o.limChar;if(a>=0){t.push(o),i=s,s++;continue}if(o.limChar>=u.limChar){s++;continue}throw new Error("Trying to apply overlapping edits")}return t},e}(),p=function(){function e(e){this.scriptCache=new h,this.ls=(new o).createPullLanguageService(this.scriptCache);var t=this;e.on("ensureScript",function(e){t.ensureScript(e.data.fileName,e.data.content)}),e.on("editScript",function(e){var n=e.data,r=n.fileName,i=n.start,s=n.end,o=n.text;t.editScript(r,i,s,o)}),e.on("removeScript",function(e){t.removeScript(e.data.fileName)}),e.on("getFileNames",function(n){var r=n.data,i=r.callbackId,s=t.scriptCache.getScriptFileNames(),o={names:s,callbackId:i};e.emit("fileNames",o)}),e.on("getSyntaxErrors",function(n){var r=n.data,i=r.fileName,s=r.callbackId,o=t.ls.getSyntacticDiagnostics(i).map(function(e){return{message:e.message(),start:e.start(),length:e.length()}}),u={errors:o,callbackId:s};e.emit("syntaxErrors",u)}),e.on("getSemanticErrors",function(n){var r=n.data,i=r.fileName,s=r.callbackId;try{var o=t.ls.getSemanticDiagnostics(i).map(function(e){return{message:e.message(),start:e.start(),length:e.length()}}),u={errors:o,callbackId:s};e.emit("semanticErrors",u)}catch(a){console.log("getSemanticDiagnostics() raised exception.")}}),e.on("getCompletionsAtPosition",function(n){try{var i=n.data,s=i.fileName,o=i.position,u=i.memberMode,a=i.callbackId;if(typeof o!="number"||isNaN(o))throw new Error("position must be a number and not NaN");var f=t.ls.getCompletionsAtPosition(s,o,u);e.emit(r.EVENT_NAME_COMPLETIONS,{completions:f,callbackId:a})}catch(l){e.emit(r.EVENT_NAME_COMPLETIONS,{err:l.toString(),callbackId:a})}}),e.on("getTypeAtDocumentPosition",function(n){try{var r=n.data,s=r.fileName,o=r.documentPosition,u=r.callbackId,a=t.scriptCache.scripts[s],f=o.row,l=o.column,c=a.getLineMap().getPosition(f,l),h=t.ls.getTypeAtPosition(s,c);if(h){var p=null,d=h.memberName;d&&(p=i.MemberName.memberNameToString(d));var v=h.kind,m=h.minChar,g=h.limChar,y=h.docComment,b=h.fullSymbolName,w={kind:v,minChar:m,limChar:g,description:p,docComment:y,fullSymbolName:b},E={results:w,callbackId:u};e.emit("typeAtDocumentPosition",E)}else e.emit("typeAtDocumentPosition",{callbackId:u})}catch(S){e.emit("typeAtDocumentPosition",{err:""+S,callbackId:u})}}),e.on("getOutputFiles",function(n){var r=n.data,i=r.fileName,s=r.callbackId;try{var o=t.ls.getEmitOutput(i),u=o.outputFiles,a={results:u,callbackId:s};e.emit("outputFiles",a)}catch(f){console.log("getEmitOutput() raised exception.")}}),e.emit("initAfter")}return e.prototype.ensureScript=function(e,t){this.scriptCache.ensureScript(e,t)},e.prototype.editScript=function(e,t,n,r){this.scriptCache.editScript(e,t,n,r)},e.prototype.removeScript=function(e){this.scriptCache.removeScript(e)},e}();t.WorkspaceWorker=p}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){var r=function(){this.propagationStopped=!0},i=function(){this.defaultPrevented=!0},s=function(){function e(){}return e.prototype._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],s=this._defaultHandlers[e];if(!n.length&&!s)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=i),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(s&&!t.defaultPrevented)return s(t,this)},e.prototype._emit=function(e,t){return this._dispatchEvent(e,t)},e.prototype._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},e.prototype.once=function(e,t){var n=this;t&&this.addEventListener(e,function r(){n.removeEventListener(e,r),t.apply(null,arguments)})},e.prototype.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},e.prototype.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t){var i=n[e];r&&this.setDefaultHandler(e,r.pop())}else if(r){var s=r.indexOf(t);s!=-1&&r.splice(s,1)}},e.prototype.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},e.prototype.on=function(e,t,n){return this.addEventListener(e,t,n)},e.prototype.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},e.prototype.removeListener=function(e,t){return this.removeEventListener(e,t)},e.prototype.off=function(e,t){return this.removeEventListener(e,t)},e.prototype.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},e}();t.EventEmitterClass=s,t.EventEmitter=new s}),define("ace/lib/oop",["require","exports","module"],function(e,t,n){function r(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function i(e,t){for(var n in t)e[n]=t[n];return e}function s(e,n){t.mixin(e,n)}t.inherits=r,t.mixin=i,t.implement=s}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function B(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function j(e){var t,n,r;if(B(e))return e;n=e.valueOf;if(typeof n=="function"){t=n.call(e);if(B(t))return t}r=e.toString;if(typeof r=="function"){t=r.call(e);if(B(t))return t}throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty),l,c,h,p,d;if(d=f(o,"__defineGetter__"))l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__);if([1,2].splice(0).length!=2)if(!function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t=[],n;t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length;if(n+1==t.length)return!0}())Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):e==void 0?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(f<a)for(var h=0;h<l;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else{this.length=c+s;for(h=0;h<s;++h)this[e+h]=i[h]}}return r};else{var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(u.call(arguments,2))):[]}}Array.isArray||(Array.isArray=function(t){return a(t)=="[object Array]"});var m=Object("a"),g=m[0]!="a"||!(0 in m);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError;while(++s<o)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var u=0;u<i;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=[],o,u=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else do{if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s});if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1)Array.prototype.indexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1};if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1)Array.prototype.lastIndexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1};Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)});if(!Object.getOwnPropertyDescriptor){var y="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(y+t);if(!f(t,n))return;var r,i,s;r={enumerable:!0,configurable:!0};if(d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);t.__proto__=u;if(i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)});if(!Object.create){var b;Object.prototype.__proto__===null?b=function(){return{__proto__:null}}:b=function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(t===null)r=b();else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S=typeof document=="undefined"||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){var T="Property description must be an object: ",N="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(N+t);if(typeof r!="object"&&typeof r!="function"||r===null)throw new TypeError(T+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError(C);f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;var n="";while(f(t,n))n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r});if(!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function I(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;n<r;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="	\n\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}})