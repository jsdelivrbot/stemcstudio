var __extends=this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r};define("ace/snippets",["require","exports","module","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(e,t,n){"no use strict";function c(e){return"(?:[^\\\\"+e+"]|\\\\.)"}function h(e,t,n){return e=e.substr(1),/^\d+$/.test(e)&&!n.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}var r=e("./lib/event_emitter"),i=e("./lib/lang"),s=e("./range"),o=e("./anchor"),u=e("./keyboard/hash_handler"),a=e("./tokenizer"),f=s.Range.comparePoints,l="tabstopManager",p=function(e){function t(){e.call(this),this.snippetMap={},this.snippetNameMap={},this.variables={}}return __extends(t,e),t.prototype.getTokenizer=function(){return t.prototype.getTokenizer=function(){return t.$tokenizer},t.$tokenizer},t.prototype.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},t.prototype.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var n=t.substr(1);return(this.variables[t[0]+"__"]||{})[n]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];t=t.replace(/^TM_/,"");if(!e)return;var r=e.session;switch(t){case"CURRENT_WORD":var i=r.getWordRange();case"SELECTION":case"SELECTED_TEXT":return r.getTextRange(i);case"CURRENT_LINE":return r.getLine(e.getCursorPosition().row);case"PREV_LINE":return r.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return r.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return r.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}},t.prototype.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},t.prototype.tmStrFormat=function(e,t,n){var r=t.flag||"",i=t.guard;i=new RegExp(i,r.replace(/[^gi]/,""));var s=this.tokenizeTmSnippet(t.fmt,"formatString"),o=this,u=e.replace(i,function(){o.variables.__=arguments;var e=o.resolveVariables(s,n),t="E";for(var r=0;r<e.length;r++){var i=e[r];if(typeof i=="object"){e[r]="";if(i.changeCase&&i.local){var u=e[r+1];u&&typeof u=="string"&&(i.changeCase=="u"?e[r]=u[0].toUpperCase():e[r]=u[0].toLowerCase(),e[r+1]=u.substr(1))}else i.changeCase&&(t=i.changeCase)}else t=="U"?e[r]=i.toUpperCase():t=="L"&&(e[r]=i.toLowerCase())}return e.join("")});return this.variables.__=null,u},t.prototype.resolveVariables=function(e,t){function o(t){var n=e.indexOf(t,r+1);n!=-1&&(r=n)}var n=[];for(var r=0;r<e.length;r++){var i=e[r];if(typeof i=="string")n.push(i);else{if(typeof i!="object")continue;if(i.skip)o(i);else{if(i.processed<r)continue;if(i.text){var s=this.getVariableValue(t,i.text);s&&i.fmtString&&(s=this.tmStrFormat(s,i)),i.processed=r,i.expectIf==null?s&&(n.push(s),o(i)):s?i.skip=i.elseBranch:o(i)}else i.tabstopId!=null?n.push(i):i.changeCase!=null&&n.push(i)}}}return n},t.prototype.insertSnippetForSelection=function(e,t){function f(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(typeof r=="object"){if(a[r.tabstopId])continue;var i=e.lastIndexOf(r,n-1);r=t[i]||{tabstopId:r.tabstopId}}t[n]=r}return t}var n=e.getCursorPosition(),r=e.session.getLine(n.row),i=e.session.getTabString(),s=r.match(/^\s*/)[0];n.column<s.length&&(s=s.slice(0,n.column));var o=this.tokenizeTmSnippet(t);o=this.resolveVariables(o,e),o=o.map(function(e){return e=="\n"?e+s:typeof e=="string"?e.replace(/\t/g,i):e});var u=[];o.forEach(function(e,t){if(typeof e!="object")return;var n=e.tabstopId,r=u[n];r||(r=u[n]=[],r.index=n,r.value="");if(r.indexOf(e)!==-1)return;r.push(e);var i=o.indexOf(e,t+1);if(i===-1)return;var s=o.slice(t+1,i),a=s.some(function(e){return typeof e=="object"});a&&!r.value?r.value=s:s.length&&(!r.value||typeof r.value!="string")&&(r.value=s.join(""))}),u.forEach(function(e){e.length=0});var a={};for(var c=0;c<o.length;c++){var h=o[c];if(typeof h!="object")continue;var p=h.tabstopId,v=o.indexOf(h,c+1);if(a[p]){a[p]===h&&(a[p]=null);continue}var m=u[p],g=typeof m.value=="string"?[m.value]:f(m.value);g.unshift(c+1,Math.max(0,v-c)),g.push(h),a[p]=h,o.splice.apply(o,g),m.indexOf(h)===-1&&m.push(h)}var y=0,b=0,w="";o.forEach(function(e){typeof e=="string"?(e[0]==="\n"?(b=e.length-1,y++):b+=e.length,w+=e):e.start?e.end={row:y,column:b}:e.start={row:y,column:b}});var E=e.getSelectionRange(),S=e.session.replace(E,w),x=e[l]?e[l]:new d(e),T=e.inVirtualSelectionMode&&e.selection.index;x.addTabstops(u,E.start,S,T)},t.prototype.insertSnippet=function(e,t,n){var r=this;if(e.inVirtualSelectionMode)return r.insertSnippetForSelection(e,t);e.forEachSelection(function(){r.insertSnippetForSelection(e,t)},null,{keepOrder:!0}),e[l]&&e[l].tabNext()},t.prototype.$getScope=function(e){var t=e.session.$mode.$id||"";t=t.split("/").pop();if(t==="html"||t==="php"){t==="php"&&!e.session.$mode.inlinePhp&&(t="html");var n=e.getCursorPosition(),r=e.session.getState(n.row);typeof r=="object"&&(r=r[0]),r.substring&&(r.substring(0,3)=="js-"?t="javascript":r.substring(0,4)=="css-"?t="css":r.substring(0,4)=="php-"&&(t="php"))}return t},t.prototype.getActiveScopes=function(e){var t=this.$getScope(e),n=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&n.push.apply(n,r[t].includeScopes),n.push("_"),n},t.prototype.expandWithTab=function(e,t){var n=this,r=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:!0});return r&&e[l]&&e[l].tabNext(),r},t.prototype.expandSnippetForSelection=function(e,t){var n=e.getCursorPosition(),r=e.session.getLine(n.row),i=r.substring(0,n.column),s=r.substr(n.column),o=this.snippetMap,u;return this.getActiveScopes(e).some(function(e){var t=o[e];return t&&(u=this.findMatchingSnippet(t,i,s)),!!u},this),u?t&&t.dryRun?!0:(e.session.doc.removeInLine(n.row,n.column-u.replaceBefore.length,n.column+u.replaceAfter.length),this.variables.M__=u.matchBefore,this.variables.T__=u.matchAfter,this.insertSnippetForSelection(e,u.content),this.variables.M__=this.variables.T__=null,!0):!1},t.prototype.findMatchingSnippet=function(e,t,n){for(var r=e.length;r--;){var i=e[r];if(i.startRe&&!i.startRe.test(t))continue;if(i.endRe&&!i.endRe.test(n))continue;if(!i.startRe&&!i.endRe)continue;return i.matchBefore=i.startRe?i.startRe.exec(t):[""],i.matchAfter=i.endRe?i.endRe.exec(n):[""],i.replaceBefore=i.triggerRe?i.triggerRe.exec(t)[0]:"",i.replaceAfter=i.endTriggerRe?i.endTriggerRe.exec(n)[0]:"",i}},t.prototype.register=function(e,t){function o(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function u(e,t,n){return e=o(e),t=o(t),n?(e=t+e,e&&e[e.length-1]!="$"&&(e+="$")):(e+=t,e&&e[0]!="^"&&(e="^"+e)),new RegExp(e)}function a(e){e.scope||(e.scope=t||"_"),t=e.scope,n[t]||(n[t]=[],r[t]={});var o=r[t];if(e.name){var a=o[e.name];a&&s.unregister(a),o[e.name]=e}n[t].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=i.escapeRegExp(e.tabTrigger)),e.startRe=u(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,""),e.endRe=u(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"")}var n=this.snippetMap,r=this.snippetNameMap,s=this;e.content?a(e):Array.isArray(e)&&e.forEach(a),this._signal("registerSnippets",{scope:t})},t.prototype.unregister=function(e,t){function i(e){var i=r[e.scope||t];if(i&&i[e.name]){delete i[e.name];var s=n[e.scope||t],o=s&&s.indexOf(e);o>=0&&s.splice(o,1)}}var n=this.snippetMap,r=this.snippetNameMap;e.content?i(e):Array.isArray(e)&&e.forEach(i)},t.prototype.parseSnippetFile=function(e){e=e.replace(/\r/g,"");var t=[],n={},r=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,i;while(i=r.exec(e)){if(i[1])try{n=JSON.parse(i[1]),t.push(n)}catch(s){}if(i[4])n.content=i[4].replace(/^\t/gm,""),t.push(n),n={};else{var o=i[2],u=i[3];if(o=="regex"){var a=/\/((?:[^\/\\]|\\.)*)|$/g;n.guard=a.exec(u)[1],n.trigger=a.exec(u)[1],n.endTrigger=a.exec(u)[1],n.endGuard=a.exec(u)[1]}else o=="snippet"?(n.tabTrigger=u.match(/^\S*/)[0],n.name||(n.name=u)):n[o]=u}}return t},t.prototype.getSnippetByName=function(e,t){var n=this.snippetNameMap,r;return this.getActiveScopes(t).some(function(t){var i=n[t];return i&&(r=i[e]),!!r},this),r},t.$tokenizer=new a.Tokenizer({start:[{regex:/:/,onMatch:function(e,t,n){return n.length&&n[0].expectIf?(n[0].expectIf=!1,n[0].elseBranch=n[0],[n[0]]):":"}},{regex:/\\./,onMatch:function(e,t,n){var r=e[1];return r=="}"&&n.length?e=r:"`$\\".indexOf(r)!=-1?e=r:n.inFormatString&&(r=="n"?e="\n":r=="t"?e="\n":"ulULE".indexOf(r)!=-1&&(e={changeCase:r,local:r>"a"})),[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:h},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,t,n){var r=h(e.substr(1),t,n);return n.unshift(r[0]),r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+c("\\|")+"*\\|",onMatch:function(e,t,n){n[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+c("/")+"+)/(?:("+c("/")+"*)/)(\\w*):?",onMatch:function(e,t,n){var r=n[0];return r.fmtString=e,e=this.splitRegex.exec(e),r.guard=e[1],r.fmt=e[2],r.flag=e[3],""},next:"start"},{regex:"`"+c("`")+"*`",onMatch:function(e,t,n){return n[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,n){n[0]&&(n[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+c("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,n){n.inFormatString=!0},next:"start"}]}),t}(r.EventEmitterClass);t.SnippetManager=p;var d=function(){function e(e){this.keyboardHandler=new u.HashHandler,this.addTabstops=function(e,t,n,r){this.$openTabstops||(this.$openTabstops=[]);if(!e[0]){var i=s.Range.fromPoints(n,n);g(i.start,t),g(i.end,t),e[0]=[i],e[0].index=0}var o=this.index,u=[o+1,0],a=this.ranges;e.forEach(function(e,n){var r=this.$openTabstops[n]||e;for(var i=e.length;i--;){var o=e[i],f=s.Range.fromPoints(o.start,o.end||o.start);m(f.start,t),m(f.end,t),f.original=o,f.tabstop=r,a.push(f),r!=e?r.unshift(f):r[i]=f,o.fmtString?(f.linked=!0,r.hasLinkedRanges=!0):r.firstNonLinked||(r.firstNonLinked=f)}r.firstNonLinked||(r.hasLinkedRanges=!1),r===e&&(u.push(r),this.$openTabstops[n]=r),this.addTabstopMarkers(r)},this),u.length>2&&(this.tabstops.length&&u.push(u.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,u))},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId),e.tabstop.length||(t=this.tabstops.indexOf(e.tabstop),t!=-1&&this.tabstops.splice(t,1),this.tabstops.length||this.detach())},e[l]=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=i.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e),this.keyboardHandler.bindKeys({Tab:function(e){if(t.snippetManager&&t.snippetManager.expandWithTab(e))return;e[l].tabNext(1)},"Shift-Tab":function(e){e[l].tabNext(-1)},Esc:function(e){e[l].detach()},Return:function(e){return!1}})}return e.prototype.attach=function(e){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},e.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor[l]=null,this.editor=null},e.prototype.onChange=function(e){var t=e.data.range,n=e.data.action[0]=="r",r=t.start,i=t.end,s=r.row,o=i.row,u=o-s,a=i.column-r.column;n&&(u=-u,a=-a);if(!this.$inChange&&n){var l=this.selectedTabstop,c=l&&!l.some(function(e){return f(e.start,r)<=0&&f(e.end,i)>=0});if(c)return this.detach()}var h=this.ranges;for(var p=0;p<h.length;p++){var d=h[p];if(d.end.row<r.row)continue;if(n&&f(r,d.start)<0&&f(i,d.end)>0){this.removeRange(d),p--;continue}d.start.row==s&&d.start.column>r.column&&(d.start.column+=a),d.end.row==s&&d.end.column>=r.column&&(d.end.column+=a),d.start.row>=s&&(d.start.row+=u),d.end.row>=s&&(d.end.row+=u),f(d.start,d.end)>0&&this.removeRange(d)}h.length||this.detach()},e.prototype.updateLinkedFields=function(){var e=this.selectedTabstop;if(!e||!e.hasLinkedRanges)return;this.$inChange=!0;var n=this.editor.session,r=n.getTextRange(e.firstNonLinked);for(var i=e.length;i--;){var s=e[i];if(!s.linked)continue;var o=t.snippetManager.tmStrFormat(r,s.original);n.replace(s,o)}this.$inChange=!1},e.prototype.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},e.prototype.onChangeSelection=function(){if(!this.editor)return;var e=this.editor.selection.lead,t=this.editor.selection.anchor,n=this.editor.selection.isEmpty();for(var r=this.ranges.length;r--;){if(this.ranges[r].linked)continue;var i=this.ranges[r].contains(e.row,e.column),s=n||this.ranges[r].contains(t.row,t.column);if(i&&s)return}this.detach()},e.prototype.onChangeSession=function(){this.detach()},e.prototype.tabNext=function(e){var t=this.tabstops.length,n=this.index+(e||1);n=Math.min(Math.max(n,1),t),n==t&&(n=0),this.selectTabstop(n),n===0&&this.detach()},e.prototype.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index];if(!t||!t.length)return;this.selectedTabstop=t;if(!this.editor.inVirtualSelectionMode){var n=this.editor.multiSelect;n.toSingleRange(t.firstNonLinked.clone());for(var r=t.length;r--;){if(t.hasLinkedRanges&&t[r].linked)continue;n.addRange(t[r].clone(),!0)}n.ranges[0]&&n.addRange(n.ranges[0].clone())}else this.editor.selection.setRange(t.firstNonLinked);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},e}(),v={};v.onChange=o.Anchor.prototype.onChange,v.setPosition=function(e,t){this.pos.row=e,this.pos.column=t},v.update=function(e,t,n){this.$insertRight=n,this.pos=e,this.onChange(t)};var m=function(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row},g=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new p;var y=e("./editor").Editor;(function(){this.insertSnippet=function(e,n){return t.snippetManager.insertSnippet(this,e,n)},this.expandSnippet=function(e){return t.snippetManager.expandWithTab(this,e)}}).call(y.prototype)}),define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,n){"no use strict";var r=e("../virtual_renderer"),i=e("../editor"),s=e("../range"),o=e("../lib/event"),u=e("../lib/lang"),a=e("../lib/dom"),f=function(){},l=function(){function e(e){function n(e){var t=new r.VirtualRenderer(e);t.content.style.cursor="default",t.setStyle("ace_autocomplete"),t.$cursorLayer.restartTimer=f,t.$cursorLayer.element.style.opacity="0",t.$maxLines=8,t.$keepTextAreaAtCursor=!1;var n=new i.Editor(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150),n.focus=f,n.$isFocused=!0,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n}function l(){t.setHoverMarker(-1)}this.$borderSize=1,this.$imageSize=0,this.hoverMarker=new s.Range(-1,0,-1,Infinity),this.selectionMarker=new s.Range(-1,0,-1,Infinity),this.isOpen=!1,this.isTopdown=!1,this.data=[];var t=this,u=a.createElement("div");this.editor=n(u),e&&e.appendChild(u),u.style.display="none",this.editor.on("mousedown",function(e){var n=e.getDocumentPosition();t.editor.selection.moveToPosition(n),t.selectionMarker.start.row=t.selectionMarker.end.row=n.row,e.stop()}),this.selectionMarkerId=this.editor.session.addMarker(this.selectionMarker,"ace_active-line","fullLine"),this.setSelectOnHover(!1),this.editor.on("mousemove",function(e){if(!t.lastMouseEvent){t.lastMouseEvent=e;return}if(t.lastMouseEvent.x==e.x&&t.lastMouseEvent.y==e.y)return;t.lastMouseEvent=e,t.lastMouseEventScrollTop=t.editor.renderer.scrollTop;var n=t.lastMouseEvent.getDocumentPosition().row;t.hoverMarker.start.row!=n&&(t.hoverMarkerId||t.setRow(n),t.setHoverMarker(n))}),this.editor.renderer.on("beforeRender",function(){if(t.lastMouseEvent&&t.hoverMarker.start.row!=-1){t.lastMouseEvent.$pos=null;var e=t.lastMouseEvent.getDocumentPosition().row;t.hoverMarkerId||t.setRow(e),t.setHoverMarker(e,!0)}}),this.editor.renderer.on("afterRender",function(){var e=t.getRow(),n=t.editor.renderer.$textLayer,r=n.element.childNodes[e-n.config.firstRow];if(r==n.selectedNode)return;n.selectedNode&&a.removeCssClass(n.selectedNode,"ace_selected"),n.selectedNode=r,r&&a.addCssClass(r,"ace_selected")}),o.addListener(this.editor.container,"mouseout",l),this.editor.on("hide",l),this.editor.on("changeSelection",l),this.editor.session.doc.getLength=function(){return t.data.length},this.editor.session.doc.getLine=function(e){var n=t.data[e];return typeof n=="string"?n:n&&n.value||""};var c=this.editor.session.bgTokenizer;c.$tokenizeRow=function(e){var n=t.data[e],r=[];if(!n)return r;typeof n=="string"&&(n={value:n}),n.caption||(n.caption=n.value||n.name);var i=-1,s,o;for(var u=0,a=n.caption.length;u<a;u++)o=n.caption[u],s=n.matchMask&1<<u?1:0,i!==s?(r.push({type:n.className||""+(s?"completion-highlight":""),value:o}),i=s):r[r.length-1].value+=o;if(n.meta){var f=t.editor.renderer.$size.scrollerWidth/t.editor.renderer.layerConfig.characterWidth;n.meta.length+n.caption.length<f-2&&r.push({type:"rightAlignedText",value:n.meta})}return r},c.$updateOnChange=f,c.start=f,this.editor.session.$computeWidth=function(){return t.screenWidth=0},this.editor.on("changeSelection",function(){this.isOpen&&this.setRow(this.popup.selection.lead.row)})}return e.prototype.show=function(e,t,n){var r=this.editor.container,i=window.innerHeight,s=window.innerWidth,o=this.editor.renderer,u=o.$maxLines*t*1.4,a=e.top+this.$borderSize;a+u>i-t&&!n?(r.style.top="",r.style.bottom=i-a+"px",this.isTopdown=!1):(a+=t,r.style.top=a+"px",r.style.bottom="",this.isTopdown=!0),r.style.display="",o.$textLayer.checkForSizeChanges();var f=e.left;f+r.offsetWidth>s&&(f=s-r.offsetWidth),r.style.left=f+"px",this.editor._signal("show"),this.lastMouseEvent=null,this.isOpen=!0},e.prototype.hide=function(){this.editor.container.style.display="none",this.editor._signal("hide"),this.isOpen=!1},e.prototype.setData=function(e){this.data=e||[],this.editor.setValue(u.stringRepeat("\n",e.length),-1),this.setRow(0)},e.prototype.getData=function(e){return this.data[e]},e.prototype.on=function(e,t,n){return this.editor.on(e,t,n)},e.prototype.getTextLeftOffset=function(){return this.$borderSize+this.editor.renderer.$padding+this.$imageSize},e.prototype.setSelectOnHover=function(e){e?this.hoverMarkerId&&(this.editor.session.removeMarker(this.hoverMarkerId),this.hoverMarkerId=null):this.hoverMarkerId=this.editor.session.addMarker(this.hoverMarker,"ace_line-hover","fullLine")},e.prototype.setHoverMarker=function(e,t){e!==this.hoverMarker.start.row&&(this.hoverMarker.start.row=this.hoverMarker.end.row=e,t||this.editor.session._emit("changeBackMarker"),this.editor._emit("changeHoverMarker"))},e.prototype.getHoveredRow=function(){return this.hoverMarker.start.row},e.prototype.getRow=function(){return this.selectionMarker.start.row},e.prototype.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e)),this.selectionMarker.start.row!=e&&(this.editor.selection.clearSelection(),this.selectionMarker.start.row=this.selectionMarker.end.row=e||0,this.editor.session._emit("changeBackMarker"),this.editor.moveCursorTo(e||0,0),this.isOpen&&this.editor._signal("select"))},e.prototype.setTheme=function(e){this.editor.setTheme(e)},e.prototype.setFontSize=function(e){this.editor.setFontSize(e)},Object.defineProperty(e.prototype,"focus",{get:function(){return this.editor.focus},enumerable:!0,configurable:!0}),e.prototype.getLength=function(){return this.editor.session.getLength()},Object.defineProperty(e.prototype,"container",{get:function(){return this.editor.container},enumerable:!0,configurable:!0}),e}();t.ListViewPopup=l,a.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}")}),define("ace/autocomplete/util",["require","exports","module"],function(e,t,n){"no use strict";function r(e,t,n){var r=0,i=e.length;i===0&&n();for(var s=0;s<i;s++)t(e[s],function(e,t){r++,r===i&&n(e,t)})}function s(e,t,n){n=n||i;var r=[];for(var s=t-1;s>=0;s--){if(!n.test(e[s]))break;r.push(e[s])}return r.reverse().join("")}function o(e,t,n){n=n||i;var r=[];for(var s=t;s<e.length;s++){if(!n.test(e[s]))break;r.push(e[s])}return r}t.parForEach=r;var i=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;t.retrievePrecedingIdentifier=s,t.retrieveFollowingIdentifier=o}),define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/snippets"],function(e,t,n){"no use strict";function f(e){return e[a]}function l(e,t){e[a]=t}var r=e("./keyboard/hash_handler"),i=e("./autocomplete/popup"),s=e("./autocomplete/util"),o=e("./lib/lang"),u=e("./snippets"),a="completer";t.getCompleter=f,t.setCompleter=l;var c=function(){function e(e){this.keyboardHandler=new r.HashHandler,this.gatherCompletionsId=0,this.autoSelect=!0,this.autoInsert=!0,this.showPopup=function(e){this.editor&&this.detach(),this.activated=!0,this.editor=e,t.getCompleter(e)!=this&&(t.getCompleter(e)&&t.getCompleter(e).detach(),t.setCompleter(e,this)),e.keyBinding.addKeyboardHandler(this.keyboardHandler),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.editor=e,this.commands={Up:function(e){t.getCompleter(e).goTo("up")},Down:function(e){t.getCompleter(e).goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){t.getCompleter(e).goTo("start")},"Ctrl-Down|Ctrl-End":function(e){t.getCompleter(e).goTo("end")},Esc:function(e){t.getCompleter(e).detach()},Space:function(e){t.getCompleter(e).detach(),e.insert(" ")},Return:function(e){return t.getCompleter(e).insertMatch()},"Shift-Return":function(e){t.getCompleter(e).insertMatch(!0)},Tab:function(e){var n=t.getCompleter(e).insertMatch();if(!!n||!!e.tabstopManager)return n;t.getCompleter(e).goTo("down")},PageUp:function(e){t.getCompleter(e).goTo("pageUp")},PageDown:function(e){t.getCompleter(e).goTo("pageDown")}},this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=o.delayedCall(function(){this.updateCompletions(!0)}.bind(this))}return e.prototype.insertMatch=function(e){e||(e=this.popup.getData(this.popup.getRow()));if(!e)return;if(e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor);else{if(this.completions.filterText){var t=this.editor.selection.getAllRanges();for(var n=0,r;r=t[n];n++)r.start.column-=this.completions.filterText.length,this.editor.session.remove(r)}e.snippet?u.snippetManager.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.detach()},e.prototype.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.popup&&this.popup.isOpen&&(this.gatherCompletionsId+=1,this.popup.hide()),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},e.prototype.goTo=function(e){var t=this.popup.getRow(),n=this.popup.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n}this.popup.setRow(t)},e.prototype.getCompletions=function(e,t,n,r,i){this.base=t.doc.createAnchor(n.row,n.column-r.length);var o=[],u=e.completers.length;return e.completers.forEach(function(a,f){a.getCompletions(e,t,n,r,function(n,r){n||(o=o.concat(r));var a=e.getCursorPosition(),f=t.getLine(a.row);i(null,{prefix:s.retrievePrecedingIdentifier(f,a.column,r[0]&&r[0].identifierRegex),matches:o,finished:--u===0})})}),!0},e.prototype.updateCompletions=function(e){var t=this.editor.getCursorPosition(),n;if(e&&this.base&&this.completions){n=this.editor.session.getTextRange({start:this.base,end:t});if(n==this.completions.filterText)return;this.completions.setFilter(n);if(!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==n&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,n,e)}else{var r=this.gatherCompletionsId,i=this.editor,o=i.getSession(),u=o.getLine(t.row);n=s.retrievePrecedingIdentifier(u,t.column),this.getCompletions(this.editor,o,this.editor.getCursorPosition(),n,function(t,n){var i=function(){if(!n.finished)return;return this.detach()}.bind(this),s=n.prefix,o=n&&n.matches;if(!o||!o.length)return i();if(s.indexOf(n.prefix)!==0||r!=this.gatherCompletionsId)return;this.completions=new p(o),this.completions.setFilter(s);var u=this.completions.filtered;if(!u.length)return i();if(u.length==1&&u[0].value==s&&!u[0].snippet)return i();if(this.autoInsert&&u.length==1)return this.insertMatch(u[0]);this.openPopup(this.editor,s,e)}.bind(this))}},e.prototype.openPopup=function(e,t,n){this.popup||(this.popup=new i.ListViewPopup(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor)),this.popup.setData(this.completions.filtered),this.popup.setRow(this.autoSelect?0:-1);if(!n){this.popup.setTheme(e.getTheme()),this.popup.setFontSize(e.getFontSize());var r=e.renderer.layerConfig.lineHeight,s=e.renderer.$cursorLayer.getPixelPosition(this.base,!0);s.left-=this.popup.getTextLeftOffset();var o=e.container.getBoundingClientRect();s.top+=o.top-e.renderer.layerConfig.offset,s.left+=o.left-e.renderer.scrollLeft,s.left+=e.renderer.$gutterLayer.gutterWidth,this.popup.show(s,r)}},e.prototype.changeListener=function(e){var t=this.editor.selection.lead;(t.row!=this.base.row||t.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},e.prototype.blurListener=function(){var e=document.activeElement;e!=this.editor.textInput.getElement()&&e.parentNode!=this.popup.container&&this.detach()},e.prototype.mousedownListener=function(e){this.detach()},e.prototype.mousewheelListener=function(e){this.detach()},e.prototype.cancelContextMenu=function(){this.editor.cancelMouseContextMenu()},e}();t.CompleterAggregate=c;var h=function(){function e(){}return e.startCommand={name:"startAutocomplete",exec:function(e){var n=t.getCompleter(e);n||(n=new c(e),t.setCompleter(e,n)),n.autoInsert=!0,n.autoSelect=!0,n.showPopup(e),n.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"},e}();t.Autocomplete=h;var p=function(){function e(e,t,n){this.all=e,this.filtered=e,this.filterText=t||""}return e.prototype.setFilter=function(e){var t;e.length>this.filterText&&e.lastIndexOf(this.filterText,0)===0?t=this.filtered:t=this.all,this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var n=null;t=t.filter(function(e){var t=e.value||e.caption||e.snippet;return t===n?!1:(n=t,!0)}),this.filtered=t},e.prototype.filterCompletions=function(e,t){var n=[],r=t.toUpperCase(),i=t.toLowerCase();e:for(var s=0,o=e.length;s<o;s++){var u=e[s],a=u.value||u.caption||u.snippet;if(!a)continue;var f=-1,l=0,c=0,h,p;for(var d=0;d<t.length;d++){var v=a.indexOf(i[d],f+1),m=a.indexOf(r[d],f+1);h=v>=0?m<0||v<m?v:m:m;if(h<0)continue e;p=h-f-1,p>0&&(f===-1&&(c+=10),c+=p),l|=1<<h,f=h}u.matchMask=l,u.exactMatch=c?0:1,u.score=(u.score||0)-c,n.push(u)}return n},e}();t.FilteredList=p}),define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/autocomplete/util","ace/editor"],function(e,t,n){"no use strict";function f(e){a.push(e)}function d(e){var t=e.getCursorPosition(),n=e.session.getLine(t.row),r=o.retrievePrecedingIdentifier(n,t.column);return e.completers.forEach(function(e){e.identifierRegexps&&e.identifierRegexps.forEach(function(e){!r&&e&&(r=o.retrievePrecedingIdentifier(n,t.column,e))})}),r}var r=e("../snippets"),i=e("../autocomplete"),s=e("../config"),o=e("../autocomplete/util"),u=e("../editor");t.keyWordCompleter={getCompletions:function(e,t,n,r,i){var s=e.session.getState(n.row),o=t.$mode.getCompletions(s,t,n,r);i(null,o)}},t.snippetCompleter={getCompletions:function(e,t,n,i,s){var o=r.snippetManager.snippetMap,u=[];r.snippetManager.getActiveScopes(e).forEach(function(e){var t=o[e]||[];for(var n=t.length;n--;){var r=t[n],i=r.name||r.tabTrigger;if(!i)continue;u.push({caption:i,snippet:r.content,meta:r.tabTrigger&&!r.name?r.tabTrigger+"\u21e5 ":"snippet"})}},this),s(null,u)}};var a=[t.snippetCompleter,t.keyWordCompleter];t.addCompleter=f;var l={name:"expandSnippet",exec:function(e){var t=r.snippetManager.expandWithTab(e);t||e.execCommand("indent")},bindKey:"Tab"},c=function(e,t){h(t.session.$mode)},h=function(e){var t=e.$id;r.snippetManager.files||(r.snippetManager.files={}),p(t),e.modes&&e.modes.forEach(h)},p=function(e){if(!e||r.snippetManager.files[e])return;var t=e.replace("mode","snippets");r.snippetManager.files[e]={},s.loadModule(t,function(t){t&&(r.snippetManager.files[e]=t,!t.snippets&&t.snippetText&&(t.snippets=r.snippetManager.parseSnippetFile(t.snippetText)),r.snippetManager.register(t.snippets||[],t.scope),t.includeScopes&&(r.snippetManager.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach(function(e){p("ace/mode/"+e)})))})},v=function(e){var t=e.editor,n=e.args||"",r=i.getCompleter(t)&&i.getCompleter(t).activated;if(e.command.name==="backspace")r&&!d(t)&&i.getCompleter(t).detach();else if(e.command.name==="insertstring"){var s=d(t);s&&!r&&(i.getCompleter(t)||i.setCompleter(t,new i.CompleterAggregate(t)),i.getCompleter(t).autoSelect=!1,i.getCompleter(t).autoInsert=!1,i.getCompleter(t).showPopup(t))}};s.defineOptions(u.Editor.prototype,"editor",{enableBasicAutocompletion:{set:function(e){var t=this;e?(t.completers||(t.completers=Array.isArray(e)?e:a),t.commands.addCommand(i.Autocomplete.startCommand)):t.commands.removeCommand(i.Autocomplete.startCommand.name)},value:!1},enableLiveAutocompletion:{set:function(e){var t=this;e?(t.completers||(t.completers=Array.isArray(e)?e:a),t.commands.on("afterExec",v)):t.commands.off("afterExec",v)},value:!1},enableSnippets:{set:function(e){var t=this;e?(t.commands.addCommand(l),t.on("changeMode",c),c(null,t)):(t.commands.removeCommand(l.name),t.off("changeMode",c))},value:!1}})});
                (function() {
                    window.require(["ace/ext/language_tools"], function() {});
                })();
            