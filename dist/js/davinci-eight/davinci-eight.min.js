!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../vendor/almond/almond",function(){}),b("davinci-eight/core",["require","exports"],function(a,b){var c={VERSION:"2.24.0"};return c}),b("davinci-eight/math/Vector3",["require","exports"],function(a,b){var c=function(){function a(a){this.$x=a?a.x:0,this.$y=a?a.y:0,this.$z=a?a.z:0,this.modified=!1}return Object.defineProperty(a.prototype,"x",{get:function(){return this.$x},set:function(a){this.modified=this.modified||this.$x!==a,this.$x=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.$y},set:function(a){this.modified=this.modified||this.$y!==a,this.$y=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.$z},set:function(a){this.modified=this.modified||this.$z!==a,this.$z=a},enumerable:!0,configurable:!0}),a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},a.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},a.prototype.applyQuaternion=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},a.prototype.applySpinor=function(a){var b=this.x,c=this.y,d=this.z,e=a.yz,f=a.zx,g=a.xy,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},a.prototype.clone=function(){return new a({x:this.x,y:this.y,z:this.z})},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},a.prototype.cross=function(a){return this.crossVectors(this,a)},a.prototype.crossVectors=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=d*h-e*g,this.y=e*f-c*h,this.z=c*g-d*f,this},a.prototype.distance=function(a){return Math.sqrt(this.quadrance(a))},a.prototype.quadrance=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},a.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.length=function(){var a=this.x,b=this.y,c=this.z;return Math.sqrt(a*a+b*b+c*c)},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},a.prototype.normalize=function(){return this.divideScalar(this.length())},a.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},a.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this.z*=a,this},a.prototype.set=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=function(a){return this.y=a,this},a.prototype.setZ=function(a){return this.z=a,this},a.prototype.sub=function(a){return this.subVectors(this,a)},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},a.prototype.toString=function(){return"Vector3({x: "+this.x+", y: "+this.y+", z: "+this.z+"})"},a.e1=new a({x:1,y:0,z:0}),a.e2=new a({x:0,y:1,z:0}),a.e3=new a({x:0,y:0,z:1}),a}();return c}),b("davinci-eight/math/Spinor3",["require","exports"],function(a,b){var c=function(){function a(a){this.yz=a?a.yz:0,this.zx=a?a.zx:0,this.xy=a?a.xy:0,this.w=a?a.w:1}return a.prototype.clone=function(){return new a({yz:this.yz,zx:this.zx,xy:this.xy,w:this.w})},a.prototype.toString=function(){return"Spinor3({yz: "+this.yz+", zx: "+this.zx+", xy: "+this.xy+", w: "+this.w+"})"},a}();return c}),b("davinci-eight/core/object3D",["require","exports","../math/Vector3","../math/Spinor3"],function(a,b,c,d){var e=function(){var a=new c,b=new d,e=new c({x:1,y:1,z:1}),f=null,g=[],h={get position(){return a},set position(b){a=b},get attitude(){return b},set attitude(a){b=a},get scale(){return e},set scale(a){e=a},get parent(){return f},get children(){return g},translateOnAxis:function(a,b){throw new Error("Not Implemented")}};return h};return e}),b("davinci-eight/math/Matrix4",["require","exports"],function(a,b){var c=function(){function a(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return a.prototype.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},a.prototype.frustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},a.prototype.makeRotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1),this},a.prototype.mul=function(a){return this.multiplyMatrices(this,a)},a.prototype.multiplyMatrices=function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],k=c[5],l=c[9],m=c[13],n=c[2],o=c[6],p=c[10],q=c[14],r=c[3],s=c[7],t=c[11],u=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],K=d[15];return e[0]=f*v+g*z+h*D+i*H,e[4]=f*w+g*A+h*E+i*I,e[8]=f*x+g*B+h*F+i*J,e[12]=f*y+g*C+h*G+i*K,e[1]=j*v+k*z+l*D+m*H,e[5]=j*w+k*A+l*E+m*I,e[9]=j*x+k*B+l*F+m*J,e[13]=j*y+k*C+l*G+m*K,e[2]=n*v+o*z+p*D+q*H,e[6]=n*w+o*A+p*E+q*I,e[10]=n*x+o*B+p*F+q*J,e[14]=n*y+o*C+p*G+q*K,e[3]=r*v+s*z+t*D+u*H,e[7]=r*w+s*A+t*E+u*I,e[11]=r*x+s*B+t*F+u*J,e[15]=r*y+s*C+t*G+u*K,this},a.prototype.perspective=function(a,b,c,d){var e=c*Math.tan(.5*a),f=-e,g=f*b,h=e*b;return this.frustum(g,h,f,e,c,d)},a.prototype.rotate=function(a){var b=-a.yz,c=-a.zx,d=-a.xy,e=a.w,f=b+b,g=c+c,h=d+d,i=b*f,j=b*g,k=b*h,l=c*g,m=c*h,n=d*h,o=e*f,p=e*g,q=e*h;return this.set(1-l-n,j-q,k+p,0,j+q,1-i-n,m-o,0,k-p,m+o,1-i-l,0,0,0,0,1),this},a.prototype.row=function(a){var b=this.elements;return[b[0+a],b[4+a],b[8+a],b[12+a]]},a.prototype.scale=function(a,b,c){return this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1),this},a.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},a.prototype.toFixed=function(a){for(var b=[],c=0;3>=c;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},a.prototype.toString=function(){for(var a=[],b=0;3>=b;b++)a.push(this.row(b).map(function(a,b){return a.toString()}).join(" "));return a.join("\n")},a.prototype.translate=function(a){return this.set(1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1),this},a}();return c}),b("davinci-eight/core/Symbolic",["require","exports"],function(a,b){var c=function(){function a(){}return a.ATTRIBUTE_POSITION="position",a.ATTRIBUTE_COLOR="color",a.ATTRIBUTE_NORMAL="normal",a.UNIFORM_PROJECTION_MATRIX="projectionMatrix",a.UNIFORM_MODEL_MATRIX="modelMatrix",a.UNIFORM_VIEW_MATRIX="viewMatrix",a.UNIFORM_NORMAL_MATRIX="normalMatrix",a.UNIFORM_AMBIENT_LIGHT="ambientLight",a}();return c}),b("davinci-eight/uniforms/DefaultUniformProvider",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.getUniformMatrix3=function(a){},a.prototype.getUniformMatrix4=function(a){},a.prototype.getUniformVector2=function(a){},a.prototype.getUniformVector3=function(a){},a.prototype.getUniformVector4=function(a){},a.prototype.getUniformMetaInfos=function(){var a={};return a},a}();return c}),b("davinci-eight/cameras/view",["require","exports","../math/Vector3","../math/Matrix4","../core/Symbolic","../uniforms/DefaultUniformProvider"],function(a,b,c,d,e,f){var g="uViewMatrix",h="mat4",i=function(){function a(){var a=(new c).subVectors(b,i);0===a.x&&0===a.y&&0===a.z?a.z=1:a.normalize();var d=(new c).crossVectors(j,a),e=(new c).crossVectors(a,d),f=new c({x:b.dot(d),y:b.dot(e),z:b.dot(a)}).multiplyScalar(-1),g=k.elements;g[0]=d.x,g[4]=d.y,g[8]=d.z,g[12]=f.x,g[1]=e.x,g[5]=e.y,g[9]=e.z,g[13]=f.y,g[2]=a.x,g[6]=a.y,g[10]=a.z,g[14]=f.z,g[3]=0,g[7]=0,g[11]=0,g[15]=1}var b=new c,i=new c,j=c.e2,k=new d,l=new f;b.modified=!0,i.modified=!0,j.modified=!0;var m={get eye(){return b},set eye(a){b.x=a.x,b.y=a.y,b.z=a.z},get look(){return i},set look(a){i.x=a.x,i.y=a.y,i.z=a.z},get up(){return j},set up(a){j.x=a.x,j.y=a.y,j.z=a.z,j.normalize()},getUniformMatrix3:function(a){return l.getUniformMatrix3(a)},getUniformMatrix4:function(c){switch(c){case g:return(b.modified||i.modified||j.modified)&&(a(),b.modified=!1,i.modified=!1,j.modified=!1),{transpose:!1,matrix4:k.elements};default:return l.getUniformMatrix4(c)}},getUniformVector2:function(a){return l.getUniformVector2(a)},getUniformVector3:function(a){return l.getUniformVector3(a)},getUniformVector4:function(a){return l.getUniformVector4(a)},getUniformMetaInfos:function(){var a=l.getUniformMetaInfos();if("object"==typeof a)return a[e.UNIFORM_VIEW_MATRIX]={name:g,glslType:h},a;throw new Error("Unexpected typeof uniforms => "+typeof a)}};return m};return i}),b("davinci-eight/math/clamp",["require","exports"],function(a,b){function c(a,b,c){return b>a?b:a>c?c:a}return c}),b("davinci-eight/core/Color",["require","exports","../math/clamp"],function(a,b,c){var d=function(){function a(a,b,d,e){void 0===e&&(e=1),this.red=a,this.green=b,this.blue=d,this.alpha="number"==typeof e?c(e,0,1):1}return a.prototype.luminance=function(){return a.luminance(this.red,this.green,this.blue)},a.prototype.toString=function(){return"Color("+this.red+", "+this.green+", "+this.blue+", "+this.alpha+")"},a.luminance=function(a,b,c){var d=2.2;return.2126*Math.pow(a,d)+.7152*Math.pow(b,d)+.0722*Math.pow(c,d)},a.fromHSL=function(b,c,d){function e(a){return a>2*Math.PI?e(a-2*Math.PI):0>a?e(a+2*Math.PI):a}function f(b,c,e){var f=(a.luminance(b,c,e),d-.5*g);return new a(b+f,c+f,e+f,1)}var g=(1-Math.abs(2*d-1))*c,h=e(b)/Math.PI*3%6,i=g*(1-Math.abs(h%2-1));return h>=0&&1>h?f(g,i,0):h>=1&&2>h?f(i,g,0):h>=2&&3>h?f(0,g,g*(h-2)):h>=3&&4>h?f(0,g*(4-h),g):h>=4&&5>h?f(i,0,g):h>=5&&6>h?f(g,0,i):f(0,0,0)},a}();return d}),b("davinci-eight/cameras/frustum",["require","exports","davinci-eight/cameras/view","davinci-eight/math/Matrix4","davinci-eight/core/Symbolic"],function(a,b,c,d,e){var f="uProjectionMatrix",g="mat4",h=function(a,b,h,i,j,k){function l(){n.frustum(a,b,h,i,j,k)}void 0===a&&(a=-1),void 0===b&&(b=1),void 0===h&&(h=-1),void 0===i&&(i=1),void 0===j&&(j=1),void 0===k&&(k=1e3);var m=c(),n=new d;l();var o={get eye(){return m.eye},set eye(a){m.eye=a},get look(){return m.look},set look(a){m.look=a},get up(){return m.up},set up(a){m.up=a},get left(){return a},set left(b){a=b,l()},get right(){return b},set right(a){b=a,l()},get bottom(){return h},set bottom(a){h=a,l()},get top(){return i},set top(a){i=a,l()},get near(){return j},set near(a){j=a,l()},get far(){return k},set far(a){k=a,l()},getUniformMatrix3:function(a){return m.getUniformMatrix3(a)},getUniformMatrix4:function(a){switch(a){case f:return{transpose:!1,matrix4:n.elements};default:return m.getUniformMatrix4(a)}},getUniformVector2:function(a){return m.getUniformVector2(a)},getUniformVector3:function(a){return m.getUniformVector3(a)},getUniformVector4:function(a){return m.getUniformVector4(a)},getUniformMetaInfos:function(){var a=m.getUniformMetaInfos();return a[e.UNIFORM_PROJECTION_MATRIX]={name:f,glslType:g},a}};return o};return h}),b("davinci-eight/cameras/perspective",["require","exports","davinci-eight/cameras/view","davinci-eight/math/Matrix4","davinci-eight/core/Symbolic"],function(a,b,c,d,e){var f="uProjectionMatrix",g="mat4",h=function(a,b,h,i){void 0===a&&(a=75*Math.PI/180),void 0===b&&(b=1),void 0===h&&(h=.1),void 0===i&&(i=2e3);var j=c(),k=new d,l=!0,m={get eye(){return j.eye},set eye(a){j.eye=a},get look(){return j.look},set look(a){j.look=a},get up(){return j.up},set up(a){j.up=a},get fov(){return a},set fov(b){a=b,l=l||a!==b},get aspect(){return b},set aspect(a){b=a,l=l||b!==a},get near(){return h},set near(a){h=a,l=l||h!==a},get far(){return i},set far(a){i=a,l=l||i!==a},getUniformMatrix3:function(a){return j.getUniformMatrix3(a)},getUniformMatrix4:function(c){switch(c){case f:return l&&(k.perspective(a,b,h,i),l=!1),{transpose:!1,matrix4:k.elements};default:return j.getUniformMatrix4(c)}},getUniformVector2:function(a){return j.getUniformVector2(a)},getUniformVector3:function(a){return j.getUniformVector3(a)},getUniformVector4:function(a){return j.getUniformVector4(a)},getUniformMetaInfos:function(){var a=j.getUniformMetaInfos();return a[e.UNIFORM_PROJECTION_MATRIX]={name:f,glslType:g},a}};return m};return h}),b("davinci-eight/worlds/world",["require","exports"],function(a,b){var c=function(){var a,b,c=[],d={},e={get drawGroups(){return d},get children(){return c},contextFree:function(){for(var a=0,b=c.length;b>a;a++)c[a].contextFree()},contextGain:function(b,e){a=b,e=e,c.forEach(function(a){a.contextGain(b,e);var c=a.drawGroupName;d[c]||(d[c]=[]),d[c].push(a)})},contextLoss:function(){c.forEach(function(a){a.contextLoss()}),a=void 0,b=void 0},hasContext:function(){return!!a},add:function(a){c.push(a)}};return e};return c}),b("davinci-eight/renderers/ViewportArgs",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d){this.x=0,this.y=0,this.width=c,this.height=d,this.modified=!1}return a}();return c}),b("davinci-eight/renderers/viewport",["require","exports","../core/Color","../renderers/ViewportArgs"],function(a,b,c,d){var e=function(a){function b(a,b,c,d){f&&f.viewport(a*i,b*i,c*i,d*i)}function e(){var a=0;f&&(j&&(a|=f.COLOR_BUFFER_BIT),k&&(a|=f.DEPTH_BUFFER_BIT),f.clear(a))}a=a||{};var f,g,h=void 0!==a.canvas?a.canvas:document.createElement("canvas"),i=(void 0!==a.alpha?a.alpha:!1,void 0!==a.depth?a.depth:!0,void 0!==a.stencil?a.stencil:!0,void 0!==a.antialias?a.antialias:!1,void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,1),j=!0,k=!0,l=new c(1,1,1,1),m=new d(0,0,h.width,h.height),n={get canvas(){return h},get context(){return f},contextFree:function(){f=void 0},contextGain:function(a,b){f=a,f.enable(f.DEPTH_TEST),f.enable(f.SCISSOR_TEST)},contextLoss:function(){f=void 0},hasContext:function(){return!!f},clearColor:function(a,b,c,d){l.red=a,l.green=b,l.blue=c,l.alpha=d},render:function(a,b){if(f){f.scissor(m.x,m.y,m.width,m.height),f.viewport(m.x,m.y,m.width,m.height),f.clearColor(l.red,l.green,l.blue,l.alpha),e();a.hasContext()||a.contextGain(f,g);var c,d=function(a,d){c||(a.useProgram(),c=!0),b.forEach(function(b){a.draw(b)})};for(var h in a.drawGroups)c=!1,a.drawGroups[h].forEach(d)}},setViewport:b,get x(){return m.x},set x(a){m.x=a},get y(){return m.y},set y(a){m.y=a},get width(){return m.width},set width(a){m.width=a},get height(){return m.height},set height(a){m.height=a},setSize:function(a,c,d){h.width=a*i,h.height=c*i,d!==!1&&(h.style.width=a+"px",h.style.height=c+"px"),b(0,0,a,c)}};return n};return e}),b("davinci-eight/core/ElementArray",["require","exports"],function(a,b){function c(a,b){return a.dynamics()?b.DYNAMIC_DRAW:b.STATIC_DRAW}var d=function(){function a(a){this.attributes=a}return a.prototype.contextFree=function(){this.buffer&&(this.context.deleteBuffer(this.buffer),this.buffer=void 0),this.context=void 0},a.prototype.contextGain=function(a,b){this.attributes.hasElements()&&(this.buffer=a.createBuffer()),this.context=a},a.prototype.contextLoss=function(){this.buffer=void 0,this.context=void 0},a.prototype.bufferData=function(a){if(this.buffer){var b=a.getElements();this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.buffer);var d=c(a,this.context);this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,b,d)}},a.prototype.bind=function(){this.buffer&&this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.buffer)},a}();return d}),b("davinci-eight/uniforms/ChainedUniformProvider",["require","exports"],function(a,b){var c=function(){function a(a,b){this.provider=a,this.fallback=b}return a.prototype.getUniformMatrix3=function(a){var b=this.provider.getUniformMatrix3(a);return b?b:this.fallback.getUniformMatrix3(a)},a.prototype.getUniformMatrix4=function(a){var b=this.provider.getUniformMatrix4(a);return b?b:this.fallback.getUniformMatrix4(a)},a.prototype.getUniformVector2=function(a){var b=this.provider.getUniformVector2(a);return b?b:this.fallback.getUniformVector3(a)},a.prototype.getUniformVector3=function(a){var b=this.provider.getUniformVector3(a);return b?b:this.fallback.getUniformVector3(a)},a.prototype.getUniformVector4=function(a){var b=this.provider.getUniformVector4(a);return b?b:this.fallback.getUniformVector4(a)},a.prototype.getUniformMetaInfos=function(){var a={},b=this.provider.getUniformMetaInfos();for(name in b)a[name]=b[name];var c=this.fallback.getUniformMetaInfos();for(name in c)a[name]=c[name];return a},a}();return c}),b("davinci-eight/objects/drawableModel",["require","exports","../core/ElementArray","../uniforms/ChainedUniformProvider"],function(a,b,c,d){var e=function(a,b,e){function f(a,b){for(var c in b){var d=b[c];if(d.name===a)return d}}function g(c){var d=f(c.name,a.getAttributeMetaInfos());if(d)return b.attributeVariable(c.name);throw new Error("The mesh does not support the attribute variable named "+name)}function h(a){return b.uniformVariable(a.name)}function i(){a.update(b.attributes),m.forEach(function(b){b.bufferData(a)}),l.bufferData(a)}var j,k,l=new c(a),m=b.attributes.map(g),n=b.uniforms.map(h),o={get mesh(){return a},get shaders(){return b},get model(){return e},contextFree:function(){b.contextFree(),l.contextFree(),j=null,k=null},contextGain:function(c,d){j=c,k!==d&&(k=d,b.contextGain(j,d),l.contextGain(j,d),a.dynamics()||i())},contextLoss:function(){b.contextLoss(),l.contextLoss(),j=null,k=null},hasContext:function(){return b.hasContext()},get drawGroupName(){return b.programId},useProgram:function(){return b.use()},draw:function(c){b.hasContext()&&(a.dynamics()&&i(),n.forEach(function(a){var b=new d(e,c);switch(a.glslType){case"vec2":var f=b.getUniformVector2(a.name);if(!f)throw new Error("Expecting data for uniform "+a.name);if(2!==f.length)throw new Error("Expecting data for uniform "+a.name+" to be number[] with length 2");a.uniform2fv(f);break;case"vec3":var f=b.getUniformVector3(a.name);if(!f)throw new Error("Expecting data for uniform "+a.name);if(3!==f.length)throw new Error("Expecting data for uniform "+a.name+" to be number[] with length 3");a.uniform3fv(f);break;case"vec4":var f=b.getUniformVector4(a.name);if(!f)throw new Error("Expecting data for uniform "+a.name);if(4!==f.length)throw new Error("Expecting data for uniform "+a.name+" to be number[] with length 4");a.uniform4fv(f);break;case"mat3":var g=b.getUniformMatrix3(a.name);if(!g)throw new Error("Expecting data for uniform "+a.name);a.uniformMatrix3fv(g.transpose,g.matrix3);break;case"mat4":var h=b.getUniformMatrix4(a.name);if(!h)throw new Error("Expecting data for uniform "+a.name);a.uniformMatrix4fv(h.transpose,h.matrix4);break;default:throw new Error("Unexpected uniform GLSL type in drawableModel.draw: "+a.glslType)}}),m.forEach(function(a){a.enable()}),m.forEach(function(b){var c=f(b.name,a.getAttributeMetaInfos());if(!c)throw new Error("The mesh does not support the attribute variable named "+b.name);var d=c.size,e=j.FLOAT,g=c.normalized,h=c.stride,i=c.offset;b.dataFormat(d,e,g,h,i)}),l.bind(),a.draw(j),m.forEach(function(a){a.disable()}))}};return o};return e}),b("davinci-eight/core/Face3",["require","exports","../math/Vector3"],function(a,b,c){var d=function(){function a(a,b,d,e){this.a=a,this.b=b,this.c=d,this.normal=e instanceof c?e:new c,this.vertexNormals=e instanceof Array?e:[]}return a}();return d}),b("davinci-eight/math/Sphere",["require","exports","../math/Vector3"],function(a,b,c){var d=function(){function a(a,b){this.center=void 0!==a?a:new c,this.radius=void 0!==b?b:0}return a.prototype.setFromPoints=function(a){throw new Error("Not Implemented: Sphere.setFromPoints")},a}();return d}),b("davinci-eight/geometries/Geometry",["require","exports","../math/Sphere","../math/Vector3"],function(a,b,c,d){var e=function(){function a(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.boundingSphere=null}return a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new c),this.boundingSphere.setFromPoints(this.vertices)},a.prototype.computeFaceNormals=function(){for(var a=new d,b=new d,c=0,e=this.faces.length;e>c;c++){var f=this.faces[c],g=this.vertices[f.a],h=this.vertices[f.b],i=this.vertices[f.c];a.subVectors(i,h),b.subVectors(g,h),a.cross(b),a.normalize(),f.normal.copy(a)}},a.prototype.computeVertexNormals=function(a){var b,c,e,f,g=this.vertices.length,h=new Array(this.vertices.length);for(b=0,g=this.vertices.length;g>b;b++)h[b]=new d;if(a){var i,j,k,l=new d,m=new d;for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],i=this.vertices[f.a],j=this.vertices[f.b],k=this.vertices[f.c],l.subVectors(k,j),m.subVectors(i,j),l.cross(m),h[f.a].add(l),h[f.b].add(l),h[f.c].add(l)}else for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],h[f.a].add(f.normal),h[f.b].add(f.normal),h[f.c].add(f.normal);for(b=0,g=this.vertices.length;g>b;b++)h[b].normalize();for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],f.vertexNormals[0]=h[f.a].clone(),f.vertexNormals[1]=h[f.b].clone(),f.vertexNormals[2]=h[f.c].clone()},a.prototype.mergeVertices=function(){var a,b,c,d,e,f,g,h,i={},j=[],k=[],l=4,m=Math.pow(10,l);for(c=0,d=this.vertices.length;d>c;c++)a=this.vertices[c],b=Math.round(a.x*m)+"_"+Math.round(a.y*m)+"_"+Math.round(a.z*m),void 0===i[b]?(i[b]=c,j.push(this.vertices[c]),k[c]=j.length-1):k[c]=k[i[b]];var n=[];for(c=0,d=this.faces.length;d>c;c++){e=this.faces[c],e.a=k[e.a],e.b=k[e.b],e.c=k[e.c],f=[e.a,e.b,e.c];for(var o=-1,p=0;3>p;p++)if(f[p]==f[(p+1)%3]){o=p,n.push(c);break}}for(c=n.length-1;c>=0;c--){var q=n[c];for(this.faces.splice(q,1),g=0,h=this.faceVertexUvs.length;h>g;g++)this.faceVertexUvs[g].splice(q,1)}var r=this.vertices.length-j.length;return this.vertices=j,r},a}();return e}),b("davinci-eight/core/Line3",["require","exports"],function(a,b){var c=function(){function a(a,b){this.a=a,this.b=b}return a}();return c}),b("davinci-eight/core/Point3",["require","exports"],function(a,b){var c=function(){function a(a){this.a=a}return a}();return c}),b("davinci-eight/core/DrawMode",["require","exports"],function(a,b){var c;return function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.TRIANGLES=2]="TRIANGLES"}(c||(c={})),c}),b("davinci-eight/geometries/GeometryAdapter",["require","exports","../core/Line3","../core/Point3","../core/Color","../core/Symbolic","../core/DrawMode"],function(a,b,c,d,e,f,g){function h(a,b,c,d){return new e(d.x,d.y,d.z,1)}var i="aVertexPosition",j="aVertexColor",k="aVertexNormal",l=function(){function a(a,b){this.$drawMode=g.TRIANGLES,this.grayScale=!1,this.lines=[],this.points=[],b=b||{},b.drawMode="undefined"!=typeof b.drawMode?b.drawMode:g.TRIANGLES,this.geometry=a,this.color=new e(1,1,0,1),this.geometry.dynamic=!1,this.$drawMode=b.drawMode}return Object.defineProperty(a.prototype,"drawMode",{get:function(){return this.$drawMode},set:function(a){throw new Error("The drawMode property is readonly")},enumerable:!0,configurable:!0}),a.prototype.draw=function(a){switch(this.drawMode){case g.POINTS:a.drawArrays(a.POINTS,0,1*this.points.length);break;case g.LINES:a.drawArrays(a.LINES,0,2*this.lines.length);break;case g.TRIANGLES:a.drawArrays(a.TRIANGLES,0,3*this.geometry.faces.length)}},a.prototype.dynamics=function(){return this.geometry.dynamic},a.prototype.hasElements=function(){return!0},a.prototype.getElements=function(){return this.elementArray},a.prototype.getVertexAttributeData=function(a){switch(a){case i:return this.aVertexPositionArray;case j:return this.aVertexColorArray;case k:return this.aVertexNormalArray;default:return}},a.prototype.getAttributeMetaInfos=function(){var a={};return a[f.ATTRIBUTE_POSITION]={name:i,glslType:"vec3",size:3,normalized:!1,stride:0,offset:0},this.grayScale||(a[f.ATTRIBUTE_COLOR]={name:j,glslType:"vec4",size:4,normalized:!1,stride:0,offset:0}),this.drawMode===g.TRIANGLES&&(a[f.ATTRIBUTE_NORMAL]={name:k,glslType:"vec3",size:3,normalized:!1,stride:0,offset:0}),a},a.prototype.update=function(a){var b=[],c=[],d=[],e=[],f=this.geometry.vertices,i=this.color,j=this.colorFunction,k=function(a,b,c,d){return i?i:j?j(a,b,c,d):h(a,b,c,d)};switch(this.drawMode){case g.POINTS:this.points=[],this.computePoints(),this.points.forEach(function(a){e.push(a.a);var d=f[a.a];b.push(d.x),b.push(d.y),b.push(d.z);var g=i;c.push(g.red),c.push(g.green),c.push(g.blue),c.push(g.alpha)});break;case g.LINES:this.lines=[],this.computeLines(),this.lines.forEach(function(a){e.push(a.a),e.push(a.b);var d=f[a.a];b.push(d.x),b.push(d.y),b.push(d.z);var g=f[a.b];b.push(g.x),b.push(g.y),b.push(g.z);var h=i,j=i;c.push(h.red),c.push(h.green),c.push(h.blue),c.push(h.alpha),c.push(j.red),c.push(j.green),c.push(j.blue),c.push(j.alpha)});break;case g.TRIANGLES:this.geometry.faces.forEach(function(a){e.push(a.a),e.push(a.b),e.push(a.c);var g=f[a.a];b.push(g.x),b.push(g.y),b.push(g.z);var h=f[a.b];b.push(h.x),b.push(h.y),b.push(h.z);var i=f[a.c];b.push(i.x),b.push(i.y),b.push(i.z);var j=f[a.a],l=f[a.b].clone(),m=f[a.c].clone(),n=l.sub(j).cross(m.sub(j)),o=n.divideScalar(n.length());d.push(o.x),d.push(o.y),d.push(o.z),d.push(o.x),d.push(o.y),d.push(o.z),d.push(o.x),d.push(o.y),d.push(o.z);var p=k(a.a,a,f,o),q=k(a.b,a,f,o),r=k(a.c,a,f,o);c.push(p.red),c.push(p.green),c.push(p.blue),c.push(p.alpha),c.push(q.red),c.push(q.green),c.push(q.blue),c.push(q.alpha),c.push(r.red),c.push(r.green),c.push(r.blue),c.push(r.alpha)})}this.elementArray=new Uint16Array(e),this.aVertexPositionArray=new Float32Array(b),this.aVertexColorArray=new Float32Array(c),this.aVertexNormalArray=new Float32Array(d)},a.prototype.computeLines=function(){var a=this.lines;this.geometry.faces.forEach(function(b){a.push(new c(b.a,b.b)),a.push(new c(b.b,b.c)),a.push(new c(b.c,b.a))})},a.prototype.computePoints=function(){var a=this.points;this.geometry.faces.forEach(function(b){a.push(new d(b.a)),a.push(new d(b.b)),a.push(new d(b.c))})},a}();return l}),b("davinci-eight/math/Vector2",["require","exports"],function(a,b){var c=function(){function a(a,b){this.x=a||0,this.y=b||0}return a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=function(a){return this.y=a,this},a.prototype.setComponent=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}},a.prototype.getComponent=function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.addScalar=function(a){return this.x+=a,this.y+=a,this},a.prototype.addVectors=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.subScalar=function(a){return this.x-=a,this.y-=a,this},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},a.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this},a.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this},a.prototype.divide=function(a){return this.x/=a.x,this.y/=a.y,this},a.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b}else this.x=0,this.y=0;return this},a.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},a.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},a.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},a.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},a.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},a.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.normalize=function(){return this.divideScalar(this.length())},a.prototype.distanceTo=function(a){return Math.sqrt(this.distanceToSquared(a))},a.prototype.distanceToSquared=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},a.prototype.setLength=function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},a.prototype.lerpVectors=function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},
a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},a.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a},a.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},a.prototype.clone=function(){return new a(this.x,this.y)},a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/RevolutionGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Spinor3","../math/Vector2"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j){a.call(this),f=f||12,h=h||0,i=i||2*Math.PI;var k,l,m,n,o=Math.abs(2*Math.PI-Math.abs(i-h))<1e-4,p=o?f:f+1,q=1/f,r=(i-h)*q;for(k=0,m=p;m>k;k++){var s=h+k*r,t=s/2,u=Math.cos(t),v=Math.sin(t),w=new e({yz:d.yz*v,zx:d.zx*v,xy:d.xy*v,w:u});for(l=0,n=b.length;n>l;l++){var x=b[l].clone();x.applySpinor(w),j&&x.applySpinor(j),this.vertices.push(x)}}var y=1/(b.length-1),z=b.length,A=z*p;for(k=0,m=f;m>k;k++)for(l=0,n=b.length-1;n>l;l++){var B=l+z*k,C=B%A,D=(B+z)%A,E=(B+1+z)%A,F=(B+1)%A,G=k*q,H=l*y,I=G+q,J=H+y;this.faces.push(new c(F,D,C)),this.faceVertexUvs[0].push([new g(G,H),new g(I,H),new g(G,J)]),this.faces.push(new c(F,E,D)),this.faceVertexUvs[0].push([new g(I,H),new g(I,J),new g(G,J)])}this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/ArrowGeometry",["require","exports","../geometries/RevolutionGeometry","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e){var g=function(a){function b(b,c,f,g,h,i,j,k){void 0===b&&(b=1),void 0===c&&(c=new d),void 0===f&&(f=12),void 0===g&&(g=1),void 0===h&&(h=.01),void 0===i&&(i=.08),void 0===j&&(j=.2),void 0===k&&(k=e.e3.clone()),b=b||1,c=c||new d,g=(g||1)*b,h=(h||.01)*b,i=(i||.08)*b,j=(j||.2)*b,k=k||e.e3.clone();var l=g-j,m=g/2,n=function(a){return a.x?2:a.y?1:0},o=function(a){return a.x>0?1:a.x<0?-1:a.y>0?1:a.y<0?-1:a.z>0?1:a.z<0?-1:0},p=function(a){var b=n(a),c=o(a),f=(b+0)%3,g=(b+1)%3,j=(b+2)%3,k=[[0,0,m*c],[i,0,(l-m)*c],[h,0,(l-m)*c],[h,0,-m*c],[0,0,-m*c]],p=k.map(function(a){return new e({x:a[f],y:a[g],z:a[j]})}),q=new d({yz:a.x,zx:a.y,xy:a.z,w:0});return{points:p,generator:q}},q=p(k);a.call(this,q.points,q.generator,f,0,2*Math.PI,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/BoxGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j){function k(a,b,d,f,h,i,j,k){var m,n,o,p=l.widthSegments,q=l.heightSegments,r=h/2,s=i/2,t=l.vertices.length;"x"===a&&"y"===b||"y"===a&&"x"===b?m="z":"x"===a&&"z"===b||"z"===a&&"x"===b?(m="y",q=l.depthSegments):("z"===a&&"y"===b||"y"===a&&"z"===b)&&(m="x",p=l.depthSegments);var u=p+1,v=q+1,w=h/p,x=i/q,y=new g;for(y[m]=j>0?1:-1,o=0;v>o;o++)for(n=0;u>n;n++){var z=new g;z[a]=(n*w-r)*d,z[b]=(o*x-s)*f,z[m]=j,l.vertices.push(z)}for(o=0;q>o;o++)for(n=0;p>n;n++){var A=n+u*o,B=n+u*(o+1),C=n+1+u*(o+1),D=n+1+u*o,E=new e(n/p,1-o/q),F=new e(n/p,1-(o+1)/q),G=new e((n+1)/p,1-(o+1)/q),H=new e((n+1)/p,1-o/q),I=new c(A+t,B+t,D+t);I.normal.copy(y),I.vertexNormals.push(y.clone(),y.clone(),y.clone()),l.faces.push(I),l.faceVertexUvs[0].push([E,F,H]),I=new c(B+t,C+t,D+t),I.normal.copy(y),I.vertexNormals.push(y.clone(),y.clone(),y.clone()),l.faces.push(I),l.faceVertexUvs[0].push([F.clone(),G,H.clone()])}}void 0===h&&(h=1),void 0===i&&(i=1),void 0===j&&(j=1),a.call(this),this.widthSegments=h||1,this.heightSegments=i||1,this.depthSegments=j||1;var l=this,m=b/2,n=d/2,o=f/2;k("z","y",-1,-1,f,d,m,0),k("z","y",1,-1,f,d,-m,1),k("x","z",1,1,b,f,n,2),k("x","z",1,-1,b,f,-n,3),k("x","y",1,-1,b,d,o,4),k("x","y",-1,-1,b,d,-o,5),this.mergeVertices()}return f(b,a),b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/CylinderGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j,k,l){a.call(this),b=void 0!==b?b:1,d=void 0!==d?d:1,f=void 0!==f?f:1,h=h||16,i=i||1,j=void 0!==j?j:!1,k=void 0!==k?k:0,l=void 0!==l?l:2*Math.PI;var m,n,o=f/2,p=[],q=[];for(n=0;i>=n;n++){var r=[],s=[],t=n/i,u=t*(d-b)+b;for(m=0;h>=m;m++){var v=m/h,w=new g;w.x=u*Math.sin(v*l+k),w.y=-t*f+o,w.z=u*Math.cos(v*l+k),this.vertices.push(w),r.push(this.vertices.length-1),s.push(new e(v,1-t))}p.push(r),q.push(s)}var x,y,z=(d-b)/f;for(m=0;h>m;m++)for(0!==b?(x=this.vertices[p[0][m]].clone(),y=this.vertices[p[0][m+1]].clone()):(x=this.vertices[p[1][m]].clone(),y=this.vertices[p[1][m+1]].clone()),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*z).normalize(),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*z).normalize(),n=0;i>n;n++){var A=p[n][m],B=p[n+1][m],C=p[n+1][m+1],D=p[n][m+1],E=x.clone(),F=x.clone(),G=y.clone(),H=y.clone(),I=q[n][m].clone(),J=q[n+1][m].clone(),K=q[n+1][m+1].clone(),L=q[n][m+1].clone();this.faces.push(new c(A,B,D,[E,F,H])),this.faceVertexUvs[0].push([I,J,L]),this.faces.push(new c(B,C,D,[F.clone(),G,H.clone()])),this.faceVertexUvs[0].push([J.clone(),K,L.clone()])}if(j===!1&&b>0)for(this.vertices.push(g.e2.clone().multiplyScalar(o)),m=0;h>m;m++){var A=p[0][m],B=p[0][m+1],C=this.vertices.length-1,E=g.e2,F=g.e2,G=g.e2,I=q[0][m].clone(),J=q[0][m+1].clone(),K=new e(J.x,0);this.faces.push(new c(A,B,C,[E,F,G])),this.faceVertexUvs[0].push([I,J,K])}if(j===!1&&d>0)for(this.vertices.push(g.e2.clone().multiplyScalar(-o)),m=0;h>m;m++){var A=p[i][m+1],B=p[i][m],C=this.vertices.length-1,E=g.e2.clone().multiplyScalar(-1),F=g.e2.clone().multiplyScalar(-1),G=g.e2.clone().multiplyScalar(-1),I=q[i][m+1].clone(),J=q[i][m].clone(),K=new e(J.x,1);this.faces.push(new c(A,B,C,[E,F,G])),this.faceVertexUvs[0].push([I,J,K])}this.computeFaceNormals()}return f(b,a),b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/PolyhedronGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Sphere","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,d,f,i){function j(a){var b=a.normalize().clone();b.index=p.vertices.push(b)-1;var c=m(a)/2/Math.PI+.5,d=n(a)/Math.PI+.5;return b.uv=new g(c,1-d),b}function k(a,b,d){var e=new c(a.index,b.index,d.index,[a.clone(),b.clone(),d.clone()]);p.faces.push(e),y.copy(a).add(b).add(d).divideScalar(3);var f=m(y);p.faceVertexUvs[0].push([o(a.uv,a,f),o(b.uv,b,f),o(d.uv,d,f)])}function l(a,b){for(var c=Math.pow(2,b),d=j(p.vertices[a.a]),e=j(p.vertices[a.b]),f=j(p.vertices[a.c]),g=[],h=0;c>=h;h++){g[h]=[];for(var i=j(d.clone().lerp(f,h/c)),l=j(e.clone().lerp(f,h/c)),m=c-h,n=0;m>=n;n++)0==n&&h==c?g[h][n]=i:g[h][n]=j(i.clone().lerp(l,n/m))}for(var h=0;c>h;h++)for(var n=0;2*(c-h)-1>n;n++){var o=Math.floor(n/2);n%2==0?k(g[h][o+1],g[h+1][o],g[h][o]):k(g[h][o+1],g[h+1][o+1],g[h+1][o])}}function m(a){return Math.atan2(a.z,-a.x)}function n(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function o(a,b,c){return 0>c&&1===a.x&&(a=new g(a.x-1,a.y)),0===b.x&&0===b.z&&(a=new g(c/2/Math.PI+.5,a.y)),a.clone()}a.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:b,indices:d,radius:f,detail:i},f=f||1,i=i||0;for(var p=this,q=0,r=b.length;r>q;q+=3)j(new h({x:b[q],y:b[q+1],z:b[q+2]}));for(var s=this.vertices,t=[],q=0,u=0,r=d.length;r>q;q+=3,u++){var v=s[d[q]],w=s[d[q+1]],x=s[d[q+2]];t[u]=new c(v.index,w.index,x.index,[v.clone(),w.clone(),x.clone()])}for(var y=new h,q=0,z=t.length;z>q;q++)l(t[q],i);for(var q=0,A=this.faceVertexUvs[0].length;A>q;q++){var B=this.faceVertexUvs[0][q],C=B[0].x,D=B[1].x,E=B[2].x,F=Math.max(C,Math.max(D,E)),G=Math.min(C,Math.min(D,E));F>.9&&.1>G&&(.2>C&&(B[0].x+=1),.2>D&&(B[1].x+=1),.2>E&&(B[2].x+=1))}for(var q=0,H=this.vertices.length;H>q;q++)this.vertices[q].multiplyScalar(f);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new e(new h,f)}return f(b,a),b}(d);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/DodecahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=(1+Math.sqrt(5))/2,e=1/d,g=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-e,-d,0,-e,d,0,e,-d,0,e,d,-e,-d,0,-e,d,0,e,-d,0,e,d,0,-d,0,-e,d,0,-e,-d,0,e,d,0,e],h=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i=function(a){function b(b,c){a.call(this,g,h,b,c)}return f(b,a),b}(c);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/IcosahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=(1+Math.sqrt(5))/2,e=[-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],g=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],h=function(a){function b(b,c){a.call(this,e,g,b,c),this.type="IcosahedronGeometry"}return f(b,a),b}(c);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/ParametricGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2"],function(a,b,c,d,e){var g=function(a){function b(b,d,f){a.call(this);var g,h,i,j,k,l=this.vertices,m=this.faces,n=this.faceVertexUvs[0],o=d+1;for(g=0;f>=g;g++)for(k=g/f,h=0;d>=h;h++)j=h/d,i=b(j,k),l.push(i);var p,q,r,s,t,u,v,w;for(g=0;f>g;g++)for(h=0;d>h;h++)p=g*o+h,q=g*o+h+1,r=(g+1)*o+h+1,s=(g+1)*o+h,t=new e(h/d,g/f),u=new e((h+1)/d,g/f),v=new e((h+1)/d,(g+1)/f),w=new e(h/d,(g+1)/f),m.push(new c(p,q,s)),n.push([t,u,w]),m.push(new c(q,r,s)),n.push([u.clone(),v,w.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b}(d);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/KleinBottleGeometry",["require","exports","../geometries/ParametricGeometry","../math/Vector3"],function(a,b,c,d){function e(a,b){var c=new d;return a=2*a*i,b=2*b*i,i>a?(c.x=3*g(a)*(1+h(a))+2*(1-g(a)/2)*g(a)*g(b),c.z=-8*h(a)-2*(1-g(a)/2)*h(a)*g(b)):(c.x=3*g(a)*(1+h(a))+2*(1-g(a)/2)*g(b+i),c.z=-8*h(a)),c.y=-2*(1-g(a)/2)*h(b),c}var g=Math.cos,h=Math.sin,i=Math.PI,j=function(a){function b(b,c){a.call(this,e,b,c)}return f(b,a),b}(c);return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/MobiusStripGeometry",["require","exports","../geometries/ParametricGeometry","../math/Vector3"],function(a,b,c,d){function e(a,b){var c=new d,e=1,f=.05,j=(2*a-1)*f,k=2*i*b;return c.x=(e+j*g(k/2))*g(k),c.y=(e+j*g(k/2))*h(k),c.z=j*h(k/2),c}var g=Math.cos,h=Math.sin,i=Math.PI,j=function(a){function b(b,c){a.call(this,e,b,c)}return f(b,a),b}(c);return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/OctahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],e=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],g=function(a){function b(b,c){a.call(this,d,e,b,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/SphereGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Sphere","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,d,f,i,j,k,l){a.call(this),b=b||1,d=Math.max(3,Math.floor(d)||16),f=Math.max(2,Math.floor(f)||12),i=void 0!==i?i:0,j=void 0!==j?j:2*Math.PI,k=void 0!==k?k:0,l=void 0!==l?l:Math.PI;var m,n,o=[],p=[];for(n=0;f>=n;n++){var q=[],r=[];for(m=0;d>=m;m++){var s=m/d,t=n/f,u=new h;u.x=-b*Math.cos(i+s*j)*Math.sin(k+t*l),u.y=b*Math.cos(k+t*l),u.z=b*Math.sin(i+s*j)*Math.sin(k+t*l),this.vertices.push(u),q.push(this.vertices.length-1),r.push(new g(s,1-t))}o.push(q),p.push(r)}for(n=0;f>n;n++)for(m=0;d>m;m++){var v=o[n][m+1],w=o[n][m],x=o[n+1][m],y=o[n+1][m+1],z=this.vertices[v].clone().normalize(),A=this.vertices[w].clone().normalize(),B=this.vertices[x].clone().normalize(),C=this.vertices[y].clone().normalize(),D=p[n][m+1].clone(),E=p[n][m].clone(),F=p[n+1][m].clone(),G=p[n+1][m+1].clone();Math.abs(this.vertices[v].y)===b?(D.x=(D.x+E.x)/2,this.faces.push(new c(v,x,y,[z,B,C])),this.faceVertexUvs[0].push([D,F,G])):Math.abs(this.vertices[x].y)===b?(F.x=(F.x+G.x)/2,this.faces.push(new c(v,w,x,[z,A,B])),this.faceVertexUvs[0].push([D,E,F])):(this.faces.push(new c(v,w,y,[z,A,C])),this.faceVertexUvs[0].push([D,E,G]),this.faces.push(new c(w,x,y,[A.clone(),B,C.clone()])),this.faceVertexUvs[0].push([E.clone(),F,G.clone()]))}this.computeFaceNormals(),this.boundingSphere=new e(new h,b)}return f(b,a),b}(d);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/TetrahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],e=[2,1,0,0,3,2,1,3,0,2,3,1],g=function(a){function b(b,c){a.call(this,d,e,b,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/TubeGeometry",["require","exports","../math/clamp","../core/Face3","../geometries/Geometry","../math/Matrix4","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h,i){var j=function(a){function b(c,e,f,g,j,l){function m(a,b,c){return J.vertices.push(new i({x:a,y:b,z:c}))-1}a.call(this),e=e||64,f=f||.05,g=g||16,j=j||!1,l=l||b.NoTaper;var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=[],J=this,K=e+1,L=new i,M=new k(c,e,j),N=M.tangents,O=M.normals,P=M.binormals;for(this.tangents=N,this.normals=O,this.binormals=P,w=0;K>w;w++)for(I[w]=[],q=w/(K-1),v=c.getPointAt(q),n=N[w],o=O[w],p=P[w],s=f*l(q),x=0;g>x;x++)r=x/g*2*Math.PI,t=-s*Math.cos(r),u=s*Math.sin(r),L.copy(v),L.x+=t*o.x+u*p.x,L.y+=t*o.y+u*p.y,L.z+=t*o.z+u*p.z,I[w][x]=m(L.x,L.y,L.z);for(w=0;e>w;w++)for(x=0;g>x;x++)y=j?(w+1)%e:w+1,z=(x+1)%g,A=I[w][x],B=I[y][x],C=I[y][z],D=I[w][z],E=new h(w/e,x/g),F=new h((w+1)/e,x/g),G=new h((w+1)/e,(x+1)/g),H=new h(w/e,(x+1)/g),this.faces.push(new d(A,B,D)),this.faceVertexUvs[0].push([E,F,H]),this.faces.push(new d(B,C,D)),this.faceVertexUvs[0].push([F.clone(),G,H.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b.NoTaper=function(a){return 1},b.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)},b}(e),k=function(){function a(a,b,d){function e(){q[0]=new i,r[0]=new i,h=Number.MAX_VALUE,j=Math.abs(p[0].x),k=Math.abs(p[0].y),l=Math.abs(p[0].z),h>=j&&(h=j,o.set(1,0,0)),h>=k&&(h=k,o.set(0,1,0)),h>=l&&o.set(0,0,1),s.crossVectors(p[0],o).normalize(),q[0].crossVectors(p[0],s),r[0].crossVectors(p[0],q[0])}var f,h,j,k,l,m,n,o=new i,p=[],q=[],r=[],s=new i,t=new g,u=b+1,v=1e-4;for(this.tangents=p,this.normals=q,this.binormals=r,m=0;u>m;m++)n=m/(u-1),p[m]=a.getTangentAt(n),p[m].normalize();for(e(),m=1;u>m;m++)q[m]=q[m-1].clone(),r[m]=r[m-1].clone(),s.crossVectors(p[m-1],p[m]),s.length()>v&&(s.normalize(),f=Math.acos(c(p[m-1].dot(p[m]),-1,1)),q[m].applyMatrix4(t.makeRotationAxis(s,f))),r[m].crossVectors(p[m],q[m]);if(d)for(f=Math.acos(c(q[0].dot(q[u-1]),-1,1)),f/=u-1,p[0].dot(s.crossVectors(q[0],q[u-1]))>0&&(f=-f),m=1;u>m;m++)q[m].applyMatrix4(t.makeRotationAxis(p[m],f*m)),r[m].crossVectors(p[m],q[m])}return a}();return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/VortexGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j,k){function l(a,b){var c=b%n;if(c===n-1)return l(a,b-1);var d=(b-c)/n;return v*(d+c*w)}function m(a){var b=a%n;return b===n-1?d:f}a.call(this);var n=9;b=b||1,d=d||.08,f=f||.01,h=h||.2,i=i||.8,j=j||8;var o=j*n;k=k||12;for(var p=2*Math.PI,q=b,r=new g,s=[],t=[],u=i/(h+i),v=p/j,w=u/(n-2),x=0;k>=x;x++)for(var y=p*x/k,z=Math.cos(y),A=Math.sin(y),B=0;o>=B;B++){var C=l(o,B),D=Math.cos(C),E=Math.sin(C);r.x=q*D,r.y=q*E;var F=new g,G=m(B);F.x=(q+G*z)*D,F.y=(q+G*z)*E,F.z=G*A,this.vertices.push(F),s.push(new e(B/o,x/k)),t.push(F.clone().sub(r).normalize())}for(var x=1;k>=x;x++)for(var B=1;o>=B;B++){var H=(o+1)*x+B-1,I=(o+1)*(x-1)+B-1,J=(o+1)*(x-1)+B,K=(o+1)*x+B,L=new c(H,I,K,[t[H],t[I],t[K]]);L.normal.add(t[H]),L.normal.add(t[I]),L.normal.add(t[K]),L.normal.normalize(),this.faces.push(L),this.faceVertexUvs[0].push([s[H].clone(),s[I].clone(),s[K].clone()]),L=new c(I,J,K,[t[I],t[J],t[K]]),L.normal.add(t[I]),L.normal.add(t[J]),L.normal.add(t[K]),L.normal.normalize(),this.faces.push(L),this.faceVertexUvs[0].push([s[I].clone(),s[J].clone(),s[K].clone()])}}return f(b,a),b}(d);return h}),b("davinci-eight/glsl/literals",["require","exports"],function(a,b){var c=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"];return c}),b("davinci-eight/glsl/operators",["require","exports"],function(a,b){var c=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];return c}),b("davinci-eight/glsl/builtins",["require","exports"],function(a,b){var c=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_CameraMatrix","gl_ModelViewCameraMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_CameraMatrixInverse","gl_ModelViewCameraMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_CameraMatrixTranspose","gl_ModelViewCameraMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_CameraMatrixInverseTranspose","gl_ModelViewCameraMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod","dFdx","dFdy"];return c}),b("davinci-eight/glsl/tokenize",["require","exports","./literals","./operators","./builtins"],function(a,b,c,d,e){function f(){function a(a){a.length&&N.push({type:u[L],data:a,position:Q,line:O,column:P})}function b(a){J=0,T+=a,I=T.length;for(var b;G=T[J],I>J;){switch(b=J,L){case i:J=z();break;case j:J=y();break;case k:J=x();break;case l:J=A();break;case m:J=D();break;case t:J=C();break;case n:J=E();break;case h:J=F();break;case r:J=w();break;case g:J=v()}if(b!==J)switch(T[b]){case"\n":P=0,++O;break;default:++P}}return K+=J,T=T.slice(J),N}function f(b){return M.length&&a(M.join("")),L=s,a("(eof)"),N}function v(){return M=M.length?[]:M,"/"===H&&"*"===G?(Q=K+J-1,L=i,H=G,J+1):"/"===H&&"/"===G?(Q=K+J-1,L=j,H=G,J+1):"#"===G?(L=k,Q=K+J,J):/\s/.test(G)?(L=r,Q=K+J,J):(R=/\d/.test(G),S=/[^\w_]/.test(G),Q=K+J,L=R?m:S?l:h,J)}function w(){return/[^\s]/g.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function x(){return"\n"===G&&"\\"!==H?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function y(){return x()}function z(){return"/"===G&&"*"===H?(M.push(G),a(M.join("")),L=g,J+1):(M.push(G),H=G,J+1)}function A(){if("."===H&&/\d/.test(G))return L=n,J;if("/"===H&&"*"===G)return L=i,J;if("/"===H&&"/"===G)return L=j,J;if("."===G&&M.length){for(;B(M););return L=n,J}if(";"===G||")"===G||"("===G){if(M.length)for(;B(M););return a(G),L=g,J+1}var b=2===M.length&&"="!==G;if(/[\w_\d\s]/.test(G)||b){for(;B(M););return L=g,J}return M.push(G),H=G,J+1}function B(b){for(var c,e,f=0;;){if(c=d.indexOf(b.slice(0,b.length+f).join("")),e=d[c],-1===c){if(f--+b.length>0)continue;e=b.slice(0,1).join("")}return a(e),Q+=e.length,M=M.slice(e.length),M.length}}function C(){return/[^a-fA-F0-9]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function D(){return"."===G?(M.push(G),L=n,H=G,J+1):/[eE]/.test(G)?(M.push(G),L=n,H=G,J+1):"x"===G&&1===M.length&&"0"===M[0]?(L=t,M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function E(){return"f"===G&&(M.push(G),H=G,J+=1),/[eE]/.test(G)?(M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function F(){if(/[^\d\w_]/.test(G)){var b=M.join("");return L=c.indexOf(b)>-1?q:e.indexOf(b)>-1?p:o,a(M.join("")),L=g,J}return M.push(G),H=G,J+1}var G,H,I,J=0,K=0,L=g,M=[],N=[],O=1,P=0,Q=0,R=!1,S=!1,T="";return function(a){return N=[],null!==a?b(a):f()}}var g=999,h=9999,i=0,j=1,k=2,l=3,m=4,n=5,o=6,p=7,q=8,r=9,s=10,t=11,u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];return f}),b("davinci-eight/glsl/tokenizeString",["require","exports","./tokenize"],function(a,b,c){function d(a){var b=c(),d=[];return d=d.concat(b(a)),d=d.concat(b(null))}return d}),b("davinci-eight/glsl/expr",["require","exports"],function(a,b){function c(a){return function(){return m.unexpected(a)}}function d(a,b){var c=r[a];return b=b||0,c?b>c.lbp&&(c.lbp=b):(c=Object.create(q),c.id=a,c.lbp=b,r[a]=c),c}function e(a,b,c){var e=d(a,b);e.led=c||function(a){return this.children=[a,k(b)],this.type="binary",this}}function f(a,b,c){var e=d(a,b);return e.led=c||function(a){return this.children=[a,k(b-1)],this.type="binary",this},e}function g(a,b){var c=d(a);return c.nud=b||function(){return this.children=[k(70)],this.type="unary",this},c}function h(a){var b=d(a,150);b.led=function(a){return this.children=[a],this.type="suffix",this}}function i(a){return f(a,10,function(a){return this.children=[a,k(9)],this.assignment=!0,this.type="assign",this})}function j(a,b){function c(a){m.unshift(a,!1);for(var b=0,d=a.children.length;d>b;++b)c(a.children[b]);m.shift()}m=a,o=b,p=0;var d;if(o.length){if(l(),d=k(0),d.parent=m[0],c(d),p<o.length)throw new Error("did not use all tokens");d.parent.children=[d]}}function k(a){var b,c=n;for(l(),b=c.nud();a<n.lbp;)c=n,l(),b=c.led(b);return b}function l(a){var b,c,d,e;if(a&&n.data!==a)return m.unexpected("expected `"+a+"`, got `"+n.data+"`");if(p>=o.length)return void(n=r["(end)"]);if(b=o[p++],c=b.data,d=b.type,"ident"===d)e=m.scope.find(c)||m.create_node(),d=e.type;else if("builtin"===d)e=r["(builtin)"];else if("keyword"===d)e=r["(keyword)"];else if("operator"===d){if(e=r[c],!e)return m.unexpected("unknown operator `"+c+"`")}else{if("float"!==d&&"integer"!==d)return m.unexpected("unexpected token.");d="literal",e=r["(literal)"]}return e&&(e.nud||(e.nud=s),e.children||(e.children=[])),e=Object.create(e),e.token=b,e.type=d,e.data||(e.data=c),n=e}var m,n,o,p,q={nud:function(){return this.children&&this.children.length?this:c("unexpected")()},led:c("missing operator")},r={},s=function(){return this};return d("(ident)").nud=s,d("(keyword)").nud=s,d("(builtin)").nud=s,d("(literal)").nud=s,d("(end)"),d(":"),d(";"),d(","),d(")"),d("]"),d("}"),f("&&",30),f("||",30),e("|",43),e("^",44),e("&",45),e("==",46),e("!=",46),e("<",47),e("<=",47),e(">",47),e(">=",47),e(">>",48),e("<<",48),e("+",50),e("-",50),e("*",60),e("/",60),e("%",60),e("?",20,function(a){return this.children=[a,k(0),(l(":"),k(0))],this.type="ternary",this}),e(".",80,function(a){return n.type="literal",m.fake(n),this.children=[a,n],l(),this}),e("[",80,function(a){return this.children=[a,k(0)],this.type="binary",l("]"),this}),e("(",80,function(a){if(this.children=[a],this.type="call",")"!==n.data)for(;;){if(this.children.push(k(0)),","!==n.data)break;l(",")}return l(")"),this}),g("-"),g("+"),g("!"),g("~"),g("defined"),g("(",function(){return this.type="group",this.children=[k(0)],l(")"),this}),g("++"),g("--"),h("++"),h("--"),i("="),i("+="),i("-="),i("*="),i("/="),i("%="),i("&="),i("|="),i("^="),i(">>="),i("<<="),j}),b("davinci-eight/glsl/Scope",["require","exports"],function(a,b){var c=function(){function a(a){this.state=a,this.scopes=[],this.current=null}return a.prototype.enter=function(a){this.scopes.push(this.current=this.state[0].scope=a||{})},a.prototype.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]},a.prototype.define=function(a){this.current[a]=this.state[0]},a.prototype.find=function(a,b){for(var c=this.scopes.length-1;c>-1;--c)if(this.scopes[c].hasOwnProperty(a))return this.scopes[c][a];return null},a}();return c}),b("davinci-eight/glsl/parser",["require","exports","./expr","./Scope"],function(a,b,c,d){function e(){function a(a){return null===a?(e(),Fa):(Za=[],b(a),Za)}function b(a){if("whitespace"===a.type||"line-comment"===a.type||"block-comment"===a.type)return void _a.push(a);for($a.push(a),Ga=Ga||$a[0],Ga&&_a.length&&(Ga.preceding=Ga.preceding||[],Ga.preceding=Ga.preceding.concat(_a),_a=[]);y();)switch(Ya[0].mode){case m:Y();break;case n:X();break;case r:$();break;case s:_();break;case w:da();break;case o:va(!0,!0);break;case x:wa();break;case l:ca();break;case A:ba();break;case B:aa();break;case p:Da();break;case q:Ea();break;case t:ya();break;case u:Ba();break;case G:Ca();break;case C:Aa();break;case v:za();break;case I:xa()}}function e(a){return arguments.length&&b(a),Ya.length>1?void ka("unexpected EOF"):void(Wa=!0)}function y(){return ab||!Ya.length?!1:Ga=$a[0]}function z(a){Ya.unshift(a),Ya.shift()}function L(a,b){a.parent=Ya[0];var c=[].unshift.call(this,a);if(b=void 0===b?!0:b,k)for(var d="",e=0,f=this.length-1;f>e;++e)d+=" |";return b&&Ha!==a&&Ha.children.push(a),Ha=a,c}function W(){var a=[].shift.call(this),b=Va[this.length],c=!1;if(k)for(var d="",e=0,f=this.length;f>e;++e)d+=" |";return Va.length?"function"==typeof Va[0]?c=Va[0](a):void 0!==b&&(c=b.test?b.test(a.type):b===a.type):c=!0,c&&!ab&&Za.push(a),Ha=a.parent,a}function X(){function a(){if(Ga.data===Ya[0].expecting)return Ya.scope.exit(),Ya.shift();switch(Ga.type){case"preprocessor":return Ya.fake(fa()),void $a.shift();default:return void Ya.unshift(Ja())}}return na(function(){return Ya.scope.enter(),j},a)()}function Y(){if(Ya[0].brace)return"}"!==Ga.data?ka("expected `}`, got "+Ga.data):(Ya[0].brace=!1,$a.shift(),Ya.shift());switch(Ga.type){case"eof":return Z();case"keyword":switch(Ga.data){case"for":return Ya.unshift(Pa());case"if":return Ya.unshift(Qa());case"while":return Ya.unshift(Ra());case"do":return Ya.unshift(Ta());case"break":return Ya.fake(f(D,Ga)),$a.shift();case"continue":return Ya.fake(f(E,Ga)),$a.shift();case"discard":return Ya.fake(f(F,Ga)),$a.shift();case"return":return Ya.unshift(Sa());case"precision":return Ya.unshift(La())}return Ya.unshift(ga(Q));case"ident":var a;if(a=Ya.scope.find(Ga.data))return"struct"===a.parent.type?Ya.unshift(ga(Q)):Ya.unshift(ia(";"));case"operator":if("{"===Ga.data){Ya[0].brace=!0;var b=Ia();return b.expecting="}",$a.shift(),Ya.unshift(b)}if(";"===Ga.data)return $a.shift(),Ya.shift();default:return Ya.unshift(ia(";"))}}function Z(){return Xa&&(ab=!0),Xa=!0,Ya.shift()}function $(){function a(){return"invariant"===Ga.data?o.flags&M?(Ya.unshift(ja()),j):ka("`invariant` is not allowed here"):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function b(){return g(Ga)?o.flags&N?(Ya.unshift(ja()),j):ka("storage is not allowed here"):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function c(){return h(Ga)?o.flags&O?ka("parameter is not allowed here"):(Ya.unshift(ja()),j):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function d(){return i(Ga)?(Ya.unshift(ja()),j):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function e(){if("struct"===Ga.data)return o.flags&P?(Ya.unshift(ha()),j):ka("cannot nest structs");if("keyword"===Ga.type)return Ya.unshift(ja()),j;var a=Ya.scope.find(Ga.data);return a?(Ya.fake(Object.create(a)),$a.shift(),j):ka("expected user defined type, struct or keyword, got "+Ga.data)}function k(){return","!==Ga.data||o.flags&K?"["===Ga.data?void Ya.unshift(Ua()):")"===Ga.data?Ya.shift():";"===Ga.data?o.stage+3:"ident"!==Ga.type&&"builtin"!==Ga.type?ka("expected identifier, got "+Ga.data):(o.collected_name=$a.shift(),j):Ya.shift()}function l(){return"("===Ga.data?($a.unshift(o.collected_name),delete o.collected_name,
Ya.unshift(Na()),o.stage+2):j}function m(){return $a.unshift(o.collected_name),delete o.collected_name,Ya.unshift(Ka()),j}function n(){return Ya.shift()}var o=Ya[0];return na(a,b,c,d,e,k,l,m,n)()}function _(){if("ident"===Ga.type){var a=Ga.data;return Ya.unshift(Ma()),void Ya.scope.define(a)}if("operator"===Ga.type){if(","===Ga.data)return Ya[1].flags&K?$a.shift():Ya.shift();if("="===Ga.data)return Ya[1].flags&J?($a.shift(),void Ya.unshift(ia(",",";"))):ka("`=` is not allowed here.");if("["===Ga.data)return void Ya.unshift(Ua())}return Ya.shift()}function aa(){return"keyword"===Ga.type?(Ya[0].type="keyword",void(Ya[0].mode=A)):"ident"===Ga.type?(Ya[0].type="ident",void(Ya[0].mode=l)):ka("expected keyword or user-defined name, got "+Ga.data)}function ba(){return"keyword"!==Ga.type?ka("expected keyword, got "+Ga.data):(Ya.shift(),$a.shift())}function ca(){return"ident"!==Ga.type?ka("expected user-defined name, got "+Ga.data):(Ya[0].data=Ga.data,Ya.shift(),$a.shift())}function da(){function a(a){try{c(Ya,a)}catch(b){throw ab=!0,b}return Ya.shift()}var b=Ya[0].expecting;if(Ya[0].tokens=Ya[0].tokens||[],void 0===Ya[0].parenlevel&&(Ya[0].parenlevel=0,Ya[0].bracelevel=0),Ya[0].parenlevel<1&&b.indexOf(Ga.data)>-1)return a(Ya[0].tokens);switch("("===Ga.data?++Ya[0].parenlevel:")"===Ga.data&&--Ya[0].parenlevel,Ga.data){case"{":++Ya[0].bracelevel;break;case"}":--Ya[0].bracelevel;break;case"(":++Ya[0].parenlevel;break;case")":--Ya[0].parenlevel}return Ya[0].parenlevel<0?ka("unexpected `)`"):Ya[0].bracelevel<0?ka("unexpected `}`"):void Ya[0].tokens.push($a.shift())}function ea(a){return function(){return f(a,Ga)}}function fa(){return f(V[Ga.type],Ga,Ha)}function ga(a){var b=f(r,Ga,Ha);return b.flags=a,b}function ha(a,b){var c=f(o,Ga,Ha);return c.allow_assign=void 0===a?!0:a,c.allow_comma=void 0===b?!0:b,c}function ia(a,b){var c=f(w,Ga,Ha);return c.expecting=[].slice.call(arguments),c}function ja(a){var b=Ga;return a&&(b={type:"(implied)",data:"(default)",position:b.position}),f(A,b,Ha)}function ka(a){throw ab=!0,new Error((a||"unexpected "+Ya)+" at line "+Ya[0].token.line)}function la(a,b){return ma(a,Ga.type)&&ma(b,Ga.data)}function ma(a,b){switch(typeof a){case"string":return b!==a&&ka("expected `"+a+"`, got "+b+"\n"+Ga.data),!ab;case"object":return a&&-1===a.indexOf(b)&&ka("expected one of `"+a.join("`, `")+"`, got "+b),!ab}return!0}function na(a,b,c,d,e,f,g,h,i,k,l,m){var n,o,p=[].slice.call(arguments);return function(){var a=Ya[0];return a.stage||(a.stage=0),(n=p[a.stage])?(o=n(),o===j?++a.stage:void(void 0!==o&&(a.stage=o))):ka("parser in undefined state!")}}function oa(a,b){return b=b||"operator",function(){if(la(b,a)){var c=$a.shift(),d=Ya[0].children,e=d[d.length-1];return e&&e.token&&c.preceding&&(e.token.succeeding=e.token.succeeding||[],e.token.succeeding=e.token.succeeding.concat(c.preceding)),j}}}function pa(a){return function(){return Ya.unshift(ia(a)),j}}function qa(a){return a?function(){var a=Ga.data;return la("ident")&&(Ya.unshift(Ma()),Ya.scope.define(a),j)}:function(){if(la("ident")){var a=Object.create(Ya.scope.find(Ga.data));return a.token=Ga,$a.shift(),j}}}function ra(){return function(){var a=Ia();return a.expecting="}",Ya.unshift(a),j}}function sa(a){return function(){var b=Ya[0].stage;return"{"!==Ga.data?(Ya.unshift(Ja()),b+a):($a.shift(),j)}}function ta(){return function(){return Ya.shift(),Ya.shift()}}function ua(){va=na(oa("struct","keyword"),function(){return"{"===Ga.data?(Ya.fake(f(l,{data:"",position:Ga.position,type:"ident"})),j):qa(!0)()},function(){return Ya.scope.enter(),j},oa("{"),function(){return"preprocessor"===Ga.type?(Ya.fake(fa()),void $a.shift()):"}"===Ga.data?(Ya.scope.exit(),$a.shift(),Ya.shift()):";"===Ga.data?void $a.shift():void Ya.unshift(ga(S))}),wa=na(function(){return $a.shift(),j},function(){return la("keyword",["lowp","mediump","highp"])&&(Ya.unshift(ja()),j)},function(){return Ya.unshift(ja()),j},function(){return Ya.shift()}),xa=na(oa("["),pa("]"),oa("]"),function(){return Ya.shift()}),ya=na(oa("for","keyword"),oa("("),function(){var a;if("ident"===Ga.type){if((a=Ya.scope.find(Ga.data))||(a=Ya.create_node()),"struct"===a.parent.type)return Ya.unshift(ga(Q)),j}else if("builtin"===Ga.type||"keyword"===Ga.type)return Ya.unshift(ga(Q)),j;return pa(";")()},oa(";"),pa(";"),oa(";"),pa(")"),oa(")"),sa(3),ra(),oa("}"),ta()),za=na(oa("if","keyword"),oa("("),pa(")"),oa(")"),sa(3),ra(),oa("}"),function(){return"else"===Ga.data?($a.shift(),Ya.unshift(Ja()),j):ta()()},ta()),Aa=na(oa("return","keyword"),function(){return";"===Ga.data?j:(Ya.unshift(ia(";")),j)},function(){$a.shift(),ta()()}),Ba=na(oa("while","keyword"),oa("("),pa(")"),oa(")"),sa(3),ra(),oa("}"),ta()),Ca=na(oa("do","keyword"),sa(3),ra(),oa("}"),oa("while","keyword"),oa("("),pa(")"),oa(")"),ta()),Da=na(function(){for(var a=1,b=Ya.length;b>a;++a)if(Ya[a].mode===p)return ka("function definition is not allowed within another function");return j},function(){if(la("ident")){var a=Ga.data,b=Ya.scope.find(a);return Ya.unshift(Ma()),Ya.scope.define(a),Ya.scope.enter(b?b.scope:null),j}},oa("("),function(){return Ya.unshift(Oa()),j},oa(")"),function(){return";"===Ga.data?(Ya.scope.exit(),Ya.shift(),Ya.shift()):j},oa("{"),ra(),oa("}"),function(){return Ya.scope.exit(),j},function(){return Ya.shift(),Ya.shift(),Ya.shift()}),Ea=na(function(){return"void"===Ga.data?(Ya.fake(ja()),$a.shift(),j):")"===Ga.data?void Ya.shift():"struct"===Ga.data?(Ya.unshift(ha(T,U)),j):(Ya.unshift(ga(R)),j)},function(){return","===Ga.data?($a.shift(),0):")"===Ga.data?void Ya.shift():void ka("expected one of `,` or `)`, got "+Ga.data)})}var va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia=ea(n),Ja=ea(m),Ka=ea(s),La=ea(x),Ma=ea(l),Na=(ea(B),ea(p)),Oa=ea(q),Pa=ea(t),Qa=ea(v),Ra=ea(u),Sa=ea(C),Ta=ea(G),Ua=ea(I),Va=arguments.length?[].slice.call(arguments):[],Wa=!1,Xa=!1,Ya=[],Za=[],$a=[],_a=[],ab=!1;return Ya.shift=W,Ya.unshift=L,Ya.fake=z,Ya.unexpected=ka,Ya.scope=new d(Ya),Ya.create_node=function(){var b=f(l,Ga);return b.parent=a.program,b},ua(),Ha=Ia(),Ha.expecting="(eof)",Ha.mode=n,Ha.token={type:"(program)",data:"(program)"},Fa=Ha,a.program=Fa,a.scope=function(a){return 1===arguments.length&&(Ya.scope=a),Ya.scope},Ya.unshift(Ha),a}function f(a,b,c){return{mode:a,token:b,children:[],type:W[a],id:(4294967295*Math.random()).toString(16)}}function g(a){return"const"===a.data||"attribute"===a.data||"uniform"===a.data||"varying"===a.data}function h(a){return"in"===a.data||"inout"===a.data||"out"===a.data}function i(a){return"highp"===a.data||"mediump"===a.data||"lowp"===a.data}var j={},k=!1,l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=12,y=13,z=14,A=15,B=16,C=17,D=18,E=19,F=20,G=21,H=22,I=23,J=1,K=2,L=4,M=8,N=16,O=32,P=64,Q=255,R=Q&~(J|K|O|M|L),S=Q&~(J|M|N|P),T=!1,U=!1,V={"block-comment":y,"line-comment":y,preprocessor:z},W=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"];return e}),b("davinci-eight/glsl/parse",["require","exports","../glsl/tokenizeString","../glsl/parser"],function(a,b,c,d){function e(a){for(var b=c(a),e=d(),f=0;f<b.length;f++)e(b[f]);var g=e(null);return g}return e}),b("davinci-eight/glsl/DefaultNodeEventHandler",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.beginStatementList=function(){},a.prototype.endStatementList=function(){},a.prototype.beginStatement=function(){},a.prototype.endStatement=function(){},a.prototype.beginDeclaration=function(){},a.prototype.endDeclaration=function(){},a.prototype.declaration=function(a,b,c,d){},a.prototype.beginDeclarationList=function(){},a.prototype.endDeclarationList=function(){},a.prototype.beginFunction=function(){},a.prototype.endFunction=function(){},a.prototype.beginFunctionArgs=function(){},a.prototype.endFunctionArgs=function(){},a.prototype.beginExpression=function(){},a.prototype.endExpression=function(){},a.prototype.beginAssign=function(){},a.prototype.endAssign=function(){},a.prototype.identifier=function(a){},a.prototype.keyword=function(a){},a.prototype.builtin=function(a){},a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/glsl/NodeWalker",["require","exports","./DefaultNodeEventHandler"],function(a,b,c){var d=function(a){function b(b){a.call(this),this.modifiers=[],this.names=[],this.next=b}return f(b,a),b.prototype.beginDeclaration=function(){this.kind=void 0,this.type=void 0,this.modifiers=[],this.names=[]},b.prototype.endDeclaration=function(){this.kind&&this.next.declaration(this.kind,this.modifiers,this.type,this.names)},b.prototype.identifier=function(a){this.names.push(a)},b.prototype.keyword=function(a){switch(a){case"attribute":case"uniform":case"varying":this.kind=a;break;case"float":case"mat3":case"mat4":case"vec2":case"vec3":case"vec4":case"void":this.type=a;break;case"highp":this.modifiers.push(a);break;default:throw new Error("Unexpected keyword: "+a)}},b}(c),e=function(){function a(){}return a.prototype.walk=function(a,b){var c=this;switch(a.type){case"assign":b.beginAssign(),a.children.forEach(function(a){c.walk(a,b)}),b.endAssign();break;case"builtin":b.builtin(a.token.data);break;case"binary":break;case"call":break;case"decl":var e=new d(b);e.beginDeclaration(),a.children.forEach(function(a){c.walk(a,e)}),e.endDeclaration();break;case"decllist":b.beginDeclarationList(),a.children.forEach(function(a){c.walk(a,b)}),b.endDeclarationList();break;case"expr":b.beginExpression(),a.children.forEach(function(a){c.walk(a,b)}),b.endExpression();break;case"function":b.beginFunction(),a.children.forEach(function(a){c.walk(a,b)}),b.endFunction();break;case"functionargs":b.beginFunctionArgs(),a.children.forEach(function(a){c.walk(a,b)}),b.endFunctionArgs();break;case"ident":b.identifier(a.token.data);break;case"keyword":b.keyword(a.token.data);break;case"literal":break;case"placeholder":break;case"stmt":b.beginStatement(),a.children.forEach(function(a){c.walk(a,b)}),b.endStatement();break;case"stmtlist":b.beginStatementList(),a.children.forEach(function(a){c.walk(a,b)}),b.endStatementList();break;default:throw new Error("type: "+a.type)}},a}();return e}),b("davinci-eight/glsl/Declaration",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d){this.kind=a,this.modifiers=b,this.type=c,this.name=d}return a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/glsl/ProgramArgs",["require","exports","./DefaultNodeEventHandler","./Declaration"],function(a,b,c,d){var e=function(a){function b(){a.call(this),this.attributes=[],this.uniforms=[],this.varyings=[]}return f(b,a),b.prototype.declaration=function(a,b,c,e){var f={};f.attribute=this.attributes,f.uniform=this.uniforms,f.varying=this.varyings;var g=f[a];if(!g)throw new Error("Unexpected declaration kind: "+a);e.forEach(function(e){g.push(new d(a,b,c,e))})},b}(c);return e}),b("davinci-eight/utils/uuid4",["require","exports"],function(a,b){function c(){var a=function(a){return Math.pow(2,a)},b=(a(4),a(6)),c=a(8),d=a(12),e=(a(14),a(16)),f=a(32),g=(a(40),a(48),function(a,b){return Math.floor(Math.random()*(b-a+1))+a}),h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}return c}),b("davinci-eight/core/ShaderAttributeVariable",["require","exports"],function(a,b){function c(a,b){return a.dynamics()?b.DYNAMIC_DRAW:b.STATIC_DRAW}function d(a){return a>=0}var e=function(){function a(a,b){switch(this.$name=a,b){case"float":case"vec2":case"vec3":case"vec4":case"mat2":case"mat3":case"mat4":this.$glslType=b;break;default:throw new Error("Argument glslType in ShaderAttributeVariable constructor must be one of float, vec2, vec3, vec4, mat2, mat3, mat4. Got: "+b)}}return Object.defineProperty(a.prototype,"name",{get:function(){return this.$name},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this.buffer&&(this.context.deleteBuffer(this.buffer),this.contextLoss())},a.prototype.contextGain=function(a,b){this.location=a.getAttribLocation(b,this.name),this.context=a,d(this.location)&&(this.buffer=a.createBuffer())},a.prototype.contextLoss=function(){this.location=void 0,this.buffer=void 0,this.context=void 0},a.prototype.dataFormat=function(a,b,c,e,f){void 0===c&&(c=!1),void 0===e&&(e=0),void 0===f&&(f=0),d(this.location)&&(this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffer),this.context.vertexAttribPointer(this.location,a,b,c,e,f))},a.prototype.bufferData=function(a){if(d(this.location)){var b=a.getVertexAttributeData(this.name);if(!b)throw new Error("Geometry implementation claims to support but does not provide data for attribute "+this.name);this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffer),this.context.bufferData(this.context.ARRAY_BUFFER,b,c(a,this.context))}},a.prototype.enable=function(){d(this.location)&&this.context.enableVertexAttribArray(this.location)},a.prototype.disable=function(){d(this.location)&&this.context.disableVertexAttribArray(this.location)},a.prototype.toString=function(){return["ShaderAttributeVariable({name: ",this.name,", glslType: ",this.$glslType+"})"].join("")},a}();return e}),b("davinci-eight/core/ShaderUniformVariable",["require","exports"],function(a,b){var c=function(){function a(a,b){switch(this.name=a,b){case"vec2":case"vec3":case"vec4":case"mat3":case"mat4":this.glslType=b;break;default:throw new Error("Illegal argument glslType in ShaderUniformVariable constructor: "+b)}}return a.prototype.contextFree=function(){this.location=null,this.context=null},a.prototype.contextGain=function(a,b){this.location=a.getUniformLocation(b,this.name),this.context=a},a.prototype.contextLoss=function(){this.location=null,this.context=null},a.prototype.uniform2f=function(a,b){this.context.uniform2f(this.location,a,b)},a.prototype.uniform2fv=function(a){this.context.uniform2fv(this.location,a)},a.prototype.uniform3fv=function(a){this.context.uniform3fv(this.location,a)},a.prototype.uniform4fv=function(a){this.context.uniform4fv(this.location,a)},a.prototype.uniformMatrix3fv=function(a,b){if(!(b instanceof Float32Array))throw new Error("matrix must be a Float32Array.");this.context.uniformMatrix3fv(this.location,a,b)},a.prototype.uniformMatrix4fv=function(a,b){if(!(b instanceof Float32Array))throw new Error("matrix must be a Float32Array.");this.context.uniformMatrix4fv(this.location,a,b)},a.prototype.toString=function(){return["ShaderUniformVariable({name: ",this.name,", glslType: ",this.glslType+"})"].join("")},a}();return c}),b("davinci-eight/programs/shaderProgram",["require","exports","../glsl/parse","../glsl/NodeWalker","../glsl/ProgramArgs","../utils/uuid4","../core/ShaderAttributeVariable","../core/ShaderUniformVariable"],function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(d,b),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(d));var e=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(e,c),a.compileShader(e),!a.getShaderParameter(e,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(e));var f=a.createProgram();if(a.attachShader(f,d),a.attachShader(f,e),a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS))throw new Error(a.getProgramInfoLog(f));return f}var j=function(a,b){if("string"!=typeof a)throw new Error("vertexShader argument must be a string.");if("string"!=typeof b)throw new Error("fragmentShader argument must be a string.");var j,k,l,m,n=[],o=[],p=[],q={},r={},s={get vertexShader(){return a},set vertexShader(b){try{var f=c(b);a=b;var i=new d,j=new e;i.walk(f,j),n=j.attributes.map(function(a){return{modifiers:a.modifiers,type:a.type,name:a.name}}),o=j.uniforms.map(function(a){return{modifiers:a.modifiers,type:a.type,name:a.name}}),p=j.varyings.map(function(a){return{modifiers:a.modifiers,type:a.type,name:a.name}}),n.forEach(function(a){q[a.name]=new g(a.name,a.type)}),o.forEach(function(a){r[a.name]=new h(a.name,a.type)})}catch(k){console.log(k)}},get fragmentShader(){return b},set fragmentShader(a){try{c(a);b=a}catch(d){console.log(d)}},get attributes(){return n},get uniforms(){return o},get varyings(){return p},contextFree:function(){j&&(l.deleteProgram(j),j=void 0,k=void 0,l=void 0,m=void 0,n.forEach(function(a){q[a.name].contextFree()}),o.forEach(function(a){r[a.name].contextFree()}))},contextGain:function(c,d){l=c,m!==d&&(j=i(l,a,b),k=f().generate(),m=d,n.forEach(function(a){q[a.name].contextGain(c,j)}),o.forEach(function(a){r[a.name].contextGain(c,j)}))},contextLoss:function(){j=void 0,k=void 0,l=void 0,m=void 0,n.forEach(function(a){q[a.name].contextLoss()}),o.forEach(function(a){r[a.name].contextLoss()})},hasContext:function(){return!!j},get program(){return j},get programId(){return k},use:function(){return l?l.useProgram(j):void 0},attributeVariable:function(a){if(q[a])return q[a];throw new Error(a+" is not an attribute variable in the shader program.")},uniformVariable:function(a){if(r[a])return r[a];throw new Error(a+" is not a uniform variable in the shader program.")}};return s.vertexShader=a,s.fragmentShader=b,s};return j}),b("davinci-eight/programs/pointsProgram",["require","exports","../programs/shaderProgram"],function(a,b,c){var d=["attribute vec3 aVertexPosition;","attribute vec3 aVertexColor;","","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","","varying highp vec4 vColor;","void main(void)","{","gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","vColor = vec4(aVertexColor, 1.0);","gl_PointSize = 6.0;","}"].join("\n"),e=["varying highp vec4 vColor;","void main(void)","{","gl_FragColor = vColor;","}"].join("\n"),f=function(){var a=c(d,e),b={get attributes(){return a.attributes},get uniforms(){return a.uniforms},get varyings(){return a.varyings},get program(){return a.program},get programId(){return a.programId},contextFree:function(){return a.contextFree()},contextGain:function(b,c){return a.contextGain(b,c)},contextLoss:function(){return a.contextLoss()},hasContext:function(){return a.hasContext()},get vertexShader(){return a.vertexShader},get fragmentShader(){return a.fragmentShader},use:function(){return a.use()},attributeVariable:function(b){return a.attributeVariable(b)},uniformVariable:function(b){return a.uniformVariable(b)}};return b};return f}),b("davinci-eight/programs/smartProgram",["require","exports","./shaderProgram","../core/Symbolic"],function(a,b,c,d){var e=" ",f="attribute"+e,g="uniform"+e,h=","+e,i=";",j="(",k=")",l=e+"*"+e,m=e+"="+e,n=function(a,b){var c=[];for(name in a)c.push(f+a[name].glslType+e+a[name].name+i);for(name in b)c.push(g+b[name].glslType+e+b[name].name+i);a[d.ATTRIBUTE_COLOR]&&c.push("varying highp vec4 vColor;"),c.push("varying highp vec3 vLight;"),c.push("void main(void) {");var n=[];if(n.unshift(i),n.unshift(k),n.unshift("1.0"),n.unshift(h),n.unshift(a[d.ATTRIBUTE_POSITION].name),n.unshift(j),n.unshift("vec4"),b[d.UNIFORM_MODEL_MATRIX]&&(n.unshift(l),n.unshift(b[d.UNIFORM_MODEL_MATRIX].name)),b[d.UNIFORM_VIEW_MATRIX]&&(n.unshift(l),n.unshift(b[d.UNIFORM_VIEW_MATRIX].name)),b[d.UNIFORM_PROJECTION_MATRIX]&&(n.unshift(l),n.unshift(b[d.UNIFORM_PROJECTION_MATRIX].name)),n.unshift(m),n.unshift("gl_Position"),c.push(n.join("")),a[d.ATTRIBUTE_COLOR])switch(a[d.ATTRIBUTE_COLOR].glslType){case"vec4":c.push("  vColor = "+a[d.ATTRIBUTE_COLOR].name+i);break;case"vec3":c.push("  vColor = vec4("+a[d.ATTRIBUTE_COLOR].name+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[d.ATTRIBUTE_COLOR].glslType)}b[d.UNIFORM_AMBIENT_LIGHT]&&c.push("  vec3 ambientLight = "+b[d.UNIFORM_AMBIENT_LIGHT].name+i),b[d.UNIFORM_NORMAL_MATRIX]&&a[d.ATTRIBUTE_NORMAL]?(c.push("  vec3 diffuseLightColor = vec3(0.8, 0.8, 0.8);"),c.push("  vec3 L = normalize(vec3(8.0, 10.0, 5.0));"),c.push("  vec3 N = normalize("+b[d.UNIFORM_NORMAL_MATRIX].name+" * "+a[d.ATTRIBUTE_NORMAL].name+");"),c.push("  float diffuseLightAmount = max(dot(N, L), 0.0);"),b[d.UNIFORM_AMBIENT_LIGHT]?c.push("  vLight = ambientLight + diffuseLightAmount * diffuseLightColor;"):c.push("  vLight = diffuseLightAmount * diffuseLightColor;")):b[d.UNIFORM_AMBIENT_LIGHT]?c.push("  vLight = ambientLight;"):c.push("  vLight = vec3(1.0, 1.0, 1.0);"),c.push("  gl_PointSize = 6.0;"),c.push("}");var o=c.join("\n");return o},o=function(a,b){var c=[];a[d.ATTRIBUTE_COLOR]&&c.push("varying highp vec4 vColor;"),c.push("varying highp vec3 vLight;"),c.push("void main(void) {"),a[d.ATTRIBUTE_COLOR]?c.push("  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);"):c.push("  gl_FragColor = vec4(vLight, 1.0);"),c.push("}");var e=c.join("\n");return e},p=function(a,b){if(!a)throw new Error("The attributes parameter is required for smartProgram.");if(!b)throw new Error("The uniforms parameter is required for smartProgram.");var d={};b.forEach(function(a){for(var b in a)d[b]=a[b]});var e=c(n(a,d),o(a,d)),f={get attributes(){return e.attributes},get uniforms(){return e.uniforms},get varyings(){return e.varyings},get program(){return e.program},get programId(){return e.programId},get vertexShader(){return e.vertexShader},get fragmentShader(){return e.fragmentShader},contextFree:function(){return e.contextFree()},contextGain:function(a,b){return e.contextGain(a,b)},contextLoss:function(){return e.contextLoss()},hasContext:function(){return e.hasContext()},use:function(){return e.use()},attributeVariable:function(a){return e.attributeVariable(a)},uniformVariable:function(a){return e.uniformVariable(a)}};return f};return p}),!function(a,c){if("object"==typeof exports&&"object"==typeof module)module.exports=c();else if("function"==typeof b&&b.amd)b("gl-matrix",c);else{var d=c();for(var e in d)("object"==typeof exports?exports:a)[e]=d[e]}}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){b.glMatrix=c(1),b.mat2=c(2),b.mat2d=c(3),b.mat3=c(4),b.mat4=c(5),b.quat=c(6),b.vec2=c(9),b.vec3=c(7),b.vec4=c(8)},function(a,b){var c={};c.EPSILON=1e-6,c.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,c.RANDOM=Math.random,c.setMatrixArrayType=function(a){GLMAT_ARRAY_TYPE=a};var d=Math.PI/180;c.toRadian=function(a){return a*d},a.exports=c},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;
return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.mul=e.multiply,e.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},a.exports=e},function(a,b,c){var d=c(1),e=c(4),f=c(7),g=c(8),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return-.999999>i?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.exports=h},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},a.exports=e}])}),b("davinci-eight/math/Matrix3",["require","exports","gl-matrix"],function(a,b,c){var d=function(){function a(){this.elements=c.mat3.create()}return a.prototype.identity=function(){c.mat3.identity(this.elements)},a.prototype.getInverse=function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(b||!b)throw new Error(f);return console.warn(f),this.identity(),this}return this.multiplyScalar(1/e),this},a.prototype.multiplyScalar=function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},a.prototype.normalFromMatrix4=function(a){this.getInverse(a).transpose()},a.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},a}();return d}),b("davinci-eight/mesh/adapterOptions",["require","exports","../core/DrawMode"],function(a,b,c){function d(a){var b=a.wireFrame?c.LINES:c.TRIANGLES;return{drawMode:b}}return d}),b("davinci-eight/mesh/checkMeshArgs",["require","exports"],function(a,b){function c(a){a=a||{};var b="undefined"==typeof a.wireFrame?!1:a.wireFrame;return{wireFrame:b}}return c}),b("davinci-eight/mesh/arrowMesh",["require","exports","../geometries/GeometryAdapter","../geometries/ArrowGeometry","../mesh/adapterOptions","../mesh/checkMeshArgs"],function(a,b,c,d,e,f){function g(a){return new d}function h(a){var b=f(a),d=new c(g(b),e(b)),h={draw:function(a){return d.draw(a)},update:function(a){return d.update(a)},getVertexAttributeData:function(a){return d.getVertexAttributeData(a)},getAttributeMetaInfos:function(){return d.getAttributeMetaInfos()},get drawMode(){return d.drawMode},set drawMode(a){d.drawMode=a},dynamics:function(){return d.dynamics()},hasElements:function(){return d.hasElements()},getElements:function(){return d.getElements()}};return h}return h}),b("davinci-eight/mesh/boxMesh",["require","exports","../geometries/GeometryAdapter","../geometries/BoxGeometry","../mesh/adapterOptions","../mesh/checkMeshArgs"],function(a,b,c,d,e,f){function g(a){return new d(1,1,1)}function h(a){var b=f(a),d=new c(g(b),e(b)),h={draw:function(a){return d.draw(a)},update:function(a){return d.update(a)},getVertexAttributeData:function(a){return d.getVertexAttributeData(a)},getAttributeMetaInfos:function(){return d.getAttributeMetaInfos()},get drawMode(){return d.drawMode},set drawMode(a){d.drawMode=a},dynamics:function(){return d.dynamics()},hasElements:function(){return d.hasElements()},getElements:function(){return d.getElements()}};return h}return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/ModelMatrixUniformProvider",["require","exports","../math/Matrix3","../math/Matrix4","../uniforms/DefaultUniformProvider","../core/Symbolic"],function(a,b,c,d,e,g){function h(a,b){var c=new d;c.identity(),c.translate(a);var e=new d;return e.rotate(b),c.mul(e),c}var i="uModelMatrix",j="mat4",k="uNormalMatrix",l="mat3",m=function(a){function b(){a.call(this),this.position={x:0,y:0,z:0},this.attitude={yz:0,zx:0,xy:0,w:1}}return f(b,a),b.prototype.getUniformMatrix3=function(b){switch(b){case k:var d=new c,e=h(this.position,this.attitude);return d.normalFromMatrix4(e),{transpose:!1,matrix3:new Float32Array(d.elements)};default:return a.prototype.getUniformMatrix3.call(this,b)}},b.prototype.getUniformMatrix4=function(b){switch(b){case i:var c=h(this.position,this.attitude).elements;return{transpose:!1,matrix4:new Float32Array(c)};default:return a.prototype.getUniformMatrix4.call(this,b)}},b.prototype.getUniformMetaInfos=function(){return b.getUniformMetaInfos()},b.getUniformMetaInfos=function(){var a={};return a[g.UNIFORM_MODEL_MATRIX]={name:i,glslType:j},a[g.UNIFORM_NORMAL_MATRIX]={name:k,glslType:l},a},b}(e);return m}),b("davinci-eight/objects/box",["require","exports","../uniforms/ModelMatrixUniformProvider","../objects/drawableModel","../mesh/boxMesh","../programs/smartProgram"],function(a,b,c,d,e,f){function g(a){var b=e(),g=new c,h=f(b.getAttributeMetaInfos(),[g.getUniformMetaInfos(),a.getUniformMetaInfos()]);return d(b,h,g)}return g}),b("davinci-eight/curves/Curve",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.getPoint=function(a){throw new Error("Curve.getPoint() not implemented!")},a.prototype.getPointAt=function(a){var b=this.getUtoTmapping(a);return this.getPoint(b)},a.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPoint(b/a));return c},a.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPointAt(b/a));return c},a.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]},a.prototype.getLengths=function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),f=0;for(d.push(0),c=1;a>=c;c++)b=this.getPoint(c/a),f+=b.distance(e),d.push(f),e=b;return this.cacheArcLengths=d,d},a.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},a.prototype.getUtoTmapping=function(a,b){var c,d=this.getLengths(),e=0,f=d.length;c=b?b:a*d[f-1];for(var g,h=0,i=f-1;i>=h;)if(e=Math.floor(h+(i-h)/2),g=d[e]-c,0>g)h=e+1;else{if(!(g>0)){i=e;break}i=e-1}if(e=i,d[e]==c){var j=e/(f-1);return j}var k=d[e],l=d[e+1],m=l-k,n=(c-k)/m,j=(e+n)/(f-1);return j},a.prototype.getTangent=function(a){var b=1e-4,c=a-b,d=a+b;0>c&&(c=0),d>1&&(d=1);var e=this.getPoint(c),f=this.getPoint(d),g=f.clone().sub(e);return g.normalize()},a.prototype.getTangentAt=function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)},a}();return c}),b("davinci-eight/renderers/initWebGL",["require","exports"],function(a,b){function c(a,b){var c;try{c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(d){}if(c)return c;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/AmbientLight",["require","exports","../core/Symbolic","../uniforms/DefaultUniformProvider"],function(a,b,c,d){var e="uAmbientLight",g="vec3",h=function(a){function b(b){a.call(this),this.color=b}return f(b,a),b.prototype.getUniformVector3=function(b){switch(b){case e:return[this.color.red,this.color.green,this.color.blue];default:return a.prototype.getUniformVector3.call(this,b)}},b.prototype.getUniformMetaInfos=function(){var a={};return a[c.UNIFORM_AMBIENT_LIGHT]={name:e,glslType:g},a},b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/Uniform2fvProvider",["require","exports","../uniforms/DefaultUniformProvider","../utils/uuid4"],function(a,b,c,d){var e=function(a){function b(b,c,e,f){void 0===e&&(e="vec2"),a.call(this),this.name=b,this.data=c,this.glslType=e,this.canonicalName="undefined"!=typeof f?f:d().generate()}return f(b,a),b.prototype.getUniformVector2=function(b){switch(b){case this.name:return this.data();default:return a.prototype.getUniformVector2.call(this,b)}return this.data()},b.prototype.getUniformMetaInfos=function(){var b=a.prototype.getUniformMetaInfos.call(this);return b[this.canonicalName]={name:this.name,glslType:this.glslType},b},b}(c);return e}),b("davinci-eight/utils/contextMonitor",["require","exports","../utils/uuid4","../renderers/initWebGL"],function(a,b,c,d){function e(a,b){var e,f,g=[],h=function(a){a.preventDefault(),e=void 0,f=void 0,g.forEach(function(a){a.contextLoss()})},i=function(h){h.preventDefault(),e=d(a,b),f=c().generate(),g.forEach(function(a){a.contextGain(e,f)})},j={start:function(){e=d(a,b),f=c().generate(),a.addEventListener("webglcontextlost",h,!1),a.addEventListener("webglcontextrestored",i,!1),g.forEach(function(a){a.contextGain(e,f)})},stop:function(){e=void 0,f=void 0,g.forEach(function(a){a.contextFree()}),a.removeEventListener("webglcontextrestored",i,!1),a.removeEventListener("webglcontextlost",h,!1)},addContextUser:function(a){g.push(a),e&&!a.hasContext()&&a.contextGain(e,f)},get context(){return e}};return j}return e}),b("davinci-eight/utils/workbench3D",["require","exports"],function(a,b){function c(a,b){for(var c=a.getElementsByTagName(b),d=c.length-1;d>=0;d--){var e=c[d];e.parentNode.removeChild(e)}}var d="resize",e="canvas",f=function(a,b,f,g){function h(){var a=g.innerWidth,c=g.innerHeight;b.setSize(a,c),f.aspect=a/c}void 0===g&&(g=window);var i=g.document,j=function(a){h()},k={setUp:function(){i.body.insertBefore(a,i.body.firstChild),g.addEventListener(d,j,!1),h()},tearDown:function(){g.removeEventListener(d,j,!1),c(i,e)}};return k};return f;
}),b("davinci-eight/utils/windowAnimationRunner",["require","exports"],function(a,b){var c=function(a,b,c,d,e){var f=1,g=2,h=3;e=e||window;var i=!1,j=void 0,k=0,l=1e3,m=null,n=void 0,o=f,p=function(c){if(j&&(k=k+c-j),j=c,i||b(k/l)){i=!1,e.cancelAnimationFrame(m),r.isRunning?(o=h,j=void 0):console.error("stopSignal received while not running."),e.document.removeEventListener("keydown",q,!1);try{d(n)}catch(f){console.log("Exception thrown from tearDown function: "+f)}}else{m=e.requestAnimationFrame(p);try{a(k/l)}catch(f){n=f,i=!0}}},q=function(a){27===a.keyCode&&(i=!0,a.preventDefault())},r={start:function(){if(r.isRunning)throw new Error("The `start` method may only be called when not running.");c(),e.document.addEventListener("keydown",q,!1),o=g,m=e.requestAnimationFrame(p)},stop:function(){if(!r.isRunning)throw new Error("The `stop` method may only be called when running.");i=!0},reset:function(){if(!r.isPaused)throw new Error("The `reset` method may only be called when paused.");j=void 0,k=0,o=f},get time(){return k/l},lap:function(){if(!r.isRunning)throw new Error("The `lap` method may only be called when running.")},get isRunning(){return o===g},get isPaused(){return o===h}};return r};return c}),b("davinci-eight",["require","exports","davinci-eight/core","davinci-eight/core/object3D","davinci-eight/cameras/view","davinci-eight/core/Color","davinci-eight/cameras/frustum","davinci-eight/cameras/perspective","davinci-eight/worlds/world","davinci-eight/renderers/viewport","davinci-eight/objects/drawableModel","davinci-eight/core/Face3","davinci-eight/geometries/Geometry","davinci-eight/geometries/GeometryAdapter","davinci-eight/geometries/ArrowGeometry","davinci-eight/geometries/BoxGeometry","davinci-eight/geometries/CylinderGeometry","davinci-eight/geometries/DodecahedronGeometry","davinci-eight/geometries/IcosahedronGeometry","davinci-eight/geometries/KleinBottleGeometry","davinci-eight/geometries/MobiusStripGeometry","davinci-eight/geometries/OctahedronGeometry","davinci-eight/geometries/ParametricGeometry","davinci-eight/geometries/PolyhedronGeometry","davinci-eight/geometries/RevolutionGeometry","davinci-eight/geometries/SphereGeometry","davinci-eight/geometries/TetrahedronGeometry","davinci-eight/geometries/TubeGeometry","davinci-eight/geometries/VortexGeometry","davinci-eight/programs/pointsProgram","davinci-eight/programs/shaderProgram","davinci-eight/programs/smartProgram","davinci-eight/core/ShaderAttributeVariable","davinci-eight/core/ShaderUniformVariable","davinci-eight/math/Matrix3","davinci-eight/math/Matrix4","davinci-eight/math/Spinor3","davinci-eight/math/Vector2","davinci-eight/math/Vector3","davinci-eight/mesh/arrowMesh","davinci-eight/mesh/boxMesh","davinci-eight/objects/box","davinci-eight/curves/Curve","davinci-eight/renderers/initWebGL","davinci-eight/uniforms/AmbientLight","davinci-eight/uniforms/ChainedUniformProvider","davinci-eight/uniforms/DefaultUniformProvider","davinci-eight/uniforms/ModelMatrixUniformProvider","davinci-eight/uniforms/Uniform2fvProvider","davinci-eight/utils/contextMonitor","davinci-eight/utils/workbench3D","davinci-eight/utils/windowAnimationRunner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z){var $={VERSION:c.VERSION,get initWebGL(){return R},get view(){return e},get frustum(){return g},get perspective(){return h},get world(){return i},object3D:d,get viewport(){return j},get contextMonitor(){return X},workbench:Y,animationRunner:Z,get drawableModel(){return k},get ShaderAttributeVariable(){return G},get ShaderUniformVariable(){return H},get pointsProgram(){return D},get shaderProgram(){return E},get smartProgram(){return F},get AmbientLight(){return S},get Color(){return f},get Face3(){return l},get Geometry(){return m},get GeometryAdapter(){return n},get ArrowGeometry(){return o},get BoxGeometry(){return p},get CylinderGeometry(){return q},get DodecahedronGeometry(){return r},get IcosahedronGeometry(){return s},get KleinBottleGeometry(){return t},get MobiusStripGeometry(){return u},get OctahedronGeometry(){return v},get ParametricGeometry(){return w},get PolyhedronGeometry(){return x},get RevolutionGeometry(){return y},get SphereGeometry(){return z},get TetrahedronGeometry(){return A},get TubeGeometry(){return B},get VortexGeometry(){return C},get ModelMatrixUniformProvider(){return V},get Uniform2fvProvider(){return W},get Matrix3(){return I},get Matrix4(){return J},get Spinor3(){return K},get Vector2(){return L},get Vector3(){return M},get Curve(){return Q},get ChainedUniformProvider(){return T},get DefaultUniformProvider(){return U},get arrowMesh(){return N},get boxMesh(){return O},get box(){return P}};return $});var g=d("davinci-eight");"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.EIGHT=g}(this);