!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../vendor/almond/almond",function(){}),b("davinci-eight/core/DataUsage",["require","exports"],function(a,b){var c;return function(a){a[a.STATIC_DRAW=0]="STATIC_DRAW",a[a.DYNAMIC_DRAW=1]="DYNAMIC_DRAW",a[a.STREAM_DRAW=2]="STREAM_DRAW"}(c||(c={})),c}),b("davinci-eight/core/DrawMode",["require","exports"],function(a,b){var c;return function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.TRIANGLES=2]="TRIANGLES"}(c||(c={})),c}),b("davinci-eight/core",["require","exports"],function(a,b){var c={VERSION:"2.48.0"};return c}),b("davinci-eight/checks/expectArg",["require","exports"],function(a,b){function c(a,b){var c={toSatisfy:function(a,b){if(!a)throw new Error(b);return c},toBeBoolean:function(){var d=typeof b;if("boolean"!==d){var e="Expecting argument "+a+": "+d+" to be a boolean.";throw new Error(e)}return c},toBeDefined:function(){var d=typeof b;if("undefined"===d){var e="Expecting argument "+a+": "+d+" to be defined.";throw new Error(e)}return c},toBeInClosedInterval:function(d,e){if(b>=d&&e>=b)return c;var f="Expecting argument "+a+" => "+b+" to be in the range ["+d+", "+e+"].";throw new Error(f)},toBeNumber:function(){var d=typeof b;if("number"!==d){var e="Expecting argument "+a+": "+d+" to be a number.";throw new Error(e)}return c},toBeObject:function(){var d=typeof b;if("object"!==d){var e="Expecting argument "+a+": "+d+" to be an object.";throw new Error(e)}return c},toBeString:function(){var d=typeof b;if("string"!==d){var e="Expecting argument "+a+": "+d+" to be a string.";throw new Error(e)}return c},toBeUndefined:function(){var d=typeof b;if("undefined"!==d){var e="Expecting argument "+a+": "+d+" to be undefined.";throw new Error(e)}return c},toNotBeNull:function(){if(null===b){var d="Expecting argument "+a+" to not be null.";throw new Error(d)}return c},get value(){return b}};return c}return c}),b("davinci-eight/math/Vector3",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a){void 0===a&&(a=[0,0,0]),this.data=a,this.modified=!1}return Object.defineProperty(a.prototype,"data",{get:function(){if(this.$data)return this.$data;if(this.$callback){var a=this.$callback();return c("callback()",a).toSatisfy(3===a.length,"callback() length must be 3"),this.$callback()}throw new Error("Vector3 is undefined.")},set:function(a){c("data",a).toSatisfy(3===a.length,"data length must be 3"),this.$data=a,this.$callback=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"callback",{get:function(){return this.$callback},set:function(a){this.$callback=a,this.$data=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.x!==a,this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.data[1]},set:function(a){this.modified=this.modified||this.y!==a,this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this.data[2]},set:function(a){this.modified=this.modified||this.z!==a,this.data[2]=a},enumerable:!0,configurable:!0}),a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},a.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},a.prototype.applyQuaternion=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},a.prototype.applySpinor=function(a){var b=this.x,c=this.y,d=this.z,e=a.yz,f=a.zx,g=a.xy,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},a.prototype.clone=function(){return new a([this.x,this.y,this.z])},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},a.prototype.cross=function(a){return this.crossVectors(this,a)},a.prototype.crossVectors=function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=d*h-e*g,this.y=e*f-c*h,this.z=c*g-d*f,this},a.prototype.distance=function(a){return Math.sqrt(this.quadrance(a))},a.prototype.quadrance=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},a.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.length=function(){var a=this.x,b=this.y,c=this.z;return Math.sqrt(a*a+b*b+c*c)},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},a.prototype.normalize=function(){return this.divideScalar(this.length())},a.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},a.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this.z*=a,this},a.prototype.set=function(a,b,c){return this.x=a,this.y=b,this.z=c,this},a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=function(a){return this.y=a,this},a.prototype.setZ=function(a){return this.z=a,this},a.prototype.sub=function(a){return this.subVectors(this,a)},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},a.prototype.toString=function(){return"Vector3({x: "+this.x+", y: "+this.y+", z: "+this.z+"})"},a.copy=function(b){return new a([b.x,b.y,b.z])},a.e1=new a([1,0,0]),a.e2=new a([0,1,0]),a.e3=new a([0,0,1]),a}();return d}),b("davinci-eight/math/Spinor3",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a){void 0===a&&(a=[0,0,0,1]),this.data=a,this.modified=!1}return Object.defineProperty(a.prototype,"data",{get:function(){if(this.$data)return this.$data;if(this.$callback){var a=this.$callback();return c("callback()",a).toSatisfy(4===a.length,"callback() length must be 4"),this.$callback()}throw new Error("Vector3 is undefined.")},set:function(a){c("data",a).toSatisfy(4===a.length,"data length must be 4"),this.$data=a,this.$callback=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"callback",{get:function(){return this.$callback},set:function(a){this.$callback=a,this.$data=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yz",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.yz!==a,this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"zx",{get:function(){return this.data[1]},set:function(a){this.modified=this.modified||this.zx!==a,this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xy",{get:function(){return this.data[2]},set:function(a){this.modified=this.modified||this.xy!==a,this.data[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"w",{get:function(){return this.data[3]},set:function(a){this.modified=this.modified||this.w!==a,this.data[3]=a},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a([this.yz,this.zx,this.xy,this.w])},a.prototype.copy=function(a){return this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.w=a.w,this},a.prototype.toString=function(){return"Spinor3({yz: "+this.yz+", zx: "+this.zx+", xy: "+this.xy+", w: "+this.w+"})"},a}();return d}),b("davinci-eight/core/object3D",["require","exports","../math/Vector3","../math/Spinor3"],function(a,b,c,d){var e=function(){var a=new c,b=new d,e=new c([1,1,1]),f=null,g=[],h={get position(){return a},set position(b){a=b},get attitude(){return b},set attitude(a){b=a},get scale(){return e},set scale(a){e=a},get parent(){return f},get children(){return g},translateOnAxis:function(a,b){throw new Error("Not Implemented")}};return h};return e}),b("davinci-eight/checks/isDefined",["require","exports"],function(a,b){function c(a){return"undefined"!=typeof a}return c}),b("davinci-eight/math/Matrix4",["require","exports","../checks/expectArg","../checks/isDefined"],function(a,b,c,d){var e=function(){function a(a){c("elements",a).toSatisfy(a instanceof Float32Array,"elements must be a Float32Array").toSatisfy(16===a.length,"elements must have length 16"),this.elements=a}return a.identity=function(){return new a(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]))},a.scaling=function(b){return a.identity().scaling(b)},a.translation=function(b){return a.identity().translation(b)},a.rotation=function(b){return d(b)?(c("spinor",b).toBeObject(),a.identity().rotation(b)):void 0},a.prototype.clone=function(){return a.identity().copy(this)},a.prototype.compose=function(a,b,c){return this.scaling(a),this.rotate(b),this.translate(c),this},a.prototype.copy=function(a){return this.elements.set(a.elements),this},a.prototype.determinant=function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=b*g,s=b*h,t=b*i,u=c*f,v=c*h,w=c*i,x=d*f,y=d*g,z=d*i,A=e*f,B=e*g,C=e*h;return n*((C-z)*k+(w-B)*l+(y-v)*m)+o*((z-C)*j+(A-t)*l+(s-x)*m)+p*((B-w)*j+(t-A)*k+(u-r)*m)+q*((v-y)*j+(x-s)*k+(r-u)*l)},a.prototype.invert=function(a,b){void 0===b&&(b=!1);var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[12],i=d[1],j=d[5],k=d[9],l=d[13],m=d[2],n=d[6],o=d[10],p=d[14],q=d[3],r=d[7],s=d[11],t=d[15];c[0]=k*p*r-l*o*r+l*n*s-j*p*s-k*n*t+j*o*t,c[4]=h*o*r-g*p*r-h*n*s+f*p*s+g*n*t-f*o*t,c[8]=g*l*r-h*k*r+h*j*s-f*l*s-g*j*t+f*k*t,c[12]=h*k*n-g*l*n-h*j*o+f*l*o+g*j*p-f*k*p,c[1]=l*o*q-k*p*q-l*m*s+i*p*s+k*m*t-i*o*t,c[5]=g*p*q-h*o*q+h*m*s-e*p*s-g*m*t+e*o*t,c[9]=h*k*q-g*l*q-h*i*s+e*l*s+g*i*t-e*k*t,c[13]=g*l*m-h*k*m+h*i*o-e*l*o-g*i*p+e*k*p,c[2]=j*p*q-l*n*q+l*m*r-i*p*r-j*m*t+i*n*t,c[6]=h*n*q-f*p*q-h*m*r+e*p*r+f*m*t-e*n*t,c[10]=f*l*q-h*j*q+h*i*r-e*l*r-f*i*t+e*j*t,c[14]=h*j*m-f*l*m-h*i*n+e*l*n+f*i*p-e*j*p,c[3]=k*n*q-j*o*q-k*m*r+i*o*r+j*m*s-i*n*s,c[7]=f*o*q-g*n*q+g*m*r-e*o*r-f*m*s+e*n*s,c[11]=g*j*q-f*k*q-g*i*r+e*k*r+f*i*s-e*j*s,c[15]=f*k*m-g*j*m+g*i*n-e*k*n-f*i*o+e*j*o;var u=e*c[0]+i*c[4]+m*c[8]+q*c[12];if(0!==u)return this.multiplyScalar(1/u);var v="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(b)throw new Error(v);return console.warn(v),this.identity(),this},a.prototype.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},a.prototype.multiplyScalar=function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},a.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},a.prototype.frustum=function(a,b,c,d,e,f){var g=this.elements,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},a.prototype.rotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1)},a.prototype.mul=function(b){return a.mul(this,b,this)},a.prototype.multiplyMatrices=function(b,c){return a.mul(b,c,this)},a.mul=function(a,b,c){var d=a.elements,e=b.elements,f=c.elements,g=d[0],h=d[4],i=d[8],j=d[12],k=d[1],l=d[5],m=d[9],n=d[13],o=d[2],p=d[6],q=d[10],r=d[14],s=d[3],t=d[7],u=d[11],v=d[15],w=e[0],x=e[4],y=e[8],z=e[12],A=e[1],B=e[5],C=e[9],D=e[13],E=e[2],F=e[6],G=e[10],H=e[14],I=e[3],J=e[7],K=e[11],L=e[15];return f[0]=g*w+h*A+i*E+j*I,f[4]=g*x+h*B+i*F+j*J,f[8]=g*y+h*C+i*G+j*K,f[12]=g*z+h*D+i*H+j*L,f[1]=k*w+l*A+m*E+n*I,f[5]=k*x+l*B+m*F+n*J,f[9]=k*y+l*C+m*G+n*K,f[13]=k*z+l*D+m*H+n*L,f[2]=o*w+p*A+q*E+r*I,f[6]=o*x+p*B+q*F+r*J,f[10]=o*y+p*C+q*G+r*K,f[14]=o*z+p*D+q*H+r*L,c[3]=s*w+t*A+u*E+v*I,c[7]=s*x+t*B+u*F+v*J,c[11]=s*y+t*C+u*G+v*K,c[15]=s*z+t*D+u*H+v*L,c},a.prototype.perspective=function(a,b,c,d){var e=c*Math.tan(.5*a),f=-e,g=f*b,h=e*b;return this.frustum(g,h,f,e,c,d)},a.prototype.rotate=function(b){var c=a.rotation(b);return a.mul(c,this,this)},a.prototype.rotation=function(a){var b=-c("spinor.yz",a.yz).toBeNumber().value,d=-c("spinor.zx",a.zx).toBeNumber().value,e=-c("spinor.xy",a.xy).toBeNumber().value,f=c("spinor.w",a.w).toBeNumber().value,g=b+b,h=d+d,i=e+e,j=b*g,k=b*h,l=b*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return this.set(1-m-o,k-r,l+q,0,k+r,1-j-o,n-p,0,l-q,n+p,1-j-m,0,0,0,0,1),this},a.prototype.row=function(a){var b=this.elements;return[b[0+a],b[4+a],b[8+a],b[12+a]]},a.prototype.scale=function(b){var c=a.scaling(b);return a.mul(c,this,this)},a.prototype.scaling=function(a){return this.set(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},a.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},a.prototype.toFixed=function(a){d(a)&&c("digits",a).toBeNumber();for(var b=[],e=0;3>=e;e++)b.push(this.row(e).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},a.prototype.toString=function(){for(var a=[],b=0;3>=b;b++)a.push(this.row(b).map(function(a,b){return a.toString()}).join(" "));return a.join("\n")},a.prototype.translate=function(b){var c=a.translation(b);return a.mul(c,this,this)},a.prototype.translation=function(a){return this.set(1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1)},a.prototype.__mul__=function(b){return b instanceof a?a.identity().multiplyMatrices(this,b):"number"==typeof b?this.clone().multiplyScalar(b):void 0},a.prototype.__rmul__=function(b){return b instanceof a?a.identity().multiplyMatrices(b,this):"number"==typeof b?this.clone().multiplyScalar(b):void 0},a}();return e}),b("davinci-eight/core/Symbolic",["require","exports"],function(a,b){var c=function(){function a(){}return a.ATTRIBUTE_COLOR="aVertexColor",a.ATTRIBUTE_NORMAL="aVertexNormal",a.ATTRIBUTE_POSITION="aVertexPosition",a.UNIFORM_AMBIENT_LIGHT="uAmbientLight",a.UNIFORM_COLOR="uColor",a.UNIFORM_DIRECTIONAL_LIGHT_COLOR="uDirectionalLightColor",a.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION="uDirectionalLightDirection",a.UNIFORM_POINT_LIGHT_COLOR="uPointLightColor",a.UNIFORM_POINT_LIGHT_POSITION="uPointLightPosition",a.UNIFORM_PROJECTION_MATRIX="uProjectionMatrix",a.UNIFORM_MODEL_MATRIX="uModelMatrix",a.UNIFORM_NORMAL_MATRIX="uNormalMatrix",a.UNIFORM_VIEW_MATRIX="uViewMatrix",a.VARYING_COLOR="vColor",a.VARYING_LIGHT="vLight",a.UNIFORM_DIRECTIONAL_LIGHT="DirectionalLight",a.UNIFORM_POINT_LIGHT="PointLight",a}();return c}),b("davinci-eight/uniforms/DefaultUniformProvider",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.getUniformFloat=function(a){},a.prototype.getUniformMatrix2=function(a){},a.prototype.getUniformMatrix3=function(a){},a.prototype.getUniformMatrix4=function(a){},a.prototype.getUniformVector2=function(a){},a.prototype.getUniformVector3=function(a){},a.prototype.getUniformVector4=function(a){},a.prototype.getUniformMeta=function(){var a={};return a},a}();return c}),b("davinci-eight/utils/uuid4",["require","exports"],function(a,b){function c(){var a=function(a){return Math.pow(2,a)},b=(a(4),a(6)),c=a(8),d=a(12),e=(a(14),a(16)),f=a(32),g=(a(40),a(48),function(a,b){return Math.floor(Math.random()*(b-a+1))+a}),h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformMat4",["require","exports","../uniforms/DefaultUniformProvider","../utils/uuid4"],function(a,b,c,d){var e=function(a){function b(b,c){a.call(this),this.useData=!0,this.name=b,this.id="undefined"!=typeof c?c:d().generate()}return f(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){this.$data=a,this.useData=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.$callback=a,this.useData=!1},enumerable:!0,configurable:!0}),b.prototype.getUniformMatrix4=function(b){switch(b){case this.name:return this.useData?this.$data:this.$callback();default:return a.prototype.getUniformMatrix4.call(this,b)}},b.prototype.getUniformMeta=function(){var b=a.prototype.getUniformMeta.call(this);return b[this.id]={name:this.name,glslType:"mat4"},b},b}(c);return e}),b("davinci-eight/checks/isUndefined",["require","exports"],function(a,b){function c(a){return"undefined"==typeof a}return c}),b("davinci-eight/checks/isVariableName",["require","exports"],function(a,b){function c(a){return"string"==typeof a&&a.length>0?!0:!1}return c}),b("davinci-eight/cameras/view",["require","exports","../math/Vector3","../math/Matrix4","../core/Symbolic","../uniforms/UniformMat4","../checks/expectArg","../checks/isUndefined","../checks/isVariableName"],function(a,b,c,d,e,f,g,h,i){var j=function(a){function b(){var a=(new c).subVectors(k,l);0===a.x&&0===a.y&&0===a.z?a.z=1:a.normalize();var b=(new c).crossVectors(m,a),d=(new c).crossVectors(a,b),e=new c([k.dot(b),k.dot(d),k.dot(a)]).multiplyScalar(-1),f=n.elements;f[0]=b.x,f[4]=b.y,f[8]=b.z,f[12]=e.x,f[1]=d.x,f[5]=d.y,f[9]=d.z,f[13]=e.y,f[2]=a.x,f[6]=a.y,f[10]=a.z,f[14]=e.z,f[3]=0,f[7]=0,f[11]=0,f[15]=1}a=a||{};var j=g("options.viewMatrixName",h(a.viewMatrixName)?e.UNIFORM_VIEW_MATRIX:a.viewMatrixName).toBeString().value;g("viewMatrixName",j).toSatisfy(i(j),"viewMatrixName must be a variable name");var k=new c,l=new c,m=c.e2,n=d.identity(),o=new f(j,e.UNIFORM_VIEW_MATRIX);o.callback=function(){return(k.modified||l.modified||m.modified)&&(b(),k.modified=!1,l.modified=!1,m.modified=!1),{transpose:!1,matrix4:n.elements}},k.modified=!0,l.modified=!0,m.modified=!0;var p={get eye(){return k},set eye(a){p.setEye(a)},setEye:function(a){return g("eye",a).toBeObject(),k.x=a.x,k.y=a.y,k.z=a.z,p},get look(){return l},set look(a){p.setLook(a)},setLook:function(a){return g("look",a).toBeObject(),l.x=a.x,l.y=a.y,l.z=a.z,p},get up(){return m},set up(a){p.setUp(a)},setUp:function(a){return g("up",a).toBeObject(),m.x=a.x,m.y=a.y,m.z=a.z,m.normalize(),p},getUniformFloat:function(a){return o.getUniformFloat(a)},getUniformMatrix2:function(a){return o.getUniformMatrix2(a)},getUniformMatrix3:function(a){return o.getUniformMatrix3(a)},getUniformMatrix4:function(a){return o.getUniformMatrix4(a)},getUniformVector2:function(a){return o.getUniformVector2(a)},getUniformVector3:function(a){return o.getUniformVector3(a)},getUniformVector4:function(a){return o.getUniformVector4(a)},getUniformMeta:function(){return o.getUniformMeta()}};return p};return j}),b("davinci-eight/core/Color",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a){void 0===a&&(a=[0,0,0]),c("data",a).toSatisfy(3===a.length,"data must have length equal to 3"),this.data=a}return Object.defineProperty(a.prototype,"red",{get:function(){return this.data[0]},set:function(a){this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"green",{get:function(){return this.data[1]},set:function(a){this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"blue",{get:function(){return this.data[2]},set:function(a){this.data[2]=a},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a([this.data[0],this.data[1],this.data[2]])},a.prototype.luminance=function(){return a.luminance(this.red,this.green,this.blue)},a.prototype.toString=function(){return"Color("+this.red+", "+this.green+", "+this.blue+")"},a.luminance=function(a,b,c){var d=2.2;return.2126*Math.pow(a,d)+.7152*Math.pow(b,d)+.0722*Math.pow(c,d)},a.fromHSL=function(b,c,d){function e(a){return a>2*Math.PI?e(a-2*Math.PI):0>a?e(a+2*Math.PI):a}function f(b,c,e){var f=(a.luminance(b,c,e),d-.5*g);return new a([b+f,c+f,e+f])}var g=(1-Math.abs(2*d-1))*c,h=e(b)/Math.PI*3%6,i=g*(1-Math.abs(h%2-1));return h>=0&&1>h?f(g,i,0):h>=1&&2>h?f(i,g,0):h>=2&&3>h?f(0,g,g*(h-2)):h>=3&&4>h?f(0,g*(4-h),g):h>=4&&5>h?f(i,0,g):h>=5&&6>h?f(g,0,i):f(0,0,0)},a.fromRGB=function(b,d,e){return c("red",b).toBeNumber().toBeInClosedInterval(0,1),c("green",d).toBeNumber().toBeInClosedInterval(0,1),c("blue",e).toBeNumber().toBeInClosedInterval(0,1),new a([b,d,e])},a.copy=function(b){return new a([b.red,b.green,b.blue])},a}();return d}),b("davinci-eight/cameras/frustum",["require","exports","davinci-eight/cameras/view","davinci-eight/math/Matrix4","davinci-eight/core/Symbolic"],function(a,b,c,d,e){var f="uProjectionMatrix",g="mat4",h=function(a,b,h,i,j,k){function l(){o.frustum(a,b,h,i,j,k)}void 0===a&&(a=-1),void 0===b&&(b=1),void 0===h&&(h=-1),void 0===i&&(i=1),void 0===j&&(j=1),void 0===k&&(k=1e3);var m={viewMatrixName:e.UNIFORM_VIEW_MATRIX},n=c(m),o=d.identity();l();var p={get eye(){return n.eye},set eye(a){n.eye=a},setEye:function(a){return n.setEye(a),p},get look(){return n.look},set look(a){n.look=a},setLook:function(a){return n.setLook(a),p},get up(){return n.up},set up(a){n.setUp(a)},setUp:function(a){return n.setUp(a),p},get left(){return a},set left(b){a=b,l()},get right(){return b},set right(a){b=a,l()},get bottom(){return h},set bottom(a){h=a,l()},get top(){return i},set top(a){i=a,l()},get near(){return j},set near(a){j=a,l()},get far(){return k},set far(a){k=a,l()},getUniformFloat:function(a){return n.getUniformFloat(a)},getUniformMatrix2:function(a){return n.getUniformMatrix2(a)},getUniformMatrix3:function(a){return n.getUniformMatrix3(a)},getUniformMatrix4:function(a){switch(a){case f:return{transpose:!1,matrix4:o.elements};default:return n.getUniformMatrix4(a)}},getUniformVector2:function(a){return n.getUniformVector2(a)},getUniformVector3:function(a){return n.getUniformVector3(a)},getUniformVector4:function(a){return n.getUniformVector4(a)},getUniformMeta:function(){var a=n.getUniformMeta();return a[e.UNIFORM_PROJECTION_MATRIX]={name:f,glslType:g},a}};return p};return h}),b("davinci-eight/cameras/perspective",["require","exports","davinci-eight/cameras/view","davinci-eight/math/Matrix4","davinci-eight/core/Symbolic","../checks/isUndefined","../checks/expectArg"],function(a,b,c,d,e,f,g){var h=function(a){a=a||{};var b=f(a.fov)?75*Math.PI/180:a.fov,h=f(a.aspect)?1:a.aspect,i=f(a.near)?.1:a.near,j=g("options.far",f(a.far)?2e3:a.far).toBeNumber().value,k=f(a.projectionMatrixName)?e.UNIFORM_PROJECTION_MATRIX:a.projectionMatrixName,l=c(a),m=d.identity(),n=!0,o={get eye(){return l.eye},set eye(a){l.eye=a},setEye:function(a){return l.setEye(a),o},get look(){return l.look},set look(a){l.look=a},setLook:function(a){return l.setLook(a),o},get up(){return l.up},set up(a){l.up=a},setUp:function(a){return l.setUp(a),o},get fov(){return b},set fov(a){o.setFov(a)},setFov:function(a){return g("fov",a).toBeNumber(),n=n||b!==a,b=a,o},get aspect(){return h},set aspect(a){o.setAspect(a)},setAspect:function(a){return g("aspect",a).toBeNumber(),n=n||h!==a,h=a,o},get near(){return i},set near(a){o.setNear(a)},setNear:function(a){return g("near",a).toBeNumber(),n=n||i!==a,i=a,o},get far(){return j},set far(a){o.setFar(a)},setFar:function(a){return g("far",a).toBeNumber(),n=n||j!==a,j=a,o},getUniformFloat:function(a){return l.getUniformFloat(a)},getUniformMatrix2:function(a){return l.getUniformMatrix2(a)},getUniformMatrix3:function(a){return l.getUniformMatrix3(a)},getUniformMatrix4:function(a){switch(g("name",a).toBeString(),a){case k:return n&&(m.perspective(b,h,i,j),n=!1),{transpose:!1,matrix4:m.elements};default:return l.getUniformMatrix4(a)}},getUniformVector2:function(a){return l.getUniformVector2(a)},getUniformVector3:function(a){return l.getUniformVector3(a)},getUniformVector4:function(a){return l.getUniformVector4(a)},getUniformMeta:function(){var a=l.getUniformMeta();return a[e.UNIFORM_PROJECTION_MATRIX]={name:k,glslType:"mat4"},a}};return o};return h}),b("davinci-eight/drawLists/drawList",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){var a,b,d=[],e={},f={get drawGroups(){return e},get children(){return d},contextFree:function(){d.forEach(function(a){a.contextFree()}),a=void 0,b=void 0},contextGain:function(b,f){c("context",b).toSatisfy(b instanceof WebGLRenderingContext,"context must implement WebGLRenderingContext"),c("contextId",f).toBeString(),a=b,f=f,d.forEach(function(a){a.contextGain(b,f);var c=a.drawGroupName;e[c]||(e[c]=[]),e[c].push(a)})},contextLoss:function(){d.forEach(function(a){a.contextLoss()}),a=void 0,b=void 0},hasContext:function(){return!!a},add:function(a){d.push(a)},remove:function(a){var b=d.indexOf(a);b>=0&&d.splice(b,1)}};return f};return d}),b("davinci-eight/renderers/renderer",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(a,b){c("canvas",a).toSatisfy(a instanceof HTMLCanvasElement,"canvas argument must be an HTMLCanvasElement"),b=b||{};var d,e,f={get canvas(){return a},get context(){return d},contextFree:function(){d=void 0,e=void 0},contextGain:function(a,b){c("contextId",b).toBeString(),d=a,e=b},contextLoss:function(){d=void 0,e=void 0},hasContext:function(){return!!d},render:function(a,b){if(c("drawList",a).toNotBeNull(),d){a.hasContext()||a.contextGain(d,e);var f;for(var g in a.drawGroups)f=!1,a.drawGroups[g].forEach(function(a){f||(a.useProgram(),f=!0),a.draw(b)})}else console.warn("renderer is unable to render because WebGLRenderingContext is missing")}};return f};return d}),b("davinci-eight/renderers/ViewportArgs",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d){this.x=0,this.y=0,this.width=c,this.height=d,this.modified=!1}return a}();return c}),b("davinci-eight/renderers/viewport",["require","exports","../core/Color","../renderers/ViewportArgs","../checks/expectArg"],function(a,b,c,d,e){var f=function(a,b){function f(a,b,c,d){h&&h.viewport(a*j,b*j,c*j,d*j)}function g(){var a=0;h&&(k&&(a|=h.COLOR_BUFFER_BIT),l&&(a|=h.DEPTH_BUFFER_BIT),h.clear(a))}e("canvas",a).toSatisfy(a instanceof HTMLCanvasElement,"canvas argument must be an HTMLCanvasElement"),b=b||{};var h,i,j=(void 0!==b.alpha?b.alpha:!1,void 0!==b.depth?b.depth:!0,void 0!==b.stencil?b.stencil:!0,void 0!==b.antialias?b.antialias:!1,void 0!==b.premultipliedAlpha?b.premultipliedAlpha:!0,void 0!==b.preserveDrawingBuffer?b.preserveDrawingBuffer:!1,1),k=!0,l=!0,m=new c([1,1,1]),n=1,o=new d(0,0,a.width,a.height),p={get canvas(){return a},get context(){return h},contextFree:function(){h=void 0,i=void 0},contextGain:function(a,b){h=a,i=b,h.enable(h.DEPTH_TEST),h.enable(h.SCISSOR_TEST)},contextLoss:function(){h=void 0,i=void 0},hasContext:function(){return!!h},clearColor:function(a,b,c,d){m.red=a,m.green=b,m.blue=c,n=d},render:function(a,b){if(e("drawList",a).toNotBeNull(),h){h.scissor(o.x,o.y,o.width,o.height),h.viewport(o.x,o.y,o.width,o.height),h.clearColor(m.red,m.green,m.blue,n),g(),a.hasContext()||a.contextGain(h,i);var c;for(var d in a.drawGroups)c=!1,a.drawGroups[d].forEach(function(a){c||(a.useProgram(),c=!0),a.draw(b)})}else console.warn("viewport is unable to render because WebGLRenderingContext is missing")},setViewport:f,get x(){return o.x},set x(a){o.x=a},get y(){return o.y},set y(a){o.y=a},get width(){return o.width},set width(a){o.width=a},get height(){return o.height},set height(a){o.height=a},setSize:function(b,c,d){a.width=b*j,a.height=c*j,d!==!1&&(a.style.width=b+"px",a.style.height=c+"px"),f(0,0,b,c)}};return p};return f}),b("davinci-eight/renderers/webGLRenderer",["require","exports","../renderers/renderer","../checks/expectArg","../core/Color"],function(a,b,c,d,e){var f=function(a){d("canvas",a).toSatisfy(a instanceof HTMLCanvasElement,"canvas argument must be an HTMLCanvasElement");var b,f,g=c(a),h=!0,i=e.fromRGB(0,0,0),j=0,k={contextFree:function(){return b=void 0,f=void 0,g.contextFree()},contextGain:function(c,e){d("contextId",e).toBeString();c.getContextAttributes();return b=c,f=e,b.clearColor(i.red,i.green,i.blue,j),b.clearDepth(1),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.viewport(0,0,a.width,a.height),g.contextGain(c,e)},contextLoss:function(){return b=void 0,f=void 0,g.contextLoss()},hasContext:function(){return g.hasContext()},get autoClear(){return h},set autoClear(a){d("autoClear",a).toBeBoolean(),h=a},clearColor:function(a,c,d,e){return i.red=a,i.green=c,i.blue=d,j=e,b&&b.clearColor(a,c,d,e),k},render:function(a,c){return h&&b&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),g.render(a,c)}};return k};return f}),b("davinci-eight/core/convertUsage",["require","exports","../core/DataUsage"],function(a,b,c){
function d(a,b){switch(a){case c.DYNAMIC_DRAW:return b.DYNAMIC_DRAW;case c.STATIC_DRAW:return b.STATIC_DRAW;case c.STREAM_DRAW:return b.STREAM_DRAW;default:throw new Error("Unexpected usage: "+a)}}return d}),b("davinci-eight/core/ElementArray",["require","exports","../core/convertUsage"],function(a,b,c){var d=function(){function a(a){this.attributes=a}return a.prototype.contextFree=function(){this.buffer&&(this.context.deleteBuffer(this.buffer),this.buffer=void 0),this.context=void 0},a.prototype.contextGain=function(a,b){this.attributes.hasElementArray()&&(this.buffer=a.createBuffer()),this.context=a},a.prototype.contextLoss=function(){this.buffer=void 0,this.context=void 0},a.prototype.bufferData=function(a){if(this.buffer){var b=a.getElementArray();this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.buffer);var d=c(b.usage,this.context);this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,b.data,d)}},a.prototype.bind=function(){this.buffer&&this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,this.buffer)},a}();return d}),b("davinci-eight/uniforms/ChainedUniformProvider",["require","exports"],function(a,b){var c=function(){function a(a,b){this.provider=a,this.fallback=b}return a.prototype.getUniformFloat=function(a){var b=this.provider.getUniformFloat(a);return"number"==typeof b?b:this.fallback.getUniformFloat(a)},a.prototype.getUniformMatrix2=function(a){var b=this.provider.getUniformMatrix2(a);return b?b:this.fallback.getUniformMatrix2(a)},a.prototype.getUniformMatrix3=function(a){var b=this.provider.getUniformMatrix3(a);return b?b:this.fallback.getUniformMatrix3(a)},a.prototype.getUniformMatrix4=function(a){var b=this.provider.getUniformMatrix4(a);return b?b:this.fallback.getUniformMatrix4(a)},a.prototype.getUniformVector2=function(a){var b=this.provider.getUniformVector2(a);return b?b:this.fallback.getUniformVector2(a)},a.prototype.getUniformVector3=function(a){var b=this.provider.getUniformVector3(a);return b?b:this.fallback.getUniformVector3(a)},a.prototype.getUniformVector4=function(a){var b=this.provider.getUniformVector4(a);return b?b:this.fallback.getUniformVector4(a)},a.prototype.getUniformMeta=function(){var a={},b=this.provider.getUniformMeta();for(name in b)a[name]=b[name];var c=this.fallback.getUniformMeta();for(name in c)a[name]=c[name];return a},a}();return c}),b("davinci-eight/objects/drawableModel",["require","exports","../core/ElementArray","../uniforms/ChainedUniformProvider"],function(a,b,c,d){var e=function(a,b,e){function f(a,b){for(var c in b){var d=b[c];if(d.name===a)return d}}function g(c){var d=f(c.name,a.getAttribMeta());if(d)return b.attributeLocation(c.name);var e="The mesh does not support attribute "+c.type+" "+c.name;throw console.warn(e),new Error(e)}function h(a){return b.uniformLocation(a.name)}function i(a){var c=a.getUniformMeta();b.uniforms.forEach(function(a){var b=void 0;for(var d in c){var e=c[d];e.name===a.name&&(b=e)}if(void 0===b){var f="Missing uniform "+a.type+" "+a.name;throw console.warn(f),new Error(f)}if(b.glslType!==a.type){var f="Mismatch in uniform types "+a.name;throw console.warn(f),new Error(f)}})}var j,k,l=new c(a),m=b.attributes.map(g),n=b.uniforms.map(h),o={get mesh(){return a},get shaders(){return b},get model(){return e},contextFree:function(){b.contextFree(),l.contextFree(),j=null,k=null},contextGain:function(a,c){j=a,k!==c&&(k=c,b.contextGain(j,c),l.contextGain(j,c))},contextLoss:function(){b.contextLoss(),l.contextLoss(),j=null,k=null},hasContext:function(){return b.hasContext()},get drawGroupName(){return b.programId},useProgram:function(){return b.use()},draw:function(c){if(b.hasContext()){a.dynamic&&a.update(b.attributes),m.forEach(function(b){var c=a.getAttribArray(b.name);if(!c)throw new Error("mesh implementation claims to support but does not provide data for attribute "+b.name);b.bufferData(c.data,c.usage)}),l.bufferData(a);var g=new d(e,c);i(g),n.forEach(function(a){switch(a.glslType){case"float":var b=g.getUniformFloat(a.name);if("undefined"==typeof b)throw new Error("Expecting data for uniform float "+a.name);if("number"!=typeof b)throw new Error("Expecting typeof data for uniform float "+a.name+" to be 'number'.");a.uniform1f(b);break;case"vec2":var b=g.getUniformVector2(a.name);if(!b)throw new Error("Expecting data for uniform vec2 "+a.name);if(2!==b.length)throw new Error("Expecting data for uniform vec2 "+a.name+" to be number[] with length 2");a.uniform2fv(b);break;case"vec3":var b=g.getUniformVector3(a.name);if(!b)throw new Error("Expecting data for uniform "+a.name);if(3!==b.length)throw new Error("Expecting data for uniform "+a.name+" to be number[] with length 3");a.uniform3fv(b);break;case"vec4":var b=g.getUniformVector4(a.name);if(!b)throw new Error("Expecting data for uniform "+a.name);if(4!==b.length)throw new Error("Expecting data for uniform "+a.name+" to be number[] with length 4");a.uniform4fv(b);break;case"mat3":var b=g.getUniformMatrix3(a.name);if(!b)throw new Error("Expecting data for uniform "+a.name);a.uniformMatrix3fv(b.transpose,b.matrix3);break;case"mat4":var b=g.getUniformMatrix4(a.name);if(!b)throw new Error("Expecting data for uniform "+a.name);a.uniformMatrix4fv(b.transpose,b.matrix4);break;default:throw new Error("Unexpected uniform GLSL type in drawableModel.draw: "+a.glslType)}}),m.forEach(function(a){a.enable()}),m.forEach(function(b){var c=f(b.name,a.getAttribMeta());if(!c)throw new Error("The mesh does not support the attribute variable named "+b.name);var d=c.size,e=j.FLOAT,g=c.normalized,h=c.stride,i=c.offset;b.dataFormat(d,e,g,h,i)}),l.bind(),a.draw(j),m.forEach(function(a){a.disable()})}}};return a.dynamic||a.update(b.attributes),o};return e}),b("davinci-eight/core/Face3",["require","exports","../math/Vector3"],function(a,b,c){var d=function(){function a(a,b,d,e,f){void 0===e&&(e=new c),void 0===f&&(f=[]),this.a=a,this.b=b,this.c=d,this.normal=e,this.vertexNormals=f}return a}();return d}),b("davinci-eight/core/ShaderAttribLocation",["require","exports","../core/convertUsage","../checks/expectArg"],function(a,b,c,d){function e(a){return a>=0}var f=function(){function a(a,b){switch(this.$name=a,b){case"float":case"vec2":case"vec3":case"vec4":case"mat2":case"mat3":case"mat4":this.$glslType=b;break;default:throw new Error("Argument glslType in ShaderAttribLocation constructor must be one of float, vec2, vec3, vec4, mat2, mat3, mat4. Got: "+b)}}return Object.defineProperty(a.prototype,"name",{get:function(){return this.$name},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this.buffer&&(this.context.deleteBuffer(this.buffer),this.contextLoss())},a.prototype.contextGain=function(a,b){d("context",a).toBeObject(),d("program",b).toBeObject(),this.location=a.getAttribLocation(b,this.name),this.context=a,e(this.location)&&(this.buffer=a.createBuffer())},a.prototype.contextLoss=function(){this.location=void 0,this.buffer=void 0,this.context=void 0},a.prototype.dataFormat=function(a,b,c,d,f){void 0===c&&(c=!1),void 0===d&&(d=0),void 0===f&&(f=0),e(this.location)&&(this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffer),this.context.vertexAttribPointer(this.location,a,b,c,d,f))},a.prototype.bufferData=function(a,b){e(this.location)&&(this.context.bindBuffer(this.context.ARRAY_BUFFER,this.buffer),this.context.bufferData(this.context.ARRAY_BUFFER,a,c(b,this.context)))},a.prototype.enable=function(){e(this.location)&&this.context.enableVertexAttribArray(this.location)},a.prototype.disable=function(){e(this.location)&&this.context.disableVertexAttribArray(this.location)},a.prototype.toString=function(){return["ShaderAttribLocation({name: ",this.name,", glslType: ",this.$glslType+"})"].join("")},a}();return f}),b("davinci-eight/core/ShaderUniformLocation",["require","exports"],function(a,b){var c=function(){function a(a,b){switch(this.name=a,b){case"float":case"vec2":case"vec3":case"vec4":case"mat2":case"mat3":case"mat4":this.glslType=b;break;default:throw new Error("Illegal argument glslType in ShaderUniformLocation constructor: "+b)}}return a.prototype.contextFree=function(){this.location=null,this.context=null},a.prototype.contextGain=function(a,b){this.location=a.getUniformLocation(b,this.name),this.context=a},a.prototype.contextLoss=function(){this.location=null,this.context=null},a.prototype.uniform1f=function(a){this.context.uniform1f(this.location,a)},a.prototype.uniform2f=function(a,b){this.context.uniform2f(this.location,a,b)},a.prototype.uniform2fv=function(a){this.context.uniform2fv(this.location,a)},a.prototype.uniform3fv=function(a){this.context.uniform3fv(this.location,a)},a.prototype.uniform4fv=function(a){this.context.uniform4fv(this.location,a)},a.prototype.uniformMatrix3fv=function(a,b){if(!(b instanceof Float32Array))throw new Error("matrix must be a Float32Array.");this.context.uniformMatrix3fv(this.location,a,b)},a.prototype.uniformMatrix4fv=function(a,b){if(!(b instanceof Float32Array))throw new Error("matrix must be a Float32Array.");this.context.uniformMatrix4fv(this.location,a,b)},a.prototype.toString=function(){return["ShaderUniformLocation({name: ",this.name,", glslType: ",this.glslType+"})"].join("")},a}();return c}),b("davinci-eight/math/Sphere",["require","exports","../math/Vector3"],function(a,b,c){var d=function(){function a(a,b){this.center=void 0!==a?a:new c([0,0,0]),this.radius=void 0!==b?b:0}return a.prototype.setFromPoints=function(a){throw new Error("Not Implemented: Sphere.setFromPoints")},a}();return d}),b("davinci-eight/geometries/Geometry",["require","exports","../math/Sphere","../math/Vector3"],function(a,b,c,d){var e=function(){function a(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.boundingSphere=null}return a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new c),this.boundingSphere.setFromPoints(this.vertices)},a.prototype.computeFaceNormals=function(){for(var a=new d,b=new d,c=0,e=this.faces.length;e>c;c++){var f=this.faces[c],g=this.vertices[f.a],h=this.vertices[f.b],i=this.vertices[f.c];a.subVectors(i,h),b.subVectors(g,h),a.cross(b),a.normalize(),f.normal.copy(a)}},a.prototype.computeVertexNormals=function(a){var b,c,e,f,g=this.vertices.length,h=new Array(this.vertices.length);for(b=0,g=this.vertices.length;g>b;b++)h[b]=new d;if(a){var i,j,k,l=new d,m=new d;for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],i=this.vertices[f.a],j=this.vertices[f.b],k=this.vertices[f.c],l.subVectors(k,j),m.subVectors(i,j),l.cross(m),h[f.a].add(l),h[f.b].add(l),h[f.c].add(l)}else for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],h[f.a].add(f.normal),h[f.b].add(f.normal),h[f.c].add(f.normal);for(b=0,g=this.vertices.length;g>b;b++)h[b].normalize();for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],f.vertexNormals[0]=h[f.a].clone(),f.vertexNormals[1]=h[f.b].clone(),f.vertexNormals[2]=h[f.c].clone()},a.prototype.mergeVertices=function(){var a,b,c,d,e,f,g,h,i={},j=[],k=[],l=4,m=Math.pow(10,l);for(c=0,d=this.vertices.length;d>c;c++)a=this.vertices[c],b=Math.round(a.x*m)+"_"+Math.round(a.y*m)+"_"+Math.round(a.z*m),void 0===i[b]?(i[b]=c,j.push(this.vertices[c]),k[c]=j.length-1):k[c]=k[i[b]];var n=[];for(c=0,d=this.faces.length;d>c;c++){e=this.faces[c],e.a=k[e.a],e.b=k[e.b],e.c=k[e.c],f=[e.a,e.b,e.c];for(var o=-1,p=0;3>p;p++)if(f[p]==f[(p+1)%3]){o=p,n.push(c);break}}for(c=n.length-1;c>=0;c--){var q=n[c];for(this.faces.splice(q,1),g=0,h=this.faceVertexUvs.length;h>g;g++)this.faceVertexUvs[g].splice(q,1)}var r=this.vertices.length-j.length;return this.vertices=j,r},a}();return e}),b("davinci-eight/core/Line3",["require","exports"],function(a,b){var c=function(){function a(a,b){this.a=a,this.b=b}return a}();return c}),b("davinci-eight/core/Point3",["require","exports"],function(a,b){var c=function(){function a(a){this.a=a}return a}();return c}),b("davinci-eight/geometries/GeometryAdapter",["require","exports","../core/Line3","../core/Point3","../core/Color","../core/Symbolic","../core/DataUsage","../core/DrawMode"],function(a,b,c,d,e,f,g,h){var i=function(){function a(a,b){this.$drawMode=h.TRIANGLES,this.elementsUsage=g.STREAM_DRAW,this.grayScale=!1,this.lines=[],this.points=[],b=b||{},b.drawMode="undefined"!=typeof b.drawMode?b.drawMode:h.TRIANGLES,b.elementsUsage="undefined"!=typeof b.elementsUsage?b.elementsUsage:g.STREAM_DRAW,this.positionVarName=b.positionVarName||f.ATTRIBUTE_POSITION,this.normalVarName=b.normalVarName||f.ATTRIBUTE_NORMAL,this.geometry=a,this.geometry.dynamic=!1,this.$drawMode=b.drawMode,this.elementsUsage=b.elementsUsage}return Object.defineProperty(a.prototype,"drawMode",{get:function(){return this.$drawMode},set:function(a){throw new Error("The drawMode property is readonly")},enumerable:!0,configurable:!0}),a.prototype.draw=function(a){switch(this.drawMode){case h.POINTS:a.drawArrays(a.POINTS,0,1*this.points.length);break;case h.LINES:a.drawArrays(a.LINES,0,2*this.lines.length);break;case h.TRIANGLES:a.drawArrays(a.TRIANGLES,0,3*this.geometry.faces.length)}},Object.defineProperty(a.prototype,"dynamic",{get:function(){return this.geometry.dynamic},enumerable:!0,configurable:!0}),a.prototype.hasElementArray=function(){return!0},a.prototype.getElementArray=function(){return{usage:this.elementsUsage,data:this.elementArray}},a.prototype.getAttribArray=function(a){switch(a){case this.positionVarName:return{usage:g.DYNAMIC_DRAW,data:this.aVertexPositionArray};case this.normalVarName:return this.$drawMode===h.TRIANGLES?{usage:g.DYNAMIC_DRAW,data:this.aVertexNormalArray}:void 0;default:return}},a.prototype.getAttribMeta=function(){var a={};return a[f.ATTRIBUTE_POSITION]={name:this.positionVarName,glslType:"vec3",size:3,normalized:!1,stride:0,offset:0},this.drawMode===h.TRIANGLES&&(a[f.ATTRIBUTE_NORMAL]={name:this.normalVarName,glslType:"vec3",size:3,normalized:!1,stride:0,offset:0}),a},a.prototype.update=function(a){var b=[],c=[],d=[],e=this.geometry.vertices;switch(this.drawMode){case h.POINTS:this.points=[],this.computePoints(),this.points.forEach(function(a){d.push(a.a);var c=e[a.a];b.push(c.x),b.push(c.y),b.push(c.z)});break;case h.LINES:this.lines=[],this.computeLines(),this.lines.forEach(function(a){d.push(a.a),d.push(a.b);var c=e[a.a];b.push(c.x),b.push(c.y),b.push(c.z);var f=e[a.b];b.push(f.x),b.push(f.y),b.push(f.z)});break;case h.TRIANGLES:this.geometry.faces.forEach(function(a){d.push(a.a),d.push(a.b),d.push(a.c);var f=e[a.a];b.push(f.x),b.push(f.y),b.push(f.z);var g=e[a.b];b.push(g.x),b.push(g.y),b.push(g.z);var h=e[a.c];if(b.push(h.x),b.push(h.y),b.push(h.z),3===a.vertexNormals.length){var i=a.vertexNormals,j=i[0],k=i[1],l=i[2];c.push(j.x),c.push(j.y),c.push(j.z),c.push(k.x),c.push(k.y),c.push(k.z),c.push(l.x),c.push(l.y),c.push(l.z)}else{var m=e[a.a],n=e[a.b].clone(),o=e[a.c].clone(),p=n.sub(m).cross(o.sub(m)),q=p.divideScalar(p.length());c.push(q.x),c.push(q.y),c.push(q.z),c.push(q.x),c.push(q.y),c.push(q.z),c.push(q.x),c.push(q.y),c.push(q.z)}})}this.elementArray=new Uint16Array(d),this.aVertexPositionArray=new Float32Array(b),this.aVertexNormalArray=new Float32Array(c)},a.prototype.computeLines=function(){var a=this.lines;this.geometry.faces.forEach(function(b){a.push(new c(b.a,b.b)),a.push(new c(b.b,b.c)),a.push(new c(b.c,b.a))})},a.prototype.computePoints=function(){var a=this.points;this.geometry.faces.forEach(function(b){a.push(new d(b.a)),a.push(new d(b.b)),a.push(new d(b.c))})},a}();return i}),b("davinci-eight/math/Vector2",["require","exports"],function(a,b){var c=function(){function a(a,b){this.x=a||0,this.y=b||0}return a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=function(a){return this.y=a,this},a.prototype.setComponent=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}},a.prototype.getComponent=function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.addScalar=function(a){return this.x+=a,this.y+=a,this},a.prototype.addVectors=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.subScalar=function(a){return this.x-=a,this.y-=a,this},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},a.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this},a.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this},a.prototype.divide=function(a){return this.x/=a.x,this.y/=a.y,this},a.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b}else this.x=0,this.y=0;return this},a.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},a.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},a.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},a.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},a.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},a.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.normalize=function(){return this.divideScalar(this.length())},a.prototype.distanceTo=function(a){return Math.sqrt(this.distanceToSquared(a))},a.prototype.distanceToSquared=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},a.prototype.setLength=function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},a.prototype.lerpVectors=function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},a.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a},a.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},a.prototype.clone=function(){return new a(this.x,this.y)},a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/RevolutionGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Spinor3","../math/Vector2"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j){a.call(this),f=f||12,h=h||0,i=i||2*Math.PI;var k,l,m,n,o=Math.abs(2*Math.PI-Math.abs(i-h))<1e-4,p=o?f:f+1,q=1/f,r=(i-h)*q;for(k=0,m=p;m>k;k++){var s=h+k*r,t=s/2,u=Math.cos(t),v=Math.sin(t),w=new e([d.yz*v,d.zx*v,d.xy*v,u]);for(l=0,n=b.length;n>l;l++){var x=b[l].clone();x.applySpinor(w),j&&x.applySpinor(j),this.vertices.push(x)}}var y=1/(b.length-1),z=b.length,A=z*p;for(k=0,m=f;m>k;k++)for(l=0,n=b.length-1;n>l;l++){var B=l+z*k,C=B%A,D=(B+z)%A,E=(B+1+z)%A,F=(B+1)%A,G=k*q,H=l*y,I=G+q,J=H+y;this.faces.push(new c(F,D,C)),this.faceVertexUvs[0].push([new g(G,H),new g(I,H),new g(G,J)]),this.faces.push(new c(F,E,D)),this.faceVertexUvs[0].push([new g(I,H),new g(I,J),new g(G,J)])}this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/ArrowGeometry",["require","exports","../geometries/RevolutionGeometry","../math/Spinor3","../math/Vector3"],function(a,b,c,d,e){var g=function(a){function b(b,c,f,g,h,i,j,k){void 0===b&&(b=1),void 0===c&&(c=new d),void 0===f&&(f=12),void 0===g&&(g=1),void 0===h&&(h=.01),void 0===i&&(i=.08),void 0===j&&(j=.2),void 0===k&&(k=e.e3.clone()),b=b||1,c=c||new d,g=(g||1)*b,h=(h||.01)*b,i=(i||.08)*b,j=(j||.2)*b,k=k||e.e3.clone();var l=g-j,m=g/2,n=function(a){return a.x?2:a.y?1:0},o=function(a){return a.x>0?1:a.x<0?-1:a.y>0?1:a.y<0?-1:a.z>0?1:a.z<0?-1:0},p=function(a){var b=n(a),c=o(a),f=(b+0)%3,g=(b+1)%3,j=(b+2)%3,k=[[0,0,m*c],[i,0,(l-m)*c],[h,0,(l-m)*c],[h,0,-m*c],[0,0,-m*c]],p=k.map(function(a){return new e([a[f],a[g],a[j]])}),q=new d([a.x,a.y,a.z,0]);return{points:p,generator:q}},q=p(k);a.call(this,q.points,q.generator,f,0,2*Math.PI,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/BoxGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j,k){function l(a,b,d,f,k,l,m,n,o){var p,q,r,s=h,t=i,u=k/2,v=l/2,w=o.vertices.length;"x"===a&&"y"===b||"y"===a&&"x"===b?p="z":"x"===a&&"z"===b||"z"===a&&"x"===b?(p="y",t=j):("z"===a&&"y"===b||"y"===a&&"z"===b)&&(p="x",s=j);var x=s+1,y=t+1,z=k/s,A=l/t,B=new g;for(B[p]=m>0?1:-1,r=0;y>r;r++)for(q=0;x>q;q++){var C=new g;C[a]=(q*z-u)*d,C[b]=(r*A-v)*f,C[p]=m,o.vertices.push(C)}for(r=0;t>r;r++)for(q=0;s>q;q++){var D=q+x*r,E=q+x*(r+1),F=q+1+x*(r+1),G=q+1+x*r,H=new e(q/s,1-r/t),I=new e(q/s,1-(r+1)/t),J=new e((q+1)/s,1-(r+1)/t),K=new e((q+1)/s,1-r/t),L=new c(D+w,E+w,G+w);L.normal.copy(B),L.vertexNormals.push(B.clone(),B.clone(),B.clone()),o.faces.push(L),o.faceVertexUvs[0].push([H,I,K]),L=new c(E+w,F+w,G+w),L.normal.copy(B),L.vertexNormals.push(B.clone(),B.clone(),B.clone()),o.faces.push(L),o.faceVertexUvs[0].push([I.clone(),J,K.clone()])}}void 0===b&&(b=1),void 0===d&&(d=1),void 0===f&&(f=1),void 0===h&&(h=1),void 0===i&&(i=1),void 0===j&&(j=1),void 0===k&&(k=!1),a.call(this);var m=b/2,n=d/2,o=f/2;l("z","y",-1,-1,f,d,+m,0,this),l("z","y",1,-1,f,d,-m,1,this),l("x","z",1,1,b,f,+n,2,this),l("x","z",1,-1,b,f,-n,3,this),l("x","y",1,-1,b,d,+o,4,this),l("x","y",-1,-1,b,d,-o,5,this),this.mergeVertices()}return f(b,a),b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/CylinderGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j,k,l){void 0===b&&(b=1),void 0===d&&(d=1),void 0===f&&(f=1),void 0===h&&(h=16),void 0===i&&(i=1),void 0===j&&(j=!1),void 0===k&&(k=0),void 0===l&&(l=2*Math.PI),a.call(this);var m,n,o=f/2,p=[],q=[];for(n=0;i>=n;n++){var r=[],s=[],t=n/i,u=t*(d-b)+b;for(m=0;h>=m;m++){var v=m/h,w=new g;w.x=u*Math.sin(v*l+k),w.y=-t*f+o,w.z=u*Math.cos(v*l+k),this.vertices.push(w),r.push(this.vertices.length-1),s.push(new e(v,1-t))}p.push(r),q.push(s)}var x,y,z=(d-b)/f;for(m=0;h>m;m++)for(0!==b?(x=this.vertices[p[0][m]].clone(),y=this.vertices[p[0][m+1]].clone()):(x=this.vertices[p[1][m]].clone(),y=this.vertices[p[1][m+1]].clone()),x.setY(Math.sqrt(x.x*x.x+x.z*x.z)*z).normalize(),y.setY(Math.sqrt(y.x*y.x+y.z*y.z)*z).normalize(),n=0;i>n;n++){var A=p[n][m],B=p[n+1][m],C=p[n+1][m+1],D=p[n][m+1],E=x.clone(),F=x.clone(),G=y.clone(),H=y.clone(),I=q[n][m].clone(),J=q[n+1][m].clone(),K=q[n+1][m+1].clone(),L=q[n][m+1].clone();this.faces.push(new c(A,B,D,void 0,[E,F,H])),this.faceVertexUvs[0].push([I,J,L]),this.faces.push(new c(B,C,D,void 0,[F.clone(),G,H.clone()])),this.faceVertexUvs[0].push([J.clone(),K,L.clone()])}if(!j&&b>0)for(this.vertices.push(g.e2.clone().multiplyScalar(o)),m=0;h>m;m++){var A=p[0][m],B=p[0][m+1],C=this.vertices.length-1,E=g.e2,F=g.e2,G=g.e2,I=q[0][m].clone(),J=q[0][m+1].clone(),K=new e(J.x,0);this.faces.push(new c(A,B,C,void 0,[E,F,G])),this.faceVertexUvs[0].push([I,J,K])}if(!j&&d>0)for(this.vertices.push(g.e2.clone().multiplyScalar(-o)),m=0;h>m;m++){var A=p[i][m+1],B=p[i][m],C=this.vertices.length-1,E=g.e2.clone().multiplyScalar(-1),F=g.e2.clone().multiplyScalar(-1),G=g.e2.clone().multiplyScalar(-1),I=q[i][m+1].clone(),J=q[i][m].clone(),K=new e(J.x,1);this.faces.push(new c(A,B,C,void 0,[E,F,G])),this.faceVertexUvs[0].push([I,J,K])}this.computeFaceNormals()}return f(b,a),b}(d);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/PolyhedronGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Sphere","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,d,f,i){function j(a){var b=a.normalize().clone();b.index=p.vertices.push(b)-1;var c=m(a)/2/Math.PI+.5,d=n(a)/Math.PI+.5;return b.uv=new g(c,1-d),b}function k(a,b,d){var e=new c(a.index,b.index,d.index,void 0,[a.clone(),b.clone(),d.clone()]);p.faces.push(e),y.copy(a).add(b).add(d).divideScalar(3);var f=m(y);p.faceVertexUvs[0].push([o(a.uv,a,f),o(b.uv,b,f),o(d.uv,d,f)])}function l(a,b){for(var c=Math.pow(2,b),d=j(p.vertices[a.a]),e=j(p.vertices[a.b]),f=j(p.vertices[a.c]),g=[],h=0;c>=h;h++){g[h]=[];for(var i=j(d.clone().lerp(f,h/c)),l=j(e.clone().lerp(f,h/c)),m=c-h,n=0;m>=n;n++)0==n&&h==c?g[h][n]=i:g[h][n]=j(i.clone().lerp(l,n/m))}for(var h=0;c>h;h++)for(var n=0;2*(c-h)-1>n;n++){var o=Math.floor(n/2);n%2==0?k(g[h][o+1],g[h+1][o],g[h][o]):k(g[h][o+1],g[h+1][o+1],g[h+1][o])}}function m(a){return Math.atan2(a.z,-a.x)}function n(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function o(a,b,c){return 0>c&&1===a.x&&(a=new g(a.x-1,a.y)),0===b.x&&0===b.z&&(a=new g(c/2/Math.PI+.5,a.y)),a.clone()}a.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:b,indices:d,radius:f,detail:i},f=f||1,i=i||0;for(var p=this,q=0,r=b.length;r>q;q+=3)j(new h([b[q],b[q+1],b[q+2]]));for(var s=this.vertices,t=[],q=0,u=0,r=d.length;r>q;q+=3,u++){var v=s[d[q]],w=s[d[q+1]],x=s[d[q+2]];t[u]=new c(v.index,w.index,x.index,void 0,[v.clone(),w.clone(),x.clone()])}for(var y=new h([0,0,0]),q=0,z=t.length;z>q;q++)l(t[q],i);for(var q=0,A=this.faceVertexUvs[0].length;A>q;q++){var B=this.faceVertexUvs[0][q],C=B[0].x,D=B[1].x,E=B[2].x,F=Math.max(C,Math.max(D,E)),G=Math.min(C,Math.min(D,E));F>.9&&.1>G&&(.2>C&&(B[0].x+=1),.2>D&&(B[1].x+=1),.2>E&&(B[2].x+=1))}for(var q=0,H=this.vertices.length;H>q;q++)this.vertices[q].multiplyScalar(f);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new e(new h([0,0,0]),f)}return f(b,a),b}(d);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/DodecahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=(1+Math.sqrt(5))/2,e=1/d,g=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-e,-d,0,-e,d,0,e,-d,0,e,d,-e,-d,0,-e,d,0,e,-d,0,e,d,0,-d,0,-e,d,0,-e,-d,0,e,d,0,e],h=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i=function(a){function b(b,c){a.call(this,g,h,b,c)}return f(b,a),b}(c);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/IcosahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=(1+Math.sqrt(5))/2,e=[-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],g=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],h=function(a){function b(b,c){a.call(this,e,g,b,c),this.type="IcosahedronGeometry"}return f(b,a),b}(c);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/ParametricGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2"],function(a,b,c,d,e){var g=function(a){function b(b,d,f){a.call(this);var g,h,i,j,k,l=this.vertices,m=this.faces,n=this.faceVertexUvs[0],o=d+1;for(g=0;f>=g;g++)for(k=g/f,h=0;d>=h;h++)j=h/d,i=b(j,k),l.push(i);var p,q,r,s,t,u,v,w;for(g=0;f>g;g++)for(h=0;d>h;h++)p=g*o+h,q=g*o+h+1,r=(g+1)*o+h+1,s=(g+1)*o+h,t=new e(h/d,g/f),u=new e((h+1)/d,g/f),v=new e((h+1)/d,(g+1)/f),w=new e(h/d,(g+1)/f),m.push(new c(p,q,s)),n.push([t,u,w]),m.push(new c(q,r,s)),n.push([u.clone(),v,w.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b}(d);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/KleinBottleGeometry",["require","exports","../geometries/ParametricGeometry","../math/Vector3"],function(a,b,c,d){function e(a,b){var c=new d;return a=2*a*i,b=2*b*i,i>a?(c.x=3*g(a)*(1+h(a))+2*(1-g(a)/2)*g(a)*g(b),c.z=-8*h(a)-2*(1-g(a)/2)*h(a)*g(b)):(c.x=3*g(a)*(1+h(a))+2*(1-g(a)/2)*g(b+i),c.z=-8*h(a)),c.y=-2*(1-g(a)/2)*h(b),c}var g=Math.cos,h=Math.sin,i=Math.PI,j=function(a){function b(b,c){a.call(this,e,b,c)}return f(b,a),b}(c);return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/MobiusStripGeometry",["require","exports","../geometries/ParametricGeometry","../math/Vector3"],function(a,b,c,d){function e(a,b){var c=new d([0,0,0]),e=1,f=.05,j=(2*a-1)*f,k=2*i*b;return c.x=(e+j*g(k/2))*g(k),c.y=(e+j*g(k/2))*h(k),c.z=j*h(k/2),c}var g=Math.cos,h=Math.sin,i=Math.PI,j=function(a){function b(b,c){a.call(this,e,b,c)}return f(b,a),b}(c);return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/OctahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],e=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],g=function(a){function b(b,c){a.call(this,d,e,b,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/SphereGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Sphere","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,d,f,i,j,k,l){void 0===b&&(b=1),void 0===d&&(d=16),void 0===f&&(f=12),void 0===i&&(i=0),void 0===j&&(j=2*Math.PI),void 0===k&&(k=0),void 0===l&&(l=Math.PI),a.call(this);var m,n,o=[],p=[];for(n=0;f>=n;n++){var q=[],r=[];for(m=0;d>=m;m++){var s=m/d,t=n/f,u=new h([0,0,0]);u.x=-b*Math.cos(i+s*j)*Math.sin(k+t*l),u.y=b*Math.cos(k+t*l),u.z=b*Math.sin(i+s*j)*Math.sin(k+t*l),this.vertices.push(u),q.push(this.vertices.length-1),r.push(new g(s,1-t))}o.push(q),p.push(r)}for(n=0;f>n;n++)for(m=0;d>m;m++){var v=o[n][m+1],w=o[n][m],x=o[n+1][m],y=o[n+1][m+1],z=this.vertices[v].clone().normalize(),A=this.vertices[w].clone().normalize(),B=this.vertices[x].clone().normalize(),C=this.vertices[y].clone().normalize(),D=p[n][m+1].clone(),E=p[n][m].clone(),F=p[n+1][m].clone(),G=p[n+1][m+1].clone();
Math.abs(this.vertices[v].y)===b?(D.x=(D.x+E.x)/2,this.faces.push(new c(v,x,y,void 0,[z,B,C])),this.faceVertexUvs[0].push([D,F,G])):Math.abs(this.vertices[x].y)===b?(F.x=(F.x+G.x)/2,this.faces.push(new c(v,w,x,void 0,[z,A,B])),this.faceVertexUvs[0].push([D,E,F])):(this.faces.push(new c(v,w,y,void 0,[z,A,C])),this.faceVertexUvs[0].push([D,E,G]),this.faces.push(new c(w,x,y,void 0,[A.clone(),B,C.clone()])),this.faceVertexUvs[0].push([E.clone(),F,G.clone()]))}this.computeFaceNormals(),this.boundingSphere=new e(new h([0,0,0]),b)}return f(b,a),b}(d);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/TetrahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],e=[2,1,0,0,3,2,1,3,0,2,3,1],g=function(a){function b(b,c){a.call(this,d,e,b,c)}return f(b,a),b}(c);return g}),b("davinci-eight/math/clamp",["require","exports"],function(a,b){function c(a,b,c){return b>a?b:a>c?c:a}return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/TubeGeometry",["require","exports","../math/clamp","../core/Face3","../geometries/Geometry","../math/Matrix4","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h,i){var j=function(a){function b(c,e,f,g,j,l){function m(a,b,c){return J.vertices.push(new i([a,b,c]))-1}a.call(this),e=e||64,f=f||.05,g=g||16,j=j||!1,l=l||b.NoTaper;var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=[],J=this,K=e+1,L=new i([0,0,0]),M=new k(c,e,j),N=M.tangents,O=M.normals,P=M.binormals;for(this.tangents=N,this.normals=O,this.binormals=P,w=0;K>w;w++)for(I[w]=[],q=w/(K-1),v=c.getPointAt(q),n=N[w],o=O[w],p=P[w],s=f*l(q),x=0;g>x;x++)r=x/g*2*Math.PI,t=-s*Math.cos(r),u=s*Math.sin(r),L.copy(v),L.x+=t*o.x+u*p.x,L.y+=t*o.y+u*p.y,L.z+=t*o.z+u*p.z,I[w][x]=m(L.x,L.y,L.z);for(w=0;e>w;w++)for(x=0;g>x;x++)y=j?(w+1)%e:w+1,z=(x+1)%g,A=I[w][x],B=I[y][x],C=I[y][z],D=I[w][z],E=new h(w/e,x/g),F=new h((w+1)/e,x/g),G=new h((w+1)/e,(x+1)/g),H=new h(w/e,(x+1)/g),this.faces.push(new d(A,B,D)),this.faceVertexUvs[0].push([E,F,H]),this.faces.push(new d(B,C,D)),this.faceVertexUvs[0].push([F.clone(),G,H.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b.NoTaper=function(a){return 1},b.SinusoidalTaper=function(a){return Math.sin(Math.PI*a)},b}(e),k=function(){function a(a,b,d){function e(){q[0]=new i([0,0,0]),r[0]=new i([0,0,0]),h=Number.MAX_VALUE,j=Math.abs(p[0].x),k=Math.abs(p[0].y),l=Math.abs(p[0].z),h>=j&&(h=j,o.set(1,0,0)),h>=k&&(h=k,o.set(0,1,0)),h>=l&&o.set(0,0,1),s.crossVectors(p[0],o).normalize(),q[0].crossVectors(p[0],s),r[0].crossVectors(p[0],q[0])}var f,h,j,k,l,m,n,o=new i([0,0,0]),p=[],q=[],r=[],s=new i([0,0,0]),t=g.identity(),u=b+1,v=1e-4;for(this.tangents=p,this.normals=q,this.binormals=r,m=0;u>m;m++)n=m/(u-1),p[m]=a.getTangentAt(n),p[m].normalize();for(e(),m=1;u>m;m++)q[m]=q[m-1].clone(),r[m]=r[m-1].clone(),s.crossVectors(p[m-1],p[m]),s.length()>v&&(s.normalize(),f=Math.acos(c(p[m-1].dot(p[m]),-1,1)),q[m].applyMatrix4(t.rotationAxis(s,f))),r[m].crossVectors(p[m],q[m]);if(d)for(f=Math.acos(c(q[0].dot(q[u-1]),-1,1)),f/=u-1,p[0].dot(s.crossVectors(q[0],q[u-1]))>0&&(f=-f),m=1;u>m;m++)q[m].applyMatrix4(t.rotationAxis(p[m],f*m)),r[m].crossVectors(p[m],q[m])}return a}();return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/VortexGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j,k){function l(a,b){var c=b%n;if(c===n-1)return l(a,b-1);var d=(b-c)/n;return v*(d+c*w)}function m(a){var b=a%n;return b===n-1?d:f}void 0===b&&(b=1),void 0===d&&(d=.08),void 0===f&&(f=.01),void 0===h&&(h=.2),void 0===i&&(i=.8),void 0===j&&(j=8),void 0===k&&(k=12),a.call(this);var n=9;b=b||1,d=d||.08,f=f||.01,h=h||.2,i=i||.8,j=j||8;var o=j*n;k=k||12;for(var p=2*Math.PI,q=b,r=new g([0,0,0]),s=[],t=[],u=i/(h+i),v=p/j,w=u/(n-2),x=0;k>=x;x++)for(var y=p*x/k,z=Math.cos(y),A=Math.sin(y),B=0;o>=B;B++){var C=l(o,B),D=Math.cos(C),E=Math.sin(C);r.x=q*D,r.y=q*E;var F=new g([0,0,0]),G=m(B);F.x=(q+G*z)*D,F.y=(q+G*z)*E,F.z=G*A,this.vertices.push(F),s.push(new e(B/o,x/k)),t.push(F.clone().sub(r).normalize())}for(var x=1;k>=x;x++)for(var B=1;o>=B;B++){var H=(o+1)*x+B-1,I=(o+1)*(x-1)+B-1,J=(o+1)*(x-1)+B,K=(o+1)*x+B,L=new c(H,I,K,void 0,[t[H],t[I],t[K]]);L.normal.add(t[H]),L.normal.add(t[I]),L.normal.add(t[K]),L.normal.normalize(),this.faces.push(L),this.faceVertexUvs[0].push([s[H].clone(),s[I].clone(),s[K].clone()]),L=new c(I,J,K,void 0,[t[I],t[J],t[K]]),L.normal.add(t[I]),L.normal.add(t[J]),L.normal.add(t[K]),L.normal.normalize(),this.faces.push(L),this.faceVertexUvs[0].push([s[I].clone(),s[J].clone(),s[K].clone()])}}return f(b,a),b}(d);return h}),b("davinci-eight/glsl/literals",["require","exports"],function(a,b){var c=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"];return c}),b("davinci-eight/glsl/operators",["require","exports"],function(a,b){var c=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];return c}),b("davinci-eight/glsl/builtins",["require","exports"],function(a,b){var c=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_CameraMatrix","gl_ModelViewCameraMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_CameraMatrixInverse","gl_ModelViewCameraMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_CameraMatrixTranspose","gl_ModelViewCameraMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_CameraMatrixInverseTranspose","gl_ModelViewCameraMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod","dFdx","dFdy"];return c}),b("davinci-eight/glsl/tokenize",["require","exports","./literals","./operators","./builtins"],function(a,b,c,d,e){function f(){function a(a){a.length&&N.push({type:u[L],data:a,position:Q,line:O,column:P})}function b(a){J=0,T+=a,I=T.length;for(var b;G=T[J],I>J;){switch(b=J,L){case i:J=z();break;case j:J=y();break;case k:J=x();break;case l:J=A();break;case m:J=D();break;case t:J=C();break;case n:J=E();break;case h:J=F();break;case r:J=w();break;case g:J=v()}if(b!==J)switch(T[b]){case"\n":P=0,++O;break;default:++P}}return K+=J,T=T.slice(J),N}function f(b){return M.length&&a(M.join("")),L=s,a("(eof)"),N}function v(){return M=M.length?[]:M,"/"===H&&"*"===G?(Q=K+J-1,L=i,H=G,J+1):"/"===H&&"/"===G?(Q=K+J-1,L=j,H=G,J+1):"#"===G?(L=k,Q=K+J,J):/\s/.test(G)?(L=r,Q=K+J,J):(R=/\d/.test(G),S=/[^\w_]/.test(G),Q=K+J,L=R?m:S?l:h,J)}function w(){return/[^\s]/g.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function x(){return"\n"===G&&"\\"!==H?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function y(){return x()}function z(){return"/"===G&&"*"===H?(M.push(G),a(M.join("")),L=g,J+1):(M.push(G),H=G,J+1)}function A(){if("."===H&&/\d/.test(G))return L=n,J;if("/"===H&&"*"===G)return L=i,J;if("/"===H&&"/"===G)return L=j,J;if("."===G&&M.length){for(;B(M););return L=n,J}if(";"===G||")"===G||"("===G){if(M.length)for(;B(M););return a(G),L=g,J+1}var b=2===M.length&&"="!==G;if(/[\w_\d\s]/.test(G)||b){for(;B(M););return L=g,J}return M.push(G),H=G,J+1}function B(b){for(var c,e,f=0;;){if(c=d.indexOf(b.slice(0,b.length+f).join("")),e=d[c],-1===c){if(f--+b.length>0)continue;e=b.slice(0,1).join("")}return a(e),Q+=e.length,M=M.slice(e.length),M.length}}function C(){return/[^a-fA-F0-9]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function D(){return"."===G?(M.push(G),L=n,H=G,J+1):/[eE]/.test(G)?(M.push(G),L=n,H=G,J+1):"x"===G&&1===M.length&&"0"===M[0]?(L=t,M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function E(){return"f"===G&&(M.push(G),H=G,J+=1),/[eE]/.test(G)?(M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function F(){if(/[^\d\w_]/.test(G)){var b=M.join("");return L=c.indexOf(b)>-1?q:e.indexOf(b)>-1?p:o,a(M.join("")),L=g,J}return M.push(G),H=G,J+1}var G,H,I,J=0,K=0,L=g,M=[],N=[],O=1,P=0,Q=0,R=!1,S=!1,T="";return function(a){return N=[],null!==a?b(a):f()}}var g=999,h=9999,i=0,j=1,k=2,l=3,m=4,n=5,o=6,p=7,q=8,r=9,s=10,t=11,u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];return f}),b("davinci-eight/glsl/tokenizeString",["require","exports","./tokenize"],function(a,b,c){function d(a){var b=c(),d=[];return d=d.concat(b(a)),d=d.concat(b(null))}return d}),b("davinci-eight/glsl/expr",["require","exports"],function(a,b){function c(a){return function(){return m.unexpected(a)}}function d(a,b){var c=r[a];return b=b||0,c?b>c.lbp&&(c.lbp=b):(c=Object.create(q),c.id=a,c.lbp=b,r[a]=c),c}function e(a,b,c){var e=d(a,b);e.led=c||function(a){return this.children=[a,k(b)],this.type="binary",this}}function f(a,b,c){var e=d(a,b);return e.led=c||function(a){return this.children=[a,k(b-1)],this.type="binary",this},e}function g(a,b){var c=d(a);return c.nud=b||function(){return this.children=[k(70)],this.type="unary",this},c}function h(a){var b=d(a,150);b.led=function(a){return this.children=[a],this.type="suffix",this}}function i(a){return f(a,10,function(a){return this.children=[a,k(9)],this.assignment=!0,this.type="assign",this})}function j(a,b){function c(a){m.unshift(a,!1);for(var b=0,d=a.children.length;d>b;++b)c(a.children[b]);m.shift()}m=a,o=b,p=0;var d;if(o.length){if(l(),d=k(0),d.parent=m[0],c(d),p<o.length)throw new Error("did not use all tokens");d.parent.children=[d]}}function k(a){var b,c=n;for(l(),b=c.nud();a<n.lbp;)c=n,l(),b=c.led(b);return b}function l(a){var b,c,d,e;if(a&&n.data!==a)return m.unexpected("expected `"+a+"`, got `"+n.data+"`");if(p>=o.length)return void(n=r["(end)"]);if(b=o[p++],c=b.data,d=b.type,"ident"===d)e=m.scope.find(c)||m.create_node(),d=e.type;else if("builtin"===d)e=r["(builtin)"];else if("keyword"===d)e=r["(keyword)"];else if("operator"===d){if(e=r[c],!e)return m.unexpected("unknown operator `"+c+"`")}else{if("float"!==d&&"integer"!==d)return m.unexpected("unexpected token.");d="literal",e=r["(literal)"]}return e&&(e.nud||(e.nud=s),e.children||(e.children=[])),e=Object.create(e),e.token=b,e.type=d,e.data||(e.data=c),n=e}var m,n,o,p,q={nud:function(){return this.children&&this.children.length?this:c("unexpected")()},led:c("missing operator")},r={},s=function(){return this};return d("(ident)").nud=s,d("(keyword)").nud=s,d("(builtin)").nud=s,d("(literal)").nud=s,d("(end)"),d(":"),d(";"),d(","),d(")"),d("]"),d("}"),f("&&",30),f("||",30),e("|",43),e("^",44),e("&",45),e("==",46),e("!=",46),e("<",47),e("<=",47),e(">",47),e(">=",47),e(">>",48),e("<<",48),e("+",50),e("-",50),e("*",60),e("/",60),e("%",60),e("?",20,function(a){return this.children=[a,k(0),(l(":"),k(0))],this.type="ternary",this}),e(".",80,function(a){return n.type="literal",m.fake(n),this.children=[a,n],l(),this}),e("[",80,function(a){return this.children=[a,k(0)],this.type="binary",l("]"),this}),e("(",80,function(a){if(this.children=[a],this.type="call",")"!==n.data)for(;;){if(this.children.push(k(0)),","!==n.data)break;l(",")}return l(")"),this}),g("-"),g("+"),g("!"),g("~"),g("defined"),g("(",function(){return this.type="group",this.children=[k(0)],l(")"),this}),g("++"),g("--"),h("++"),h("--"),i("="),i("+="),i("-="),i("*="),i("/="),i("%="),i("&="),i("|="),i("^="),i(">>="),i("<<="),j}),b("davinci-eight/glsl/Scope",["require","exports"],function(a,b){var c=function(){function a(a){this.state=a,this.scopes=[],this.current=null}return a.prototype.enter=function(a){this.scopes.push(this.current=this.state[0].scope=a||{})},a.prototype.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]},a.prototype.define=function(a){this.current[a]=this.state[0]},a.prototype.find=function(a,b){for(var c=this.scopes.length-1;c>-1;--c)if(this.scopes[c].hasOwnProperty(a))return this.scopes[c][a];return null},a}();return c}),b("davinci-eight/glsl/parser",["require","exports","./expr","./Scope"],function(a,b,c,d){function e(){function a(a){return null===a?(e(),Fa):(Za=[],b(a),Za)}function b(a){if("whitespace"===a.type||"line-comment"===a.type||"block-comment"===a.type)return void _a.push(a);for($a.push(a),Ga=Ga||$a[0],Ga&&_a.length&&(Ga.preceding=Ga.preceding||[],Ga.preceding=Ga.preceding.concat(_a),_a=[]);y();)switch(Ya[0].mode){case m:Y();break;case n:X();break;case r:$();break;case s:_();break;case w:da();break;case o:va(!0,!0);break;case x:wa();break;case l:ca();break;case A:ba();break;case B:aa();break;case p:Da();break;case q:Ea();break;case t:ya();break;case u:Ba();break;case G:Ca();break;case C:Aa();break;case v:za();break;case I:xa()}}function e(a){return arguments.length&&b(a),Ya.length>1?void ka("unexpected EOF"):void(Wa=!0)}function y(){return ab||!Ya.length?!1:Ga=$a[0]}function z(a){Ya.unshift(a),Ya.shift()}function L(a,b){a.parent=Ya[0];var c=[].unshift.call(this,a);if(b=void 0===b?!0:b,k)for(var d="",e=0,f=this.length-1;f>e;++e)d+=" |";return b&&Ha!==a&&Ha.children.push(a),Ha=a,c}function W(){var a=[].shift.call(this),b=Va[this.length],c=!1;if(k)for(var d="",e=0,f=this.length;f>e;++e)d+=" |";return Va.length?"function"==typeof Va[0]?c=Va[0](a):void 0!==b&&(c=b.test?b.test(a.type):b===a.type):c=!0,c&&!ab&&Za.push(a),Ha=a.parent,a}function X(){function a(){if(Ga.data===Ya[0].expecting)return Ya.scope.exit(),Ya.shift();switch(Ga.type){case"preprocessor":return Ya.fake(fa()),void $a.shift();default:return void Ya.unshift(Ja())}}return na(function(){return Ya.scope.enter(),j},a)()}function Y(){if(Ya[0].brace)return"}"!==Ga.data?ka("expected `}`, got "+Ga.data):(Ya[0].brace=!1,$a.shift(),Ya.shift());switch(Ga.type){case"eof":return Z();case"keyword":switch(Ga.data){case"for":return Ya.unshift(Pa());case"if":return Ya.unshift(Qa());case"while":return Ya.unshift(Ra());case"do":return Ya.unshift(Ta());case"break":return Ya.fake(f(D,Ga)),$a.shift();case"continue":return Ya.fake(f(E,Ga)),$a.shift();case"discard":return Ya.fake(f(F,Ga)),$a.shift();case"return":return Ya.unshift(Sa());case"precision":return Ya.unshift(La())}return Ya.unshift(ga(Q));case"ident":var a;if(a=Ya.scope.find(Ga.data))return"struct"===a.parent.type?Ya.unshift(ga(Q)):Ya.unshift(ia(";"));case"operator":if("{"===Ga.data){Ya[0].brace=!0;var b=Ia();return b.expecting="}",$a.shift(),Ya.unshift(b)}if(";"===Ga.data)return $a.shift(),Ya.shift();default:return Ya.unshift(ia(";"))}}function Z(){return Xa&&(ab=!0),Xa=!0,Ya.shift()}function $(){function a(){return"invariant"===Ga.data?o.flags&M?(Ya.unshift(ja()),j):ka("`invariant` is not allowed here"):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function b(){return g(Ga)?o.flags&N?(Ya.unshift(ja()),j):ka("storage is not allowed here"):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function c(){return h(Ga)?o.flags&O?ka("parameter is not allowed here"):(Ya.unshift(ja()),j):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function d(){return i(Ga)?(Ya.unshift(ja()),j):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function e(){if("struct"===Ga.data)return o.flags&P?(Ya.unshift(ha()),j):ka("cannot nest structs");if("keyword"===Ga.type)return Ya.unshift(ja()),j;var a=Ya.scope.find(Ga.data);return a?(Ya.fake(Object.create(a)),$a.shift(),j):ka("expected user defined type, struct or keyword, got "+Ga.data)}function k(){return","!==Ga.data||o.flags&K?"["===Ga.data?void Ya.unshift(Ua()):")"===Ga.data?Ya.shift():";"===Ga.data?o.stage+3:"ident"!==Ga.type&&"builtin"!==Ga.type?ka("expected identifier, got "+Ga.data):(o.collected_name=$a.shift(),j):Ya.shift()}function l(){return"("===Ga.data?($a.unshift(o.collected_name),delete o.collected_name,Ya.unshift(Na()),o.stage+2):j}function m(){return $a.unshift(o.collected_name),delete o.collected_name,Ya.unshift(Ka()),j}function n(){return Ya.shift()}var o=Ya[0];return na(a,b,c,d,e,k,l,m,n)()}function _(){if("ident"===Ga.type){var a=Ga.data;return Ya.unshift(Ma()),void Ya.scope.define(a)}if("operator"===Ga.type){if(","===Ga.data)return Ya[1].flags&K?$a.shift():Ya.shift();if("="===Ga.data)return Ya[1].flags&J?($a.shift(),void Ya.unshift(ia(",",";"))):ka("`=` is not allowed here.");if("["===Ga.data)return void Ya.unshift(Ua())}return Ya.shift()}function aa(){return"keyword"===Ga.type?(Ya[0].type="keyword",void(Ya[0].mode=A)):"ident"===Ga.type?(Ya[0].type="ident",void(Ya[0].mode=l)):ka("expected keyword or user-defined name, got "+Ga.data)}function ba(){return"keyword"!==Ga.type?ka("expected keyword, got "+Ga.data):(Ya.shift(),$a.shift())}function ca(){return"ident"!==Ga.type?ka("expected user-defined name, got "+Ga.data):(Ya[0].data=Ga.data,Ya.shift(),$a.shift())}function da(){function a(a){try{c(Ya,a)}catch(b){throw ab=!0,b}return Ya.shift()}var b=Ya[0].expecting;if(Ya[0].tokens=Ya[0].tokens||[],void 0===Ya[0].parenlevel&&(Ya[0].parenlevel=0,Ya[0].bracelevel=0),Ya[0].parenlevel<1&&b.indexOf(Ga.data)>-1)return a(Ya[0].tokens);switch("("===Ga.data?++Ya[0].parenlevel:")"===Ga.data&&--Ya[0].parenlevel,Ga.data){case"{":++Ya[0].bracelevel;break;case"}":--Ya[0].bracelevel;break;case"(":++Ya[0].parenlevel;break;case")":--Ya[0].parenlevel}return Ya[0].parenlevel<0?ka("unexpected `)`"):Ya[0].bracelevel<0?ka("unexpected `}`"):void Ya[0].tokens.push($a.shift())}function ea(a){return function(){return f(a,Ga)}}function fa(){return f(V[Ga.type],Ga,Ha)}function ga(a){var b=f(r,Ga,Ha);return b.flags=a,b}function ha(a,b){var c=f(o,Ga,Ha);return c.allow_assign=void 0===a?!0:a,c.allow_comma=void 0===b?!0:b,c}function ia(a,b){var c=f(w,Ga,Ha);return c.expecting=[].slice.call(arguments),c}function ja(a){var b=Ga;return a&&(b={type:"(implied)",data:"(default)",position:b.position}),f(A,b,Ha)}function ka(a){throw ab=!0,new Error((a||"unexpected "+Ya)+" at line "+Ya[0].token.line)}function la(a,b){return ma(a,Ga.type)&&ma(b,Ga.data)}function ma(a,b){switch(typeof a){case"string":return b!==a&&ka("expected `"+a+"`, got "+b+"\n"+Ga.data),!ab;case"object":return a&&-1===a.indexOf(b)&&ka("expected one of `"+a.join("`, `")+"`, got "+b),!ab}return!0}function na(a,b,c,d,e,f,g,h,i,k,l,m){var n,o,p=[].slice.call(arguments);return function(){var a=Ya[0];return a.stage||(a.stage=0),(n=p[a.stage])?(o=n(),o===j?++a.stage:void(void 0!==o&&(a.stage=o))):ka("parser in undefined state!")}}function oa(a,b){return b=b||"operator",function(){if(la(b,a)){var c=$a.shift(),d=Ya[0].children,e=d[d.length-1];return e&&e.token&&c.preceding&&(e.token.succeeding=e.token.succeeding||[],e.token.succeeding=e.token.succeeding.concat(c.preceding)),j}}}function pa(a){return function(){return Ya.unshift(ia(a)),j}}function qa(a){return a?function(){var a=Ga.data;return la("ident")&&(Ya.unshift(Ma()),Ya.scope.define(a),j)}:function(){if(la("ident")){var a=Object.create(Ya.scope.find(Ga.data));return a.token=Ga,$a.shift(),j}}}function ra(){return function(){var a=Ia();return a.expecting="}",Ya.unshift(a),j}}function sa(a){return function(){var b=Ya[0].stage;return"{"!==Ga.data?(Ya.unshift(Ja()),b+a):($a.shift(),j)}}function ta(){return function(){return Ya.shift(),Ya.shift()}}function ua(){va=na(oa("struct","keyword"),function(){return"{"===Ga.data?(Ya.fake(f(l,{data:"",position:Ga.position,type:"ident"})),j):qa(!0)()},function(){return Ya.scope.enter(),j},oa("{"),function(){return"preprocessor"===Ga.type?(Ya.fake(fa()),void $a.shift()):"}"===Ga.data?(Ya.scope.exit(),$a.shift(),Ya.shift()):";"===Ga.data?void $a.shift():void Ya.unshift(ga(S))}),wa=na(function(){return $a.shift(),j},function(){return la("keyword",["lowp","mediump","highp"])&&(Ya.unshift(ja()),j)},function(){return Ya.unshift(ja()),j},function(){return Ya.shift()}),xa=na(oa("["),pa("]"),oa("]"),function(){return Ya.shift()}),ya=na(oa("for","keyword"),oa("("),function(){var a;if("ident"===Ga.type){if((a=Ya.scope.find(Ga.data))||(a=Ya.create_node()),"struct"===a.parent.type)return Ya.unshift(ga(Q)),j}else if("builtin"===Ga.type||"keyword"===Ga.type)return Ya.unshift(ga(Q)),j;return pa(";")()},oa(";"),pa(";"),oa(";"),pa(")"),oa(")"),sa(3),ra(),oa("}"),ta()),za=na(oa("if","keyword"),oa("("),pa(")"),oa(")"),sa(3),ra(),oa("}"),function(){return"else"===Ga.data?($a.shift(),Ya.unshift(Ja()),j):ta()()},ta()),Aa=na(oa("return","keyword"),function(){return";"===Ga.data?j:(Ya.unshift(ia(";")),j)},function(){$a.shift(),ta()()}),Ba=na(oa("while","keyword"),oa("("),pa(")"),oa(")"),sa(3),ra(),oa("}"),ta()),Ca=na(oa("do","keyword"),sa(3),ra(),oa("}"),oa("while","keyword"),oa("("),pa(")"),oa(")"),ta()),Da=na(function(){for(var a=1,b=Ya.length;b>a;++a)if(Ya[a].mode===p)return ka("function definition is not allowed within another function");return j},function(){if(la("ident")){var a=Ga.data,b=Ya.scope.find(a);return Ya.unshift(Ma()),Ya.scope.define(a),Ya.scope.enter(b?b.scope:null),j}},oa("("),function(){return Ya.unshift(Oa()),j},oa(")"),function(){return";"===Ga.data?(Ya.scope.exit(),Ya.shift(),Ya.shift()):j},oa("{"),ra(),oa("}"),function(){return Ya.scope.exit(),j},function(){return Ya.shift(),Ya.shift(),Ya.shift()}),Ea=na(function(){return"void"===Ga.data?(Ya.fake(ja()),$a.shift(),j):")"===Ga.data?void Ya.shift():"struct"===Ga.data?(Ya.unshift(ha(T,U)),j):(Ya.unshift(ga(R)),j)},function(){return","===Ga.data?($a.shift(),0):")"===Ga.data?void Ya.shift():void ka("expected one of `,` or `)`, got "+Ga.data)})}var va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia=ea(n),Ja=ea(m),Ka=ea(s),La=ea(x),Ma=ea(l),Na=(ea(B),ea(p)),Oa=ea(q),Pa=ea(t),Qa=ea(v),Ra=ea(u),Sa=ea(C),Ta=ea(G),Ua=ea(I),Va=arguments.length?[].slice.call(arguments):[],Wa=!1,Xa=!1,Ya=[],Za=[],$a=[],_a=[],ab=!1;return Ya.shift=W,Ya.unshift=L,Ya.fake=z,Ya.unexpected=ka,Ya.scope=new d(Ya),Ya.create_node=function(){var b=f(l,Ga);return b.parent=a.program,b},ua(),Ha=Ia(),Ha.expecting="(eof)",Ha.mode=n,Ha.token={type:"(program)",data:"(program)"},Fa=Ha,a.program=Fa,a.scope=function(a){return 1===arguments.length&&(Ya.scope=a),Ya.scope},Ya.unshift(Ha),a}function f(a,b,c){return{mode:a,token:b,children:[],type:W[a],id:(4294967295*Math.random()).toString(16)}}function g(a){return"const"===a.data||"attribute"===a.data||"uniform"===a.data||"varying"===a.data}function h(a){return"in"===a.data||"inout"===a.data||"out"===a.data}function i(a){return"highp"===a.data||"mediump"===a.data||"lowp"===a.data}var j={},k=!1,l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=12,y=13,z=14,A=15,B=16,C=17,D=18,E=19,F=20,G=21,H=22,I=23,J=1,K=2,L=4,M=8,N=16,O=32,P=64,Q=255,R=Q&~(J|K|O|M|L),S=Q&~(J|M|N|P),T=!1,U=!1,V={"block-comment":y,"line-comment":y,preprocessor:z},W=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"];return e}),b("davinci-eight/glsl/parse",["require","exports","../glsl/tokenizeString","../glsl/parser"],function(a,b,c,d){function e(a){for(var b=c(a),e=d(),f=0;f<b.length;f++)e(b[f]);var g=e(null);return g}return e}),b("davinci-eight/glsl/DefaultNodeEventHandler",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.beginStatementList=function(){},a.prototype.endStatementList=function(){},a.prototype.beginStatement=function(){},a.prototype.endStatement=function(){},a.prototype.beginDeclaration=function(){},a.prototype.endDeclaration=function(){},a.prototype.declaration=function(a,b,c,d){},a.prototype.beginDeclarationList=function(){},a.prototype.endDeclarationList=function(){},a.prototype.beginFunction=function(){},a.prototype.endFunction=function(){},a.prototype.beginFunctionArgs=function(){},a.prototype.endFunctionArgs=function(){},a.prototype.beginExpression=function(){},a.prototype.endExpression=function(){},a.prototype.beginAssign=function(){},a.prototype.endAssign=function(){},a.prototype.identifier=function(a){},a.prototype.keyword=function(a){},a.prototype.builtin=function(a){},a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/glsl/NodeWalker",["require","exports","./DefaultNodeEventHandler"],function(a,b,c){var d=function(a){function b(b){a.call(this),this.modifiers=[],this.names=[],this.next=b}return f(b,a),b.prototype.beginDeclaration=function(){this.kind=void 0,this.type=void 0,this.modifiers=[],this.names=[]},b.prototype.endDeclaration=function(){this.kind&&this.next.declaration(this.kind,this.modifiers,this.type,this.names)},b.prototype.identifier=function(a){this.names.push(a)},b.prototype.keyword=function(a){switch(a){case"attribute":case"const":case"uniform":case"varying":this.kind=a;break;case"float":case"int":case"mat2":case"mat3":case"mat4":case"vec2":case"vec3":case"vec4":case"void":this.type=a;break;case"highp":case"precision":this.modifiers.push(a);break;default:throw new Error("Unexpected keyword: "+a)}},b}(c),e=function(){function a(){}return a.prototype.walk=function(a,b){var c=this;switch(a.type){case"assign":b.beginAssign(),a.children.forEach(function(a){c.walk(a,b)}),b.endAssign();break;case"builtin":b.builtin(a.token.data);break;case"binary":break;case"call":break;case"decl":var e=new d(b);e.beginDeclaration(),a.children.forEach(function(a){c.walk(a,e)}),e.endDeclaration();break;case"decllist":b.beginDeclarationList(),a.children.forEach(function(a){c.walk(a,b)}),b.endDeclarationList();break;case"expr":b.beginExpression(),a.children.forEach(function(a){c.walk(a,b)}),b.endExpression();break;case"forloop":break;case"function":b.beginFunction(),a.children.forEach(function(a){c.walk(a,b)}),b.endFunction();break;case"functionargs":b.beginFunctionArgs(),a.children.forEach(function(a){c.walk(a,b)}),b.endFunctionArgs();break;case"ident":b.identifier(a.token.data);break;case"keyword":b.keyword(a.token.data);break;case"literal":break;case"placeholder":break;case"precision":break;case"stmt":b.beginStatement(),a.children.forEach(function(a){c.walk(a,b)}),b.endStatement();break;case"stmtlist":b.beginStatementList(),a.children.forEach(function(a){c.walk(a,b)}),b.endStatementList();break;default:throw new Error("type: "+a.type)}},a}();return e}),b("davinci-eight/glsl/Declaration",["require","exports"],function(a,b){var c=function(){function a(a,b,c,d){this.kind=a,this.modifiers=b,this.type=c,this.name=d}return a}();return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/glsl/ProgramArgs",["require","exports","./DefaultNodeEventHandler","./Declaration"],function(a,b,c,d){var e=function(a){function b(){a.call(this),this.attributes=[],this.constants=[],this.uniforms=[],this.varyings=[]}return f(b,a),b.prototype.declaration=function(a,b,c,e){var f={};f.attribute=this.attributes,f["const"]=this.constants,f.uniform=this.uniforms,f.varying=this.varyings;var g=f[a];if(!g)throw new Error("Unexpected declaration kind: "+a);e.forEach(function(e){g.push(new d(a,b,c,e))})},b}(c);return e}),b("davinci-eight/programs/shaderProgram",["require","exports","../glsl/parse","../glsl/NodeWalker","../glsl/ProgramArgs","../utils/uuid4","../core/ShaderAttribLocation","../core/ShaderUniformLocation"],function(a,b,c,d,e,f,g,h){function i(a,b,c){var d=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(d,b),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(d));var e=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(e,c),a.compileShader(e),!a.getShaderParameter(e,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(e));var f=a.createProgram();if(a.attachShader(f,d),a.attachShader(f,e),a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS))throw new Error(a.getProgramInfoLog(f));return f}var j=function(a,b){function j(){function f(a){return{modifiers:a.modifiers,type:a.type,name:a.name}}function i(){try{var b=c(a),i=new d,j=new e;i.walk(b,j),j.attributes.forEach(function(a){var b=f(a);o.push(b),s[b.name]=new g(b.name,b.type)}),j.uniforms.forEach(function(a){var b=f(a);q.push(b),t[b.name]=new h(b.name,b.type)}),j.varyings.forEach(function(a){var b=f(a);r.push(b)})}catch(k){console.log(k)}}function j(){try{var a=c(b),g=new d,i=new e;g.walk(a,i),i.uniforms.forEach(function(a){var b=f(a);q.push(b),t[b.name]=new h(b.name,b.type)})}catch(j){console.log(j)}}i(),j()}if("string"!=typeof a)throw new Error("vertexShader argument must be a string.");if("string"!=typeof b)throw new Error("fragmentShader argument must be a string.");var k,l,m,n,o=[],p=[],q=[],r=[],s={},t={},u={get vertexShader(){return a},get fragmentShader(){return b},get attributes(){return o},get constants(){return p},get uniforms(){return q},get varyings(){return r},contextFree:function(){if(k){m.deleteProgram(k),k=void 0,l=void 0,m=void 0,n=void 0;for(var a in s)s[a].contextFree();for(var b in t)t[b].contextFree()}},contextGain:function(c,d){if(m=c,n!==d){k=i(m,a,b),l=f().generate(),n=d;for(var e in s)s[e].contextGain(c,k);for(var g in t)t[g].contextGain(c,k)}},contextLoss:function(){k=void 0,l=void 0,m=void 0,n=void 0;for(var a in s)s[a].contextLoss();
for(var b in t)t[b].contextLoss()},hasContext:function(){return!!k},get program(){return k},get programId(){return l},use:function(){return m?m.useProgram(k):void 0},attributeLocation:function(a){if(s[a])return s[a];throw new Error(a+" is not an attribute variable in the shader program.")},uniformLocation:function(a){if(t[a])return t[a];throw new Error(a+" is not a uniform variable in the shader program.")}};return j(),u};return j}),b("davinci-eight/programs/pointsProgram",["require","exports","../programs/shaderProgram"],function(a,b,c){var d=["attribute vec3 aVertexPosition;","attribute vec3 aVertexColor;","","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","","varying highp vec4 vColor;","void main(void)","{","gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","vColor = vec4(aVertexColor, 1.0);","gl_PointSize = 6.0;","}"].join("\n"),e=["varying highp vec4 vColor;","void main(void)","{","gl_FragColor = vColor;","}"].join("\n"),f=function(){var a=c(d,e),b={get attributes(){return a.attributes},get constants(){return a.constants},get uniforms(){return a.uniforms},get varyings(){return a.varyings},get program(){return a.program},get programId(){return a.programId},contextFree:function(){return a.contextFree()},contextGain:function(b,c){return a.contextGain(b,c)},contextLoss:function(){return a.contextLoss()},hasContext:function(){return a.hasContext()},get vertexShader(){return a.vertexShader},get fragmentShader(){return a.fragmentShader},use:function(){return a.use()},attributeLocation:function(b){return a.attributeLocation(b)},uniformLocation:function(b){return a.uniformLocation(b)}};return b};return f}),b("davinci-eight/programs/smartProgram",["require","exports","./shaderProgram","../core/Symbolic"],function(a,b,c,d){function e(a){return!!a[d.UNIFORM_AMBIENT_LIGHT]||!!a[d.UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&!!a[d.UNIFORM_DIRECTIONAL_LIGHT_COLOR]}var f=" ",g="attribute"+f,h="uniform"+f,i=","+f,j=";",k="(",l=")",m=f+"*"+f,n=f+"="+f,o="directionalLightCosineFactor",p=function(a,b,c){var e=[];for(name in a)e.push(g+a[name].glslType+f+a[name].name+j);for(name in b)e.push(h+b[name].glslType+f+b[name].name+j);e.push("varying highp vec4 vColor;"),c&&e.push("varying highp vec3 vLight;"),e.push("void main(void) {");var p=[];p.unshift(j),p.unshift(l),p.unshift("1.0"),p.unshift(i),p.unshift(a[d.ATTRIBUTE_POSITION].name),p.unshift(k),p.unshift("vec4"),b[d.UNIFORM_MODEL_MATRIX]&&(p.unshift(m),p.unshift(b[d.UNIFORM_MODEL_MATRIX].name)),b[d.UNIFORM_VIEW_MATRIX]&&(p.unshift(m),p.unshift(b[d.UNIFORM_VIEW_MATRIX].name)),b[d.UNIFORM_PROJECTION_MATRIX]&&(p.unshift(m),p.unshift(b[d.UNIFORM_PROJECTION_MATRIX].name)),p.unshift(n),p.unshift("gl_Position"),e.push(p.join(""));var q=[];if(a[d.ATTRIBUTE_COLOR])switch(a[d.ATTRIBUTE_COLOR].glslType){case"vec4":e.push("  vColor = "+a[d.ATTRIBUTE_COLOR].name+j);break;case"vec3":e.push("  vColor = vec4("+a[d.ATTRIBUTE_COLOR].name+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[d.ATTRIBUTE_COLOR].glslType)}else if(b[d.UNIFORM_COLOR])switch(b[d.UNIFORM_COLOR].glslType){case"vec4":e.push("  vColor = "+b[d.UNIFORM_COLOR].name+j);break;case"vec3":e.push("  vColor = vec4("+b[d.UNIFORM_COLOR].name+", 1.0);");break;default:throw new Error("Unexpected type for color uniform: "+b[d.UNIFORM_COLOR].glslType)}e.push(q.join("")),c&&(b[d.UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&b[d.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]&&b[d.UNIFORM_NORMAL_MATRIX]&&a[d.ATTRIBUTE_NORMAL]?(e.push("  vec3 L = normalize("+b[d.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION].name+");"),e.push("  vec3 N = normalize("+b[d.UNIFORM_NORMAL_MATRIX].name+" * "+a[d.ATTRIBUTE_NORMAL].name+");"),e.push("  float "+o+" = max(dot(N, L), 0.0);"),b[d.UNIFORM_AMBIENT_LIGHT]?e.push("  vLight = "+b[d.UNIFORM_AMBIENT_LIGHT].name+" + "+o+" * "+b[d.UNIFORM_DIRECTIONAL_LIGHT_COLOR].name+";"):e.push("  vLight = "+o+" * "+b[d.UNIFORM_DIRECTIONAL_LIGHT_COLOR].name+";")):b[d.UNIFORM_AMBIENT_LIGHT]?e.push("  vLight = "+b[d.UNIFORM_AMBIENT_LIGHT].name+";"):e.push("  vLight = vec3(1.0, 1.0, 1.0);")),e.push("  gl_PointSize = 6.0;"),e.push("}");var r=e.join("\n");return r},q=function(a,b,c,d){var e=[];e.push("varying highp vec4 vColor;"),d&&e.push("varying highp vec3 vLight;"),e.push("void main(void) {"),d?c?e.push("  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);"):e.push("  gl_FragColor = vec4(vLight, 1.0);"):c?e.push("  gl_FragColor = vColor;"):e.push("  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),e.push("}");var f=e.join("\n");return f},r=function(a,b){if(!a)throw new Error("The attributes parameter is required for smartProgram.");if(!b)throw new Error("The uniforms parameter is required for smartProgram.");var d={};b.forEach(function(a){for(var b in a)d[b]=a[b]});var f=!0,g=e(d),h=c(p(a,d,g),q(a,d,f,g)),i={get attributes(){return h.attributes},get constants(){return h.constants},get uniforms(){return h.uniforms},get varyings(){return h.varyings},get program(){return h.program},get programId(){return h.programId},get vertexShader(){return h.vertexShader},get fragmentShader(){return h.fragmentShader},contextFree:function(){return h.contextFree()},contextGain:function(a,b){return h.contextGain(a,b)},contextLoss:function(){return h.contextLoss()},hasContext:function(){return h.hasContext()},use:function(){return h.use()},attributeLocation:function(a){return h.attributeLocation(a)},uniformLocation:function(a){return h.uniformLocation(a)}};return i};return r}),b("davinci-eight/programs/shaderProgramFromScripts",["require","exports","../programs/shaderProgram"],function(a,b,c){function d(a,b,d){function e(a){return d.getElementById(a)}return void 0===d&&(d=document),c(e(a).textContent,e(b).textContent)}return d}),!function(a,c){if("object"==typeof exports&&"object"==typeof module)module.exports=c();else if("function"==typeof b&&b.amd)b("gl-matrix",c);else{var d=c();for(var e in d)("object"==typeof exports?exports:a)[e]=d[e]}}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){b.glMatrix=c(1),b.mat2=c(2),b.mat2d=c(3),b.mat3=c(4),b.mat4=c(5),b.quat=c(6),b.vec2=c(9),b.vec3=c(7),b.vec4=c(8)},function(a,b){var c={};c.EPSILON=1e-6,c.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,c.RANDOM=Math.random,c.setMatrixArrayType=function(a){GLMAT_ARRAY_TYPE=a};var d=Math.PI/180;c.toRadian=function(a){return a*d},a.exports=c},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.mul=e.multiply,e.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},a.exports=e},function(a,b,c){var d=c(1),e=c(4),f=c(7),g=c(8),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return-.999999>i?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.exports=h},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],
a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},a.exports=e}])}),b("davinci-eight/math/Matrix3",["require","exports","gl-matrix"],function(a,b,c){var d=function(){function a(){this.elements=c.mat3.create()}return a.prototype.identity=function(){c.mat3.identity(this.elements)},a.prototype.getInverse=function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(b||!b)throw new Error(f);return console.warn(f),this.identity(),this}return this.multiplyScalar(1/e),this},a.prototype.multiplyScalar=function(a){var b=this.elements;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},a.prototype.normalFromMatrix4=function(a){this.getInverse(a).transpose()},a.prototype.transpose=function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},a}();return d}),b("davinci-eight/mesh/adapterOptions",["require","exports","../core/DrawMode","../core/Symbolic"],function(a,b,c,d){function e(a){void 0===a&&(a={wireFrame:!1});var b=a.wireFrame?c.LINES:c.TRIANGLES,e=a.elementUsage,f=a.positionVarName||d.ATTRIBUTE_POSITION,g=a.normalVarName||d.ATTRIBUTE_NORMAL;return{drawMode:b,elementUsage:e,positionVarName:f,normalVarName:g}}return e}),b("davinci-eight/mesh/arrowMesh",["require","exports","../geometries/GeometryAdapter","../geometries/ArrowGeometry","../mesh/adapterOptions","../math/Spinor3"],function(a,b,c,d,e,f){function g(a){a=a||{};var b=1,c=new f,e=12,g=1,h=.01,i=.08,j=.2,k=a.axis;return new d(b,c,e,g,h,i,j,k)}function h(a){var b=new c(g(a),e(a)),d={draw:function(a){return b.draw(a)},update:function(a){return b.update(a)},getAttribArray:function(a){return b.getAttribArray(a)},getAttribMeta:function(){return b.getAttribMeta()},get drawMode(){return b.drawMode},set drawMode(a){b.drawMode=a},get dynamic(){return b.dynamic},hasElementArray:function(){return b.hasElementArray()},getElementArray:function(){return b.getElementArray()}};return d}return h}),b("davinci-eight/mesh/ArrowBuilder",["require","exports","../checks/expectArg","../checks/isUndefined","../mesh/arrowMesh","../math/Vector3"],function(a,b,c,d,e,f){var g=function(){function a(a){this.$axis=f.e3.clone(),a=a||{modelMatrix:"uModelMatrix"},this.setWireFrame(d(a.wireFrame)?!1:a.wireFrame)}return Object.defineProperty(a.prototype,"axis",{get:function(){return this.$axis},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depth",{get:function(){return this.$depth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"widthSegments",{get:function(){return this.$widthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightSegments",{get:function(){return this.$heightSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthSegments",{get:function(){return this.$depthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wireFrame",{get:function(){return this.$wireFrame},enumerable:!0,configurable:!0}),a.prototype.setAxis=function(a){return c("axis",a).toBeObject(),this.$axis.copy(a),this},a.prototype.setHeight=function(a){return c("height",a).toBeNumber().toSatisfy(a>=0,"height must be greater than or equal to zero."),this.$height=a,this},a.prototype.setDepth=function(a){return c("depth",a).toBeNumber().toSatisfy(a>=0,"depth must be greater than or equal to zero."),this.$depth=a,this},a.prototype.setWidthSegments=function(a){return c("widthSegments",a).toBeNumber().toSatisfy(a>0,"widthSegments must be greater than zero."),this.$widthSegments=a,this},a.prototype.setHeightSegments=function(a){return c("heightSegments",a).toBeNumber().toSatisfy(a>0,"heightSegments must be greater than zero."),this.$heightSegments=a,this},a.prototype.setDepthSegments=function(a){return c("depthSegments",a).toBeNumber().toSatisfy(a>0,"depthSegments must be greater than zero."),this.$depthSegments=a,this},a.prototype.setWireFrame=function(a){return c("wireFrame",a).toBeBoolean(),this.$wireFrame=a,this},a.prototype.buildMesh=function(){return e(this)},a}();return g}),b("davinci-eight/mesh/boxMesh",["require","exports","../geometries/GeometryAdapter","../geometries/BoxGeometry","../mesh/adapterOptions"],function(a,b,c,d,e){function f(a){return a=a||{},new d(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments,a.wireFrame)}function g(a){var b=new c(f(a),e(a)),d={draw:function(a){return b.draw(a)},update:function(a){return b.update(a)},getAttribArray:function(a){return b.getAttribArray(a)},getAttribMeta:function(){return b.getAttribMeta()},get drawMode(){return b.drawMode},set drawMode(a){b.drawMode=a},get dynamic(){return b.dynamic},hasElementArray:function(){return b.hasElementArray()},getElementArray:function(){return b.getElementArray()}};return d}return g}),b("davinci-eight/mesh/BoxBuilder",["require","exports","../checks/expectArg","../checks/isUndefined","../mesh/boxMesh","../core/Symbolic"],function(a,b,c,d,e,f){var g=function(){function a(a){a=a||{},this.setWidth(d(a.width)?1:a.width),this.setHeight(d(a.height)?1:a.height),this.setDepth(d(a.depth)?1:a.depth),this.setWidthSegments(d(a.widthSegments)?1:a.widthSegments),this.setHeightSegments(d(a.heightSegments)?1:a.heightSegments),this.setDepthSegments(d(a.depthSegments)?1:a.depthSegments),this.setWireFrame(d(a.wireFrame)?!1:a.wireFrame),this.setPositionVarName(d(a.positionVarName)?f.ATTRIBUTE_POSITION:a.positionVarName),this.setNormalVarName(d(a.normalVarName)?f.ATTRIBUTE_NORMAL:a.normalVarName)}return Object.defineProperty(a.prototype,"width",{get:function(){return this.$width},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depth",{get:function(){return this.$depth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"widthSegments",{get:function(){return this.$widthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightSegments",{get:function(){return this.$heightSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthSegments",{get:function(){return this.$depthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wireFrame",{get:function(){return this.$wireFrame},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"positionVarName",{get:function(){return this.$positionVarName},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"normalVarName",{get:function(){return this.$normalVarName},enumerable:!0,configurable:!0}),a.prototype.setWidth=function(a){return c("width",a).toBeNumber().toSatisfy(a>=0,"width must be greater than or equal to zero."),this.$width=a,this},a.prototype.setHeight=function(a){return c("height",a).toBeNumber().toSatisfy(a>=0,"height must be greater than or equal to zero."),this.$height=a,this},a.prototype.setDepth=function(a){return c("depth",a).toBeNumber().toSatisfy(a>=0,"depth must be greater than or equal to zero."),this.$depth=a,this},a.prototype.setWidthSegments=function(a){return c("widthSegments",a).toBeNumber().toSatisfy(a>0,"widthSegments must be greater than zero."),this.$widthSegments=a,this},a.prototype.setHeightSegments=function(a){return c("heightSegments",a).toBeNumber().toSatisfy(a>0,"heightSegments must be greater than zero."),this.$heightSegments=a,this},a.prototype.setDepthSegments=function(a){return c("depthSegments",a).toBeNumber().toSatisfy(a>0,"depthSegments must be greater than zero."),this.$depthSegments=a,this},a.prototype.setWireFrame=function(a){return c("wireFrame",a).toBeBoolean(),this.$wireFrame=a,this},a.prototype.setPositionVarName=function(a){return c("positionVarName",a).toBeString(),this.$positionVarName=a,this},a.prototype.setNormalVarName=function(a){return c("normalVarName",a).toBeString(),this.$normalVarName=a,this},a.prototype.buildMesh=function(){return e(this)},a}();return g}),b("davinci-eight/mesh/cylinderMesh",["require","exports","../geometries/GeometryAdapter","../geometries/CylinderGeometry","../mesh/adapterOptions"],function(a,b,c,d,e){function f(a){return a=a||{},new d(a.radiusTop,a.radiusBottom,a.height)}function g(a){var b=new c(f(a),e(a)),d={draw:function(a){return b.draw(a)},update:function(a){return b.update(a)},getAttribArray:function(a){return b.getAttribArray(a)},getAttribMeta:function(){return b.getAttribMeta()},get drawMode(){return b.drawMode},set drawMode(a){b.drawMode=a},get dynamic(){return b.dynamic},hasElementArray:function(){return b.hasElementArray()},getElementArray:function(){return b.getElementArray()}};return d}return g}),b("davinci-eight/mesh/CylinderBuilder",["require","exports","../checks/expectArg","../checks/isUndefined","../mesh/cylinderMesh","../math/Vector3"],function(a,b,c,d,e,f){var g=function(){function a(a){this.$axis=f.e3.clone(),a=a||{modelMatrix:"uModelMatrix"},this.setRadiusTop(d(a.radiusTop)?1:a.radiusTop),this.setRadiusBottom(d(a.radiusBottom)?1:a.radiusBottom),this.setWireFrame(d(a.wireFrame)?!1:a.wireFrame)}return Object.defineProperty(a.prototype,"radiusTop",{get:function(){return this.$radiusTop},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radiusBottom",{get:function(){return this.$radiusBottom},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"axis",{get:function(){return this.$axis},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depth",{get:function(){return this.$depth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"widthSegments",{get:function(){return this.$widthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightSegments",{get:function(){return this.$heightSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthSegments",{get:function(){return this.$depthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wireFrame",{get:function(){return this.$wireFrame},enumerable:!0,configurable:!0}),a.prototype.setRadiusTop=function(a){return c("radiusTop",a).toBeNumber().toSatisfy(a>=0,"radiusTop must be greater than or equal to zero."),this.$radiusTop=a,this},a.prototype.setRadiusBottom=function(a){return c("radiusBottom",a).toBeNumber().toSatisfy(a>=0,"radiusBottom must be greater than or equal to zero."),this.$radiusBottom=a,this},a.prototype.setHeight=function(a){return c("height",a).toBeNumber().toSatisfy(a>=0,"height must be greater than or equal to zero."),this.$height=a,this},a.prototype.setAxis=function(a){return c("axis",a).toBeObject(),this.$axis.copy(a),this},a.prototype.setDepth=function(a){return c("depth",a).toBeNumber().toSatisfy(a>=0,"depth must be greater than or equal to zero."),this.$depth=a,this},a.prototype.setWidthSegments=function(a){return c("widthSegments",a).toBeNumber().toSatisfy(a>0,"widthSegments must be greater than zero."),this.$widthSegments=a,this},a.prototype.setHeightSegments=function(a){return c("heightSegments",a).toBeNumber().toSatisfy(a>0,"heightSegments must be greater than zero."),this.$heightSegments=a,this},a.prototype.setDepthSegments=function(a){return c("depthSegments",a).toBeNumber().toSatisfy(a>0,"depthSegments must be greater than zero."),this.$depthSegments=a,this},a.prototype.setWireFrame=function(a){return c("wireFrame",a).toBeBoolean(),this.$wireFrame=a,this},a.prototype.buildMesh=function(){return e(this)},a}();return g}),b("davinci-eight/mesh/sphereMesh",["require","exports","../geometries/GeometryAdapter","../geometries/SphereGeometry","../mesh/adapterOptions"],function(a,b,c,d,e){function f(a){return a=a||{},new d(a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength)}function g(a){var b=new c(f(a),e(a)),d={draw:function(a){return b.draw(a)},update:function(a){return b.update(a)},getAttribArray:function(a){return b.getAttribArray(a)},getAttribMeta:function(){return b.getAttribMeta()},get drawMode(){return b.drawMode},set drawMode(a){b.drawMode=a},get dynamic(){return b.dynamic},hasElementArray:function(){return b.hasElementArray()},getElementArray:function(){return b.getElementArray()}};return d}return g}),b("davinci-eight/mesh/SphereBuilder",["require","exports","../checks/expectArg","../checks/isUndefined","../mesh/sphereMesh"],function(a,b,c,d,e){var f=function(){function a(a){a=a||{},this.setRadius(d(a.radius)?1:a.radius),this.setPhiStart(d(a.phiStart)?0:a.phiStart),this.setPhiLength(d(a.phiLength)?2*Math.PI:a.phiLength),this.setThetaStart(d(a.thetaStart)?0:a.thetaStart),this.setThetaLength(d(a.thetaLength)?Math.PI:a.thetaLength),this.setWidthSegments(d(a.widthSegments)?16:a.widthSegments),this.setHeightSegments(d(a.heightSegments)?12:a.heightSegments),this.setWireFrame(d(a.wireFrame)?!1:a.wireFrame)}return Object.defineProperty(a.prototype,"radius",{get:function(){return this.$radius},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"phiStart",{get:function(){return this.$phiStart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"phiLength",{get:function(){return this.$phiLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"thetaStart",{get:function(){return this.$thetaStart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"thetaLength",{get:function(){return this.$thetaLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"widthSegments",{get:function(){return this.$widthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightSegments",{get:function(){return this.$heightSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wireFrame",{get:function(){return this.$wireFrame},enumerable:!0,configurable:!0}),a.prototype.setRadius=function(a){return c("radius",a).toBeNumber().toSatisfy(a>=0,"radius must be greater than or equal to zero."),this.$radius=a,this},a.prototype.setPhiStart=function(a){return c("phiStart",a).toBeNumber(),this.$phiStart=a,this},a.prototype.setPhiLength=function(a){return c("phiLength",a).toBeNumber(),this.$phiLength=a,this},a.prototype.setThetaStart=function(a){return c("thetaStart",a).toBeNumber(),this.$thetaStart=a,this},a.prototype.setThetaLength=function(a){return c("thetaLength",a).toBeNumber(),this.$thetaLength=a,this},a.prototype.setWidthSegments=function(a){return c("widthSegments",a).toBeNumber().toSatisfy(a>0,"widthSegments must be greater than zero."),this.$widthSegments=a,this},a.prototype.setHeightSegments=function(a){return c("heightSegments",a).toBeNumber().toSatisfy(a>0,"heightSegments must be greater than zero."),this.$heightSegments=a,this},a.prototype.setWireFrame=function(a){return c("wireFrame",a).toBeBoolean(),this.$wireFrame=a,this},a.prototype.buildMesh=function(){return e(this)},a}();return f}),b("davinci-eight/mesh/checkMeshArgs",["require","exports"],function(a,b){function c(a){a=a||{};var b="undefined"==typeof a.wireFrame?!1:a.wireFrame;return{wireFrame:b}}return c}),b("davinci-eight/mesh/vortexMesh",["require","exports","../geometries/GeometryAdapter","../geometries/VortexGeometry","../mesh/adapterOptions","../mesh/checkMeshArgs"],function(a,b,c,d,e,f){function g(a){return new d}function h(a){var b=f(a),d=new c(g(b),e(b)),h={draw:function(a){return d.draw(a)},update:function(a){return d.update(a)},getAttribArray:function(a){return d.getAttribArray(a)},getAttribMeta:function(){return d.getAttribMeta()},get drawMode(){return d.drawMode},set drawMode(a){d.drawMode=a},get dynamic(){return d.dynamic},hasElementArray:function(){return d.hasElementArray()},getElementArray:function(){return d.getElementArray()}};return h}return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/TreeModel",["require","exports","../uniforms/DefaultUniformProvider"],function(a,b,c){var d=function(a){function b(){a.call(this),this.children=[]}return f(b,a),b.prototype.getParent=function(){return this.parent},b.prototype.setParent=function(a){this.parent&&this.parent.removeChild(this),a&&a.addChild(this),this.parent=a},b.prototype.addChild=function(a){this.children.push(this)},b.prototype.removeChild=function(a){var b=this.children.indexOf(a);b>=0&&this.children.splice(b,1)},b.prototype.getUniformVector3=function(b){return this.parent?this.parent.getUniformVector3(b):a.prototype.getUniformVector3.call(this,b)},b.prototype.getUniformMatrix3=function(b){return this.parent?this.parent.getUniformMatrix3(b):a.prototype.getUniformMatrix3.call(this,b)},b.prototype.getUniformMatrix4=function(b){return this.parent?this.parent.getUniformMatrix4(b):a.prototype.getUniformMatrix4.call(this,b)},b.prototype.getUniformMeta=function(){return this.parent?this.parent.getUniformMeta():a.prototype.getUniformMeta.call(this)},b}(c);return d});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformVec3",["require","exports","../uniforms/DefaultUniformProvider","../utils/uuid4","../checks/expectArg"],function(a,b,c,d,e){var g=function(a){function b(b,c){a.call(this),this.useData=!1,this.useCallback=!1,this.name=b,this.id="undefined"!=typeof c?c:d().generate()}return f(b,a),Object.defineProperty(b.prototype,"data",{get:function(){return this.$data},set:function(a){this.$data=a,void 0!==typeof a?(e("data",a).toSatisfy(3===a.length,"data.length must be 3"),this.useData=!0,this.useCallback=!1):(this.useData=!1,this.$callback=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.$callback=a,void 0!==typeof a?(this.useCallback=!0,this.useData=!1):(this.useCallback=!1,this.$data=void 0)},enumerable:!0,configurable:!0}),b.prototype.getUniformVector3=function(b){switch(b){case this.name:if(this.useData)return this.$data;if(this.useCallback)return this.$callback();var c="uniform vec3 "+this.name+" has not been assigned a data or callback.";throw console.warn(c),new Error(c);default:return a.prototype.getUniformVector3.call(this,b)}},b.prototype.getUniformMeta=function(){var b=a.prototype.getUniformMeta.call(this);return b[this.id]={name:this.name,glslType:"vec3"},b},b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformColor",["require","exports","../core/Color","../uniforms/DefaultUniformProvider","../uniforms/UniformVec3"],function(a,b,c,d,e){var g=function(a){function b(b,c){a.call(this),this.inner=new e(b,c)}return f(b,a),Object.defineProperty(b.prototype,"data",{get:function(){var a=this.inner.data;return a?new c(a):void 0},set:function(a){this.inner.data=a.data},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.inner.callback=function(){var b=a();return b.data}},enumerable:!0,configurable:!0}),b.prototype.getUniformVector3=function(a){return this.inner.getUniformVector3(a)},b.prototype.getUniformMeta=function(){return this.inner.getUniformMeta()},b}(d);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/Node",["require","exports","../math/Matrix3","../math/Matrix4","../uniforms/TreeModel","../math/Spinor3","../core/Symbolic","../math/Vector3","../core/Color","../uniforms/UniformColor"],function(a,b,c,d,e,g,h,i,j,k){function l(a,b,c){var e=d.identity();e.scaling(a);var f=d.identity();f.translation(c);var g=d.identity();return g.rotation(b),f.mul(g.mul(e)),f}var m=function(a){function b(b){a.call(this),b=b||{},this.modelMatrixName=b.modelMatrixName||h.UNIFORM_MODEL_MATRIX,this.normalMatrixName=b.normalMatrixName||h.UNIFORM_NORMAL_MATRIX,this.colorVarName=b.colorVarName||h.UNIFORM_COLOR,this.position=new i,this.attitude=new g,this.scale=new i([1,1,1]),this.uColor=new k(this.colorVarName,h.UNIFORM_COLOR),this.uColor.data=j.fromRGB(1,1,1)}return f(b,a),Object.defineProperty(b.prototype,"color",{get:function(){return this.uColor.data},set:function(a){this.uColor.data=a},enumerable:!0,configurable:!0}),b.prototype.getUniformVector3=function(a){return this.uColor.getUniformVector3(a)},b.prototype.getUniformMatrix3=function(b){switch(b){case this.normalMatrixName:var d=new c,e=l(this.scale,this.attitude,this.position);return d.normalFromMatrix4(e),{transpose:!1,matrix3:new Float32Array(d.elements)};default:return a.prototype.getUniformMatrix3.call(this,b)}},b.prototype.getUniformMatrix4=function(a){switch(a){case this.modelMatrixName:if(this.getParent()){var b=this.getParent().getUniformMatrix4(a);if(b){var c=new d(b.matrix4),e=l(this.scale,this.attitude,this.position),f=d.identity().multiplyMatrices(c,e);return{transpose:!1,matrix4:f.elements}}var f=l(this.scale,this.attitude,this.position);return{transpose:!1,matrix4:f.elements}}var f=l(this.scale,this.attitude,this.position);return{transpose:!1,matrix4:f.elements};default:return this.uColor.getUniformMatrix4(a)}},b.prototype.getUniformMeta=function(){var a=this.uColor.getUniformMeta();return a[h.UNIFORM_MODEL_MATRIX]={name:this.modelMatrixName,glslType:"mat4"},a[h.UNIFORM_NORMAL_MATRIX]={name:this.normalMatrixName,glslType:"mat3"},a},b}(e);return m}),b("davinci-eight/objects/arrow",["require","exports","../uniforms/Node","../objects/drawableModel","../mesh/arrowMesh","../programs/smartProgram"],function(a,b,c,d,e,f){function g(a,b){var g=e(b),h=new c(b),i=f(g.getAttribMeta(),[h.getUniformMeta(),a.getUniformMeta()]);return d(g,i,h)}return g}),b("davinci-eight/objects/Arrow",["require","exports","../mesh/CylinderBuilder","../objects/drawableModel","../programs/smartProgram","../uniforms/Node"],function(a,b,c,d,e,f){var g=function(){function a(a){this.$length=1,this.model=new f;var b=(new c).setRadiusTop(0).setRadiusBottom(.08).setHeight(.2).buildMesh(),g=(new c).setRadiusTop(.01).setRadiusBottom(.01).buildMesh(),h=e(b.getAttribMeta(),[this.model.getUniformMeta(),a.getUniformMeta()]);this.headModel=new f,this.headModel.setParent(this.model),this.head=d(b,h,this.headModel),this.tailModel=new f,this.tailModel.setParent(this.model),this.tailModel.position.y=-.2,this.setLength(1),this.tail=d(g,h,this.tailModel)}return Object.defineProperty(a.prototype,"length",{get:function(){return this.tailModel.scale.y+.2},set:function(a){this.setLength(a)},enumerable:!0,configurable:!0}),a.prototype.setLength=function(a){return this.headModel.position.y=a/2-.2,this.tailModel.scale.y=a-.2,this},Object.defineProperty(a.prototype,"color",{set:function(a){this.headModel.color=a,this.tailModel.color=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.model.position},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"positione",{set:function(a){this.model.position=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"attitude",{get:function(){return this.model.attitude},set:function(a){this.model.attitude=a},enumerable:!0,configurable:!0}),a.prototype.useProgram=function(){this.head.shaders.use()},a.prototype.draw=function(a){this.head.draw(a),this.tail.draw(a)},a.prototype.contextFree=function(){this.head.contextFree(),this.tail.contextFree()},a.prototype.contextGain=function(a,b){this.head.contextGain(a,b),this.tail.contextGain(a,b)},a.prototype.contextLoss=function(){this.head.contextLoss(),this.tail.contextLoss()},a.prototype.hasContext=function(){return this.head.hasContext()},a}();return g}),b("davinci-eight/objects/box",["require","exports","../uniforms/Node","../objects/drawableModel","../mesh/boxMesh","../programs/smartProgram"],function(a,b,c,d,e,f){function g(a,b){var g=e(b),h=new c,i=f(g.getAttribMeta(),[h.getUniformMeta(),a.getUniformMeta()]);return d(g,i,h)}return g}),b("davinci-eight/objects/cylinder",["require","exports","../uniforms/Node","../objects/drawableModel","../mesh/cylinderMesh","../programs/smartProgram"],function(a,b,c,d,e,f){function g(a){var b=e(),g=new c,h=f(b.getAttribMeta(),[g.getUniformMeta(),a.getUniformMeta()]);return d(b,h,g)}return g}),b("davinci-eight/objects/sphere",["require","exports","../uniforms/Node","../objects/drawableModel","../mesh/sphereMesh","../programs/smartProgram"],function(a,b,c,d,e,f){function g(a,b){var g=e(b),h=new c,i=f(g.getAttribMeta(),[h.getUniformMeta(),a.getUniformMeta()]);return d(g,i,h)}return g}),b("davinci-eight/objects/vortex",["require","exports","../uniforms/Node","../objects/drawableModel","../mesh/vortexMesh","../programs/smartProgram"],function(a,b,c,d,e,f){function g(a){var b=e(),g=new c,h=f(b.getAttribMeta(),[g.getUniformMeta(),a.getUniformMeta()]);return d(b,h,g)}return g}),b("davinci-eight/curves/Curve",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.getPoint=function(a){throw new Error("Curve.getPoint() not implemented!")},a.prototype.getPointAt=function(a){var b=this.getUtoTmapping(a);return this.getPoint(b)},a.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPoint(b/a));return c},a.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPointAt(b/a));return c},a.prototype.getLength=function(){
var a=this.getLengths();return a[a.length-1]},a.prototype.getLengths=function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),f=0;for(d.push(0),c=1;a>=c;c++)b=this.getPoint(c/a),f+=b.distance(e),d.push(f),e=b;return this.cacheArcLengths=d,d},a.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},a.prototype.getUtoTmapping=function(a,b){var c,d=this.getLengths(),e=0,f=d.length;c=b?b:a*d[f-1];for(var g,h=0,i=f-1;i>=h;)if(e=Math.floor(h+(i-h)/2),g=d[e]-c,0>g)h=e+1;else{if(!(g>0)){i=e;break}i=e-1}if(e=i,d[e]==c){var j=e/(f-1);return j}var k=d[e],l=d[e+1],m=l-k,n=(c-k)/m,j=(e+n)/(f-1);return j},a.prototype.getTangent=function(a){var b=1e-4,c=a-b,d=a+b;0>c&&(c=0),d>1&&(d=1);var e=this.getPoint(c),f=this.getPoint(d),g=f.clone().sub(e);return g.normalize()},a.prototype.getTangentAt=function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)},a}();return c}),b("davinci-eight/renderers/initWebGL",["require","exports"],function(a,b){function c(a,b){var c;try{c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(d){}if(c)return c;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}return c}),b("davinci-eight/uniforms/AmbientLight",["require","exports","../core/Color","../core/Symbolic","../uniforms/UniformColor","../checks/expectArg"],function(a,b,c,d,e,f){var g=function(){function a(a){a=a||{},a.color=a.color||new c([1,1,1]),a.name=a.name||d.UNIFORM_AMBIENT_LIGHT,f("options.name",a.name).toBeString().toSatisfy(a.name.length>0,"options.name must have at least one character"),this.uColor=new e(a.name,d.UNIFORM_AMBIENT_LIGHT),this.uColor.data=a.color}return Object.defineProperty(a.prototype,"color",{get:function(){return this.uColor},set:function(a){throw new Error("color is readonly")},enumerable:!0,configurable:!0}),a.prototype.getUniformFloat=function(a){return this.uColor.getUniformFloat(a)},a.prototype.getUniformMatrix2=function(a){return this.uColor.getUniformMatrix2(a)},a.prototype.getUniformMatrix3=function(a){return this.uColor.getUniformMatrix3(a)},a.prototype.getUniformMatrix4=function(a){return this.uColor.getUniformMatrix4(a)},a.prototype.getUniformVector2=function(a){return this.uColor.getUniformVector2(a)},a.prototype.getUniformVector3=function(a){return this.uColor.getUniformVector3(a)},a.prototype.getUniformVector4=function(a){return this.uColor.getUniformVector4(a)},a.prototype.getUniformMeta=function(){return this.uColor.getUniformMeta()},a}();return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/MultiUniformProvider",["require","exports","../uniforms/DefaultUniformProvider"],function(a,b,c){function d(a){return void 0!==a}var e=function(a){function b(b){a.call(this),this.providers=[],this.providers=b}return f(b,a),b.prototype.getUniformFloat=function(b){var c=this.providers.map(function(a){return a.getUniformFloat(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformFloat.call(this,b)},b.prototype.getUniformMatrix2=function(b){var c=this.providers.map(function(a){return a.getUniformMatrix2(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformMatrix2.call(this,b)},b.prototype.getUniformMatrix3=function(b){var c=this.providers.map(function(a){return a.getUniformMatrix3(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformMatrix3.call(this,b)},b.prototype.getUniformMatrix4=function(b){var c=this.providers.map(function(a){return a.getUniformMatrix4(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformMatrix4.call(this,b)},b.prototype.getUniformVector2=function(b){var c=this.providers.map(function(a){return a.getUniformVector2(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformVector2.call(this,b)},b.prototype.getUniformVector3=function(b){var c=this.providers.map(function(a){return a.getUniformVector3(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformVector3.call(this,b)},b.prototype.getUniformVector4=function(b){var c=this.providers.map(function(a){return a.getUniformVector4(b)}).filter(d);return 1===c.length?c[0]:a.prototype.getUniformVector4.call(this,b)},b.prototype.getUniformMeta=function(){var b=a.prototype.getUniformMeta.call(this);return this.providers.forEach(function(a){var c=a.getUniformMeta();for(var d in c)b[d]=c[d]}),b},b}(c);return e});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformVector3",["require","exports","../math/Vector3","../uniforms/DefaultUniformProvider","../uniforms/UniformVec3"],function(a,b,c,d,e){var g=function(a){function b(b,c){a.call(this),this.inner=new e(b,c)}return f(b,a),Object.defineProperty(b.prototype,"data",{get:function(){var a=this.inner.data;return a?new c(a):void 0},set:function(a){this.inner.data=a.data},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.inner.callback=function(){var b=a();return b.data}},enumerable:!0,configurable:!0}),b.prototype.getUniformVector3=function(a){return this.inner.getUniformVector3(a)},b.prototype.getUniformMeta=function(){return this.inner.getUniformMeta()},b}(d);return g}),b("davinci-eight/uniforms/DirectionalLight",["require","exports","../core/Color","../uniforms/MultiUniformProvider","../core/Symbolic","../uniforms/UniformColor","../uniforms/UniformVector3","../math/Vector3"],function(a,b,c,d,e,f,g,h){var i="u"+e.UNIFORM_DIRECTIONAL_LIGHT,j=function(){function a(a){a=a||{},a.color=a.color||new c([1,1,1]),a.direction=a.direction||new h([0,0,-1]),a.name=a.name||i,this.uColor=new f(a.name+"Color",e.UNIFORM_DIRECTIONAL_LIGHT_COLOR),this.uDirection=new g(a.name+"Direction",e.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION),this.multi=new d([this.uColor,this.uDirection]),this.uColor.data=a.color,this.uDirection.data=a.direction}return Object.defineProperty(a.prototype,"color",{get:function(){return this.uColor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"direction",{get:function(){return this.uDirection},enumerable:!0,configurable:!0}),a.prototype.getUniformFloat=function(a){return this.multi.getUniformFloat(a)},a.prototype.getUniformMatrix2=function(a){return this.multi.getUniformMatrix2(a)},a.prototype.getUniformMatrix3=function(a){return this.multi.getUniformMatrix3(a)},a.prototype.getUniformMatrix4=function(a){return this.multi.getUniformMatrix4(a)},a.prototype.getUniformVector2=function(a){return this.multi.getUniformVector2(a)},a.prototype.getUniformVector3=function(a){return this.multi.getUniformVector3(a)},a.prototype.getUniformVector4=function(a){return this.multi.getUniformVector4(a)},a.prototype.getUniformMeta=function(){return this.multi.getUniformMeta()},a}();return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/LocalModel",["require","exports","../math/Matrix3","../math/Matrix4","../uniforms/DefaultUniformProvider","../math/Spinor3","../core/Symbolic","../math/Vector3","../core/Color","../uniforms/UniformColor"],function(a,b,c,d,e,g,h,i,j,k){function l(a,b){var c=d.identity();c.translation(a);var e=d.identity();return e.rotation(b),c.mul(e),c}var m="uModelMatrix",n="mat4",o="uNormalMatrix",p="mat3",q="uColor",r=function(a){function b(){a.call(this),this.position=new i,this.attitude=new g,this.scale=new i([1,1,1]),this.uColor=new k(q,h.UNIFORM_COLOR),this.uColor.data=j.fromRGB(1,1,1)}return f(b,a),Object.defineProperty(b.prototype,"color",{get:function(){return this.uColor.data},set:function(a){this.uColor.data=a},enumerable:!0,configurable:!0}),b.prototype.getUniformVector3=function(a){return this.uColor.getUniformVector3(a)},b.prototype.getUniformMatrix3=function(b){switch(b){case o:var d=new c,e=l(this.position,this.attitude);return d.normalFromMatrix4(e),{transpose:!1,matrix3:new Float32Array(d.elements)};default:return a.prototype.getUniformMatrix3.call(this,b)}},b.prototype.getUniformMatrix4=function(a){switch(a){case m:var b=l(this.position,this.attitude).elements;return{transpose:!1,matrix4:new Float32Array(b)};default:return this.uColor.getUniformMatrix4(a)}},b.prototype.getUniformMeta=function(){var a=this.uColor.getUniformMeta();return a[h.UNIFORM_MODEL_MATRIX]={name:m,glslType:n},a[h.UNIFORM_NORMAL_MATRIX]={name:o,glslType:p},a},b}(e);return r});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniversalJoint",["require","exports","../math/Matrix4","../uniforms/TreeModel","../math/Spinor3","../core/Symbolic","../checks/isUndefined"],function(a,b,c,d,e,g,h){function i(a){var b=c.identity();return b.rotation(a),b}function j(a,b){var c=Math.cos(a/2),d=Math.sin(a/2);return new e([d*Math.sin(b),-d*Math.cos(b),0,c])}var k=function(a){function b(b){a.call(this),this.theta=0,this.phi=0,b=b||{},this.modelMatrixVarName=h(b.modelMatrixVarName)?g.UNIFORM_MODEL_MATRIX:b.modelMatrixVarName}return f(b,a),b.prototype.getUniformMatrix4=function(b){switch(b){case this.modelMatrixVarName:if(this.getParent()){var d=new c(this.getParent().getUniformMatrix4(b).matrix4),e=i(j(this.theta,this.phi)),f=c.identity().multiplyMatrices(d,e);return{transpose:!1,matrix4:f.elements}}var f=i(j(this.theta,this.phi));return{transpose:!1,matrix4:f.elements};default:return a.prototype.getUniformMatrix4.call(this,b)}},b}(d);return k}),b("davinci-eight/uniforms/PointLight",["require","exports","../core/Color","../math/Vector3","../core/Symbolic","../uniforms/UniformColor","../uniforms/UniformVector3","../uniforms/MultiUniformProvider"],function(a,b,c,d,e,f,g,h){var i="u"+e.UNIFORM_POINT_LIGHT,j=function(){function a(a){a=a||{},a.color=a.color||new c([1,1,1]),a.position=a.position||new d([0,0,0]),a.name=a.name||i,this.uColor=new f(a.name+"Color",e.UNIFORM_POINT_LIGHT_COLOR),this.uPosition=new g(a.name+"Position",e.UNIFORM_POINT_LIGHT_POSITION),this.multi=new h([this.uColor,this.uPosition]),this.uColor.data=a.color,this.uPosition.data=a.position}return Object.defineProperty(a.prototype,"color",{get:function(){return this.uColor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.uPosition},enumerable:!0,configurable:!0}),a.prototype.getUniformFloat=function(a){return this.multi.getUniformFloat(a)},a.prototype.getUniformMatrix2=function(a){return this.multi.getUniformMatrix2(a)},a.prototype.getUniformMatrix3=function(a){return this.multi.getUniformMatrix3(a)},a.prototype.getUniformMatrix4=function(a){return this.multi.getUniformMatrix4(a)},a.prototype.getUniformVector2=function(a){return this.multi.getUniformVector2(a)},a.prototype.getUniformVector3=function(a){return this.multi.getUniformVector3(a)},a.prototype.getUniformVector4=function(a){return this.multi.getUniformVector4(a)},a.prototype.getUniformMeta=function(){return this.multi.getUniformMeta()},a}();return j}),b("davinci-eight/uniforms/uniforms",["require","exports","../uniforms/MultiUniformProvider"],function(a,b,c){function d(a){return new c(a)}return d});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformFloat",["require","exports","../uniforms/DefaultUniformProvider","../utils/uuid4"],function(a,b,c,d){var e=function(a){function b(b,c){a.call(this),this.$data=0,this.useData=!1,this.useCallback=!1,this.name=b,this.id="undefined"!=typeof c?c:d().generate()}return f(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){this.$data=a,void 0!==typeof a?(this.useData=!0,this.useCallback=!1):this.useData=!1},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.$callback=a,void 0!==typeof a?(this.useCallback=!0,this.useData=!1):this.useCallback=!1},enumerable:!0,configurable:!0}),b.prototype.getUniformFloat=function(b){switch(b){case this.name:if(this.useData)return this.$data;if(this.useCallback)return this.$callback();var c="uniform float "+this.name+" has not been assigned a data or callback.";throw console.warn(c),new Error(c);default:return a.prototype.getUniformFloat.call(this,b)}},b.prototype.getUniformMeta=function(){var b=a.prototype.getUniformMeta.call(this);return b[this.id]={name:this.name,glslType:"float"},b},b}(c);return e});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformVec2",["require","exports","../uniforms/DefaultUniformProvider","../utils/uuid4"],function(a,b,c,d){var e=function(a){function b(b,c){a.call(this),this.$data=[0,0],this.useData=!0,this.name=b,this.id="undefined"!=typeof c?c:d().generate()}return f(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){this.$data=a,this.useData=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.$callback=a,this.useData=!1},enumerable:!0,configurable:!0}),b.prototype.getUniformVector2=function(b){switch(b){case this.name:return this.useData?this.$data:this.$callback();default:return a.prototype.getUniformVector2.call(this,b)}},b.prototype.getUniformMeta=function(){var b=a.prototype.getUniformMeta.call(this);return b[this.id]={name:this.name,glslType:"vec2"},b},b}(c);return e});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformVec4",["require","exports","../uniforms/DefaultUniformProvider","../utils/uuid4","../checks/expectArg"],function(a,b,c,d,e){var g=function(a){function b(b,c){a.call(this),this.$data=[0,0,0],this.useData=!0,this.name=b,this.id="undefined"!=typeof c?c:d().generate()}return f(b,a),Object.defineProperty(b.prototype,"data",{set:function(a){e("data",a).toSatisfy(4===a.length,"data length must be 4"),this.$data=a,this.useData=!0},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.$callback=a,this.useData=!1},enumerable:!0,configurable:!0}),b.prototype.getUniformVector4=function(b){switch(b){case this.name:return this.useData?this.$data:this.$callback();default:return a.prototype.getUniformVector4.call(this,b)}},b.prototype.getUniformMeta=function(){var b=a.prototype.getUniformMeta.call(this);return b[this.id]={name:this.name,glslType:"vec4"},b},b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/uniforms/UniformSpinor3",["require","exports","../math/Spinor3","../uniforms/DefaultUniformProvider","../uniforms/UniformVec4"],function(a,b,c,d,e){var g=function(a){function b(b,c){a.call(this),this.inner=new e(b,c)}return f(b,a),Object.defineProperty(b.prototype,"data",{get:function(){var a=this.inner.data;return a?new c(a):void 0},set:function(a){this.inner.data=a.data},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"callback",{set:function(a){this.inner.callback=function(){var b=a();return b.data}},enumerable:!0,configurable:!0}),b.prototype.getUniformVector4=function(a){return this.inner.getUniformVector4(a)},b.prototype.getUniformMeta=function(){return this.inner.getUniformMeta()},b}(d);return g}),b("davinci-eight/utils/contextMonitor",["require","exports","../utils/uuid4","../renderers/initWebGL","../checks/expectArg"],function(a,b,c,d,e){function f(a,b){e("canvas",a).toSatisfy(a instanceof HTMLCanvasElement,"canvas argument must be an HTMLCanvasElement");var f,g,h=[],i=function(a){a.preventDefault(),f=void 0,g=void 0,h.forEach(function(a){a.contextLoss()})},j=function(e){e.preventDefault(),f=d(a,b),g=c().generate(),h.forEach(function(a){a.contextGain(f,g)})},k={start:function(){return f=d(a,b),g=c().generate(),a.addEventListener("webglcontextlost",i,!1),a.addEventListener("webglcontextrestored",j,!1),h.forEach(function(a){a.contextGain(f,g)}),k},stop:function(){return f=void 0,g=void 0,h.forEach(function(a){a.contextFree()}),a.removeEventListener("webglcontextrestored",j,!1),a.removeEventListener("webglcontextlost",i,!1),k},addContextUser:function(a){return e("user",a).toBeObject(),h.push(a),f&&!a.hasContext()&&a.contextGain(f,g),k},get context(){return f}};return k}return f}),b("davinci-eight/utils/workbench3D",["require","exports"],function(a,b){function c(a,b){for(var c=a.getElementsByTagName(b),d=c.length-1;d>=0;d--){var e=c[d];e.parentNode.removeChild(e)}}var d="resize",e="canvas",f=function(a,b,f,g){function h(){var a=g.innerWidth,c=g.innerHeight;b.setSize(a,c),f.aspect=a/c}void 0===g&&(g=window);var i=g.document,j=function(a){h()},k={setUp:function(){i.body.insertBefore(a,i.body.firstChild),g.addEventListener(d,j,!1),h()},tearDown:function(){g.removeEventListener(d,j,!1),c(i,e)}};return k};return f}),b("davinci-eight/utils/windowAnimationRunner",["require","exports","../checks/expectArg"],function(a,b,c){function d(){}function e(a){if(a){var b="Exception raised during animate function: "+a;console.warn(b)}}function f(a){return!1}var g=function(a,b){var g=1,h=2,i=3;b=b||{};var j,k,l=c("options.window",b.window||window).toNotBeNull().value,m=c("options.setUp",b.setUp||d).value,n=c("options.tearDown",b.tearDown||e).value,o=c("options.terminate",b.terminate||f).toNotBeNull().value,p=!1,q=0,r=1e3,s=null,t=g,u=function(b){if(j&&(q=q+b-j),j=b,p||o(q/r)){p=!1,l.cancelAnimationFrame(s),w.isRunning?(t=i,j=void 0):console.error("stopSignal received while not running."),l.document.removeEventListener("keydown",v,!1);try{n(k)}catch(c){console.warn("Exception raised during tearDown function: "+c)}}else{s=l.requestAnimationFrame(u);try{a(q/r)}catch(c){k=c,p=!0}}},v=function(a){27===a.keyCode&&(p=!0,a.preventDefault())},w={start:function(){if(w.isRunning)throw new Error("The `start` method may only be called when not running.");m(),l.document.addEventListener("keydown",v,!1),t=h,s=l.requestAnimationFrame(u)},stop:function(){if(!w.isRunning)throw new Error("The `stop` method may only be called when running.");p=!0},reset:function(){if(!w.isPaused)throw new Error("The `reset` method may only be called when paused.");j=void 0,q=0,t=g},get time(){return q/r},lap:function(){if(!w.isRunning)throw new Error("The `lap` method may only be called when running.")},get isRunning(){return t===h},get isPaused(){return t===i}};return w};return g}),b("davinci-eight",["require","exports","davinci-eight/core/DataUsage","davinci-eight/core/DrawMode","davinci-eight/core","davinci-eight/core/object3D","davinci-eight/cameras/view","davinci-eight/core/Color","davinci-eight/cameras/frustum","davinci-eight/cameras/perspective","davinci-eight/drawLists/drawList","davinci-eight/renderers/renderer","davinci-eight/renderers/viewport","davinci-eight/renderers/webGLRenderer","davinci-eight/objects/drawableModel","davinci-eight/core/Face3","davinci-eight/core/ShaderAttribLocation","davinci-eight/core/ShaderUniformLocation","davinci-eight/geometries/Geometry","davinci-eight/geometries/GeometryAdapter","davinci-eight/geometries/ArrowGeometry","davinci-eight/geometries/BoxGeometry","davinci-eight/geometries/CylinderGeometry","davinci-eight/geometries/DodecahedronGeometry","davinci-eight/geometries/IcosahedronGeometry","davinci-eight/geometries/KleinBottleGeometry","davinci-eight/geometries/MobiusStripGeometry","davinci-eight/geometries/OctahedronGeometry","davinci-eight/geometries/ParametricGeometry","davinci-eight/geometries/PolyhedronGeometry","davinci-eight/geometries/RevolutionGeometry","davinci-eight/geometries/SphereGeometry","davinci-eight/geometries/TetrahedronGeometry","davinci-eight/geometries/TubeGeometry","davinci-eight/geometries/VortexGeometry","davinci-eight/programs/pointsProgram","davinci-eight/programs/shaderProgram","davinci-eight/programs/smartProgram","davinci-eight/programs/shaderProgramFromScripts","davinci-eight/math/Matrix3","davinci-eight/math/Matrix4","davinci-eight/math/Spinor3","davinci-eight/math/Vector2","davinci-eight/math/Vector3","davinci-eight/mesh/arrowMesh","davinci-eight/mesh/ArrowBuilder","davinci-eight/mesh/boxMesh","davinci-eight/mesh/BoxBuilder","davinci-eight/mesh/cylinderMesh","davinci-eight/mesh/CylinderBuilder","davinci-eight/mesh/sphereMesh","davinci-eight/mesh/SphereBuilder","davinci-eight/mesh/vortexMesh","davinci-eight/objects/arrow","davinci-eight/objects/Arrow","davinci-eight/objects/box","davinci-eight/objects/cylinder","davinci-eight/objects/sphere","davinci-eight/objects/vortex","davinci-eight/curves/Curve","davinci-eight/renderers/initWebGL","davinci-eight/uniforms/AmbientLight","davinci-eight/uniforms/ChainedUniformProvider","davinci-eight/uniforms/DefaultUniformProvider","davinci-eight/uniforms/DirectionalLight","davinci-eight/uniforms/LocalModel","davinci-eight/uniforms/Node","davinci-eight/uniforms/TreeModel","davinci-eight/uniforms/UniversalJoint","davinci-eight/uniforms/MultiUniformProvider","davinci-eight/uniforms/PointLight","davinci-eight/uniforms/uniforms","davinci-eight/uniforms/UniformFloat","davinci-eight/uniforms/UniformMat4","davinci-eight/uniforms/UniformVec2","davinci-eight/uniforms/UniformVec3","davinci-eight/uniforms/UniformVec4","davinci-eight/uniforms/UniformVector3","davinci-eight/uniforms/UniformSpinor3","davinci-eight/utils/contextMonitor","davinci-eight/utils/workbench3D","davinci-eight/utils/windowAnimationRunner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba){var Ca={VERSION:e.VERSION,get initWebGL(){return ga},get view(){return g},get frustum(){return i},get perspective(){return j},get drawList(){return k},object3D:f,get renderer(){return l},get viewport(){return m},get webGLRenderer(){return n},get contextMonitor(){return za},workbench:Aa,animation:Ba,get DataUsage(){return c},get drawableModel(){return o},get DrawMode(){return d},get ShaderAttribLocation(){return q},get ShaderUniformLocation(){return r},get pointsProgram(){return J},get shaderProgram(){return K},get smartProgram(){return L},get AmbientLight(){return ha},get DirectionalLight(){return ka},get PointLight(){return qa},get Color(){return h},get Face3(){return p},get Geometry(){return s},get GeometryAdapter(){return t},get ArrowGeometry(){return u},get BoxGeometry(){return v},get CylinderGeometry(){return w},get DodecahedronGeometry(){return x},get IcosahedronGeometry(){return y},get KleinBottleGeometry(){return z},get MobiusStripGeometry(){return A},get OctahedronGeometry(){return B},get ParametricGeometry(){return C},get PolyhedronGeometry(){return D},get RevolutionGeometry(){return E},get SphereGeometry(){return F},get TetrahedronGeometry(){return G},get TubeGeometry(){return H},get VortexGeometry(){return I},get LocalModel(){return la},get Node(){return ma},get TreeModel(){return na},get UniversalJoint(){return oa},get UniformFloat(){return sa},get UniformMat4(){return ta},get UniformVec2(){return ua},get UniformVec3(){return va},get UniformVec4(){return wa},get UniformVector3(){return xa},get UniformSpinor3(){return ya},get Matrix3(){return N},get Matrix4(){return O},get Spinor3(){return P},get Vector2(){return Q},get Vector3(){return R},get Curve(){return fa},get ChainedUniformProvider(){return ia},get DefaultUniformProvider(){return ja},get MultiUniformProvider(){return pa},get uniforms(){return ra},get arrowMesh(){return S},get ArrowBuilder(){return T},get boxMesh(){return U},get BoxBuilder(){return V},get cylinderMesh(){return W},get CylinderBuilder(){return X},get sphereMesh(){return Y},get SphereBuilder(){return Z},get vortexMesh(){return $},get arrow(){return _},get Arrow(){return aa},get box(){return ba},get cylinder(){return ca},get sphere(){return da},get vortex(){return ea},get shaderProgramFromScripts(){return M}};return Ca});var g=d("davinci-eight");"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.EIGHT=g}(this);