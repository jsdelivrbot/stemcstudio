!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../vendor/almond/almond",function(){}),b("davinci-eight/checks/isUndefined",["require","exports"],function(a,b){function c(a){return"undefined"==typeof a}return c}),b("davinci-eight/checks/expectArg",["require","exports","../checks/isUndefined"],function(a,b,c){function d(a,b){return c(b)?a:b()}function e(a,b){var e={toSatisfy:function(a,b){if(c(a))throw new Error("condition must be specified");if(c(b))throw new Error("message must be specified");if(!a)throw new Error(b);return e},toBeBoolean:function(c){var f=typeof b;if("boolean"!==f)throw new Error(d("Expecting argument "+a+": "+f+" to be a boolean.",c));return e},toBeDefined:function(){var c=typeof b;if("undefined"===c){var d="Expecting argument "+a+": "+c+" to be defined.";throw new Error(d)}return e},toBeInClosedInterval:function(c,d){if(b>=c&&d>=b)return e;var f="Expecting argument "+a+" => "+b+" to be in the range ["+c+", "+d+"].";throw new Error(f)},toBeFunction:function(){var c=typeof b;if("function"!==c){var d="Expecting argument "+a+": "+c+" to be a function.";throw new Error(d)}return e},toBeNumber:function(c){var f=typeof b;if("number"!==f)throw new Error(d("Expecting argument "+a+": "+f+" to be a number.",c));return e},toBeObject:function(c){var f=typeof b;if("object"!==f)throw new Error(d("Expecting argument "+a+": "+f+" to be an object.",c));return e},toBeString:function(){var c=typeof b;if("string"!==c){var d="Expecting argument "+a+": "+c+" to be a string.";throw new Error(d)}return e},toBeUndefined:function(){var c=typeof b;if("undefined"!==c){var d="Expecting argument "+a+": "+c+" to be undefined.";throw new Error(d)}return e},toNotBeNull:function(){if(null===b){var c="Expecting argument "+a+" to not be null.";throw new Error(c)}return e},get value(){return b}};return e}return e}),b("davinci-eight/checks/isDefined",["require","exports"],function(a,b){function c(a){return"undefined"!=typeof a}return c}),b("davinci-eight/math/VectorN",["require","exports","../checks/expectArg","../checks/isDefined","../checks/isUndefined"],function(a,b,c,d,e){function f(a){return"new VectorN<"+a+">(data: "+a+"[], modified: boolean = false, size?: number)"}function g(a){return"push(value: "+a+"): number"}function h(a){return"pop(): "+a}function i(a,b,c){return b+" must be a "+c+" in "+a}function j(a,b,c){return b+" length must be "+c+" in "+a}function k(){return i(f("T"),"data","T[]")}function l(a){return function(){return j(f("T"),"data",a)}}function m(a){return a+" is not allowed for a fixed size vector"}function n(){return m(g("T"))}function o(){return m(h("T"))}function p(){return i(f("T"),"modified","boolean")}function q(){return i(f("T"),"size","number")}var r=function(){function a(a,b,e){void 0===b&&(b=!1);var f=c("data",a).toBeObject(k);this.modified=c("modified",b).toBeBoolean(p).value,d(e)?(this._size=c("size",e).toBeNumber(q).toSatisfy(e>=0,"size must be positive").value,this._data=f.toSatisfy(a.length===e,l(e)()).value):(this._size=void 0,this._data=f.value)}return Object.defineProperty(a.prototype,"data",{get:function(){if(this._data)return this._data;if(this._callback){var a=this._callback();return d(this._size)&&c("callback()",a).toSatisfy(a.length===this._size,"callback() length must be "+this._size),this._callback()}throw new Error("Vector"+this._size+" is undefined.")},set:function(a){d(this._size)&&c("data",a).toSatisfy(a.length===this._size,"data length must be "+this._size),this._data=a,this._callback=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},set:function(a){this._callback=a,this._data=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this.data.length},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a(this._data,this.modified,this._size)},a.prototype.getComponent=function(a){return this.data[a]},a.prototype.pop=function(){if(e(this._size))return this.data.pop();throw new Error(o())},a.prototype.push=function(a){if(e(this._size)){var b=this.data,c=b.push(a);return this.data=b,c}throw new Error(n())},a.prototype.setComponent=function(a,b){var c=this.data,d=c[a];b!==d&&(c[a]=b,this.data=c,this.modified=!0)},a.prototype.toArray=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=0);for(var c=this.data,d=c.length,e=0;d>e;e++)a[b+e]=c[e];return a},a.prototype.toLocaleString=function(){return this.data.toLocaleString()},a.prototype.toString=function(){return this.data.toString()},a}();return r}),b("davinci-eight/math/wedgeXY",["require","exports"],function(a,b){function c(a,b,c,d,e,f){return a*e-b*d}return c}),b("davinci-eight/math/wedgeYZ",["require","exports"],function(a,b){function c(a,b,c,d,e,f){return b*f-c*e}return c}),b("davinci-eight/math/wedgeZX",["require","exports"],function(a,b){function c(a,b,c,d,e,f){return c*d-a*f}return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Vector3",["require","exports","../checks/expectArg","../math/VectorN","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,c){void 0===b&&(b=[0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,3)}return f(b,a),b.dot=function(a,b){return a.x*b.x+a.y*b.y+a.z*b.z},Object.defineProperty(b.prototype,"x",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.x!==a,this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.data[1]},set:function(a){this.modified=this.modified||this.y!==a,this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"z",{get:function(){return this.data[2]},set:function(a){this.modified=this.modified||this.z!==a,this.data[2]=a},enumerable:!0,configurable:!0}),b.prototype.add=function(a){return this.sum(this,a)},b.prototype.sum=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},b.prototype.applyMatrix3=function(a){var b=this.x,c=this.y,d=this.z,e=a.data;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},b.prototype.applyMatrix4=function(a){var b=this.x,c=this.y,d=this.z,e=a.data;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},b.prototype.rotate=function(a){var b=this.x,c=this.y,d=this.z,e=a.xy,f=a.yz,g=a.zx,h=a.w,i=h*b-g*d+e*c,j=h*c-e*b+f*d,k=h*d-f*c+g*b,l=f*b+g*c+e*d;return this.x=i*h+l*f+j*e-k*g,this.y=j*h+l*g+k*f-i*e,this.z=k*h+l*e+i*g-j*f,this},b.prototype.clone=function(){return new b([this.x,this.y,this.z])},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},b.prototype.cross=function(a){return this.crossVectors(this,a)},b.prototype.crossVectors=function(a,b){var c=a.x,d=a.y,f=a.z,i=b.x,j=b.y,k=b.z,l=g(c,d,f,i,j,k),m=h(c,d,f,i,j,k),n=e(c,d,f,i,j,k);return this.set(l,m,n),this},b.prototype.distanceTo=function(a){return Math.sqrt(this.quadranceTo(a))},b.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},b.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},b.prototype.dot=function(a){return b.dot(this,a)},b.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},b.prototype.quaditude=function(){var a=this.x,b=this.y,c=this.z;return a*a+b*b+c*c},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},b.prototype.normalize=function(){return this.divideScalar(this.magnitude())},b.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},b.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this.z*=a,this},b.prototype.set=function(a,b,d){return this.x=c("x",a).toBeNumber().value,this.y=c("y",b).toBeNumber().value,this.z=c("z",d).toBeNumber().value,this},b.prototype.setMagnitude=function(a){var b=this.magnitude();if(0!==b)return a!==b?this.multiplyScalar(a/b):this;throw new Error("Attempting to set the magnitude of a null vector.")},b.prototype.setX=function(a){return this.x=a,this},b.prototype.setY=function(a){return this.y=a,this},b.prototype.setZ=function(a){return this.z=a,this},b.prototype.sub=function(a){return this.difference(this,a)},b.prototype.difference=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},b.prototype.toString=function(){return"Vector3({x: "+this.x+", y: "+this.y+", z: "+this.z+"})"},b.copy=function(a){return new b([a.x,a.y,a.z])},b.e1=new b([1,0,0]),b.e2=new b([0,1,0]),b.e3=new b([0,0,1]),b}(d);return i}),b("davinci-eight/math/AbstractMatrix",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a,b){c("data",a).toSatisfy(a.length===b,"data must have length "+b),this._data=a,this._length=b,this.modified=!1}return Object.defineProperty(a.prototype,"data",{get:function(){if(this._data)return this._data;if(this._callback){var a=this._callback();return c("callback()",a).toSatisfy(a.length===this._length,"callback() length must be "+this._length),this._callback()}throw new Error("Matrix"+Math.sqrt(this._length)+" is undefined.")},set:function(a){c("data",a).toSatisfy(a.length===this._length,"data length must be "+this._length),this._data=a,this._callback=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},set:function(a){this._callback=a,this._data=void 0},enumerable:!0,configurable:!0}),a}();return d}),b("davinci-eight/math/_M4_x_M4_",["require","exports"],function(a,b){function c(a,b,c){var d=a[0],e=a[4],f=a[8],g=a[12],h=a[1],i=a[5],j=a[9],k=a[13],l=a[2],m=a[6],n=a[10],o=a[14],p=a[3],q=a[7],r=a[11],s=a[15],t=b[0],u=b[4],v=b[8],w=b[12],x=b[1],y=b[5],z=b[9],A=b[13],B=b[2],C=b[6],D=b[10],E=b[14],F=b[3],G=b[7],H=b[11],I=b[15];return c[0]=d*t+e*x+f*B+g*F,c[4]=d*u+e*y+f*C+g*G,c[8]=d*v+e*z+f*D+g*H,c[12]=d*w+e*A+f*E+g*I,c[1]=h*t+i*x+j*B+k*F,c[5]=h*u+i*y+j*C+k*G,c[9]=h*v+i*z+j*D+k*H,c[13]=h*w+i*A+j*E+k*I,c[2]=l*t+m*x+n*B+o*F,c[6]=l*u+m*y+n*C+o*G,c[10]=l*v+m*z+n*D+o*H,c[14]=l*w+m*A+n*E+o*I,c[3]=p*t+q*x+r*B+s*F,c[7]=p*u+q*y+r*C+s*G,c[11]=p*v+q*z+r*D+s*H,c[15]=p*w+q*A+r*E+s*I,c}return c});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Matrix4",["require","exports","../math/AbstractMatrix","../checks/expectArg","../checks/isDefined","../math/_M4_x_M4_"],function(a,b,c,d,e,g){var h=function(a){function b(b){a.call(this,b,16)}return f(b,a),b.identity=function(){return new b(new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]))},b.scaling=function(a){return b.identity().scaling(a)},b.translation=function(a){return b.identity().translation(a)},b.rotation=function(a){return b.identity().rotation(a)},b.prototype.clone=function(){return b.identity().copy(this)},b.prototype.compose=function(a,b,c){return this.scaling(a),this.rotate(b),this.translate(c),this},b.prototype.copy=function(a){return this.data.set(a.data),this},b.prototype.determinant=function(){var a=this.data,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15],r=b*g,s=b*h,t=b*i,u=c*f,v=c*h,w=c*i,x=d*f,y=d*g,z=d*i,A=e*f,B=e*g,C=e*h;return n*((C-z)*k+(w-B)*l+(y-v)*m)+o*((z-C)*j+(A-t)*l+(s-x)*m)+p*((B-w)*j+(t-A)*k+(u-r)*m)+q*((v-y)*j+(x-s)*k+(r-u)*l)},b.prototype.invert=function(a,b){void 0===b&&(b=!1);var c=this.data,d=a.data,e=d[0],f=d[4],g=d[8],h=d[12],i=d[1],j=d[5],k=d[9],l=d[13],m=d[2],n=d[6],o=d[10],p=d[14],q=d[3],r=d[7],s=d[11],t=d[15];c[0]=k*p*r-l*o*r+l*n*s-j*p*s-k*n*t+j*o*t,c[4]=h*o*r-g*p*r-h*n*s+f*p*s+g*n*t-f*o*t,c[8]=g*l*r-h*k*r+h*j*s-f*l*s-g*j*t+f*k*t,c[12]=h*k*n-g*l*n-h*j*o+f*l*o+g*j*p-f*k*p,c[1]=l*o*q-k*p*q-l*m*s+i*p*s+k*m*t-i*o*t,c[5]=g*p*q-h*o*q+h*m*s-e*p*s-g*m*t+e*o*t,c[9]=h*k*q-g*l*q-h*i*s+e*l*s+g*i*t-e*k*t,c[13]=g*l*m-h*k*m+h*i*o-e*l*o-g*i*p+e*k*p,c[2]=j*p*q-l*n*q+l*m*r-i*p*r-j*m*t+i*n*t,c[6]=h*n*q-f*p*q-h*m*r+e*p*r+f*m*t-e*n*t,c[10]=f*l*q-h*j*q+h*i*r-e*l*r-f*i*t+e*j*t,c[14]=h*j*m-f*l*m-h*i*n+e*l*n+f*i*p-e*j*p,c[3]=k*n*q-j*o*q-k*m*r+i*o*r+j*m*s-i*n*s,c[7]=f*o*q-g*n*q+g*m*r-e*o*r-f*m*s+e*n*s,c[11]=g*j*q-f*k*q-g*i*r+e*k*r+f*i*s-e*j*s,c[15]=f*k*m-g*j*m+g*i*n-e*k*n-f*i*o+e*j*o;var u=e*c[0]+i*c[4]+m*c[8]+q*c[12];if(0!==u)return this.multiplyScalar(1/u);var v="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(b)throw new Error(v);return console.warn(v),this.identity(),this},b.prototype.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},b.prototype.multiplyScalar=function(a){var b=this.data;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},b.prototype.transpose=function(){var a,b=this.data;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},b.prototype.frustum=function(a,b,c,d,e,f){var g=this.data,h=2*e/(b-a),i=2*e/(d-c),j=(b+a)/(b-a),k=(d+c)/(d-c),l=-(f+e)/(f-e),m=-2*f*e/(f-e);return g[0]=h,g[4]=0,g[8]=j,g[12]=0,g[1]=0,g[5]=i,g[9]=k,g[13]=0,g[2]=0,g[6]=0,g[10]=l,g[14]=m,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},b.prototype.rotationAxis=function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1)},b.prototype.multiply=function(a){return this.product(this,a)},b.prototype.product=function(a,b){return g(a.data,b.data,this.data),this},b.prototype.rotate=function(a){var c=b.rotation(a);return g(c.data,this.data,this.data),this},b.prototype.rotation=function(a){var b=-d("spinor.yz",a.yz).toBeNumber().value,c=-d("spinor.zx",a.zx).toBeNumber().value,e=-d("spinor.xy",a.xy).toBeNumber().value,f=d("spinor.w",a.w).toBeNumber().value,g=b+b,h=c+c,i=e+e,j=b*g,k=b*h,l=b*i,m=c*h,n=c*i,o=e*i,p=f*g,q=f*h,r=f*i;return this.set(1-m-o,k-r,l+q,0,k+r,1-j-o,n-p,0,l-q,n+p,1-j-m,0,0,0,0,1),this},b.prototype.row=function(a){var b=this.data;return[b[0+a],b[4+a],b[8+a],b[12+a]]},b.prototype.scale=function(a){var c=b.scaling(a);return g(c.data,this.data,this.data),this},b.prototype.scaling=function(a){return this.set(a.x,0,0,0,0,a.y,0,0,0,0,a.z,0,0,0,0,1)},b.prototype.set=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.data;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},b.prototype.toFixed=function(a){e(a)&&d("digits",a).toBeNumber();for(var b=[],c=0;3>=c;c++)b.push(this.row(c).map(function(b,c){return b.toFixed(a)}).join(" "));return b.join("\n")},b.prototype.toString=function(){for(var a=[],b=0;3>=b;b++)a.push(this.row(b).map(function(a,b){return a.toString()}).join(" "));return a.join("\n")},b.prototype.translate=function(a){var c=b.translation(a);return g(c.data,this.data,this.data),this},b.prototype.translation=function(a){return this.set(1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1)},b.prototype.__mul__=function(a){return a instanceof b?b.identity().product(this,a):"number"==typeof a?this.clone().multiplyScalar(a):void 0},b.prototype.__rmul__=function(a){return a instanceof b?b.identity().product(a,this):"number"==typeof a?this.clone().multiplyScalar(a):void 0},b}(c);return h}),b("davinci-eight/core/Symbolic",["require","exports"],function(a,b){var c=function(){function a(){}return a.ATTRIBUTE_COLOR="aColor",a.ATTRIBUTE_MATERIAL_INDEX="aMaterialIndex",a.ATTRIBUTE_NORMAL="aNormal",a.ATTRIBUTE_POSITION="aPosition",a.ATTRIBUTE_TEXTURE_COORDS="aTextureCoords",a.UNIFORM_AMBIENT_LIGHT="uAmbientLight",a.UNIFORM_COLOR="uColor",a.UNIFORM_DIRECTIONAL_LIGHT_COLOR="uDirectionalLightColor",a.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION="uDirectionalLightDirection",a.UNIFORM_POINT_LIGHT_COLOR="uPointLightColor",a.UNIFORM_POINT_LIGHT_POSITION="uPointLightPosition",a.UNIFORM_PROJECTION_MATRIX="uProjection",a.UNIFORM_MODEL_MATRIX="uModel",a.UNIFORM_NORMAL_MATRIX="uNormal",a.UNIFORM_VIEW_MATRIX="uView",a.VARYING_COLOR="vColor",a.VARYING_LIGHT="vLight",a}();return c}),b("davinci-eight/cameras/viewArray",["require","exports","../math/Vector3","../checks/expectArg","../checks/isDefined"],function(a,b,c,d,e){function f(a,b,f,g){var h=e(g)?g:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);d("matrix",h).toSatisfy(16===h.length,"matrix must have length 16");var i=(new c).difference(a,b);0===i.x&&0===i.y&&0===i.z?i.z=1:i.normalize();var j=(new c).crossVectors(f,i),k=(new c).crossVectors(i,j),l=new c([c.dot(a,j),c.dot(a,k),c.dot(a,i)]).multiplyScalar(-1);return h[0]=j.x,h[4]=j.y,h[8]=j.z,h[12]=l.x,h[1]=k.x,h[5]=k.y,h[9]=k.z,h[13]=l.y,h[2]=i.x,h[6]=i.y,h[10]=i.z,h[14]=l.z,h[3]=0,h[7]=0,h[11]=0,h[15]=1,h}return f}),b("davinci-eight/cameras/viewMatrix",["require","exports","../checks/isDefined","../math/Matrix4","../cameras/viewArray"],function(a,b,c,d,e){function f(a,b,f,g){var h=c(g)?g:d.identity();return e(a,b,f,h.data),h}return f}),b("davinci-eight/cameras/createView",["require","exports","../math/Vector3","../math/Matrix4","../core/Symbolic","../checks/expectArg","../checks/isUndefined","../cameras/viewMatrix"],function(a,b,c,d,e,f,g,h){var i=function(a){var b=new c,i=new c,j=c.e2,k=d.identity(),l=g(a.viewMatrixName)?e.UNIFORM_VIEW_MATRIX:a.viewMatrixName;b.modified=!0,i.modified=!0,j.modified=!0;var m={get eye(){return b},set eye(a){m.setEye(a)},setEye:function(a){return f("eye",a).toBeObject(),b.x=a.x,b.y=a.y,b.z=a.z,m},get look(){return i},set look(a){m.setLook(a)},setLook:function(a){return f("look",a).toBeObject(),i.x=a.x,i.y=a.y,i.z=a.z,m},get up(){return j},set up(a){m.setUp(a)},setUp:function(a){return f("up",a).toBeObject(),j.x=a.x,j.y=a.y,j.z=a.z,j.normalize(),m},accept:function(a){(b.modified||i.modified||j.modified)&&(h(b,i,j,k),b.modified=!1,i.modified=!1,j.modified=!1),a.uniformMatrix4(l,!1,k)}};return m};return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Vector1",["require","exports","../math/VectorN"],function(a,b,c){var d=function(a){function b(b,c){void 0===b&&(b=[0]),void 0===c&&(c=!1),a.call(this,b,c,1)}return f(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.x!==a,this.data[0]=a},enumerable:!0,configurable:!0}),b.prototype.set=function(a){return this.x=a,this},b.prototype.setX=function(a){return this.x=a,this},b.prototype.copy=function(a){return this.x=a.x,this},b.prototype.add=function(a){return this.x+=a.x,this},b.prototype.addScalar=function(a){return this.x+=a,this},b.prototype.sum=function(a,b){return this.x=a.x+b.x,this},b.prototype.exp=function(){return this.x=Math.exp(this.x),this},b.prototype.sub=function(a){return this.x-=a.x,this},b.prototype.subScalar=function(a){return this.x-=a,this},b.prototype.difference=function(a,b){return this.x=a.x-b.x,this},b.prototype.multiply=function(a){return this.x*=a.x,this},b.prototype.multiplyScalar=function(a){return this.x*=a,this},b.prototype.divide=function(a){return this.x/=a.x,this},b.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b}else this.x=0;return this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this},b.prototype.round=function(){return this.x=Math.round(this.x),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this},b.prototype.negate=function(){return this.x=-this.x,this},b.prototype.distanceTo=function(a){return Math.sqrt(this.quadranceTo(a))},b.prototype.dot=function(a){return this.x*a.x},b.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},b.prototype.normalize=function(){return this.divideScalar(this.magnitude())},b.prototype.quaditude=function(){return this.x*this.x},b.prototype.quadranceTo=function(a){var b=this.x-a.x;return b*b},b.prototype.rotate=function(a){return this},b.prototype.setMagnitude=function(a){var b=this.magnitude();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this},b.prototype.lerpVectors=function(a,b,c){return this.difference(b,a).multiplyScalar(c).add(a),this},b.prototype.equals=function(a){return a.x===this.x},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this},b.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this},b.prototype.clone=function(){return new b([this.x])},b}(c);return d}),b("davinci-eight/cameras/createFrustum",["require","exports","davinci-eight/cameras/createView","davinci-eight/math/Matrix4","../math/Vector1"],function(a,b,c,d,e){var f=function(a,b){function f(){n.frustum(h.x,i.x,j.x,k.x,l.x,m.x)}var g=c(a),h=new e,i=new e,j=new e,k=new e,l=new e,m=new e,n=d.identity();f();var o={get eye(){return g.eye},set eye(a){g.eye=a},setEye:function(a){return g.setEye(a),o},get look(){return g.look},set look(a){g.look=a},setLook:function(a){return g.setLook(a),o},get up(){return g.up},set up(a){g.setUp(a)},setUp:function(a){return g.setUp(a),o},get left(){return h.x},set left(a){h.x=a,f()},get right(){return i.x},set right(a){i.x=a,f()},get bottom(){return j.x},set bottom(a){j.x=a,f()},get top(){return k.x},set top(a){k.x=a,f()},get near(){return l.x},set near(a){l.x=a,f()},get far(){return m.x},set far(a){m.x=a,f()},accept:function(a){a.uniformMatrix4(b,!1,n),g.accept(a)}};return o};return f}),b("davinci-eight/cameras/frustumMatrix",["require","exports","../checks/expectArg","../checks/isDefined"],function(a,b,c,d){function e(a,b,e,f,g,h,i){c("left",a).toBeNumber(),c("right",b).toBeNumber(),c("bottom",e).toBeNumber(),c("top",f).toBeNumber(),c("near",g).toBeNumber(),c("far",h).toBeNumber();var j=d(i)?i:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);c("m",j).toSatisfy(16===j.length,"elements must have length 16");var k=2*g/(b-a),l=2*g/(f-e),m=(b+a)/(b-a),n=(f+e)/(f-e),o=-(h+g)/(h-g),p=-2*h*g/(h-g);return j[0]=k,j[4]=0,j[8]=m,j[12]=0,j[1]=0,j[5]=l,j[9]=n,j[13]=0,j[2]=0,j[6]=0,j[10]=o,j[14]=p,j[3]=0,j[7]=0,j[11]=-1,j[15]=0,j}return e}),b("davinci-eight/cameras/perspectiveArray",["require","exports","../cameras/frustumMatrix","../checks/expectArg"],function(a,b,c,d){function e(a,b,e,f,g){d("fov",a).toBeNumber(),d("aspect",b).toBeNumber(),d("near",e).toBeNumber(),d("far",f).toBeNumber();var h=e*Math.tan(.5*a),i=-h,j=i*b,k=h*b;return c(j,k,i,h,e,f,g)}return e}),b("davinci-eight/cameras/perspectiveMatrix",["require","exports","../checks/isDefined","../math/Matrix4","../cameras/perspectiveArray"],function(a,b,c,d,e){function f(a,b,f,g,h){var i=c(h)?h:d.identity();return e(a,b,f,g,i.data),i}return f}),b("davinci-eight/cameras/createPerspective",["require","exports","../cameras/createView","../math/Matrix4","../core/Symbolic","../math/Vector1","../checks/isUndefined","../checks/expectArg","../cameras/perspectiveMatrix"],function(a,b,c,d,e,f,g,h,i){var j=function(a){a=a||{};var b=new f([g(a.fov)?75*Math.PI/180:a.fov]),j=new f([g(a.aspect)?1:a.aspect]),k=new f([g(a.near)?.1:a.near]),l=new f([h("options.far",g(a.far)?2e3:a.far).toBeNumber().value]),m=g(a.projectionMatrixName)?e.UNIFORM_PROJECTION_MATRIX:a.projectionMatrixName,n=c(a),o=d.identity(),p=!0,q={get eye(){return n.eye},set eye(a){n.eye=a},setEye:function(a){return n.setEye(a),q},get look(){return n.look},set look(a){n.look=a},setLook:function(a){return n.setLook(a),q},get up(){return n.up},set up(a){n.up=a},setUp:function(a){return n.setUp(a),q},get fov(){return b.x},set fov(a){q.setFov(a)},setFov:function(a){return h("fov",a).toBeNumber(),p=p||b.x!==a,b.x=a,q},get aspect(){return j.x},set aspect(a){q.setAspect(a)},setAspect:function(a){return h("aspect",a).toBeNumber(),p=p||j.x!==a,j.x=a,q},get near(){return k.x},set near(a){q.setNear(a)},setNear:function(a){return h("near",a).toBeNumber(),p=p||k.x!==a,k.x=a,q},get far(){return l.x},set far(a){q.setFar(a)},setFar:function(a){return h("far",a).toBeNumber(),p=p||l.x!==a,l.x=a,q},accept:function(a){p&&(i(b.x,j.x,k.x,l.x,o),p=!1),a.uniformMatrix4(m,!1,o),n.accept(a)}};return q};return j}),b("davinci-eight/core/AttribLocation",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a,b){c("manager",a).toBeObject().value,this._name=c("name",b).toBeString().value}return Object.defineProperty(a.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(){this.contextLoss()},a.prototype.contextGain=function(a,b){this.contextLoss(),this._index=a.getAttribLocation(b,this._name),this._context=a},a.prototype.contextLoss=function(){this._index=void 0,this._context=void 0},a.prototype.vertexPointer=function(a,b,c,d){void 0===b&&(b=!1),void 0===c&&(c=0),void 0===d&&(d=0),this._context.vertexAttribPointer(this._index,a,this._context.FLOAT,b,c,d)},a.prototype.enable=function(){this._context.enableVertexAttribArray(this._index)},a.prototype.disable=function(){this._context.disableVertexAttribArray(this._index)},a.prototype.toString=function(){return["attribute",this._name].join(" ")},a}();return d}),b("davinci-eight/core/Color",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a){void 0===a&&(a=[0,0,0]),this.modified=!1,c("data",a).toSatisfy(3===a.length,"data must have length equal to 3"),this.data=a}return Object.defineProperty(a.prototype,"r",{get:function(){return this.data[0]},set:function(a){this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"g",{get:function(){return this.data[1]},set:function(a){this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"b",{get:function(){return this.data[2]},set:function(a){this.data[2]=a},enumerable:!0,configurable:!0}),a.prototype.clone=function(){return new a([this.data[0],this.data[1],this.data[2]])},a.prototype.luminance=function(){return a.luminance(this.r,this.g,this.b)},a.prototype.toString=function(){return"Color("+this.r+", "+this.g+", "+this.b+")"},a.luminance=function(a,b,c){var d=2.2;return.2126*Math.pow(a,d)+.7152*Math.pow(b,d)+.0722*Math.pow(c,d)},a.fromHSL=function(b,c,d){function e(a){return a>2*Math.PI?e(a-2*Math.PI):0>a?e(a+2*Math.PI):a}function f(b,c,e){var f=(a.luminance(b,c,e),d-.5*g);return new a([b+f,c+f,e+f])}var g=(1-Math.abs(2*d-1))*c,h=e(b)/Math.PI*3%6,i=g*(1-Math.abs(h%2-1));return h>=0&&1>h?f(g,i,0):h>=1&&2>h?f(i,g,0):h>=2&&3>h?f(0,g,g*(h-2)):h>=3&&4>h?f(0,g*(4-h),g):h>=4&&5>h?f(i,0,g):h>=5&&6>h?f(g,0,i):f(0,0,0)},a.fromRGB=function(b,d,e){return c("red",b).toBeNumber().toBeInClosedInterval(0,1),c("green",d).toBeNumber().toBeInClosedInterval(0,1),c("blue",e).toBeNumber().toBeInClosedInterval(0,1),new a([b,d,e])},a.copy=function(b){return new a([b.r,b.g,b.b])},a}();return d}),b("davinci-eight/core",["require","exports"],function(a,b){var c={ASSERTIVE:!1,DEFENSIVE:!1,GITHUB:"https://github.com/geometryzen/davinci-eight",LAST_AUTHORED_DATE:"2015-09-18",NAMESPACE:"EIGHT",LOG_WEBGL_CONTEXT_ATTRIBUTES:!1,LOG_WEBGL_VERSION:!0,VERBOSE:!0,VERSION:"2.98.0"};return c}),b("davinci-eight/core/DrawMode",["require","exports"],function(a,b){var c;return function(a){a[a.POINTS=0]="POINTS",a[a.LINES=1]="LINES",a[a.TRIANGLES=2]="TRIANGLES"}(c||(c={})),c}),b("davinci-eight/core/Face3",["require","exports","../math/Vector3","../core/Color"],function(a,b,c,d){var e=function(){function a(a,b,e,f){void 0===f&&(f=[]),this.normal=new c,this.color=new d,this.a=a,this.b=b,this.c=e,this.vertexNormals=f}return a.prototype.clone=function(){var b=new a(this.a,this.b,this.c);b.normal=c.copy(this.normal),b.color=d.copy(this.color),b.materialIndex=this.materialIndex;for(var e=0,f=this.vertexNormals.length;f>e;e++)b.vertexNormals[e]=c.copy(this.vertexNormals[e]);for(var e=0,f=this.vertexColors.length;f>e;e++)b.vertexColors[e]=d.copy(this.vertexColors[e]);for(var e=0,f=this.vertexTangents.length;f>e;e++)b.vertexTangents[e]=c.copy(this.vertexTangents[e]);return b},a}();return e}),b("davinci-eight/core/UniformLocation",["require","exports","../checks/expectArg"],function(a,b,c){function d(a,b){return a[0]!==b[0]||a[1]!==b[1]||a[2]!==b[2]||a[3]!==b[3]||a[4]!==b[4]||a[5]!==b[5]||a[6]!==b[6]||a[7]!==b[7]||a[8]!==b[8]||a[9]!==b[9]||a[10]!==b[10]||a[11]!==b[11]||a[12]!==b[12]||a[13]!==b[13]||a[14]!==b[14]||a[15]!==b[15]}var e=function(){function a(a,b){this._x=void 0,this._y=void 0,this._z=void 0,this._w=void 0,this._matrix4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].map(function(){return void 0}),this._transpose=void 0,c("manager",a).toBeObject().value,this._name=c("name",b).toBeString().value}return a.prototype.contextFree=function(){this.contextLoss()},a.prototype.contextGain=function(a,b){
this.contextLoss(),this._context=a,this._location=a.getUniformLocation(b,this._name),this._program=b},a.prototype.contextLoss=function(){this._context=void 0,this._location=void 0,this._program=void 0,this._x=void 0,this._y=void 0,this._z=void 0,this._w=void 0,this._matrix4.map(function(){return void 0}),this._transpose=void 0},a.prototype.uniform1f=function(a){this._context.useProgram(this._program),this._context.uniform1f(this._location,a)},a.prototype.uniform2f=function(a,b){this._context.useProgram(this._program),this._context.uniform2f(this._location,a,b)},a.prototype.uniform3f=function(a,b,c){this._context.useProgram(this._program),this._context.uniform3f(this._location,a,b,c)},a.prototype.uniform4f=function(a,b,c,d){this._context.useProgram(this._program),this._context.uniform4f(this._location,a,b,c,d)},a.prototype.matrix1=function(a,b){this._context.useProgram(this._program),this._context.uniform1fv(this._location,b.data)},a.prototype.matrix2=function(a,b){this._context.useProgram(this._program),this._context.uniformMatrix2fv(this._location,a,b.data)},a.prototype.matrix3=function(a,b){this._context.useProgram(this._program),this._context.uniformMatrix3fv(this._location,a,b.data)},a.prototype.matrix4=function(a,b){this._context.useProgram(this._program);var c=this._matrix4,e=b.data;(d(c,e)||this._transpose!=a)&&(this._context.uniformMatrix4fv(this._location,a,e),c[0]=e[0],c[1]=e[1],c[2]=e[2],c[3]=e[3],c[4]=e[4],c[5]=e[5],c[6]=e[6],c[7]=e[7],c[8]=e[8],c[9]=e[9],c[10]=e[10],c[11]=e[11],c[12]=e[12],c[13]=e[13],c[14]=e[14],c[15]=e[15],this._transpose=a)},a.prototype.vector1=function(a){this._context.useProgram(this._program),this._context.uniform1fv(this._location,a.data)},a.prototype.vector2=function(a){this._context.useProgram(this._program),this._context.uniform2fv(this._location,a.data)},a.prototype.vector3=function(a){this._context.useProgram(this._program);var b=a.data,c=b[0],d=b[1],e=b[2];(this._x!==c||this._y!==d||this._z!==e)&&(this._context.uniform3fv(this._location,b),this._x=c,this._y=d,this._z=e)},a.prototype.vector4=function(a){this._context.useProgram(this._program),this._context.uniform4fv(this._location,a.data)},a.prototype.toString=function(){return["uniform",this._name].join(" ")},a}();return e}),b("davinci-eight/curves/Curve",["require","exports"],function(a,b){var c=function(){function a(){}return a.prototype.getPoint=function(a){throw new Error("Curve.getPoint() not implemented!")},a.prototype.getPointAt=function(a){var b=this.getUtoTmapping(a);return this.getPoint(b)},a.prototype.getPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPoint(b/a));return c},a.prototype.getSpacedPoints=function(a){a||(a=5);var b,c=[];for(b=0;a>=b;b++)c.push(this.getPointAt(b/a));return c},a.prototype.getLength=function(){var a=this.getLengths();return a[a.length-1]},a.prototype.getLengths=function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b,c,d=[],e=this.getPoint(0),f=0;for(d.push(0),c=1;a>=c;c++)b=this.getPoint(c/a),f+=b.distanceTo(e),d.push(f),e=b;return this.cacheArcLengths=d,d},a.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},a.prototype.getUtoTmapping=function(a,b){var c,d=this.getLengths(),e=0,f=d.length;c=b?b:a*d[f-1];for(var g,h=0,i=f-1;i>=h;)if(e=Math.floor(h+(i-h)/2),g=d[e]-c,0>g)h=e+1;else{if(!(g>0)){i=e;break}i=e-1}if(e=i,d[e]==c){var j=e/(f-1);return j}var k=d[e],l=d[e+1],m=l-k,n=(c-k)/m,j=(e+n)/(f-1);return j},a.prototype.getTangent=function(a){var b=1e-4,c=a-b,d=a+b;0>c&&(c=0),d>1&&(d=1);var e=this.getPoint(c),f=this.getPoint(d),g=f.clone().sub(e);return g.normalize()},a.prototype.getTangentAt=function(a){var b=this.getUtoTmapping(a);return this.getTangent(b)},a}();return c}),b("davinci-eight/dfx/DrawAttribute",["require","exports","../math/VectorN"],function(a,b,c){function d(a){return a instanceof c}function e(a){if(!d(a))throw new Error("values must be a VectorN");return a}function f(a,b){return a%b===0}function g(a,b){if("number"!=typeof a)throw new Error("size must be a number");if(!f(b.length,a))throw new Error("values.length must be an exact multiple of size");return a}var h=function(){function a(a,b){this.values=e(a),this.size=g(b,a)}return a}();return h}),b("davinci-eight/dfx/DrawElements",["require","exports","../checks/expectArg","../math/VectorN"],function(a,b,c,d){var e=function(){function a(a,b,e){this.attributes={},c("indices",b).toBeObject().toSatisfy(b instanceof d,"indices must be a VectorN<number>"),c("attributes",e).toBeObject(),this.k=a,this.indices=b,this.attributes=e}return a}();return e}),b("davinci-eight/checks/isNumber",["require","exports"],function(a,b){function c(a){return"number"==typeof a}return c}),b("davinci-eight/checks/isInteger",["require","exports","../checks/isNumber"],function(a,b,c){function d(a){return c(a)&&a%1===0}return d}),b("davinci-eight/dfx/Vertex",["require","exports"],function(a,b){function c(a,b){return b?a+b.toString():a}function d(a){var b=a.attributes,d=Object.keys(b).map(function(a){var d=b[a];return c(a,d)}).join(" ");return d}var e=function(){function a(){this.opposing=[],this.attributes={}}return a.prototype.toString=function(){return d(this)},a}();return e}),b("davinci-eight/dfx/Simplex",["require","exports","../checks/expectArg","../checks/isInteger","../dfx/Vertex","../math/VectorN"],function(a,b,c,d,e,f){function g(a,b,e,f){return d(b)&&b>=e&&f>=b?b:void c(a,b).toSatisfy(!1,a+" must be an integer in the range ["+e+","+f+"]")}function h(a){return g("count",a,0,7)}function i(a,b){return a.concat(b)}function j(a,b,d,e){void 0===e&&(e=[]),c("b",b).toSatisfy(a.length===b.length,"a must be the same length as b");var f,g=a.length,h=1-d;for(f=0;g>f;f++)e.push(h*a[f]+d*b[f]);return e}function k(a,b,c){for(var d={},e=Object.keys(a),f=e.length,g=0;f>g;g++){var h=e[g];d[h]=l(a[h],b[h],c)}return d}function l(a,b,c){return new f(j(a.data,b.data,c))}var m=function(){function a(a){this.vertices=[],d(a)||c("k",a).toBeNumber();for(var b=a+1,f=0;b>f;f++)this.vertices.push(new e);var g=this;this.vertices.forEach(function(a){a.parent=g})}return Object.defineProperty(a.prototype,"k",{get:function(){return this.vertices.length-1},enumerable:!0,configurable:!0}),a.indices=function(a){return a.vertices.map(function(a){return a.index})},a.boundaryMap=function(b){var c=(b.vertices,b.k);if(c===a.K_FOR_TRIANGLE){var d=new a(c-1);d.vertices[0].parent=d,d.vertices[0].attributes=b.vertices[0].attributes,d.vertices[1].parent=d,d.vertices[1].attributes=b.vertices[1].attributes;var e=new a(c-1);e.vertices[0].parent=e,e.vertices[0].attributes=b.vertices[1].attributes,e.vertices[1].parent=e,e.vertices[1].attributes=b.vertices[2].attributes;var f=new a(c-1);return f.vertices[0].parent=f,f.vertices[0].attributes=b.vertices[2].attributes,f.vertices[1].parent=f,f.vertices[1].attributes=b.vertices[0].attributes,[d,e,f]}if(c===a.K_FOR_LINE_SEGMENT){var g=new a(c-1);g.vertices[0].parent=g,g.vertices[0].attributes=b.vertices[0].attributes;var h=new a(c-1);return h.vertices[0].parent=h,h.vertices[0].attributes=b.vertices[1].attributes,[g,h]}if(c===a.K_FOR_POINT)return[new a(c-1)];if(c===a.K_FOR_EMPTY)return[];throw new Error("Unexpected k-simplex, k = "+b.k+" @ Simplex.boundaryMap()")},a.subdivideMap=function(b){c("simplex",b).toBeObject();var d=[],e=b.vertices,f=b.k;if(f===a.K_FOR_TRIANGLE){var g=e[0].attributes,h=e[1].attributes,i=e[2].attributes,j=k(g,h,.5),l=k(h,i,.5),m=k(i,g,.5),n=new a(f);n.vertices[0].attributes=i,n.vertices[1].attributes=m,n.vertices[2].attributes=l;var o=new a(f);o.vertices[0].attributes=g,o.vertices[1].attributes=j,o.vertices[2].attributes=m;var p=new a(f);p.vertices[0].attributes=h,p.vertices[1].attributes=l,p.vertices[2].attributes=j;var q=new a(f);q.vertices[0].attributes=j,q.vertices[1].attributes=l,q.vertices[2].attributes=m,d.push(n),d.push(o),d.push(p),d.push(q)}else if(f===a.K_FOR_LINE_SEGMENT){var g=e[0].attributes,h=e[1].attributes,r=k(g,h,.5),s=new a(f);s.vertices[0].attributes=g,s.vertices[1].attributes=r;var t=new a(f);t.vertices[0].attributes=r,t.vertices[1].attributes=h,d.push(s),d.push(t)}else if(f===a.K_FOR_POINT)d.push(b);else if(f!==a.K_FOR_EMPTY)throw new Error(f+"-simplex is not supported");return d},a.boundary=function(b,c){void 0===c&&(c=1),h(c);for(var d=0;c>d;d++)b=b.map(a.boundaryMap).reduce(i,[]);return b},a.subdivide=function(b,c){void 0===c&&(c=1),h(c);for(var d=0;c>d;d++)b=b.map(a.subdivideMap).reduce(i,[]);return b},a.setAttributeValues=function(a,b){var c,d=Object.keys(a),e=d.length;for(c=0;e>c;c++){var f=d[c],g=a[f],h=g.length,i=void 0;for(i=0;h>i;i++)b.vertices[i].attributes[f]=g[i]}},a.K_FOR_EMPTY=-1,a.K_FOR_POINT=0,a.K_FOR_LINE_SEGMENT=1,a.K_FOR_TRIANGLE=2,a.K_FOR_TETRAHEDRON=3,a.K_FOR_FIVE_CELL=4,a}();return m}),b("davinci-eight/dfx/checkGeometry",["require","exports","../checks/expectArg","../checks/isDefined","../dfx/Simplex"],function(a,b,c,d,e){function f(a,b){var c=[];return JSON.stringify(a,function(a,b){if("object"==typeof b&&null!==b){if(-1!==c.indexOf(b))return;c.push(b)}return b},b)}function g(a){for(var b=void 0,g={},h=a.length,i=0;h>i;i++){var j=a[i];j instanceof e||c("simplex",j).toSatisfy(!1,"Every element must be a Simplex @ checkGeometry(). Found "+f(j,2));var k=j.vertices;b=j.k;for(var l=0,m=k.length;m>l;l++)for(var n=k[l],o=n.attributes,p=Object.keys(o),q=p.length,r=0;q>r;r++){var s=p[r],t=o[s],u=g[s];if(u){if(u.size!==t.length)throw new Error("Something is rotten in Denmark!")}else g[s]={size:t.length}}}if(d(b)){var v={get attributes(){return g},get k(){return b}};return v}return void 0}return g}),b("davinci-eight/dfx/computeFaceNormals",["require","exports","../core/Symbolic","../math/Vector3","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a,b,c,d,e,f,g){function h(a,b,h){void 0===b&&(b=c.ATTRIBUTE_POSITION),void 0===h&&(h=c.ATTRIBUTE_NORMAL);var i=a.vertices[0].attributes,j=a.vertices[1].attributes,k=a.vertices[2].attributes,l=i[b],m=j[b],n=k[b],o=l.getComponent(0),p=l.getComponent(1),q=l.getComponent(2),r=m.getComponent(0),s=m.getComponent(1),t=m.getComponent(2),u=n.getComponent(0),v=n.getComponent(1),w=n.getComponent(2),x=u-r,y=v-s,z=w-t,A=o-r,B=p-s,C=q-t,D=f(x,y,z,A,B,C),E=g(x,y,z,A,B,C),F=e(x,y,z,A,B,C),G=new d([D,E,F]).normalize();i[h]=G,j[h]=G,k[h]=G}return h}),b("davinci-eight/dfx/triangle",["require","exports","../dfx/computeFaceNormals","../checks/expectArg","../dfx/Simplex","../core/Symbolic","../math/VectorN"],function(a,b,c,d,e,f,g){function h(a,b,h,i,j){void 0===i&&(i={}),void 0===j&&(j=[]),d("a",a).toSatisfy(a instanceof g,"a must be a VectorN"),d("b",b).toSatisfy(a instanceof g,"a must be a VectorN"),d("b",h).toSatisfy(a instanceof g,"a must be a VectorN");var k=new e(e.K_FOR_TRIANGLE);return k.vertices[0].attributes[f.ATTRIBUTE_POSITION]=a,k.vertices[1].attributes[f.ATTRIBUTE_POSITION]=b,k.vertices[2].attributes[f.ATTRIBUTE_POSITION]=h,c(k,f.ATTRIBUTE_POSITION,f.ATTRIBUTE_NORMAL),e.setAttributeValues(i,k),j.push(k),j}return h}),b("davinci-eight/dfx/quadrilateral",["require","exports","../checks/expectArg","../dfx/triangle","../math/VectorN"],function(a,b,c,d,e){function f(a,b,c){var d,e,f,g=Object.keys(b),h=g.length;for(d=0;h>d;d++)e=g[d],f=b[e],c[e]=a.map(function(a){return f[a]})}function g(a,b,g,h,i,j){void 0===i&&(i={}),void 0===j&&(j=[]),c("a",a).toSatisfy(a instanceof e,"a must be a VectorN"),c("b",b).toSatisfy(b instanceof e,"b must be a VectorN"),c("c",g).toSatisfy(g instanceof e,"c must be a VectorN"),c("d",h).toSatisfy(h instanceof e,"d must be a VectorN");var k={};f([1,2,0],i,k),d(b,g,a,k,j);var l=j[j.length-1];f([3,0,2],i,k),d(h,a,g,k,j);var m=j[j.length-1];return l.vertices[0].opposing.push(m),m.vertices[0].opposing.push(l),j}return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Vector2",["require","exports","../math/VectorN"],function(a,b,c){var d=function(a){function b(b,c){void 0===b&&(b=[0,0]),void 0===c&&(c=!1),a.call(this,b,c,2)}return f(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.x!==a,this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this.data[1]},set:function(a){this.modified=this.modified||this.y!==a,this.data[1]=a},enumerable:!0,configurable:!0}),b.prototype.set=function(a,b){return this.x=a,this.y=b,this},b.prototype.setX=function(a){return this.x=a,this},b.prototype.setY=function(a){return this.y=a,this},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},b.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},b.prototype.addScalar=function(a){return this.x+=a,this.y+=a,this},b.prototype.sum=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},b.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},b.prototype.subScalar=function(a){return this.x-=a,this.y-=a,this},b.prototype.difference=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},b.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this},b.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this},b.prototype.divide=function(a){return this.x/=a.x,this.y/=a.y,this},b.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b}else this.x=0,this.y=0;return this},b.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},b.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},b.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},b.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},b.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},b.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},b.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},b.prototype.distanceTo=function(a){return Math.sqrt(this.quadranceTo(a))},b.prototype.dot=function(a){return this.x*a.x+this.y*a.y},b.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},b.prototype.normalize=function(){return this.divideScalar(this.magnitude())},b.prototype.quaditude=function(){return this.x*this.x+this.y*this.y},b.prototype.quadranceTo=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},b.prototype.rotate=function(a){return this},b.prototype.setMagnitude=function(a){var b=this.magnitude();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},b.prototype.lerpVectors=function(a,b,c){return this.difference(b,a).multiplyScalar(c).add(a),this},b.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},b.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},b.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},b.prototype.clone=function(){return new b([this.x,this.y])},b}(c);return d}),b("davinci-eight/dfx/cube",["require","exports","../dfx/quadrilateral","../core/Symbolic","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f){function g(a){void 0===a&&(a=1);var b=a/2,g=new f([+b,+b,+b]),h=new f([-b,+b,+b]),i=new f([-b,-b,+b]),j=new f([+b,-b,+b]),k=new f([+b,-b,-b]),l=new f([+b,+b,-b]),m=new f([-b,+b,-b]),n=new f([-b,-b,-b]),o=new e([0,0]),p=new e([0,1]),q=new e([1,0]),r=new e([1,1]),s={};s[d.ATTRIBUTE_TEXTURE_COORDS]=[r,p,o,q];var t=c(g,h,i,j,s),u=c(g,j,k,l,s),v=c(g,l,m,h,s),w=c(h,m,n,i,s),x=c(n,k,j,i,s),y=c(k,n,m,l,s),z=[t,u,v,w,x,y];return z.reduce(function(a,b){return a.concat(b)},[])}return g}),b("davinci-eight/dfx/square",["require","exports","../dfx/quadrilateral","../core/Symbolic","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,f){function g(a){void 0===a&&(a=1);var b=a/2,g=new f([+b,+b,0]),h=new f([-b,+b,0]),i=new f([-b,-b,0]),j=new f([+b,-b,0]),k=new e([0,0]),l=new e([0,1]),m=new e([1,0]),n=new e([1,1]),o=[n,l,k,m],p={};return p[d.ATTRIBUTE_TEXTURE_COORDS]=o,c(g,h,i,j,p)}return g}),b("davinci-eight/dfx/tetrahedron",["require","exports","../checks/expectArg","../dfx/triangle","../math/VectorN"],function(a,b,c,d,e){function f(a,b,f,g,h,i){void 0===h&&(h={}),void 0===i&&(i=[]),c("a",a).toSatisfy(a instanceof e,"a must be a VectorN"),c("b",b).toSatisfy(b instanceof e,"b must be a VectorN"),c("c",f).toSatisfy(f instanceof e,"c must be a VectorN"),c("d",g).toSatisfy(g instanceof e,"d must be a VectorN");var j={},k=[a,b,f,g],l=[];return d(k[0],k[1],k[2],j,i),l.push(i[i.length-1]),d(k[1],k[3],k[2],j,i),l.push(i[i.length-1]),d(k[2],k[3],k[0],j,i),l.push(i[i.length-1]),d(k[3],k[1],k[0],j,i),l.push(i[i.length-1]),l[3].vertices[0].opposing.push(l[0]),l[3].vertices[1].opposing.push(l[1]),l[3].vertices[2].opposing.push(l[2]),l[0].vertices[0].opposing.push(l[1]),l[0].vertices[1].opposing.push(l[3]),l[0].vertices[2].opposing.push(l[2]),l[1].vertices[0].opposing.push(l[2]),l[1].vertices[1].opposing.push(l[3]),l[1].vertices[2].opposing.push(l[0]),l[2].vertices[0].opposing.push(l[3]),l[2].vertices[1].opposing.push(l[1]),l[2].vertices[2].opposing.push(l[0]),i}return f}),b("davinci-eight/dfx/computeUniqueVertices",["require","exports"],function(a,b){function c(a){function b(a){var b=a.toString();if(c[b]){var e=c[b];a.index=e.index}else a.index=d.length,d.push(a),c[b]=a}var c={},d=[];return a.forEach(function(a){a.vertices.forEach(function(a){b(a)})}),d}return c}),b("davinci-eight/dfx/toDrawElements",["require","exports","../dfx/checkGeometry","../dfx/computeUniqueVertices","../dfx/DrawElements","../dfx/DrawAttribute","../checks/expectArg","../dfx/Simplex","../math/VectorN"],function(a,b,c,d,e,f,g,h,i){function j(a,b){for(var c=[],d=0;a>d;d++)c.push(b);return c}function k(a,b){g("name",a).toBeString(),g("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.name;return d?d:a}throw new Error("Unable to compute name; missing attribute specification for "+a)}function l(a,b){g("key",a).toBeString(),g("attribMap",b).toBeObject();var c=b[a];if(c){var d=c.size;return g("size",d).toBeNumber(),c.size}throw new Error("Unable to compute size; missing attribute specification for "+a)}function m(a,b){return a.concat(b)}function n(a,b){g("geometry",a).toBeObject();var n=c(a);b?g("geometryInfo",b).toBeObject():b=n;var o,p,q=b.attributes,r=Object.keys(q),s=r.length,t=d(a),u=t.length,v=a.map(h.indices).reduce(m,[]),w=[];for(o=0;s>o;o++){var x=r[o],y=l(x,q),z=j(u*y,void 0);w.push({data:z,dimensions:y,name:k(x,q)})}for(p=0;u>p;p++){var A=t[p],B=A.attributes;for(A.index!==p&&g("vertex.index",p).toSatisfy(!1,"vertex.index must equal loop index, i"),o=0;s>o;o++){var C=w[o],D=C.dimensions,z=B[r[o]];z||(z=new i(j(D,0),!1,D)),z.toArray(C.data,p*C.dimensions)}}var E={};for(o=0;s>o;o++){var C=w[o],z=C.data,F=new i(z,!1,z.length);E[C.name]=new f(F,C.dimensions)}return new e(b.k,new i(v,!1,v.length),E)}return n}),b("davinci-eight/utils/refChange",["require","exports"],function(a,b){function c(a){return p+": "+a}function d(a){return console.log(c(a))}function e(a){return console.warn(c(a))}function f(a){return console.warn(c(a))}function g(){var a=Object.keys(l);a.forEach(function(a){var b=l[a];0===b.refCount&&delete l[a]})}function h(){var a,b=Object.keys(l),c=b.length,d=0;for(a=0;c>a;a++){var e=b[a],f=l[e];d+=f.refCount}return d}function i(){return m&&e("Nothing to see because skip mode is "+m),g(),h()}function j(){var a=i();return a>0?e(JSON.stringify(l,null,2)):d("There are "+a+" outstanding reference counts."),a}function k(a,b,e){if(void 0===e&&(e=0),0===e||!m){if(n)if(o){if(b===o){var g=l[a];d(g?e+" on "+a+" @ "+b:e+" on "+a+" @ "+b)}}else d(e+" on "+a+" @ "+b);if(1===e){var g=l[a];g||(g={refCount:0,name:b,zombie:!1},l[a]=g),g.refCount+=e}else if(-1===e){var g=l[a];g?(g.refCount+=e,0===g.refCount&&(g.zombie=!0)):f(e+" on "+a+" @ "+b)}else{if(0!==e)throw new Error(c("change must be +1 or -1 for normal recording, or 0 for logging to the console."));var h=""+a+" @ "+b;if(d(h),"stop"===a)return i();if("dump"===a)return j();if("start"===a)m=!1,n=!1;else if("reset"===a)l={},m=!0,n=!1,o=void 0;else{if("trace"!==a)throw new Error(c("Unexpected command "+h));m=!1,n=!0,o=b}}}}var l={},m=!0,n=!1,o=void 0,p="refChange";return k}),b("davinci-eight/utils/uuid4",["require","exports"],function(a,b){function c(){var a=function(a){return Math.pow(2,a)},b=(a(4),a(6)),c=a(8),d=a(12),e=(a(14),a(16)),f=a(32),g=(a(40),a(48),function(a,b){return Math.floor(Math.random()*(b-a+1))+a}),h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}return c}),b("davinci-eight/utils/IUnknownArray",["require","exports","../utils/refChange","../utils/uuid4"],function(a,b,c,d){var e="IUnknownArray",f=function(){function a(){this._elements=[],this._refCount=1,this._uuid=d().generate(),c(this._uuid,e,1)}return a.prototype.addRef=function(){return this._refCount++,c(this._uuid,e,1),this._refCount},a.prototype.indexOf=function(a){return this._elements.indexOf(a)},Object.defineProperty(a.prototype,"length",{get:function(){return this._elements.length},enumerable:!0,configurable:!0}),a.prototype.release=function(){if(this._refCount--,c(this._uuid,e,-1),0===this._refCount){for(var a=0,b=this._elements.length;b>a;a++)this._elements[a].release();return this._elements=void 0,this._refCount=void 0,this._uuid=void 0,0}return this._refCount},a.prototype.splice=function(a,b){return this._elements.splice(a,b)},a.prototype.forEach=function(a){this._elements.forEach(a)},a.prototype.push=function(a){this._elements.push(a),a.addRef()},a.prototype.pop=function(){return this._elements.pop()},a}();return f}),b("davinci-eight/utils/NumberIUnknownMap",["require","exports","../utils/refChange","../utils/uuid4"],function(a,b,c,d){var e="NumberIUnknownMap",f=function(){function a(){this._refCount=1,this._elements={},this._uuid=d().generate(),c(this._uuid,e,1)}return a.prototype.addRef=function(){return c(this._uuid,e,1),this._refCount++,this._refCount},a.prototype.release=function(){if(c(this._uuid,e,-1),this._refCount--,0===this._refCount){var a=this;this.forEach(function(b){a.put(b,void 0)}),this._elements=void 0}return this._refCount},a.prototype.exists=function(a){var b=this._elements[a];return b?!0:!1},a.prototype.get=function(a){var b=this._elements[a];return b?(b.addRef(),b):void 0},a.prototype.put=function(a,b){var c=this._elements[a];c?b?c===b||(c.release(),b.addRef(),this._elements[a]=b):(c.release(),this._elements[a]=void 0):b&&(b.addRef(),this._elements[a]=b)},a.prototype.forEach=function(a){var b,c=this.keys,d=c.length;for(b=0;d>b;b++){var e=c[b],f=this._elements[e];a(e,f)}},Object.defineProperty(a.prototype,"keys",{get:function(){return Object.keys(this._elements).map(function(a){return parseFloat(a)})},enumerable:!0,configurable:!0}),a.prototype.remove=function(a){this.put(a,void 0),delete this._elements[a]},a}();return f}),b("davinci-eight/utils/StringIUnknownMap",["require","exports","../utils/refChange","../utils/uuid4"],function(a,b,c,d){var e="StringIUnknownMap",f=function(){function a(){this._refCount=1,this._elements={},this._uuid=d().generate(),c(this._uuid,e,1)}return a.prototype.addRef=function(){return c(this._uuid,e,1),this._refCount++,this._refCount},a.prototype.release=function(){if(c(this._uuid,e,-1),this._refCount--,0===this._refCount){var a=this;this.forEach(function(b){a.put(b,void 0)}),this._elements=void 0}return this._refCount},a.prototype.exists=function(a){var b=this._elements[a];return b?!0:!1},a.prototype.get=function(a){var b=this._elements[a];return b?(b.addRef(),b):void 0},a.prototype.put=function(a,b){var c=this._elements[a];c?b?c===b||(c.release(),b.addRef(),this._elements[a]=b):(c.release(),this._elements[a]=void 0):b&&(b.addRef(),this._elements[a]=b)},a.prototype.forEach=function(a){var b,c=this.keys,d=c.length;for(b=0;d>b;b++){var e=c[b],f=this._elements[e];a(e,f)}},Object.defineProperty(a.prototype,"keys",{get:function(){return Object.keys(this._elements)},enumerable:!0,configurable:!0}),a.prototype.remove=function(a){this.put(a,void 0),delete this._elements[a]},a}();return f}),b("davinci-eight/scene/createDrawList",["require","exports","../utils/IUnknownArray","../utils/NumberIUnknownMap","../utils/refChange","../utils/StringIUnknownMap","../utils/uuid4"],function(a,b,c,d,e,f,g){var h="createDrawList",i="DrawableGroup",j="DrawableGroups",k=function(){function a(a){this._drawables=new c,this._refCount=1,this._uuid=g().generate(),this._program=a,this._program.addRef(),e(this._uuid,i,1)}return a.prototype.addRef=function(){return this._refCount++,e(this._uuid,i,1),this._refCount},a.prototype.release=function(){return this._refCount--,e(this._uuid,i,-1),0===this._refCount?(this._program.release(),this._program=void 0,this._drawables.release(),this._drawables=void 0,this._refCount=void 0,this._uuid=void 0,0):this._refCount},a.prototype.accept=function(a){a(this._program)},Object.defineProperty(a.prototype,"length",{get:function(){return this._drawables.length},enumerable:!0,configurable:!0}),a.prototype.push=function(a){this._drawables.push(a)},a.prototype.remove=function(a){var b=this._drawables,c=b.indexOf(a);c>=0&&b.splice(c,1).forEach(function(a){a.release()})},a.prototype.traverse=function(a){this._drawables.forEach(a)},a}(),l=function(){function a(){this._groups=new f,this._refCount=1,this._uuid=g().generate(),e(this._uuid,j,1)}return a.prototype.addRef=function(){return this._refCount++,e(this._uuid,j,1),this._refCount},a.prototype.release=function(){return this._refCount--,e(this._uuid,j,-1),0===this._refCount?(this._groups.release(),this._groups=void 0,this._refCount=void 0,this._uuid=void 0,0):this._refCount},a.prototype.add=function(a){var b=a.material;if(b)try{var c=b.programId,d=this._groups.get(c);d||(d=new k(b),this._groups.put(c,d)),d.push(a),d.release()}finally{b.release()}},a.prototype.remove=function(a){var b=a.material;if(b)try{var c=b.programId;if(!this._groups.exists(c))throw new Error("drawable not found?!");var d=this._groups.get(c);d.remove(a),0===d.length&&delete this._groups.remove(c),d.release()}finally{b.release()}},a.prototype.traverseDrawables=function(a){this._groups.forEach(function(b,c){c.traverse(a)})},a.prototype.traversePrograms=function(a){this._groups.forEach(function(b,c){c.accept(a)})},a}(),m=function(){var a=new l,b=new d,c=1,f=g().generate(),i={addRef:function(){return c++,e(f,h,1),c},release:function(){return c--,e(f,h,-1),0===c?(a.release(),a=void 0,b.release(),b=void 0,c=void 0,f=void 0,0):c},contextFree:function(b){a.traverseDrawables(function(a){a.contextFree(b)})},contextGain:function(c){b.exists(c.canvasId)||b.put(c.canvasId,c),a.traverseDrawables(function(a){a.contextGain(c)})},contextLoss:function(b){a.traverseDrawables(function(a){a.contextLoss(b)})},add:function(c){b.forEach(function(a,b){c.contextGain(b)}),a.add(c)},remove:function(b){a.remove(b)},uniform1f:function(c,d){b.forEach(function(b,e){a.traversePrograms(function(a){a.use(b),a.uniform1f(c,d)})})},uniform2f:function(c,d,e){b.forEach(function(b,f){a.traversePrograms(function(a){a.use(b),a.uniform2f(c,d,e)})})},uniform3f:function(c,d,e,f){b.forEach(function(b,g){a.traversePrograms(function(a){a.use(b),a.uniform3f(c,d,e,f)})})},uniform4f:function(c,d,e,f,g){b.forEach(function(b,h){a.traversePrograms(function(a){a.use(b),a.uniform4f(c,d,e,f,g)})})},uniformMatrix1:function(c,d,e){b.forEach(function(b,f){a.traversePrograms(function(a){a.use(b),a.uniformMatrix1(c,d,e)})})},uniformMatrix2:function(c,d,e){b.forEach(function(b,f){a.traversePrograms(function(a){a.use(b),a.uniformMatrix2(c,d,e)})})},uniformMatrix3:function(c,d,e){b.forEach(function(b,f){a.traversePrograms(function(a){a.use(b),a.uniformMatrix3(c,d,e)})})},uniformMatrix4:function(c,d,e){b.forEach(function(b,f){a.traversePrograms(function(a){a.use(b),a.uniformMatrix4(c,d,e)})})},uniformVector1:function(c,d){b.forEach(function(b,e){a.traversePrograms(function(a){a.use(b),a.uniformVector1(c,d)})})},uniformVector2:function(c,d){b.forEach(function(b,e){a.traversePrograms(function(a){a.use(b),a.uniformVector2(c,d)})})},uniformVector3:function(c,d){b.forEach(function(b,e){a.traversePrograms(function(a){a.use(b),a.uniformVector3(c,d)})})},uniformVector4:function(c,d){b.forEach(function(b,e){a.traversePrograms(function(a){a.use(b),a.uniformVector4(c,d)})})},traverse:function(b){a.traverseDrawables(b)}};return e(f,h,1),i};return m}),b("davinci-eight/scene/Mesh",["require","exports","../utils/NumberIUnknownMap","../utils/refChange","../utils/uuid4"],function(a,b,c,d,e){var f="Mesh",g=function(){function a(a,b,g){this._refCount=1,this._uuid=e().generate(),this.geometry=a,this._material=b,this._material.addRef(),this.meshLookup=new c,this.model=g,d(this._uuid,f,1)}return a.prototype.addRef=function(){return this._refCount++,d(this._uuid,f,1),this._refCount},a.prototype.release=function(){return this._refCount--,d(this._uuid,f,-1),0===this._refCount&&(this.meshLookup.release(),this.meshLookup=void 0,this._material.release(),this._material=void 0),this._refCount},a.prototype.draw=function(a){var b=this,c=b._material,d=b.model,e=this.meshLookup.get(a);c.use(a),d.accept(c),e.bind(c),e.draw(),e.unbind(),e.release()},a.prototype.contextFree=function(a){this._material.contextFree(a)},a.prototype.contextGain=function(a){var b=this.geometry;if(b){var c=b.elements,d=(b.metadata,a.createDrawElementsMesh(c));this.meshLookup.put(a.canvasId,d),d.release(),this._material.contextGain(a)}else console.warn(f+" contextGain method has no elements, canvasId => "+a.canvasId)},a.prototype.contextLoss=function(a){this._material.contextLoss(a)},Object.defineProperty(a.prototype,"material",{get:function(){return this._material.addRef(),this._material},enumerable:!0,configurable:!0}),a}();return g}),b("davinci-eight/scene/PerspectiveCamera",["require","exports","../cameras/createPerspective","../utils/refChange","../utils/uuid4","../math/Vector3"],function(a,b,c,d,e,f){var g="PerspectiveCamera",h=function(){function a(a,b,h,i){void 0===a&&(a=50*Math.PI/180),void 0===b&&(b=1),void 0===h&&(h=.1),void 0===i&&(i=2e3),this.position=new f,this._refCount=1,this._uuid=e().generate(),this.inner=c(),this.fov=a,this.aspect=b,this.near=h,this.far=i,d(this._uuid,g,1)}return a.prototype.addRef=function(){return this._refCount++,d(this._uuid,g,1),this._refCount},a.prototype.accept=function(a){this.inner.setFov(this.fov),this.inner.setAspect(this.aspect),this.inner.setNear(this.near),this.inner.setFar(this.far),this.inner.setEye(this.position),this.inner.accept(a)},a.prototype.contextFree=function(){},a.prototype.contextGain=function(a){},a.prototype.contextLoss=function(){},a.prototype.draw=function(a){console.log(g+".draw("+a+")")},a.prototype.release=function(){return this._refCount--,d(this._uuid,g,-1),0===this._refCount?0:this._refCount},a}();return h}),b("davinci-eight/checks/mustSatisfy",["require","exports"],function(a,b){function c(a,b,c,d){if(!b){if(c){var e=c();if(d){var f=d();throw new Error(a+" must "+e+" in "+f+".")}throw new Error(a+" must "+e+".")}var e="satisfy some condition";if(d){var f=d();throw new Error(a+" must "+e+" in "+f+".");
}throw new Error(a+" must "+e+".")}}return c}),b("davinci-eight/scene/MonitorList",["require","exports","../checks/mustSatisfy","../checks/isInteger"],function(a,b,c,d){function e(){return"be an instance of MonitorList"}function f(){return"be ContextMonitor[]"}function g(a){return a}var h=function(){function a(a){void 0===a&&(a=[]),this.monitors=a.map(g)}return a.prototype.addContextListener=function(a){this.monitors.forEach(function(b){b.addContextListener(a)})},a.prototype.push=function(a){this.monitors.push(a)},a.prototype.removeContextListener=function(a){this.monitors.forEach(function(b){b.removeContextListener(a)})},a.prototype.toArray=function(){return this.monitors.map(g)},a.copy=function(b){return new a(b)},a.isInstanceOf=function(b){return b instanceof a},a.assertInstance=function(b,d,f){if(a.isInstanceOf(d))return d;throw c(b,!1,e,f),new Error},a.verify=function(a,b,e){c(a,d(b.length),f,e);for(var g=b.length,h=0;g>h;h++);return b},a.addContextListener=function(b,c){a.verify("monitors",c,function(){return"MonitorList.addContextListener"}),c.forEach(function(a){a.addContextListener(b)})},a.removeContextListener=function(b,c){a.verify("monitors",c,function(){return"MonitorList.removeContextListener"}),c.forEach(function(a){a.removeContextListener(b)})},a}();return h}),b("davinci-eight/scene/Scene",["require","exports","../scene/MonitorList","../scene/createDrawList","../utils/refChange","../utils/uuid4"],function(a,b,c,d,e,f){function g(){return h+" constructor"}var h="Scene",i=function(){function a(a){this._drawList=d(),this._refCount=1,this._uuid=f().generate(),c.verify("monitors",a,g),this.monitors=new c(a),this.monitors.addContextListener(this),e(this._uuid,h,1)}return a.prototype.add=function(a){this._drawList.add(a)},a.prototype.addRef=function(){return this._refCount++,e(this._uuid,h,1),this._refCount},a.prototype.release=function(){return this._refCount--,e(this._uuid,h,-1),0===this._refCount?(this._drawList.release(),this._drawList=void 0,this.monitors.removeContextListener(this),this.monitors=void 0,this._refCount=void 0,this._uuid=void 0,0):this._refCount},a.prototype.remove=function(a){this._drawList.remove(a)},a.prototype.traverse=function(a){this._drawList.traverse(a)},a.prototype.contextFree=function(a){this._drawList.contextFree(a)},a.prototype.contextGain=function(a){this._drawList.contextGain(a)},a.prototype.contextLoss=function(a){this._drawList.contextLoss(a)},a.prototype.uniform1f=function(a,b){this._drawList.uniform1f(a,b)},a.prototype.uniform2f=function(a,b,c){this._drawList.uniform2f(a,b,c)},a.prototype.uniform3f=function(a,b,c,d){this._drawList.uniform3f(a,b,c,d)},a.prototype.uniform4f=function(a,b,c,d,e){this._drawList.uniform4f(a,b,c,d,e)},a.prototype.uniformMatrix1=function(a,b,c){this._drawList.uniformMatrix1(a,b,c)},a.prototype.uniformMatrix2=function(a,b,c){this._drawList.uniformMatrix2(a,b,c)},a.prototype.uniformMatrix3=function(a,b,c){this._drawList.uniformMatrix3(a,b,c)},a.prototype.uniformMatrix4=function(a,b,c){this._drawList.uniformMatrix4(a,b,c)},a.prototype.uniformVector1=function(a,b){this._drawList.uniformVector1(a,b)},a.prototype.uniformVector2=function(a,b){this._drawList.uniformVector2(a,b)},a.prototype.uniformVector3=function(a,b){this._drawList.uniformVector3(a,b)},a.prototype.uniformVector4=function(a,b){this._drawList.uniformVector4(a,b)},a}();return i}),b("davinci-eight/core/BufferResource",["require","exports","../checks/expectArg","../utils/refChange","../utils/uuid4"],function(a,b,c,d,e){function f(a){return a}var g="IBuffer",h=function(){function a(a,b){this._refCount=1,this._uuid=e().generate(),this._monitor=c("montor",a).toBeObject().value,this._target=f(b),d(this._uuid,g,1),a.addContextListener(this)}return a.prototype.destructor=function(){this._buffer&&(this._gl.deleteBuffer(this._buffer),this._buffer=void 0),this._gl=void 0,this._monitor.removeContextListener(this),this._monitor=void 0,this._refCount=void 0,this._target=void 0,this._uuid=void 0},a.prototype.addRef=function(){return this._refCount++,d(this._uuid,g,1),this._refCount},a.prototype.release=function(){return this._refCount--,d(this._uuid,g,-1),0===this._refCount?(this.destructor(),0):this._refCount},a.prototype.contextFree=function(){this._buffer&&(this._gl.deleteBuffer(this._buffer),this._buffer=void 0),this._gl=void 0},a.prototype.contextGain=function(a){var b=a.gl;this._gl!==b&&(this.contextFree(),this._gl=b,this._buffer=b.createBuffer())},a.prototype.contextLoss=function(){this._buffer=void 0,this._gl=void 0},a.prototype.bind=function(){this._gl?this._gl.bindBuffer(this._target,this._buffer):console.warn(g+" bind() missing WebGLRenderingContext.")},a.prototype.unbind=function(){this._gl?this._gl.bindBuffer(this._target,null):console.warn(g+" unbind() missing WebGLRenderingContext.")},a}();return h}),b("davinci-eight/renderers/initWebGL",["require","exports"],function(a,b){function c(a,b){var c;try{c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(d){}if(c)return c;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}return c}),b("davinci-eight/checks/mustBeInteger",["require","exports","../checks/mustSatisfy","../checks/isInteger"],function(a,b,c,d){function e(){return"be an integer"}function f(a,b,f){return c(a,d(b),e,f),b}return f}),b("davinci-eight/utils/RefCount",["require","exports","../checks/expectArg"],function(a,b,c){var d=function(){function a(a){this._refCount=1,c("callback",a).toBeFunction(),this._callback=a}return a.prototype.addRef=function(){return this._refCount++,this._refCount},a.prototype.release=function(){if(this._refCount>0){if(this._refCount--,0===this._refCount){var a=this._callback;this._callback=void 0,a()}return this._refCount}console.warn("release() called with refCount already "+this._refCount)},a}();return d}),b("davinci-eight/resources/TextureResource",["require","exports","../checks/expectArg","../utils/refChange","../utils/uuid4"],function(a,b,c,d,e){var f="ITexture",g=(new Array,function(){function a(a,b){this._refCount=1,this._uuid=e().generate();var g=a[0];this._monitor=c("montor",g).toBeObject().value,this._target=b,d(this._uuid,f,1),g.addContextListener(this)}return a.prototype.addRef=function(){return this._refCount++,d(this._uuid,f,1),this._refCount},a.prototype.release=function(){return this._refCount--,d(this._uuid,f,-1),0===this._refCount&&(this._monitor.removeContextListener(this),this.contextFree()),this._refCount},a.prototype.contextFree=function(){this._texture&&(this._gl.deleteTexture(this._texture),this._texture=void 0),this._gl=void 0},a.prototype.contextGain=function(a){var b=a.gl;this._gl!==b&&(this.contextFree(),this._gl=b,this._texture=b.createTexture())},a.prototype.contextLoss=function(){this._texture=void 0,this._gl=void 0},a.prototype.bind=function(){this._gl?this._gl.bindTexture(this._target,this._texture):console.warn(f+" bind() missing WebGLRenderingContext.")},a.prototype.unbind=function(){this._gl?this._gl.bindTexture(this._target,null):console.warn(f+" unbind() missing WebGLRenderingContext.")},a}());return g}),b("davinci-eight/utils/contextProxy",["require","exports","../core/BufferResource","../dfx/DrawElements","../checks/expectArg","../renderers/initWebGL","../checks/isDefined","../checks/isNumber","../checks/mustBeInteger","../utils/RefCount","../utils/refChange","../dfx/Simplex","../utils/StringIUnknownMap","../resources/TextureResource","../utils/uuid4"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){return"webgl functional constructor"}function q(a,b){if(a)return a;throw new Error(b+": gl: WebGLRenderingContext is not defined. Either gl has been lost or start() not called.")}function r(a,b,c){switch(a){case l.K_FOR_TRIANGLE:return c.TRIANGLES;case l.K_FOR_LINE_SEGMENT:return c.LINES;case l.K_FOR_POINT:return c.POINTS;case l.K_FOR_EMPTY:return void 0;default:throw new Error("Unexpected k-simplex dimension, k => "+a)}}function s(a,b){switch(e("usage",a).toBeNumber(),a){case b.STATIC_DRAW:return!0;default:return!1}}function t(a){return e("meshUUID",a).toBeString(),a+" is not a recognized mesh uuid"}function u(a,b){if(b){var c=b[a];return c?c:a}return a}function v(a,b,c){var d=a.attributes;if(d){var e,f=Object.keys(d),g=f.length;for(e=0;g>e;e++){var h=f[e],i=u(h,c),j=b.attributes,k=j.get(i);if(k){var l=k.buffer;l.bind();var m=d[h];m.vertexPointer(k.size,k.normalized,k.stride,k.offset),l.unbind(),m.enable(),l.release(),k.release()}else console.warn("program attribute "+h+" is not satisfied by the mesh");j.release()}}else console.warn("unbindProgramAttribLocations: program.attributes is falsey.")}function w(a){var b=a.attributes;b?Object.keys(b).forEach(function(a){b[a].disable()}):console.warn("unbindProgramAttribLocations: program.attributes is falsey.")}function x(a,b,h){function l(a){e("user",a).toBeObject(),H.push(a),z&&a.contextGain(M)}function u(a){e("user",a).toBeObject();var b=H.indexOf(a);if(b>=0){var c=H.splice(b,1);c.forEach(function(a){})}}function x(a){return function(){G.exists(a)?G.remove(a):console.warn("[System Error] "+t(a))}}function y(a){var b=new j(x(a)),c=void 0,d={addRef:function(){return k(a,A,1),b.addRef()},release:function(){return k(a,A,-1),b.release()},get uuid(){return a},bind:function(b,f){if(c!==b){c&&d.unbind();var g=G.get(a);if(!g)throw new Error(t(a));if(b){c=b,c.addRef();var h=g.indexBuffer;h.bind(),h.release(),v(c,g,f)}else e("program",b).toBeObject();g.release()}},draw:function(){var b=G.get(a);if(!b)throw new Error(t(a));b.drawCommand.execute(z),b.release()},unbind:function(){if(c){var b=G.get(a);if(!b)throw new Error(t(a));var d=b.indexBuffer;d.unbind(),d.release(),w(c),b.release(),c.release(),c=void 0}}};return k(a,A,1),d}void 0===b&&(b=0),e("canvas",a).toSatisfy(a instanceof HTMLCanvasElement,"canvas argument must be an HTMLCanvasElement @ webgl function"),i("canvasId",b,p);var z,F=o().generate(),G=new m,H=[],I=1,J=!1,K=(e("token",""),function(a){a.preventDefault(),z=void 0,H.forEach(function(a){a.contextLoss(b)})}),L=function(b){b.preventDefault(),z=f(a,h),H.forEach(function(a){a.contextGain(M)})},M={get canvasId(){return b},createDrawElementsMesh:function(a,b,c){if(e("elements",a).toSatisfy(a instanceof d,"elements must be an instance of DrawElements"),b=r(a.k,b,z),!g(b))return void 0;g(c)?e("usage",c).toSatisfy(s(c,z),"usage must be on of STATIC_DRAW, ..."):c=z.STATIC_DRAW;var f=y(o().generate()),h=M.createElementArrayBuffer();h.bind(),z.bufferData(z.ELEMENT_ARRAY_BUFFER,new Uint16Array(a.indices.data),c),h.unbind();var i,j=new m,k=Object.keys(a.attributes),l=k.length;for(i=0;l>i;i++){var n=k[i],p=M.createArrayBuffer();p.bind();var q=a.attributes[n],t=q.values.data;z.bufferData(z.ARRAY_BUFFER,new Float32Array(t),c);var u=new E(p,q.size,!1,0,0);j.put(n,u),u.release(),p.unbind(),p.release()}a.k;var v=new C(b,a.indices.length,z.UNSIGNED_SHORT,0),w=new D(h,j,v);return G.put(f.uuid,w),w.release(),j.release(),h.release(),f},start:function(){z=f(a,h),a.addEventListener("webglcontextlost",K,!1),a.addEventListener("webglcontextrestored",L,!1),H.forEach(function(a){a.contextGain(M)})},stop:function(){z=void 0,H.forEach(function(a){a.contextFree(b)}),a.removeEventListener("webglcontextrestored",L,!1),a.removeEventListener("webglcontextlost",K,!1)},addContextListener:function(a){l(a)},removeContextListener:function(a){u(a)},get gl(){return z?z:void console.warn("property gl: WebGLRenderingContext is not defined. Either gl has been lost or start() not called.")},addRef:function(){return I++,k(F,B,1),I},release:function(){if(I--,k(F,B,-1),0===I)for(G.release();H.length>0;){H.pop()}return I},clearColor:function(a,b,c,d){return z?z.clearColor(a,b,c,d):void 0},clearDepth:function(a){return z?z.clearDepth(a):void 0},drawArrays:function(a,b,c){return z?z.drawArrays(a,b,c):void 0},drawElements:function(a,b,c,d){return z?z.drawElements(a,b,c,d):void 0},depthFunc:function(a){return z?z.depthFunc(a):void 0},enable:function(a){return z?z.enable(a):void 0},createArrayBuffer:function(){return new c(M,q(z,"createArrayBuffer()").ARRAY_BUFFER)},createElementArrayBuffer:function(){return new c(M,q(z,"createElementArrayBuffer()").ELEMENT_ARRAY_BUFFER)},createTexture2D:function(){return new n([M],q(z,"createTexture2D()").TEXTURE_2D)},createTextureCubeMap:function(){return new n([M],q(z,"createTextureCubeMap()").TEXTURE_CUBE_MAP)},get mirror(){return J},set mirror(a){J=e("mirror",a).toBeBoolean().value}};return k(F,B,1),M}var y="ElementsBlock",z="ElementsBlockAttrib",A="Mesh",B="ContextKahuna",C=function(){function a(a,b,c,d){this.mode=a,this.count=b,this.type=c,this.offset=d}return a.prototype.execute=function(a){a.drawElements(this.mode,this.count,this.type,this.offset)},a}(),D=function(){function a(a,b,c){this._refCount=1,this._uuid=o().generate(),this._indexBuffer=a,this._indexBuffer.addRef(),this._attributes=b,this._attributes.addRef(),this.drawCommand=c,k(this._uuid,y,1)}return Object.defineProperty(a.prototype,"indexBuffer",{get:function(){return this._indexBuffer.addRef(),this._indexBuffer},enumerable:!0,configurable:!0}),a.prototype.addRef=function(){return this._refCount++,k(this._uuid,y,1),this._refCount},a.prototype.release=function(){return this._refCount--,k(this._uuid,y,-1),0===this._refCount&&(this._attributes.release(),this._attributes=void 0,this._indexBuffer.release(),this._indexBuffer=void 0),this._refCount},Object.defineProperty(a.prototype,"attributes",{get:function(){return this._attributes.addRef(),this._attributes},enumerable:!0,configurable:!0}),a}(),E=function(){function a(a,b,c,d,e){this._refCount=1,this._uuid=o().generate(),this._buffer=a,this._buffer.addRef(),this.size=b,this.normalized=c,this.stride=d,this.offset=e,k(this._uuid,z,1)}return a.prototype.addRef=function(){return k(this._uuid,z,1),this._refCount++,this._refCount},a.prototype.release=function(){return k(this._uuid,z,-1),this._refCount--,0===this._refCount&&this._buffer.release(),this._refCount},Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buffer.addRef(),this._buffer},enumerable:!0,configurable:!0}),a}();return x}),b("davinci-eight/renderers/renderer",["require","exports","../core","../core/Color","../checks/expectArg","../utils/uuid4"],function(a,b,c,d,e,f){var g=function(a,b){function g(a){a.draw(b)}e("canvas",a).toSatisfy(a instanceof HTMLCanvasElement,"canvas argument must be an HTMLCanvasElement");var h=void 0,i=!0,j=d.fromRGB(0,0,0),k=0,l=(f().generate(),{get canvas(){return a},get gl(){return h},contextFree:function(){h=void 0},contextGain:function(b){if(h=b.gl,console.log(c.NAMESPACE+" "+c.VERSION+" ("+c.GITHUB+") "+c.LAST_AUTHORED_DATE),c.LOG_WEBGL_VERSION&&console.log(h.getParameter(h.VERSION)),c.LOG_WEBGL_CONTEXT_ATTRIBUTES){var d=h.getContextAttributes();console.log("alpha                 => "+d.alpha),console.log("antialias             => "+d.antialias),console.log("depth                 => "+d.depth),console.log("premultipliedAlpha    => "+d.premultipliedAlpha),console.log("preserveDrawingBuffer => "+d.preserveDrawingBuffer),console.log("stencil               => "+d.stencil)}h.clearColor(j.r,j.g,j.b,k),h.clearDepth(1),h.enable(h.DEPTH_TEST),h.depthFunc(h.LEQUAL),h.viewport(0,0,a.width,a.height)},contextLoss:function(){h=void 0},get autoClear(){return i},set autoClear(a){i=e("autoClear",a).toBeBoolean().value},clearColor:function(a,b,c,d){j.r=e("red",a).toBeNumber().value,j.g=e("green",b).toBeNumber().value,j.b=e("blue",c).toBeNumber().value,k=e("alpha",d).toBeNumber().value,h&&h.clearColor(a,b,c,d)},render:function(a,b){h?i&&h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT):console.warn("renderer is unable to clear because WebGLRenderingContext is missing"),a.traverse(g)}});return l};return g}),b("davinci-eight/scene/WebGLRenderer",["require","exports","../utils/contextProxy","../renderers/renderer","../checks/mustBeInteger","../checks/mustSatisfy","../utils/refChange","../utils/uuid4"],function(a,b,c,d,e,f,g,h){function i(){return k+" constructor"}function j(){return"be an HTMLCanvasElement"}var k="WebGLRenderer",l=function(){function a(a,b,l){void 0===b&&(b=0),this._refCount=1,this._uuid=h().generate(),a?(f("canvas",a instanceof HTMLCanvasElement,j,i),this._canvas=a):this._canvas=document.createElement("canvas"),this._canvasId=e("canvasId",b,i),this._kahuna=c(this._canvas,b,l),this._renderer=d(this._canvas,b),this._kahuna.addContextListener(this._renderer),g(this._uuid,k,1)}return a.prototype.addContextListener=function(a){this._kahuna.addContextListener(a)},a.prototype.addRef=function(){return this._refCount++,g(this._uuid,k,1),this._refCount},Object.defineProperty(a.prototype,"canvasId",{get:function(){return this._canvasId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gl",{get:function(){return this._kahuna.gl},enumerable:!0,configurable:!0}),a.prototype.createDrawElementsMesh=function(a,b,c){return this._kahuna.createDrawElementsMesh(a,b,c)},Object.defineProperty(a.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),a.prototype.release=function(){return this._refCount--,g(this._uuid,k,-1),0===this._refCount?(this._kahuna.release(),this._canvas=void 0,this._canvasId=void 0,this._kahuna=void 0,this._refCount=void 0,this._renderer=void 0,0):this._refCount},a.prototype.removeContextListener=function(a){this._kahuna.removeContextListener(a)},a.prototype.render=function(a,b){this._renderer.render(a,b)},a.prototype.setClearColor=function(a,b){void 0===b&&(b=1),console.warn("WegGLRenderer.setClearColor(). Making it up as we go along."),this._renderer.clearColor(.2,.2,.2,b)},a.prototype.setSize=function(a,b,c){console.warn("WegGLRenderer.setSize()")},a.prototype.start=function(){this._kahuna.start()},a.prototype.stop=function(){this._kahuna.stop()},a}();return l}),b("davinci-eight/geometries/Geometry",["require","exports"],function(a,b){var c=function(){function a(a,b){this.elements=a,this.metadata=b}return a}();return c}),b("davinci-eight/dfx/Complex",["require","exports","../dfx/checkGeometry","../dfx/Simplex"],function(a,b,c,d){var e=function(){function a(){this.simplices=[],this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1}return a.prototype.mergeVertices=function(a){void 0===a&&(a=4)},a.prototype.boundary=function(a){this.simplices=d.boundary(this.simplices,a),this.check()},a.prototype.subdivide=function(a){this.simplices=d.subdivide(this.simplices,a),this.check()},a.prototype.check=function(){this.metadata=c(this.simplices)},a}();return e}),b("davinci-eight/checks/mustBeNumber",["require","exports","../checks/mustSatisfy","../checks/isNumber"],function(a,b,c,d){function e(){return"be a number"}function f(a,b,f){return c(a,d(b),e,f),b}return f});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/BoxComplex",["require","exports","../dfx/Complex","../checks/mustBeInteger","../checks/mustBeNumber","../dfx/Simplex","../core/Symbolic","../math/Vector1","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h,i,j,k){function l(){return"BoxComplex constructor"}var m=function(a){function b(b,c,f,m,n,o,p){function q(a,b,c,d,e,f,i,l){var p,q,t,u=m,v=n,w=e/2,x=f/2,y=r.length;"x"===a&&"y"===b||"y"===a&&"x"===b?p="z":"x"===a&&"z"===b||"z"===a&&"x"===b?(p="y",v=o):("z"===a&&"y"===b||"y"===a&&"z"===b)&&(p="x",u=o);var z=u+1,A=v+1,B=e/u,C=f/v,D=new k;for(D[p]=i>0?1:-1,t=0;A>t;t++)for(q=0;z>q;q++){var E=new k;E[a]=(q*B-w)*c,E[b]=(t*C-x)*d,E[p]=i,r.push(E)}for(t=0;v>t;t++)for(q=0;u>q;q++){var F=q+z*t,G=q+z*(t+1),H=q+1+z*(t+1),I=q+1+z*t,J=new j([q/u,1-t/v]),K=new j([q/u,1-(t+1)/v]),L=new j([(q+1)/u,1-(t+1)/v]),M=new j([(q+1)/u,1-t/v]),N=new g(g.K_FOR_TRIANGLE);N.vertices[0].attributes[h.ATTRIBUTE_POSITION]=r[F+y],N.vertices[0].attributes[h.ATTRIBUTE_NORMAL]=D,N.vertices[0].attributes[h.ATTRIBUTE_TEXTURE_COORDS]=J,N.vertices[0].attributes[h.ATTRIBUTE_MATERIAL_INDEX]=l,N.vertices[1].attributes[h.ATTRIBUTE_POSITION]=r[G+y],N.vertices[1].attributes[h.ATTRIBUTE_NORMAL]=D,N.vertices[1].attributes[h.ATTRIBUTE_TEXTURE_COORDS]=K,N.vertices[1].attributes[h.ATTRIBUTE_MATERIAL_INDEX]=l,N.vertices[2].attributes[h.ATTRIBUTE_POSITION]=r[I+y],N.vertices[2].attributes[h.ATTRIBUTE_NORMAL]=D,N.vertices[2].attributes[h.ATTRIBUTE_TEXTURE_COORDS]=M,N.vertices[2].attributes[h.ATTRIBUTE_MATERIAL_INDEX]=l,s.simplices.push(N),N=new g(g.K_FOR_TRIANGLE),N.vertices[0].attributes[h.ATTRIBUTE_POSITION]=r[G+y],N.vertices[0].attributes[h.ATTRIBUTE_NORMAL]=D,N.vertices[0].attributes[h.ATTRIBUTE_TEXTURE_COORDS]=K,N.vertices[0].attributes[h.ATTRIBUTE_MATERIAL_INDEX]=l,N.vertices[1].attributes[h.ATTRIBUTE_POSITION]=r[H+y],N.vertices[1].attributes[h.ATTRIBUTE_NORMAL]=D,N.vertices[1].attributes[h.ATTRIBUTE_TEXTURE_COORDS]=L,N.vertices[1].attributes[h.ATTRIBUTE_MATERIAL_INDEX]=l,N.vertices[2].attributes[h.ATTRIBUTE_POSITION]=r[I+y],N.vertices[2].attributes[h.ATTRIBUTE_NORMAL]=D,N.vertices[2].attributes[h.ATTRIBUTE_TEXTURE_COORDS]=M,N.vertices[2].attributes[h.ATTRIBUTE_MATERIAL_INDEX]=l,s.simplices.push(N)}}void 0===b&&(b=1),void 0===c&&(c=1),void 0===f&&(f=1),void 0===m&&(m=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===p&&(p=!1),a.call(this),e("width",b,l),e("height",c,l),e("depth",f,l),d("widthSegments",m,l),d("heightSegments",n,l),d("depthSegments",o,l);var r=[],s=this,t=b/2,u=c/2,v=f/2;q("z","y",-1,-1,f,c,+t,new i([0])),q("z","y",1,-1,f,c,-t,new i([1])),q("x","z",1,1,b,f,+u,new i([2])),q("x","z",1,-1,b,f,-u,new i([3])),q("x","y",1,-1,b,c,+v,new i([4])),q("x","y",-1,-1,b,c,-v,new i([5])),p&&this.boundary(),this.mergeVertices(),this.check()}return f(b,a),b}(c);return m}),b("davinci-eight/programs/shaderProgram",["require","exports","../core/AttribLocation","../scene/MonitorList","../utils/uuid4","../core/UniformLocation","../utils/refChange"],function(a,b,c,d,e,f,g){function h(a,b,c){var d=a.createShader(c);a.shaderSource(d,b),a.compileShader(d);var e=a.getShaderParameter(d,a.COMPILE_STATUS);if(e)return d;if(a.isContextLost())throw new Error("Context lost while compiling shader");var f=a.getShaderInfoLog(d);throw a.deleteShader(d),new Error("Error compiling shader: "+f)}function i(a,b,c,d){var e=h(a,b,a.VERTEX_SHADER),f=h(a,c,a.FRAGMENT_SHADER),g=a.createProgram();a.attachShader(g,e),a.attachShader(g,f);for(var i=0;i<d.length;++i)a.bindAttribLocation(g,i,d[i]);a.linkProgram(g);var j=a.getProgramParameter(g,a.LINK_STATUS);if(j||a.isContextLost())return g;var k=a.getProgramInfoLog(g);throw a.detachShader(g,e),a.deleteShader(e),a.detachShader(g,f),a.deleteShader(f),a.deleteProgram(g),new Error("Error linking program: "+k)}var j="IProgram",k=function(a,b,h,k){if(d.verify("monitors",a,function(){return"shaderProgram"}),"string"!=typeof b)throw new Error("vertexShader argument must be a string.");if("string"!=typeof h)throw new Error("fragmentShader argument must be a string.");var l=1,m={},n={},o=e().generate(),p={},q={},r={get vertexShader(){return b},get fragmentShader(){return h},get attributes(){return p},get uniforms(){return q},addRef:function(){return g(o,j,1),l++,l},release:function(){if(g(o,j,-1),l--,0===l){d.removeContextListener(r,a);for(var b=Object.keys(n).map(function(a){return parseInt(a)}),c=b.length,e=0;c>e;e++){var f=b[e];r.contextFree(f)}}return l},contextFree:function(a){var b=n[a];if(b){var c=m[a];c&&(b.deleteProgram(c),m[a]=void 0),n[a]=void 0;for(var d in p)p[d].contextFree();for(var e in q)q[e].contextFree()}},contextGain:function(a){var d=a.canvasId;if(n[d]!==a.gl){r.contextFree(d),n[d]=a.gl;var e=a.gl,g=i(e,b,h,k);m[a.canvasId]=g;for(var j=e.getProgramParameter(g,e.ACTIVE_ATTRIBUTES),l=0;j>l;l++){var o=e.getActiveAttrib(g,l),s=o.name;p[s]||(p[s]=new c(a,s))}for(var t=e.getProgramParameter(g,e.ACTIVE_UNIFORMS),u=0;t>u;u++){var v=e.getActiveUniform(g,u),w=v.name;q[w]||(q[w]=new f(a,w))}for(var x in p)p[x].contextGain(e,g);for(var y in q)q[y].contextGain(e,g)}},contextLoss:function(a){m[a]=void 0,n[a]=void 0;for(var b in p)p[b].contextLoss();for(var c in q)q[c].contextLoss()},get programId(){return o},use:function(a){var b=n[a];if(b){var c=m[a];b.useProgram(c)}else console.warn(j+" use(canvasId: number) missing WebGLRenderingContext")},enableAttrib:function(a){var b=p[a];b&&b.enable()},disableAttrib:function(a){var b=p[a];b&&b.disable()},uniform1f:function(a,b){var c=q[a];c&&c.uniform1f(b)},uniform2f:function(a,b,c){var d=q[a];d&&d.uniform2f(b,c)},uniform3f:function(a,b,c,d){var e=q[a];e&&e.uniform3f(b,c,d)},uniform4f:function(a,b,c,d,e){var f=q[a];f&&f.uniform4f(b,c,d,e)},uniformMatrix1:function(a,b,c){var d=q[a];d&&d.matrix1(b,c)},uniformMatrix2:function(a,b,c){var d=q[a];d&&d.matrix2(b,c)},uniformMatrix3:function(a,b,c){var d=q[a];d&&d.matrix3(b,c)},uniformMatrix4:function(a,b,c){var d=q[a];d&&d.matrix4(b,c)},uniformVector1:function(a,b){var c=q[a];c&&c.vector1(b)},uniformVector2:function(a,b){var c=q[a];c&&c.vector2(b)},uniformVector3:function(a,b){var c=q[a];c&&c.vector3(b)},uniformVector4:function(a,b){var c=q[a];c&&c.vector4(b)}};return d.addContextListener(r,a),g(o,j,1),r};return k}),b("davinci-eight/programs/fragmentShader",["require","exports"],function(a,b){function c(a,b,c,d){var e=[];c&&e.push("varying highp vec4 vColor;"),d&&e.push("varying highp vec3 vLight;"),e.push("void main(void) {");d?c?e.push("  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);"):e.push("  gl_FragColor = vec4(vLight, 1.0);"):c?e.push("  gl_FragColor = vColor;"):e.push("  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),e.push("}");var f=e.join("\n");return f}return c}),b("davinci-eight/core/getAttribVarName",["require","exports","../checks/isDefined","../checks/expectArg"],function(a,b,c,d){function e(a,b){return d("attribute",a).toBeObject(),d("varName",b).toBeString(),c(a.name)?d("attribute.name",a.name).toBeString().value:b}return e}),b("davinci-eight/core/getUniformVarName",["require","exports","../checks/isDefined","../checks/expectArg"],function(a,b,c,d){function e(a,b){return d("uniform",a).toBeObject(),d("varName",b).toBeString(),c(a.name)?d("uniform.name",a.name).toBeString().value:b}return e}),b("davinci-eight/programs/vertexShader",["require","exports","../core/getAttribVarName","../core/getUniformVarName","../core/Symbolic"],function(a,b,c,d,e){function f(a,b){return d(a[b],b)}function g(a,b,d,g){var r=[];for(var s in a)r.push(i+a[s].glslType+h+c(a[s],s)+l);for(var t in b)r.push(j+b[t].glslType+h+f(b,t)+l);d&&r.push("varying highp vec4 vColor;"),g&&r.push("varying highp vec3 vLight;"),r.push("void main(void) {");var u=[];if(u.unshift(l),a[e.ATTRIBUTE_POSITION]?(u.unshift(n),u.unshift("1.0"),u.unshift(k),u.unshift(c(a[e.ATTRIBUTE_POSITION],e.ATTRIBUTE_POSITION)),u.unshift(m),u.unshift("vec4")):u.unshift("vec4(0.0, 0.0, 0.0, 1.0)"),b[e.UNIFORM_MODEL_MATRIX]&&(u.unshift(o),u.unshift(f(b,e.UNIFORM_MODEL_MATRIX))),b[e.UNIFORM_VIEW_MATRIX]&&(u.unshift(o),u.unshift(f(b,e.UNIFORM_VIEW_MATRIX))),b[e.UNIFORM_PROJECTION_MATRIX]&&(u.unshift(o),u.unshift(f(b,e.UNIFORM_PROJECTION_MATRIX))),u.unshift(p),u.unshift("gl_Position"),u.unshift("  "),r.push(u.join("")),a[e.ATTRIBUTE_COLOR]){var v=c(a[e.ATTRIBUTE_COLOR],e.ATTRIBUTE_COLOR);switch(a[e.ATTRIBUTE_COLOR].glslType){case"vec4":r.push("  vColor = "+v+l);break;case"vec3":r.push("  vColor = vec4("+v+", 1.0);");break;default:throw new Error("Unexpected type for color attribute: "+a[e.ATTRIBUTE_COLOR].glslType)}}else if(b[e.UNIFORM_COLOR]){var w=f(b,e.UNIFORM_COLOR);switch(b[e.UNIFORM_COLOR].glslType){case"vec4":r.push("  vColor = "+w+l);break;case"vec3":r.push("  vColor = vec4("+w+", 1.0);");break;default:throw new Error("Unexpected type for color uniform: "+b[e.UNIFORM_COLOR].glslType)}}g&&(b[e.UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&b[e.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION]&&b[e.UNIFORM_NORMAL_MATRIX]&&a[e.ATTRIBUTE_NORMAL]?(r.push("  vec3 L = normalize("+f(b,e.UNIFORM_DIRECTIONAL_LIGHT_DIRECTION)+");"),r.push("  vec3 N = normalize("+f(b,e.UNIFORM_NORMAL_MATRIX)+" * "+c(a[e.ATTRIBUTE_NORMAL],e.ATTRIBUTE_NORMAL)+");"),r.push("  float "+q+" = max(dot(N, L), 0.0);"),b[e.UNIFORM_AMBIENT_LIGHT]?r.push("  vLight = "+f(b,e.UNIFORM_AMBIENT_LIGHT)+" + "+q+" * "+f(b,e.UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";"):r.push("  vLight = "+q+" * "+f(b,e.UNIFORM_DIRECTIONAL_LIGHT_COLOR)+";")):b[e.UNIFORM_AMBIENT_LIGHT]?r.push("  vLight = "+f(b,e.UNIFORM_AMBIENT_LIGHT)+";"):r.push("  vLight = vec3(1.0, 1.0, 1.0);")),r.push("}");var x=r.join("\n");return x}var h=" ",i="attribute"+h,j="uniform"+h,k=","+h,l=";",m="(",n=")",o=h+"*"+h,p=h+"="+h,q="directionalLightCosineFactor";return g}),b("davinci-eight/programs/smartProgram",["require","exports","../scene/MonitorList","../programs/fragmentShader","./shaderProgram","../core/Symbolic","../programs/vertexShader"],function(a,b,c,d,e,f,g){function h(a){return!!a[f.UNIFORM_AMBIENT_LIGHT]||!!a[f.UNIFORM_DIRECTIONAL_LIGHT_COLOR]&&!!a[f.UNIFORM_DIRECTIONAL_LIGHT_COLOR]}function i(a,b){return!!a[f.ATTRIBUTE_COLOR]||!!b[f.UNIFORM_COLOR]}var j=function(a,b,f,j){if(c.verify("monitors",a,function(){return"smartProgram"}),!b)throw new Error("The attributes parameter is required for smartProgram.");if(!f)throw new Error("The uniformsList parameter is required for smartProgram.");var k=i(b,f),l=h(f),m=e(a,g(b,f,k,l),d(b,f,k,l),j),n={get programId(){return m.programId},get attributes(){return m.attributes},get uniforms(){return m.uniforms},get vertexShader(){return m.vertexShader},get fragmentShader(){return m.fragmentShader},addRef:function(){return m.addRef()},release:function(){return m.release()},contextFree:function(a){return m.contextFree(a)},contextGain:function(a){return m.contextGain(a)},contextLoss:function(a){return m.contextLoss(a)},use:function(a){return m.use(a)},enableAttrib:function(a){return m.enableAttrib(a)},disableAttrib:function(a){return m.disableAttrib(a)},uniform1f:function(a,b){return m.uniform1f(a,b)},uniform2f:function(a,b,c){return m.uniform2f(a,b,c)},uniform3f:function(a,b,c,d){return m.uniform3f(a,b,c,d)},uniform4f:function(a,b,c,d,e){return m.uniform4f(a,b,c,d,e)},uniformMatrix1:function(a,b,c){return m.uniformMatrix1(a,b,c)},uniformMatrix2:function(a,b,c){return m.uniformMatrix2(a,b,c)},uniformMatrix3:function(a,b,c){return m.uniformMatrix3(a,b,c)},uniformMatrix4:function(a,b,c){return m.uniformMatrix4(a,b,c)},uniformVector1:function(a,b){return m.uniformVector1(a,b)},uniformVector2:function(a,b){return m.uniformVector2(a,b)},uniformVector3:function(a,b){return m.uniformVector3(a,b)},uniformVector4:function(a,b){return m.uniformVector4(a,b)}};return n};return j}),b("davinci-eight/programs/programFromScripts",["require","exports","../programs/shaderProgram","../checks/expectArg","../scene/MonitorList"],function(a,b,c,d,e){function f(a,b,f,g,h){function i(a){d("id",a).toBeString();var b=g.getElementById(a);if(b)return b;throw new Error(a+" is not a valid DOM element identifier.")}void 0===h&&(h=[]),e.verify("monitors",a,function(){return"programFromScripts"}),d("vsId",b).toBeString(),d("fsId",f).toBeString(),d("$document",g).toBeObject();var j=i(b).textContent,k=i(f).textContent;return c(a,j,k,h)}return f}),b("davinci-eight/checks/isString",["require","exports"],function(a,b){function c(a){return"string"==typeof a}return c}),b("davinci-eight/checks/mustBeString",["require","exports","../checks/mustSatisfy","../checks/isString"],function(a,b,c,d){function e(){return"be a string"}function f(a,b,f){return c(a,d(b),e,f),b}return f}),b("davinci-eight/materials/Material",["require","exports","../core","../scene/MonitorList","../checks/mustBeInteger","../checks/mustBeString","../utils/refChange","../utils/uuid4"],function(a,b,c,d,e,f,g,h){function i(a,b,c){console.warn(a+" dropped uniform"+b+" "+c)}var j=function(){function a(a,b){this.readyPending=!1,this.programId=h().generate(),this._refCount=1,d.verify("contexts",a),f("type",b),this._monitors=d.copy(a),this.type=b,g(this.programId,this.type,this._refCount)}return a.prototype.makeReady=function(a){this.readyPending||(this.readyPending=!0,this._monitors.addContextListener(this))},Object.defineProperty(a.prototype,"monitors",{
get:function(){return this._monitors.toArray()},enumerable:!0,configurable:!0}),a.prototype.addRef=function(){return this._refCount++,g(this.programId,this.type,1),this._refCount},a.prototype.release=function(){return this._refCount--,g(this.programId,this.type,-1),0===this._refCount&&(this._monitors.removeContextListener(this),this.inner&&(this.inner.release(),this.inner=void 0)),this._refCount},a.prototype.use=function(a){if(c.ASSERTIVE&&e("canvasid",a),this.inner)return this.inner.use(a);var b=!1;return this.makeReady(b),this.inner?this.inner.use(a):void console.warn(this.type+" use()")},Object.defineProperty(a.prototype,"attributes",{get:function(){if(this.inner)return this.inner.attributes;var a=!1;return this.makeReady(a),this.inner?this.inner.attributes:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"uniforms",{get:function(){if(this.inner)return this.inner.uniforms;var a=!1;return this.makeReady(a),this.inner?this.inner.uniforms:void 0},enumerable:!0,configurable:!0}),a.prototype.enableAttrib=function(a){if(this.inner)return this.inner.enableAttrib(a);var b=!1;return this.makeReady(b),this.inner?this.inner.enableAttrib(a):void console.warn(this.type+" enableAttrib()")},a.prototype.disableAttrib=function(a){if(this.inner)return this.inner.disableAttrib(a);var b=!1;return this.makeReady(b),this.inner?this.inner.disableAttrib(a):void console.warn(this.type+" disableAttrib()")},a.prototype.contextFree=function(a){this.inner&&this.inner.contextFree(a)},a.prototype.contextGain=function(a){this.inner=this.createProgram()},a.prototype.contextLoss=function(a){this.inner&&this.inner.contextLoss(a)},a.prototype.createProgram=function(){return void console.warn("Material createProgram method is virtual and should be implemented by "+this.type)},a.prototype.uniform1f=function(a,b){if(this.inner)this.inner.uniform1f(a,b);else{var c=!1,d=this.readyPending;this.makeReady(c),this.inner?this.inner.uniform1f(a,b):d||i(this.type,"1f",a)}},a.prototype.uniform2f=function(a,b,c){if(this.inner)this.inner.uniform2f(a,b,c);else{var d=!1,e=this.readyPending;this.makeReady(d),this.inner?this.inner.uniform2f(a,b,c):e||i(this.type,"2f",a)}},a.prototype.uniform3f=function(a,b,c,d){if(this.inner)this.inner.uniform3f(a,b,c,d);else{var e=!1,f=this.readyPending;this.makeReady(e),this.inner?this.inner.uniform3f(a,b,c,d):f||i(this.type,"3f",a)}},a.prototype.uniform4f=function(a,b,c,d,e){if(this.inner)this.inner.uniform4f(a,b,c,d,e);else{var f=!1,g=this.readyPending;this.makeReady(f),this.inner?this.inner.uniform4f(a,b,c,d,e):g||i(this.type,"4f",a)}},a.prototype.uniformMatrix1=function(a,b,c){if(this.inner)this.inner.uniformMatrix1(a,b,c);else{var d=!1,e=this.readyPending;this.makeReady(d),this.inner?this.inner.uniformMatrix1(a,b,c):e||i(this.type,"Matrix1",a)}},a.prototype.uniformMatrix2=function(a,b,c){if(this.inner)this.inner.uniformMatrix2(a,b,c);else{var d=!1,e=this.readyPending;this.makeReady(d),this.inner?this.inner.uniformMatrix2(a,b,c):e||i(this.type,"Matrix2",a)}},a.prototype.uniformMatrix3=function(a,b,c){if(this.inner)this.inner.uniformMatrix3(a,b,c);else{var d=!1,e=this.readyPending;this.makeReady(d),this.inner?this.inner.uniformMatrix3(a,b,c):e||i(this.type,"Matrix3",a)}},a.prototype.uniformMatrix4=function(a,b,c){if(this.inner)this.inner.uniformMatrix4(a,b,c);else{var d=!1,e=this.readyPending;this.makeReady(d),this.inner?this.inner.uniformMatrix4(a,b,c):e||i(this.type,"Matrix4",a)}},a.prototype.uniformVector1=function(a,b){if(this.inner)this.inner.uniformVector1(a,b);else{var c=!1,d=this.readyPending;this.makeReady(c),this.inner?this.inner.uniformVector1(a,b):d||i(this.type,"Vector1",a)}},a.prototype.uniformVector2=function(a,b){if(this.inner)this.inner.uniformVector2(a,b);else{var c=!1,d=this.readyPending;this.makeReady(c),this.inner?this.inner.uniformVector2(a,b):d||i(this.type,"Vector2",a)}},a.prototype.uniformVector3=function(a,b){if(this.inner)this.inner.uniformVector3(a,b);else{var c=!1,d=this.readyPending;this.makeReady(c),this.inner?this.inner.uniformVector3(a,b):d||i(this.type,"Vector3",a)}},a.prototype.uniformVector4=function(a,b){if(this.inner)this.inner.uniformVector4(a,b);else{var c=!1,d=this.readyPending;this.makeReady(c),this.inner?this.inner.uniformVector4(a,b):d||i(this.type,"Vector4",a)}},a}();return j});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/materials/HTMLScriptsMaterial",["require","exports","../materials/Material","../checks/mustSatisfy","../programs/programFromScripts"],function(a,b,c,d,e){var g="HTMLScriptsMaterial",h=function(a){function b(b,c,e){void 0===c&&(c=[]),void 0===e&&(e=document),a.call(this,b,g),this.attributeBindings=[],d("scriptIds",2===c.length,function(){return"scriptIds must be [vsId, fsId]"}),this.scriptIds=c.map(function(a){return a}),this.dom=e}return f(b,a),b.prototype.createProgram=function(){var a=this.scriptIds[0],b=this.scriptIds[1];return e(this.monitors,a,b,this.dom,this.attributeBindings)},b}(c);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/materials/MeshNormalMaterial",["require","exports","../materials/Material"],function(a,b,c){var d="MeshNormalMaterial",e=function(a){function b(b){a.call(this,b,d)}return f(b,a),b.prototype.contextGain=function(a){console.warn(d+" contextGain method TODO")},b}(c);return e});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Matrix3",["require","exports","../math/AbstractMatrix"],function(a,b,c){var d=function(a){function b(b){a.call(this,b,9)}return f(b,a),b.identity=function(){return new b(new Float32Array([1,0,0,0,1,0,0,0,1]))},b.prototype.determinant=function(){return 1},b.prototype.getInverse=function(a,b){var c=a.data,d=this.data;d[0]=c[10]*c[5]-c[6]*c[9],d[1]=-c[10]*c[1]+c[2]*c[9],d[2]=c[6]*c[1]-c[2]*c[5],d[3]=-c[10]*c[4]+c[6]*c[8],d[4]=c[10]*c[0]-c[2]*c[8],d[5]=-c[6]*c[0]+c[2]*c[4],d[6]=c[9]*c[4]-c[5]*c[8],d[7]=-c[9]*c[0]+c[1]*c[8],d[8]=c[5]*c[0]-c[1]*c[4];var e=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===e){var f="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(b||!b)throw new Error(f);return console.warn(f),this.identity(),this}return this.multiplyScalar(1/e),this},b.prototype.identity=function(){return this.set(1,0,0,0,1,0,0,0,1)},b.prototype.multiply=function(a){return this.product(this,a)},b.prototype.multiplyScalar=function(a){var b=this.data;return b[0]*=a,b[3]*=a,b[6]*=a,b[1]*=a,b[4]*=a,b[7]*=a,b[2]*=a,b[5]*=a,b[8]*=a,this},b.prototype.product=function(a,b){return this},b.prototype.normalFromMatrix4=function(a){this.getInverse(a).transpose()},b.prototype.set=function(a,b,c,d,e,f,g,h,i){var j=this.data;return j[0]=a,j[3]=b,j[6]=c,j[1]=d,j[4]=e,j[7]=f,j[2]=g,j[5]=h,j[8]=i,this},b.prototype.transpose=function(){var a,b=this.data;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},b}(c);return d}),b("davinci-eight/math/Quaternion",["require","exports","../math/Vector3"],function(a,b,c){var d=1e-6,e=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=1),this.onChangeCallback=function(){},this._x=a,this._y=b,this._z=c,this._w=d}return Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a,this.onChangeCallback()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a,this.onChangeCallback()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"z",{get:function(){return this._z},set:function(a){this._z=a,this.onChangeCallback()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"w",{get:function(){return this._w},set:function(a){this._w=a,this.onChangeCallback()},enumerable:!0,configurable:!0}),a.prototype.add=function(a){return this},a.prototype.sum=function(a,b){return this},a.prototype.set=function(a,b,c,d){return this._x=a,this._y=b,this._z=c,this._w=d,this.onChangeCallback(),this},a.prototype.clone=function(){return new a(this._x,this._y,this._z,this._w)},a.prototype.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},a.prototype.copy=function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},a.prototype.divideScalar=function(a){return this},a.prototype.dot=function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},a.prototype.exp=function(){return this},a.prototype.inverse=function(){return this.conjugate().normalize(),this},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},a.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},a.prototype.multiply=function(a){return this.product(this,a)},a.prototype.product=function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,i=b._z,j=b._w;return this._x=c*j+f*g+d*i-e*h,this._y=d*j+f*h+e*g-c*i,this._z=e*j+f*i+c*h-d*g,this._w=f*j-c*g-d*h-e*i,this.onChangeCallback(),this},a.prototype.multiplyScalar=function(a){return this},a.prototype.normalize=function(){var a=this.magnitude();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},a.prototype.onChange=function(a){return this.onChangeCallback=a,this},a.prototype.quaditude=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},a.prototype.rotate=function(a){return this.product(a,this)},a.prototype.setFromAxisAngle=function(a,b){var c=b/2,d=Math.sin(c);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(c),this.onChangeCallback(),this},a.prototype.setFromRotationMatrix=function(a){var b,c=a.data,d=c[0],e=c[4],f=c[8],g=c[1],h=c[5],i=c[9],j=c[2],k=c[6],l=c[10],m=d+h+l;return m>0?(b=.5/Math.sqrt(m+1),this._w=.25/b,this._x=(k-i)*b,this._y=(f-j)*b,this._z=(g-e)*b):d>h&&d>l?(b=2*Math.sqrt(1+d-h-l),this._w=(k-i)/b,this._x=.25*b,this._y=(e+g)/b,this._z=(f+j)/b):h>l?(b=2*Math.sqrt(1+h-d-l),this._w=(f-j)/b,this._x=(e+g)/b,this._y=.25*b,this._z=(i+k)/b):(b=2*Math.sqrt(1+l-d-h),this._w=(g-e)/b,this._x=(f+j)/b,this._y=(i+k)/b,this._z=.25*b),this.onChangeCallback(),this},a.prototype.setFromUnitVectors=function(a,b){var e=new c,f=a.dot(b)+1;return d>f?(f=0,Math.abs(a.x)>Math.abs(a.z)?e.set(-a.y,a.x,0):e.set(0,-a.z,a.y)):e.crossVectors(a,b),this._x=e.x,this._y=e.y,this._z=e.z,this._w=f,this.normalize(),this},a.prototype.slerp=function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;if(0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a),g>=1)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(g),i=Math.sqrt(1-g*g);if(Math.abs(i)<.001)return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var j=Math.sin((1-b)*h)/i,k=Math.sin(b*h)/i;return this._w=f*j+this._w*k,this._x=c*j+this._x*k,this._y=d*j+this._y*k,this._z=e*j+this._z*k,this.onChangeCallback(),this},a.prototype.sub=function(a){return this},a.prototype.difference=function(a,b){return this},a.prototype.equals=function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},a.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this._x=a[b],this._y=a[b+1],this._z=a[b+2],this._w=a[b+3],this.onChangeCallback(),this},a.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this._x,a[b+1]=this._y,a[b+2]=this._z,a[b+3]=this._w,a},a.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)},a}();return e}),b("davinci-eight/math/rotor3",["require","exports","../math/VectorN","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a,b,c,d,e,f){function g(){var a=new c([0,0,0,1],!1,4),b={get modified(){return a.modified},set modified(b){a.modified=b},get yz(){return a.getComponent(h)},set yz(b){a.setComponent(h,b)},get zx(){return a.getComponent(i)},set zx(b){a.setComponent(i,b)},get xy(){return a.getComponent(j)},set xy(b){a.setComponent(j,b)},get w(){return a.getComponent(k)},set w(b){a.setComponent(k,b)},copy:function(a){return b.w=a.w,b.yz=a.yz,b.zx=a.zx,b.xy=a.xy,b},exp:function(){var a=this.w,b=this.yz,c=this.zx,d=this.xy,e=Math.exp(a),f=Math.sqrt(b*b+c*c+d*d),g=e*(0!==f?Math.sin(f)/f:1);return this.w=e*Math.cos(f),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},multiply:function(a){return b.product(b,a)},multiplyScalar:function(a){return b.w*=a,b.yz*=a,b.zx*=a,b.xy*=a,b},product:function(a,c){var d=a.w,e=a.yz,f=a.zx,g=a.xy,h=c.w,i=c.yz,j=c.zx,k=c.xy,l=d*h-e*i-f*j-g*k,m=d*i+e*h-f*k+g*j,n=d*j+e*k+f*h-g*i,o=d*k-e*j+f*i+g*h,p=Math.sqrt(l*l+m*m+n*n+o*o);return b.w=l/p,b.yz=m/p,b.zx=n/p,b.xy=o/p,b},reverse:function(){return b.yz*=-1,b.zx*=-1,b.xy*=-1,b},toString:function(){return["Rotor3 => ",JSON.stringify({yz:b.yz,zx:b.zx,xy:b.xy,w:b.w})].join("")},wedgeVectors:function(a,b){var c=a.x,g=a.y,h=a.z,i=b.x,j=b.y,k=b.z;return this.w=0,this.yz=e(c,g,h,i,j,k),this.zx=f(c,g,h,i,j,k),this.xy=d(c,g,h,i,j,k),this}};return b}var h=0,i=1,j=2,k=3;return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Spinor3",["require","exports","../math/VectorN","../math/wedgeXY","../math/wedgeYZ","../math/wedgeZX"],function(a,b,c,d,e,g){var h=function(a){function b(b,c){void 0===b&&(b=[0,0,0,1]),void 0===c&&(c=!1),a.call(this,b,c,4)}return f(b,a),Object.defineProperty(b.prototype,"yz",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.yz!==a,this.data[0]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"zx",{get:function(){return this.data[1]},set:function(a){this.modified=this.modified||this.zx!==a,this.data[1]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"xy",{get:function(){return this.data[2]},set:function(a){this.modified=this.modified||this.xy!==a,this.data[2]=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"w",{get:function(){return this.data[3]},set:function(a){this.modified=this.modified||this.w!==a,this.data[3]=a},enumerable:!0,configurable:!0}),b.prototype.add=function(a){return this},b.prototype.sum=function(a,b){return this},b.prototype.clone=function(){return new b([this.yz,this.zx,this.xy,this.w])},b.prototype.copy=function(a){return this.yz=a.yz,this.zx=a.zx,this.xy=a.xy,this.w=a.w,this},b.prototype.divideScalar=function(a){return this.yz/=a,this.zx/=a,this.xy/=a,this.w/=a,this},b.prototype.exp=function(){var a=this.w,b=this.yz,c=this.zx,d=this.xy,e=Math.exp(a),f=Math.sqrt(b*b+c*c+d*d),g=e*(0!==f?Math.sin(f)/f:1);return this.w=e*Math.cos(f),this.yz=b*g,this.zx=c*g,this.xy=d*g,this},b.prototype.lerp=function(a,b){return this.xy+=(a.xy-this.xy)*b,this.yz+=(a.yz-this.yz)*b,this.zx+=(a.zx-this.zx)*b,this.w+=(a.w-this.w)*b,this},b.prototype.magnitude=function(){return Math.sqrt(this.quaditude())},b.prototype.multiply=function(a){return this.product(this,a)},b.prototype.product=function(a,b){var c=a.w,d=a.yz,e=a.zx,f=a.xy,g=b.w,h=b.yz,i=b.zx,j=b.xy;return this.w=c*g-d*h-e*i-f*j,this.yz=c*h+d*g-e*j+f*i,this.zx=c*i+d*j+e*g-f*h,this.xy=c*j-d*i+e*h+f*g,this},b.prototype.multiplyScalar=function(a){return this.yz*=a,this.zx*=a,this.xy*=a,this.w*=a,this},b.prototype.quaditude=function(){var a=this.w,b=this.yz,c=this.zx,d=this.xy;return a*a+b*b+c*c+d*d},b.prototype.reverse=function(){return this.yz*=-1,this.zx*=-1,this.xy*=-1,this},b.prototype.rotate=function(a){return this},b.prototype.sub=function(a){return this},b.prototype.difference=function(a,b){return this},b.prototype.wedgeVectors=function(a,b){var c=a.x,f=a.y,h=a.z,i=b.x,j=b.y,k=b.z;return this.w=0,this.yz=e(c,f,h,i,j,k),this.zx=g(c,f,h,i,j,k),this.xy=d(c,f,h,i,j,k),this},b.prototype.toString=function(){return"Spinor3({yz: "+this.yz+", zx: "+this.zx+", xy: "+this.xy+", w: "+this.w+"})"},b}(c);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/math/Vector4",["require","exports","../math/VectorN"],function(a,b,c){var d=function(a){function b(b,c){void 0===b&&(b=[0,0,0,0]),void 0===c&&(c=!1),a.call(this,b,c,4)}return f(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this.data[0]},set:function(a){this.modified=this.modified||this.x!==a,this.data[0]=a},enumerable:!0,configurable:!0}),b.prototype.setX=function(a){return this.x=a,this},Object.defineProperty(b.prototype,"y",{get:function(){return this.data[1]},set:function(a){this.modified=this.modified||this.y!==a,this.data[1]=a},enumerable:!0,configurable:!0}),b.prototype.setY=function(a){return this.y=a,this},Object.defineProperty(b.prototype,"z",{get:function(){return this.data[2]},set:function(a){this.modified=this.modified||this.z!==a,this.data[2]=a},enumerable:!0,configurable:!0}),b.prototype.setZ=function(a){return this.z=a,this},Object.defineProperty(b.prototype,"w",{get:function(){return this.data[3]},set:function(a){this.modified=this.modified||this.w!==a,this.data[3]=a},enumerable:!0,configurable:!0}),b.prototype.setW=function(a){return this.w=a,this},b.prototype.add=function(a){return this},b.prototype.sum=function(a,b){return this},b.prototype.clone=function(){return new b([this.x,this.y,this.z,this.w])},b.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},b.prototype.divideScalar=function(a){return this.x/=a,this.y/=a,this.z/=a,this.w/=a,this},b.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this.w+=(a.w-this.w)*b,this},b.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},b.prototype.rotate=function(a){return this},b.prototype.sub=function(a){return this},b.prototype.difference=function(a,b){return this},b}(c);return d}),b("davinci-eight/mesh/ArrowBuilder",["require","exports","../checks/expectArg","../checks/isUndefined","../math/Vector3","../core/Symbolic"],function(a,b,c,d,e,f){var g=function(){function a(a){this.$axis=e.e3.clone(),a=a||{modelMatrix:f.UNIFORM_MODEL_MATRIX},this.setFlavor(d(a.flavor)?0:a.flavor),this.setWireFrame(d(a.wireFrame)?!1:a.wireFrame)}return Object.defineProperty(a.prototype,"axis",{get:function(){return this.$axis},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"flavor",{get:function(){return this.$flavor},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depth",{get:function(){return this.$depth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"widthSegments",{get:function(){return this.$widthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightSegments",{get:function(){return this.$heightSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"depthSegments",{get:function(){return this.$depthSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"coneHeight",{get:function(){return this.$coneHeight},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wireFrame",{get:function(){return this.$wireFrame},enumerable:!0,configurable:!0}),a.prototype.setAxis=function(a){return c("axis",a).toBeObject(),this.$axis.copy(a),this},a.prototype.setFlavor=function(a){return c("flavor",a).toBeNumber().toSatisfy(a>=0,"flavor must be greater than or equal to zero."),this.$flavor=a,this},a.prototype.setHeight=function(a){return c("height",a).toBeNumber().toSatisfy(a>=0,"height must be greater than or equal to zero."),this.$height=a,this},a.prototype.setDepth=function(a){return c("depth",a).toBeNumber().toSatisfy(a>=0,"depth must be greater than or equal to zero."),this.$depth=a,this},a.prototype.setWidthSegments=function(a){return c("widthSegments",a).toBeNumber().toSatisfy(a>0,"widthSegments must be greater than zero."),this.$widthSegments=a,this},a.prototype.setHeightSegments=function(a){return c("heightSegments",a).toBeNumber().toSatisfy(a>0,"heightSegments must be greater than zero."),this.$heightSegments=a,this},a.prototype.setDepthSegments=function(a){return c("depthSegments",a).toBeNumber().toSatisfy(a>0,"depthSegments must be greater than zero."),this.$depthSegments=a,this},a.prototype.setConeHeight=function(a){return c("coneHeight",a).toBeNumber().toSatisfy(a>=0,"coneHeight must be positive."),this.$coneHeight=a,this},a.prototype.setWireFrame=function(a){return c("wireFrame",a).toBeBoolean(),this.$wireFrame=a,this},a}();return g}),b("davinci-eight/mesh/CylinderArgs",["require","exports","../checks/expectArg","../checks/isUndefined","../math/Vector3","../core/Symbolic"],function(a,b,c,d,e,f){var g=function(){function a(a){this.$axis=e.e3.clone(),a=a||{modelMatrix:f.UNIFORM_MODEL_MATRIX},this.setRadiusTop(d(a.radiusTop)?1:a.radiusTop),this.setRadiusBottom(d(a.radiusBottom)?1:a.radiusBottom),this.setHeight(d(a.height)?1:a.height),this.setRadialSegments(d(a.radialSegments)?16:a.radialSegments),this.setHeightSegments(d(a.heightSegments)?1:a.heightSegments),this.setOpenEnded(d(a.openEnded)?!1:a.openEnded),this.setThetaStart(d(a.thetaStart)?0:a.thetaStart),this.setThetaLength(d(a.thetaLength)?2*Math.PI:a.thetaLength),this.setWireFrame(d(a.wireFrame)?!1:a.wireFrame)}return Object.defineProperty(a.prototype,"radiusTop",{get:function(){return this.$radiusTop},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radiusBottom",{get:function(){return this.$radiusBottom},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.$height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radialSegments",{get:function(){return this.$radialSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightSegments",{get:function(){return this.$heightSegments},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openEnded",{get:function(){return this.$openEnded},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"thetaStart",{get:function(){return this.$thetaStart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"thetaLength",{get:function(){return this.$thetaLength},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wireFrame",{get:function(){return this.$wireFrame},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"axis",{get:function(){return this.$axis},enumerable:!0,configurable:!0}),a.prototype.setRadiusTop=function(a){return c("radiusTop",a).toBeNumber().toSatisfy(a>=0,"radiusTop must be greater than or equal to zero."),this.$radiusTop=a,this},a.prototype.setRadiusBottom=function(a){return c("radiusBottom",a).toBeNumber().toSatisfy(a>=0,"radiusBottom must be greater than or equal to zero."),this.$radiusBottom=a,this},a.prototype.setHeight=function(a){return c("height",a).toBeNumber().toSatisfy(a>=0,"height must be greater than or equal to zero."),this.$height=a,this},a.prototype.setRadialSegments=function(a){return c("radialSegments",a).toBeNumber(),this.$radialSegments=a,this},a.prototype.setHeightSegments=function(a){return c("heightSegments",a).toBeNumber(),this.$heightSegments=a,this},a.prototype.setOpenEnded=function(a){return c("openEnded",a).toBeBoolean(),this.$openEnded=a,this},a.prototype.setThetaStart=function(a){return c("thetaStart",a).toBeNumber(),this.$thetaStart=a,this},a.prototype.setThetaLength=function(a){return c("thetaLength",a).toBeNumber(),this.$thetaLength=a,this},a.prototype.setWireFrame=function(a){return c("wireFrame",a).toBeBoolean(),this.$wireFrame=a,this},a.prototype.setAxis=function(a){return c("axis",a).toBeObject(),this.$axis.copy(a),this},a}();return g}),b("davinci-eight/utils/Model",["require","exports","../math/Matrix3","../math/Matrix4","../math/rotor3","../core/Symbolic","../math/Vector3"],function(a,b,c,d,e,f,g){var h=function(){function a(){this.position=new g,this.attitude=e(),this.scale=new g([1,1,1]),this.color=new g([1,1,1]),this.M=d.identity(),this.N=c.identity(),this.R=d.identity(),this.S=d.identity(),this.T=d.identity(),this.position.modified=!0,this.attitude.modified=!0,this.scale.modified=!0,this.color.modified=!0}return a.prototype.accept=function(a){this.position.modified&&(this.T.translation(this.position),this.position.modified=!1),this.attitude.modified&&(this.R.rotation(this.attitude),this.attitude.modified=!1),this.scale.modified&&(this.S.scaling(this.scale),this.scale.modified=!1),this.M.copy(this.T).multiply(this.R).multiply(this.S),this.N.normalFromMatrix4(this.M),a.uniformMatrix4(f.UNIFORM_MODEL_MATRIX,!1,this.M),a.uniformMatrix3(f.UNIFORM_NORMAL_MATRIX,!1,this.N),a.uniformVector3(f.UNIFORM_COLOR,this.color)},a}();return h}),b("davinci-eight/utils/workbench3D",["require","exports"],function(a,b){function c(a,b){for(var c=a.getElementsByTagName(b),d=c.length-1;d>=0;d--){var e=c[d];e.parentNode.removeChild(e)}}var d="resize",e="canvas",f=function(a,b,f,g){function h(){var a=g.innerWidth,c=g.innerHeight;b.setSize(a,c),f.aspect=a/c}void 0===g&&(g=window);var i=g.document,j=function(a){h()},k={setUp:function(){i.body.insertBefore(a,i.body.firstChild),g.addEventListener(d,j,!1),h()},tearDown:function(){g.removeEventListener(d,j,!1),c(i,e)}};return k};return f}),b("davinci-eight/utils/windowAnimationRunner",["require","exports","../checks/expectArg"],function(a,b,c){function d(){}function e(a){if(a){var b="Exception raised during animate function: "+a;console.warn(b)}}function f(a){return!1}var g=function(a,b){var g=1,h=2,i=3;b=b||{};var j,k,l=c("options.window",b.window||window).toNotBeNull().value,m=c("options.setUp",b.setUp||d).value,n=c("options.tearDown",b.tearDown||e).value,o=c("options.terminate",b.terminate||f).toNotBeNull().value,p=!1,q=0,r=1e3,s=null,t=g,u=function(b){if(j&&(q=q+b-j),j=b,p||o(q/r)){p=!1,l.cancelAnimationFrame(s),w.isRunning?(t=i,j=void 0):console.error("stopSignal received while not running."),l.document.removeEventListener("keydown",v,!1);try{n(k)}catch(c){console.warn("Exception raised during tearDown function: "+c)}}else{s=l.requestAnimationFrame(u);try{a(q/r)}catch(c){k=c,p=!0}}},v=function(a){27===a.keyCode&&(p=!0,a.preventDefault())},w={start:function(){if(w.isRunning)throw new Error("The `start` method may only be called when not running.");m(),l.document.addEventListener("keydown",v,!1),t=h,s=l.requestAnimationFrame(u)},stop:function(){if(!w.isRunning)throw new Error("The `stop` method may only be called when running.");p=!0},reset:function(){if(!w.isPaused)throw new Error("The `reset` method may only be called when paused.");j=void 0,q=0,t=g},get time(){return q/r},lap:function(){if(!w.isRunning)throw new Error("The `lap` method may only be called when running.")},get isRunning(){return t===h},get isPaused(){return t===i}};return w};return g}),b("davinci-eight",["require","exports","davinci-eight/cameras/createFrustum","davinci-eight/cameras/createPerspective","davinci-eight/cameras/createView","davinci-eight/cameras/frustumMatrix","davinci-eight/cameras/perspectiveMatrix","davinci-eight/cameras/viewMatrix","davinci-eight/core/AttribLocation","davinci-eight/core/Color","davinci-eight/core","davinci-eight/core/DrawMode","davinci-eight/core/Face3","davinci-eight/core/Symbolic","davinci-eight/core/UniformLocation","davinci-eight/curves/Curve","davinci-eight/dfx/DrawAttribute","davinci-eight/dfx/DrawElements","davinci-eight/dfx/Simplex","davinci-eight/dfx/Vertex","davinci-eight/dfx/checkGeometry","davinci-eight/dfx/computeFaceNormals","davinci-eight/dfx/cube","davinci-eight/dfx/quadrilateral","davinci-eight/dfx/square","davinci-eight/dfx/tetrahedron","davinci-eight/dfx/toDrawElements","davinci-eight/dfx/triangle","davinci-eight/scene/createDrawList","davinci-eight/scene/Mesh","davinci-eight/scene/PerspectiveCamera","davinci-eight/scene/Scene","davinci-eight/scene/WebGLRenderer","davinci-eight/geometries/Geometry","davinci-eight/geometries/BoxComplex","davinci-eight/programs/shaderProgram","davinci-eight/programs/smartProgram","davinci-eight/programs/programFromScripts","davinci-eight/materials/Material","davinci-eight/materials/HTMLScriptsMaterial","davinci-eight/materials/MeshNormalMaterial","davinci-eight/math/Matrix3","davinci-eight/math/Matrix4","davinci-eight/math/Quaternion","davinci-eight/math/rotor3","davinci-eight/math/Spinor3","davinci-eight/math/Vector1","davinci-eight/math/Vector2","davinci-eight/math/Vector3","davinci-eight/math/Vector4","davinci-eight/math/VectorN","davinci-eight/mesh/ArrowBuilder","davinci-eight/mesh/CylinderArgs","davinci-eight/renderers/initWebGL","davinci-eight/renderers/renderer","davinci-eight/utils/contextProxy","davinci-eight/utils/Model","davinci-eight/utils/refChange","davinci-eight/utils/workbench3D","davinci-eight/utils/windowAnimationRunner"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa){var ga={get LAST_AUTHORED_DATE(){return k.LAST_AUTHORED_DATE},get VERSION(){return k.VERSION},get HTMLScriptsMaterial(){return N},get Material(){return M},get MeshNormalMaterial(){return O},get initWebGL(){return _},get createFrustum(){return c},get createPerspective(){return d},get createView(){return e},get Model(){return ca},get Simplex(){return s},get Vertex(){return t},get frustumMatrix(){return f},get perspectiveMatrix(){return g},get viewMatrix(){return h},get Scene(){return F},get Mesh(){return D},get PerspectiveCamera(){return E},get WebGLRenderer(){return G},get createDrawList(){return C},get renderer(){return aa},get webgl(){return ba},workbench:ea,animation:fa,get DrawMode(){return l},get AttribLocation(){return i},get UniformLocation(){return o},get shaderProgram(){return J},get smartProgram(){return K},get Color(){return j},get Face3(){return m},get Geometry(){return H},get BoxComplex(){return I},get Matrix3(){return P},get Matrix4(){return Q},get rotor3(){return S},get Spinor3(){return T},get Quaternion(){return R},get Vector1(){return U},get Vector2(){return V},get Vector3(){return W},get Vector4(){return X},get VectorN(){return Y},get Curve(){return p},get ArrowBuilder(){return Z},get checkGeometry(){return u},get computeFaceNormals(){return v},get cube(){return w},get quadrilateral(){return x},get square(){return y},get tetrahedron(){return z},get triangle(){return B},get toDrawElements(){return A},get CylinderArgs(){return $},get Symbolic(){return n},get programFromScripts(){return L},get DrawAttribute(){return q},get DrawElements(){return r},get refChange(){return da}};return ga});var g=d("davinci-eight");"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.EIGHT=g}(this);