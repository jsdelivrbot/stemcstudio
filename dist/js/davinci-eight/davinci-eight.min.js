!function(a,b){var c,d,b,e=a.define;!function(a){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(b,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(a,d.concat([b,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(b){if(e(r,b)){var c=r[b];delete r[b],t[b]=!0,m.apply(a,c)}if(!e(q,b)&&!e(t,b))throw new Error("No "+b);return q[b]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(b,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||b,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(b);else if("exports"===k)u[n]=p.exports(b),s=!0;else if("module"===k)h=u[n]=p.module(b);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(b+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[b],u):void 0,b&&(h&&h.exports!==a&&h.exports!==q[b]?q[b]=h.exports:l===a&&s||(q[b]=l))}else b&&(q[b]=d)},c=d=n=function(b,c,d,e,f){if("string"==typeof b)return p[b]?p[b](c):j(o(b,c).f);if(!b.splice){if(s=b,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(a,b,c,d):setTimeout(function(){m(a,b,c,d)},4),n},n.config=function(a){return n(a)},c._defined=q,b=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},b.amd={jQuery:!0}}(),b("../vendor/almond/almond",function(){}),b("davinci-eight/core",["require","exports"],function(){var a={VERSION:"2.14.0"};return a}),b("davinci-blade/NotImplementedError",["require","exports"],function(){function a(a){this.name="NotImplementedError",this.message=a||""}return a.prototype=new Error,a}),b("davinci-blade/Rational",["require","exports","davinci-blade/Unit"],function(a,b,c){function d(a){this.name="RationalError",this.message=a||""}function e(a,b){if("number"==typeof b)return b;throw new d("Argument '"+a+"' must be a number")}function f(a,b){if(b instanceof g)return b;throw new d("Argument '"+b+"' must be a Rational")}d.prototype=new Error;var g=function(){function a(a,b){e("n",a),e("d",b);var c,d=function(a,b){e("a",a),e("b",b);var c;for(0>a&&(a=-a),0>b&&(b=-b),b>a&&(c=a,a=b,b=c);;){if(a%=b,0===a)return b;if(b%=a,0===b)return a}};if(0===b)throw new Error("denominator must not be zero");c=0===a?1:d(Math.abs(a),Math.abs(b)),0>b&&(a=-a,b=-b),this._numer=a/c,this._denom=b/c}return Object.defineProperty(a.prototype,"numer",{get:function(){return this._numer},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"denom",{get:function(){return this._denom},enumerable:!0,configurable:!0}),a.prototype.add=function(b){return f("rhs",b),new a(this._numer*b._denom+this._denom*b._numer,this._denom*b._denom)},a.prototype.sub=function(b){return f("rhs",b),new a(this._numer*b._denom-this._denom*b._numer,this._denom*b._denom)},a.prototype.mul=function(b){return f("rhs",b),new a(this._numer*b._numer,this._denom*b._denom)},a.prototype.div=function(b){return"number"==typeof b?new a(this._numer,this._denom*b):new a(this._numer*b._denom,this._denom*b._numer)},a.prototype.isZero=function(){return 0===this._numer},a.prototype.negative=function(){return new a(-this._numer,this._denom)},a.prototype.equals=function(b){return b instanceof a?this._numer*b._denom===this._denom*b._numer:!1},a.prototype.toString=function(){return""+this._numer+"/"+this._denom},a.ONE=new a(1,1),a.TWO=new a(2,1),a.MINUS_ONE=new a(-1,1),a.ZERO=new a(0,1),a}();return g}),b("davinci-blade/Dimensions",["require","exports","davinci-blade/Rational"],function(a,b,c){function d(a){this.name="DimensionError",this.message=a||""}d.prototype=new Error;var e=function(){function a(a,b,d,e,f,g,h){this.L=b,this.T=d,this.Q=e,this.temperature=f,this.amount=g,this.intensity=h;var i=b,j=d,k=e;if(7!==arguments.length)throw{name:"DimensionError",message:"Expecting 7 arguments"};if("number"==typeof a)this._mass=new c(a,1);else{if(!(a instanceof c))throw{name:"DimensionError",message:"mass must be a Rational or number"};this._mass=a}if("number"==typeof i)this.L=new c(i,1);else{if(!(i instanceof c))throw{name:"DimensionError",message:"length must be a Rational or number"};this.L=i}if("number"==typeof j)this.T=new c(j,1);else{if(!(j instanceof c))throw{name:"DimensionError",message:"time must be a Rational or number"};this.T=j}if("number"==typeof k)this.Q=new c(k,1);else{if(!(k instanceof c))throw{name:"DimensionError",message:"charge must be a Rational or number"};this.Q=k}if("number"==typeof f)this.temperature=new c(f,1);else{if(!(f instanceof c))throw{name:"DimensionError",message:"(thermodynamic) temperature must be a Rational or number"};this.temperature=f}if("number"==typeof g)this.amount=new c(g,1);else{if(!(g instanceof c))throw{name:"DimensionError",message:"amount (of substance) must be a Rational or number"};this.amount=g}if("number"==typeof h)this.intensity=new c(h,1);else{if(!(h instanceof c))throw{name:"DimensionError",message:"(luminous) intensity must be a Rational or number"};this.intensity=h}}return Object.defineProperty(a.prototype,"M",{get:function(){return this._mass},enumerable:!0,configurable:!0}),a.prototype.compatible=function(a){if(this._mass.equals(a._mass)&&this.L.equals(a.L)&&this.T.equals(a.T)&&this.Q.equals(a.Q)&&this.temperature.equals(a.temperature)&&this.amount.equals(a.amount)&&this.intensity.equals(a.intensity))return this;throw new d("Dimensions must be equal ("+this+", "+a+")")},a.prototype.mul=function(b){return new a(this._mass.add(b._mass),this.L.add(b.L),this.T.add(b.T),this.Q.add(b.Q),this.temperature.add(b.temperature),this.amount.add(b.amount),this.intensity.add(b.intensity))},a.prototype.div=function(b){return new a(this._mass.sub(b._mass),this.L.sub(b.L),this.T.sub(b.T),this.Q.sub(b.Q),this.temperature.sub(b.temperature),this.amount.sub(b.amount),this.intensity.sub(b.intensity))},a.prototype.pow=function(b){return new a(this._mass.mul(b),this.L.mul(b),this.T.mul(b),this.Q.mul(b),this.temperature.mul(b),this.amount.mul(b),this.intensity.mul(b))},a.prototype.sqrt=function(){return new a(this._mass.div(c.TWO),this.L.div(c.TWO),this.T.div(c.TWO),this.Q.div(c.TWO),this.temperature.div(c.TWO),this.amount.div(c.TWO),this.intensity.div(c.TWO))},a.prototype.dimensionless=function(){return this._mass.isZero()&&this.L.isZero()&&this.T.isZero()&&this.Q.isZero()&&this.temperature.isZero()&&this.amount.isZero()&&this.intensity.isZero()},a.prototype.isZero=function(){return this._mass.isZero()&&this.L.isZero()&&this.T.isZero()&&this.Q.isZero()&&this.temperature.isZero()&&this.amount.isZero()&&this.intensity.isZero()},a.prototype.negative=function(){return new a(this._mass.negative(),this.L.negative(),this.T.negative(),this.Q.negative(),this.temperature.negative(),this.amount.negative(),this.intensity.negative())},a.prototype.toString=function(){var a=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a};return[a(this._mass,"mass"),a(this.L,"length"),a(this.T,"time"),a(this.Q,"charge"),a(this.temperature,"thermodynamic temperature"),a(this.amount,"amount of substance"),a(this.intensity,"luminous intensity")].filter(function(a){return"string"==typeof a}).join(" * ")},a}();return e}),b("davinci-blade/Unit",["require","exports","davinci-blade/Dimensions","davinci-blade/Rational"],function(a,b,c,d){function e(a){this.name="UnitError",this.message=a||""}function f(a,b){if("number"==typeof b)return b;throw new e("Argument '"+a+"' must be a number")}function g(a,b){if(b instanceof c)return b;throw new e("Argument '"+b+"' must be a Dimensions")}function h(a,b){if(b instanceof d)return b;throw new e("Argument '"+b+"' must be a Rational")}function i(a,b){if(b instanceof r)return b;throw new e("Argument '"+b+"' must be a Unit")}function j(a,b){return"undefined"==typeof b?b:i(a,b)}function k(a,b){return new r(a.scale+b.scale,a.dimensions.compatible(b.dimensions),a.labels)}function l(a,b){return new r(a.scale-b.scale,a.dimensions.compatible(b.dimensions),a.labels)}function m(a,b){return new r(a.scale*b.scale,a.dimensions.mul(b.dimensions),a.labels)}function n(a,b){return new r(a*b.scale,b.dimensions,b.labels)}function o(a,b){return new r(a.scale/b.scale,a.dimensions.div(b.dimensions),a.labels)}e.prototype=new Error;var p=function(a,b,c){f("scale",a),g("dimensions",b);var d,e,h,i=function(a,b){return 0===a.numer?null:1===a.denom?1===a.numer?""+b:""+b+" ** "+a.numer:""+b+" ** "+a};return d=1===a||b.isZero()?"":" ",e=1===a?"":""+a,h=[i(b.M,c[0]),i(b.L,c[1]),i(b.T,c[2]),i(b.Q,c[3]),i(b.temperature,c[4]),i(b.amount,c[5]),i(b.intensity,c[6])].filter(function(a){return"string"==typeof a}).join(" "),""+e+d+h},q=function(a,b,c){for(var d=[[-1,1,-3,1,2,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,1,1,2,1,0,1,0,1,0,1],[-1,1,-2,1,2,1,2,1,0,1,0,1,0,1],[-1,1,3,1,-2,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,0,1,0,1,0,1,0,1],[0,1,0,1,-1,1,1,1,0,1,0,1,0,1],[0,1,1,1,-2,1,0,1,0,1,0,1,0,1],[0,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,-1,1,-1,1,0,1,0,1,0,1,0,1],[1,1,0,1,-3,1,0,1,0,1,0,1,0,1],[1,1,0,1,-2,1,0,1,0,1,0,1,0,1],[1,1,0,1,-1,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-3,1,0,1,-1,1,0,1,0,1],[1,1,1,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,1,1,-2,1,0,1,0,1,0,1,0,1],[1,1,1,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[0,1,2,1,-2,1,0,1,-1,1,0,1,0,1],[1,1,2,1,-2,1,0,1,-1,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,-1,1,0,1],[1,1,2,1,-2,1,0,1,0,1,0,1,0,1],[1,1,2,1,-1,1,0,1,0,1,0,1,0,1],[1,1,2,1,-3,1,0,1,0,1,0,1,0,1],[1,1,2,1,-2,1,-1,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-2,1,0,1,0,1,0,1],[1,1,2,1,0,1,-2,1,0,1,0,1,0,1],[1,1,2,1,-1,1,-1,1,0,1,0,1,0,1]],e=[["F/m"],["S"],["F"],["N·m ** 2/kg ** 2"],["Hz"],["A"],["m/s ** 2"],["m/s"],["kg·m/s"],["Pa"],["Pa·s"],["W/m ** 2"],["N/m"],["T"],["W/(m·K)"],["V/m"],["N"],["H/m"],["J/K"],["J/(kg·K)"],["J/(mol·K)"],["J/mol"],["J"],["J·s"],["W"],["V"],["Ω"],["H"],["Wb"]],f=b.M,g=b.L,h=b.T,i=b.Q,j=b.temperature,k=b.amount,l=b.intensity,m=0,n=d.length;n>m;m++){var o=d[m];if(f.numer===o[0]&&f.denom===o[1]&&g.numer===o[2]&&g.denom===o[3]&&h.numer===o[4]&&h.denom===o[5]&&i.numer===o[6]&&i.denom===o[7]&&j.numer===o[8]&&j.denom===o[9]&&k.numer===o[10]&&k.denom===o[11]&&l.numer===o[12]&&l.denom===o[13])return 1!==a?a+" * "+e[m][0]:e[m][0]}return p(a,b,c)},r=function(){function a(a,b,c){if(this.scale=a,this.dimensions=b,this.labels=c,7!==c.length)throw new Error("Expecting 7 elements in the labels array.");this.scale=a,this.dimensions=b,this.labels=c}return a.prototype.compatible=function(b){if(b instanceof a)return this.dimensions.compatible(b.dimensions),this;throw new Error("Illegal Argument for Unit.compatible: "+b)},a.prototype.add=function(a){return i("rhs",a),k(this,a)},a.prototype.__add__=function(b){return b instanceof a?k(this,b):void 0},a.prototype.__radd__=function(b){return b instanceof a?k(b,this):void 0},a.prototype.sub=function(a){return i("rhs",a),l(this,a)},a.prototype.__sub__=function(b){return b instanceof a?l(this,b):void 0},a.prototype.__rsub__=function(b){return b instanceof a?l(b,this):void 0},a.prototype.mul=function(a){return i("rhs",a),m(this,a)},a.prototype.__mul__=function(b){return b instanceof a?m(this,b):"number"==typeof b?n(b,this):void 0},a.prototype.__rmul__=function(b){return b instanceof a?m(b,this):"number"==typeof b?n(b,this):void 0},a.prototype.div=function(a){return i("rhs",a),o(this,a)},a.prototype.__div__=function(b){return b instanceof a?o(this,b):"number"==typeof b?new a(this.scale/b,this.dimensions,this.labels):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?o(b,this):"number"==typeof b?new a(b/this.scale,this.dimensions.negative(),this.labels):void 0},a.prototype.pow=function(b){return h("exponent",b),new a(Math.pow(this.scale,b.numer/b.denom),this.dimensions.pow(b),this.labels)},a.prototype.inverse=function(){return new a(1/this.scale,this.dimensions.negative(),this.labels)},a.prototype.isUnity=function(){return this.dimensions.dimensionless()&&1===this.scale},a.prototype.norm=function(){return new a(Math.abs(this.scale),this.dimensions,this.labels)},a.prototype.quad=function(){return new a(this.scale*this.scale,this.dimensions.mul(this.dimensions),this.labels)},a.prototype.toString=function(){return q(this.scale,this.dimensions,this.labels)},a.isUnity=function(b){if("undefined"==typeof b)return!0;if(b instanceof a)return b.isUnity();throw new Error("isUnity argument must be a Unit or undefined.")},a.assertDimensionless=function(b){if(!a.isUnity(b))throw new e("uom must be dimensionless.")},a.compatible=function(a,b){if(j("lhs",a),j("rhs",b),a){if(b)return a.compatible(b);if(a.isUnity())return void 0;throw new e(a+" is incompatible with 1")}if(b){if(b.isUnity())return void 0;throw new e("1 is incompatible with "+b)}return void 0},a.mul=function(b,c){return b instanceof a?c instanceof a?b.mul(c):a.isUnity(c)?b:void 0:a.isUnity(b)?c:void 0},a.div=function(b,c){return b instanceof a?c instanceof a?b.div(c):b:c instanceof a?c.inverse():void 0},a.sqrt=function(b){return"undefined"!=typeof b?(i("uom",b),b.isUnity()?void 0:new a(Math.sqrt(b.scale),b.dimensions.sqrt(),b.labels)):void 0},a}();return r}),b("davinci-blade/Euclidean3",["require","exports","davinci-blade/NotImplementedError","davinci-blade/Unit"],function(a,b,c,d){function e(a){this.name="Euclidean3Error",this.message=a||""}function f(a,b){if("number"==typeof b)return b;throw new e("Argument '"+a+"' must be a number")}function g(a,b){if(b instanceof s)return b;throw new e("Argument '"+b+"' must be a Euclidean3")}function h(a,b){if("undefined"==typeof b||b instanceof d)return b;throw new e("Argument '"+b+"' must be a Unit or undefined")}function i(a,b,c,d,e,f){var g=d(b,0),h=d(b,1),i=d(b,2),j=d(b,3),k=d(b,4),l=d(b,5),m=d(b,6),n=d(b,7),o=d(c,0),p=d(c,1),q=d(c,2),r=d(c,3),s=d(c,4),t=d(c,5),u=d(c,6),v=d(c,7),w=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,0),x=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,1),y=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,2),z=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,3),A=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,4),B=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,5),C=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,6),D=a(g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,7);return e(w,x,y,z,A,B,C,D,f)}function j(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a+j);break;case 1:s=+(b+k);break;case 2:s=+(c+l);break;case 3:s=+(d+m);break;case 4:s=+(f+n);break;case 5:s=+(g+o);break;case 6:s=+(h+p);break;case 7:s=+(i+q);break;default:throw new e("index must be in the range [0..7]")}return+s}function k(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a-j);break;case 1:s=+(b-k);break;case 2:s=+(c-l);break;case 3:s=+(d-m);break;case 4:s=+(f-n);break;case 5:s=+(g-o);break;case 6:s=+(h-p);break;case 7:s=+(i-q);break;default:throw new e("index must be in the range [0..7]")}return+s}function l(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a*j+b*k+c*l+d*m-f*n-g*o-h*p-i*q);break;case 1:s=+(a*k+b*j-c*n+d*p+f*l-g*q-h*m-i*o);break;case 2:s=+(a*l+b*n+c*j-d*o-f*k+g*m-h*q-i*p);break;case 3:s=+(a*m-b*p+c*o+d*j-f*q-g*l+h*k-i*n);break;case 4:s=+(a*n+b*l-c*k+d*q+f*j-g*p+h*o+i*m);break;case 5:s=+(a*o+b*q+c*m-d*l+f*p+g*j-h*n+i*k);break;case 6:s=+(a*p-b*m+c*q+d*k-f*o+g*n+h*j+i*l);break;case 7:s=+(a*q+b*o+c*p+d*n+f*m+g*k+h*l+i*j);break;default:throw new e("index must be in the range [0..7]")}return+s}function m(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a*j+b*k+c*l+d*m-f*n-g*o-h*p-i*q);break;case 1:s=0;break;case 2:s=0;break;case 3:s=0;break;case 4:s=0;break;case 5:s=0;break;case 6:s=0;break;case 7:s=0;break;default:throw new e("index must be in the range [0..7]")}return+s}function n(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a*j);break;case 1:s=+(a*k+b*j);break;case 2:s=+(a*l+c*j);break;case 3:s=+(a*m+d*j);break;case 4:s=+(a*n+b*l-c*k+f*j);break;case 5:s=+(a*o+c*m-d*l+g*j);break;case 6:s=+(a*p-b*m+d*k+h*j);break;case 7:s=+(a*q+b*o+c*p+d*n+f*m+g*k+h*l+i*j);break;default:throw new e("index must be in the range [0..7]")}return+s}function o(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a*j+b*k+c*l+d*m-f*n-g*o-h*p-i*q);break;case 1:s=+(a*k-c*n+d*p-g*q);break;case 2:s=+(a*l+b*n-d*o-h*q);break;case 3:s=+(a*m-b*p+c*o-f*q);break;case 4:s=+(a*n+d*q);break;case 5:s=+(a*o+b*q);break;case 6:s=+(a*p+c*q);break;case 7:s=+(a*q);break;default:throw new e("index must be in the range [0..7]")}return+s}function p(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r){a=+a,b=+b,c=+c,d=+d,f=+f,g=+g,h=+h,i=+i,j=+j,k=+k,l=+l,m=+m,n=+n,o=+o,p=+p,q=+q,r=0|r;var s=0;switch(~~r){case 0:s=+(a*j+b*k+c*l+d*m-f*n-g*o-h*p-i*q);break;case 1:s=+(+b*j+f*l-h*m-i*o);break;case 2:s=+(+c*j-f*k+g*m-i*p);break;case 3:s=+(+d*j-g*l+h*k-i*n);break;case 4:s=+(+f*j+i*m);break;case 5:s=+(+g*j+i*k);break;case 6:s=+(+h*j+i*l);break;case 7:s=+(+i*j);break;default:throw new e("index must be in the range [0..7]")}return+s}function q(a,b,c){var d,e,f,g,h=[],i=function(a,c){var d;0!==a&&(a>=0?h.length>0&&h.push("+"):h.push("-"),d=Math.abs(a),1===d?h.push(c):(h.push(b(d)),"1"!==c&&(h.push("*"),h.push(c))))};for(d=e=0,f=a.length-1;f>=0?f>=e:e>=f;d=f>=0?++e:--e)i(a[d],c[d]);return g=h.length>0?h.join(""):"0"}e.prototype=new Error;var r=function(a,b,c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,t){var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa;return T=+i,U=+j,V=+k,W=-m,X=+n,Y=-o,Z=-p,$=-q,L=l(i,j,k,n,m,p,-o,q,T,U,V,X,W,Z,-Y,$,0),M=l(i,j,k,n,m,p,-o,q,T,U,V,X,W,Z,-Y,$,1),N=l(i,j,k,n,m,p,-o,q,T,U,V,X,W,Z,-Y,$,2),O=0,P=l(i,j,k,n,m,p,-o,q,T,U,V,X,W,Z,-Y,$,3),Q=0,R=0,S=0,u=+L,v=-M,w=-N,x=-O,y=-P,z=-Q,A=-R,B=+S,_=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,0),aa=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,1),ba=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,2),ca=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,4),da=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,3),ea=-l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,6),fa=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,5),ga=l(T,U,V,X,W,Z,-Y,$,u,v,w,y,x,A,-z,B,7),K=l(i,j,k,n,m,p,-o,q,_,aa,ba,da,ca,fa,-ea,ga,0),C=_/K,D=aa/K,E=ba/K,F=ca/K,G=da/K,H=ea/K,I=fa/K,J=ga/K,ja=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,0),ka=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,1),la=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,2),ma=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,4),na=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,3),oa=-l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,6),pa=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,5),qa=l(a,b,c,e,d,g,-f,h,C,D,E,G,F,I,-H,J,7),ha=ja,ia=ka,ta=la,va=na,ra=ma,ua=pa,wa=-oa,sa=qa,"undefined"==typeof t?new s(ha,ia,ta,va,ra,ua,wa,sa,r):(t.w=ha,t.x=ia,t.y=ta,t.z=va,t.xy=ra,t.yz=ua,t.zx=wa,t.xyz=sa,t.uom=r,void 0)},s=function(){function a(a,b,c,e,g,i,j,k,l){if(this.w=f("w",a),this.x=f("x",b),this.y=f("y",c),this.z=f("z",e),this.xy=f("xy",g),this.yz=f("yz",i),this.zx=f("zx",j),this.xyz=f("xyz",k),this.uom=h("uom",l),this.uom&&1!==this.uom.scale){var m=this.uom.scale;this.w*=m,this.x*=m,this.y*=m,this.z*=m,this.xy*=m,this.yz*=m,this.zx*=m,this.xyz*=m,this.uom=new d(1,l.dimensions,l.labels)}}return a.fromCartesian=function(b,c,d,e,g,i,j,k,l){return f("w",b),f("x",c),f("y",d),f("z",e),f("xy",g),f("yz",i),f("zx",j),f("xyz",k),h("uom",l),new a(b,c,d,e,g,i,j,k,l)},a.prototype.coordinates=function(){return[this.w,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.xyz]},a.prototype.coordinate=function(a){switch(f("index",a),a){case 0:return this.w;case 1:return this.x;case 2:return this.y;case 3:return this.z;case 4:return this.xy;case 5:return this.yz;case 6:return this.zx;case 7:return this.xyz;default:throw new e("index must be in the range [0..7]")}},a.prototype.add=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(j,this.coordinates(),b.coordinates(),c,e,d.compatible(this.uom,b.uom))},a.prototype.__add__=function(b){return b instanceof a?this.add(b):"number"==typeof b?this.add(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__radd__=function(b){return b instanceof a?b.add(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).add(this):void 0},a.prototype.sub=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(k,this.coordinates(),b.coordinates(),c,e,d.compatible(this.uom,b.uom))},a.prototype.__sub__=function(b){return b instanceof a?this.sub(b):"number"==typeof b?this.sub(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rsub__=function(b){return b instanceof a?b.sub(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).sub(this):void 0},a.prototype.mul=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(l,this.coordinates(),b.coordinates(),c,e,d.mul(this.uom,b.uom))},a.prototype.__mul__=function(b){return b instanceof a?this.mul(b):"number"==typeof b?this.mul(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rmul__=function(b){return b instanceof a?b.mul(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).mul(this):void 0},a.prototype.scalarMultiply=function(b){return new a(this.w*b,this.x*b,this.y*b,this.z*b,this.xy*b,this.yz*b,this.zx*b,this.xyz*b,this.uom)},a.prototype.div=function(a){return g("rhs",a),r(this.w,this.x,this.y,this.xy,this.z,-this.zx,this.yz,this.xyz,a.w,a.x,a.y,a.xy,a.z,-a.zx,a.yz,a.xyz,d.div(this.uom,a.uom))},a.prototype.__div__=function(b){return b instanceof a?this.div(b):"number"==typeof b?this.div(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rdiv__=function(b){return b instanceof a?b.div(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).div(this):void 0},a.prototype.splat=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(m,this.coordinates(),b.coordinates(),c,e,d.mul(this.uom,b.uom))},a.prototype.wedge=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(n,this.coordinates(),b.coordinates(),c,e,d.mul(this.uom,b.uom))},a.prototype.__vbar__=function(b){return b instanceof a?this.splat(b):"number"==typeof b?this.splat(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rvbar__=function(b){return b instanceof a?b.splat(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).splat(this):void 0},a.prototype.__wedge__=function(b){return b instanceof a?this.wedge(b):"number"==typeof b?this.wedge(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rwedge__=function(b){return b instanceof a?b.wedge(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).wedge(this):void 0},a.prototype.lshift=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(o,this.coordinates(),b.coordinates(),c,e,d.mul(this.uom,b.uom))},a.prototype.__lshift__=function(b){return b instanceof a?this.lshift(b):"number"==typeof b?this.lshift(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rlshift__=function(b){return b instanceof a?b.lshift(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).lshift(this):void 0},a.prototype.rshift=function(b){var c=function(a,b){return a[b]},e=function(b,c,d,e,f,g,h,i,j){return a.fromCartesian(b,c,d,e,f,g,h,i,j)};return i(p,[this.w,this.x,this.y,this.z,this.xy,this.yz,this.zx,this.xyz],[b.w,b.x,b.y,b.z,b.xy,b.yz,b.zx,b.xyz],c,e,d.mul(this.uom,b.uom))},a.prototype.__rshift__=function(b){return b instanceof a?this.rshift(b):"number"==typeof b?this.rshift(new a(b,0,0,0,0,0,0,0,void 0)):void 0},a.prototype.__rrshift__=function(b){return b instanceof a?b.rshift(this):"number"==typeof b?new a(b,0,0,0,0,0,0,0,void 0).rshift(this):void 0},a.prototype.pow=function(){throw new e("pow")},a.prototype.__pos__=function(){return this},a.prototype.__neg__=function(){return new a(-this.w,-this.x,-this.y,-this.z,-this.xy,-this.yz,-this.zx,-this.xyz,this.uom)},a.prototype.__tilde__=function(){return new a(this.w,this.x,this.y,this.z,-this.xy,-this.yz,-this.zx,-this.xyz,this.uom)},a.prototype.grade=function(b){switch(f("index",b),b){case 0:return a.fromCartesian(this.w,0,0,0,0,0,0,0,this.uom);case 1:return a.fromCartesian(0,this.x,this.y,this.z,0,0,0,0,this.uom);case 2:return a.fromCartesian(0,0,0,0,this.xy,this.yz,this.zx,0,this.uom);case 3:return a.fromCartesian(0,0,0,0,0,0,0,this.xyz,this.uom);default:return a.fromCartesian(0,0,0,0,0,0,0,0,this.uom)}},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.cross=function(b){var c,e,f,g,h,i,j,k,l;return e=this.x,h=this.y,k=this.z,f=b.x,i=b.y,l=b.z,c=h*l-k*i,g=k*f-e*l,j=e*i-h*f,new a(0,c,g,j,0,0,0,0,d.mul(this.uom,b.uom))},a.prototype.length=function(){return Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z+this.xy*this.xy+this.yz*this.yz+this.zx*this.zx+this.xyz*this.xyz)},a.prototype.cos=function(){d.assertDimensionless(this.uom);var b=Math.cos(this.w);return new a(b,0,0,0,0,0,0,0,void 0)},a.prototype.cosh=function(){throw new c("cosh(Euclidean3)")},a.prototype.exp=function(){throw new c("exp(Euclidean3)")},a.prototype.norm=function(){return new a(Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z+this.xy*this.xy+this.yz*this.yz+this.zx*this.zx+this.xyz*this.xyz),0,0,0,0,0,0,0,this.uom)},a.prototype.quad=function(){return new a(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z+this.xy*this.xy+this.yz*this.yz+this.zx*this.zx+this.xyz*this.xyz,0,0,0,0,0,0,0,d.mul(this.uom,this.uom))},a.prototype.sin=function(){throw new e("sin")},a.prototype.sinh=function(){throw new e("sinh")},a.prototype.unit=function(){return this.div(this.norm())},a.prototype.scalar=function(){return this.w},a.prototype.sqrt=function(){return new a(Math.sqrt(this.w),0,0,0,0,0,0,0,d.sqrt(this.uom))},a.prototype.toStringCustom=function(a,b){var c=q(this.coordinates(),a,b);if(this.uom){var d=this.uom.toString().trim();return d?c+" "+d:c}return c},a.prototype.toExponential=function(){var a=function(a){return a.toExponential()};return this.toStringCustom(a,["1","e1","e2","e3","e12","e23","e31","e123"])},a.prototype.toFixed=function(a){f("digits",a);var b=function(b){return b.toFixed(a)};return this.toStringCustom(b,["1","e1","e2","e3","e12","e23","e31","e123"])},a.prototype.toString=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","e1","e2","e3","e12","e23","e31","e123"])},a.prototype.toStringIJK=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","i","j","k","ij","jk","ki","I"])},a.prototype.toStringLATEX=function(){var a=function(a){return a.toString()};return this.toStringCustom(a,["1","e_{1}","e_{2}","e_{3}","e_{12}","e_{23}","e_{31}","e_{123}"])},a}();return s}),b("davinci-eight/math/e3ga/scalarE3",["require","exports","davinci-blade/Euclidean3"],function(a,b,c){var d=function(a){return new c(a,0,0,0,0,0,0,0)};return d}),b("davinci-eight/math/e3ga/vectorE3",["require","exports","davinci-blade/Euclidean3"],function(a,b,c){var d=function(a,b,d){return new c(0,a,b,d,0,0,0,0)};return d}),b("davinci-eight/core/object3D",["require","exports","davinci-eight/math/e3ga/scalarE3","davinci-eight/math/e3ga/vectorE3"],function(a,b,c,d){var e=function(){var a={position:d(0,0,0),attitude:c(1)};return a};return e}),!function(a,c){if("object"==typeof exports&&"object"==typeof module)module.exports=c();else if("function"==typeof b&&b.amd)b("gl-matrix",c);else{var d=c();for(var e in d)("object"==typeof exports?exports:a)[e]=d[e]}}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){b.glMatrix=c(1),b.mat2=c(2),b.mat2d=c(3),b.mat3=c(4),b.mat4=c(5),b.quat=c(6),b.vec2=c(9),b.vec3=c(7),b.vec4=c(8)},function(a){var b={};b.EPSILON=1e-6,b.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,b.RANDOM=Math.random,b.setMatrixArrayType=function(a){GLMAT_ARRAY_TYPE=a};var c=Math.PI/180;b.toRadian=function(a){return a*c},a.exports=b},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},e.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},e.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a},e.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},e.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,
a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},e.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},e.mul=e.multiply,e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},e.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=-c,a[3]=d,a[4]=0,a[5]=0,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=b[1],a[4]=0,a[5]=0,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=b[0],a[5]=b[1],a},e.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},e.clone=function(a){var b=new d.ARRAY_TYPE(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},e.mul=e.multiply,e.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},e.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},e.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=b[0],a[7]=b[1],a[8]=1,a},e.fromRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=-c,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=b[1],a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},e.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},e.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},e.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.clone=function(a){var b=new d.ARRAY_TYPE(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},e.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},e.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},e.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},e.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},e.mul=e.multiply,e.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},e.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},e.rotate=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<d.EPSILON?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(c),g=Math.cos(c),h=1-g,i=b[0],j=b[1],k=b[2],l=b[3],m=b[4],n=b[5],o=b[6],p=b[7],q=b[8],r=b[9],s=b[10],t=b[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)},e.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},e.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},e.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},e.fromTranslation=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b[0],a[13]=b[1],a[14]=b[2],a[15]=1,a},e.fromScaling=function(a,b){return a[0]=b[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=b[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotation=function(a,b,c){var e,f,g,h=c[0],i=c[1],j=c[2],k=Math.sqrt(h*h+i*i+j*j);return Math.abs(k)<d.EPSILON?null:(k=1/k,h*=k,i*=k,j*=k,e=Math.sin(b),f=Math.cos(b),g=1-f,a[0]=h*h*g+f,a[1]=i*h*g+j*e,a[2]=j*h*g-i*e,a[3]=0,a[4]=h*i*g-j*e,a[5]=i*i*g+f,a[6]=j*i*g+h*e,a[7]=0,a[8]=h*j*g+i*e,a[9]=i*j*g-h*e,a[10]=j*j*g+f,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)},e.fromXRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=d,a[6]=c,a[7]=0,a[8]=0,a[9]=-c,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromYRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=0,a[2]=-c,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=c,a[9]=0,a[10]=d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromZRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);return a[0]=d,a[1]=c,a[2]=0,a[3]=0,a[4]=-c,a[5]=d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],i=e+e,j=f+f,k=g+g,l=e*i,m=e*j,n=e*k,o=f*j,p=f*k,q=g*k,r=h*i,s=h*j,t=h*k,u=d[0],v=d[1],w=d[2];return a[0]=(1-(o+q))*u,a[1]=(m+t)*u,a[2]=(n-s)*u,a[3]=0,a[4]=(m-t)*v,a[5]=(1-(l+q))*v,a[6]=(p+r)*v,a[7]=0,a[8]=(n+s)*w,a[9]=(p-r)*w,a[10]=(1-(l+o))*w,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},e.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],i=b[3],j=f+f,k=g+g,l=h+h,m=f*j,n=f*k,o=f*l,p=g*k,q=g*l,r=h*l,s=i*j,t=i*k,u=i*l,v=d[0],w=d[1],x=d[2],y=e[0],z=e[1],A=e[2];return a[0]=(1-(p+r))*v,a[1]=(n+u)*v,a[2]=(o-t)*v,a[3]=0,a[4]=(n-u)*w,a[5]=(1-(m+r))*w,a[6]=(q+s)*w,a[7]=0,a[8]=(o+t)*x,a[9]=(q-s)*x,a[10]=(1-(m+p))*x,a[11]=0,a[12]=c[0]+y-(a[0]*y+a[4]*z+a[8]*A),a[13]=c[1]+z-(a[1]*y+a[5]*z+a[9]*A),a[14]=c[2]+A-(a[2]*y+a[6]*z+a[10]*A),a[15]=1,a},e.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},e.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},e.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},e.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180),h=Math.tan(b.rightDegrees*Math.PI/180),i=2/(g+h),j=2/(e+f);return a[0]=i,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=j,a[6]=0,a[7]=0,a[8]=-((g-h)*i*.5),a[9]=(e-f)*j*.5,a[10]=d/(c-d),a[11]=-1,a[12]=0,a[13]=0,a[14]=d*c/(c-d),a[15]=0,a},e.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},e.lookAt=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=b[0],r=b[1],s=b[2],t=f[0],u=f[1],v=f[2],w=c[0],x=c[1],y=c[2];return Math.abs(q-w)<d.EPSILON&&Math.abs(r-x)<d.EPSILON&&Math.abs(s-y)<d.EPSILON?e.identity(a):(m=q-w,n=r-x,o=s-y,p=1/Math.sqrt(m*m+n*n+o*o),m*=p,n*=p,o*=p,g=u*o-v*n,h=v*m-t*o,i=t*n-u*m,p=Math.sqrt(g*g+h*h+i*i),p?(p=1/p,g*=p,h*=p,i*=p):(g=0,h=0,i=0),j=n*i-o*h,k=o*g-m*i,l=m*h-n*g,p=Math.sqrt(j*j+k*k+l*l),p?(p=1/p,j*=p,k*=p,l*=p):(j=0,k=0,l=0),a[0]=g,a[1]=j,a[2]=m,a[3]=0,a[4]=h,a[5]=k,a[6]=n,a[7]=0,a[8]=i,a[9]=l,a[10]=o,a[11]=0,a[12]=-(g*q+h*r+i*s),a[13]=-(j*q+k*r+l*s),a[14]=-(m*q+n*r+o*s),a[15]=1,a)},e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},a.exports=e},function(a,b,c){var d=c(1),e=c(4),f=c(7),g=c(8),h={};h.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.rotationTo=function(){var a=f.create(),b=f.fromValues(1,0,0),c=f.fromValues(0,1,0);return function(d,e,g){var i=f.dot(e,g);return-.999999>i?(f.cross(a,b,e),f.length(a)<1e-6&&f.cross(a,c,e),f.normalize(a,a),h.setAxisAngle(d,a,Math.PI),d):i>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(f.cross(a,e,g),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+i,h.normalize(d,d))}}(),h.setAxes=function(){var a=e.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],h.normalize(b,h.fromMat3(b,a))}}(),h.clone=g.clone,h.fromValues=g.fromValues,h.copy=g.copy,h.set=g.set,h.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},h.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},h.add=g.add,h.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},h.mul=h.multiply,h.scale=g.scale,h.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},h.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},h.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},h.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},h.dot=g.dot,h.lerp=g.lerp,h.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},h.sqlerp=function(){var a=h.create(),b=h.create();return function(c,d,e,f,g,i){return h.slerp(a,d,g,i),h.slerp(b,e,f,i),h.slerp(c,a,b,2*i*(1-i)),c}}(),h.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},h.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},h.length=g.length,h.len=h.length,h.squaredLength=g.squaredLength,h.sqrLen=h.squaredLength,h.normalize=g.normalize,h.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*f+g]-b[3*g+f])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},h.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.exports=h},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(3);return a[0]=0,a[1]=0,a[2]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},e.fromValues=function(a,b,c){var e=new d.ARRAY_TYPE(3);return e[0]=a,e[1]=b,e[2]=c,e},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},e.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},e.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},e.hermite=function(a,b,c,d,e,f){var g=f*f,h=g*(2*f-3)+1,i=g*(f-2)+f,j=g*(f-1),k=g*(3-2*f);return a[0]=b[0]*h+c[0]*i+d[0]*j+e[0]*k,a[1]=b[1]*h+c[1]*i+d[1]*j+e[1]*k,a[2]=b[2]*h+c[2]*i+d[2]*j+e[2]*k,a},e.bezier=function(a,b,c,d,e,f){var g=1-f,h=g*g,i=f*f,j=h*g,k=3*f*h,l=3*i*g,m=i*f;return a[0]=b[0]*j+c[0]*k+d[0]*l+e[0]*m,a[1]=b[1]*j+c[1]*k+d[1]*l+e[1]*m,a[2]=b[2]*j+c[2]*k+d[2]*l+e[2]*m,a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[3]*d+c[7]*e+c[11]*f+c[15];return g=g||1,a[0]=(c[0]*d+c[4]*e+c[8]*f+c[12])/g,a[1]=(c[1]*d+c[5]*e+c[9]*f+c[13])/g,a[2]=(c[2]*d+c[6]*e+c[10]*f+c[14])/g,a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},e.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),e.angle=function(a,b){var c=e.fromValues(a[0],a[1],a[2]),d=e.fromValues(b[0],b[1],b[2]);e.normalize(c,c),e.normalize(d,d);var f=e.dot(c,d);return f>1?0:Math.acos(f)},e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},e.fromValues=function(a,b,c,e){var f=new d.ARRAY_TYPE(4);return f[0]=a,f[1]=b,f[2]=c,f[3]=e,f},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},e.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a[2]=1/b[2],a[3]=1/b[3],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=c*g,a[1]=d*g,a[2]=e*g,a[3]=f*g),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},e.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},e.random=function(a,b){return b=b||1,a[0]=d.RANDOM(),a[1]=d.RANDOM(),a[2]=d.RANDOM(),a[3]=d.RANDOM(),e.normalize(a,a),e.scale(a,a,b),a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},e.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a[3]=b[3],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),e.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},a.exports=e},function(a,b,c){var d=c(1),e={};e.create=function(){var a=new d.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},e.clone=function(a){var b=new d.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},e.fromValues=function(a,b){var c=new d.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},e.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},e.set=function(a,b,c){return a[0]=b,a[1]=c,a},e.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},e.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},e.sub=e.subtract,e.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},e.mul=e.multiply,e.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},e.div=e.divide,e.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},e.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},e.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},e.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},e.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},e.dist=e.distance,e.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},e.sqrDist=e.squaredDistance,e.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},e.len=e.length,e.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},e.sqrLen=e.squaredLength,e.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},e.inverse=function(a,b){return a[0]=1/b[0],a[1]=1/b[1],a},e.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},e.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},e.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},e.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},e.random=function(a,b){b=b||1;var c=2*d.RANDOM()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},e.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},e.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},e.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},e.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},e.forEach=function(){var a=e.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),e.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},a.exports=e}])}),b("davinci-eight/math/Matrix4",["require","exports","gl-matrix"],function(a,b,c){var d=function(){function a(){this.elements=c.mat4.create()}return a.prototype.identity=function(){c.mat4.identity(this.elements)},a.prototype.makePerspective=function(a,b,d,e){c.mat4.perspective(this.elements,a*Math.PI/180,b,d,e)},a.prototype.translate=function(a){c.mat4.translate(this.elements,this.elements,[a.x,a.y,a.z])},a.prototype.rotate=function(a){c.mat4.fromQuat(this.elements,[a.yz,a.zx,a.xy,a.w])},a.prototype.mul=function(a){c.mat4.mul(this.elements,this.elements,a.elements)},a}();return d}),b("davinci-eight/cameras/Camera",["require","exports","../math/Matrix4"],function(a,b,c){var d="uProjectionMatrix",e="mat4",f=function(){function a(){this.projectionMatrix=new c,this.fakeHasContext=!1}return a.prototype.getUniformMatrix3=function(){return null},a.prototype.getUniformMatrix4=function(a){switch(a){case d:var b=new Float32Array(this.projectionMatrix.elements);return{transpose:!1,matrix4:b};default:return null}},Object.defineProperty(a.prototype,"drawGroupName",{get:function(){return"Camera"},enumerable:!0,configurable:!0}),a.prototype.useProgram=function(){},a.prototype.draw=function(){},a.prototype.contextFree=function(){this.fakeHasContext=!1},a.prototype.contextGain=function(){this.fakeHasContext=!0},a.prototype.contextLoss=function(){this.fakeHasContext=!1},a.prototype.hasContext=function(){return this.fakeHasContext},a.getUniformMetaInfo=function(){return{projectionMatrix:{name:d,type:e}}},a}();return f}),b("davinci-eight/cameras/camera",["require","exports","gl-matrix","davinci-eight/core/object3D"],function(a,b,c,d){var e=function(){var a=d(),b=c.mat4.create(),e={get position(){return a.position},set position(b){a.position=b},get attitude(){return a.attitude},set attitude(b){a.attitude=b},get projectionMatrix(){return b}};return e};return e}),b("davinci-eight/cameras/perspectiveCamera",["require","exports","gl-matrix","davinci-eight/cameras/camera"],function(a,b,c,d){var e=function(a,b,e,f){function g(){c.mat4.perspective(h.projectionMatrix,a,b,e,f)}void 0===a&&(a=75*Math.PI/180),void 0===b&&(b=1),void 0===e&&(e=.1),void 0===f&&(f=2e3);var h=d();g();var i={get position(){return h.position},set position(a){h.position=a},get attitude(){return h.attitude},set attitude(a){h.attitude=a},get aspect(){return b},set aspect(a){b=a,g()},get projectionMatrix(){return h.projectionMatrix}};return i};return e});var f=this.__extends||function(a,b){
function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/cameras/PerspectiveCamera",["require","exports","./Camera"],function(a,b,c){var d=function(a){function b(b,c,d,e){void 0===b&&(b=75),void 0===c&&(c=1),void 0===d&&(d=.1),void 0===e&&(e=2e3),a.call(this),this.projectionMatrix.makePerspective(b,c,d,e)}return f(b,a),b}(c);return d}),b("davinci-eight/worlds/world",["require","exports","davinci-eight/core/object3D"],function(a,b,c){var d=function(){var a,b,d=[],e={},f=(c(),{get drawGroups(){return e},get children(){return d},contextFree:function(a){for(var b=0,c=d.length;c>b;b++)d[b].contextFree(a)},contextGain:function(b,c){a=b,c=c,d.forEach(function(a){a.contextGain(b,c);var d=a.drawGroupName;e[d]||(e[d]=[]),e[d].push(a)})},contextLoss:function(){d.forEach(function(a){a.contextLoss()}),a=void 0,b=void 0},hasContext:function(){return!!a},add:function(a){d.push(a)}});return f};return d}),b("davinci-eight/worlds/Scene",["require","exports","../worlds/world"],function(a,b,c){var d=function(){function a(){this.world=c()}return a.prototype.add=function(a){return this.world.add(a)},Object.defineProperty(a.prototype,"drawGroups",{get:function(){return this.world.drawGroups},enumerable:!0,configurable:!0}),a.prototype.contextFree=function(a){return this.world.contextFree(a)},a.prototype.contextGain=function(a,b){return this.world.contextGain(a,b)},a.prototype.contextLoss=function(){return this.world.contextLoss()},a.prototype.hasContext=function(){return this.world.hasContext()},a}();return d}),b("davinci-eight/renderers/renderer",["require","exports"],function(){function a(a,b){var c;try{c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b)}catch(d){}if(c)return c;throw new Error("Unable to initialize WebGL. Your browser may not support it.")}var b=function(){function a(){this.startTime=Date.now(),this.frameTime=0}return a.prototype.time=function(){return this.frameTime},a.prototype.frameBegin=function(){},a.prototype.frameEnd=function(){this.frameTime=Date.now()-this.startTime},a}(),c=function(c){function d(a,b,c,d){e&&e.viewport(a*o,b*o,c*o,d*o)}c=c||{};var e,f,g=void 0!==c.canvas?c.canvas:document.createElement("canvas"),h=void 0!==c.alpha?c.alpha:!1,i=void 0!==c.depth?c.depth:!0,j=void 0!==c.stencil?c.stencil:!0,k=void 0!==c.antialias?c.antialias:!1,l=void 0!==c.premultipliedAlpha?c.premultipliedAlpha:!0,m=void 0!==c.preserveDrawingBuffer?c.preserveDrawingBuffer:!1,n=new b,o=1,p={get domElement(){return g},get context(){return e},contextFree:function(){e=void 0},contextGain:function(a){e=a,e.clearColor(.125,.125,.125,1),e.enable(e.DEPTH_TEST)},contextLoss:function(){},hasContext:function(){return!!e},clearColor:function(a,b,c,d){e&&e.clearColor(a,b,c,d)},render:function(a,b){n.frameBegin(),e.clearColor(.8,.8,.8,1),e.enable(e.DEPTH_TEST),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);a.hasContext()||a.contextGain(e,f);var c,d=n.time(),g=function(a){c||(a.useProgram(e),c=!0),a.draw(e,d,b)};for(var h in a.drawGroups)c=!1,a.drawGroups[h].forEach(g)},setViewport:d,setSize:function(a,b,c){g.width=a*o,g.height=b*o,c!==!1&&(g.style.width=a+"px",g.style.height=b+"px"),d(0,0,a,b)}},q={alpha:h,depth:i,stencil:j,antialias:k,premultipliedAlpha:l,preserveDrawingBuffer:m};return e=a(g,q),f=Math.random().toString(),d(0,0,g.width,g.height),p};return c}),b("davinci-eight/renderers/WebGLRenderer",["require","exports","../renderers/renderer"],function(a,b,c){var d=function(){function a(){this.renderer=c()}return a.prototype.render=function(a,b){return this.renderer.render(a,b)},a.prototype.contextFree=function(a){return this.renderer.contextFree(a)},a.prototype.contextGain=function(a,b){return this.renderer.contextGain(a,b)},a.prototype.contextLoss=function(){return this.renderer.contextLoss()},a.prototype.hasContext=function(){return this.renderer.hasContext()},a.prototype.clearColor=function(a,b,c,d){this.renderer.clearColor(a,b,c,d)},a.prototype.setClearColor=function(a,b){b="number"==typeof b?b:1,this.renderer.clearColor(1,1,1,b)},a.prototype.setSize=function(a,b){return this.renderer.setSize(a,b)},Object.defineProperty(a.prototype,"domElement",{get:function(){return this.renderer.domElement},enumerable:!0,configurable:!0}),a}();return d}),b("davinci-eight/objects/ShaderAttributeVariable",["require","exports"],function(){function a(a,b){return a.dynamic()?b.DYNAMIC_DRAW:b.STATIC_DRAW}function b(a){return a>=0}var c=function(){function c(a,b,c,d,e){this.name=a,this.size=b,this.normalized=c,this.stride=d,this.offset=e}return c.prototype.contextFree=function(a){this.buffer&&(a.deleteBuffer(this.buffer),this.contextLoss())},c.prototype.contextGain=function(a,c){this.location=a.getAttribLocation(c,this.name),b(this.location)&&(this.buffer=a.createBuffer())},c.prototype.contextLoss=function(){this.location=void 0,this.buffer=void 0},c.prototype.bind=function(a){b(this.location)&&(a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.vertexAttribPointer(this.location,this.size,a.FLOAT,this.normalized,this.stride,this.offset))},c.prototype.bufferData=function(c,d){if(b(this.location)){var e=d.getVertexAttributeData(this.name);if(!e)throw new Error("Geometry implementation claims to support but does not provide data for attribute "+this.name);c.bindBuffer(c.ARRAY_BUFFER,this.buffer),c.bufferData(c.ARRAY_BUFFER,e,a(d,c))}},c.prototype.enable=function(a){b(this.location)&&a.enableVertexAttribArray(this.location)},c.prototype.disable=function(a){b(this.location)&&a.disableVertexAttribArray(this.location)},c}();return c}),b("davinci-eight/objects/ElementArray",["require","exports"],function(){function a(a,b){return a.dynamic()?b.DYNAMIC_DRAW:b.STATIC_DRAW}var b=function(){function b(a){this.geometry=a}return b.prototype.contextFree=function(a){this.buffer&&(a.deleteBuffer(this.buffer),this.buffer=void 0)},b.prototype.contextGain=function(a){this.geometry.hasElements()&&(this.buffer=a.createBuffer())},b.prototype.contextLoss=function(){this.buffer=void 0},b.prototype.bufferData=function(b,c){if(this.buffer){var d=c.getElements();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.buffer);var e=a(c,b);b.bufferData(b.ELEMENT_ARRAY_BUFFER,d,e)}},b.prototype.bind=function(a){this.buffer&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.buffer)},b}();return b}),b("davinci-eight/objects/ShaderUniformVariable",["require","exports"],function(){var a=function(){function a(a,b){switch(this.name=a,this.type=b,b){case"mat3":case"mat4":break;default:throw new Error("Illegal argument type: "+b)}}return a.prototype.contextGain=function(a,b){this.location=a.getUniformLocation(b,this.name)},a.prototype.matrix=function(a,b,c){switch(this.type){case"mat3":a.uniformMatrix3fv(this.location,b,c);break;case"mat4":a.uniformMatrix4fv(this.location,b,c);break;default:throw new Error("Illegal argument type: "+this.type)}},a.prototype.toString=function(){return[this.type,this.name].join(" ")},a}();return a}),b("davinci-eight/objects/ChainedVertexUniformProvider",["require","exports"],function(){var a=function(){function a(a,b){this.provider=a,this.fallback=b}return a.prototype.getUniformMatrix3=function(a){var b=this.provider.getUniformMatrix3(a);return b?b:this.fallback.getUniformMatrix3(a)},a.prototype.getUniformMatrix4=function(a){var b=this.provider.getUniformMatrix4(a);return b?b:this.fallback.getUniformMatrix4(a)},a}();return a}),b("davinci-eight/objects/mesh",["require","exports","./ShaderAttributeVariable","davinci-eight/core/object3D","davinci-eight/objects/ElementArray","davinci-eight/objects/ShaderUniformVariable","./ChainedVertexUniformProvider"],function(a,b,c,d,e,f,g){var h=function(a,b,h){function i(a,b){for(var c in b){var d=b[c];if(d.name===a)return d}}function j(b){var d=b.name,e=i(d,a.getAttributeMetaInfos());if(e){var f=e.size,g=e.normalized,h=e.stride,j=e.offset;return new c(d,f,g,h,j)}throw new Error("The geometry does not support the attribute variable named "+d)}function k(a){var b=(a.modifiers,a.type),c=a.name;return new f(c,b)}function l(c,d){a.update(d,b.attributes),p.forEach(function(b){b.bufferData(c,a)}),o.bufferData(c,a)}var m,n=d(),o=new e(a),p=b.attributes.map(j),q=b.uniforms.map(k);if(q.length>0){if("undefined"==typeof h)throw new Error("meshUniforms argument must be supplied for shader uniform variables.");if("object"!=typeof h)throw new Error("meshUniforms must be an object.")}var r={get geometry(){return a},get material(){return b},contextFree:function(a){b.contextFree(a),p.forEach(function(b){b.contextFree(a)}),o.contextFree(a)},contextGain:function(c,d){m!==d&&(m=d,b.contextGain(c,d),p.forEach(function(a){a.contextGain(c,b.program)}),o.contextGain(c),a.dynamic()||l(c,0),q.forEach(function(a){a.contextGain(c,b.program)}))},contextLoss:function(){b.contextLoss(),p.forEach(function(a){a.contextLoss()}),o.contextLoss()},hasContext:function(){return b.hasContext()},get drawGroupName(){return b.programId},useProgram:function(a){a.useProgram(b.program)},draw:function(c,d,e){b.hasContext()&&(a.dynamic()&&l(c,d),q.forEach(function(a){if(!h)throw new Error("callback not supplied");var b=new g(h,e);switch(a.type){case"mat3":var d=b.getUniformMatrix3(a.name);if(!d)throw new Error("Expecting data from mesh callback for uniform "+a.name);a.matrix(c,d.transpose,d.matrix3);break;case"mat4":var f=b.getUniformMatrix4(a.name);if(!f)throw new Error("Expecting data from mesh callback for uniform "+a.name);a.matrix(c,f.transpose,f.matrix4);break;default:throw new Error("uniform type => "+a.type)}}),p.forEach(function(a){a.enable(c)}),p.forEach(function(a){a.bind(c)}),a.draw(c),o.bind(c),p.forEach(function(a){a.disable(c)}))},get position(){return n.position},set position(a){n.position=a},get attitude(){return n.attitude},set attitude(a){n.attitude=a}};return r};return h}),b("davinci-eight/math/Matrix3",["require","exports","gl-matrix"],function(a,b,c){var d=function(){function a(){this.elements=c.mat3.create()}return a.prototype.identity=function(){c.mat3.identity(this.elements)},a.prototype.normalFromMatrix4=function(a){c.mat3.normalFromMat4(this.elements,a.elements)},a}();return d}),b("davinci-eight/geometries/GeometryVertexAttributeProvider",["require","exports"],function(){var a=function(){function a(a){this.geometry=a}return a.prototype.draw=function(a){a.drawArrays(a.TRIANGLES,0,3*this.geometry.faces.length)},a.prototype.dynamic=function(){return!1},a.prototype.hasElements=function(){return!1},a.prototype.getElements=function(){throw new Error("getElements")},a.prototype.getVertexAttributeData=function(a){switch(a){case"aVertexPosition":return this.aVertexPositionArray;case"aVertexColor":return this.aVertexColorArray;case"aVertexNormal":return this.aVertexNormalArray;default:return}},a.prototype.getAttributeMetaInfos=function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0},normal:{name:"aVertexNormal",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},a.prototype.update=function(){var a=[],b=[],c=[],d=[],e=this.geometry.vertices;this.geometry.faces.forEach(function(f){d.push(f.a),d.push(f.b),d.push(f.c),a.push(e[f.a].x),a.push(e[f.a].y),a.push(e[f.a].z),a.push(e[f.b].x),a.push(e[f.b].y),a.push(e[f.b].z),a.push(e[f.c].x),a.push(e[f.c].y),a.push(e[f.c].z),b.push(0),b.push(1),b.push(0),b.push(0),b.push(1),b.push(0),b.push(0),b.push(1),b.push(0);var g=e[f.a],h=e[f.b].clone(),i=e[f.c].clone(),j=h.sub(g).cross(i.sub(g)),k=j.divideScalar(j.length());c.push(k.x),c.push(k.y),c.push(k.z),c.push(k.x),c.push(k.y),c.push(k.z),c.push(k.x),c.push(k.y),c.push(k.z)}),this.aVertexPositionArray=new Float32Array(a),this.aVertexColorArray=new Float32Array(b),this.aVertexNormalArray=new Float32Array(c)},a}();return a}),b("davinci-eight/objects/Mesh",["require","exports","davinci-blade/Euclidean3","./mesh","../math/Matrix3","../math/Matrix4","../geometries/GeometryVertexAttributeProvider"],function(a,b,c,d,e,f,g){function h(a,b){var c=new f;c.identity(),c.translate(a);var d=new f;return d.rotate(b),c.mul(d),c}var i=function(){function a(){}return a.prototype.getUniformMatrix3=function(a){switch(a){case"uN":var b=new e,c=h(this.position,this.attitude);return b.normalFromMatrix4(c),{transpose:!1,matrix3:new Float32Array(b.elements)};default:return null}},a.prototype.getUniformMatrix4=function(a){switch(a){case"uMV":var b=h(this.position,this.attitude).elements;return{transpose:!1,matrix4:new Float32Array(b)};default:return null}},a}(),j=function(){function a(a,b){this.meshVertexUniformProvider=new i,this.geometry=a;var c=new g(a);this.innerMesh=d(c,b,this.meshVertexUniformProvider)}return Object.defineProperty(a.prototype,"material",{get:function(){return this.innerMesh.material},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"attitude",{get:function(){return this.innerMesh.attitude},set:function(a){this.innerMesh.attitude=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){return this.innerMesh.position},set:function(a){this.innerMesh.position=a},enumerable:!0,configurable:!0}),a.prototype.setRotationFromQuaternion=function(a){this.innerMesh.attitude.yz=a.x,this.innerMesh.attitude.zx=a.y,this.innerMesh.attitude.xy=a.z,this.innerMesh.attitude.w=a.w},Object.defineProperty(a.prototype,"drawGroupName",{get:function(){return this.innerMesh.drawGroupName},enumerable:!0,configurable:!0}),a.prototype.useProgram=function(a){this.innerMesh.useProgram(a)},a.prototype.draw=function(a,b,c){return this.meshVertexUniformProvider.position=this.innerMesh.position,this.meshVertexUniformProvider.attitude=this.innerMesh.attitude,this.innerMesh.draw(a,b,c)},a.prototype.contextFree=function(a){return this.innerMesh.contextFree(a)},a.prototype.contextGain=function(a,b){return this.innerMesh.contextGain(a,b)},a.prototype.contextLoss=function(){return this.innerMesh.contextLoss()},a.prototype.hasContext=function(){return this.innerMesh.hasContext()},a.getUniformMetaInfo=function(){var a={};return a.modelViewMatrix={name:"uMV",type:"mat4"},a.normalMatrix={name:"uN",type:"mat3"},a},a}();return j}),b("davinci-eight/utils/webGLContextMonitor",["require","exports"],function(){var a=function(a,b,c,d){var e=function(a){a.preventDefault(),d()},f=function(b){b.preventDefault();var d=a.getContext("webgl");c(d,Math.random().toString())},g={start:function(b){a.addEventListener("webglcontextlost",e,!1),a.addEventListener("webglcontextrestored",f,!1),c(b,Math.random().toString())},stop:function(){b(),a.removeEventListener("webglcontextrestored",f,!1),a.removeEventListener("webglcontextlost",e,!1)}};return g};return a}),b("davinci-eight/utils/workbench3D",["require","exports"],function(){function a(a,b){for(var c=a.getElementsByTagName(b),d=c.length-1;d>=0;d--){var e=c[d];e.parentNode.removeChild(e)}}var b="resize",c="canvas",d=function(d,e,f,g){function h(){var a=g.innerWidth,b=g.innerHeight;e.setSize(a,b),f.aspect=a/b}void 0===g&&(g=window);var i=g.document,j=function(){h()},k={setUp:function(){i.body.insertBefore(d,i.body.firstChild),g.addEventListener(b,j,!1),h()},tearDown:function(){g.removeEventListener(b,j,!1),a(i,c)}};return k};return d}),b("davinci-eight/utils/windowAnimationRunner",["require","exports"],function(){var a=function(a,b,c,d,e){e=e||window;var f=!1,g=!1,h=!1,i=null,j=null,k=1e3,l=null,m=null,n=function(c){if(i?j=c-i:(i=c,j=0),f||b(j/k)){f=!1,e.cancelAnimationFrame(l),e.document.removeEventListener("keydown",o,!1);try{d(m)}catch(g){console.log("Exception thrown by tearDown method. "+g)}}else{l=e.requestAnimationFrame(n);try{a(j/k)}catch(g){console.log("Exception thrown by tick method. "+g),m=g,f=!0}}},o=function(a){27===a.keyCode?(f=!0,a.preventDefault()):19===a.keyCode?(g=!0,a.preventDefault()):13===a.keyCode&&(h=!0,a.preventDefault())},p={start:function(){c(),e.document.addEventListener("keydown",o,!1),l=e.requestAnimationFrame(n)},stop:function(){f=!0}};return p};return a}),b("davinci-eight/geometries/box",["require","exports","davinci-eight/math/e3ga/vectorE3"],function(a,b,c){var d=[c(-.5,-.5,.5),c(.5,-.5,.5),c(.5,.5,.5),c(-.5,.5,.5),c(-.5,-.5,-.5),c(.5,-.5,-.5),c(.5,.5,-.5),c(-.5,.5,-.5)],e=[[0,1,2],[0,2,3],[4,7,5],[5,7,6],[0,7,4],[0,3,7],[1,5,2],[2,5,6],[2,7,3],[2,6,7],[0,5,1],[0,4,5]],f=function(){var a,b,c,f=[],g={draw:function(a){a.drawArrays(a.TRIANGLES,0,3*e.length)},dynamic:function(){return!1},getAttributeMetaInfos:function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0},normal:{name:"aVertexNormal",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},hasElements:function(){return!1},getElements:function(){},getVertexAttributeData:function(d){switch(d){case"aVertexPosition":return a;case"aVertexColor":return b;case"aVertexNormal":return c;default:return}},update:function(g,h){var i=h.map(function(a){return a.name}),j=i.indexOf("aVertexPosition")>=0,k=i.indexOf("aVertexColor")>=0,l=i.indexOf("aVertexNormal")>=0;if(!j)throw new Error("Box geometry is expecting to provide aVertexPosition");var m=[],n=[],o=[];e.forEach(function(a){if(f.push(a[0]),f.push(a[1]),f.push(a[2]),j)for(var b=0;3>b;b++)m.push(d[a[b]].x),m.push(d[a[b]].y),m.push(d[a[b]].z);if(k&&(n.push(0),n.push(0),n.push(1),n.push(0),n.push(0),n.push(1),n.push(0),n.push(0),n.push(1)),l){var c=d[a[0]],e=d[a[1]],g=d[a[2]],h=e.sub(c).cross(g.sub(c)),i=h.div(h.norm());o.push(i.x),o.push(i.y),o.push(i.z),o.push(i.x),o.push(i.y),o.push(i.z),o.push(i.x),o.push(i.y),o.push(i.z)}}),j&&(a=new Float32Array(m)),k&&(b=new Float32Array(n)),l&&(c=new Float32Array(o))}};return g};return f}),b("davinci-eight/geometries/cuboid",["require","exports","davinci-blade/Euclidean3"],function(a,b,c){var d=[[0,1,2],[0,2,3],[4,7,5],[5,7,6],[0,7,4],[0,3,7],[1,5,2],[2,5,6],[2,7,3],[2,6,7],[0,5,1],[0,4,5]],e="aVertexPosition",f="aVertexColor",g=[1,0,0],h="aVertexNormal",i=function(a){function b(b,c,d,e){return a&&a[b]&&typeof a[b][c]===e?a[b][c]:d}var i,j,k,l=b("position","name",e,"string"),m=b("color","name",f,"string"),n=b("normal","name",h,"string"),o=new c(0,1,0,0,0,0,0,0),p=new c(0,0,1,0,0,0,0,0),q=new c(0,0,0,1,0,0,0,0),r=!1,s=b("color","value",g,"object"),t=[],u={get a(){return o},set a(a){o=a},get b(){return p},set b(a){p=a},get c(){return q},set c(a){q=a},get color(){return s},set color(a){s=a},get grayScale(){return r},set grayScale(a){r=a},draw:function(a){a.drawArrays(a.TRIANGLES,0,3*d.length)},dynamic:function(){return!1},getAttributeMetaInfos:function(){var a={};return a.position={name:l,type:"vec3",size:3,normalized:!1,stride:0,offset:0},r||(a.color={name:m,type:"vec3",size:3,normalized:!1,stride:0,offset:0}),a.normal={name:n,type:"vec3",size:3,normalized:!1,stride:0,offset:0},a},hasElements:function(){return!1},getElements:function(){},getVertexAttributeData:function(a){switch(a){case l:return i;case m:if(r)throw new Error("color requested when not available");return j;case n:return k;default:return}},update:function(a,b){function c(){var a=[q.sub(o).sub(p).scalarMultiply(.5),q.add(o).sub(p).scalarMultiply(.5),q.add(o).add(p).scalarMultiply(.5),q.sub(o).add(p).scalarMultiply(.5),q.scalarMultiply(-1).sub(o).sub(p).scalarMultiply(.5),q.scalarMultiply(-1).add(o).sub(p).scalarMultiply(.5),q.scalarMultiply(-1).add(o).add(p).scalarMultiply(.5),q.scalarMultiply(-1).sub(o).add(p).scalarMultiply(.5)];return a}var e=b.map(function(a){return a.name}),f=e.indexOf(l)>=0,g=e.indexOf(m)>=0,h=e.indexOf(n)>=0;if(!f)throw new Error("Cuboid geometry is expecting to provide "+l);var r=[],u=[],v=[],w=c();d.forEach(function(a){if(t.push(a[0]),t.push(a[1]),t.push(a[2]),f)for(var b=0;3>b;b++)r.push(w[a[b]].x),r.push(w[a[b]].y),r.push(w[a[b]].z);if(g&&(u.push(s[0]),u.push(s[1]),u.push(s[2]),u.push(s[0]),u.push(s[1]),u.push(s[2]),u.push(s[0]),u.push(s[1]),u.push(s[2])),h){var c=w[a[0]],d=w[a[1]],e=w[a[2]],i=d.sub(c).cross(e.sub(c)),j=i.div(i.norm());v.push(j.x),v.push(j.y),v.push(j.z),v.push(j.x),v.push(j.y),v.push(j.z),v.push(j.x),v.push(j.y),v.push(j.z)}}),f&&(i=new Float32Array(r)),g&&(j=new Float32Array(u)),h&&(k=new Float32Array(v))}};return u};return i}),b("davinci-eight/geometries/ellipsoid",["require","exports","davinci-blade/Euclidean3"],function(a,b,c){function d(a,b,c,d,e){for(var f=0;a>=f;f++){var g=b+f*c/a;d.push(Math.cos(g)),e.push(Math.sin(g))}}function e(a,b,c,d,e,f,g){var h=!1,i=h&&1===d,j=h&&-1===d;if(i)return b;if(j)return b.scalarMultiply(-1);var k=a.scalarMultiply(f).scalarMultiply(e),l=b.scalarMultiply(d),m=c.scalarMultiply(g).scalarMultiply(e);return k.add(l).add(m)}var f=2,g=3,h=7,i=f*h,j=g*h,k=function(){var a,b,h,k=new c(0,1,0,0,0,0,0,0),l=new c(0,0,1,0,0,0,0,0),m=new c(0,0,0,1,0,0,0,0),n=i,o=0,p=Math.PI,q=j,r=0,s=2*Math.PI,t=[],u=[],v={get a(){return k},set a(a){k=a},get b(){return l},set b(a){l=a},get c(){return m},set c(a){m=a},get thetaSegments(){return n},set thetaSegments(a){n=Math.max(f,Math.floor(a)||i)},get thetaStart(){return o},set thetaStart(a){o=a},get thetaLength(){return p},set thetaLength(a){p=Math.max(0,Math.min(a,Math.PI))},get phiSegments(){return q},set phiSegments(a){q=Math.max(g,Math.floor(a)||j)},get phiStart(){return r},set phiStart(a){r=a},get phiLength(){return s},set phiLength(a){s=Math.max(0,Math.min(a,2*Math.PI))},draw:function(a){a.drawArrays(a.TRIANGLES,0,3*u.length)},dynamic:function(){return!1},getAttributeMetaInfos:function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0},normal:{name:"aVertexNormal",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},hasElements:function(){return!1},getElements:function(){},getVertexAttributeData:function(c){switch(c){case"aVertexPosition":return a;case"aVertexColor":return b;case"aVertexNormal":return h;default:return}},update:function(c,f){function g(a,b){return a*(q+1)+b}function i(a,b,c,d){for(var f,g,h,i,j=[],o=0;n>=o;o++){f=a[o],g=b[o];for(var p=0;q>=p;p++)h=c[p],i=d[p],j.push(e(k,l,m,f,g,h,i))}return j}function j(){for(var a=[],b=0;n>b;b++)for(var c=0;q>c;c++){var d=g(b,c),e=g(b,c+1),f=g(b+1,c+1),h=g(b+1,c);a.push([d,e,f]),a.push([d,f,h])}return a}var v=f.map(function(a){return a.name}),w=v.indexOf("aVertexPosition")>=0,x=v.indexOf("aVertexColor")>=0,y=v.indexOf("aVertexNormal")>=0;if(!w)throw new Error("Box geometry is expecting to provide aVertexPosition");var z=[],A=[],B=[],C=[],D=[];d(n,o,p,C,D);var E=[],F=[];d(q,r,s,E,F);var G=i(C,D,E,F);u=j(),u.forEach(function(a){if(t.push(a[0]),t.push(a[1]),t.push(a[2]),w)for(var b=0;3>b;b++)z.push(G[a[b]].x),z.push(G[a[b]].y),z.push(G[a[b]].z);if(x&&(A.push(0),A.push(0),A.push(1),A.push(0),A.push(0),A.push(1),A.push(0),A.push(0),A.push(1)),y){var c=G[a[0]],d=G[a[1]],e=G[a[2]],f=d.sub(c).cross(e.sub(c)),g=f.div(f.norm());B.push(g.x),B.push(g.y),B.push(g.z),B.push(g.x),B.push(g.y),B.push(g.z),B.push(g.x),B.push(g.y),B.push(g.z)}}),w&&(a=new Float32Array(z)),x&&(b=new Float32Array(A)),y&&(h=new Float32Array(B))}};return v};return k}),b("davinci-eight/geometries/prism",["require","exports","davinci-eight/math/e3ga/vectorE3"],function(a,b,c){var d=[c(-1,0,.5),c(0,0,.5),c(1,0,.5),c(-.5,1,.5),c(.5,1,.5),c(0,2,.5),c(-1,0,-.5),c(0,0,-.5),c(1,0,-.5),c(-.5,1,-.5),c(.5,1,-.5),c(0,2,-.5)],e=[[0,1,3],[1,4,3],[1,2,4],[3,4,5],[6,9,7],[7,9,10],[7,10,8],[9,11,10],[0,3,6],[3,9,6],[3,5,9],[5,11,9],[2,8,4],[4,8,10],[4,10,5],[5,10,11],[0,6,8],[0,8,2]],f=function(){var a=[],b=[],c=[],f=[];e.forEach(function(e){a.push(e[0]),a.push(e[1]),a.push(e[2]);for(var g=d[e[0]],h=d[e[1]],i=d[e[2]],j=h.sub(g).cross(i.sub(g)),k=j.div(j.norm()),l=0;3>l;l++)b.push(d[e[l]].x),b.push(d[e[l]].y),b.push(d[e[l]].z),c.push(k.x),c.push(k.y),c.push(k.z),f.push(1),f.push(0),f.push(0)});var g={draw:function(a){a.drawArrays(a.TRIANGLES,0,3*e.length)},dynamic:function(){return!1},getAttributeMetaInfos:function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0},normal:{name:"aVertexNormal",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},hasElements:function(){return!1},getElements:function(){return null},getVertexAttributeData:function(a){switch(a){case"aVertexPosition":return new Float32Array(b);default:return}},update:function(){}};return g};return f}),b("davinci-eight/geometries/CurveGeometry",["require","exports"],function(){function a(a){for(var b=[],c=0;a>c;c++)b.push(1),b.push(1),b.push(1);return b}var b=function(){function b(a,b){this.n=a,this.generator=b}return b.prototype.draw=function(a){a.drawElements(a.POINTS,this.elements.length,a.UNSIGNED_SHORT,0)},b.prototype.dynamic=function(){return!0},b.prototype.getAttributeMetaInfos=function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},b.prototype.hasElements=function(){return!0},b.prototype.getElements=function(){return this.elements},b.prototype.getVertexAttributeData=function(a){switch(a){case"aVertexPosition":return this.vertices;case"aVertexColor":return this.vertexColors;default:return}},b.prototype.update=function(b){for(var c=this.n,d=this.generator,e=[],f=[],g=0;c>g;g++){var h=d(g,b);e.push(h.x),e.push(h.y),e.push(h.z),f.push(g)}this.elements=new Uint16Array(f),this.vertices=new Float32Array(e),this.vertexColors=new Float32Array(a(f.length))},b}();return b}),b("davinci-eight/geometries/LatticeGeometry",["require","exports"],function(){function a(a){for(var b=[],c=0;a>c;c++)b.push(1),b.push(1),b.push(1);return b}var b=function(){function b(a,b,c,d){this.I=a,this.J=b,this.K=c,this.generator=d}return b.prototype.draw=function(a){a.drawElements(a.POINTS,this.elements.length,a.UNSIGNED_SHORT,0)},b.prototype.dynamic=function(){return!0},b.prototype.getAttributeMetaInfos=function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},b.prototype.hasElements=function(){return!0},b.prototype.getElements=function(){return this.elements},b.prototype.getVertexAttributeData=function(a){switch(a){case"aVertexPosition":return this.vertices;case"aVertexColor":return this.vertexColors;case"aVertexNormal":return this.vertexNormals;default:return}},b.prototype.update=function(b){for(var c=this.I,d=this.J,e=this.K,f=this.generator,g=[],h=[],i=0,j=-c;c>=j;j++)for(var k=-d;d>=k;k++)for(var l=-e;e>=l;l++){var m=f(j,k,l,b);g.push(m.x),g.push(m.y),g.push(m.z),h.push(i),i++}this.elements=new Uint16Array(h),this.vertices=new Float32Array(g),this.vertexColors=new Float32Array(a(h.length)),this.vertexNormals=new Float32Array(a(h.length))},b}();return b}),b("davinci-eight/math/Vector3",["require","exports"],function(){var a=function(){function a(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0}return a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},a.prototype.applyQuaternion=function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},a.prototype.cross=function(a){var b=this.x,c=this.y,d=this.z;return this.x=c*a.z-d*a.y,this.y=d*a.x-b*a.z,this.z=b*a.y-c*a.x,this},a.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},a.prototype.length=function(){var a=this.x,b=this.y,c=this.z;return Math.sqrt(a*a+b*b+c*c)},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},a.prototype.normalize=function(){return this.divideScalar(this.length())},a.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this},a.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this.z*=a,this},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},a.prototype.clone=function(){return new a(this.x,this.y,this.z)},a}();return a}),b("davinci-eight/core/Face3",["require","exports","../math/Vector3"],function(a,b,c){var d=function(){function a(a,b,d,e){this.a=a,this.b=b,this.c=d,this.normal=e instanceof c?e:new c(0,0,0),this.vertexNormals=e instanceof Array?e:[]}return a}();return d}),b("davinci-eight/math/Sphere",["require","exports","../math/Vector3"],function(a,b,c){var d=function(){function a(a,b){this.center=void 0!==a?a:new c,this.radius=void 0!==b?b:0}return a.prototype.setFromPoints=function(){throw new Error("Not Implemented: Sphere.setFromPoints")},a}();return d}),b("davinci-eight/geometries/Geometry",["require","exports","../math/Sphere","../math/Vector3"],function(a,b,c,d){var e=function(){function a(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.boundingSphere=null}return a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new c),this.boundingSphere.setFromPoints(this.vertices)},a.prototype.computeFaceNormals=function(){for(var a=new d,b=new d,c=0,e=this.faces.length;e>c;c++){var f=this.faces[c],g=this.vertices[f.a],h=this.vertices[f.b],i=this.vertices[f.c];a.subVectors(i,h),b.subVectors(g,h),a.cross(b),a.normalize(),f.normal.copy(a)}},a.prototype.computeVertexNormals=function(a){var b,c,e,f,g=this.vertices.length,h=new Array(this.vertices.length);for(b=0,g=this.vertices.length;g>b;b++)h[b]=new d;if(a){var i,j,k,l=new d,m=new d;for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],i=this.vertices[f.a],j=this.vertices[f.b],k=this.vertices[f.c],l.subVectors(k,j),m.subVectors(i,j),l.cross(m),h[f.a].add(l),h[f.b].add(l),h[f.c].add(l)}else for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],h[f.a].add(f.normal),h[f.b].add(f.normal),h[f.c].add(f.normal);for(b=0,g=this.vertices.length;g>b;b++)h[b].normalize();for(c=0,e=this.faces.length;e>c;c++)f=this.faces[c],f.vertexNormals[0]=h[f.a].clone(),f.vertexNormals[1]=h[f.b].clone(),f.vertexNormals[2]=h[f.c].clone()},a.prototype.mergeVertices=function(){var a,b,c,d,e,f,g,h,i={},j=[],k=[],l=4,m=Math.pow(10,l);for(c=0,d=this.vertices.length;d>c;c++)a=this.vertices[c],b=Math.round(a.x*m)+"_"+Math.round(a.y*m)+"_"+Math.round(a.z*m),void 0===i[b]?(i[b]=c,j.push(this.vertices[c]),k[c]=j.length-1):k[c]=k[i[b]];var n=[];for(c=0,d=this.faces.length;d>c;c++){e=this.faces[c],e.a=k[e.a],e.b=k[e.b],e.c=k[e.c],f=[e.a,e.b,e.c];for(var o=-1,p=0;3>p;p++)if(f[p]==f[(p+1)%3]){o=p,n.push(c);break}}for(c=n.length-1;c>=0;c--){var q=n[c];for(this.faces.splice(q,1),g=0,h=this.faceVertexUvs.length;h>g;g++)this.faceVertexUvs[g].splice(q,1)}var r=this.vertices.length-j.length;return this.vertices=j,r},a}();return e}),b("davinci-eight/geometries/BoxGeometry",["require","exports","../geometries/cuboid"],function(a,b,c){var d=function(){function a(a,b,d){this.cuboid=c(),this.cuboid.a=this.cuboid.a.scalarMultiply(a),this.cuboid.b=this.cuboid.b.scalarMultiply(b),this.cuboid.c=this.cuboid.c.scalarMultiply(d)}return a.prototype.draw=function(a){return this.cuboid.draw(a)},a.prototype.dynamic=function(){return this.cuboid.dynamic()},a.prototype.hasElements=function(){return this.cuboid.hasElements()},a.prototype.getElements=function(){return this.cuboid.getElements()},a.prototype.getVertexAttributeData=function(a){return this.cuboid.getVertexAttributeData(a)},a.prototype.getAttributeMetaInfos=function(){return this.cuboid.getAttributeMetaInfos()},a.prototype.update=function(a,b){return this.cuboid.update(a,b)},a}();return d}),b("davinci-eight/math/Quaternion",["require","exports"],function(){var a=function(){function a(a,b,c,d){this.x=a,this.y=b,this.z=c,this.w=d}return a}();return a}),b("davinci-eight/math/Vector2",["require","exports"],function(){
var a=function(){function a(a,b){this.x=a||0,this.y=b||0}return a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.setX=function(a){return this.x=a,this},a.prototype.setY=function(a){return this.y=a,this},a.prototype.setComponent=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw new Error("index is out of range: "+a)}},a.prototype.getComponent=function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},a.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},a.prototype.addScalar=function(a){return this.x+=a,this.y+=a,this},a.prototype.addVectors=function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},a.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},a.prototype.subScalar=function(a){return this.x-=a,this.y-=a,this},a.prototype.subVectors=function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},a.prototype.multiply=function(a){return this.x*=a.x,this.y*=a.y,this},a.prototype.multiplyScalar=function(a){return this.x*=a,this.y*=a,this},a.prototype.divide=function(a){return this.x/=a.x,this.y/=a.y,this},a.prototype.divideScalar=function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b}else this.x=0,this.y=0;return this},a.prototype.min=function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this},a.prototype.max=function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this},a.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},a.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},a.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},a.prototype.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},a.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.normalize=function(){return this.divideScalar(this.length())},a.prototype.distanceTo=function(a){return Math.sqrt(this.distanceToSquared(a))},a.prototype.distanceToSquared=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},a.prototype.setLength=function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},a.prototype.lerp=function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this},a.prototype.lerpVectors=function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.fromArray=function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this},a.prototype.toArray=function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a},a.prototype.fromAttribute=function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this},a.prototype.clone=function(){return new a(this.x,this.y)},a}();return a});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/RevolutionGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Quaternion","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,d,f,i,j,k){a.call(this),f=f||12,i=i||0,j=j||2*Math.PI;var l,m,n,o,p=Math.abs(2*Math.PI-Math.abs(j-i))<1e-4,q=p?f:f+1,r=1/f,s=(j-i)*r;for(l=0,n=q;n>l;l++){var t=i+l*s,u=t/2,v=Math.cos(u),w=Math.sin(u),x=new e(d.x*w,d.y*w,d.z*w,v);for(m=0,o=b.length;o>m;m++){var y=b[m],z=new h(y.x,y.y,y.z);z.applyQuaternion(x),k&&z.applyQuaternion(k),this.vertices.push(z)}}var A=1/(b.length-1),B=b.length,C=B*q;for(l=0,n=f;n>l;l++)for(m=0,o=b.length-1;o>m;m++){var D=m+B*l,E=D%C,F=(D+B)%C,G=(D+1+B)%C,H=(D+1)%C,I=l*r,J=m*A,K=I+r,L=J+A;this.faces.push(new c(H,F,E)),this.faceVertexUvs[0].push([new g(I,J),new g(K,J),new g(I,L)]),this.faces.push(new c(H,G,F)),this.faceVertexUvs[0].push([new g(K,J),new g(K,L),new g(I,L)])}this.computeFaceNormals(),this.computeVertexNormals()}return f(b,a),b}(d);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/ArrowGeometry",["require","exports","../math/Quaternion","../geometries/RevolutionGeometry","../math/Vector3"],function(a,b,c,d,e){var g=function(a){function b(b,d,f,g,h,i,j,k){b=b||1,d=d||new c(0,0,0,1),g=(g||1)*b,h=(h||.01)*b,i=(i||.08)*b,j=(j||.2)*b,k=k||new e(0,0,1);var l=g-j,m=g/2,n=function(a){return a.x?2:a.y?1:0},o=function(a){return a.x>0?1:a.x<0?-1:a.y>0?1:a.y<0?-1:a.z>0?1:a.z<0?-1:0},p=function(a){var b=n(a),d=o(a),f=(b+0)%3,g=(b+1)%3,j=(b+2)%3,k=[[0,0,m*d],[i,0,(l-m)*d],[h,0,(l-m)*d],[h,0,-m*d],[0,0,-m*d]],p=k.map(function(a){return new e(a[f],a[g],a[j])}),q=new c(a.x,a.y,a.z,0);return{points:p,generator:q}},q=p(k);a.call(this,q.points,q.generator,f,0,2*Math.PI,d)}return f(b,a),b}(d);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/PolyhedronGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Sphere","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g,h){var i=function(a){function b(b,d,f,i){function j(a){var b=a.normalize().clone();b.index=p.vertices.push(b)-1;var c=m(a)/2/Math.PI+.5,d=n(a)/Math.PI+.5;return b.uv=new g(c,1-d),b}function k(a,b,d){var e=new c(a.index,b.index,d.index,[a.clone(),b.clone(),d.clone()]);p.faces.push(e),y.copy(a).add(b).add(d).divideScalar(3);var f=m(y);p.faceVertexUvs[0].push([o(a.uv,a,f),o(b.uv,b,f),o(d.uv,d,f)])}function l(a,b){for(var c=Math.pow(2,b),d=j(p.vertices[a.a]),e=j(p.vertices[a.b]),f=j(p.vertices[a.c]),g=[],h=0;c>=h;h++){g[h]=[];for(var i=j(d.clone().lerp(f,h/c)),l=j(e.clone().lerp(f,h/c)),m=c-h,n=0;m>=n;n++)g[h][n]=0==n&&h==c?i:j(i.clone().lerp(l,n/m))}for(var h=0;c>h;h++)for(var n=0;2*(c-h)-1>n;n++){var o=Math.floor(n/2);n%2==0?k(g[h][o+1],g[h+1][o],g[h][o]):k(g[h][o+1],g[h+1][o+1],g[h+1][o])}}function m(a){return Math.atan2(a.z,-a.x)}function n(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))}function o(a,b,c){return 0>c&&1===a.x&&(a=new g(a.x-1,a.y)),0===b.x&&0===b.z&&(a=new g(c/2/Math.PI+.5,a.y)),a.clone()}a.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:b,indices:d,radius:f,detail:i},f=f||1,i=i||0;for(var p=this,q=0,r=b.length;r>q;q+=3)j(new h(b[q],b[q+1],b[q+2]));for(var s=this.vertices,t=[],q=0,u=0,r=d.length;r>q;q+=3,u++){var v=s[d[q]],w=s[d[q+1]],x=s[d[q+2]];t[u]=new c(v.index,w.index,x.index,[v.clone(),w.clone(),x.clone()])}for(var y=new h,q=0,z=t.length;z>q;q++)l(t[q],i);for(var q=0,A=this.faceVertexUvs[0].length;A>q;q++){var B=this.faceVertexUvs[0][q],C=B[0].x,D=B[1].x,E=B[2].x,F=Math.max(C,Math.max(D,E)),G=Math.min(C,Math.min(D,E));F>.9&&.1>G&&(.2>C&&(B[0].x+=1),.2>D&&(B[1].x+=1),.2>E&&(B[2].x+=1))}for(var q=0,H=this.vertices.length;H>q;q++)this.vertices[q].multiplyScalar(f);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new e(new h,f)}return f(b,a),b}(d);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/DodecahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=(1+Math.sqrt(5))/2,e=1/d,g=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-e,-d,0,-e,d,0,e,-d,0,e,d,-e,-d,0,-e,d,0,e,-d,0,e,d,0,-d,0,-e,d,0,-e,-d,0,e,d,0,e],h=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i=function(a){function b(b,c){a.call(this,g,h,b,c)}return f(b,a),b}(c);return i});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/IcosahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=(1+Math.sqrt(5))/2,e=[-1,d,0,1,d,0,-1,-d,0,1,-d,0,0,-1,d,0,1,d,0,-1,-d,0,1,-d,d,0,-1,d,0,1,-d,0,-1,-d,0,1],g=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],h=function(a){function b(b,c){a.call(this,e,g,b,c),this.type="IcosahedronGeometry"}return f(b,a),b}(c);return h});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/OctahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],e=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],g=function(a){function b(b,c){a.call(this,d,e,b,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/TetrahedronGeometry",["require","exports","../geometries/PolyhedronGeometry"],function(a,b,c){var d=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],e=[2,1,0,0,3,2,1,3,0,2,3,1],g=function(a){function b(b,c){a.call(this,d,e,b,c)}return f(b,a),b}(c);return g});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/geometries/VortexGeometry",["require","exports","../core/Face3","../geometries/Geometry","../math/Vector2","../math/Vector3"],function(a,b,c,d,e,g){var h=function(a){function b(b,d,f,h,i,j,k){function l(a,b){var c=b%n;if(c===n-1)return l(a,b-1);var d=(b-c)/n;return v*(d+c*w)}function m(a){var b=a%n;return b===n-1?d:f}a.call(this);var n=9;b=b||1,d=d||.08,f=f||.01,h=h||.2,i=i||.8,j=j||8;var o=j*n;k=k||12;for(var p=2*Math.PI,q=b,r=new g,s=[],t=[],u=i/(h+i),v=p/j,w=u/(n-2),x=0;k>=x;x++)for(var y=p*x/k,z=Math.cos(y),A=Math.sin(y),B=0;o>=B;B++){var C=l(o,B),D=Math.cos(C),E=Math.sin(C);r.x=q*D,r.y=q*E;var F=new g,G=m(B);F.x=(q+G*z)*D,F.y=(q+G*z)*E,F.z=G*A,this.vertices.push(F),s.push(new e(B/o,x/k)),t.push(F.clone().sub(r).normalize())}for(var x=1;k>=x;x++)for(var B=1;o>=B;B++){var H=(o+1)*x+B-1,I=(o+1)*(x-1)+B-1,J=(o+1)*(x-1)+B,K=(o+1)*x+B,L=new c(H,I,K,[t[H],t[I],t[K]]);L.normal.add(t[H]),L.normal.add(t[I]),L.normal.add(t[K]),L.normal.normalize(),this.faces.push(L),this.faceVertexUvs[0].push([s[H].clone(),s[I].clone(),s[K].clone()]),L=new c(I,J,K,[t[I],t[J],t[K]]),L.normal.add(t[I]),L.normal.add(t[J]),L.normal.add(t[K]),L.normal.normalize(),this.faces.push(L),this.faceVertexUvs[0].push([s[I].clone(),s[J].clone(),s[K].clone()])}}return f(b,a),b}(d);return h}),b("davinci-eight/geometries/RGBGeometry",["require","exports"],function(){var a=function(){function a(){}return a.prototype.draw=function(a){a.drawElements(a.POINTS,this.elements.length,a.UNSIGNED_SHORT,0)},a.prototype.dynamic=function(){return!1},a.prototype.getAttributeMetaInfos=function(){return{position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0}}},a.prototype.hasElements=function(){return!0},a.prototype.getElements=function(){return this.elements},a.prototype.getVertexAttributeData=function(a){switch(a){case"aVertexPosition":return this.vertices;case"aVertexColor":return this.vertexColors;default:return}},a.prototype.update=function(){var a=[0,0,1,0,0,0,1,0,1,1,0,0,0,1,1,0,1,0,1,1,1,1,1,0].map(function(a){return a-.5}),b=[0,0,0,0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,0,1,1,1],c=[0,1,2,3,4,5,6,7];this.elements=new Uint16Array(c),this.vertices=new Float32Array(a),this.vertexColors=new Float32Array(b)},a}();return a}),b("davinci-eight/glsl/literals",["require","exports"],function(){var a=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"];return a}),b("davinci-eight/glsl/operators",["require","exports"],function(){var a=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];return a}),b("davinci-eight/glsl/builtins",["require","exports"],function(){var a=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_ProjectionMatrix","gl_ModelViewProjectionMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_ProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_ProjectionMatrixTranspose","gl_ModelViewProjectionMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_ProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod","dFdx","dFdy"];return a}),b("davinci-eight/glsl/tokenize",["require","exports","./literals","./operators","./builtins"],function(a,b,c,d,e){function f(){function a(a){a.length&&N.push({type:u[L],data:a,position:Q,line:O,column:P})}function b(a){J=0,T+=a,I=T.length;for(var b;G=T[J],I>J;){switch(b=J,L){case i:J=z();break;case j:J=y();break;case k:J=x();break;case l:J=A();break;case m:J=D();break;case t:J=C();break;case n:J=E();break;case h:J=F();break;case r:J=w();break;case g:J=v()}if(b!==J)switch(T[b]){case"\n":P=0,++O;break;default:++P}}return K+=J,T=T.slice(J),N}function f(){return M.length&&a(M.join("")),L=s,a("(eof)"),N}function v(){return M=M.length?[]:M,"/"===H&&"*"===G?(Q=K+J-1,L=i,H=G,J+1):"/"===H&&"/"===G?(Q=K+J-1,L=j,H=G,J+1):"#"===G?(L=k,Q=K+J,J):/\s/.test(G)?(L=r,Q=K+J,J):(R=/\d/.test(G),S=/[^\w_]/.test(G),Q=K+J,L=R?m:S?l:h,J)}function w(){return/[^\s]/g.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function x(){return"\n"===G&&"\\"!==H?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function y(){return x()}function z(){return"/"===G&&"*"===H?(M.push(G),a(M.join("")),L=g,J+1):(M.push(G),H=G,J+1)}function A(){if("."===H&&/\d/.test(G))return L=n,J;if("/"===H&&"*"===G)return L=i,J;if("/"===H&&"/"===G)return L=j,J;if("."===G&&M.length){for(;B(M););return L=n,J}if(";"===G||")"===G||"("===G){if(M.length)for(;B(M););return a(G),L=g,J+1}var b=2===M.length&&"="!==G;if(/[\w_\d\s]/.test(G)||b){for(;B(M););return L=g,J}return M.push(G),H=G,J+1}function B(b){for(var c,e,f=0;;){if(c=d.indexOf(b.slice(0,b.length+f).join("")),e=d[c],-1===c){if(f--+b.length>0)continue;e=b.slice(0,1).join("")}return a(e),Q+=e.length,M=M.slice(e.length),M.length}}function C(){return/[^a-fA-F0-9]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function D(){return"."===G?(M.push(G),L=n,H=G,J+1):/[eE]/.test(G)?(M.push(G),L=n,H=G,J+1):"x"===G&&1===M.length&&"0"===M[0]?(L=t,M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function E(){return"f"===G&&(M.push(G),H=G,J+=1),/[eE]/.test(G)?(M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=g,J):(M.push(G),H=G,J+1)}function F(){if(/[^\d\w_]/.test(G)){var b=M.join("");return L=c.indexOf(b)>-1?q:e.indexOf(b)>-1?p:o,a(M.join("")),L=g,J}return M.push(G),H=G,J+1}var G,H,I,J=0,K=0,L=g,M=[],N=[],O=1,P=0,Q=0,R=!1,S=!1,T="";return function(a){return N=[],null!==a?b(a):f()}}var g=999,h=9999,i=0,j=1,k=2,l=3,m=4,n=5,o=6,p=7,q=8,r=9,s=10,t=11,u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];return f}),b("davinci-eight/glsl/tokenizeString",["require","exports","./tokenize"],function(a,b,c){function d(a){var b=c(),d=[];return d=d.concat(b(a)),d=d.concat(b(null))}return d}),b("davinci-eight/glsl/expr",["require","exports"],function(){function a(a){return function(){return k.unexpected(a)}}function b(a,b){var c=p[a];return b=b||0,c?b>c.lbp&&(c.lbp=b):(c=Object.create(o),c.id=a,c.lbp=b,p[a]=c),c}function c(a,c,d){var e=b(a,c);e.led=d||function(a){return this.children=[a,i(c)],this.type="binary",this}}function d(a,c,d){var e=b(a,c);return e.led=d||function(a){return this.children=[a,i(c-1)],this.type="binary",this},e}function e(a,c){var d=b(a);return d.nud=c||function(){return this.children=[i(70)],this.type="unary",this},d}function f(a){var c=b(a,150);c.led=function(a){return this.children=[a],this.type="suffix",this}}function g(a){return d(a,10,function(a){return this.children=[a,i(9)],this.assignment=!0,this.type="assign",this})}function h(a,b){function c(a){k.unshift(a,!1);for(var b=0,d=a.children.length;d>b;++b)c(a.children[b]);k.shift()}k=a,m=b,n=0;var d;if(m.length){if(j(),d=i(0),d.parent=k[0],c(d),n<m.length)throw new Error("did not use all tokens");d.parent.children=[d]}}function i(a){var b,c=l;for(j(),b=c.nud();a<l.lbp;)c=l,j(),b=c.led(b);return b}function j(a){var b,c,d,e;if(a&&l.data!==a)return k.unexpected("expected `"+a+"`, got `"+l.data+"`");if(n>=m.length)return void(l=p["(end)"]);if(b=m[n++],c=b.data,d=b.type,"ident"===d)e=k.scope.find(c)||k.create_node(),d=e.type;else if("builtin"===d)e=p["(builtin)"];else if("keyword"===d)e=p["(keyword)"];else if("operator"===d){if(e=p[c],!e)return k.unexpected("unknown operator `"+c+"`")}else{if("float"!==d&&"integer"!==d)return k.unexpected("unexpected token.");d="literal",e=p["(literal)"]}return e&&(e.nud||(e.nud=q),e.children||(e.children=[])),e=Object.create(e),e.token=b,e.type=d,e.data||(e.data=c),l=e}var k,l,m,n,o={nud:function(){return this.children&&this.children.length?this:a("unexpected")()},led:a("missing operator")},p={},q=function(){return this};return b("(ident)").nud=q,b("(keyword)").nud=q,b("(builtin)").nud=q,b("(literal)").nud=q,b("(end)"),b(":"),b(";"),b(","),b(")"),b("]"),b("}"),d("&&",30),d("||",30),c("|",43),c("^",44),c("&",45),c("==",46),c("!=",46),c("<",47),c("<=",47),c(">",47),c(">=",47),c(">>",48),c("<<",48),c("+",50),c("-",50),c("*",60),c("/",60),c("%",60),c("?",20,function(a){return this.children=[a,i(0),(j(":"),i(0))],this.type="ternary",this}),c(".",80,function(a){return l.type="literal",k.fake(l),this.children=[a,l],j(),this}),c("[",80,function(a){return this.children=[a,i(0)],this.type="binary",j("]"),this}),c("(",80,function(a){if(this.children=[a],this.type="call",")"!==l.data)for(;;){if(this.children.push(i(0)),","!==l.data)break;j(",")}return j(")"),this}),e("-"),e("+"),e("!"),e("~"),e("defined"),e("(",function(){return this.type="group",this.children=[i(0)],j(")"),this}),e("++"),e("--"),f("++"),f("--"),g("="),g("+="),g("-="),g("*="),g("/="),g("%="),g("&="),g("|="),g("^="),g(">>="),g("<<="),h}),b("davinci-eight/glsl/Scope",["require","exports"],function(){var a=function(){function a(a){this.state=a,this.scopes=[],this.current=null}return a.prototype.enter=function(a){this.scopes.push(this.current=this.state[0].scope=a||{})},a.prototype.exit=function(){this.scopes.pop(),this.current=this.scopes[this.scopes.length-1]},a.prototype.define=function(a){this.current[a]=this.state[0]},a.prototype.find=function(a){for(var b=this.scopes.length-1;b>-1;--b)if(this.scopes[b].hasOwnProperty(a))return this.scopes[b][a];return null},a}();return a}),b("davinci-eight/glsl/parser",["require","exports","./expr","./Scope"],function(a,b,c,d){function e(){function a(a){return null===a?(e(),Fa):(Za=[],b(a),Za)}function b(a){if("whitespace"===a.type||"line-comment"===a.type||"block-comment"===a.type)return void _a.push(a);for($a.push(a),Ga=Ga||$a[0],Ga&&_a.length&&(Ga.preceding=Ga.preceding||[],Ga.preceding=Ga.preceding.concat(_a),_a=[]);y();)switch(Ya[0].mode){case m:Y();break;case n:X();break;case r:$();break;case s:_();break;case w:da();break;case o:va(!0,!0);break;case x:wa();break;case l:ca();break;case A:ba();break;case B:aa();break;case p:Da();break;case q:Ea();break;case t:ya();break;case u:Ba();break;case G:Ca();break;case C:Aa();break;case v:za();break;case I:xa()}}function e(a){return arguments.length&&b(a),Ya.length>1?void ka("unexpected EOF"):void(Wa=!0)}function y(){return ab||!Ya.length?!1:Ga=$a[0]}function z(a){Ya.unshift(a),Ya.shift()}function L(a,b){a.parent=Ya[0];var c=[].unshift.call(this,a);if(b=void 0===b?!0:b,k)for(var d="",e=0,f=this.length-1;f>e;++e)d+=" |";return b&&Ha!==a&&Ha.children.push(a),Ha=a,c}function W(){var a=[].shift.call(this),b=Va[this.length],c=!1;if(k)for(var d="",e=0,f=this.length;f>e;++e)d+=" |";return Va.length?"function"==typeof Va[0]?c=Va[0](a):void 0!==b&&(c=b.test?b.test(a.type):b===a.type):c=!0,c&&!ab&&Za.push(a),Ha=a.parent,a}function X(){function a(){if(Ga.data===Ya[0].expecting)return Ya.scope.exit(),Ya.shift();switch(Ga.type){case"preprocessor":return Ya.fake(fa()),void $a.shift();default:return void Ya.unshift(Ja())}}return na(function(){return Ya.scope.enter(),j},a)()}function Y(){if(Ya[0].brace)return"}"!==Ga.data?ka("expected `}`, got "+Ga.data):(Ya[0].brace=!1,$a.shift(),Ya.shift());switch(Ga.type){case"eof":return Z();case"keyword":switch(Ga.data){case"for":return Ya.unshift(Pa());case"if":return Ya.unshift(Qa());case"while":return Ya.unshift(Ra());case"do":return Ya.unshift(Ta());case"break":return Ya.fake(f(D,Ga)),$a.shift();case"continue":return Ya.fake(f(E,Ga)),$a.shift();case"discard":return Ya.fake(f(F,Ga)),$a.shift();case"return":return Ya.unshift(Sa());case"precision":return Ya.unshift(La())}return Ya.unshift(ga(Q));case"ident":var a;if(a=Ya.scope.find(Ga.data))return Ya.unshift("struct"===a.parent.type?ga(Q):ia(";"));case"operator":if("{"===Ga.data){Ya[0].brace=!0;var b=Ia();return b.expecting="}",$a.shift(),Ya.unshift(b)}if(";"===Ga.data)return $a.shift(),Ya.shift();default:return Ya.unshift(ia(";"))}}function Z(){return Xa&&(ab=!0),Xa=!0,Ya.shift()}function $(){function a(){return"invariant"===Ga.data?o.flags&M?(Ya.unshift(ja()),j):ka("`invariant` is not allowed here"):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function b(){return g(Ga)?o.flags&N?(Ya.unshift(ja()),j):ka("storage is not allowed here"):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function c(){return h(Ga)?o.flags&O?ka("parameter is not allowed here"):(Ya.unshift(ja()),j):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function d(){return i(Ga)?(Ya.unshift(ja()),j):(Ya.fake(f(H,{data:"",position:Ga.position})),j)}function e(){if("struct"===Ga.data)return o.flags&P?(Ya.unshift(ha()),j):ka("cannot nest structs");if("keyword"===Ga.type)return Ya.unshift(ja()),j;var a=Ya.scope.find(Ga.data);return a?(Ya.fake(Object.create(a)),$a.shift(),j):ka("expected user defined type, struct or keyword, got "+Ga.data)}function k(){return","!==Ga.data||o.flags&K?"["===Ga.data?void Ya.unshift(Ua()):")"===Ga.data?Ya.shift():";"===Ga.data?o.stage+3:"ident"!==Ga.type&&"builtin"!==Ga.type?ka("expected identifier, got "+Ga.data):(o.collected_name=$a.shift(),j):Ya.shift()}function l(){return"("===Ga.data?($a.unshift(o.collected_name),delete o.collected_name,Ya.unshift(Na()),o.stage+2):j}function m(){return $a.unshift(o.collected_name),delete o.collected_name,Ya.unshift(Ka()),j}function n(){return Ya.shift()}var o=Ya[0];return na(a,b,c,d,e,k,l,m,n)()}function _(){if("ident"===Ga.type){var a=Ga.data;return Ya.unshift(Ma()),void Ya.scope.define(a)}if("operator"===Ga.type){if(","===Ga.data)return Ya[1].flags&K?$a.shift():Ya.shift();if("="===Ga.data)return Ya[1].flags&J?($a.shift(),void Ya.unshift(ia(",",";"))):ka("`=` is not allowed here.");if("["===Ga.data)return void Ya.unshift(Ua())}return Ya.shift()}function aa(){return"keyword"===Ga.type?(Ya[0].type="keyword",void(Ya[0].mode=A)):"ident"===Ga.type?(Ya[0].type="ident",void(Ya[0].mode=l)):ka("expected keyword or user-defined name, got "+Ga.data)}function ba(){return"keyword"!==Ga.type?ka("expected keyword, got "+Ga.data):(Ya.shift(),$a.shift())}function ca(){return"ident"!==Ga.type?ka("expected user-defined name, got "+Ga.data):(Ya[0].data=Ga.data,Ya.shift(),$a.shift())}function da(){function a(a){try{c(Ya,a)}catch(b){throw ab=!0,b}return Ya.shift()}var b=Ya[0].expecting;if(Ya[0].tokens=Ya[0].tokens||[],void 0===Ya[0].parenlevel&&(Ya[0].parenlevel=0,Ya[0].bracelevel=0),Ya[0].parenlevel<1&&b.indexOf(Ga.data)>-1)return a(Ya[0].tokens);switch("("===Ga.data?++Ya[0].parenlevel:")"===Ga.data&&--Ya[0].parenlevel,Ga.data){case"{":++Ya[0].bracelevel;break;case"}":--Ya[0].bracelevel;break;case"(":++Ya[0].parenlevel;break;case")":--Ya[0].parenlevel}return Ya[0].parenlevel<0?ka("unexpected `)`"):Ya[0].bracelevel<0?ka("unexpected `}`"):void Ya[0].tokens.push($a.shift())}function ea(a){return function(){return f(a,Ga)}}function fa(){return f(V[Ga.type],Ga,Ha)}function ga(a){var b=f(r,Ga,Ha);return b.flags=a,b}function ha(a,b){var c=f(o,Ga,Ha);return c.allow_assign=void 0===a?!0:a,c.allow_comma=void 0===b?!0:b,c}function ia(){var a=f(w,Ga,Ha);return a.expecting=[].slice.call(arguments),a}function ja(a){var b=Ga;return a&&(b={type:"(implied)",data:"(default)",position:b.position}),f(A,b,Ha)}function ka(a){throw ab=!0,new Error((a||"unexpected "+Ya)+" at line "+Ya[0].token.line)}function la(a,b){return ma(a,Ga.type)&&ma(b,Ga.data)}function ma(a,b){switch(typeof a){case"string":return b!==a&&ka("expected `"+a+"`, got "+b+"\n"+Ga.data),!ab;case"object":return a&&-1===a.indexOf(b)&&ka("expected one of `"+a.join("`, `")+"`, got "+b),!ab}return!0}function na(){var a,b,c=[].slice.call(arguments);return function(){var d=Ya[0];return d.stage||(d.stage=0),(a=c[d.stage])?(b=a(),b===j?++d.stage:void(void 0!==b&&(d.stage=b))):ka("parser in undefined state!")}}function oa(a,b){return b=b||"operator",function(){if(la(b,a)){var c=$a.shift(),d=Ya[0].children,e=d[d.length-1];return e&&e.token&&c.preceding&&(e.token.succeeding=e.token.succeeding||[],e.token.succeeding=e.token.succeeding.concat(c.preceding)),j}}}function pa(a){return function(){return Ya.unshift(ia(a)),j}}function qa(a){return a?function(){var a=Ga.data;return la("ident")&&(Ya.unshift(Ma()),Ya.scope.define(a),j)}:function(){if(la("ident")){var a=Object.create(Ya.scope.find(Ga.data));return a.token=Ga,$a.shift(),j}}}function ra(){return function(){var a=Ia();return a.expecting="}",Ya.unshift(a),j}}function sa(a){return function(){var b=Ya[0].stage;return"{"!==Ga.data?(Ya.unshift(Ja()),b+a):($a.shift(),j)}}function ta(){return function(){return Ya.shift(),Ya.shift()}}function ua(){va=na(oa("struct","keyword"),function(){return"{"===Ga.data?(Ya.fake(f(l,{data:"",position:Ga.position,type:"ident"})),j):qa(!0)()},function(){return Ya.scope.enter(),j},oa("{"),function(){return"preprocessor"===Ga.type?(Ya.fake(fa()),void $a.shift()):"}"===Ga.data?(Ya.scope.exit(),$a.shift(),Ya.shift()):";"===Ga.data?void $a.shift():void Ya.unshift(ga(S))}),wa=na(function(){return $a.shift(),j},function(){return la("keyword",["lowp","mediump","highp"])&&(Ya.unshift(ja()),j)},function(){return Ya.unshift(ja()),j},function(){return Ya.shift()}),xa=na(oa("["),pa("]"),oa("]"),function(){return Ya.shift()}),ya=na(oa("for","keyword"),oa("("),function(){var a;if("ident"===Ga.type){if((a=Ya.scope.find(Ga.data))||(a=Ya.create_node()),"struct"===a.parent.type)return Ya.unshift(ga(Q)),j}else if("builtin"===Ga.type||"keyword"===Ga.type)return Ya.unshift(ga(Q)),j;return pa(";")()},oa(";"),pa(";"),oa(";"),pa(")"),oa(")"),sa(3),ra(),oa("}"),ta()),za=na(oa("if","keyword"),oa("("),pa(")"),oa(")"),sa(3),ra(),oa("}"),function(){return"else"===Ga.data?($a.shift(),Ya.unshift(Ja()),j):ta()()},ta()),Aa=na(oa("return","keyword"),function(){return";"===Ga.data?j:(Ya.unshift(ia(";")),j)},function(){$a.shift(),ta()()}),Ba=na(oa("while","keyword"),oa("("),pa(")"),oa(")"),sa(3),ra(),oa("}"),ta()),Ca=na(oa("do","keyword"),sa(3),ra(),oa("}"),oa("while","keyword"),oa("("),pa(")"),oa(")"),ta()),Da=na(function(){for(var a=1,b=Ya.length;b>a;++a)if(Ya[a].mode===p)return ka("function definition is not allowed within another function");return j},function(){if(la("ident")){var a=Ga.data,b=Ya.scope.find(a);return Ya.unshift(Ma()),Ya.scope.define(a),Ya.scope.enter(b?b.scope:null),j}},oa("("),function(){return Ya.unshift(Oa()),j},oa(")"),function(){return";"===Ga.data?(Ya.scope.exit(),Ya.shift(),Ya.shift()):j},oa("{"),ra(),oa("}"),function(){return Ya.scope.exit(),j},function(){return Ya.shift(),Ya.shift(),Ya.shift()}),Ea=na(function(){return"void"===Ga.data?(Ya.fake(ja()),$a.shift(),j):")"===Ga.data?void Ya.shift():"struct"===Ga.data?(Ya.unshift(ha(T,U)),j):(Ya.unshift(ga(R)),j)},function(){return","===Ga.data?($a.shift(),0):")"===Ga.data?void Ya.shift():void ka("expected one of `,` or `)`, got "+Ga.data)})}var va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia=ea(n),Ja=ea(m),Ka=ea(s),La=ea(x),Ma=ea(l),Na=(ea(B),ea(p)),Oa=ea(q),Pa=ea(t),Qa=ea(v),Ra=ea(u),Sa=ea(C),Ta=ea(G),Ua=ea(I),Va=arguments.length?[].slice.call(arguments):[],Wa=!1,Xa=!1,Ya=[],Za=[],$a=[],_a=[],ab=!1;return Ya.shift=W,Ya.unshift=L,Ya.fake=z,Ya.unexpected=ka,Ya.scope=new d(Ya),Ya.create_node=function(){var b=f(l,Ga);return b.parent=a.program,b},ua(),Ha=Ia(),Ha.expecting="(eof)",Ha.mode=n,Ha.token={type:"(program)",data:"(program)"},Fa=Ha,a.program=Fa,a.scope=function(a){return 1===arguments.length&&(Ya.scope=a),Ya.scope},Ya.unshift(Ha),
a}function f(a,b){return{mode:a,token:b,children:[],type:W[a],id:(4294967295*Math.random()).toString(16)}}function g(a){return"const"===a.data||"attribute"===a.data||"uniform"===a.data||"varying"===a.data}function h(a){return"in"===a.data||"inout"===a.data||"out"===a.data}function i(a){return"highp"===a.data||"mediump"===a.data||"lowp"===a.data}var j={},k=!1,l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=9,v=10,w=11,x=12,y=13,z=14,A=15,B=16,C=17,D=18,E=19,F=20,G=21,H=22,I=23,J=1,K=2,L=4,M=8,N=16,O=32,P=64,Q=255,R=Q&~(J|K|O|M|L),S=Q&~(J|M|N|P),T=!1,U=!1,V={"block-comment":y,"line-comment":y,preprocessor:z},W=["ident","stmt","stmtlist","struct","function","functionargs","decl","decllist","forloop","whileloop","if","expr","precision","comment","preprocessor","keyword","keyword_or_ident","return","break","continue","discard","do-while","placeholder","quantifier"];return e}),b("davinci-eight/glsl/parse",["require","exports","../glsl/tokenizeString","../glsl/parser"],function(a,b,c,d){function e(a){for(var b=c(a),e=d(),f=0;f<b.length;f++)e(b[f]);var g=e(null);return g}return e}),b("davinci-eight/glsl/DefaultNodeEventHandler",["require","exports"],function(){var a=function(){function a(){}return a.prototype.beginStatementList=function(){},a.prototype.endStatementList=function(){},a.prototype.beginStatement=function(){},a.prototype.endStatement=function(){},a.prototype.beginDeclaration=function(){},a.prototype.endDeclaration=function(){},a.prototype.declaration=function(){},a.prototype.beginDeclarationList=function(){},a.prototype.endDeclarationList=function(){},a.prototype.beginFunction=function(){},a.prototype.endFunction=function(){},a.prototype.beginFunctionArgs=function(){},a.prototype.endFunctionArgs=function(){},a.prototype.beginExpression=function(){},a.prototype.endExpression=function(){},a.prototype.beginAssign=function(){},a.prototype.endAssign=function(){},a.prototype.identifier=function(){},a.prototype.keyword=function(){},a.prototype.builtin=function(){},a}();return a});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/glsl/NodeWalker",["require","exports","./DefaultNodeEventHandler"],function(a,b,c){var d=function(a){function b(b){a.call(this),this.modifiers=[],this.names=[],this.next=b}return f(b,a),b.prototype.beginDeclaration=function(){this.kind=void 0,this.type=void 0,this.modifiers=[],this.names=[]},b.prototype.endDeclaration=function(){this.kind&&this.next.declaration(this.kind,this.modifiers,this.type,this.names)},b.prototype.identifier=function(a){this.names.push(a)},b.prototype.keyword=function(a){switch(a){case"attribute":case"uniform":case"varying":this.kind=a;break;case"float":case"mat3":case"mat4":case"vec3":case"vec4":case"void":this.type=a;break;case"highp":this.modifiers.push(a);break;default:throw new Error("keyword: "+a)}},b}(c),e=function(){function a(){}return a.prototype.walk=function(a,b){var c=this;switch(a.type){case"assign":b.beginAssign(),a.children.forEach(function(a){c.walk(a,b)}),b.endAssign();break;case"builtin":b.builtin(a.token.data);break;case"binary":break;case"call":break;case"decl":var e=new d(b);e.beginDeclaration(),a.children.forEach(function(a){c.walk(a,e)}),e.endDeclaration();break;case"decllist":b.beginDeclarationList(),a.children.forEach(function(a){c.walk(a,b)}),b.endDeclarationList();break;case"expr":b.beginExpression(),a.children.forEach(function(a){c.walk(a,b)}),b.endExpression();break;case"function":b.beginFunction(),a.children.forEach(function(a){c.walk(a,b)}),b.endFunction();break;case"functionargs":b.beginFunctionArgs(),a.children.forEach(function(a){c.walk(a,b)}),b.endFunctionArgs();break;case"ident":b.identifier(a.token.data);break;case"keyword":b.keyword(a.token.data);break;case"literal":break;case"placeholder":break;case"stmt":b.beginStatement(),a.children.forEach(function(a){c.walk(a,b)}),b.endStatement();break;case"stmtlist":b.beginStatementList(),a.children.forEach(function(a){c.walk(a,b)}),b.endStatementList();break;default:throw new Error("type: "+a.type)}},a}();return e}),b("davinci-eight/glsl/Declaration",["require","exports"],function(){var a=function(){function a(a,b,c,d){this.kind=a,this.modifiers=b,this.type=c,this.name=d}return a}();return a});var f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};b("davinci-eight/glsl/ProgramArgs",["require","exports","./DefaultNodeEventHandler","./Declaration"],function(a,b,c,d){var e=function(a){function b(){a.call(this),this.attributes=[],this.uniforms=[],this.varyings=[]}return f(b,a),b.prototype.declaration=function(a,b,c,e){var f={};f.attribute=this.attributes,f.uniform=this.uniforms,f.varying=this.varyings;var g=f[a];if(!g)throw new Error("Unexpected declaration kind: "+a);e.forEach(function(e){g.push(new d(a,b,c,e))})},b}(c);return e}),b("davinci-eight/utils/uuid4",["require","exports"],function(){function a(){var a=function(a){return Math.pow(2,a)},b=(a(4),a(6)),c=a(8),d=a(12),e=(a(14),a(16)),f=a(32),g=(a(40),a(48),function(a,b){return Math.floor(Math.random()*(b-a+1))+a}),h=function(){return g(0,b-1)},i=function(){return g(0,c-1)},j=function(){return g(0,d-1)},k=function(){return g(0,e-1)},l=function(){return g(0,f-1)},m=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},n=function(a,b,c){a=String(a),c=c?c:"0";for(var d=b-a.length;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},o=function(a,b,c,d,e,f){var g=n(a.toString(16),8)+"-"+n(b.toString(16),4)+"-"+n(c.toString(16),4)+"-"+n(d.toString(16),2)+n(e.toString(16),2)+"-"+n(f.toString(16),12);return g};return{generate:function(){return o(l(),k(),16384|j(),128|h(),i(),m())},validate:function(a){var b=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return b.test(a)}}}return a}),b("davinci-eight/materials/shaderMaterial",["require","exports","../glsl/parse","../glsl/NodeWalker","../glsl/ProgramArgs","../utils/uuid4"],function(a,b,c,d,e,f){function g(a,b,c){var d=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(d,b),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(d));var e=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(e,c),a.compileShader(e),!a.getShaderParameter(e,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(e));var f=a.createProgram();if(a.attachShader(f,d),a.attachShader(f,e),a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS))throw new Error(a.getProgramInfoLog(f));return f}var h=function(){var a,b,h,i,j,k=[],l=[],m=[],n={get vertexShader(){return a},set vertexShader(b){try{var f=c(b);a=b;var g=new d,h=new e;g.walk(f,h),k=h.attributes.map(function(a){return{modifiers:a.modifiers,type:a.type,name:a.name}}),l=h.uniforms.map(function(a){return{modifiers:a.modifiers,type:a.type,name:a.name}}),m=h.varyings.map(function(a){return{modifiers:a.modifiers,type:a.type,name:a.name}})}catch(i){console.log(i)}},get fragmentShader(){return b},set fragmentShader(a){try{{c(a)}b=a}catch(d){console.log(d)}},get attributes(){return k},get uniforms(){return l},get varyings(){return m},contextFree:function(a){h&&(a.deleteProgram(h),h=void 0,i=void 0,j=void 0)},contextGain:function(c,d){j!==d&&(h=g(c,a,b),i=f().generate(),j=d)},contextLoss:function(){h=void 0,i=void 0,j=void 0},hasContext:function(){return!!h},get program(){return h},get programId(){return i}};return n};return h}),b("davinci-eight/materials/pointsMaterial",["require","exports","./shaderMaterial"],function(a,b,c){var d=["attribute vec3 aVertexPosition;","attribute vec3 aVertexColor;","","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","","varying highp vec4 vColor;","void main(void)","{","gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);","vColor = vec4(aVertexColor, 1.0);","gl_PointSize = 6.0;","}"].join("\n"),e=["varying highp vec4 vColor;","void main(void)","{","gl_FragColor = vColor;","}"].join("\n"),f=function(){var a=c();a.vertexShader=d,a.fragmentShader=e;var b={get attributes(){return a.attributes},get uniforms(){return a.uniforms},get varyings(){return a.varyings},get program(){return a.program},get programId(){return a.programId},contextFree:function(b){return a.contextFree(b)},contextGain:function(b,c){return a.contextGain(b,c)},contextLoss:function(){return a.contextLoss()},hasContext:function(){return a.hasContext()}};return b};return f}),b("davinci-eight/materials/smartMaterial",["require","exports","./shaderMaterial"],function(a,b,c){var d=function(a,b){var c=[];a.position&&c.push("attribute "+a.position.type+" "+a.position.name+";"),a.color&&c.push("attribute "+a.color.type+" "+a.color.name+";"),b.normalMatrix&&a.normal&&c.push("attribute "+a.normal.type+" "+a.normal.name+";"),b.projectionMatrix&&c.push("uniform "+b.projectionMatrix.type+" "+b.projectionMatrix.name+";"),b.modelViewMatrix&&c.push("uniform "+b.modelViewMatrix.type+" "+b.modelViewMatrix.name+";"),b.normalMatrix&&a.normal&&c.push("uniform "+b.normalMatrix.type+" "+b.normalMatrix.name+";"),a.color&&c.push("varying highp vec4 vColor;"),b.normalMatrix&&a.normal&&c.push("varying highp vec3 vLight;"),c.push("void main(void)"),c.push("{"),c.push(b.projectionMatrix?b.modelViewMatrix?"  gl_Position = "+b.projectionMatrix.name+" * "+b.modelViewMatrix.name+" * vec4("+a.position.name+", 1.0);":"  gl_Position = "+b.projectionMatrix.name+" * vec4("+a.position.name+", 1.0);":b.modelViewMatrix?"  gl_Position = "+b.modelViewMatrix.name+" * vec4("+a.position.name+", 1.0);":"  gl_Position = vec4("+a.position.name+", 1.0);"),a.color&&c.push("  vColor = vec4("+a.color.name+", 1.0);"),b.normalMatrix&&a.normal&&(c.push("  vec3 ambientLight = vec3(0.3, 0.3, 0.3);"),c.push("  vec3 diffuseLightColor = vec3(0.8, 0.8, 0.8);"),c.push("  vec3 L = normalize(vec3(8.0, 10.0, 5.0));"),c.push("  vec3 N = normalize("+b.normalMatrix.name+" * "+a.normal.name+");"),c.push("  float diffuseLightAmount = max(dot(N, L), 0.0);"),c.push("  vLight = ambientLight + (diffuseLightAmount * diffuseLightColor);")),c.push("  gl_PointSize = 6.0;"),c.push("}");var d=c.join("\n");return d},e=function(a,b){var c=[];a.color&&c.push("varying highp vec4 vColor;"),b.normalMatrix&&a.normal&&c.push("varying highp vec3 vLight;"),c.push("void main(void)"),c.push("{"),c.push(a.color?b.normalMatrix&&a.normal?"  gl_FragColor = vec4(vColor.xyz * vLight, vColor.a);":"  gl_FragColor = vColor;":b.normalMatrix&&a.normal?"  gl_FragColor = vec4(vLight, 1.0);":"  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);"),c.push("}");var d=c.join("\n");return d},f=function(a,b){if(!a)throw new Error("The attributes parameter is required for smartMaterial.");if(!b)throw new Error("The uniforms parameter is required for smartMaterial.");var f=c();f.vertexShader=d(a,b),f.fragmentShader=e(a,b);var g={get attributes(){return f.attributes},get uniforms(){return f.uniforms},get varyings(){return f.varyings},get program(){return f.program},get programId(){return f.programId},contextFree:function(a){return f.contextFree(a)},contextGain:function(a,b){return f.contextGain(a,b)},contextLoss:function(){return f.contextLoss()},hasContext:function(){return f.hasContext()}};return g};return f}),b("davinci-eight/materials/MeshBasicMaterial",["require","exports","../cameras/Camera","../objects/Mesh","../materials/smartMaterial"],function(a,b,c,d,e){var f={position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0},normal:{name:"aVertexNormal",type:"vec3",size:3,normalized:!1,stride:0,offset:0}},g=function(){function a(){var a=c.getUniformMetaInfo(),b=d.getUniformMetaInfo();for(var g in b)a[g]=b[g];this.material=e(f,a)}return a.prototype.contextFree=function(a){return this.material.contextFree(a)},a.prototype.contextGain=function(a,b){return this.material.contextGain(a,b)},a.prototype.contextLoss=function(){return this.material.contextLoss()},a.prototype.hasContext=function(){return this.material.hasContext()},Object.defineProperty(a.prototype,"attributes",{get:function(){return this.material.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"uniforms",{get:function(){return this.material.uniforms},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"varyings",{get:function(){return this.material.varyings},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"program",{get:function(){return this.material.program},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"programId",{get:function(){return this.material.programId},enumerable:!0,configurable:!0}),a}();return g}),b("davinci-eight/materials/MeshNormalMaterial",["require","exports","../cameras/Camera","../objects/Mesh","../materials/smartMaterial"],function(a,b,c,d,e){var f={position:{name:"aVertexPosition",type:"vec3",size:3,normalized:!1,stride:0,offset:0},color:{name:"aVertexColor",type:"vec3",size:3,normalized:!1,stride:0,offset:0},normal:{name:"aVertexNormal",type:"vec3",size:3,normalized:!1,stride:0,offset:0}},g=function(){function a(){var a=c.getUniformMetaInfo(),b=d.getUniformMetaInfo();for(var g in b)a[g]=b[g];this.material=e(f,a)}return a.prototype.contextFree=function(a){return this.material.contextFree(a)},a.prototype.contextGain=function(a,b){return this.material.contextGain(a,b)},a.prototype.contextLoss=function(){return this.material.contextLoss()},a.prototype.hasContext=function(){return this.material.hasContext()},Object.defineProperty(a.prototype,"attributes",{get:function(){return this.material.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"uniforms",{get:function(){return this.material.uniforms},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"varyings",{get:function(){return this.material.varyings},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"program",{get:function(){return this.material.program},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"programId",{get:function(){return this.material.programId},enumerable:!0,configurable:!0}),a}();return g}),b("davinci-eight",["require","exports","davinci-eight/core","davinci-eight/core/object3D","davinci-eight/cameras/Camera","davinci-eight/cameras/perspectiveCamera","davinci-eight/cameras/PerspectiveCamera","davinci-eight/worlds/world","davinci-eight/worlds/Scene","davinci-eight/renderers/renderer","davinci-eight/renderers/WebGLRenderer","davinci-eight/objects/mesh","davinci-eight/objects/Mesh","davinci-eight/utils/webGLContextMonitor","davinci-eight/utils/workbench3D","davinci-eight/utils/windowAnimationRunner","davinci-eight/geometries/box","davinci-eight/geometries/cuboid","davinci-eight/geometries/ellipsoid","davinci-eight/geometries/prism","davinci-eight/geometries/CurveGeometry","davinci-eight/geometries/LatticeGeometry","davinci-eight/core/Face3","davinci-eight/geometries/Geometry","davinci-eight/geometries/GeometryVertexAttributeProvider","davinci-eight/geometries/BoxGeometry","davinci-eight/geometries/ArrowGeometry","davinci-eight/geometries/DodecahedronGeometry","davinci-eight/geometries/IcosahedronGeometry","davinci-eight/geometries/OctahedronGeometry","davinci-eight/geometries/PolyhedronGeometry","davinci-eight/geometries/RevolutionGeometry","davinci-eight/geometries/TetrahedronGeometry","davinci-eight/geometries/VortexGeometry","davinci-eight/geometries/RGBGeometry","davinci-eight/materials/pointsMaterial","davinci-eight/materials/shaderMaterial","davinci-eight/materials/smartMaterial","davinci-eight/objects/ShaderAttributeVariable","davinci-eight/math/Matrix3","davinci-eight/math/Matrix4","davinci-eight/materials/MeshBasicMaterial","davinci-eight/materials/MeshNormalMaterial","davinci-eight/math/Quaternion","davinci-eight/math/Vector2","davinci-eight/math/Vector3"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T){var U={VERSION:c.VERSION,perspective:f,get world(){return h},object3D:d,renderer:j,contextMonitor:n,workbench:o,animationRunner:p,get mesh(){return l},get box(){return q},get cuboid(){return r},get ellipsoid(){return s},prism:t,CurveGeometry:u,LatticeGeometry:v,RGBGeometry:I,ShaderAttributeVariable:M,get pointsMaterial(){return J},get shaderMaterial(){return K},get smartMaterial(){return L},get Scene(){return i},get Camera(){return e},get PerspectiveCamera(){return g},get WebGLRenderer(){return k},get Face3(){return w},get Geometry(){return x},get GeometryVertexAttributeProvider(){return y},get BoxGeometry(){return z},get DodecahedronGeometry(){return B},get IcosahedronGeometry(){return C},get OctahedronGeometry(){return D},get PolyhedronGeometry(){return E},get RevolutionGeometry(){return F},get TetrahedronGeometry(){return G},get ArrowGeometry(){return A},get VortexGeometry(){return H},get Mesh(){return m},get MeshBasicMaterial(){return P},get MeshNormalMaterial(){return Q},get Matrix3(){return N},get Matrix4(){return O},get Quaternion(){return R},get Vector2(){return S},get Vector3(){return T}};return U});var g=d("davinci-eight");"undefined"!=typeof module&&module.exports?module.exports=g:e?!function(a){a(function(){return g})}(e):a.EIGHT=g}(this);